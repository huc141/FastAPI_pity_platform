(self.webpackChunkpity=self.webpackChunkpity||[]).push([[286],{86067:function(Lo,D,m){"use strict";var o=m(42281),f=m(44479),c=m(5474),M=m(48658),_=m(7421),x=m.n(_),O=m(93509),S=m(82114),g=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],d=M.forwardRef(function(y,E){var b=y.className,p=y.component,A=y.viewBox,C=y.spin,N=y.rotate,P=y.tabIndex,L=y.onClick,z=y.children,X=(0,c.Z)(y,g);(0,S.Kp)(Boolean(p||z),"Should have `component` prop or `children`."),(0,S.C3)();var re=M.useContext(O.Z),se=re.prefixCls,ce=se===void 0?"anticon":se,xe=re.rootClassName,ye=x()(xe,ce,b),W=x()((0,f.Z)({},"".concat(ce,"-spin"),!!C)),Ie=N?{msTransform:"rotate(".concat(N,"deg)"),transform:"rotate(".concat(N,"deg)")}:void 0,ge=(0,o.Z)((0,o.Z)({},S.vD),{},{className:W,style:Ie,viewBox:A});A||delete ge.viewBox;var te=function(){return p?M.createElement(p,(0,o.Z)({},ge),z):z?((0,S.Kp)(Boolean(A)||M.Children.count(z)===1&&M.isValidElement(z)&&M.Children.only(z).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),M.createElement("svg",(0,o.Z)((0,o.Z)({},ge),{},{viewBox:A}),z)):null},H=P;return H===void 0&&L&&(H=-1),M.createElement("span",(0,o.Z)((0,o.Z)({role:"img"},X),{},{ref:E,tabIndex:H,onClick:L,className:ye}),te())});d.displayName="AntdIcon",D.Z=d},9791:function(Lo,D,m){"use strict";m.d(D,{Z:function(){return g}});var o=m(42281),f=m(5474),c=m(48658),M=m(86067),_=["type","children"],x=new Set;function O(d){return Boolean(typeof d=="string"&&d.length&&!x.has(d))}function S(d){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,E=d[y];if(O(E)){var b=document.createElement("script");b.setAttribute("src",E),b.setAttribute("data-namespace",E),d.length>y+1&&(b.onload=function(){S(d,y+1)},b.onerror=function(){S(d,y+1)}),x.add(E),document.body.appendChild(b)}}function g(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=d.scriptUrl,E=d.extraCommonProps,b=E===void 0?{}:E;y&&typeof document!="undefined"&&typeof window!="undefined"&&typeof document.createElement=="function"&&(Array.isArray(y)?S(y.reverse()):S([y]));var p=c.forwardRef(function(A,C){var N=A.type,P=A.children,L=(0,f.Z)(A,_),z=null;return A.type&&(z=c.createElement("use",{xlinkHref:"#".concat(N)})),P&&(z=P),c.createElement(M.Z,(0,o.Z)((0,o.Z)((0,o.Z)({},b),L),{},{ref:C}),z)});return p.displayName="Iconfont",p}},7279:function(Lo){(function(D,m){Lo.exports=m()})(this,function(){return function(D){var m={};function o(f){if(m[f])return m[f].exports;var c=m[f]={i:f,l:!1,exports:{}};return D[f].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=D,o.c=m,o.d=function(f,c,M){o.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:M})},o.r=function(f){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},o.t=function(f,c){if(1&c&&(f=o(f)),8&c||4&c&&typeof f=="object"&&f&&f.__esModule)return f;var M=Object.create(null);if(o.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:f}),2&c&&typeof f!="string")for(var _ in f)o.d(M,_,function(x){return f[x]}.bind(null,_));return M},o.n=function(f){var c=f&&f.__esModule?function(){return f.default}:function(){return f};return o.d(c,"a",c),c},o.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},o.p="",o(o.s=547)}([function(D,m,o){"use strict";o.r(m),o.d(m,"contains",function(){return c}),o.d(m,"includes",function(){return c}),o.d(m,"difference",function(){return _}),o.d(m,"find",function(){return L}),o.d(m,"findIndex",function(){return z}),o.d(m,"firstValue",function(){return X}),o.d(m,"flatten",function(){return re}),o.d(m,"flattenDeep",function(){return se}),o.d(m,"getRange",function(){return ye}),o.d(m,"pull",function(){return te}),o.d(m,"pullAt",function(){return V}),o.d(m,"reduce",function(){return ie}),o.d(m,"remove",function(){return we}),o.d(m,"sortBy",function(){return oe}),o.d(m,"union",function(){return ee}),o.d(m,"uniq",function(){return J}),o.d(m,"valuesOfKey",function(){return Y}),o.d(m,"head",function(){return K}),o.d(m,"last",function(){return G}),o.d(m,"startsWith",function(){return ne}),o.d(m,"endsWith",function(){return le}),o.d(m,"filter",function(){return M}),o.d(m,"every",function(){return ue}),o.d(m,"some",function(){return Q}),o.d(m,"group",function(){return Ae}),o.d(m,"groupBy",function(){return Se}),o.d(m,"groupToMap",function(){return je}),o.d(m,"getWrapBehavior",function(){return Ce}),o.d(m,"wrapBehavior",function(){return Re}),o.d(m,"number2color",function(){return Le}),o.d(m,"parseRadius",function(){return Ke}),o.d(m,"clamp",function(){return et}),o.d(m,"fixedBase",function(){return ot}),o.d(m,"isDecimal",function(){return At}),o.d(m,"isEven",function(){return Tt}),o.d(m,"isInteger",function(){return jt}),o.d(m,"isNegative",function(){return Kt}),o.d(m,"isNumberEqual",function(){return Qt}),o.d(m,"isOdd",function(){return rr}),o.d(m,"isPositive",function(){return or}),o.d(m,"max",function(){return ce}),o.d(m,"maxBy",function(){return Mr}),o.d(m,"min",function(){return xe}),o.d(m,"minBy",function(){return cr}),o.d(m,"mod",function(){return yr}),o.d(m,"toDegree",function(){return Xr}),o.d(m,"toInteger",function(){return gr}),o.d(m,"toRadian",function(){return dr}),o.d(m,"forIn",function(){return Br}),o.d(m,"has",function(){return Rr}),o.d(m,"hasKey",function(){return pn}),o.d(m,"hasValue",function(){return Nr}),o.d(m,"keys",function(){return p}),o.d(m,"isMatch",function(){return A}),o.d(m,"values",function(){return zr}),o.d(m,"lowerCase",function(){return rn}),o.d(m,"lowerFirst",function(){return Ir}),o.d(m,"substitute",function(){return On}),o.d(m,"upperCase",function(){return In}),o.d(m,"upperFirst",function(){return Dn}),o.d(m,"getType",function(){return gn}),o.d(m,"isArguments",function(){return Er}),o.d(m,"isArray",function(){return d}),o.d(m,"isArrayLike",function(){return f}),o.d(m,"isBoolean",function(){return ln}),o.d(m,"isDate",function(){return yn}),o.d(m,"isError",function(){return mn}),o.d(m,"isFunction",function(){return S}),o.d(m,"isFinite",function(){return Qn}),o.d(m,"isNil",function(){return g}),o.d(m,"isNull",function(){return Un}),o.d(m,"isNumber",function(){return dt}),o.d(m,"isObject",function(){return E}),o.d(m,"isObjectLike",function(){return N}),o.d(m,"isPlainObject",function(){return P}),o.d(m,"isPrototype",function(){return Ei}),o.d(m,"isRegExp",function(){return ni}),o.d(m,"isString",function(){return ke}),o.d(m,"isType",function(){return O}),o.d(m,"isUndefined",function(){return Bn}),o.d(m,"isElement",function(){return wi}),o.d(m,"requestAnimationFrame",function(){return Oi}),o.d(m,"clearAnimationFrame",function(){return Wn}),o.d(m,"augment",function(){return hi}),o.d(m,"clone",function(){return oi}),o.d(m,"debounce",function(){return di}),o.d(m,"memoize",function(){return _i}),o.d(m,"deepMix",function(){return Yn}),o.d(m,"each",function(){return b}),o.d(m,"extend",function(){return Mi}),o.d(m,"indexOf",function(){return Bi}),o.d(m,"isEmpty",function(){return io}),o.d(m,"isEqual",function(){return ci}),o.d(m,"isEqualWith",function(){return li}),o.d(m,"map",function(){return oo}),o.d(m,"mapValues",function(){return Zi}),o.d(m,"mix",function(){return Jn}),o.d(m,"assign",function(){return Jn}),o.d(m,"get",function(){return go}),o.d(m,"set",function(){return nr}),o.d(m,"pick",function(){return Ne}),o.d(m,"omit",function(){return He}),o.d(m,"throttle",function(){return ft}),o.d(m,"toArray",function(){return Ct}),o.d(m,"toString",function(){return Dr}),o.d(m,"uniqueId",function(){return vr}),o.d(m,"noop",function(){return Be}),o.d(m,"identity",function(){return ut}),o.d(m,"size",function(){return bt}),o.d(m,"Cache",function(){return Ft});var f=function(_e){return _e!==null&&typeof _e!="function"&&isFinite(_e.length)},c=function(_e,ze){return!!f(_e)&&_e.indexOf(ze)>-1},M=function(_e,ze){if(!f(_e))return _e;for(var Qe=[],lt=0;lt<_e.length;lt++){var vt=_e[lt];ze(vt,lt)&&Qe.push(vt)}return Qe},_=function(_e,ze){return ze===void 0&&(ze=[]),M(_e,function(Qe){return!c(ze,Qe)})},x={}.toString,O=function(_e,ze){return x.call(_e)==="[object "+ze+"]"},S=function(_e){return O(_e,"Function")},g=function(_e){return _e==null},d=function(_e){return Array.isArray?Array.isArray(_e):O(_e,"Array")};function y(_e){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(_e)}var E=function(_e){var ze=y(_e);return _e!==null&&ze==="object"||ze==="function"},b=function(_e,ze){if(_e){if(d(_e))for(var Qe=0,lt=_e.length;Qe<lt&&ze(_e[Qe],Qe)!==!1;Qe++);else if(E(_e)){for(var vt in _e)if(_e.hasOwnProperty(vt)&&ze(_e[vt],vt)===!1)break}}},p=Object.keys?function(_e){return Object.keys(_e)}:function(_e){var ze=[];return b(_e,function(Qe,lt){S(_e)&&lt==="prototype"||ze.push(lt)}),ze},A=function(_e,ze){var Qe=p(ze),lt=Qe.length;if(g(_e))return!lt;for(var vt=0;vt<lt;vt+=1){var wt=Qe[vt];if(ze[wt]!==_e[wt]||!(wt in _e))return!1}return!0};function C(_e){return(C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(_e)}var N=function(_e){return C(_e)==="object"&&_e!==null},P=function(_e){if(!N(_e)||!O(_e,"Object"))return!1;if(Object.getPrototypeOf(_e)===null)return!0;for(var ze=_e;Object.getPrototypeOf(ze)!==null;)ze=Object.getPrototypeOf(ze);return Object.getPrototypeOf(_e)===ze},L=function(_e,ze){if(!d(_e))return null;var Qe;if(S(ze)&&(Qe=ze),P(ze)&&(Qe=function(vt){return A(vt,ze)}),Qe){for(var lt=0;lt<_e.length;lt+=1)if(Qe(_e[lt]))return _e[lt]}return null},z=function(_e,ze,Qe){Qe===void 0&&(Qe=0);for(var lt=Qe;lt<_e.length;lt++)if(ze(_e[lt],lt))return lt;return-1},X=function(_e,ze){for(var Qe=null,lt=0;lt<_e.length;lt++){var vt=_e[lt][ze];if(!g(vt)){Qe=d(vt)?vt[0]:vt;break}}return Qe},re=function(_e){if(!d(_e))return[];for(var ze=[],Qe=0;Qe<_e.length;Qe++)ze=ze.concat(_e[Qe]);return ze},se=function _e(ze,Qe){if(Qe===void 0&&(Qe=[]),d(ze))for(var lt=0;lt<ze.length;lt+=1)_e(ze[lt],Qe);else Qe.push(ze);return Qe},ce=function(_e){if(d(_e))return _e.reduce(function(ze,Qe){return Math.max(ze,Qe)},_e[0])},xe=function(_e){if(d(_e))return _e.reduce(function(ze,Qe){return Math.min(ze,Qe)},_e[0])},ye=function(_e){var ze=_e.filter(function(wt){return!isNaN(wt)});if(!ze.length)return{min:0,max:0};if(d(_e[0])){for(var Qe=[],lt=0;lt<_e.length;lt++)Qe=Qe.concat(_e[lt]);ze=Qe}var vt=ce(ze);return{min:xe(ze),max:vt}},W=Array.prototype,Ie=W.splice,ge=W.indexOf,te=function(_e){for(var ze=[],Qe=1;Qe<arguments.length;Qe++)ze[Qe-1]=arguments[Qe];for(var lt=0;lt<ze.length;lt++)for(var vt=ze[lt],wt=-1;(wt=ge.call(_e,vt))>-1;)Ie.call(_e,wt,1);return _e},H=Array.prototype.splice,V=function(_e,ze){if(!f(_e))return[];for(var Qe=_e?ze.length:0,lt=Qe-1;Qe--;){var vt=void 0,wt=ze[Qe];Qe!==lt&&wt===vt||(vt=wt,H.call(_e,wt,1))}return _e},ie=function(_e,ze,Qe){if(!d(_e)&&!P(_e))return _e;var lt=Qe;return b(_e,function(vt,wt){lt=ze(lt,vt,wt)}),lt},we=function(_e,ze){var Qe=[];if(!f(_e))return Qe;for(var lt=-1,vt=[],wt=_e.length;++lt<wt;){var Lt=_e[lt];ze(Lt,lt,_e)&&(Qe.push(Lt),vt.push(lt))}return V(_e,vt),Qe},ke=function(_e){return O(_e,"String")},oe=function(_e,ze){var Qe;if(S(ze))Qe=function(vt,wt){return ze(vt)-ze(wt)};else{var lt=[];ke(ze)?lt.push(ze):d(ze)&&(lt=ze),Qe=function(vt,wt){for(var Lt=0;Lt<lt.length;Lt+=1){var Wt=lt[Lt];if(vt[Wt]>wt[Wt])return 1;if(vt[Wt]<wt[Wt])return-1}return 0}}return _e.sort(Qe),_e};function J(_e,ze){ze===void 0&&(ze=new Map);var Qe=[];if(Array.isArray(_e))for(var lt=0,vt=_e.length;lt<vt;lt++){var wt=_e[lt];ze.has(wt)||(Qe.push(wt),ze.set(wt,!0))}return Qe}var ee=function(){for(var _e=[],ze=0;ze<arguments.length;ze++)_e[ze]=arguments[ze];return J([].concat.apply([],_e))},Y=function(_e,ze){for(var Qe=[],lt={},vt=0;vt<_e.length;vt++){var wt=_e[vt][ze];if(!g(wt)){d(wt)||(wt=[wt]);for(var Lt=0;Lt<wt.length;Lt++){var Wt=wt[Lt];lt[Wt]||(Qe.push(Wt),lt[Wt]=!0)}}}return Qe};function K(_e){if(f(_e))return _e[0]}function G(_e){if(f(_e))return _e[_e.length-1]}var ne=function(_e,ze){return!(!d(_e)&&!ke(_e))&&_e[0]===ze},le=function(_e,ze){return!(!d(_e)&&!ke(_e))&&_e[_e.length-1]===ze},ue=function(_e,ze){for(var Qe=0;Qe<_e.length;Qe++)if(!ze(_e[Qe],Qe))return!1;return!0},Q=function(_e,ze){for(var Qe=0;Qe<_e.length;Qe++)if(ze(_e[Qe],Qe))return!0;return!1},he=Object.prototype.hasOwnProperty,Se=function(_e,ze){if(!ze||!d(_e))return{};for(var Qe,lt={},vt=S(ze)?ze:function(Wt){return Wt[ze]},wt=0;wt<_e.length;wt++){var Lt=_e[wt];Qe=vt(Lt),he.call(lt,Qe)?lt[Qe].push(Lt):lt[Qe]=[Lt]}return lt};function je(_e,ze){if(!ze)return{0:_e};if(!S(ze)){var Qe=d(ze)?ze:ze.replace(/\s+/g,"").split("*");ze=function(lt){for(var vt="_",wt=0,Lt=Qe.length;wt<Lt;wt++)vt+=lt[Qe[wt]]&&lt[Qe[wt]].toString();return vt}}return Se(_e,ze)}var Ae=function(_e,ze){if(!ze)return[_e];var Qe=je(_e,ze),lt=[];for(var vt in Qe)lt.push(Qe[vt]);return lt},Ce=function(_e,ze){return _e["_wrap_"+ze]},Re=function(_e,ze){if(_e["_wrap_"+ze])return _e["_wrap_"+ze];var Qe=function(lt){_e[ze](lt)};return _e["_wrap_"+ze]=Qe,Qe},Ee={},Le=function(_e){var ze=Ee[_e];if(!ze){for(var Qe=_e.toString(16),lt=Qe.length;lt<6;lt++)Qe="0"+Qe;ze="#"+Qe,Ee[_e]=ze}return ze},Ke=function(_e){var ze=0,Qe=0,lt=0,vt=0;return d(_e)?_e.length===1?ze=Qe=lt=vt=_e[0]:_e.length===2?(ze=lt=_e[0],Qe=vt=_e[1]):_e.length===3?(ze=_e[0],Qe=vt=_e[1],lt=_e[2]):(ze=_e[0],Qe=_e[1],lt=_e[2],vt=_e[3]):ze=Qe=lt=vt=_e,{r1:ze,r2:Qe,r3:lt,r4:vt}},et=function(_e,ze,Qe){return _e<ze?ze:_e>Qe?Qe:_e},ot=function(_e,ze){var Qe=ze.toString(),lt=Qe.indexOf(".");if(lt===-1)return Math.round(_e);var vt=Qe.substr(lt+1).length;return vt>20&&(vt=20),parseFloat(_e.toFixed(vt))},dt=function(_e){return O(_e,"Number")},At=function(_e){return dt(_e)&&_e%1!=0},Tt=function(_e){return dt(_e)&&_e%2==0},jt=Number.isInteger?Number.isInteger:function(_e){return dt(_e)&&_e%1==0},Kt=function(_e){return dt(_e)&&_e<0};function Qt(_e,ze,Qe){return Qe===void 0&&(Qe=1e-5),Math.abs(_e-ze)<Qe}var rr=function(_e){return dt(_e)&&_e%2!=0},or=function(_e){return dt(_e)&&_e>0},Mr=function(_e,ze){if(d(_e)){for(var Qe,lt=-1/0,vt=0;vt<_e.length;vt++){var wt=_e[vt],Lt=S(ze)?ze(wt):wt[ze];Lt>lt&&(Qe=wt,lt=Lt)}return Qe}},cr=function(_e,ze){if(d(_e)){for(var Qe,lt=1/0,vt=0;vt<_e.length;vt++){var wt=_e[vt],Lt=S(ze)?ze(wt):wt[ze];Lt<lt&&(Qe=wt,lt=Lt)}return Qe}},yr=function(_e,ze){return(_e%ze+ze)%ze},br=180/Math.PI,Xr=function(_e){return br*_e},gr=parseInt,xr=Math.PI/180,dr=function(_e){return xr*_e},Br=b,Rr=function(_e,ze){return _e.hasOwnProperty(ze)},pn=Rr,zr=Object.values?function(_e){return Object.values(_e)}:function(_e){var ze=[];return b(_e,function(Qe,lt){S(_e)&&lt==="prototype"||ze.push(Qe)}),ze},Nr=function(_e,ze){return c(zr(_e),ze)},Dr=function(_e){return g(_e)?"":_e.toString()},rn=function(_e){return Dr(_e).toLowerCase()},Ir=function(_e){var ze=Dr(_e);return ze.charAt(0).toLowerCase()+ze.substring(1)},On=function(_e,ze){return _e&&ze?_e.replace(/\\?\{([^{}]+)\}/g,function(Qe,lt){return Qe.charAt(0)==="\\"?Qe.slice(1):ze[lt]===void 0?"":ze[lt]}):_e},In=function(_e){return Dr(_e).toUpperCase()},Dn=function(_e){var ze=Dr(_e);return ze.charAt(0).toUpperCase()+ze.substring(1)},Rn={}.toString,gn=function(_e){return Rn.call(_e).replace(/^\[object /,"").replace(/]$/,"")},Er=function(_e){return O(_e,"Arguments")},ln=function(_e){return O(_e,"Boolean")},yn=function(_e){return O(_e,"Date")},mn=function(_e){return O(_e,"Error")},Qn=function(_e){return dt(_e)&&isFinite(_e)},Un=function(_e){return _e===null},ri=Object.prototype,Ei=function(_e){var ze=_e&&_e.constructor;return _e===(typeof ze=="function"&&ze.prototype||ri)},ni=function(_e){return O(_e,"RegExp")},Bn=function(_e){return _e===void 0},wi=function(_e){return _e instanceof Element||_e instanceof HTMLDocument};function Oi(_e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(ze){return setTimeout(ze,16)})(_e)}function Wn(_e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(_e)}function ii(_e,ze){for(var Qe in ze)ze.hasOwnProperty(Qe)&&Qe!=="constructor"&&ze[Qe]!==void 0&&(_e[Qe]=ze[Qe])}function Jn(_e,ze,Qe,lt){return ze&&ii(_e,ze),Qe&&ii(_e,Qe),lt&&ii(_e,lt),_e}var hi=function(){for(var _e=[],ze=0;ze<arguments.length;ze++)_e[ze]=arguments[ze];for(var Qe=_e[0],lt=1;lt<_e.length;lt++){var vt=_e[lt];S(vt)&&(vt=vt.prototype),Jn(Qe.prototype,vt)}};function Vn(_e){return(Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze})(_e)}var oi=function _e(ze){if(Vn(ze)!=="object"||ze===null)return ze;var Qe;if(d(ze)){Qe=[];for(var lt=0,vt=ze.length;lt<vt;lt++)Vn(ze[lt])==="object"&&ze[lt]!=null?Qe[lt]=_e(ze[lt]):Qe[lt]=ze[lt]}else for(var wt in Qe={},ze)Vn(ze[wt])==="object"&&ze[wt]!=null?Qe[wt]=_e(ze[wt]):Qe[wt]=ze[wt];return Qe},di=function(_e,ze,Qe){var lt;return function(){var vt=this,wt=arguments,Lt=function(){lt=null,Qe||_e.apply(vt,wt)},Wt=Qe&&!lt;clearTimeout(lt),lt=setTimeout(Lt,ze),Wt&&_e.apply(vt,wt)}},_i=function(_e,ze){if(!S(_e))throw new TypeError("Expected a function");var Qe=function lt(){for(var vt=[],wt=0;wt<arguments.length;wt++)vt[wt]=arguments[wt];var Lt=ze?ze.apply(this,vt):vt[0],Wt=lt.cache;if(Wt.has(Lt))return Wt.get(Lt);var er=_e.apply(this,vt);return Wt.set(Lt,er),er};return Qe.cache=new Map,Qe};function Xn(_e,ze,Qe,lt){for(var vt in Qe=Qe||0,lt=lt||5,ze)if(ze.hasOwnProperty(vt)){var wt=ze[vt];wt!==null&&P(wt)?(P(_e[vt])||(_e[vt]={}),Qe<lt?Xn(_e[vt],wt,Qe+1,lt):_e[vt]=ze[vt]):d(wt)?(_e[vt]=[],_e[vt]=_e[vt].concat(wt)):wt!==void 0&&(_e[vt]=wt)}}var Yn=function(_e){for(var ze=[],Qe=1;Qe<arguments.length;Qe++)ze[Qe-1]=arguments[Qe];for(var lt=0;lt<ze.length;lt+=1)Xn(_e,ze[lt]);return _e},Mi=function(_e,ze,Qe,lt){S(ze)||(Qe=ze,ze=_e,_e=function(){});var vt=Object.create?function(Lt,Wt){return Object.create(Lt,{constructor:{value:Wt}})}:function(Lt,Wt){function er(){}er.prototype=Lt;var tr=new er;return tr.constructor=Wt,tr},wt=vt(ze.prototype,_e);return _e.prototype=Jn(wt,_e.prototype),_e.superclass=vt(ze.prototype,ze),Jn(wt,Qe),Jn(_e,lt),_e},Bi=function(_e,ze){if(!f(_e))return-1;var Qe=Array.prototype.indexOf;if(Qe)return Qe.call(_e,ze);for(var lt=-1,vt=0;vt<_e.length;vt++)if(_e[vt]===ze){lt=vt;break}return lt},Hn=Object.prototype.hasOwnProperty,io=function(_e){if(g(_e))return!0;if(f(_e))return!_e.length;var ze=gn(_e);if(ze==="Map"||ze==="Set")return!_e.size;if(Ei(_e))return!Object.keys(_e).length;for(var Qe in _e)if(Hn.call(_e,Qe))return!1;return!0},ci=function _e(ze,Qe){if(ze===Qe)return!0;if(!ze||!Qe||ke(ze)||ke(Qe))return!1;if(f(ze)||f(Qe)){if(ze.length!==Qe.length)return!1;for(var lt=!0,vt=0;vt<ze.length&&(lt=_e(ze[vt],Qe[vt]));vt++);return lt}if(N(ze)||N(Qe)){var wt=Object.keys(ze),Lt=Object.keys(Qe);if(wt.length!==Lt.length)return!1;for(lt=!0,vt=0;vt<wt.length&&(lt=_e(ze[wt[vt]],Qe[wt[vt]]));vt++);return lt}return!1},li=function(_e,ze,Qe){return S(Qe)?!!Qe(_e,ze):ci(_e,ze)},oo=function(_e,ze){if(!f(_e))return _e;for(var Qe=[],lt=0;lt<_e.length;lt++){var vt=_e[lt];Qe.push(ze(vt,lt))}return Qe},Ki=function(_e){return _e},Zi=function(_e,ze){ze===void 0&&(ze=Ki);var Qe={};return E(_e)&&!g(_e)&&Object.keys(_e).forEach(function(lt){Qe[lt]=ze(_e[lt],lt)}),Qe},go=function(_e,ze,Qe){for(var lt=0,vt=ke(ze)?ze.split("."):ze;_e&&lt<vt.length;)_e=_e[vt[lt++]];return _e===void 0||lt<vt.length?Qe:_e},nr=function(_e,ze,Qe){var lt=_e,vt=ke(ze)?ze.split("."):ze;return vt.forEach(function(wt,Lt){Lt<vt.length-1?(E(lt[wt])||(lt[wt]=dt(vt[Lt+1])?[]:{}),lt=lt[wt]):lt[wt]=Qe}),_e},We=Object.prototype.hasOwnProperty,Ne=function(_e,ze){if(_e===null||!P(_e))return{};var Qe={};return b(ze,function(lt){We.call(_e,lt)&&(Qe[lt]=_e[lt])}),Qe},He=function(_e,ze){return ie(_e,function(Qe,lt,vt){return ze.includes(vt)||(Qe[vt]=lt),Qe},{})},ft=function(_e,ze,Qe){var lt,vt,wt,Lt,Wt=0;Qe||(Qe={});var er=function(){Wt=Qe.leading===!1?0:Date.now(),lt=null,Lt=_e.apply(vt,wt),lt||(vt=wt=null)},tr=function(){var ar=Date.now();Wt||Qe.leading!==!1||(Wt=ar);var pr=ze-(ar-Wt);return vt=this,wt=arguments,pr<=0||pr>ze?(lt&&(clearTimeout(lt),lt=null),Wt=ar,Lt=_e.apply(vt,wt),lt||(vt=wt=null)):lt||Qe.trailing===!1||(lt=setTimeout(er,pr)),Lt};return tr.cancel=function(){clearTimeout(lt),Wt=0,lt=vt=wt=null},tr},Ct=function(_e){return f(_e)?Array.prototype.slice.call(_e):[]},Ht={},vr=function(_e){return Ht[_e=_e||"g"]?Ht[_e]+=1:Ht[_e]=1,_e+Ht[_e]},Be=function(){},ut=function(_e){return _e};function bt(_e){return g(_e)?0:f(_e)?_e.length:Object.keys(_e).length}var Ft=function(){function _e(){this.map={}}return _e.prototype.has=function(ze){return this.map[ze]!==void 0},_e.prototype.get=function(ze,Qe){var lt=this.map[ze];return lt===void 0?Qe:lt},_e.prototype.set=function(ze,Qe){this.map[ze]=Qe},_e.prototype.clear=function(){this.map={}},_e.prototype.delete=function(ze){delete this.map[ze]},_e.prototype.size=function(){return Object.keys(this.map).length},_e}()},function(D,m,o){"use strict";function f(ge){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te})(ge)}o.r(m),o.d(m,"__extends",function(){return M}),o.d(m,"__assign",function(){return _}),o.d(m,"__rest",function(){return x}),o.d(m,"__decorate",function(){return O}),o.d(m,"__param",function(){return S}),o.d(m,"__metadata",function(){return g}),o.d(m,"__awaiter",function(){return d}),o.d(m,"__generator",function(){return y}),o.d(m,"__createBinding",function(){return E}),o.d(m,"__exportStar",function(){return b}),o.d(m,"__values",function(){return p}),o.d(m,"__read",function(){return A}),o.d(m,"__spread",function(){return C}),o.d(m,"__spreadArrays",function(){return N}),o.d(m,"__spreadArray",function(){return P}),o.d(m,"__await",function(){return L}),o.d(m,"__asyncGenerator",function(){return z}),o.d(m,"__asyncDelegator",function(){return X}),o.d(m,"__asyncValues",function(){return re}),o.d(m,"__makeTemplateObject",function(){return se}),o.d(m,"__importStar",function(){return xe}),o.d(m,"__importDefault",function(){return ye}),o.d(m,"__classPrivateFieldGet",function(){return W}),o.d(m,"__classPrivateFieldSet",function(){return Ie});var c=function(ge,te){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,V){H.__proto__=V}||function(H,V){for(var ie in V)Object.prototype.hasOwnProperty.call(V,ie)&&(H[ie]=V[ie])})(ge,te)};function M(ge,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function H(){this.constructor=ge}c(ge,te),ge.prototype=te===null?Object.create(te):(H.prototype=te.prototype,new H)}var _=function(){return(_=Object.assign||function(ge){for(var te,H=1,V=arguments.length;H<V;H++)for(var ie in te=arguments[H])Object.prototype.hasOwnProperty.call(te,ie)&&(ge[ie]=te[ie]);return ge}).apply(this,arguments)};function x(ge,te){var H={};for(var V in ge)Object.prototype.hasOwnProperty.call(ge,V)&&te.indexOf(V)<0&&(H[V]=ge[V]);if(ge!=null&&typeof Object.getOwnPropertySymbols=="function"){var ie=0;for(V=Object.getOwnPropertySymbols(ge);ie<V.length;ie++)te.indexOf(V[ie])<0&&Object.prototype.propertyIsEnumerable.call(ge,V[ie])&&(H[V[ie]]=ge[V[ie]])}return H}function O(ge,te,H,V){var ie,we=arguments.length,ke=we<3?te:V===null?V=Object.getOwnPropertyDescriptor(te,H):V;if((typeof Reflect=="undefined"?"undefined":f(Reflect))==="object"&&typeof Reflect.decorate=="function")ke=Reflect.decorate(ge,te,H,V);else for(var oe=ge.length-1;oe>=0;oe--)(ie=ge[oe])&&(ke=(we<3?ie(ke):we>3?ie(te,H,ke):ie(te,H))||ke);return we>3&&ke&&Object.defineProperty(te,H,ke),ke}function S(ge,te){return function(H,V){te(H,V,ge)}}function g(ge,te){if((typeof Reflect=="undefined"?"undefined":f(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ge,te)}function d(ge,te,H,V){return new(H||(H=Promise))(function(ie,we){function ke(ee){try{J(V.next(ee))}catch(Y){we(Y)}}function oe(ee){try{J(V.throw(ee))}catch(Y){we(Y)}}function J(ee){var Y;ee.done?ie(ee.value):(Y=ee.value,Y instanceof H?Y:new H(function(K){K(Y)})).then(ke,oe)}J((V=V.apply(ge,te||[])).next())})}function y(ge,te){var H,V,ie,we,ke={label:0,sent:function(){if(1&ie[0])throw ie[1];return ie[1]},trys:[],ops:[]};return we={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(we[Symbol.iterator]=function(){return this}),we;function oe(J){return function(ee){return function(Y){if(H)throw new TypeError("Generator is already executing.");for(;ke;)try{if(H=1,V&&(ie=2&Y[0]?V.return:Y[0]?V.throw||((ie=V.return)&&ie.call(V),0):V.next)&&!(ie=ie.call(V,Y[1])).done)return ie;switch(V=0,ie&&(Y=[2&Y[0],ie.value]),Y[0]){case 0:case 1:ie=Y;break;case 4:return ke.label++,{value:Y[1],done:!1};case 5:ke.label++,V=Y[1],Y=[0];continue;case 7:Y=ke.ops.pop(),ke.trys.pop();continue;default:if(ie=ke.trys,!((ie=ie.length>0&&ie[ie.length-1])||Y[0]!==6&&Y[0]!==2)){ke=0;continue}if(Y[0]===3&&(!ie||Y[1]>ie[0]&&Y[1]<ie[3])){ke.label=Y[1];break}if(Y[0]===6&&ke.label<ie[1]){ke.label=ie[1],ie=Y;break}if(ie&&ke.label<ie[2]){ke.label=ie[2],ke.ops.push(Y);break}ie[2]&&ke.ops.pop(),ke.trys.pop();continue}Y=te.call(ge,ke)}catch(K){Y=[6,K],V=0}finally{H=ie=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([J,ee])}}}var E=Object.create?function(ge,te,H,V){V===void 0&&(V=H),Object.defineProperty(ge,V,{enumerable:!0,get:function(){return te[H]}})}:function(ge,te,H,V){V===void 0&&(V=H),ge[V]=te[H]};function b(ge,te){for(var H in ge)H==="default"||Object.prototype.hasOwnProperty.call(te,H)||E(te,ge,H)}function p(ge){var te=typeof Symbol=="function"&&Symbol.iterator,H=te&&ge[te],V=0;if(H)return H.call(ge);if(ge&&typeof ge.length=="number")return{next:function(){return ge&&V>=ge.length&&(ge=void 0),{value:ge&&ge[V++],done:!ge}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(ge,te){var H=typeof Symbol=="function"&&ge[Symbol.iterator];if(!H)return ge;var V,ie,we=H.call(ge),ke=[];try{for(;(te===void 0||te-- >0)&&!(V=we.next()).done;)ke.push(V.value)}catch(oe){ie={error:oe}}finally{try{V&&!V.done&&(H=we.return)&&H.call(we)}finally{if(ie)throw ie.error}}return ke}function C(){for(var ge=[],te=0;te<arguments.length;te++)ge=ge.concat(A(arguments[te]));return ge}function N(){for(var ge=0,te=0,H=arguments.length;te<H;te++)ge+=arguments[te].length;var V=Array(ge),ie=0;for(te=0;te<H;te++)for(var we=arguments[te],ke=0,oe=we.length;ke<oe;ke++,ie++)V[ie]=we[ke];return V}function P(ge,te,H){if(H||arguments.length===2)for(var V,ie=0,we=te.length;ie<we;ie++)!V&&ie in te||(V||(V=Array.prototype.slice.call(te,0,ie)),V[ie]=te[ie]);return ge.concat(V||te)}function L(ge){return this instanceof L?(this.v=ge,this):new L(ge)}function z(ge,te,H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var V,ie=H.apply(ge,te||[]),we=[];return V={},ke("next"),ke("throw"),ke("return"),V[Symbol.asyncIterator]=function(){return this},V;function ke(K){ie[K]&&(V[K]=function(G){return new Promise(function(ne,le){we.push([K,G,ne,le])>1||oe(K,G)})})}function oe(K,G){try{(ne=ie[K](G)).value instanceof L?Promise.resolve(ne.value.v).then(J,ee):Y(we[0][2],ne)}catch(le){Y(we[0][3],le)}var ne}function J(K){oe("next",K)}function ee(K){oe("throw",K)}function Y(K,G){K(G),we.shift(),we.length&&oe(we[0][0],we[0][1])}}function X(ge){var te,H;return te={},V("next"),V("throw",function(ie){throw ie}),V("return"),te[Symbol.iterator]=function(){return this},te;function V(ie,we){te[ie]=ge[ie]?function(ke){return(H=!H)?{value:L(ge[ie](ke)),done:ie==="return"}:we?we(ke):ke}:we}}function re(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,H=ge[Symbol.asyncIterator];return H?H.call(ge):(ge=p(ge),te={},V("next"),V("throw"),V("return"),te[Symbol.asyncIterator]=function(){return this},te);function V(ie){te[ie]=ge[ie]&&function(we){return new Promise(function(ke,oe){(function(J,ee,Y,K){Promise.resolve(K).then(function(G){J({value:G,done:Y})},ee)})(ke,oe,(we=ge[ie](we)).done,we.value)})}}}function se(ge,te){return Object.defineProperty?Object.defineProperty(ge,"raw",{value:te}):ge.raw=te,ge}var ce=Object.create?function(ge,te){Object.defineProperty(ge,"default",{enumerable:!0,value:te})}:function(ge,te){ge.default=te};function xe(ge){if(ge&&ge.__esModule)return ge;var te={};if(ge!=null)for(var H in ge)H!=="default"&&Object.prototype.hasOwnProperty.call(ge,H)&&E(te,ge,H);return ce(te,ge),te}function ye(ge){return ge&&ge.__esModule?ge:{default:ge}}function W(ge,te,H,V){if(H==="a"&&!V)throw new TypeError("Private accessor was defined without a getter");if(typeof te=="function"?ge!==te||!V:!te.has(ge))throw new TypeError("Cannot read private member from an object whose class did not declare it");return H==="m"?V:H==="a"?V.call(ge):V?V.value:te.get(ge)}function Ie(ge,te,H,V,ie){if(V==="m")throw new TypeError("Private method is not writable");if(V==="a"&&!ie)throw new TypeError("Private accessor was defined without a setter");if(typeof te=="function"?ge!==te||!ie:!te.has(ge))throw new TypeError("Cannot write private member to an object whose class did not declare it");return V==="a"?ie.call(ge,H):ie?ie.value=H:te.set(ge,H),H}},function(D,m,o){"use strict";o.d(m,"a",function(){return f}),o.d(m,"b",function(){return c}),o.d(m,"c",function(){return _}),o.d(m,"d",function(){return St}),o.d(m,"e",function(){return Er}),o.d(m,"f",function(){return M});var f={};o.r(f),o.d(f,"create",function(){return O}),o.d(f,"fromMat4",function(){return S}),o.d(f,"clone",function(){return g}),o.d(f,"copy",function(){return d}),o.d(f,"fromValues",function(){return y}),o.d(f,"set",function(){return E}),o.d(f,"identity",function(){return b}),o.d(f,"transpose",function(){return p}),o.d(f,"invert",function(){return A}),o.d(f,"adjoint",function(){return C}),o.d(f,"determinant",function(){return N}),o.d(f,"multiply",function(){return P}),o.d(f,"translate",function(){return L}),o.d(f,"rotate",function(){return z}),o.d(f,"scale",function(){return X}),o.d(f,"fromTranslation",function(){return re}),o.d(f,"fromRotation",function(){return se}),o.d(f,"fromScaling",function(){return ce}),o.d(f,"fromMat2d",function(){return xe}),o.d(f,"fromQuat",function(){return ye}),o.d(f,"normalFromMat4",function(){return W}),o.d(f,"projection",function(){return Ie}),o.d(f,"str",function(){return ge}),o.d(f,"frob",function(){return te}),o.d(f,"add",function(){return H}),o.d(f,"subtract",function(){return V}),o.d(f,"multiplyScalar",function(){return ie}),o.d(f,"multiplyScalarAndAdd",function(){return we}),o.d(f,"exactEquals",function(){return ke}),o.d(f,"equals",function(){return oe}),o.d(f,"mul",function(){return J}),o.d(f,"sub",function(){return ee});var c={};o.r(c),o.d(c,"create",function(){return Y}),o.d(c,"clone",function(){return K}),o.d(c,"copy",function(){return G}),o.d(c,"fromValues",function(){return ne}),o.d(c,"set",function(){return le}),o.d(c,"identity",function(){return ue}),o.d(c,"transpose",function(){return Q}),o.d(c,"invert",function(){return he}),o.d(c,"adjoint",function(){return Se}),o.d(c,"determinant",function(){return je}),o.d(c,"multiply",function(){return Ae}),o.d(c,"translate",function(){return Ce}),o.d(c,"scale",function(){return Re}),o.d(c,"rotate",function(){return Ee}),o.d(c,"rotateX",function(){return Le}),o.d(c,"rotateY",function(){return Ke}),o.d(c,"rotateZ",function(){return et}),o.d(c,"fromTranslation",function(){return ot}),o.d(c,"fromScaling",function(){return dt}),o.d(c,"fromRotation",function(){return At}),o.d(c,"fromXRotation",function(){return Tt}),o.d(c,"fromYRotation",function(){return jt}),o.d(c,"fromZRotation",function(){return Kt}),o.d(c,"fromRotationTranslation",function(){return Qt}),o.d(c,"fromQuat2",function(){return rr}),o.d(c,"getTranslation",function(){return or}),o.d(c,"getScaling",function(){return Mr}),o.d(c,"getRotation",function(){return cr}),o.d(c,"fromRotationTranslationScale",function(){return yr}),o.d(c,"fromRotationTranslationScaleOrigin",function(){return br}),o.d(c,"fromQuat",function(){return Xr}),o.d(c,"frustum",function(){return gr}),o.d(c,"perspective",function(){return xr}),o.d(c,"perspectiveFromFieldOfView",function(){return dr}),o.d(c,"ortho",function(){return Br}),o.d(c,"lookAt",function(){return Rr}),o.d(c,"targetTo",function(){return pn}),o.d(c,"str",function(){return zr}),o.d(c,"frob",function(){return Nr}),o.d(c,"add",function(){return Dr}),o.d(c,"subtract",function(){return rn}),o.d(c,"multiplyScalar",function(){return Ir}),o.d(c,"multiplyScalarAndAdd",function(){return On}),o.d(c,"exactEquals",function(){return In}),o.d(c,"equals",function(){return Dn}),o.d(c,"mul",function(){return Rn}),o.d(c,"sub",function(){return gn});var M={};o.r(M),o.d(M,"create",function(){return ln}),o.d(M,"clone",function(){return yn}),o.d(M,"fromValues",function(){return mn}),o.d(M,"copy",function(){return Qn}),o.d(M,"set",function(){return Un}),o.d(M,"add",function(){return ri}),o.d(M,"subtract",function(){return Ei}),o.d(M,"multiply",function(){return ni}),o.d(M,"divide",function(){return Bn}),o.d(M,"ceil",function(){return wi}),o.d(M,"floor",function(){return Oi}),o.d(M,"min",function(){return Wn}),o.d(M,"max",function(){return ii}),o.d(M,"round",function(){return Jn}),o.d(M,"scale",function(){return hi}),o.d(M,"scaleAndAdd",function(){return Vn}),o.d(M,"distance",function(){return oi}),o.d(M,"squaredDistance",function(){return di}),o.d(M,"length",function(){return _i}),o.d(M,"squaredLength",function(){return Xn}),o.d(M,"negate",function(){return Yn}),o.d(M,"inverse",function(){return Mi}),o.d(M,"normalize",function(){return Bi}),o.d(M,"dot",function(){return Hn}),o.d(M,"cross",function(){return io}),o.d(M,"lerp",function(){return ci}),o.d(M,"random",function(){return li}),o.d(M,"transformMat4",function(){return oo}),o.d(M,"transformQuat",function(){return Ki}),o.d(M,"zero",function(){return Zi}),o.d(M,"str",function(){return go}),o.d(M,"exactEquals",function(){return nr}),o.d(M,"equals",function(){return We}),o.d(M,"sub",function(){return He}),o.d(M,"mul",function(){return ft}),o.d(M,"div",function(){return Ct}),o.d(M,"dist",function(){return Ht}),o.d(M,"sqrDist",function(){return vr}),o.d(M,"len",function(){return Be}),o.d(M,"sqrLen",function(){return ut}),o.d(M,"forEach",function(){return bt});var _={};o.r(_),o.d(_,"create",function(){return Ft}),o.d(_,"identity",function(){return _e}),o.d(_,"setAxisAngle",function(){return ze}),o.d(_,"getAxisAngle",function(){return Qe}),o.d(_,"getAngle",function(){return lt}),o.d(_,"multiply",function(){return vt}),o.d(_,"rotateX",function(){return wt}),o.d(_,"rotateY",function(){return Lt}),o.d(_,"rotateZ",function(){return Wt}),o.d(_,"calculateW",function(){return er}),o.d(_,"exp",function(){return tr}),o.d(_,"ln",function(){return ar}),o.d(_,"pow",function(){return pr}),o.d(_,"slerp",function(){return Ur}),o.d(_,"random",function(){return Gr}),o.d(_,"invert",function(){return $r}),o.d(_,"conjugate",function(){return Kr}),o.d(_,"fromMat3",function(){return jn}),o.d(_,"fromEuler",function(){return Cn}),o.d(_,"str",function(){return qn}),o.d(_,"clone",function(){return Mo}),o.d(_,"fromValues",function(){return Gi}),o.d(_,"copy",function(){return $i}),o.d(_,"set",function(){return nn}),o.d(_,"add",function(){return pi}),o.d(_,"mul",function(){return Qi}),o.d(_,"scale",function(){return ki}),o.d(_,"dot",function(){return Gn}),o.d(_,"lerp",function(){return Fi}),o.d(_,"length",function(){return Ni}),o.d(_,"len",function(){return fi}),o.d(_,"squaredLength",function(){return zi}),o.d(_,"sqrLen",function(){return Ai}),o.d(_,"normalize",function(){return Ji}),o.d(_,"exactEquals",function(){return ao}),o.d(_,"equals",function(){return Ui}),o.d(_,"rotationTo",function(){return Ci}),o.d(_,"sqlerp",function(){return _t}),o.d(_,"setAxes",function(){return $e});var x=o(12);function O(){var w=new x.a(9);return x.a!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[5]=0,w[6]=0,w[7]=0),w[0]=1,w[4]=1,w[8]=1,w}function S(w,R){return w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[4],w[4]=R[5],w[5]=R[6],w[6]=R[8],w[7]=R[9],w[8]=R[10],w}function g(w){var R=new x.a(9);return R[0]=w[0],R[1]=w[1],R[2]=w[2],R[3]=w[3],R[4]=w[4],R[5]=w[5],R[6]=w[6],R[7]=w[7],R[8]=w[8],R}function d(w,R){return w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w[4]=R[4],w[5]=R[5],w[6]=R[6],w[7]=R[7],w[8]=R[8],w}function y(w,R,fe,Z,ae,pe,be,De,Ue){var Me=new x.a(9);return Me[0]=w,Me[1]=R,Me[2]=fe,Me[3]=Z,Me[4]=ae,Me[5]=pe,Me[6]=be,Me[7]=De,Me[8]=Ue,Me}function E(w,R,fe,Z,ae,pe,be,De,Ue,Me){return w[0]=R,w[1]=fe,w[2]=Z,w[3]=ae,w[4]=pe,w[5]=be,w[6]=De,w[7]=Ue,w[8]=Me,w}function b(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=1,w[5]=0,w[6]=0,w[7]=0,w[8]=1,w}function p(w,R){if(w===R){var fe=R[1],Z=R[2],ae=R[5];w[1]=R[3],w[2]=R[6],w[3]=fe,w[5]=R[7],w[6]=Z,w[7]=ae}else w[0]=R[0],w[1]=R[3],w[2]=R[6],w[3]=R[1],w[4]=R[4],w[5]=R[7],w[6]=R[2],w[7]=R[5],w[8]=R[8];return w}function A(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=R[4],De=R[5],Ue=R[6],Me=R[7],Fe=R[8],Ye=Fe*be-De*Me,Ge=-Fe*pe+De*Ue,Xe=Me*pe-be*Ue,Je=fe*Ye+Z*Ge+ae*Xe;return Je?(Je=1/Je,w[0]=Ye*Je,w[1]=(-Fe*Z+ae*Me)*Je,w[2]=(De*Z-ae*be)*Je,w[3]=Ge*Je,w[4]=(Fe*fe-ae*Ue)*Je,w[5]=(-De*fe+ae*pe)*Je,w[6]=Xe*Je,w[7]=(-Me*fe+Z*Ue)*Je,w[8]=(be*fe-Z*pe)*Je,w):null}function C(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=R[4],De=R[5],Ue=R[6],Me=R[7],Fe=R[8];return w[0]=be*Fe-De*Me,w[1]=ae*Me-Z*Fe,w[2]=Z*De-ae*be,w[3]=De*Ue-pe*Fe,w[4]=fe*Fe-ae*Ue,w[5]=ae*pe-fe*De,w[6]=pe*Me-be*Ue,w[7]=Z*Ue-fe*Me,w[8]=fe*be-Z*pe,w}function N(w){var R=w[0],fe=w[1],Z=w[2],ae=w[3],pe=w[4],be=w[5],De=w[6],Ue=w[7],Me=w[8];return R*(Me*pe-be*Ue)+fe*(-Me*ae+be*De)+Z*(Ue*ae-pe*De)}function P(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=R[4],Ue=R[5],Me=R[6],Fe=R[7],Ye=R[8],Ge=fe[0],Xe=fe[1],Je=fe[2],tt=fe[3],Ve=fe[4],it=fe[5],pt=fe[6],Et=fe[7],mt=fe[8];return w[0]=Ge*Z+Xe*be+Je*Me,w[1]=Ge*ae+Xe*De+Je*Fe,w[2]=Ge*pe+Xe*Ue+Je*Ye,w[3]=tt*Z+Ve*be+it*Me,w[4]=tt*ae+Ve*De+it*Fe,w[5]=tt*pe+Ve*Ue+it*Ye,w[6]=pt*Z+Et*be+mt*Me,w[7]=pt*ae+Et*De+mt*Fe,w[8]=pt*pe+Et*Ue+mt*Ye,w}function L(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=R[4],Ue=R[5],Me=R[6],Fe=R[7],Ye=R[8],Ge=fe[0],Xe=fe[1];return w[0]=Z,w[1]=ae,w[2]=pe,w[3]=be,w[4]=De,w[5]=Ue,w[6]=Ge*Z+Xe*be+Me,w[7]=Ge*ae+Xe*De+Fe,w[8]=Ge*pe+Xe*Ue+Ye,w}function z(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=R[4],Ue=R[5],Me=R[6],Fe=R[7],Ye=R[8],Ge=Math.sin(fe),Xe=Math.cos(fe);return w[0]=Xe*Z+Ge*be,w[1]=Xe*ae+Ge*De,w[2]=Xe*pe+Ge*Ue,w[3]=Xe*be-Ge*Z,w[4]=Xe*De-Ge*ae,w[5]=Xe*Ue-Ge*pe,w[6]=Me,w[7]=Fe,w[8]=Ye,w}function X(w,R,fe){var Z=fe[0],ae=fe[1];return w[0]=Z*R[0],w[1]=Z*R[1],w[2]=Z*R[2],w[3]=ae*R[3],w[4]=ae*R[4],w[5]=ae*R[5],w[6]=R[6],w[7]=R[7],w[8]=R[8],w}function re(w,R){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=1,w[5]=0,w[6]=R[0],w[7]=R[1],w[8]=1,w}function se(w,R){var fe=Math.sin(R),Z=Math.cos(R);return w[0]=Z,w[1]=fe,w[2]=0,w[3]=-fe,w[4]=Z,w[5]=0,w[6]=0,w[7]=0,w[8]=1,w}function ce(w,R){return w[0]=R[0],w[1]=0,w[2]=0,w[3]=0,w[4]=R[1],w[5]=0,w[6]=0,w[7]=0,w[8]=1,w}function xe(w,R){return w[0]=R[0],w[1]=R[1],w[2]=0,w[3]=R[2],w[4]=R[3],w[5]=0,w[6]=R[4],w[7]=R[5],w[8]=1,w}function ye(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=fe+fe,De=Z+Z,Ue=ae+ae,Me=fe*be,Fe=Z*be,Ye=Z*De,Ge=ae*be,Xe=ae*De,Je=ae*Ue,tt=pe*be,Ve=pe*De,it=pe*Ue;return w[0]=1-Ye-Je,w[3]=Fe-it,w[6]=Ge+Ve,w[1]=Fe+it,w[4]=1-Me-Je,w[7]=Xe-tt,w[2]=Ge-Ve,w[5]=Xe+tt,w[8]=1-Me-Ye,w}function W(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=R[4],De=R[5],Ue=R[6],Me=R[7],Fe=R[8],Ye=R[9],Ge=R[10],Xe=R[11],Je=R[12],tt=R[13],Ve=R[14],it=R[15],pt=fe*De-Z*be,Et=fe*Ue-ae*be,mt=fe*Me-pe*be,xt=Z*Ue-ae*De,Ot=Z*Me-pe*De,yt=ae*Me-pe*Ue,qe=Fe*tt-Ye*Je,at=Fe*Ve-Ge*Je,ht=Fe*it-Xe*Je,Mt=Ye*Ve-Ge*tt,zt=Ye*it-Xe*tt,Ut=Ge*it-Xe*Ve,Xt=pt*Ut-Et*zt+mt*Mt+xt*ht-Ot*at+yt*qe;return Xt?(Xt=1/Xt,w[0]=(De*Ut-Ue*zt+Me*Mt)*Xt,w[1]=(Ue*ht-be*Ut-Me*at)*Xt,w[2]=(be*zt-De*ht+Me*qe)*Xt,w[3]=(ae*zt-Z*Ut-pe*Mt)*Xt,w[4]=(fe*Ut-ae*ht+pe*at)*Xt,w[5]=(Z*ht-fe*zt-pe*qe)*Xt,w[6]=(tt*yt-Ve*Ot+it*xt)*Xt,w[7]=(Ve*mt-Je*yt-it*Et)*Xt,w[8]=(Je*Ot-tt*mt+it*pt)*Xt,w):null}function Ie(w,R,fe){return w[0]=2/R,w[1]=0,w[2]=0,w[3]=0,w[4]=-2/fe,w[5]=0,w[6]=-1,w[7]=1,w[8]=1,w}function ge(w){return"mat3("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+", "+w[4]+", "+w[5]+", "+w[6]+", "+w[7]+", "+w[8]+")"}function te(w){return Math.hypot(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8])}function H(w,R,fe){return w[0]=R[0]+fe[0],w[1]=R[1]+fe[1],w[2]=R[2]+fe[2],w[3]=R[3]+fe[3],w[4]=R[4]+fe[4],w[5]=R[5]+fe[5],w[6]=R[6]+fe[6],w[7]=R[7]+fe[7],w[8]=R[8]+fe[8],w}function V(w,R,fe){return w[0]=R[0]-fe[0],w[1]=R[1]-fe[1],w[2]=R[2]-fe[2],w[3]=R[3]-fe[3],w[4]=R[4]-fe[4],w[5]=R[5]-fe[5],w[6]=R[6]-fe[6],w[7]=R[7]-fe[7],w[8]=R[8]-fe[8],w}function ie(w,R,fe){return w[0]=R[0]*fe,w[1]=R[1]*fe,w[2]=R[2]*fe,w[3]=R[3]*fe,w[4]=R[4]*fe,w[5]=R[5]*fe,w[6]=R[6]*fe,w[7]=R[7]*fe,w[8]=R[8]*fe,w}function we(w,R,fe,Z){return w[0]=R[0]+fe[0]*Z,w[1]=R[1]+fe[1]*Z,w[2]=R[2]+fe[2]*Z,w[3]=R[3]+fe[3]*Z,w[4]=R[4]+fe[4]*Z,w[5]=R[5]+fe[5]*Z,w[6]=R[6]+fe[6]*Z,w[7]=R[7]+fe[7]*Z,w[8]=R[8]+fe[8]*Z,w}function ke(w,R){return w[0]===R[0]&&w[1]===R[1]&&w[2]===R[2]&&w[3]===R[3]&&w[4]===R[4]&&w[5]===R[5]&&w[6]===R[6]&&w[7]===R[7]&&w[8]===R[8]}function oe(w,R){var fe=w[0],Z=w[1],ae=w[2],pe=w[3],be=w[4],De=w[5],Ue=w[6],Me=w[7],Fe=w[8],Ye=R[0],Ge=R[1],Xe=R[2],Je=R[3],tt=R[4],Ve=R[5],it=R[6],pt=R[7],Et=R[8];return Math.abs(fe-Ye)<=x.b*Math.max(1,Math.abs(fe),Math.abs(Ye))&&Math.abs(Z-Ge)<=x.b*Math.max(1,Math.abs(Z),Math.abs(Ge))&&Math.abs(ae-Xe)<=x.b*Math.max(1,Math.abs(ae),Math.abs(Xe))&&Math.abs(pe-Je)<=x.b*Math.max(1,Math.abs(pe),Math.abs(Je))&&Math.abs(be-tt)<=x.b*Math.max(1,Math.abs(be),Math.abs(tt))&&Math.abs(De-Ve)<=x.b*Math.max(1,Math.abs(De),Math.abs(Ve))&&Math.abs(Ue-it)<=x.b*Math.max(1,Math.abs(Ue),Math.abs(it))&&Math.abs(Me-pt)<=x.b*Math.max(1,Math.abs(Me),Math.abs(pt))&&Math.abs(Fe-Et)<=x.b*Math.max(1,Math.abs(Fe),Math.abs(Et))}var J=P,ee=V;function Y(){var w=new x.a(16);return x.a!=Float32Array&&(w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=0,w[12]=0,w[13]=0,w[14]=0),w[0]=1,w[5]=1,w[10]=1,w[15]=1,w}function K(w){var R=new x.a(16);return R[0]=w[0],R[1]=w[1],R[2]=w[2],R[3]=w[3],R[4]=w[4],R[5]=w[5],R[6]=w[6],R[7]=w[7],R[8]=w[8],R[9]=w[9],R[10]=w[10],R[11]=w[11],R[12]=w[12],R[13]=w[13],R[14]=w[14],R[15]=w[15],R}function G(w,R){return w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w[4]=R[4],w[5]=R[5],w[6]=R[6],w[7]=R[7],w[8]=R[8],w[9]=R[9],w[10]=R[10],w[11]=R[11],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15],w}function ne(w,R,fe,Z,ae,pe,be,De,Ue,Me,Fe,Ye,Ge,Xe,Je,tt){var Ve=new x.a(16);return Ve[0]=w,Ve[1]=R,Ve[2]=fe,Ve[3]=Z,Ve[4]=ae,Ve[5]=pe,Ve[6]=be,Ve[7]=De,Ve[8]=Ue,Ve[9]=Me,Ve[10]=Fe,Ve[11]=Ye,Ve[12]=Ge,Ve[13]=Xe,Ve[14]=Je,Ve[15]=tt,Ve}function le(w,R,fe,Z,ae,pe,be,De,Ue,Me,Fe,Ye,Ge,Xe,Je,tt,Ve){return w[0]=R,w[1]=fe,w[2]=Z,w[3]=ae,w[4]=pe,w[5]=be,w[6]=De,w[7]=Ue,w[8]=Me,w[9]=Fe,w[10]=Ye,w[11]=Ge,w[12]=Xe,w[13]=Je,w[14]=tt,w[15]=Ve,w}function ue(w){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function Q(w,R){if(w===R){var fe=R[1],Z=R[2],ae=R[3],pe=R[6],be=R[7],De=R[11];w[1]=R[4],w[2]=R[8],w[3]=R[12],w[4]=fe,w[6]=R[9],w[7]=R[13],w[8]=Z,w[9]=pe,w[11]=R[14],w[12]=ae,w[13]=be,w[14]=De}else w[0]=R[0],w[1]=R[4],w[2]=R[8],w[3]=R[12],w[4]=R[1],w[5]=R[5],w[6]=R[9],w[7]=R[13],w[8]=R[2],w[9]=R[6],w[10]=R[10],w[11]=R[14],w[12]=R[3],w[13]=R[7],w[14]=R[11],w[15]=R[15];return w}function he(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=R[4],De=R[5],Ue=R[6],Me=R[7],Fe=R[8],Ye=R[9],Ge=R[10],Xe=R[11],Je=R[12],tt=R[13],Ve=R[14],it=R[15],pt=fe*De-Z*be,Et=fe*Ue-ae*be,mt=fe*Me-pe*be,xt=Z*Ue-ae*De,Ot=Z*Me-pe*De,yt=ae*Me-pe*Ue,qe=Fe*tt-Ye*Je,at=Fe*Ve-Ge*Je,ht=Fe*it-Xe*Je,Mt=Ye*Ve-Ge*tt,zt=Ye*it-Xe*tt,Ut=Ge*it-Xe*Ve,Xt=pt*Ut-Et*zt+mt*Mt+xt*ht-Ot*at+yt*qe;return Xt?(Xt=1/Xt,w[0]=(De*Ut-Ue*zt+Me*Mt)*Xt,w[1]=(ae*zt-Z*Ut-pe*Mt)*Xt,w[2]=(tt*yt-Ve*Ot+it*xt)*Xt,w[3]=(Ge*Ot-Ye*yt-Xe*xt)*Xt,w[4]=(Ue*ht-be*Ut-Me*at)*Xt,w[5]=(fe*Ut-ae*ht+pe*at)*Xt,w[6]=(Ve*mt-Je*yt-it*Et)*Xt,w[7]=(Fe*yt-Ge*mt+Xe*Et)*Xt,w[8]=(be*zt-De*ht+Me*qe)*Xt,w[9]=(Z*ht-fe*zt-pe*qe)*Xt,w[10]=(Je*Ot-tt*mt+it*pt)*Xt,w[11]=(Ye*mt-Fe*Ot-Xe*pt)*Xt,w[12]=(De*at-be*Mt-Ue*qe)*Xt,w[13]=(fe*Mt-Z*at+ae*qe)*Xt,w[14]=(tt*Et-Je*xt-Ve*pt)*Xt,w[15]=(Fe*xt-Ye*Et+Ge*pt)*Xt,w):null}function Se(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=R[4],De=R[5],Ue=R[6],Me=R[7],Fe=R[8],Ye=R[9],Ge=R[10],Xe=R[11],Je=R[12],tt=R[13],Ve=R[14],it=R[15];return w[0]=De*(Ge*it-Xe*Ve)-Ye*(Ue*it-Me*Ve)+tt*(Ue*Xe-Me*Ge),w[1]=-(Z*(Ge*it-Xe*Ve)-Ye*(ae*it-pe*Ve)+tt*(ae*Xe-pe*Ge)),w[2]=Z*(Ue*it-Me*Ve)-De*(ae*it-pe*Ve)+tt*(ae*Me-pe*Ue),w[3]=-(Z*(Ue*Xe-Me*Ge)-De*(ae*Xe-pe*Ge)+Ye*(ae*Me-pe*Ue)),w[4]=-(be*(Ge*it-Xe*Ve)-Fe*(Ue*it-Me*Ve)+Je*(Ue*Xe-Me*Ge)),w[5]=fe*(Ge*it-Xe*Ve)-Fe*(ae*it-pe*Ve)+Je*(ae*Xe-pe*Ge),w[6]=-(fe*(Ue*it-Me*Ve)-be*(ae*it-pe*Ve)+Je*(ae*Me-pe*Ue)),w[7]=fe*(Ue*Xe-Me*Ge)-be*(ae*Xe-pe*Ge)+Fe*(ae*Me-pe*Ue),w[8]=be*(Ye*it-Xe*tt)-Fe*(De*it-Me*tt)+Je*(De*Xe-Me*Ye),w[9]=-(fe*(Ye*it-Xe*tt)-Fe*(Z*it-pe*tt)+Je*(Z*Xe-pe*Ye)),w[10]=fe*(De*it-Me*tt)-be*(Z*it-pe*tt)+Je*(Z*Me-pe*De),w[11]=-(fe*(De*Xe-Me*Ye)-be*(Z*Xe-pe*Ye)+Fe*(Z*Me-pe*De)),w[12]=-(be*(Ye*Ve-Ge*tt)-Fe*(De*Ve-Ue*tt)+Je*(De*Ge-Ue*Ye)),w[13]=fe*(Ye*Ve-Ge*tt)-Fe*(Z*Ve-ae*tt)+Je*(Z*Ge-ae*Ye),w[14]=-(fe*(De*Ve-Ue*tt)-be*(Z*Ve-ae*tt)+Je*(Z*Ue-ae*De)),w[15]=fe*(De*Ge-Ue*Ye)-be*(Z*Ge-ae*Ye)+Fe*(Z*Ue-ae*De),w}function je(w){var R=w[0],fe=w[1],Z=w[2],ae=w[3],pe=w[4],be=w[5],De=w[6],Ue=w[7],Me=w[8],Fe=w[9],Ye=w[10],Ge=w[11],Xe=w[12],Je=w[13],tt=w[14],Ve=w[15];return(R*be-fe*pe)*(Ye*Ve-Ge*tt)-(R*De-Z*pe)*(Fe*Ve-Ge*Je)+(R*Ue-ae*pe)*(Fe*tt-Ye*Je)+(fe*De-Z*be)*(Me*Ve-Ge*Xe)-(fe*Ue-ae*be)*(Me*tt-Ye*Xe)+(Z*Ue-ae*De)*(Me*Je-Fe*Xe)}function Ae(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=R[4],Ue=R[5],Me=R[6],Fe=R[7],Ye=R[8],Ge=R[9],Xe=R[10],Je=R[11],tt=R[12],Ve=R[13],it=R[14],pt=R[15],Et=fe[0],mt=fe[1],xt=fe[2],Ot=fe[3];return w[0]=Et*Z+mt*De+xt*Ye+Ot*tt,w[1]=Et*ae+mt*Ue+xt*Ge+Ot*Ve,w[2]=Et*pe+mt*Me+xt*Xe+Ot*it,w[3]=Et*be+mt*Fe+xt*Je+Ot*pt,Et=fe[4],mt=fe[5],xt=fe[6],Ot=fe[7],w[4]=Et*Z+mt*De+xt*Ye+Ot*tt,w[5]=Et*ae+mt*Ue+xt*Ge+Ot*Ve,w[6]=Et*pe+mt*Me+xt*Xe+Ot*it,w[7]=Et*be+mt*Fe+xt*Je+Ot*pt,Et=fe[8],mt=fe[9],xt=fe[10],Ot=fe[11],w[8]=Et*Z+mt*De+xt*Ye+Ot*tt,w[9]=Et*ae+mt*Ue+xt*Ge+Ot*Ve,w[10]=Et*pe+mt*Me+xt*Xe+Ot*it,w[11]=Et*be+mt*Fe+xt*Je+Ot*pt,Et=fe[12],mt=fe[13],xt=fe[14],Ot=fe[15],w[12]=Et*Z+mt*De+xt*Ye+Ot*tt,w[13]=Et*ae+mt*Ue+xt*Ge+Ot*Ve,w[14]=Et*pe+mt*Me+xt*Xe+Ot*it,w[15]=Et*be+mt*Fe+xt*Je+Ot*pt,w}function Ce(w,R,fe){var Z,ae,pe,be,De,Ue,Me,Fe,Ye,Ge,Xe,Je,tt=fe[0],Ve=fe[1],it=fe[2];return R===w?(w[12]=R[0]*tt+R[4]*Ve+R[8]*it+R[12],w[13]=R[1]*tt+R[5]*Ve+R[9]*it+R[13],w[14]=R[2]*tt+R[6]*Ve+R[10]*it+R[14],w[15]=R[3]*tt+R[7]*Ve+R[11]*it+R[15]):(Z=R[0],ae=R[1],pe=R[2],be=R[3],De=R[4],Ue=R[5],Me=R[6],Fe=R[7],Ye=R[8],Ge=R[9],Xe=R[10],Je=R[11],w[0]=Z,w[1]=ae,w[2]=pe,w[3]=be,w[4]=De,w[5]=Ue,w[6]=Me,w[7]=Fe,w[8]=Ye,w[9]=Ge,w[10]=Xe,w[11]=Je,w[12]=Z*tt+De*Ve+Ye*it+R[12],w[13]=ae*tt+Ue*Ve+Ge*it+R[13],w[14]=pe*tt+Me*Ve+Xe*it+R[14],w[15]=be*tt+Fe*Ve+Je*it+R[15]),w}function Re(w,R,fe){var Z=fe[0],ae=fe[1],pe=fe[2];return w[0]=R[0]*Z,w[1]=R[1]*Z,w[2]=R[2]*Z,w[3]=R[3]*Z,w[4]=R[4]*ae,w[5]=R[5]*ae,w[6]=R[6]*ae,w[7]=R[7]*ae,w[8]=R[8]*pe,w[9]=R[9]*pe,w[10]=R[10]*pe,w[11]=R[11]*pe,w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15],w}function Ee(w,R,fe,Z){var ae,pe,be,De,Ue,Me,Fe,Ye,Ge,Xe,Je,tt,Ve,it,pt,Et,mt,xt,Ot,yt,qe,at,ht,Mt,zt=Z[0],Ut=Z[1],Xt=Z[2],fr=Math.hypot(zt,Ut,Xt);return fr<x.b?null:(zt*=fr=1/fr,Ut*=fr,Xt*=fr,ae=Math.sin(fe),be=1-(pe=Math.cos(fe)),De=R[0],Ue=R[1],Me=R[2],Fe=R[3],Ye=R[4],Ge=R[5],Xe=R[6],Je=R[7],tt=R[8],Ve=R[9],it=R[10],pt=R[11],Et=zt*zt*be+pe,mt=Ut*zt*be+Xt*ae,xt=Xt*zt*be-Ut*ae,Ot=zt*Ut*be-Xt*ae,yt=Ut*Ut*be+pe,qe=Xt*Ut*be+zt*ae,at=zt*Xt*be+Ut*ae,ht=Ut*Xt*be-zt*ae,Mt=Xt*Xt*be+pe,w[0]=De*Et+Ye*mt+tt*xt,w[1]=Ue*Et+Ge*mt+Ve*xt,w[2]=Me*Et+Xe*mt+it*xt,w[3]=Fe*Et+Je*mt+pt*xt,w[4]=De*Ot+Ye*yt+tt*qe,w[5]=Ue*Ot+Ge*yt+Ve*qe,w[6]=Me*Ot+Xe*yt+it*qe,w[7]=Fe*Ot+Je*yt+pt*qe,w[8]=De*at+Ye*ht+tt*Mt,w[9]=Ue*at+Ge*ht+Ve*Mt,w[10]=Me*at+Xe*ht+it*Mt,w[11]=Fe*at+Je*ht+pt*Mt,R!==w&&(w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w)}function Le(w,R,fe){var Z=Math.sin(fe),ae=Math.cos(fe),pe=R[4],be=R[5],De=R[6],Ue=R[7],Me=R[8],Fe=R[9],Ye=R[10],Ge=R[11];return R!==w&&(w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[4]=pe*ae+Me*Z,w[5]=be*ae+Fe*Z,w[6]=De*ae+Ye*Z,w[7]=Ue*ae+Ge*Z,w[8]=Me*ae-pe*Z,w[9]=Fe*ae-be*Z,w[10]=Ye*ae-De*Z,w[11]=Ge*ae-Ue*Z,w}function Ke(w,R,fe){var Z=Math.sin(fe),ae=Math.cos(fe),pe=R[0],be=R[1],De=R[2],Ue=R[3],Me=R[8],Fe=R[9],Ye=R[10],Ge=R[11];return R!==w&&(w[4]=R[4],w[5]=R[5],w[6]=R[6],w[7]=R[7],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[0]=pe*ae-Me*Z,w[1]=be*ae-Fe*Z,w[2]=De*ae-Ye*Z,w[3]=Ue*ae-Ge*Z,w[8]=pe*Z+Me*ae,w[9]=be*Z+Fe*ae,w[10]=De*Z+Ye*ae,w[11]=Ue*Z+Ge*ae,w}function et(w,R,fe){var Z=Math.sin(fe),ae=Math.cos(fe),pe=R[0],be=R[1],De=R[2],Ue=R[3],Me=R[4],Fe=R[5],Ye=R[6],Ge=R[7];return R!==w&&(w[8]=R[8],w[9]=R[9],w[10]=R[10],w[11]=R[11],w[12]=R[12],w[13]=R[13],w[14]=R[14],w[15]=R[15]),w[0]=pe*ae+Me*Z,w[1]=be*ae+Fe*Z,w[2]=De*ae+Ye*Z,w[3]=Ue*ae+Ge*Z,w[4]=Me*ae-pe*Z,w[5]=Fe*ae-be*Z,w[6]=Ye*ae-De*Z,w[7]=Ge*ae-Ue*Z,w}function ot(w,R){return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=R[0],w[13]=R[1],w[14]=R[2],w[15]=1,w}function dt(w,R){return w[0]=R[0],w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=R[1],w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=R[2],w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function At(w,R,fe){var Z,ae,pe,be=fe[0],De=fe[1],Ue=fe[2],Me=Math.hypot(be,De,Ue);return Me<x.b?null:(be*=Me=1/Me,De*=Me,Ue*=Me,Z=Math.sin(R),pe=1-(ae=Math.cos(R)),w[0]=be*be*pe+ae,w[1]=De*be*pe+Ue*Z,w[2]=Ue*be*pe-De*Z,w[3]=0,w[4]=be*De*pe-Ue*Z,w[5]=De*De*pe+ae,w[6]=Ue*De*pe+be*Z,w[7]=0,w[8]=be*Ue*pe+De*Z,w[9]=De*Ue*pe-be*Z,w[10]=Ue*Ue*pe+ae,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w)}function Tt(w,R){var fe=Math.sin(R),Z=Math.cos(R);return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=Z,w[6]=fe,w[7]=0,w[8]=0,w[9]=-fe,w[10]=Z,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function jt(w,R){var fe=Math.sin(R),Z=Math.cos(R);return w[0]=Z,w[1]=0,w[2]=-fe,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=fe,w[9]=0,w[10]=Z,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function Kt(w,R){var fe=Math.sin(R),Z=Math.cos(R);return w[0]=Z,w[1]=fe,w[2]=0,w[3]=0,w[4]=-fe,w[5]=Z,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function Qt(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=Z+Z,Ue=ae+ae,Me=pe+pe,Fe=Z*De,Ye=Z*Ue,Ge=Z*Me,Xe=ae*Ue,Je=ae*Me,tt=pe*Me,Ve=be*De,it=be*Ue,pt=be*Me;return w[0]=1-(Xe+tt),w[1]=Ye+pt,w[2]=Ge-it,w[3]=0,w[4]=Ye-pt,w[5]=1-(Fe+tt),w[6]=Je+Ve,w[7]=0,w[8]=Ge+it,w[9]=Je-Ve,w[10]=1-(Fe+Xe),w[11]=0,w[12]=fe[0],w[13]=fe[1],w[14]=fe[2],w[15]=1,w}function rr(w,R){var fe=new x.a(3),Z=-R[0],ae=-R[1],pe=-R[2],be=R[3],De=R[4],Ue=R[5],Me=R[6],Fe=R[7],Ye=Z*Z+ae*ae+pe*pe+be*be;return Ye>0?(fe[0]=2*(De*be+Fe*Z+Ue*pe-Me*ae)/Ye,fe[1]=2*(Ue*be+Fe*ae+Me*Z-De*pe)/Ye,fe[2]=2*(Me*be+Fe*pe+De*ae-Ue*Z)/Ye):(fe[0]=2*(De*be+Fe*Z+Ue*pe-Me*ae),fe[1]=2*(Ue*be+Fe*ae+Me*Z-De*pe),fe[2]=2*(Me*be+Fe*pe+De*ae-Ue*Z)),Qt(w,R,fe),w}function or(w,R){return w[0]=R[12],w[1]=R[13],w[2]=R[14],w}function Mr(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[4],be=R[5],De=R[6],Ue=R[8],Me=R[9],Fe=R[10];return w[0]=Math.hypot(fe,Z,ae),w[1]=Math.hypot(pe,be,De),w[2]=Math.hypot(Ue,Me,Fe),w}function cr(w,R){var fe=new x.a(3);Mr(fe,R);var Z=1/fe[0],ae=1/fe[1],pe=1/fe[2],be=R[0]*Z,De=R[1]*ae,Ue=R[2]*pe,Me=R[4]*Z,Fe=R[5]*ae,Ye=R[6]*pe,Ge=R[8]*Z,Xe=R[9]*ae,Je=R[10]*pe,tt=be+Fe+Je,Ve=0;return tt>0?(Ve=2*Math.sqrt(tt+1),w[3]=.25*Ve,w[0]=(Ye-Xe)/Ve,w[1]=(Ge-Ue)/Ve,w[2]=(De-Me)/Ve):be>Fe&&be>Je?(Ve=2*Math.sqrt(1+be-Fe-Je),w[3]=(Ye-Xe)/Ve,w[0]=.25*Ve,w[1]=(De+Me)/Ve,w[2]=(Ge+Ue)/Ve):Fe>Je?(Ve=2*Math.sqrt(1+Fe-be-Je),w[3]=(Ge-Ue)/Ve,w[0]=(De+Me)/Ve,w[1]=.25*Ve,w[2]=(Ye+Xe)/Ve):(Ve=2*Math.sqrt(1+Je-be-Fe),w[3]=(De-Me)/Ve,w[0]=(Ge+Ue)/Ve,w[1]=(Ye+Xe)/Ve,w[2]=.25*Ve),w}function yr(w,R,fe,Z){var ae=R[0],pe=R[1],be=R[2],De=R[3],Ue=ae+ae,Me=pe+pe,Fe=be+be,Ye=ae*Ue,Ge=ae*Me,Xe=ae*Fe,Je=pe*Me,tt=pe*Fe,Ve=be*Fe,it=De*Ue,pt=De*Me,Et=De*Fe,mt=Z[0],xt=Z[1],Ot=Z[2];return w[0]=(1-(Je+Ve))*mt,w[1]=(Ge+Et)*mt,w[2]=(Xe-pt)*mt,w[3]=0,w[4]=(Ge-Et)*xt,w[5]=(1-(Ye+Ve))*xt,w[6]=(tt+it)*xt,w[7]=0,w[8]=(Xe+pt)*Ot,w[9]=(tt-it)*Ot,w[10]=(1-(Ye+Je))*Ot,w[11]=0,w[12]=fe[0],w[13]=fe[1],w[14]=fe[2],w[15]=1,w}function br(w,R,fe,Z,ae){var pe=R[0],be=R[1],De=R[2],Ue=R[3],Me=pe+pe,Fe=be+be,Ye=De+De,Ge=pe*Me,Xe=pe*Fe,Je=pe*Ye,tt=be*Fe,Ve=be*Ye,it=De*Ye,pt=Ue*Me,Et=Ue*Fe,mt=Ue*Ye,xt=Z[0],Ot=Z[1],yt=Z[2],qe=ae[0],at=ae[1],ht=ae[2],Mt=(1-(tt+it))*xt,zt=(Xe+mt)*xt,Ut=(Je-Et)*xt,Xt=(Xe-mt)*Ot,fr=(1-(Ge+it))*Ot,Or=(Ve+pt)*Ot,kr=(Je+Et)*yt,mr=(Ve-pt)*yt,sr=(1-(Ge+tt))*yt;return w[0]=Mt,w[1]=zt,w[2]=Ut,w[3]=0,w[4]=Xt,w[5]=fr,w[6]=Or,w[7]=0,w[8]=kr,w[9]=mr,w[10]=sr,w[11]=0,w[12]=fe[0]+qe-(Mt*qe+Xt*at+kr*ht),w[13]=fe[1]+at-(zt*qe+fr*at+mr*ht),w[14]=fe[2]+ht-(Ut*qe+Or*at+sr*ht),w[15]=1,w}function Xr(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=fe+fe,De=Z+Z,Ue=ae+ae,Me=fe*be,Fe=Z*be,Ye=Z*De,Ge=ae*be,Xe=ae*De,Je=ae*Ue,tt=pe*be,Ve=pe*De,it=pe*Ue;return w[0]=1-Ye-Je,w[1]=Fe+it,w[2]=Ge-Ve,w[3]=0,w[4]=Fe-it,w[5]=1-Me-Je,w[6]=Xe+tt,w[7]=0,w[8]=Ge+Ve,w[9]=Xe-tt,w[10]=1-Me-Ye,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w}function gr(w,R,fe,Z,ae,pe,be){var De=1/(fe-R),Ue=1/(ae-Z),Me=1/(pe-be);return w[0]=2*pe*De,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=2*pe*Ue,w[6]=0,w[7]=0,w[8]=(fe+R)*De,w[9]=(ae+Z)*Ue,w[10]=(be+pe)*Me,w[11]=-1,w[12]=0,w[13]=0,w[14]=be*pe*2*Me,w[15]=0,w}function xr(w,R,fe,Z,ae){var pe,be=1/Math.tan(R/2);return w[0]=be/fe,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=be,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[11]=-1,w[12]=0,w[13]=0,w[15]=0,ae!=null&&ae!==1/0?(pe=1/(Z-ae),w[10]=(ae+Z)*pe,w[14]=2*ae*Z*pe):(w[10]=-1,w[14]=-2*Z),w}function dr(w,R,fe,Z){var ae=Math.tan(R.upDegrees*Math.PI/180),pe=Math.tan(R.downDegrees*Math.PI/180),be=Math.tan(R.leftDegrees*Math.PI/180),De=Math.tan(R.rightDegrees*Math.PI/180),Ue=2/(be+De),Me=2/(ae+pe);return w[0]=Ue,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=Me,w[6]=0,w[7]=0,w[8]=-(be-De)*Ue*.5,w[9]=(ae-pe)*Me*.5,w[10]=Z/(fe-Z),w[11]=-1,w[12]=0,w[13]=0,w[14]=Z*fe/(fe-Z),w[15]=0,w}function Br(w,R,fe,Z,ae,pe,be){var De=1/(R-fe),Ue=1/(Z-ae),Me=1/(pe-be);return w[0]=-2*De,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=-2*Ue,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=2*Me,w[11]=0,w[12]=(R+fe)*De,w[13]=(ae+Z)*Ue,w[14]=(be+pe)*Me,w[15]=1,w}function Rr(w,R,fe,Z){var ae,pe,be,De,Ue,Me,Fe,Ye,Ge,Xe,Je=R[0],tt=R[1],Ve=R[2],it=Z[0],pt=Z[1],Et=Z[2],mt=fe[0],xt=fe[1],Ot=fe[2];return Math.abs(Je-mt)<x.b&&Math.abs(tt-xt)<x.b&&Math.abs(Ve-Ot)<x.b?ue(w):(Fe=Je-mt,Ye=tt-xt,Ge=Ve-Ot,ae=pt*(Ge*=Xe=1/Math.hypot(Fe,Ye,Ge))-Et*(Ye*=Xe),pe=Et*(Fe*=Xe)-it*Ge,be=it*Ye-pt*Fe,(Xe=Math.hypot(ae,pe,be))?(ae*=Xe=1/Xe,pe*=Xe,be*=Xe):(ae=0,pe=0,be=0),De=Ye*be-Ge*pe,Ue=Ge*ae-Fe*be,Me=Fe*pe-Ye*ae,(Xe=Math.hypot(De,Ue,Me))?(De*=Xe=1/Xe,Ue*=Xe,Me*=Xe):(De=0,Ue=0,Me=0),w[0]=ae,w[1]=De,w[2]=Fe,w[3]=0,w[4]=pe,w[5]=Ue,w[6]=Ye,w[7]=0,w[8]=be,w[9]=Me,w[10]=Ge,w[11]=0,w[12]=-(ae*Je+pe*tt+be*Ve),w[13]=-(De*Je+Ue*tt+Me*Ve),w[14]=-(Fe*Je+Ye*tt+Ge*Ve),w[15]=1,w)}function pn(w,R,fe,Z){var ae=R[0],pe=R[1],be=R[2],De=Z[0],Ue=Z[1],Me=Z[2],Fe=ae-fe[0],Ye=pe-fe[1],Ge=be-fe[2],Xe=Fe*Fe+Ye*Ye+Ge*Ge;Xe>0&&(Fe*=Xe=1/Math.sqrt(Xe),Ye*=Xe,Ge*=Xe);var Je=Ue*Ge-Me*Ye,tt=Me*Fe-De*Ge,Ve=De*Ye-Ue*Fe;return(Xe=Je*Je+tt*tt+Ve*Ve)>0&&(Je*=Xe=1/Math.sqrt(Xe),tt*=Xe,Ve*=Xe),w[0]=Je,w[1]=tt,w[2]=Ve,w[3]=0,w[4]=Ye*Ve-Ge*tt,w[5]=Ge*Je-Fe*Ve,w[6]=Fe*tt-Ye*Je,w[7]=0,w[8]=Fe,w[9]=Ye,w[10]=Ge,w[11]=0,w[12]=ae,w[13]=pe,w[14]=be,w[15]=1,w}function zr(w){return"mat4("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+", "+w[4]+", "+w[5]+", "+w[6]+", "+w[7]+", "+w[8]+", "+w[9]+", "+w[10]+", "+w[11]+", "+w[12]+", "+w[13]+", "+w[14]+", "+w[15]+")"}function Nr(w){return Math.hypot(w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8],w[9],w[10],w[11],w[12],w[13],w[14],w[15])}function Dr(w,R,fe){return w[0]=R[0]+fe[0],w[1]=R[1]+fe[1],w[2]=R[2]+fe[2],w[3]=R[3]+fe[3],w[4]=R[4]+fe[4],w[5]=R[5]+fe[5],w[6]=R[6]+fe[6],w[7]=R[7]+fe[7],w[8]=R[8]+fe[8],w[9]=R[9]+fe[9],w[10]=R[10]+fe[10],w[11]=R[11]+fe[11],w[12]=R[12]+fe[12],w[13]=R[13]+fe[13],w[14]=R[14]+fe[14],w[15]=R[15]+fe[15],w}function rn(w,R,fe){return w[0]=R[0]-fe[0],w[1]=R[1]-fe[1],w[2]=R[2]-fe[2],w[3]=R[3]-fe[3],w[4]=R[4]-fe[4],w[5]=R[5]-fe[5],w[6]=R[6]-fe[6],w[7]=R[7]-fe[7],w[8]=R[8]-fe[8],w[9]=R[9]-fe[9],w[10]=R[10]-fe[10],w[11]=R[11]-fe[11],w[12]=R[12]-fe[12],w[13]=R[13]-fe[13],w[14]=R[14]-fe[14],w[15]=R[15]-fe[15],w}function Ir(w,R,fe){return w[0]=R[0]*fe,w[1]=R[1]*fe,w[2]=R[2]*fe,w[3]=R[3]*fe,w[4]=R[4]*fe,w[5]=R[5]*fe,w[6]=R[6]*fe,w[7]=R[7]*fe,w[8]=R[8]*fe,w[9]=R[9]*fe,w[10]=R[10]*fe,w[11]=R[11]*fe,w[12]=R[12]*fe,w[13]=R[13]*fe,w[14]=R[14]*fe,w[15]=R[15]*fe,w}function On(w,R,fe,Z){return w[0]=R[0]+fe[0]*Z,w[1]=R[1]+fe[1]*Z,w[2]=R[2]+fe[2]*Z,w[3]=R[3]+fe[3]*Z,w[4]=R[4]+fe[4]*Z,w[5]=R[5]+fe[5]*Z,w[6]=R[6]+fe[6]*Z,w[7]=R[7]+fe[7]*Z,w[8]=R[8]+fe[8]*Z,w[9]=R[9]+fe[9]*Z,w[10]=R[10]+fe[10]*Z,w[11]=R[11]+fe[11]*Z,w[12]=R[12]+fe[12]*Z,w[13]=R[13]+fe[13]*Z,w[14]=R[14]+fe[14]*Z,w[15]=R[15]+fe[15]*Z,w}function In(w,R){return w[0]===R[0]&&w[1]===R[1]&&w[2]===R[2]&&w[3]===R[3]&&w[4]===R[4]&&w[5]===R[5]&&w[6]===R[6]&&w[7]===R[7]&&w[8]===R[8]&&w[9]===R[9]&&w[10]===R[10]&&w[11]===R[11]&&w[12]===R[12]&&w[13]===R[13]&&w[14]===R[14]&&w[15]===R[15]}function Dn(w,R){var fe=w[0],Z=w[1],ae=w[2],pe=w[3],be=w[4],De=w[5],Ue=w[6],Me=w[7],Fe=w[8],Ye=w[9],Ge=w[10],Xe=w[11],Je=w[12],tt=w[13],Ve=w[14],it=w[15],pt=R[0],Et=R[1],mt=R[2],xt=R[3],Ot=R[4],yt=R[5],qe=R[6],at=R[7],ht=R[8],Mt=R[9],zt=R[10],Ut=R[11],Xt=R[12],fr=R[13],Or=R[14],kr=R[15];return Math.abs(fe-pt)<=x.b*Math.max(1,Math.abs(fe),Math.abs(pt))&&Math.abs(Z-Et)<=x.b*Math.max(1,Math.abs(Z),Math.abs(Et))&&Math.abs(ae-mt)<=x.b*Math.max(1,Math.abs(ae),Math.abs(mt))&&Math.abs(pe-xt)<=x.b*Math.max(1,Math.abs(pe),Math.abs(xt))&&Math.abs(be-Ot)<=x.b*Math.max(1,Math.abs(be),Math.abs(Ot))&&Math.abs(De-yt)<=x.b*Math.max(1,Math.abs(De),Math.abs(yt))&&Math.abs(Ue-qe)<=x.b*Math.max(1,Math.abs(Ue),Math.abs(qe))&&Math.abs(Me-at)<=x.b*Math.max(1,Math.abs(Me),Math.abs(at))&&Math.abs(Fe-ht)<=x.b*Math.max(1,Math.abs(Fe),Math.abs(ht))&&Math.abs(Ye-Mt)<=x.b*Math.max(1,Math.abs(Ye),Math.abs(Mt))&&Math.abs(Ge-zt)<=x.b*Math.max(1,Math.abs(Ge),Math.abs(zt))&&Math.abs(Xe-Ut)<=x.b*Math.max(1,Math.abs(Xe),Math.abs(Ut))&&Math.abs(Je-Xt)<=x.b*Math.max(1,Math.abs(Je),Math.abs(Xt))&&Math.abs(tt-fr)<=x.b*Math.max(1,Math.abs(tt),Math.abs(fr))&&Math.abs(Ve-Or)<=x.b*Math.max(1,Math.abs(Ve),Math.abs(Or))&&Math.abs(it-kr)<=x.b*Math.max(1,Math.abs(it),Math.abs(kr))}var Rn=Ae,gn=rn,Er=o(39);function ln(){var w=new x.a(4);return x.a!=Float32Array&&(w[0]=0,w[1]=0,w[2]=0,w[3]=0),w}function yn(w){var R=new x.a(4);return R[0]=w[0],R[1]=w[1],R[2]=w[2],R[3]=w[3],R}function mn(w,R,fe,Z){var ae=new x.a(4);return ae[0]=w,ae[1]=R,ae[2]=fe,ae[3]=Z,ae}function Qn(w,R){return w[0]=R[0],w[1]=R[1],w[2]=R[2],w[3]=R[3],w}function Un(w,R,fe,Z,ae){return w[0]=R,w[1]=fe,w[2]=Z,w[3]=ae,w}function ri(w,R,fe){return w[0]=R[0]+fe[0],w[1]=R[1]+fe[1],w[2]=R[2]+fe[2],w[3]=R[3]+fe[3],w}function Ei(w,R,fe){return w[0]=R[0]-fe[0],w[1]=R[1]-fe[1],w[2]=R[2]-fe[2],w[3]=R[3]-fe[3],w}function ni(w,R,fe){return w[0]=R[0]*fe[0],w[1]=R[1]*fe[1],w[2]=R[2]*fe[2],w[3]=R[3]*fe[3],w}function Bn(w,R,fe){return w[0]=R[0]/fe[0],w[1]=R[1]/fe[1],w[2]=R[2]/fe[2],w[3]=R[3]/fe[3],w}function wi(w,R){return w[0]=Math.ceil(R[0]),w[1]=Math.ceil(R[1]),w[2]=Math.ceil(R[2]),w[3]=Math.ceil(R[3]),w}function Oi(w,R){return w[0]=Math.floor(R[0]),w[1]=Math.floor(R[1]),w[2]=Math.floor(R[2]),w[3]=Math.floor(R[3]),w}function Wn(w,R,fe){return w[0]=Math.min(R[0],fe[0]),w[1]=Math.min(R[1],fe[1]),w[2]=Math.min(R[2],fe[2]),w[3]=Math.min(R[3],fe[3]),w}function ii(w,R,fe){return w[0]=Math.max(R[0],fe[0]),w[1]=Math.max(R[1],fe[1]),w[2]=Math.max(R[2],fe[2]),w[3]=Math.max(R[3],fe[3]),w}function Jn(w,R){return w[0]=Math.round(R[0]),w[1]=Math.round(R[1]),w[2]=Math.round(R[2]),w[3]=Math.round(R[3]),w}function hi(w,R,fe){return w[0]=R[0]*fe,w[1]=R[1]*fe,w[2]=R[2]*fe,w[3]=R[3]*fe,w}function Vn(w,R,fe,Z){return w[0]=R[0]+fe[0]*Z,w[1]=R[1]+fe[1]*Z,w[2]=R[2]+fe[2]*Z,w[3]=R[3]+fe[3]*Z,w}function oi(w,R){var fe=R[0]-w[0],Z=R[1]-w[1],ae=R[2]-w[2],pe=R[3]-w[3];return Math.hypot(fe,Z,ae,pe)}function di(w,R){var fe=R[0]-w[0],Z=R[1]-w[1],ae=R[2]-w[2],pe=R[3]-w[3];return fe*fe+Z*Z+ae*ae+pe*pe}function _i(w){var R=w[0],fe=w[1],Z=w[2],ae=w[3];return Math.hypot(R,fe,Z,ae)}function Xn(w){var R=w[0],fe=w[1],Z=w[2],ae=w[3];return R*R+fe*fe+Z*Z+ae*ae}function Yn(w,R){return w[0]=-R[0],w[1]=-R[1],w[2]=-R[2],w[3]=-R[3],w}function Mi(w,R){return w[0]=1/R[0],w[1]=1/R[1],w[2]=1/R[2],w[3]=1/R[3],w}function Bi(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=fe*fe+Z*Z+ae*ae+pe*pe;return be>0&&(be=1/Math.sqrt(be)),w[0]=fe*be,w[1]=Z*be,w[2]=ae*be,w[3]=pe*be,w}function Hn(w,R){return w[0]*R[0]+w[1]*R[1]+w[2]*R[2]+w[3]*R[3]}function io(w,R,fe,Z){var ae=fe[0]*Z[1]-fe[1]*Z[0],pe=fe[0]*Z[2]-fe[2]*Z[0],be=fe[0]*Z[3]-fe[3]*Z[0],De=fe[1]*Z[2]-fe[2]*Z[1],Ue=fe[1]*Z[3]-fe[3]*Z[1],Me=fe[2]*Z[3]-fe[3]*Z[2],Fe=R[0],Ye=R[1],Ge=R[2],Xe=R[3];return w[0]=Ye*Me-Ge*Ue+Xe*De,w[1]=-Fe*Me+Ge*be-Xe*pe,w[2]=Fe*Ue-Ye*be+Xe*ae,w[3]=-Fe*De+Ye*pe-Ge*ae,w}function ci(w,R,fe,Z){var ae=R[0],pe=R[1],be=R[2],De=R[3];return w[0]=ae+Z*(fe[0]-ae),w[1]=pe+Z*(fe[1]-pe),w[2]=be+Z*(fe[2]-be),w[3]=De+Z*(fe[3]-De),w}function li(w,R){var fe,Z,ae,pe,be,De;R=R||1;do be=(fe=2*x.c()-1)*fe+(Z=2*x.c()-1)*Z;while(be>=1);do De=(ae=2*x.c()-1)*ae+(pe=2*x.c()-1)*pe;while(De>=1);var Ue=Math.sqrt((1-be)/De);return w[0]=R*fe,w[1]=R*Z,w[2]=R*ae*Ue,w[3]=R*pe*Ue,w}function oo(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=R[3];return w[0]=fe[0]*Z+fe[4]*ae+fe[8]*pe+fe[12]*be,w[1]=fe[1]*Z+fe[5]*ae+fe[9]*pe+fe[13]*be,w[2]=fe[2]*Z+fe[6]*ae+fe[10]*pe+fe[14]*be,w[3]=fe[3]*Z+fe[7]*ae+fe[11]*pe+fe[15]*be,w}function Ki(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=fe[0],De=fe[1],Ue=fe[2],Me=fe[3],Fe=Me*Z+De*pe-Ue*ae,Ye=Me*ae+Ue*Z-be*pe,Ge=Me*pe+be*ae-De*Z,Xe=-be*Z-De*ae-Ue*pe;return w[0]=Fe*Me+Xe*-be+Ye*-Ue-Ge*-De,w[1]=Ye*Me+Xe*-De+Ge*-be-Fe*-Ue,w[2]=Ge*Me+Xe*-Ue+Fe*-De-Ye*-be,w[3]=R[3],w}function Zi(w){return w[0]=0,w[1]=0,w[2]=0,w[3]=0,w}function go(w){return"vec4("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+")"}function nr(w,R){return w[0]===R[0]&&w[1]===R[1]&&w[2]===R[2]&&w[3]===R[3]}function We(w,R){var fe=w[0],Z=w[1],ae=w[2],pe=w[3],be=R[0],De=R[1],Ue=R[2],Me=R[3];return Math.abs(fe-be)<=x.b*Math.max(1,Math.abs(fe),Math.abs(be))&&Math.abs(Z-De)<=x.b*Math.max(1,Math.abs(Z),Math.abs(De))&&Math.abs(ae-Ue)<=x.b*Math.max(1,Math.abs(ae),Math.abs(Ue))&&Math.abs(pe-Me)<=x.b*Math.max(1,Math.abs(pe),Math.abs(Me))}var Ne,He=Ei,ft=ni,Ct=Bn,Ht=oi,vr=di,Be=_i,ut=Xn,bt=(Ne=ln(),function(w,R,fe,Z,ae,pe){var be,De;for(R||(R=4),fe||(fe=0),De=Z?Math.min(Z*R+fe,w.length):w.length,be=fe;be<De;be+=R)Ne[0]=w[be],Ne[1]=w[be+1],Ne[2]=w[be+2],Ne[3]=w[be+3],ae(Ne,Ne,pe),w[be]=Ne[0],w[be+1]=Ne[1],w[be+2]=Ne[2],w[be+3]=Ne[3];return w});function Ft(){var w=new x.a(4);return x.a!=Float32Array&&(w[0]=0,w[1]=0,w[2]=0),w[3]=1,w}function _e(w){return w[0]=0,w[1]=0,w[2]=0,w[3]=1,w}function ze(w,R,fe){fe*=.5;var Z=Math.sin(fe);return w[0]=Z*R[0],w[1]=Z*R[1],w[2]=Z*R[2],w[3]=Math.cos(fe),w}function Qe(w,R){var fe=2*Math.acos(R[3]),Z=Math.sin(fe/2);return Z>x.b?(w[0]=R[0]/Z,w[1]=R[1]/Z,w[2]=R[2]/Z):(w[0]=1,w[1]=0,w[2]=0),fe}function lt(w,R){var fe=Gn(w,R);return Math.acos(2*fe*fe-1)}function vt(w,R,fe){var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=fe[0],Ue=fe[1],Me=fe[2],Fe=fe[3];return w[0]=Z*Fe+be*De+ae*Me-pe*Ue,w[1]=ae*Fe+be*Ue+pe*De-Z*Me,w[2]=pe*Fe+be*Me+Z*Ue-ae*De,w[3]=be*Fe-Z*De-ae*Ue-pe*Me,w}function wt(w,R,fe){fe*=.5;var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=Math.sin(fe),Ue=Math.cos(fe);return w[0]=Z*Ue+be*De,w[1]=ae*Ue+pe*De,w[2]=pe*Ue-ae*De,w[3]=be*Ue-Z*De,w}function Lt(w,R,fe){fe*=.5;var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=Math.sin(fe),Ue=Math.cos(fe);return w[0]=Z*Ue-pe*De,w[1]=ae*Ue+be*De,w[2]=pe*Ue+Z*De,w[3]=be*Ue-ae*De,w}function Wt(w,R,fe){fe*=.5;var Z=R[0],ae=R[1],pe=R[2],be=R[3],De=Math.sin(fe),Ue=Math.cos(fe);return w[0]=Z*Ue+ae*De,w[1]=ae*Ue-Z*De,w[2]=pe*Ue+be*De,w[3]=be*Ue-pe*De,w}function er(w,R){var fe=R[0],Z=R[1],ae=R[2];return w[0]=fe,w[1]=Z,w[2]=ae,w[3]=Math.sqrt(Math.abs(1-fe*fe-Z*Z-ae*ae)),w}function tr(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=Math.sqrt(fe*fe+Z*Z+ae*ae),De=Math.exp(pe),Ue=be>0?De*Math.sin(be)/be:0;return w[0]=fe*Ue,w[1]=Z*Ue,w[2]=ae*Ue,w[3]=De*Math.cos(be),w}function ar(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=Math.sqrt(fe*fe+Z*Z+ae*ae),De=be>0?Math.atan2(be,pe)/be:0;return w[0]=fe*De,w[1]=Z*De,w[2]=ae*De,w[3]=.5*Math.log(fe*fe+Z*Z+ae*ae+pe*pe),w}function pr(w,R,fe){return ar(w,R),ki(w,w,fe),tr(w,w),w}function Ur(w,R,fe,Z){var ae,pe,be,De,Ue,Me=R[0],Fe=R[1],Ye=R[2],Ge=R[3],Xe=fe[0],Je=fe[1],tt=fe[2],Ve=fe[3];return(pe=Me*Xe+Fe*Je+Ye*tt+Ge*Ve)<0&&(pe=-pe,Xe=-Xe,Je=-Je,tt=-tt,Ve=-Ve),1-pe>x.b?(ae=Math.acos(pe),be=Math.sin(ae),De=Math.sin((1-Z)*ae)/be,Ue=Math.sin(Z*ae)/be):(De=1-Z,Ue=Z),w[0]=De*Me+Ue*Xe,w[1]=De*Fe+Ue*Je,w[2]=De*Ye+Ue*tt,w[3]=De*Ge+Ue*Ve,w}function Gr(w){var R=x.c(),fe=x.c(),Z=x.c(),ae=Math.sqrt(1-R),pe=Math.sqrt(R);return w[0]=ae*Math.sin(2*Math.PI*fe),w[1]=ae*Math.cos(2*Math.PI*fe),w[2]=pe*Math.sin(2*Math.PI*Z),w[3]=pe*Math.cos(2*Math.PI*Z),w}function $r(w,R){var fe=R[0],Z=R[1],ae=R[2],pe=R[3],be=fe*fe+Z*Z+ae*ae+pe*pe,De=be?1/be:0;return w[0]=-fe*De,w[1]=-Z*De,w[2]=-ae*De,w[3]=pe*De,w}function Kr(w,R){return w[0]=-R[0],w[1]=-R[1],w[2]=-R[2],w[3]=R[3],w}function jn(w,R){var fe,Z=R[0]+R[4]+R[8];if(Z>0)fe=Math.sqrt(Z+1),w[3]=.5*fe,fe=.5/fe,w[0]=(R[5]-R[7])*fe,w[1]=(R[6]-R[2])*fe,w[2]=(R[1]-R[3])*fe;else{var ae=0;R[4]>R[0]&&(ae=1),R[8]>R[3*ae+ae]&&(ae=2);var pe=(ae+1)%3,be=(ae+2)%3;fe=Math.sqrt(R[3*ae+ae]-R[3*pe+pe]-R[3*be+be]+1),w[ae]=.5*fe,fe=.5/fe,w[3]=(R[3*pe+be]-R[3*be+pe])*fe,w[pe]=(R[3*pe+ae]+R[3*ae+pe])*fe,w[be]=(R[3*be+ae]+R[3*ae+be])*fe}return w}function Cn(w,R,fe,Z){var ae=.5*Math.PI/180;R*=ae,fe*=ae,Z*=ae;var pe=Math.sin(R),be=Math.cos(R),De=Math.sin(fe),Ue=Math.cos(fe),Me=Math.sin(Z),Fe=Math.cos(Z);return w[0]=pe*Ue*Fe-be*De*Me,w[1]=be*De*Fe+pe*Ue*Me,w[2]=be*Ue*Me-pe*De*Fe,w[3]=be*Ue*Fe+pe*De*Me,w}function qn(w){return"quat("+w[0]+", "+w[1]+", "+w[2]+", "+w[3]+")"}var Qr,Mn,ai,Sn,si,Jr,Mo=yn,Gi=mn,$i=Qn,nn=Un,pi=ri,Qi=vt,ki=hi,Gn=Hn,Fi=ci,Ni=_i,fi=Ni,zi=Xn,Ai=zi,Ji=Bi,ao=nr,Ui=We,Ci=(Qr=Er.create(),Mn=Er.fromValues(1,0,0),ai=Er.fromValues(0,1,0),function(w,R,fe){var Z=Er.dot(R,fe);return Z<-.999999?(Er.cross(Qr,Mn,R),Er.len(Qr)<1e-6&&Er.cross(Qr,ai,R),Er.normalize(Qr,Qr),ze(w,Qr,Math.PI),w):Z>.999999?(w[0]=0,w[1]=0,w[2]=0,w[3]=1,w):(Er.cross(Qr,R,fe),w[0]=Qr[0],w[1]=Qr[1],w[2]=Qr[2],w[3]=1+Z,Ji(w,w))}),_t=(Sn=Ft(),si=Ft(),function(w,R,fe,Z,ae,pe){return Ur(Sn,R,ae,pe),Ur(si,fe,Z,pe),Ur(w,Sn,si,2*pe*(1-pe)),w}),$e=(Jr=O(),function(w,R,fe,Z){return Jr[0]=fe[0],Jr[3]=fe[1],Jr[6]=fe[2],Jr[1]=Z[0],Jr[4]=Z[1],Jr[7]=Z[2],Jr[2]=-R[0],Jr[5]=-R[1],Jr[8]=-R[2],Ji(w,jn(w,Jr))}),St=o(79)},function(D,m,o){"use strict";o.d(m,"AST_TOKEN_TYPES",function(){return d}),o.d(m,"STORAGE_CLASS",function(){return E}),o.d(m,"Target",function(){return b}),o.d(m,"DefineValuePlaceholder",function(){return A}),o(228),o(25),o(132),o(134),o(119),o(120),o(121),o(122),o(123),o(124),o(68),o(126),o(127),o(128),o(129);var f=o(118);o.d(m,"createEntity",function(){return f.b});var c=o(13);o.d(m,"IDENTIFIER",function(){return c.a});var M=o(91);o.d(m,"createWorldContainer",function(){return M.a});var _=o(237);o.d(m,"generateAABBFromVertices",function(){return _.a});var x=o(238);o.d(m,"isSafari",function(){return x.a}),o(267);var O=o(268);o.d(m,"AABB",function(){return O.a}),o.d(m,"Frustum",function(){return O.b});var S=o(114);o.o(S,"gl")&&o.d(m,"gl",function(){return S.gl});var g=o(250);o.o(g,"gl")&&o.d(m,"gl",function(){return g.gl});var d,y,E,b,p=o(251);o.o(p,"gl")&&o.d(m,"gl",function(){return p.gl}),o.o(S,"gl")&&o.d(m,"gl",function(){return S.gl}),function(C){C.Void="Void",C.Boolean="Boolean",C.Float="Float",C.Uint32="Uint32",C.Int32="Int32",C.Vector="Vector",C.Vector2Float="vec2<f32>",C.Vector3Float="vec3<f32>",C.Vector4Float="vec4<f32>",C.Vector2Boolean="vec2<bool>",C.Vector3Boolean="vec3<bool>",C.Vector4Boolean="vec4<bool>",C.Vector2Uint="vec2<u32>",C.Vector3Uint="vec3<u32>",C.Vector4Uint="vec4<u32>",C.Vector2Int="vec2<i32>",C.Vector3Int="vec3<i32>",C.Vector4Int="vec4<i32>",C.Matrix="Matrix",C.Matrix3x3Float="mat3x3<f32>",C.Matrix4x4Float="mat4x4<i32>",C.Struct="Struct",C.FloatArray="Float[]",C.Vector4FloatArray="vec4<f32>[]"}(d||(d={})),function(C){C.Program="Program",C.Identifier="Identifier",C.VariableDeclaration="VariableDeclaration",C.BlockStatement="BlockStatement",C.ReturnStatement="ReturnStatement",C.FunctionDeclaration="FunctionDeclaration",C.VariableDeclarator="VariableDeclarator",C.AssignmentExpression="AssignmentExpression",C.LogicalExpression="LogicalExpression",C.BinaryExpression="BinaryExpression",C.ArrayExpression="ArrayExpression",C.UnaryExpression="UnaryExpression",C.UpdateExpression="UpdateExpression",C.FunctionExpression="FunctionExpression",C.MemberExpression="MemberExpression",C.ConditionalExpression="ConditionalExpression",C.ExpressionStatement="ExpressionStatement",C.CallExpression="CallExpression",C.NumThreadStatement="NumThreadStatement",C.StorageStatement="StorageStatement",C.DoWhileStatement="DoWhileStatement",C.WhileStatement="WhileStatement",C.ForStatement="ForStatement",C.BreakStatement="BreakStatement",C.ContinueStatement="ContinueStatement",C.IfStatement="IfStatement",C.ImportedFunctionStatement="ImportedFunctionStatement"}(y||(y={})),function(C){C.Input="Input",C.Output="Output",C.Uniform="Uniform",C.Workgroup="Workgroup",C.UniformConstant="UniformConstant",C.Image="Image",C.StorageBuffer="StorageBuffer",C.Private="Private",C.Function="Function"}(E||(E={})),function(C){C.GLSL100="GLSL100",C.GLSL450="GLSL450",C.WGSL="WGSL"}(b||(b={}));var A="__DefineValuePlaceholder__"},function(D,m){D.exports=function(o,f,c){return f in o?Object.defineProperty(o,f,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[f]=c,o},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.multiBindToService=m.getServiceIdentifierAsString=m.typeConstraint=m.namedConstraint=m.taggedConstraint=m.traverseAncerstors=m.decorate=m.id=m.MetadataReader=m.postConstruct=m.targetName=m.multiInject=m.unmanaged=m.optional=m.LazyServiceIdentifer=m.inject=m.named=m.tagged=m.injectable=m.ContainerModule=m.AsyncContainerModule=m.TargetTypeEnum=m.BindingTypeEnum=m.BindingScopeEnum=m.Container=m.METADATA_KEY=void 0;var f=o(32);m.METADATA_KEY=f;var c=o(485);Object.defineProperty(m,"Container",{enumerable:!0,get:function(){return c.Container}});var M=o(54);Object.defineProperty(m,"BindingScopeEnum",{enumerable:!0,get:function(){return M.BindingScopeEnum}}),Object.defineProperty(m,"BindingTypeEnum",{enumerable:!0,get:function(){return M.BindingTypeEnum}}),Object.defineProperty(m,"TargetTypeEnum",{enumerable:!0,get:function(){return M.TargetTypeEnum}});var _=o(501);Object.defineProperty(m,"AsyncContainerModule",{enumerable:!0,get:function(){return _.AsyncContainerModule}}),Object.defineProperty(m,"ContainerModule",{enumerable:!0,get:function(){return _.ContainerModule}});var x=o(502);Object.defineProperty(m,"injectable",{enumerable:!0,get:function(){return x.injectable}});var O=o(503);Object.defineProperty(m,"tagged",{enumerable:!0,get:function(){return O.tagged}});var S=o(504);Object.defineProperty(m,"named",{enumerable:!0,get:function(){return S.named}});var g=o(233);Object.defineProperty(m,"inject",{enumerable:!0,get:function(){return g.inject}}),Object.defineProperty(m,"LazyServiceIdentifer",{enumerable:!0,get:function(){return g.LazyServiceIdentifer}});var d=o(505);Object.defineProperty(m,"optional",{enumerable:!0,get:function(){return d.optional}});var y=o(506);Object.defineProperty(m,"unmanaged",{enumerable:!0,get:function(){return y.unmanaged}});var E=o(507);Object.defineProperty(m,"multiInject",{enumerable:!0,get:function(){return E.multiInject}});var b=o(508);Object.defineProperty(m,"targetName",{enumerable:!0,get:function(){return b.targetName}});var p=o(509);Object.defineProperty(m,"postConstruct",{enumerable:!0,get:function(){return p.postConstruct}});var A=o(231);Object.defineProperty(m,"MetadataReader",{enumerable:!0,get:function(){return A.MetadataReader}});var C=o(66);Object.defineProperty(m,"id",{enumerable:!0,get:function(){return C.id}});var N=o(58);Object.defineProperty(m,"decorate",{enumerable:!0,get:function(){return N.decorate}});var P=o(236);Object.defineProperty(m,"traverseAncerstors",{enumerable:!0,get:function(){return P.traverseAncerstors}}),Object.defineProperty(m,"taggedConstraint",{enumerable:!0,get:function(){return P.taggedConstraint}}),Object.defineProperty(m,"namedConstraint",{enumerable:!0,get:function(){return P.namedConstraint}}),Object.defineProperty(m,"typeConstraint",{enumerable:!0,get:function(){return P.typeConstraint}});var L=o(90);Object.defineProperty(m,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return L.getServiceIdentifierAsString}});var z=o(510);Object.defineProperty(m,"multiBindToService",{enumerable:!0,get:function(){return z.multiBindToService}})},function(D,m){D.exports=function(o,f){if(!(o instanceof f))throw new TypeError("Cannot call a class as a function")},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){function o(f,c){for(var M=0;M<c.length;M++){var _=c[M];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}}D.exports=function(f,c,M){return c&&o(f.prototype,c),M&&o(f,M),f},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),function(f){f.TextureCompressionBC="texture-compression-bc"}(m.ExtensionName||(m.ExtensionName={})),function(f){f.ClampToEdge="clamp-to-edge",f.Repeat="repeat",f.MirrorRepeat="mirror-repeat"}(m.AddressMode||(m.AddressMode={})),function(f){f.UniformBuffer="uniform-buffer",f.StorageBuffer="storage-buffer",f.ReadonlyStorageBuffer="readonly-storage-buffer",f.Sampler="sampler",f.ComparisonSampler="comparison-sampler",f.SampledTexture="sampled-texture",f.ReadonlyStorageTexture="readonly-storage-texture",f.WriteonlyStorageTexture="writeonly-storage-texture"}(m.BindingType||(m.BindingType={})),function(f){f.Zero="zero",f.One="one",f.SrcColor="src-color",f.OneMinusSrcColor="one-minus-src-color",f.SrcAlpha="src-alpha",f.OneMinusSrcAlpha="one-minus-src-alpha",f.DstColor="dst-color",f.OneMinusDstColor="one-minus-dst-color",f.DstAlpha="dst-alpha",f.OneMinusDstAlpha="one-minus-dst-alpha",f.SrcAlphaSaturated="src-alpha-saturated",f.BlendColor="blend-color",f.OneMinusBlendColor="one-minus-blend-color"}(m.BlendFactor||(m.BlendFactor={})),function(f){f.Add="add",f.Subtract="subtract",f.ReverseSubtract="reverse-subtract",f.Min="min",f.Max="max"}(m.BlendOperation||(m.BlendOperation={})),function(f){f.Never="never",f.Less="less",f.Equal="equal",f.LessEqual="less-equal",f.Greater="greater",f.NotEqual="not-equal",f.GreaterEqual="greater-equal",f.Always="always"}(m.CompareFunction||(m.CompareFunction={})),function(f){f.None="none",f.Front="front",f.Back="back"}(m.CullMode||(m.CullMode={})),function(f){f.Nearest="nearest",f.Linear="linear"}(m.FilterMode||(m.FilterMode={})),function(f){f.CCW="ccw",f.CW="cw"}(m.FrontFace||(m.FrontFace={})),function(f){f.Uint16="uint16",f.Uint32="uint32"}(m.IndexFormat||(m.IndexFormat={})),function(f){f.Vertex="vertex",f.Instance="instance"}(m.InputStepMode||(m.InputStepMode={})),function(f){f.Load="load"}(m.LoadOp||(m.LoadOp={})),function(f){f.PointList="point-list",f.LineList="line-list",f.LineStrip="line-strip",f.TriangleList="triangle-list",f.TriangleStrip="triangle-strip"}(m.PrimitiveTopology||(m.PrimitiveTopology={})),function(f){f.Keep="keep",f.Zero="zero",f.Replace="replace",f.Invert="invert",f.IncrementClamp="increment-clamp",f.DecrementClamp="decrement-clamp",f.IncrementWrap="increment-wrap",f.DecrementWrap="decrement-wrap"}(m.StencilOperation||(m.StencilOperation={})),function(f){f.Store="store",f.Clear="clear"}(m.StoreOp||(m.StoreOp={})),function(f){f.E1d="1d",f.E2d="2d",f.E3d="3d"}(m.TextureDimension||(m.TextureDimension={})),function(f){f.R8Unorm="r8unorm",f.R8Snorm="r8snorm",f.R8Uint="r8uint",f.R8Sint="r8sint",f.R16Uint="r16uint",f.R16Sint="r16sint",f.R16Float="r16float",f.RG8Unorm="rg8unorm",f.RG8Snorm="rg8snorm",f.RG8Uint="rg8uint",f.RG8Sint="rg8sint",f.R32Uint="r32uint",f.R32Sint="r32sint",f.R32Float="r32float",f.RG16Uint="rg16uint",f.RG16Sint="rg16sint",f.RG16Float="rg16float",f.RGBA8Unorm="rgba8unorm",f.RGBA8UnormSRGB="rgba8unorm-srgb",f.RGBA8Snorm="rgba8snorm",f.RGBA8Uint="rgba8uint",f.RGBA8Sint="rgba8sint",f.BGRA8Unorm="bgra8unorm",f.BGRA8UnormSRGB="bgra8unorm-srgb",f.RGB10A2Unorm="rgb10a2unorm",f.RG11B10Float="rg11b10float",f.RG32Uint="rg32uint",f.RG32Sint="rg32sint",f.RG32Float="rg32float",f.RGBA16Uint="rgba16uint",f.RGBA16Sint="rgba16sint",f.RGBA16Float="rgba16float",f.RGBA32Uint="rgba32uint",f.RGBA32Sint="rgba32sint",f.RGBA32Float="rgba32float",f.Depth32Float="depth32float",f.Depth24Plus="depth24plus",f.Depth24PlusStencil8="depth24plus-stencil8"}(m.TextureFormat||(m.TextureFormat={})),function(f){f.Float="float",f.Sint="sint",f.Uint="uint"}(m.TextureComponentType||(m.TextureComponentType={})),function(f){f.E1d="1d",f.E2d="2d",f.E2dArray="2d-array",f.Cube="cube",f.CubeArray="cube-array",f.E3d="3d"}(m.TextureViewDimension||(m.TextureViewDimension={})),function(f){f.Uchar2="uchar2",f.Uchar4="uchar4",f.Char2="char2",f.Char4="char4",f.Uchar2Norm="uchar2norm",f.Uchar4Norm="uchar4norm",f.Char2Norm="char2norm",f.Char4Norm="char4norm",f.Ushort2="ushort2",f.Ushort4="ushort4",f.Short2="short2",f.Short4="short4",f.Ushort2Norm="ushort2norm",f.Ushort4Norm="ushort4norm",f.Short2Norm="short2norm",f.Short4Norm="short4norm",f.Half2="half2",f.Half4="half4",f.Float="float",f.Float2="float2",f.Float3="float3",f.Float4="float4",f.Uint="uint",f.Uint2="uint2",f.Uint3="uint3",f.Uint4="uint4",f.Int="int",f.Int2="int2",f.Int3="int3",f.Int4="int4"}(m.VertexFormat||(m.VertexFormat={})),function(f){f.All="all",f.StencilOnly="stencil-only",f.DepthOnly="depth-only"}(m.TextureAspect||(m.TextureAspect={})),function(f){f.Error="error",f.Warning="warning",f.Info="info"}(m.CompilationMessageType||(m.CompilationMessageType={})),function(f){f.Occlusion="occlusion"}(m.QueryType||(m.QueryType={})),function(f){f[f.MapRead=1]="MapRead",f[f.MapWrite=2]="MapWrite",f[f.CopySrc=4]="CopySrc",f[f.CopyDst=8]="CopyDst",f[f.Index=16]="Index",f[f.Vertex=32]="Vertex",f[f.Uniform=64]="Uniform",f[f.Storage=128]="Storage",f[f.Indirect=256]="Indirect",f[f.QueryResolve=512]="QueryResolve"}(m.BufferUsage||(m.BufferUsage={})),function(f){f[f.Red=1]="Red",f[f.Green=2]="Green",f[f.Blue=4]="Blue",f[f.Alpha=8]="Alpha",f[f.All=15]="All"}(m.ColorWrite||(m.ColorWrite={})),function(f){f[f.Vertex=1]="Vertex",f[f.Fragment=2]="Fragment",f[f.Compute=4]="Compute"}(m.ShaderStage||(m.ShaderStage={})),function(f){f[f.CopySrc=1]="CopySrc",f[f.CopyDst=2]="CopyDst",f[f.Sampled=4]="Sampled",f[f.Storage=8]="Storage",f[f.OutputAttachment=16]="OutputAttachment"}(m.TextureUsage||(m.TextureUsage={})),function(f){f[f.Read=1]="Read",f[f.Write=2]="Write"}(m.MapMode||(m.MapMode={}))},function(D,m,o){D.exports=o(481)},function(D,m){D.exports=function(o,f,c,M){c&&Object.defineProperty(o,f,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(M):void 0})},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){D.exports=function(o,f,c,M,_){var x={};return Object.keys(M).forEach(function(O){x[O]=M[O]}),x.enumerable=!!x.enumerable,x.configurable=!!x.configurable,("value"in x||x.initializer)&&(x.writable=!0),x=c.slice().reverse().reduce(function(O,S){return S(o,f,O)||O},x),_&&x.initializer!==void 0&&(x.value=x.initializer?x.initializer.call(_):void 0,x.initializer=void 0),x.initializer===void 0&&(Object.defineProperty(o,f,x),x=null),x},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";o.d(m,"b",function(){return f}),o.d(m,"a",function(){return c}),o.d(m,"c",function(){return M});var f=1e-6,c=typeof Float32Array!="undefined"?Float32Array:Array,M=Math.random;Math.hypot||(Math.hypot=function(){for(var _=0,x=arguments.length;x--;)_+=arguments[x]*arguments[x];return Math.sqrt(_)})},function(D,m,o){"use strict";o.d(m,"a",function(){return f});var f={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")}},function(D,m){function o(f,c,M,_,x,O,S){try{var g=f[O](S),d=g.value}catch(y){return void M(y)}g.done?c(d):Promise.resolve(d).then(_,x)}D.exports=function(f){return function(){var c=this,M=arguments;return new Promise(function(_,x){var O=f.apply(c,M);function S(d){o(O,_,x,S,g,"next",d)}function g(d){o(O,_,x,S,g,"throw",d)}S(void 0)})}},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";o.d(m,"d",function(){return c}),o.d(m,"b",function(){return M}),o.d(m,"e",function(){return _}),o.d(m,"f",function(){return x}),o.d(m,"l",function(){return O}),o.d(m,"j",function(){return S});var f=o(0);function c(){return window?window.devicePixelRatio:1}function M(g,d,y,E){var b=g-y,p=d-E;return Math.sqrt(b*b+p*p)}function _(g,d,y,E,b,p){return b>=g&&b<=g+y&&p>=d&&p<=d+E}function x(g,d){return!(d.minX>g.maxX||d.maxX<g.minX||d.minY>g.maxY||d.maxY<g.minY)}function O(g,d){return g&&d?{minX:Math.min(g.minX,d.minX),minY:Math.min(g.minY,d.minY),maxX:Math.max(g.maxX,d.maxX),maxY:Math.max(g.maxY,d.maxY)}:g||d}function S(g,d){return g[0]===d[0]&&g[1]===d[1]}o.d(m,"i",function(){return f.isNil}),o.d(m,"k",function(){return f.isString}),o.d(m,"h",function(){return f.isFunction}),o.d(m,"g",function(){return f.isArray}),o.d(m,"c",function(){return f.each}),o.d(m,"o",function(){return f.toRadian}),o.d(m,"m",function(){return f.mod}),o.d(m,"n",function(){return f.requestAnimationFrame}),o.d(m,"a",function(){return f.clearAnimationFrame})},function(D,m,o){"use strict";o.d(m,"a",function(){return f}),o.d(m,"b",function(){return c});var f={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},c={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"}},function(D,m,o){"use strict";o.d(m,"b",function(){return c.a}),o.d(m,"c",function(){return c.d}),o.d(m,"d",function(){return c.e}),o.d(m,"a",function(){return f});var f={};o.r(f),o.d(f,"leftTranslate",function(){return M}),o.d(f,"leftRotate",function(){return _}),o.d(f,"leftScale",function(){return x}),o.d(f,"transform",function(){return O}),o.d(f,"direction",function(){return S}),o.d(f,"angleTo",function(){return g}),o.d(f,"vertical",function(){return d});var c=o(2);function M(y,E,b){var p=[0,0,0,0,0,0,0,0,0];return c.a.fromTranslation(p,b),c.a.multiply(y,p,E)}function _(y,E,b){var p=[0,0,0,0,0,0,0,0,0];return c.a.fromRotation(p,b),c.a.multiply(y,p,E)}function x(y,E,b){var p=[0,0,0,0,0,0,0,0,0];return c.a.fromScaling(p,b),c.a.multiply(y,p,E)}function O(y,E){for(var b,p,A,C=y?[].concat(y):[1,0,0,0,1,0,0,0,1],N=0,P=E.length;N<P;N++){var L=E[N];switch(L[0]){case"t":M(C,C,[L[1],L[2]]);break;case"s":x(C,C,[L[1],L[2]]);break;case"r":_(C,C,L[1]);break;case"m":b=C,p=C,A=L[1],c.a.multiply(b,A,p)}}return C}function S(y,E){return y[0]*E[1]-E[0]*y[1]}function g(y,E,b){var p=c.d.angle(y,E),A=S(y,E)>=0;return b?A?2*Math.PI-p:p:A?p:2*Math.PI-p}function d(y,E,b){return b?(y[0]=E[1],y[1]=-1*E[0]):(y[0]=-1*E[1],y[1]=E[0]),y}},function(D,m){function o(f){return D.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},D.exports.default=D.exports,D.exports.__esModule=!0,o(f)}D.exports=o,D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";o.d(m,"j",function(){return c}),o.d(m,"c",function(){return M}),o.d(m,"g",function(){return _}),o.d(m,"b",function(){return x});var f=o(0);function c(O,S){var g=O.indexOf(S);g!==-1&&O.splice(g,1)}o.d(m,"e",function(){return f.isNil}),o.d(m,"d",function(){return f.isFunction}),o.d(m,"h",function(){return f.isString}),o.d(m,"f",function(){return f.isObject}),o.d(m,"i",function(){return f.mix}),o.d(m,"a",function(){return f.each}),o.d(m,"k",function(){return f.upperFirst});var M=typeof window!="undefined"&&window.document!==void 0;function _(O,S){if(O.isCanvas())return!0;for(var g=S.getParent(),d=!1;g;){if(g===O){d=!0;break}g=g.getParent()}return d}function x(O){return O.cfg.visible&&O.cfg.capture}},function(D,m,o){"use strict";o.d(m,"e",function(){return N}),o.d(m,"b",function(){return se}),o.d(m,"a",function(){return te}),o.d(m,"c",function(){return y}),o.d(m,"d",function(){return oe}),o.d(m,"f",function(){return f});var f={};function c(J){return Math.min.apply(null,J)}function M(J){return Math.max.apply(null,J)}function _(J,ee,Y,K){var G=J-Y,ne=ee-K;return Math.sqrt(G*G+ne*ne)}function x(J,ee){return Math.abs(J-ee)<.001}function O(J,ee){var Y=c(J),K=c(ee);return{x:Y,y:K,width:M(J)-Y,height:M(ee)-K}}function S(J,ee,Y,K){return{minX:c([J,Y]),maxX:M([J,Y]),minY:c([ee,K]),maxY:M([ee,K])}}function g(J){return(J+2*Math.PI)%(2*Math.PI)}o.r(f),o.d(f,"distance",function(){return _}),o.d(f,"isNumberEqual",function(){return x}),o.d(f,"getBBoxByArray",function(){return O}),o.d(f,"getBBoxRange",function(){return S}),o.d(f,"piMod",function(){return g});var d=o(79),y={box:function(J,ee,Y,K){return O([J,Y],[ee,K])},length:function(J,ee,Y,K){return _(J,ee,Y,K)},pointAt:function(J,ee,Y,K,G){return{x:(1-G)*J+G*Y,y:(1-G)*ee+G*K}},pointDistance:function(J,ee,Y,K,G,ne){var le=(Y-J)*(G-J)+(K-ee)*(ne-ee);return le<0?_(J,ee,G,ne):le>(Y-J)*(Y-J)+(K-ee)*(K-ee)?_(Y,K,G,ne):this.pointToLine(J,ee,Y,K,G,ne)},pointToLine:function(J,ee,Y,K,G,ne){var le=[Y-J,K-ee];if(d.exactEquals(le,[0,0]))return Math.sqrt((G-J)*(G-J)+(ne-ee)*(ne-ee));var ue=[-le[1],le[0]];d.normalize(ue,ue);var Q=[G-J,ne-ee];return Math.abs(d.dot(Q,ue))},tangentAngle:function(J,ee,Y,K){return Math.atan2(K-ee,Y-J)}};function E(J,ee,Y,K,G,ne){var le,ue=1/0,Q=[Y,K],he=20;ne&&ne>200&&(he=ne/10);for(var Se=1/he,je=Se/10,Ae=0;Ae<=he;Ae++){var Ce=Ae*Se,Re=[G.apply(null,J.concat([Ce])),G.apply(null,ee.concat([Ce]))];(et=_(Q[0],Q[1],Re[0],Re[1]))<ue&&(le=Ce,ue=et)}if(le===0)return{x:J[0],y:ee[0]};if(le===1){var Ee=J.length;return{x:J[Ee-1],y:ee[Ee-1]}}for(ue=1/0,Ae=0;Ae<32&&!(je<1e-4);Ae++){var Le=le-je,Ke=le+je,et=(Re=[G.apply(null,J.concat([Le])),G.apply(null,ee.concat([Le]))],_(Q[0],Q[1],Re[0],Re[1]));if(Le>=0&&et<ue)le=Le,ue=et;else{var ot=[G.apply(null,J.concat([Ke])),G.apply(null,ee.concat([Ke]))],dt=_(Q[0],Q[1],ot[0],ot[1]);Ke<=1&&dt<ue?(le=Ke,ue=dt):je*=.5}}return{x:G.apply(null,J.concat([le])),y:G.apply(null,ee.concat([le]))}}function b(J,ee,Y,K){var G=1-K;return G*G*J+2*K*G*ee+K*K*Y}function p(J,ee,Y){var K=J+Y-2*ee;if(x(K,0))return[.5];var G=(J-ee)/K;return G<=1&&G>=0?[G]:[]}function A(J,ee,Y,K){return 2*(1-K)*(ee-J)+2*K*(Y-ee)}function C(J,ee,Y,K,G,ne,le){var ue=b(J,Y,G,le),Q=b(ee,K,ne,le),he=y.pointAt(J,ee,Y,K,le),Se=y.pointAt(Y,K,G,ne,le);return[[J,ee,he.x,he.y,ue,Q],[ue,Q,Se.x,Se.y,G,ne]]}var N={box:function(J,ee,Y,K,G,ne){var le=p(J,Y,G)[0],ue=p(ee,K,ne)[0],Q=[J,G],he=[ee,ne];return le!==void 0&&Q.push(b(J,Y,G,le)),ue!==void 0&&he.push(b(ee,K,ne,ue)),O(Q,he)},length:function(J,ee,Y,K,G,ne){return function le(ue,Q,he,Se,je,Ae,Ce){if(Ce===0)return(_(ue,Q,he,Se)+_(he,Se,je,Ae)+_(ue,Q,je,Ae))/2;var Re=C(ue,Q,he,Se,je,Ae,.5),Ee=Re[0],Le=Re[1];return Ee.push(Ce-1),Le.push(Ce-1),le.apply(null,Ee)+le.apply(null,Le)}(J,ee,Y,K,G,ne,3)},nearestPoint:function(J,ee,Y,K,G,ne,le,ue){return E([J,Y,G],[ee,K,ne],le,ue,b)},pointDistance:function(J,ee,Y,K,G,ne,le,ue){var Q=this.nearestPoint(J,ee,Y,K,G,ne,le,ue);return _(Q.x,Q.y,le,ue)},interpolationAt:b,pointAt:function(J,ee,Y,K,G,ne,le){return{x:b(J,Y,G,le),y:b(ee,K,ne,le)}},divide:function(J,ee,Y,K,G,ne,le){return C(J,ee,Y,K,G,ne,le)},tangentAngle:function(J,ee,Y,K,G,ne,le){var ue=A(J,Y,G,le),Q=A(ee,K,ne,le);return g(Math.atan2(Q,ue))}};function P(J,ee,Y,K,G){var ne=1-G;return ne*ne*ne*J+3*ee*G*ne*ne+3*Y*G*G*ne+K*G*G*G}function L(J,ee,Y,K,G){var ne=1-G;return 3*(ne*ne*(ee-J)+2*ne*G*(Y-ee)+G*G*(K-Y))}function z(J,ee,Y,K){var G,ne,le,ue=-3*J+9*ee-9*Y+3*K,Q=6*J-12*ee+6*Y,he=3*ee-3*J,Se=[];if(x(ue,0))x(Q,0)||(G=-he/Q)>=0&&G<=1&&Se.push(G);else{var je=Q*Q-4*ue*he;x(je,0)?Se.push(-Q/(2*ue)):je>0&&(ne=(-Q-(le=Math.sqrt(je)))/(2*ue),(G=(-Q+le)/(2*ue))>=0&&G<=1&&Se.push(G),ne>=0&&ne<=1&&Se.push(ne))}return Se}function X(J,ee,Y,K,G,ne,le,ue,Q){var he=P(J,Y,G,le,Q),Se=P(ee,K,ne,ue,Q),je=y.pointAt(J,ee,Y,K,Q),Ae=y.pointAt(Y,K,G,ne,Q),Ce=y.pointAt(G,ne,le,ue,Q),Re=y.pointAt(je.x,je.y,Ae.x,Ae.y,Q),Ee=y.pointAt(Ae.x,Ae.y,Ce.x,Ce.y,Q);return[[J,ee,je.x,je.y,Re.x,Re.y,he,Se],[he,Se,Ee.x,Ee.y,Ce.x,Ce.y,le,ue]]}function re(J,ee,Y,K,G,ne,le,ue,Q){if(Q===0)return function(Ae,Ce){for(var Re=0,Ee=Ae.length,Le=0;Le<Ee;Le++)Re+=_(Ae[Le],Ce[Le],Ae[(Le+1)%Ee],Ce[(Le+1)%Ee]);return Re/2}([J,Y,G,le],[ee,K,ne,ue]);var he=X(J,ee,Y,K,G,ne,le,ue,.5),Se=he[0],je=he[1];return Se.push(Q-1),je.push(Q-1),re.apply(null,Se)+re.apply(null,je)}var se={extrema:z,box:function(J,ee,Y,K,G,ne,le,ue){for(var Q=[J,le],he=[ee,ue],Se=z(J,Y,G,le),je=z(ee,K,ne,ue),Ae=0;Ae<Se.length;Ae++)Q.push(P(J,Y,G,le,Se[Ae]));for(Ae=0;Ae<je.length;Ae++)he.push(P(ee,K,ne,ue,je[Ae]));return O(Q,he)},length:function(J,ee,Y,K,G,ne,le,ue){return re(J,ee,Y,K,G,ne,le,ue,3)},nearestPoint:function(J,ee,Y,K,G,ne,le,ue,Q,he,Se){return E([J,Y,G,le],[ee,K,ne,ue],Q,he,P,Se)},pointDistance:function(J,ee,Y,K,G,ne,le,ue,Q,he,Se){var je=this.nearestPoint(J,ee,Y,K,G,ne,le,ue,Q,he,Se);return _(je.x,je.y,Q,he)},interpolationAt:P,pointAt:function(J,ee,Y,K,G,ne,le,ue,Q){return{x:P(J,Y,G,le,Q),y:P(ee,K,ne,ue,Q)}},divide:function(J,ee,Y,K,G,ne,le,ue,Q){return X(J,ee,Y,K,G,ne,le,ue,Q)},tangentAngle:function(J,ee,Y,K,G,ne,le,ue,Q){var he=L(J,Y,G,le,Q),Se=L(ee,K,ne,ue,Q);return g(Math.atan2(Se,he))}};function ce(J,ee){var Y=Math.abs(J);return ee>0?Y:-1*Y}var xe=function(J,ee,Y,K,G,ne){var le=Y,ue=K;if(le===0||ue===0)return{x:J,y:ee};for(var Q,he,Se=G-J,je=ne-ee,Ae=Math.abs(Se),Ce=Math.abs(je),Re=le*le,Ee=ue*ue,Le=Math.PI/4,Ke=0;Ke<4;Ke++){Q=le*Math.cos(Le),he=ue*Math.sin(Le);var et=(Re-Ee)*Math.pow(Math.cos(Le),3)/le,ot=(Ee-Re)*Math.pow(Math.sin(Le),3)/ue,dt=Q-et,At=he-ot,Tt=Ae-et,jt=Ce-ot,Kt=Math.hypot(At,dt),Qt=Math.hypot(jt,Tt);Le+=Kt*Math.asin((dt*jt-At*Tt)/(Kt*Qt))/Math.sqrt(Re+Ee-Q*Q-he*he),Le=Math.min(Math.PI/2,Math.max(0,Le))}return{x:J+ce(Q,Se),y:ee+ce(he,je)}};function ye(J,ee,Y,K,G,ne){return Y*Math.cos(G)*Math.cos(ne)-K*Math.sin(G)*Math.sin(ne)+J}function W(J,ee,Y,K,G,ne){return Y*Math.sin(G)*Math.cos(ne)+K*Math.cos(G)*Math.sin(ne)+ee}function Ie(J,ee,Y){return{x:J*Math.cos(Y),y:ee*Math.sin(Y)}}function ge(J,ee,Y){var K=Math.cos(Y),G=Math.sin(Y);return[J*K-ee*G,J*G+ee*K]}var te={box:function(J,ee,Y,K,G,ne,le){for(var ue=function(dt,At,Tt){return Math.atan(-At/dt*Math.tan(Tt))}(Y,K,G),Q=1/0,he=-1/0,Se=[ne,le],je=2*-Math.PI;je<=2*Math.PI;je+=Math.PI){var Ae=ue+je;ne<le?ne<Ae&&Ae<le&&Se.push(Ae):le<Ae&&Ae<ne&&Se.push(Ae)}for(je=0;je<Se.length;je++){var Ce=ye(J,0,Y,K,G,Se[je]);Ce<Q&&(Q=Ce),Ce>he&&(he=Ce)}var Re=function(dt,At,Tt){return Math.atan(At/(dt*Math.tan(Tt)))}(Y,K,G),Ee=1/0,Le=-1/0,Ke=[ne,le];for(je=2*-Math.PI;je<=2*Math.PI;je+=Math.PI){var et=Re+je;ne<le?ne<et&&et<le&&Ke.push(et):le<et&&et<ne&&Ke.push(et)}for(je=0;je<Ke.length;je++){var ot=W(0,ee,Y,K,G,Ke[je]);ot<Ee&&(Ee=ot),ot>Le&&(Le=ot)}return{x:Q,y:Ee,width:he-Q,height:Le-Ee}},length:function(J,ee,Y,K,G,ne,le){},nearestPoint:function(J,ee,Y,K,G,ne,le,ue,Q){var he=ge(ue-J,Q-ee,-G),Se=he[0],je=he[1],Ae=xe(0,0,Y,K,Se,je),Ce=function(Ee,Le,Ke,et){return(Math.atan2(et*Ee,Ke*Le)+2*Math.PI)%(2*Math.PI)}(Y,K,Ae.x,Ae.y);Ce<ne?Ae=Ie(Y,K,ne):Ce>le&&(Ae=Ie(Y,K,le));var Re=ge(Ae.x,Ae.y,G);return{x:Re[0]+J,y:Re[1]+ee}},pointDistance:function(J,ee,Y,K,G,ne,le,ue,Q){var he=this.nearestPoint(J,ee,Y,K,ue,Q);return _(he.x,he.y,ue,Q)},pointAt:function(J,ee,Y,K,G,ne,le,ue){var Q=(le-ne)*ue+ne;return{x:ye(J,0,Y,K,G,Q),y:W(0,ee,Y,K,G,Q)}},tangentAngle:function(J,ee,Y,K,G,ne,le,ue){var Q=(le-ne)*ue+ne,he=function(je,Ae,Ce,Re,Ee,Le,Ke,et){return-1*Ce*Math.cos(Ee)*Math.sin(et)-Re*Math.sin(Ee)*Math.cos(et)}(0,0,Y,K,G,0,0,Q),Se=function(je,Ae,Ce,Re,Ee,Le,Ke,et){return-1*Ce*Math.sin(Ee)*Math.sin(et)+Re*Math.cos(Ee)*Math.cos(et)}(0,0,Y,K,G,0,0,Q);return g(Math.atan2(Se,he))}};function H(J){for(var ee=0,Y=[],K=0;K<J.length-1;K++){var G=J[K],ne=J[K+1],le=_(G[0],G[1],ne[0],ne[1]),ue={from:G,to:ne,length:le};Y.push(ue),ee+=le}return{segments:Y,totalLength:ee}}function V(J){if(J.length<2)return 0;for(var ee=0,Y=0;Y<J.length-1;Y++){var K=J[Y],G=J[Y+1];ee+=_(K[0],K[1],G[0],G[1])}return ee}function ie(J,ee){if(ee>1||ee<0||J.length<2)return null;var Y=H(J),K=Y.segments,G=Y.totalLength;if(G===0)return{x:J[0][0],y:J[0][1]};for(var ne=0,le=null,ue=0;ue<K.length;ue++){var Q=K[ue],he=Q.from,Se=Q.to,je=Q.length/G;if(ee>=ne&&ee<=ne+je){var Ae=(ee-ne)/je;le=y.pointAt(he[0],he[1],Se[0],Se[1],Ae);break}ne+=je}return le}function we(J,ee){if(ee>1||ee<0||J.length<2)return 0;for(var Y=H(J),K=Y.segments,G=Y.totalLength,ne=0,le=0,ue=0;ue<K.length;ue++){var Q=K[ue],he=Q.from,Se=Q.to,je=Q.length/G;if(ee>=ne&&ee<=ne+je){le=Math.atan2(Se[1]-he[1],Se[0]-he[0]);break}ne+=je}return le}function ke(J,ee,Y){for(var K=1/0,G=0;G<J.length-1;G++){var ne=J[G],le=J[G+1],ue=y.pointDistance(ne[0],ne[1],le[0],le[1],ee,Y);ue<K&&(K=ue)}return K}var oe={box:function(J){for(var ee=[],Y=[],K=0;K<J.length;K++){var G=J[K];ee.push(G[0]),Y.push(G[1])}return O(ee,Y)},length:function(J){return V(J)},pointAt:function(J,ee){return ie(J,ee)},pointDistance:function(J,ee,Y){return ke(J,ee,Y)},tangentAngle:function(J,ee){return we(J,ee)}}},function(D,m,o){"use strict";var f=o(51);o.d(m,"PathUtil",function(){return f}),o(164),o(165);var c=o(115);o.d(m,"Event",function(){return c.a}),o(116);var M=o(264);o.d(m,"AbstractCanvas",function(){return M.a});var _=o(167);o.d(m,"AbstractGroup",function(){return _.a});var x=o(168);o.d(m,"AbstractShape",function(){return x.a});var O=o(265);o.d(m,"getBBoxMethod",function(){return O.a});var S=o(67);o.d(m,"getTextHeight",function(){return S.b}),o.d(m,"assembleFont",function(){return S.a});var g=o(19);o.d(m,"isAllowCapture",function(){return g.b});var d=o(38);o.d(m,"multiplyVec2",function(){return d.c}),o.d(m,"invert",function(){return d.a});var y=o(117);o.d(m,"getOffScreenContext",function(){return y.a})},function(D,m){D.exports=function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){var f=o(511);D.exports=function(c,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(M&&M.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),M&&f(c,M)},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){var f=o(41).default,c=o(22);D.exports=function(M,_){return!_||f(_)!=="object"&&typeof _!="function"?c(M):_},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";o.d(m,"a",function(){return y}),o.d(m,"b",function(){return E});var f=o(9),c=o.n(f),M=o(14),_=o.n(M),x=o(7),O=o.n(x),S=o(6),g=o.n(S),d=o(118),y=function b(p){g()(this,b)},E=function(){function b(A){g()(this,b),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=A}var p;return O()(b,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(A){return this.lookup[A]>-1}},{key:"create",value:function(A,C){this.lookup[A]=this.components.length;var N=new this.clazz(C||{});return this.components.push(N),this.entities.push(A),N}},{key:"remove",value:function(A){var C=this.lookup[A];C>-1&&C<this.components.length-1&&(this.components[C]=this.components[this.components.length-1],this.entities[C]=this.entities[this.entities.length-1],this.lookup[this.entities[C]]=C),this.components.pop(),this.entities.pop(),delete this.lookup[A]}},{key:"removeKeepSorted",value:function(A){var C=this.lookup[A];if(C>-1){var N=this.entities[C];if(C<this.components.length-1){for(var P=C+1;P<this.components.length;++P)this.components[P-1]=this.components[P];for(var L=C+1;L<this.entities.length;++L)this.entities[L-1]=this.entities[L],this.lookup[this.entities[L-1]]=L-1}this.components.pop(),this.entities.pop(),delete this.lookup[N]}}},{key:"moveItem",value:function(A,C){if(A!==C){for(var N=this.components[A],P=this.entities[A],L=A<C?1:-1,z=A;z!==C;z+=L){var X=z+L;this.components[z]=this.components[X],this.entities[z]=this.entities[X],this.lookup[this.entities[z]]=z}this.components[C]=N,this.entities[C]=P,this.lookup[P]=C}}},{key:"getEntity",value:function(A){return this.entities[A]}},{key:"getComponent",value:function(A){return this.components[A]}},{key:"getComponentByEntity",value:function(A){var C=this.lookup[A];return C>-1?this.components[C]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(A){for(var C=0,N=Object.keys(this.lookup);C<N.length;C++){var P=N[C],L=Number(P);if(this.lookup[L]===A)return L}return d.a}},{key:"find",value:function(A){for(var C=0;C<this.getCount();C++){var N=this.getComponent(C);if(A(N,C))return N}return null}},{key:"findIndex",value:function(A){for(var C=0;C<this.getCount();C++)if(A(this.getComponent(C),C))return C;return-1}},{key:"forEach",value:function(A){for(var C=0,N=Object.keys(this.lookup);C<N.length;C++){var P=N[C],L=Number(P),z=this.lookup[L];A(L,this.getComponent(z))}}},{key:"forEachAsync",value:(p=_()(c.a.mark(function A(C){var N,P,L,z,X;return c.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:N=0,P=Object.keys(this.lookup);case 1:if(!(N<P.length)){re.next=10;break}return L=P[N],z=Number(L),X=this.lookup[z],re.next=7,C(z,this.getComponent(X));case 7:N++,re.next=1;break;case 10:case"end":return re.stop()}},A,this)})),function(A){return p.apply(this,arguments)})},{key:"map",value:function(A){for(var C=[],N=0,P=Object.keys(this.lookup);N<P.length;N++){var L=P[N],z=Number(L),X=this.lookup[z];C.push(A(z,this.getComponent(X)))}return C}}]),b}()},function(D,m,o){"use strict";o.d(m,"b",function(){return M}),o.d(m,"a",function(){return _}),o.d(m,"d",function(){return x}),o.d(m,"c",function(){return O});var f=o(0),c=o(16);function M(S){return document.createElementNS("http://www.w3.org/2000/svg",S)}function _(S){var g=c.a[S.type],d=S.getParent();if(!g)throw new Error("the type "+S.type+" is not supported by svg");var y=M(g);if(S.get("id")&&(y.id=S.get("id")),S.set("el",y),S.set("attrs",{}),d){var E=d.get("el");E||(E=d.createDom(),d.set("el",E)),E.appendChild(y)}return y}function x(S,g){var d=S.get("el"),y=Object(f.toArray)(d.children).sort(g),E=document.createDocumentFragment();y.forEach(function(b){E.appendChild(b)}),d.appendChild(E)}function O(S,g){var d=S.parentNode,y=Array.from(d.childNodes).filter(function(A){return A.nodeType===1&&A.nodeName.toLowerCase()!=="defs"}),E=y[g],b=y.indexOf(S);if(E){if(b>g)d.insertBefore(S,E);else if(b<g){var p=y[g+1];p?d.insertBefore(S,p):d.appendChild(S)}}else d.appendChild(S)}},function(D,m,o){var f=o(513),c=o(514),M=o(229),_=o(515);D.exports=function(x){return f(x)||c(x)||M(x)||_()},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){var f;try{f={cloneDeep:o(419),constant:o(153),defaults:o(420),each:o(193),filter:o(196),find:o(421),flatten:o(223),forEach:o(194),forIn:o(428),has:o(207),isUndefined:o(208),last:o(429),map:o(209),mapValues:o(430),max:o(431),merge:o(433),min:o(439),minBy:o(440),now:o(441),pick:o(442),range:o(447),reduce:o(211),sortBy:o(450),uniqueId:o(455),values:o(216),zipObject:o(456)}}catch(c){}f||(f=window._),D.exports=f},function(D,m){D.exports=function(o,f){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";o.d(m,"a",function(){return S}),o.d(m,"d",function(){return g}),o.d(m,"b",function(){return d}),o.d(m,"c",function(){return y}),o.d(m,"e",function(){return p}),o.d(m,"h",function(){return A}),o.d(m,"f",function(){return C}),o.d(m,"g",function(){return N});var f=o(0),c=o(139),M=o(92),_=o(15),x=o(33),O={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function S(P,L){var z=L.attr();for(var X in z){var re=z[X],se=O[X]?O[X]:X;se==="matrix"&&re?P.transform(re[0],re[1],re[3],re[4],re[6],re[7]):se==="lineDash"&&P.setLineDash?Object(f.isArray)(re)&&P.setLineDash(re):(se==="strokeStyle"||se==="fillStyle"?re=Object(c.b)(P,L,re):se==="globalAlpha"&&(re*=P.globalAlpha),P[se]=re)}}function g(P,L,z){for(var X=0;X<L.length;X++){var re=L[X];re.cfg.visible?re.draw(P,z):re.skipDraw()}}function d(P,L,z){var X=P.get("refreshElements");Object(f.each)(X,function(re){if(re!==P)for(var se=re.cfg.parent;se&&se!==P&&!se.cfg.refresh;)se.cfg.refresh=!0,se=se.cfg.parent}),X[0]===P?E(L,z):function re(se,ce){for(var xe=0;xe<se.length;xe++){var ye=se[xe];if(ye.cfg.visible)if(ye.cfg.hasChanged)ye.cfg.refresh=!0,ye.isGroup()&&E(ye.cfg.children,ce);else if(ye.cfg.refresh)ye.isGroup()&&re(ye.cfg.children,ce);else{var W=b(ye,ce);ye.cfg.refresh=W,W&&ye.isGroup()&&re(ye.cfg.children,ce)}}}(L,z)}function y(P){for(var L=0;L<P.length;L++){var z=P[L];z.cfg.hasChanged=!1,z.isGroup()&&!z.destroyed&&y(z.cfg.children)}}function E(P,L){for(var z=0;z<P.length;z++){var X=P[z];X.cfg.refresh=!0,X.isGroup()&&E(X.get("children"),L)}}function b(P,L){var z=P.cfg.cacheCanvasBBox;return P.cfg.isInView&&z&&Object(_.f)(z,L)}function p(P,L,z,X){var re=z.path,se=z.startArrow,ce=z.endArrow;if(re){var xe=[0,0],ye=[0,0],W={dx:0,dy:0};L.beginPath();for(var Ie=0;Ie<re.length;Ie++){var ge=re[Ie],te=ge[0];if(Ie===0&&se&&se.d){var H=P.getStartTangent();W=x.c(H[0][0],H[0][1],H[1][0],H[1][1],se.d)}else Ie===re.length-2&&re[Ie+1][0]==="Z"&&ce&&ce.d?re[Ie+1][0]==="Z"&&(H=P.getEndTangent(),W=x.c(H[0][0],H[0][1],H[1][0],H[1][1],ce.d)):Ie===re.length-1&&ce&&ce.d&&re[0]!=="Z"&&(H=P.getEndTangent(),W=x.c(H[0][0],H[0][1],H[1][0],H[1][1],ce.d));var V=W.dx,ie=W.dy;switch(te){case"M":L.moveTo(ge[1]-V,ge[2]-ie),ye=[ge[1],ge[2]];break;case"L":L.lineTo(ge[1]-V,ge[2]-ie);break;case"Q":L.quadraticCurveTo(ge[1],ge[2],ge[3]-V,ge[4]-ie);break;case"C":L.bezierCurveTo(ge[1],ge[2],ge[3],ge[4],ge[5]-V,ge[6]-ie);break;case"A":var we=void 0;X?(we=X[Ie])||(we=Object(M.a)(xe,ge),X[Ie]=we):we=Object(M.a)(xe,ge);var ke=we.cx,oe=we.cy,J=we.rx,ee=we.ry,Y=we.startAngle,K=we.endAngle,G=we.xRotation,ne=we.sweepFlag;if(L.ellipse)L.ellipse(ke,oe,J,ee,G,Y,K,1-ne);else{var le=J>ee?J:ee,ue=J>ee?1:J/ee,Q=J>ee?ee/J:1;L.translate(ke,oe),L.rotate(G),L.scale(ue,Q),L.arc(0,0,le,Y,K,1-ne),L.scale(1/ue,1/Q),L.rotate(-G),L.translate(-ke,-oe)}break;case"Z":L.closePath()}if(te==="Z")xe=ye;else{var he=ge.length;xe=[ge[he-2],ge[he-1]]}}}}function A(P,L){var z=P.get("canvas");z&&(L==="remove"&&(P._cacheCanvasBBox=P.get("cacheCanvasBBox")),P.get("hasChanged")||(P.set("hasChanged",!0),P.cfg.parent&&P.cfg.parent.get("hasChanged")||(z.refreshElement(P,L,z),z.get("autoDraw")&&z.draw())))}function C(P){if(!P.length)return null;var L=[],z=[],X=[],re=[];return Object(f.each)(P,function(se){var ce=function(xe){var ye;if(xe.destroyed)ye=xe._cacheCanvasBBox;else{var W=xe.get("cacheCanvasBBox"),Ie=W&&!(!W.width||!W.height),ge=xe.getCanvasBBox(),te=ge&&!(!ge.width||!ge.height);Ie&&te?ye=Object(_.l)(W,ge):Ie?ye=W:te&&(ye=ge)}return ye}(se);ce&&(L.push(ce.minX),z.push(ce.minY),X.push(ce.maxX),re.push(ce.maxY))}),{minX:Object(f.min)(L),minY:Object(f.min)(z),maxX:Object(f.max)(X),maxY:Object(f.max)(re)}}function N(P,L){return P&&L&&Object(_.f)(P,L)?{minX:Math.max(P.minX,L.minX),minY:Math.max(P.minY,L.minY),maxX:Math.min(P.maxX,L.maxX),maxY:Math.min(P.maxY,L.maxY)}:null}},function(D,m){var o=Array.isArray;D.exports=o},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.NON_CUSTOM_TAG_KEYS=m.POST_CONSTRUCT=m.DESIGN_PARAM_TYPES=m.PARAM_TYPES=m.TAGGED_PROP=m.TAGGED=m.MULTI_INJECT_TAG=m.INJECT_TAG=m.OPTIONAL_TAG=m.UNMANAGED_TAG=m.NAME_TAG=m.NAMED_TAG=void 0,m.NAMED_TAG="named",m.NAME_TAG="name",m.UNMANAGED_TAG="unmanaged",m.OPTIONAL_TAG="optional",m.INJECT_TAG="inject",m.MULTI_INJECT_TAG="multi_inject",m.TAGGED="inversify:tagged",m.TAGGED_PROP="inversify:tagged_props",m.PARAM_TYPES="inversify:paramtypes",m.DESIGN_PARAM_TYPES="design:paramtypes",m.POST_CONSTRUCT="post_construct",m.NON_CUSTOM_TAG_KEYS=[m.INJECT_TAG,m.MULTI_INJECT_TAG,m.NAME_TAG,m.UNMANAGED_TAG,m.NAMED_TAG,m.OPTIONAL_TAG]},function(D,m,o){"use strict";o.d(m,"c",function(){return y}),o.d(m,"b",function(){return E}),o.d(m,"a",function(){return b});var f=o(1),c=o(55);function M(p){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(p)}var _=Math.sin,x=Math.cos,O=Math.atan2,S=Math.PI;function g(p,A,C,N,P,L,z){var X=A.stroke,re=A.lineWidth,se=O(N-L,C-P),ce=new c.Path({type:"path",canvas:p.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*x(S/6)+","+10*_(S/6)+" L0,0 L"+10*x(S/6)+",-"+10*_(S/6),stroke:X,lineWidth:re}});ce.translate(P,L),ce.rotateAtPoint(P,L,se),p.set(z?"startArrowShape":"endArrowShape",ce)}function d(p,A,C,N,P,L,z){var X=A.startArrow,re=A.endArrow,se=A.stroke,ce=A.lineWidth,xe=z?X:re,ye=xe.d,W=xe.fill,Ie=xe.stroke,ge=xe.lineWidth,te=Object(f.__rest)(xe,["d","fill","stroke","lineWidth"]),H=O(N-L,C-P);ye&&(P-=x(H)*ye,L-=_(H)*ye);var V=new c.Path({type:"path",canvas:p.get("canvas"),isArrowShape:!0,attrs:Object(f.__assign)(Object(f.__assign)({},te),{stroke:Ie||se,lineWidth:ge||ce,fill:W})});V.translate(P,L),V.rotateAtPoint(P,L,H),p.set(z?"startArrowShape":"endArrowShape",V)}function y(p,A,C,N,P){var L=O(N-A,C-p);return{dx:x(L)*P,dy:_(L)*P}}function E(p,A,C,N,P,L){M(A.startArrow)==="object"?d(p,A,C,N,P,L,!0):A.startArrow?g(p,A,C,N,P,L,!0):p.set("startArrowShape",null)}function b(p,A,C,N,P,L){M(A.endArrow)==="object"?d(p,A,C,N,P,L,!1):A.endArrow?g(p,A,C,N,P,L,!1):p.set("startArrowShape",null)}},function(D,m,o){"use strict";o.d(m,"b",function(){return c}),o.d(m,"c",function(){return M}),o.d(m,"a",function(){return _});var f=o(26);function c(x,O){var S=x.cfg.el,g=x.attr(),d={dx:g.shadowOffsetX,dy:g.shadowOffsetY,blur:g.shadowBlur,color:g.shadowColor};if(d.dx||d.dy||d.blur||d.color){var y=O.find("filter",d);y||(y=O.addShadow(d)),S.setAttribute("filter","url(#"+y+")")}else S.removeAttribute("filter")}function M(x){var O=x.attr().matrix;if(O){for(var S=x.cfg.el,g=[],d=0;d<9;d+=3)g.push(O[d]+","+O[d+1]);(g=g.join(",")).indexOf("NaN")===-1?S.setAttribute("transform","matrix("+g+")"):console.warn("invalid matrix:",O)}}function _(x,O){var S=x.getClip(),g=x.get("el");if(S){if(S&&!g.hasAttribute("clip-path")){Object(f.a)(S),S.createPath(O);var d=O.addClip(S);g.setAttribute("clip-path","url(#"+d+")")}}else g.removeAttribute("clip-path")}},function(D,m,o){"use strict";var f;o.d(m,"a",function(){return f}),function(c){c[c.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",c[c.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",c[c.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",c[c.POINTS=0]="POINTS",c[c.LINES=1]="LINES",c[c.LINE_LOOP=2]="LINE_LOOP",c[c.LINE_STRIP=3]="LINE_STRIP",c[c.TRIANGLES=4]="TRIANGLES",c[c.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",c[c.TRIANGLE_FAN=6]="TRIANGLE_FAN",c[c.ZERO=0]="ZERO",c[c.ONE=1]="ONE",c[c.SRC_COLOR=768]="SRC_COLOR",c[c.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",c[c.SRC_ALPHA=770]="SRC_ALPHA",c[c.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",c[c.DST_ALPHA=772]="DST_ALPHA",c[c.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",c[c.DST_COLOR=774]="DST_COLOR",c[c.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",c[c.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",c[c.FUNC_ADD=32774]="FUNC_ADD",c[c.BLEND_EQUATION=32777]="BLEND_EQUATION",c[c.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",c[c.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",c[c.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",c[c.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",c[c.MAX_EXT=32776]="MAX_EXT",c[c.MIN_EXT=32775]="MIN_EXT",c[c.BLEND_DST_RGB=32968]="BLEND_DST_RGB",c[c.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",c[c.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",c[c.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",c[c.CONSTANT_COLOR=32769]="CONSTANT_COLOR",c[c.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",c[c.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",c[c.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",c[c.BLEND_COLOR=32773]="BLEND_COLOR",c[c.ARRAY_BUFFER=34962]="ARRAY_BUFFER",c[c.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",c[c.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",c[c.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",c[c.STREAM_DRAW=35040]="STREAM_DRAW",c[c.STATIC_DRAW=35044]="STATIC_DRAW",c[c.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",c[c.BUFFER_SIZE=34660]="BUFFER_SIZE",c[c.BUFFER_USAGE=34661]="BUFFER_USAGE",c[c.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",c[c.FRONT=1028]="FRONT",c[c.BACK=1029]="BACK",c[c.FRONT_AND_BACK=1032]="FRONT_AND_BACK",c[c.CULL_FACE=2884]="CULL_FACE",c[c.BLEND=3042]="BLEND",c[c.DITHER=3024]="DITHER",c[c.STENCIL_TEST=2960]="STENCIL_TEST",c[c.DEPTH_TEST=2929]="DEPTH_TEST",c[c.SCISSOR_TEST=3089]="SCISSOR_TEST",c[c.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",c[c.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",c[c.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",c[c.NO_ERROR=0]="NO_ERROR",c[c.INVALID_ENUM=1280]="INVALID_ENUM",c[c.INVALID_VALUE=1281]="INVALID_VALUE",c[c.INVALID_OPERATION=1282]="INVALID_OPERATION",c[c.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",c[c.CW=2304]="CW",c[c.CCW=2305]="CCW",c[c.LINE_WIDTH=2849]="LINE_WIDTH",c[c.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",c[c.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",c[c.CULL_FACE_MODE=2885]="CULL_FACE_MODE",c[c.FRONT_FACE=2886]="FRONT_FACE",c[c.DEPTH_RANGE=2928]="DEPTH_RANGE",c[c.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",c[c.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",c[c.DEPTH_FUNC=2932]="DEPTH_FUNC",c[c.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",c[c.STENCIL_FUNC=2962]="STENCIL_FUNC",c[c.STENCIL_FAIL=2964]="STENCIL_FAIL",c[c.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",c[c.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",c[c.STENCIL_REF=2967]="STENCIL_REF",c[c.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",c[c.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",c[c.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",c[c.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",c[c.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",c[c.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",c[c.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",c[c.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",c[c.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",c[c.VIEWPORT=2978]="VIEWPORT",c[c.SCISSOR_BOX=3088]="SCISSOR_BOX",c[c.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",c[c.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",c[c.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",c[c.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",c[c.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",c[c.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",c[c.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",c[c.RED_BITS=3410]="RED_BITS",c[c.GREEN_BITS=3411]="GREEN_BITS",c[c.BLUE_BITS=3412]="BLUE_BITS",c[c.ALPHA_BITS=3413]="ALPHA_BITS",c[c.DEPTH_BITS=3414]="DEPTH_BITS",c[c.STENCIL_BITS=3415]="STENCIL_BITS",c[c.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",c[c.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",c[c.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",c[c.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",c[c.SAMPLES=32937]="SAMPLES",c[c.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",c[c.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",c[c.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",c[c.DONT_CARE=4352]="DONT_CARE",c[c.FASTEST=4353]="FASTEST",c[c.NICEST=4354]="NICEST",c[c.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",c[c.BYTE=5120]="BYTE",c[c.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",c[c.SHORT=5122]="SHORT",c[c.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",c[c.INT=5124]="INT",c[c.UNSIGNED_INT=5125]="UNSIGNED_INT",c[c.FLOAT=5126]="FLOAT",c[c.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",c[c.ALPHA=6406]="ALPHA",c[c.RGB=6407]="RGB",c[c.RGBA=6408]="RGBA",c[c.LUMINANCE=6409]="LUMINANCE",c[c.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",c[c.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",c[c.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",c[c.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",c[c.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",c[c.VERTEX_SHADER=35633]="VERTEX_SHADER",c[c.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",c[c.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",c[c.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",c[c.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",c[c.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",c[c.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",c[c.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",c[c.SHADER_TYPE=35663]="SHADER_TYPE",c[c.DELETE_STATUS=35712]="DELETE_STATUS",c[c.LINK_STATUS=35714]="LINK_STATUS",c[c.VALIDATE_STATUS=35715]="VALIDATE_STATUS",c[c.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",c[c.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",c[c.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",c[c.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",c[c.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",c[c.NEVER=512]="NEVER",c[c.LESS=513]="LESS",c[c.EQUAL=514]="EQUAL",c[c.LEQUAL=515]="LEQUAL",c[c.GREATER=516]="GREATER",c[c.NOTEQUAL=517]="NOTEQUAL",c[c.GEQUAL=518]="GEQUAL",c[c.ALWAYS=519]="ALWAYS",c[c.KEEP=7680]="KEEP",c[c.REPLACE=7681]="REPLACE",c[c.INCR=7682]="INCR",c[c.DECR=7683]="DECR",c[c.INVERT=5386]="INVERT",c[c.INCR_WRAP=34055]="INCR_WRAP",c[c.DECR_WRAP=34056]="DECR_WRAP",c[c.VENDOR=7936]="VENDOR",c[c.RENDERER=7937]="RENDERER",c[c.VERSION=7938]="VERSION",c[c.NEAREST=9728]="NEAREST",c[c.LINEAR=9729]="LINEAR",c[c.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",c[c.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",c[c.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",c[c.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",c[c.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",c[c.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",c[c.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",c[c.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",c[c.TEXTURE_2D=3553]="TEXTURE_2D",c[c.TEXTURE=5890]="TEXTURE",c[c.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",c[c.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",c[c.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",c[c.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",c[c.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",c[c.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",c[c.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",c[c.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",c[c.TEXTURE0=33984]="TEXTURE0",c[c.TEXTURE1=33985]="TEXTURE1",c[c.TEXTURE2=33986]="TEXTURE2",c[c.TEXTURE3=33987]="TEXTURE3",c[c.TEXTURE4=33988]="TEXTURE4",c[c.TEXTURE5=33989]="TEXTURE5",c[c.TEXTURE6=33990]="TEXTURE6",c[c.TEXTURE7=33991]="TEXTURE7",c[c.TEXTURE8=33992]="TEXTURE8",c[c.TEXTURE9=33993]="TEXTURE9",c[c.TEXTURE10=33994]="TEXTURE10",c[c.TEXTURE11=33995]="TEXTURE11",c[c.TEXTURE12=33996]="TEXTURE12",c[c.TEXTURE13=33997]="TEXTURE13",c[c.TEXTURE14=33998]="TEXTURE14",c[c.TEXTURE15=33999]="TEXTURE15",c[c.TEXTURE16=34e3]="TEXTURE16",c[c.TEXTURE17=34001]="TEXTURE17",c[c.TEXTURE18=34002]="TEXTURE18",c[c.TEXTURE19=34003]="TEXTURE19",c[c.TEXTURE20=34004]="TEXTURE20",c[c.TEXTURE21=34005]="TEXTURE21",c[c.TEXTURE22=34006]="TEXTURE22",c[c.TEXTURE23=34007]="TEXTURE23",c[c.TEXTURE24=34008]="TEXTURE24",c[c.TEXTURE25=34009]="TEXTURE25",c[c.TEXTURE26=34010]="TEXTURE26",c[c.TEXTURE27=34011]="TEXTURE27",c[c.TEXTURE28=34012]="TEXTURE28",c[c.TEXTURE29=34013]="TEXTURE29",c[c.TEXTURE30=34014]="TEXTURE30",c[c.TEXTURE31=34015]="TEXTURE31",c[c.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",c[c.REPEAT=10497]="REPEAT",c[c.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",c[c.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",c[c.FLOAT_VEC2=35664]="FLOAT_VEC2",c[c.FLOAT_VEC3=35665]="FLOAT_VEC3",c[c.FLOAT_VEC4=35666]="FLOAT_VEC4",c[c.INT_VEC2=35667]="INT_VEC2",c[c.INT_VEC3=35668]="INT_VEC3",c[c.INT_VEC4=35669]="INT_VEC4",c[c.BOOL=35670]="BOOL",c[c.BOOL_VEC2=35671]="BOOL_VEC2",c[c.BOOL_VEC3=35672]="BOOL_VEC3",c[c.BOOL_VEC4=35673]="BOOL_VEC4",c[c.FLOAT_MAT2=35674]="FLOAT_MAT2",c[c.FLOAT_MAT3=35675]="FLOAT_MAT3",c[c.FLOAT_MAT4=35676]="FLOAT_MAT4",c[c.SAMPLER_2D=35678]="SAMPLER_2D",c[c.SAMPLER_CUBE=35680]="SAMPLER_CUBE",c[c.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",c[c.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",c[c.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",c[c.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",c[c.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",c[c.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",c[c.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",c[c.COMPILE_STATUS=35713]="COMPILE_STATUS",c[c.LOW_FLOAT=36336]="LOW_FLOAT",c[c.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",c[c.HIGH_FLOAT=36338]="HIGH_FLOAT",c[c.LOW_INT=36339]="LOW_INT",c[c.MEDIUM_INT=36340]="MEDIUM_INT",c[c.HIGH_INT=36341]="HIGH_INT",c[c.FRAMEBUFFER=36160]="FRAMEBUFFER",c[c.RENDERBUFFER=36161]="RENDERBUFFER",c[c.RGBA4=32854]="RGBA4",c[c.RGB5_A1=32855]="RGB5_A1",c[c.RGB565=36194]="RGB565",c[c.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",c[c.STENCIL_INDEX=6401]="STENCIL_INDEX",c[c.STENCIL_INDEX8=36168]="STENCIL_INDEX8",c[c.DEPTH_STENCIL=34041]="DEPTH_STENCIL",c[c.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",c[c.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",c[c.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",c[c.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",c[c.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",c[c.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",c[c.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",c[c.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",c[c.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",c[c.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",c[c.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",c[c.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",c[c.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",c[c.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",c[c.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",c[c.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",c[c.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",c[c.NONE=0]="NONE",c[c.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",c[c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",c[c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",c[c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",c[c.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",c[c.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",c[c.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",c[c.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",c[c.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",c[c.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",c[c.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",c[c.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",c[c.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",c[c.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",c[c.COPY_SRC=1]="COPY_SRC",c[c.COPY_DST=2]="COPY_DST",c[c.SAMPLED=4]="SAMPLED",c[c.STORAGE=8]="STORAGE",c[c.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"}(f||(f={}))},function(D,m,o){"use strict";var f=o(28),c=o(46).Graph;function M(x,O,S,g){var d;do d=f.uniqueId(g);while(x.hasNode(d));return S.dummy=O,x.setNode(d,S),d}function _(x){return f.max(f.map(x.nodes(),function(O){var S=x.node(O).rank;if(!f.isUndefined(S))return S}))}D.exports={addDummyNode:M,simplify:function(x){var O=new c().setGraph(x.graph());return f.forEach(x.nodes(),function(S){O.setNode(S,x.node(S))}),f.forEach(x.edges(),function(S){var g=O.edge(S.v,S.w)||{weight:0,minlen:1},d=x.edge(S);O.setEdge(S.v,S.w,{weight:g.weight+d.weight,minlen:Math.max(g.minlen,d.minlen)})}),O},asNonCompoundGraph:function(x){var O=new c({multigraph:x.isMultigraph()}).setGraph(x.graph());return f.forEach(x.nodes(),function(S){x.children(S).length||O.setNode(S,x.node(S))}),f.forEach(x.edges(),function(S){O.setEdge(S,x.edge(S))}),O},successorWeights:function(x){var O=f.map(x.nodes(),function(S){var g={};return f.forEach(x.outEdges(S),function(d){g[d.w]=(g[d.w]||0)+x.edge(d).weight}),g});return f.zipObject(x.nodes(),O)},predecessorWeights:function(x){var O=f.map(x.nodes(),function(S){var g={};return f.forEach(x.inEdges(S),function(d){g[d.v]=(g[d.v]||0)+x.edge(d).weight}),g});return f.zipObject(x.nodes(),O)},intersectRect:function(x,O){var S,g,d=x.x,y=x.y,E=O.x-d,b=O.y-y,p=x.width/2,A=x.height/2;if(!E&&!b)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(b)*p>Math.abs(E)*A?(b<0&&(A=-A),S=A*E/b,g=A):(E<0&&(p=-p),S=p,g=p*b/E),{x:d+S,y:y+g}},buildLayerMatrix:function(x){var O=f.map(f.range(_(x)+1),function(){return[]});return f.forEach(x.nodes(),function(S){var g=x.node(S),d=g.rank;f.isUndefined(d)||(O[d][g.order]=S)}),O},normalizeRanks:function(x){var O=f.min(f.map(x.nodes(),function(S){return x.node(S).rank}));f.forEach(x.nodes(),function(S){var g=x.node(S);f.has(g,"rank")&&(g.rank-=O)})},removeEmptyRanks:function(x){var O=f.min(f.map(x.nodes(),function(y){return x.node(y).rank})),S=[];f.forEach(x.nodes(),function(y){var E=x.node(y).rank-O;S[E]||(S[E]=[]),S[E].push(y)});var g=0,d=x.graph().nodeRankFactor;f.forEach(S,function(y,E){f.isUndefined(y)&&E%d!=0?--g:g&&f.forEach(y,function(b){x.node(b).rank+=g})})},addBorderNode:function(x,O,S,g){var d={width:0,height:0};return arguments.length>=4&&(d.rank=S,d.order=g),M(x,"border",d,O)},maxRank:_,partition:function(x,O){var S={lhs:[],rhs:[]};return f.forEach(x,function(g){O(g)?S.lhs.push(g):S.rhs.push(g)}),S},time:function(x,O){var S=f.now();try{return O()}finally{console.log(x+" time: "+(f.now()-S)+"ms")}},notime:function(x,O){return O()}}},function(D,m,o){"use strict";o.d(m,"a",function(){return x}),o.d(m,"b",function(){return d}),o.d(m,"c",function(){return b}),o.d(m,"d",function(){return z});var f=o(0),c=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,M=/[^\s\,]+/gi,_=function(X){var re=X||[];return Object(f.isArray)(re)?re:Object(f.isString)(re)?(re=re.match(c),Object(f.each)(re,function(se,ce){if((se=se.match(M))[0].length>1){var xe=se[0].charAt(0);se.splice(1,0,se[0].substr(1)),se[0]=xe}Object(f.each)(se,function(ye,W){isNaN(ye)||(se[W]=+ye)}),re[ce]=se}),re):void 0};function x(X,re){for(var se=[],ce=0,xe=X.length;xe-2*!re>ce;ce+=2){var ye=[{x:+X[ce-2],y:+X[ce-1]},{x:+X[ce],y:+X[ce+1]},{x:+X[ce+2],y:+X[ce+3]},{x:+X[ce+4],y:+X[ce+5]}];re?ce?xe-4===ce?ye[3]={x:+X[0],y:+X[1]}:xe-2===ce&&(ye[2]={x:+X[0],y:+X[1]},ye[3]={x:+X[2],y:+X[3]}):ye[0]={x:+X[xe-2],y:+X[xe-1]}:xe-4===ce?ye[3]=ye[2]:ce||(ye[0]={x:+X[ce],y:+X[ce+1]}),se.push(["C",(-ye[0].x+6*ye[1].x+ye[2].x)/6,(-ye[0].y+6*ye[1].y+ye[2].y)/6,(ye[1].x+6*ye[2].x-ye[3].x)/6,(ye[1].y+6*ye[2].y-ye[3].y)/6,ye[2].x,ye[2].y])}return se}var O=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,S=new RegExp("([a-z])["+O+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+O+"]*,?["+O+"]*)+)","ig"),g=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+O+"]*,?["+O+"]*","ig");function d(X){if(!X)return null;if(Object(f.isArray)(X))return X;var re={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},se=[];return String(X).replace(S,function(ce,xe,ye){var W=[],Ie=xe.toLowerCase();if(ye.replace(g,function(ge,te){te&&W.push(+te)}),Ie==="m"&&W.length>2&&(se.push([xe].concat(W.splice(0,2))),Ie="l",xe=xe==="m"?"l":"L"),Ie==="o"&&W.length===1&&se.push([xe,W[0]]),Ie==="r")se.push([xe].concat(W));else for(;W.length>=re[Ie]&&(se.push([xe].concat(W.splice(0,re[Ie]))),re[Ie]););return""}),se}var y=/[a-z]/;function E(X,re){return[re[0]+(re[0]-X[0]),re[1]+(re[1]-X[1])]}function b(X){var re=d(X);if(!re||!re.length)return[["M",0,0]];for(var se=!1,ce=0;ce<re.length;ce++){var xe=re[ce][0];if(y.test(xe)||["V","H","T","S"].indexOf(xe)>=0){se=!0;break}}if(!se)return re;var ye=[],W=0,Ie=0,ge=0,te=0,H=0,V=re[0];V[0]!=="M"&&V[0]!=="m"||(ge=W=+V[1],te=Ie=+V[2],H++,ye[0]=["M",W,Ie]),ce=H;for(var ie=re.length;ce<ie;ce++){var we=re[ce],ke=ye[ce-1],oe=[],J=(xe=we[0]).toUpperCase();if(xe!==J)switch(oe[0]=J,J){case"A":oe[1]=we[1],oe[2]=we[2],oe[3]=we[3],oe[4]=we[4],oe[5]=we[5],oe[6]=+we[6]+W,oe[7]=+we[7]+Ie;break;case"V":oe[1]=+we[1]+Ie;break;case"H":oe[1]=+we[1]+W;break;case"M":ge=+we[1]+W,te=+we[2]+Ie;break;default:for(var ee=1,Y=we.length;ee<Y;ee++)oe[ee]=+we[ee]+(ee%2?W:Ie)}else oe=re[ce];switch(J){case"Z":W=+ge,Ie=+te;break;case"H":oe=["L",W=oe[1],Ie];break;case"V":oe=["L",W,Ie=oe[1]];break;case"T":W=oe[1],Ie=oe[2];var K=E([ke[1],ke[2]],[ke[3],ke[4]]);oe=["Q",K[0],K[1],W,Ie];break;case"S":W=oe[oe.length-2],Ie=oe[oe.length-1];var G=ke.length,ne=E([ke[G-4],ke[G-3]],[ke[G-2],ke[G-1]]);oe=["C",ne[0],ne[1],oe[1],oe[2],W,Ie];break;case"M":ge=oe[oe.length-2],te=oe[oe.length-1];break;default:W=oe[oe.length-2],Ie=oe[oe.length-1]}ye.push(oe)}return ye}function p(X){return Math.sqrt(X[0]*X[0]+X[1]*X[1])}function A(X,re){return p(X)*p(re)?(X[0]*re[0]+X[1]*re[1])/(p(X)*p(re)):1}function C(X,re){return(X[0]*re[1]<X[1]*re[0]?-1:1)*Math.acos(A(X,re))}function N(X,re){return X[0]===re[0]&&X[1]===re[1]}function P(X,re){var se=re[1],ce=re[2],xe=Object(f.mod)(Object(f.toRadian)(re[3]),2*Math.PI),ye=re[4],W=re[5],Ie=X[0],ge=X[1],te=re[6],H=re[7],V=Math.cos(xe)*(Ie-te)/2+Math.sin(xe)*(ge-H)/2,ie=-1*Math.sin(xe)*(Ie-te)/2+Math.cos(xe)*(ge-H)/2,we=V*V/(se*se)+ie*ie/(ce*ce);we>1&&(se*=Math.sqrt(we),ce*=Math.sqrt(we));var ke=se*se*(ie*ie)+ce*ce*(V*V),oe=ke?Math.sqrt((se*se*(ce*ce)-ke)/ke):1;ye===W&&(oe*=-1),isNaN(oe)&&(oe=0);var J=ce?oe*se*ie/ce:0,ee=se?oe*-ce*V/se:0,Y=(Ie+te)/2+Math.cos(xe)*J-Math.sin(xe)*ee,K=(ge+H)/2+Math.sin(xe)*J+Math.cos(xe)*ee,G=[(V-J)/se,(ie-ee)/ce],ne=[(-1*V-J)/se,(-1*ie-ee)/ce],le=C([1,0],G),ue=C(G,ne);return A(G,ne)<=-1&&(ue=Math.PI),A(G,ne)>=1&&(ue=0),W===0&&ue>0&&(ue-=2*Math.PI),W===1&&ue<0&&(ue+=2*Math.PI),{cx:Y,cy:K,rx:N(X,[te,H])?0:se,ry:N(X,[te,H])?0:ce,startAngle:le,endAngle:le+ue,xRotation:xe,arcFlag:ye,sweepFlag:W}}function L(X,re){return[re[0]+(re[0]-X[0]),re[1]+(re[1]-X[1])]}function z(X){for(var re=[],se=null,ce=null,xe=null,ye=0,W=(X=_(X)).length,Ie=0;Ie<W;Ie++){var ge=X[Ie];ce=X[Ie+1];var te=ge[0],H={command:te,prePoint:se,params:ge,startTangent:null,endTangent:null};switch(te){case"M":xe=[ge[1],ge[2]],ye=Ie;break;case"A":var V=P(se,ge);H.arcParams=V}if(te==="Z")se=xe,ce=X[ye+1];else{var ie=ge.length;se=[ge[ie-2],ge[ie-1]]}ce&&ce[0]==="Z"&&(ce=X[ye],re[ye]&&(re[ye].prePoint=se)),H.currentPoint=se,re[ye]&&N(se,re[ye].currentPoint)&&(re[ye].prePoint=H.prePoint);var we=ce?[ce[ce.length-2],ce[ce.length-1]]:null;H.nextPoint=we;var ke=H.prePoint;if(["L","H","V"].includes(te))H.startTangent=[ke[0]-se[0],ke[1]-se[1]],H.endTangent=[se[0]-ke[0],se[1]-ke[1]];else if(te==="Q"){var oe=[ge[1],ge[2]];H.startTangent=[ke[0]-oe[0],ke[1]-oe[1]],H.endTangent=[se[0]-oe[0],se[1]-oe[1]]}else if(te==="T")oe=L((Y=re[Ie-1]).currentPoint,ke),Y.command==="Q"?(H.command="Q",H.startTangent=[ke[0]-oe[0],ke[1]-oe[1]],H.endTangent=[se[0]-oe[0],se[1]-oe[1]]):(H.command="TL",H.startTangent=[ke[0]-se[0],ke[1]-se[1]],H.endTangent=[se[0]-ke[0],se[1]-ke[1]]);else if(te==="C"){var J=[ge[1],ge[2]],ee=[ge[3],ge[4]];H.startTangent=[ke[0]-J[0],ke[1]-J[1]],H.endTangent=[se[0]-ee[0],se[1]-ee[1]]}else if(te==="S"){var Y;J=L((Y=re[Ie-1]).currentPoint,ke),ee=[ge[1],ge[2]],Y.command==="C"?(H.command="C",H.startTangent=[ke[0]-J[0],ke[1]-J[1]],H.endTangent=[se[0]-ee[0],se[1]-ee[1]]):(H.command="SQ",H.startTangent=[ke[0]-ee[0],ke[1]-ee[1]],H.endTangent=[se[0]-ee[0],se[1]-ee[1]])}else if(te==="A"){var K=.001,G=H.arcParams||{},ne=G.cx,le=ne===void 0?0:ne,ue=G.cy,Q=ue===void 0?0:ue,he=G.rx,Se=he===void 0?0:he,je=G.ry,Ae=je===void 0?0:je,Ce=G.sweepFlag,Re=Ce===void 0?0:Ce,Ee=G.startAngle,Le=Ee===void 0?0:Ee,Ke=G.endAngle,et=Ke===void 0?0:Ke;Re===0&&(K*=-1);var ot=Se*Math.cos(Le-K)+le,dt=Ae*Math.sin(Le-K)+Q;H.startTangent=[ot-xe[0],dt-xe[1]];var At=Se*Math.cos(Le+et+K)+le,Tt=Ae*Math.sin(Le+et-K)+Q;H.endTangent=[ke[0]-At,ke[1]-Tt]}re.push(H)}return re}},function(D,m,o){"use strict";function f(_,x){var O=[],S=_[0],g=_[1],d=_[2],y=_[3],E=_[4],b=_[5],p=_[6],A=_[7],C=_[8],N=x[0],P=x[1],L=x[2],z=x[3],X=x[4],re=x[5],se=x[6],ce=x[7],xe=x[8];return O[0]=N*S+P*y+L*p,O[1]=N*g+P*E+L*A,O[2]=N*d+P*b+L*C,O[3]=z*S+X*y+re*p,O[4]=z*g+X*E+re*A,O[5]=z*d+X*b+re*C,O[6]=se*S+ce*y+xe*p,O[7]=se*g+ce*E+xe*A,O[8]=se*d+ce*b+xe*C,O}function c(_,x){var O=[],S=x[0],g=x[1];return O[0]=_[0]*S+_[3]*g+_[6],O[1]=_[1]*S+_[4]*g+_[7],O}function M(_){var x=[],O=_[0],S=_[1],g=_[2],d=_[3],y=_[4],E=_[5],b=_[6],p=_[7],A=_[8],C=A*y-E*p,N=-A*d+E*b,P=p*d-y*b,L=O*C+S*N+g*P;return L?(L=1/L,x[0]=C*L,x[1]=(-A*S+g*p)*L,x[2]=(E*S-g*y)*L,x[3]=N*L,x[4]=(A*O-g*b)*L,x[5]=(-E*O+g*d)*L,x[6]=P*L,x[7]=(-p*O+S*b)*L,x[8]=(y*O-S*d)*L,x):null}o.d(m,"b",function(){return f}),o.d(m,"c",function(){return c}),o.d(m,"a",function(){return M})},function(D,m,o){"use strict";o.r(m),o.d(m,"create",function(){return c}),o.d(m,"clone",function(){return M}),o.d(m,"length",function(){return _}),o.d(m,"fromValues",function(){return x}),o.d(m,"copy",function(){return O}),o.d(m,"set",function(){return S}),o.d(m,"add",function(){return g}),o.d(m,"subtract",function(){return d}),o.d(m,"multiply",function(){return y}),o.d(m,"divide",function(){return E}),o.d(m,"ceil",function(){return b}),o.d(m,"floor",function(){return p}),o.d(m,"min",function(){return A}),o.d(m,"max",function(){return C}),o.d(m,"round",function(){return N}),o.d(m,"scale",function(){return P}),o.d(m,"scaleAndAdd",function(){return L}),o.d(m,"distance",function(){return z}),o.d(m,"squaredDistance",function(){return X}),o.d(m,"squaredLength",function(){return re}),o.d(m,"negate",function(){return se}),o.d(m,"inverse",function(){return ce}),o.d(m,"normalize",function(){return xe}),o.d(m,"dot",function(){return ye}),o.d(m,"cross",function(){return W}),o.d(m,"lerp",function(){return Ie}),o.d(m,"hermite",function(){return ge}),o.d(m,"bezier",function(){return te}),o.d(m,"random",function(){return H}),o.d(m,"transformMat4",function(){return V}),o.d(m,"transformMat3",function(){return ie}),o.d(m,"transformQuat",function(){return we}),o.d(m,"rotateX",function(){return ke}),o.d(m,"rotateY",function(){return oe}),o.d(m,"rotateZ",function(){return J}),o.d(m,"angle",function(){return ee}),o.d(m,"zero",function(){return Y}),o.d(m,"str",function(){return K}),o.d(m,"exactEquals",function(){return G}),o.d(m,"equals",function(){return ne}),o.d(m,"sub",function(){return ue}),o.d(m,"mul",function(){return Q}),o.d(m,"div",function(){return he}),o.d(m,"dist",function(){return Se}),o.d(m,"sqrDist",function(){return je}),o.d(m,"len",function(){return Ae}),o.d(m,"sqrLen",function(){return Ce}),o.d(m,"forEach",function(){return Re});var f=o(12);function c(){var Ee=new f.a(3);return f.a!=Float32Array&&(Ee[0]=0,Ee[1]=0,Ee[2]=0),Ee}function M(Ee){var Le=new f.a(3);return Le[0]=Ee[0],Le[1]=Ee[1],Le[2]=Ee[2],Le}function _(Ee){var Le=Ee[0],Ke=Ee[1],et=Ee[2];return Math.hypot(Le,Ke,et)}function x(Ee,Le,Ke){var et=new f.a(3);return et[0]=Ee,et[1]=Le,et[2]=Ke,et}function O(Ee,Le){return Ee[0]=Le[0],Ee[1]=Le[1],Ee[2]=Le[2],Ee}function S(Ee,Le,Ke,et){return Ee[0]=Le,Ee[1]=Ke,Ee[2]=et,Ee}function g(Ee,Le,Ke){return Ee[0]=Le[0]+Ke[0],Ee[1]=Le[1]+Ke[1],Ee[2]=Le[2]+Ke[2],Ee}function d(Ee,Le,Ke){return Ee[0]=Le[0]-Ke[0],Ee[1]=Le[1]-Ke[1],Ee[2]=Le[2]-Ke[2],Ee}function y(Ee,Le,Ke){return Ee[0]=Le[0]*Ke[0],Ee[1]=Le[1]*Ke[1],Ee[2]=Le[2]*Ke[2],Ee}function E(Ee,Le,Ke){return Ee[0]=Le[0]/Ke[0],Ee[1]=Le[1]/Ke[1],Ee[2]=Le[2]/Ke[2],Ee}function b(Ee,Le){return Ee[0]=Math.ceil(Le[0]),Ee[1]=Math.ceil(Le[1]),Ee[2]=Math.ceil(Le[2]),Ee}function p(Ee,Le){return Ee[0]=Math.floor(Le[0]),Ee[1]=Math.floor(Le[1]),Ee[2]=Math.floor(Le[2]),Ee}function A(Ee,Le,Ke){return Ee[0]=Math.min(Le[0],Ke[0]),Ee[1]=Math.min(Le[1],Ke[1]),Ee[2]=Math.min(Le[2],Ke[2]),Ee}function C(Ee,Le,Ke){return Ee[0]=Math.max(Le[0],Ke[0]),Ee[1]=Math.max(Le[1],Ke[1]),Ee[2]=Math.max(Le[2],Ke[2]),Ee}function N(Ee,Le){return Ee[0]=Math.round(Le[0]),Ee[1]=Math.round(Le[1]),Ee[2]=Math.round(Le[2]),Ee}function P(Ee,Le,Ke){return Ee[0]=Le[0]*Ke,Ee[1]=Le[1]*Ke,Ee[2]=Le[2]*Ke,Ee}function L(Ee,Le,Ke,et){return Ee[0]=Le[0]+Ke[0]*et,Ee[1]=Le[1]+Ke[1]*et,Ee[2]=Le[2]+Ke[2]*et,Ee}function z(Ee,Le){var Ke=Le[0]-Ee[0],et=Le[1]-Ee[1],ot=Le[2]-Ee[2];return Math.hypot(Ke,et,ot)}function X(Ee,Le){var Ke=Le[0]-Ee[0],et=Le[1]-Ee[1],ot=Le[2]-Ee[2];return Ke*Ke+et*et+ot*ot}function re(Ee){var Le=Ee[0],Ke=Ee[1],et=Ee[2];return Le*Le+Ke*Ke+et*et}function se(Ee,Le){return Ee[0]=-Le[0],Ee[1]=-Le[1],Ee[2]=-Le[2],Ee}function ce(Ee,Le){return Ee[0]=1/Le[0],Ee[1]=1/Le[1],Ee[2]=1/Le[2],Ee}function xe(Ee,Le){var Ke=Le[0],et=Le[1],ot=Le[2],dt=Ke*Ke+et*et+ot*ot;return dt>0&&(dt=1/Math.sqrt(dt)),Ee[0]=Le[0]*dt,Ee[1]=Le[1]*dt,Ee[2]=Le[2]*dt,Ee}function ye(Ee,Le){return Ee[0]*Le[0]+Ee[1]*Le[1]+Ee[2]*Le[2]}function W(Ee,Le,Ke){var et=Le[0],ot=Le[1],dt=Le[2],At=Ke[0],Tt=Ke[1],jt=Ke[2];return Ee[0]=ot*jt-dt*Tt,Ee[1]=dt*At-et*jt,Ee[2]=et*Tt-ot*At,Ee}function Ie(Ee,Le,Ke,et){var ot=Le[0],dt=Le[1],At=Le[2];return Ee[0]=ot+et*(Ke[0]-ot),Ee[1]=dt+et*(Ke[1]-dt),Ee[2]=At+et*(Ke[2]-At),Ee}function ge(Ee,Le,Ke,et,ot,dt){var At=dt*dt,Tt=At*(2*dt-3)+1,jt=At*(dt-2)+dt,Kt=At*(dt-1),Qt=At*(3-2*dt);return Ee[0]=Le[0]*Tt+Ke[0]*jt+et[0]*Kt+ot[0]*Qt,Ee[1]=Le[1]*Tt+Ke[1]*jt+et[1]*Kt+ot[1]*Qt,Ee[2]=Le[2]*Tt+Ke[2]*jt+et[2]*Kt+ot[2]*Qt,Ee}function te(Ee,Le,Ke,et,ot,dt){var At=1-dt,Tt=At*At,jt=dt*dt,Kt=Tt*At,Qt=3*dt*Tt,rr=3*jt*At,or=jt*dt;return Ee[0]=Le[0]*Kt+Ke[0]*Qt+et[0]*rr+ot[0]*or,Ee[1]=Le[1]*Kt+Ke[1]*Qt+et[1]*rr+ot[1]*or,Ee[2]=Le[2]*Kt+Ke[2]*Qt+et[2]*rr+ot[2]*or,Ee}function H(Ee,Le){Le=Le||1;var Ke=2*f.c()*Math.PI,et=2*f.c()-1,ot=Math.sqrt(1-et*et)*Le;return Ee[0]=Math.cos(Ke)*ot,Ee[1]=Math.sin(Ke)*ot,Ee[2]=et*Le,Ee}function V(Ee,Le,Ke){var et=Le[0],ot=Le[1],dt=Le[2],At=Ke[3]*et+Ke[7]*ot+Ke[11]*dt+Ke[15];return At=At||1,Ee[0]=(Ke[0]*et+Ke[4]*ot+Ke[8]*dt+Ke[12])/At,Ee[1]=(Ke[1]*et+Ke[5]*ot+Ke[9]*dt+Ke[13])/At,Ee[2]=(Ke[2]*et+Ke[6]*ot+Ke[10]*dt+Ke[14])/At,Ee}function ie(Ee,Le,Ke){var et=Le[0],ot=Le[1],dt=Le[2];return Ee[0]=et*Ke[0]+ot*Ke[3]+dt*Ke[6],Ee[1]=et*Ke[1]+ot*Ke[4]+dt*Ke[7],Ee[2]=et*Ke[2]+ot*Ke[5]+dt*Ke[8],Ee}function we(Ee,Le,Ke){var et=Ke[0],ot=Ke[1],dt=Ke[2],At=Ke[3],Tt=Le[0],jt=Le[1],Kt=Le[2],Qt=ot*Kt-dt*jt,rr=dt*Tt-et*Kt,or=et*jt-ot*Tt,Mr=ot*or-dt*rr,cr=dt*Qt-et*or,yr=et*rr-ot*Qt,br=2*At;return Qt*=br,rr*=br,or*=br,Mr*=2,cr*=2,yr*=2,Ee[0]=Tt+Qt+Mr,Ee[1]=jt+rr+cr,Ee[2]=Kt+or+yr,Ee}function ke(Ee,Le,Ke,et){var ot=[],dt=[];return ot[0]=Le[0]-Ke[0],ot[1]=Le[1]-Ke[1],ot[2]=Le[2]-Ke[2],dt[0]=ot[0],dt[1]=ot[1]*Math.cos(et)-ot[2]*Math.sin(et),dt[2]=ot[1]*Math.sin(et)+ot[2]*Math.cos(et),Ee[0]=dt[0]+Ke[0],Ee[1]=dt[1]+Ke[1],Ee[2]=dt[2]+Ke[2],Ee}function oe(Ee,Le,Ke,et){var ot=[],dt=[];return ot[0]=Le[0]-Ke[0],ot[1]=Le[1]-Ke[1],ot[2]=Le[2]-Ke[2],dt[0]=ot[2]*Math.sin(et)+ot[0]*Math.cos(et),dt[1]=ot[1],dt[2]=ot[2]*Math.cos(et)-ot[0]*Math.sin(et),Ee[0]=dt[0]+Ke[0],Ee[1]=dt[1]+Ke[1],Ee[2]=dt[2]+Ke[2],Ee}function J(Ee,Le,Ke,et){var ot=[],dt=[];return ot[0]=Le[0]-Ke[0],ot[1]=Le[1]-Ke[1],ot[2]=Le[2]-Ke[2],dt[0]=ot[0]*Math.cos(et)-ot[1]*Math.sin(et),dt[1]=ot[0]*Math.sin(et)+ot[1]*Math.cos(et),dt[2]=ot[2],Ee[0]=dt[0]+Ke[0],Ee[1]=dt[1]+Ke[1],Ee[2]=dt[2]+Ke[2],Ee}function ee(Ee,Le){var Ke=Ee[0],et=Ee[1],ot=Ee[2],dt=Le[0],At=Le[1],Tt=Le[2],jt=Math.sqrt(Ke*Ke+et*et+ot*ot)*Math.sqrt(dt*dt+At*At+Tt*Tt),Kt=jt&&ye(Ee,Le)/jt;return Math.acos(Math.min(Math.max(Kt,-1),1))}function Y(Ee){return Ee[0]=0,Ee[1]=0,Ee[2]=0,Ee}function K(Ee){return"vec3("+Ee[0]+", "+Ee[1]+", "+Ee[2]+")"}function G(Ee,Le){return Ee[0]===Le[0]&&Ee[1]===Le[1]&&Ee[2]===Le[2]}function ne(Ee,Le){var Ke=Ee[0],et=Ee[1],ot=Ee[2],dt=Le[0],At=Le[1],Tt=Le[2];return Math.abs(Ke-dt)<=f.b*Math.max(1,Math.abs(Ke),Math.abs(dt))&&Math.abs(et-At)<=f.b*Math.max(1,Math.abs(et),Math.abs(At))&&Math.abs(ot-Tt)<=f.b*Math.max(1,Math.abs(ot),Math.abs(Tt))}var le,ue=d,Q=y,he=E,Se=z,je=X,Ae=_,Ce=re,Re=(le=c(),function(Ee,Le,Ke,et,ot,dt){var At,Tt;for(Le||(Le=3),Ke||(Ke=0),Tt=et?Math.min(et*Le+Ke,Ee.length):Ee.length,At=Ke;At<Tt;At+=Le)le[0]=Ee[At],le[1]=Ee[At+1],le[2]=Ee[At+2],ot(le,le,dt),Ee[At]=le[0],Ee[At+1]=le[1],Ee[At+2]=le[2];return Ee})},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.STACK_OVERFLOW=m.CIRCULAR_DEPENDENCY_IN_FACTORY=m.POST_CONSTRUCT_ERROR=m.MULTIPLE_POST_CONSTRUCT_METHODS=m.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=m.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=m.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=m.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=m.ARGUMENTS_LENGTH_MISMATCH=m.INVALID_DECORATOR_OPERATION=m.INVALID_TO_SELF_VALUE=m.INVALID_FUNCTION_BINDING=m.INVALID_MIDDLEWARE_RETURN=m.NO_MORE_SNAPSHOTS_AVAILABLE=m.INVALID_BINDING_TYPE=m.NOT_IMPLEMENTED=m.CIRCULAR_DEPENDENCY=m.UNDEFINED_INJECT_ANNOTATION=m.MISSING_INJECT_ANNOTATION=m.MISSING_INJECTABLE_ANNOTATION=m.NOT_REGISTERED=m.CANNOT_UNBIND=m.AMBIGUOUS_MATCH=m.KEY_NOT_FOUND=m.NULL_ARGUMENT=m.DUPLICATED_METADATA=m.DUPLICATED_INJECTABLE_DECORATOR=void 0,m.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",m.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",m.NULL_ARGUMENT="NULL argument",m.KEY_NOT_FOUND="Key Not Found",m.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",m.CANNOT_UNBIND="Could not unbind serviceIdentifier:",m.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",m.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",m.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",m.UNDEFINED_INJECT_ANNOTATION=function(f){return"@inject called with undefined this could mean that the class "+f+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},m.CIRCULAR_DEPENDENCY="Circular dependency found:",m.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",m.INVALID_BINDING_TYPE="Invalid binding type:",m.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",m.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",m.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",m.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",m.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",m.ARGUMENTS_LENGTH_MISMATCH=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return"The number of constructor arguments in the derived class "+f[0]+" must be >= than the number of constructor arguments of its base class."},m.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",m.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",m.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",m.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",m.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",m.POST_CONSTRUCT_ERROR=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return"@postConstruct error in class "+f[0]+": "+f[1]},m.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];return"It looks like there is a circular dependency in one of the '"+f[0]+"' bindings. Please investigate bindings withservice identifier '"+f[1]+"'."},m.STACK_OVERFLOW="Maximum call stack size exceeded"},function(D,m){function o(f){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(D.exports=o=function(c){return typeof c},D.exports.default=D.exports,D.exports.__esModule=!0):(D.exports=o=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},D.exports.default=D.exports,D.exports.__esModule=!0),o(f)}D.exports=o,D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){var f;try{f={clone:o(307),constant:o(153),each:o(193),filter:o(196),has:o(207),isArray:o(31),isEmpty:o(383),isFunction:o(84),isUndefined:o(208),keys:o(57),map:o(209),reduce:o(211),size:o(386),transform:o(392),union:o(393),values:o(216)}}catch(c){}f||(f=window._),D.exports=f},function(D,m){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}D.exports=function(f){var c=o(f);return f!=null&&(c=="object"||c=="function")}},function(D,m,o){"use strict";o(55),o(21);var f=o(269);o.d(m,"Canvas",function(){return f.a}),o(75),o(92)},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.uniqueId=m.getEdgesByNodeId=m.getOutEdgesNodeId=m.getNeighbors=void 0,m.getNeighbors=function(f,c,M){c===void 0&&(c=[]);var _=c.filter(function(x){return x.source===f||x.target===f});return M==="target"?_.filter(function(x){return x.source===f}).map(function(x){return x.target}):M==="source"?_.filter(function(x){return x.target===f}).map(function(x){return x.source}):_.map(function(x){return x.source===f?x.target:x.source})},m.getOutEdgesNodeId=function(f,c){return c.filter(function(M){return M.source===f})},m.getEdgesByNodeId=function(f,c){return c.filter(function(M){return M.source===f||M.target===f})},m.uniqueId=function(f){return f===void 0&&(f=0),f+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)}},function(D,m,o){var f;try{f=o(305)}catch(c){}f||(f=window.graphlib),D.exports=f},function(D,m,o){function f(x){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}var c=o(175),M=(typeof self=="undefined"?"undefined":f(self))=="object"&&self&&self.Object===Object&&self,_=c||M||Function("return this")();D.exports=_},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Metadata=void 0;var f=o(32),c=function(){function M(_,x){this.key=_,this.value=x}return M.prototype.toString=function(){return this.key===f.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},M}();m.Metadata=c},function(D,m){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}D.exports=function(f){return f!=null&&o(f)=="object"}},function(D,m,o){"use strict";o.d(m,"a",function(){return ue});var f,c,M,_,x,O,S,g,d,y,E,b,p,A,C,N,P,L,z,X,re,se,ce,xe,ye=o(9),W=o.n(ye),Ie=o(14),ge=o.n(Ie),te=o(10),H=o.n(te),V=o(6),ie=o.n(V),we=o(7),ke=o.n(we),oe=o(11),J=o.n(oe),ee=(o(29),o(2)),Y=o(5),K=o(13),G=o(35);function ne(Q,he){var Se;if(typeof Symbol=="undefined"||Q[Symbol.iterator]==null){if(Array.isArray(Q)||(Se=function(Le,Ke){if(!!Le){if(typeof Le=="string")return le(Le,Ke);var et=Object.prototype.toString.call(Le).slice(8,-1);if(et==="Object"&&Le.constructor&&(et=Le.constructor.name),et==="Map"||et==="Set")return Array.from(Le);if(et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(et))return le(Le,Ke)}}(Q))||he&&Q&&typeof Q.length=="number"){Se&&(Q=Se);var je=0,Ae=function(){};return{s:Ae,n:function(){return je>=Q.length?{done:!0}:{done:!1,value:Q[je++]}},e:function(Le){throw Le},f:Ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ce,Re=!0,Ee=!1;return{s:function(){Se=Q[Symbol.iterator]()},n:function(){var Le=Se.next();return Re=Le.done,Le},e:function(Le){Ee=!0,Ce=Le},f:function(){try{Re||Se.return==null||Se.return()}finally{if(Ee)throw Ce}}}}function le(Q,he){(he==null||he>Q.length)&&(he=Q.length);for(var Se=0,je=new Array(he);Se<he;Se++)je[Se]=Q[Se];return je}var ue=(f=Object(Y.injectable)(),c=Object(Y.inject)(K.a.MeshComponentManager),M=Object(Y.inject)(K.a.GeometryComponentManager),_=Object(Y.inject)(K.a.MaterialComponentManager),x=Object(Y.inject)(K.a.CullableComponentManager),O=Object(Y.inject)(K.a.TransformComponentManager),S=Object(Y.inject)(K.a.HierarchyComponentManager),g=Object(Y.inject)(K.a.Systems),d=Object(Y.named)(K.a.FrameGraphSystem),y=Object(Y.inject)(K.a.RenderEngine),E=Object(Y.inject)(K.a.ResourcePool),f((xe=ce=function(){function Q(){var je=this;ie()(this,Q),H()(this,"mesh",A,this),H()(this,"geometry",C,this),H()(this,"material",N,this),H()(this,"cullable",P,this),H()(this,"transform",L,this),H()(this,"hierarchy",z,this),H()(this,"frameGraphSystem",X,this),H()(this,"engine",re,this),H()(this,"resourcePool",se,this),this.modelCache={},this.setup=function(Ae,Ce,Re){var Ee=Ae.createRenderTarget(Ce,"color buffer",{width:1,height:1,usage:G.a.RENDER_ATTACHMENT|G.a.SAMPLED|G.a.COPY_SRC});Re.data={output:Ce.write(Ae,Ee)}},this.execute=function(){var Ae=ge()(W.a.mark(function Ce(Re,Ee,Le){var Ke,et,ot,dt,At,Tt;return W.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:Ke=Re.getResourceNode(Ee.data.output),et=je.resourcePool.getOrCreateResource(Ke.resource),ot=ne(Le),jt.prev=3,ot.s();case 5:if((dt=ot.n()).done){jt.next=11;break}return At=dt.value,jt.next=9,je.initView(At);case 9:jt.next=5;break;case 11:jt.next=16;break;case 13:jt.prev=13,jt.t0=jt.catch(3),ot.e(jt.t0);case 16:return jt.prev=16,ot.f(),jt.finish(16);case 19:Tt=je.engine.getCanvas(),et.resize({width:Tt.width,height:Tt.height}),je.engine.setScissor({enable:!1}),je.engine.clear({framebuffer:et,color:Le[0].getClearColor(),depth:1}),je.engine.useFramebuffer(et,function(){var Kt,Qt=ne(Le);try{for(Qt.s();!(Kt=Qt.n()).done;){var rr=Kt.value;je.renderView(rr)}}catch(or){Qt.e(or)}finally{Qt.f()}});case 24:case"end":return jt.stop()}},Ce,null,[[3,13,16,19]])}));return function(Ce,Re,Ee){return Ae.apply(this,arguments)}}()}var he,Se;return ke()(Q,[{key:"renderView",value:function(je){var Ae=je.getScene(),Ce=je.getCamera(),Re=Ce.getViewTransform(),Ee=ee.b.multiply(ee.b.create(),Ce.getPerspective(),Re);Ce.getFrustum().extractFromVPMatrix(Ee);var Le=je.getViewport(),Ke=Le.x,et=Le.y,ot=Le.width,dt=Le.height;this.engine.viewport({x:Ke,y:et,width:ot,height:dt});var At,Tt=ne(Ae.getEntities());try{for(Tt.s();!(At=Tt.n()).done;){var jt=At.value;this.renderMesh(jt,{camera:Ce,view:je,viewMatrix:Re})}}catch(Kt){Tt.e(Kt)}finally{Tt.f()}}},{key:"renderMesh",value:function(je,Ae){var Ce=Ae.camera,Re=Ae.view,Ee=Ae.viewMatrix,Le=this.mesh.getComponentByEntity(je);if(Le&&Le.visible){var Ke=Le.material,et=Le.geometry;if(et&&!et.dirty&&Ke){var ot=this.transform.getComponentByEntity(je),dt=ee.b.multiply(ee.b.create(),Ee,ot.worldTransform),At=Re.getViewport(),Tt=At.width,jt=At.height;Ke.setUniform({projectionMatrix:Ce.getPerspective(),modelViewMatrix:dt,modelMatrix:ot.worldTransform,viewMatrix:Ee,cameraPosition:Ce.getPosition(),u_viewport:[Tt,jt]}),Le.model&&(Le.model.draw({uniforms:Ke.uniforms.reduce(function(Kt,Qt){return Kt[Qt.name]=Qt.data,Kt},{})}),Ke.uniforms.forEach(function(Kt){Kt.dirty=!1}),Ke.dirty=!1)}}}},{key:"initMesh",value:(Se=ge()(W.a.mark(function je(Ae,Ce){var Re,Ee,Le,Ke,et,ot,dt,At;return W.a.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:if(Re=this.mesh.getComponentByEntity(Ae)){Tt.next=3;break}return Tt.abrupt("return");case 3:if(Ee=Re.material,(Le=Re.geometry)&&!Le.dirty&&Ee){Tt.next=7;break}return Tt.abrupt("return");case 7:if(Re.model){Tt.next=24;break}if(Ke="m-".concat(Ee.entity,"-g-").concat(Le.entity),!this.modelCache[Ke]){Tt.next=12;break}return Re.model=this.modelCache[Ke],Tt.abrupt("return");case 12:return Ee.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),et=this.engine,ot=et.createModel,dt=et.createAttribute,At={vs:Ee.vertexShaderGLSL,fs:Ee.fragmentShaderGLSL,defines:Ee.defines,attributes:Le.attributes.reduce(function(jt,Kt){return Kt.data&&Kt.buffer&&(jt[Kt.name]=dt({buffer:Kt.buffer,attributes:Kt.attributes,arrayStride:Kt.arrayStride,stepMode:Kt.stepMode,divisor:Kt.stepMode==="vertex"?0:1})),jt},{}),uniforms:Ee.uniforms.reduce(function(jt,Kt){return jt[Kt.name]=Kt.data,jt},{}),scissor:{enable:!0,box:function(){return Ce.getViewport()}}},Ee.cull&&(At.cull=Ee.cull),Ee.depth&&(At.depth=Ee.depth),Ee.blend&&(At.blend=Ee.blend),Le.indicesBuffer&&(At.elements=Le.indicesBuffer),Le.maxInstancedCount&&(At.instances=Le.maxInstancedCount,At.count=Le.vertexCount||3),Tt.next=22,ot(At);case 22:Re.model=Tt.sent,this.modelCache[Ke]=Re.model;case 24:case"end":return Tt.stop()}},je,this)})),function(je,Ae){return Se.apply(this,arguments)})},{key:"initView",value:(he=ge()(W.a.mark(function je(Ae){var Ce,Re,Ee,Le;return W.a.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:Ce=Ae.getScene(),Re=ne(Ce.getEntities()),Ke.prev=2,Re.s();case 4:if((Ee=Re.n()).done){Ke.next=10;break}return Le=Ee.value,Ke.next=8,this.initMesh(Le,Ae);case 8:Ke.next=4;break;case 10:Ke.next=15;break;case 12:Ke.prev=12,Ke.t0=Ke.catch(2),Re.e(Ke.t0);case 15:return Ke.prev=15,Re.f(),Ke.finish(15);case 18:case"end":return Ke.stop()}},je,this,[[2,12,15,18]])})),function(je){return he.apply(this,arguments)})}]),Q}(),ce.IDENTIFIER="Render Pass",p=xe,A=J()(p.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=J()(p.prototype,"geometry",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=J()(p.prototype,"material",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=J()(p.prototype,"cullable",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=J()(p.prototype,"transform",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=J()(p.prototype,"hierarchy",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=J()(p.prototype,"frameGraphSystem",[g,d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=J()(p.prototype,"engine",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=J()(p.prototype,"resourcePool",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=p))||b)},function(D,m,o){"use strict";o.r(m),o.d(m,"catmullRomToBezier",function(){return O}),o.d(m,"fillPath",function(){return ge}),o.d(m,"fillPathByDiff",function(){return V}),o.d(m,"formatPath",function(){return ke}),o.d(m,"intersection",function(){return ye}),o.d(m,"parsePathArray",function(){return A}),o.d(m,"parsePathString",function(){return x}),o.d(m,"pathToAbsolute",function(){return g}),o.d(m,"pathToCurve",function(){return b}),o.d(m,"rectPath",function(){return X});var f=o(0),c=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,M=new RegExp("([a-z])["+c+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+c+"]*,?["+c+"]*)+)","ig"),_=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+c+"]*,?["+c+"]*","ig"),x=function(oe){if(!oe)return null;if(Object(f.isArray)(oe))return oe;var J={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},ee=[];return String(oe).replace(M,function(Y,K,G){var ne=[],le=K.toLowerCase();if(G.replace(_,function(ue,Q){Q&&ne.push(+Q)}),le==="m"&&ne.length>2&&(ee.push([K].concat(ne.splice(0,2))),le="l",K=K==="m"?"l":"L"),le==="o"&&ne.length===1&&ee.push([K,ne[0]]),le==="r")ee.push([K].concat(ne));else for(;ne.length>=J[le]&&(ee.push([K].concat(ne.splice(0,J[le]))),J[le]););return oe}),ee},O=function(oe,J){for(var ee=[],Y=0,K=oe.length;K-2*!J>Y;Y+=2){var G=[{x:+oe[Y-2],y:+oe[Y-1]},{x:+oe[Y],y:+oe[Y+1]},{x:+oe[Y+2],y:+oe[Y+3]},{x:+oe[Y+4],y:+oe[Y+5]}];J?Y?K-4===Y?G[3]={x:+oe[0],y:+oe[1]}:K-2===Y&&(G[2]={x:+oe[0],y:+oe[1]},G[3]={x:+oe[2],y:+oe[3]}):G[0]={x:+oe[K-2],y:+oe[K-1]}:K-4===Y?G[3]=G[2]:Y||(G[0]={x:+oe[Y],y:+oe[Y+1]}),ee.push(["C",(-G[0].x+6*G[1].x+G[2].x)/6,(-G[0].y+6*G[1].y+G[2].y)/6,(G[1].x+6*G[2].x-G[3].x)/6,(G[1].y+6*G[2].y-G[3].y)/6,G[2].x,G[2].y])}return ee},S=function(oe,J,ee,Y,K){var G=[];if(K===null&&Y===null&&(Y=ee),oe=+oe,J=+J,ee=+ee,Y=+Y,K!==null){var ne=Math.PI/180,le=oe+ee*Math.cos(-Y*ne),ue=oe+ee*Math.cos(-K*ne);G=[["M",le,J+ee*Math.sin(-Y*ne)],["A",ee,ee,0,+(K-Y>180),0,ue,J+ee*Math.sin(-K*ne)]]}else G=[["M",oe,J],["m",0,-Y],["a",ee,Y,0,1,1,0,2*Y],["a",ee,Y,0,1,1,0,-2*Y],["z"]];return G},g=function(oe){if(!(oe=x(oe))||!oe.length)return[["M",0,0]];var J,ee,Y=[],K=0,G=0,ne=0,le=0,ue=0;oe[0][0]==="M"&&(ne=K=+oe[0][1],le=G=+oe[0][2],ue++,Y[0]=["M",K,G]);for(var Q=oe.length===3&&oe[0][0]==="M"&&oe[1][0].toUpperCase()==="R"&&oe[2][0].toUpperCase()==="Z",he=void 0,Se=void 0,je=ue,Ae=oe.length;je<Ae;je++){if(Y.push(he=[]),(J=(Se=oe[je])[0])!==J.toUpperCase())switch(he[0]=J.toUpperCase(),he[0]){case"A":he[1]=Se[1],he[2]=Se[2],he[3]=Se[3],he[4]=Se[4],he[5]=Se[5],he[6]=+Se[6]+K,he[7]=+Se[7]+G;break;case"V":he[1]=+Se[1]+G;break;case"H":he[1]=+Se[1]+K;break;case"R":for(var Ce=2,Re=(ee=[K,G].concat(Se.slice(1))).length;Ce<Re;Ce++)ee[Ce]=+ee[Ce]+K,ee[++Ce]=+ee[Ce]+G;Y.pop(),Y=Y.concat(O(ee,Q));break;case"O":Y.pop(),(ee=S(K,G,Se[1],Se[2])).push(ee[0]),Y=Y.concat(ee);break;case"U":Y.pop(),Y=Y.concat(S(K,G,Se[1],Se[2],Se[3])),he=["U"].concat(Y[Y.length-1].slice(-2));break;case"M":ne=+Se[1]+K,le=+Se[2]+G;break;default:for(Ce=1,Re=Se.length;Ce<Re;Ce++)he[Ce]=+Se[Ce]+(Ce%2?K:G)}else if(J==="R")ee=[K,G].concat(Se.slice(1)),Y.pop(),Y=Y.concat(O(ee,Q)),he=["R"].concat(Se.slice(-2));else if(J==="O")Y.pop(),(ee=S(K,G,Se[1],Se[2])).push(ee[0]),Y=Y.concat(ee);else if(J==="U")Y.pop(),Y=Y.concat(S(K,G,Se[1],Se[2],Se[3])),he=["U"].concat(Y[Y.length-1].slice(-2));else for(var Ee=0,Le=Se.length;Ee<Le;Ee++)he[Ee]=Se[Ee];if((J=J.toUpperCase())!=="O")switch(he[0]){case"Z":K=+ne,G=+le;break;case"H":K=he[1];break;case"V":G=he[1];break;case"M":ne=he[he.length-2],le=he[he.length-1];break;default:K=he[he.length-2],G=he[he.length-1]}}return Y},d=function(oe,J,ee,Y){return[oe,J,ee,Y,ee,Y]},y=function(oe,J,ee,Y,K,G){return[1/3*oe+2/3*ee,1/3*J+2/3*Y,1/3*K+2/3*ee,1/3*G+2/3*Y,K,G]},E=function oe(J,ee,Y,K,G,ne,le,ue,Q,he){Y===K&&(Y+=1);var Se,je,Ae,Ce,Re,Ee=120*Math.PI/180,Le=Math.PI/180*(+G||0),Ke=[],et=function(Ir,On,In){return{x:Ir*Math.cos(In)-On*Math.sin(In),y:Ir*Math.sin(In)+On*Math.cos(In)}};if(he)je=he[0],Ae=he[1],Ce=he[2],Re=he[3];else{J=(Se=et(J,ee,-Le)).x,ee=Se.y,ue=(Se=et(ue,Q,-Le)).x,Q=Se.y,J===ue&&ee===Q&&(ue+=1,Q+=1);var ot=(J-ue)/2,dt=(ee-Q)/2,At=ot*ot/(Y*Y)+dt*dt/(K*K);At>1&&(Y*=At=Math.sqrt(At),K*=At);var Tt=Y*Y,jt=K*K,Kt=(ne===le?-1:1)*Math.sqrt(Math.abs((Tt*jt-Tt*dt*dt-jt*ot*ot)/(Tt*dt*dt+jt*ot*ot)));Ce=Kt*Y*dt/K+(J+ue)/2,Re=Kt*-K*ot/Y+(ee+Q)/2,je=Math.asin(((ee-Re)/K).toFixed(9)),Ae=Math.asin(((Q-Re)/K).toFixed(9)),je=J<Ce?Math.PI-je:je,Ae=ue<Ce?Math.PI-Ae:Ae,je<0&&(je=2*Math.PI+je),Ae<0&&(Ae=2*Math.PI+Ae),le&&je>Ae&&(je-=2*Math.PI),!le&&Ae>je&&(Ae-=2*Math.PI)}var Qt=Ae-je;if(Math.abs(Qt)>Ee){var rr=Ae,or=ue,Mr=Q;Ae=je+Ee*(le&&Ae>je?1:-1),Ke=oe(ue=Ce+Y*Math.cos(Ae),Q=Re+K*Math.sin(Ae),Y,K,G,0,le,or,Mr,[Ae,rr,Ce,Re])}Qt=Ae-je;var cr=Math.cos(je),yr=Math.sin(je),br=Math.cos(Ae),Xr=Math.sin(Ae),gr=Math.tan(Qt/4),xr=4/3*Y*gr,dr=4/3*K*gr,Br=[J,ee],Rr=[J+xr*yr,ee-dr*cr],pn=[ue+xr*Xr,Q-dr*br],zr=[ue,Q];if(Rr[0]=2*Br[0]-Rr[0],Rr[1]=2*Br[1]-Rr[1],he)return[Rr,pn,zr].concat(Ke);for(var Nr=[],Dr=0,rn=(Ke=[Rr,pn,zr].concat(Ke).join().split(",")).length;Dr<rn;Dr++)Nr[Dr]=Dr%2?et(Ke[Dr-1],Ke[Dr],Le).y:et(Ke[Dr],Ke[Dr+1],Le).x;return Nr},b=function(oe,J){var ee,Y=g(oe),K=J&&g(J),G={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ne={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},le=[],ue=[],Q="",he="",Se=function(et,ot,dt){var At,Tt;if(!et)return["C",ot.x,ot.y,ot.x,ot.y,ot.x,ot.y];switch(!(et[0]in{T:1,Q:1})&&(ot.qx=ot.qy=null),et[0]){case"M":ot.X=et[1],ot.Y=et[2];break;case"A":et=["C"].concat(E.apply(0,[ot.x,ot.y].concat(et.slice(1))));break;case"S":dt==="C"||dt==="S"?(At=2*ot.x-ot.bx,Tt=2*ot.y-ot.by):(At=ot.x,Tt=ot.y),et=["C",At,Tt].concat(et.slice(1));break;case"T":dt==="Q"||dt==="T"?(ot.qx=2*ot.x-ot.qx,ot.qy=2*ot.y-ot.qy):(ot.qx=ot.x,ot.qy=ot.y),et=["C"].concat(y(ot.x,ot.y,ot.qx,ot.qy,et[1],et[2]));break;case"Q":ot.qx=et[1],ot.qy=et[2],et=["C"].concat(y(ot.x,ot.y,et[1],et[2],et[3],et[4]));break;case"L":et=["C"].concat(d(ot.x,ot.y,et[1],et[2]));break;case"H":et=["C"].concat(d(ot.x,ot.y,et[1],ot.y));break;case"V":et=["C"].concat(d(ot.x,ot.y,ot.x,et[1]));break;case"Z":et=["C"].concat(d(ot.x,ot.y,ot.X,ot.Y))}return et},je=function(et,ot){if(et[ot].length>7){et[ot].shift();for(var dt=et[ot];dt.length;)le[ot]="A",K&&(ue[ot]="A"),et.splice(ot++,0,["C"].concat(dt.splice(0,6)));et.splice(ot,1),ee=Math.max(Y.length,K&&K.length||0)}},Ae=function(et,ot,dt,At,Tt){et&&ot&&et[Tt][0]==="M"&&ot[Tt][0]!=="M"&&(ot.splice(Tt,0,["M",At.x,At.y]),dt.bx=0,dt.by=0,dt.x=et[Tt][1],dt.y=et[Tt][2],ee=Math.max(Y.length,K&&K.length||0))};ee=Math.max(Y.length,K&&K.length||0);for(var Ce=0;Ce<ee;Ce++){Y[Ce]&&(Q=Y[Ce][0]),Q!=="C"&&(le[Ce]=Q,Ce&&(he=le[Ce-1])),Y[Ce]=Se(Y[Ce],G,he),le[Ce]!=="A"&&Q==="C"&&(le[Ce]="C"),je(Y,Ce),K&&(K[Ce]&&(Q=K[Ce][0]),Q!=="C"&&(ue[Ce]=Q,Ce&&(he=ue[Ce-1])),K[Ce]=Se(K[Ce],ne,he),ue[Ce]!=="A"&&Q==="C"&&(ue[Ce]="C"),je(K,Ce)),Ae(Y,K,G,ne,Ce),Ae(K,Y,ne,G,Ce);var Re=Y[Ce],Ee=K&&K[Ce],Le=Re.length,Ke=K&&Ee.length;G.x=Re[Le-2],G.y=Re[Le-1],G.bx=parseFloat(Re[Le-4])||G.x,G.by=parseFloat(Re[Le-3])||G.y,ne.bx=K&&(parseFloat(Ee[Ke-4])||ne.x),ne.by=K&&(parseFloat(Ee[Ke-3])||ne.y),ne.x=K&&Ee[Ke-2],ne.y=K&&Ee[Ke-1]}return K?[Y,K]:Y},p=/,?([a-z]),?/gi,A=function(oe){return oe.join(",").replace(p,"$1")},C=function(oe,J,ee,Y,K){return oe*(oe*(-3*J+9*ee-9*Y+3*K)+6*J-12*ee+6*Y)-3*J+3*ee},N=function(oe,J,ee,Y,K,G,ne,le,ue){ue===null&&(ue=1);for(var Q=(ue=ue>1?1:ue<0?0:ue)/2,he=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Se=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],je=0,Ae=0;Ae<12;Ae++){var Ce=Q*he[Ae]+Q,Re=C(Ce,oe,ee,K,ne),Ee=C(Ce,J,Y,G,le),Le=Re*Re+Ee*Ee;je+=Se[Ae]*Math.sqrt(Le)}return Q*je},P=function(oe,J,ee,Y,K,G,ne,le){for(var ue,Q,he,Se,je=[],Ae=[[],[]],Ce=0;Ce<2;++Ce)if(Ce===0?(Q=6*oe-12*ee+6*K,ue=-3*oe+9*ee-9*K+3*ne,he=3*ee-3*oe):(Q=6*J-12*Y+6*G,ue=-3*J+9*Y-9*G+3*le,he=3*Y-3*J),Math.abs(ue)<1e-12){if(Math.abs(Q)<1e-12)continue;(Se=-he/Q)>0&&Se<1&&je.push(Se)}else{var Re=Q*Q-4*he*ue,Ee=Math.sqrt(Re);if(!(Re<0)){var Le=(-Q+Ee)/(2*ue);Le>0&&Le<1&&je.push(Le);var Ke=(-Q-Ee)/(2*ue);Ke>0&&Ke<1&&je.push(Ke)}}for(var et,ot=je.length,dt=ot;ot--;)et=1-(Se=je[ot]),Ae[0][ot]=et*et*et*oe+3*et*et*Se*ee+3*et*Se*Se*K+Se*Se*Se*ne,Ae[1][ot]=et*et*et*J+3*et*et*Se*Y+3*et*Se*Se*G+Se*Se*Se*le;return Ae[0][dt]=oe,Ae[1][dt]=J,Ae[0][dt+1]=ne,Ae[1][dt+1]=le,Ae[0].length=Ae[1].length=dt+2,{min:{x:Math.min.apply(0,Ae[0]),y:Math.min.apply(0,Ae[1])},max:{x:Math.max.apply(0,Ae[0]),y:Math.max.apply(0,Ae[1])}}},L=function(oe,J,ee,Y,K,G,ne,le){if(!(Math.max(oe,ee)<Math.min(K,ne)||Math.min(oe,ee)>Math.max(K,ne)||Math.max(J,Y)<Math.min(G,le)||Math.min(J,Y)>Math.max(G,le))){var ue=(oe-ee)*(G-le)-(J-Y)*(K-ne);if(ue){var Q=((oe*Y-J*ee)*(K-ne)-(oe-ee)*(K*le-G*ne))/ue,he=((oe*Y-J*ee)*(G-le)-(J-Y)*(K*le-G*ne))/ue,Se=+Q.toFixed(2),je=+he.toFixed(2);if(!(Se<+Math.min(oe,ee).toFixed(2)||Se>+Math.max(oe,ee).toFixed(2)||Se<+Math.min(K,ne).toFixed(2)||Se>+Math.max(K,ne).toFixed(2)||je<+Math.min(J,Y).toFixed(2)||je>+Math.max(J,Y).toFixed(2)||je<+Math.min(G,le).toFixed(2)||je>+Math.max(G,le).toFixed(2)))return{x:Q,y:he}}}},z=function(oe,J,ee){return J>=oe.x&&J<=oe.x+oe.width&&ee>=oe.y&&ee<=oe.y+oe.height},X=function(oe,J,ee,Y,K){if(K)return[["M",+oe+ +K,J],["l",ee-2*K,0],["a",K,K,0,0,1,K,K],["l",0,Y-2*K],["a",K,K,0,0,1,-K,K],["l",2*K-ee,0],["a",K,K,0,0,1,-K,-K],["l",0,2*K-Y],["a",K,K,0,0,1,K,-K],["z"]];var G=[["M",oe,J],["l",ee,0],["l",0,Y],["l",-ee,0],["z"]];return G.parsePathArray=A,G},re=function(oe,J,ee,Y){return oe===null&&(oe=J=ee=Y=0),J===null&&(J=oe.y,ee=oe.width,Y=oe.height,oe=oe.x),{x:oe,y:J,width:ee,w:ee,height:Y,h:Y,x2:oe+ee,y2:J+Y,cx:oe+ee/2,cy:J+Y/2,r1:Math.min(ee,Y)/2,r2:Math.max(ee,Y)/2,r0:Math.sqrt(ee*ee+Y*Y)/2,path:X(oe,J,ee,Y),vb:[oe,J,ee,Y].join(" ")}},se=function(oe,J,ee,Y,K,G,ne,le){Object(f.isArray)(oe)||(oe=[oe,J,ee,Y,K,G,ne,le]);var ue=P.apply(null,oe);return re(ue.min.x,ue.min.y,ue.max.x-ue.min.x,ue.max.y-ue.min.y)},ce=function(oe,J,ee,Y,K,G,ne,le,ue){var Q=1-ue,he=Math.pow(Q,3),Se=Math.pow(Q,2),je=ue*ue,Ae=je*ue,Ce=oe+2*ue*(ee-oe)+je*(K-2*ee+oe),Re=J+2*ue*(Y-J)+je*(G-2*Y+J),Ee=ee+2*ue*(K-ee)+je*(ne-2*K+ee),Le=Y+2*ue*(G-Y)+je*(le-2*G+Y);return{x:he*oe+3*Se*ue*ee+3*Q*ue*ue*K+Ae*ne,y:he*J+3*Se*ue*Y+3*Q*ue*ue*G+Ae*le,m:{x:Ce,y:Re},n:{x:Ee,y:Le},start:{x:Q*oe+ue*ee,y:Q*J+ue*Y},end:{x:Q*K+ue*ne,y:Q*G+ue*le},alpha:90-180*Math.atan2(Ce-Ee,Re-Le)/Math.PI}},xe=function(oe,J,ee){if(!function(dt,At){return dt=re(dt),At=re(At),z(At,dt.x,dt.y)||z(At,dt.x2,dt.y)||z(At,dt.x,dt.y2)||z(At,dt.x2,dt.y2)||z(dt,At.x,At.y)||z(dt,At.x2,At.y)||z(dt,At.x,At.y2)||z(dt,At.x2,At.y2)||(dt.x<At.x2&&dt.x>At.x||At.x<dt.x2&&At.x>dt.x)&&(dt.y<At.y2&&dt.y>At.y||At.y<dt.y2&&At.y>dt.y)}(se(oe),se(J)))return ee?0:[];for(var Y=~~(N.apply(0,oe)/8),K=~~(N.apply(0,J)/8),G=[],ne=[],le={},ue=ee?0:[],Q=0;Q<Y+1;Q++){var he=ce.apply(0,oe.concat(Q/Y));G.push({x:he.x,y:he.y,t:Q/Y})}for(Q=0;Q<K+1;Q++)he=ce.apply(0,J.concat(Q/K)),ne.push({x:he.x,y:he.y,t:Q/K});for(Q=0;Q<Y;Q++)for(var Se=0;Se<K;Se++){var je=G[Q],Ae=G[Q+1],Ce=ne[Se],Re=ne[Se+1],Ee=Math.abs(Ae.x-je.x)<.001?"y":"x",Le=Math.abs(Re.x-Ce.x)<.001?"y":"x",Ke=L(je.x,je.y,Ae.x,Ae.y,Ce.x,Ce.y,Re.x,Re.y);if(Ke){if(le[Ke.x.toFixed(4)]===Ke.y.toFixed(4))continue;le[Ke.x.toFixed(4)]=Ke.y.toFixed(4);var et=je.t+Math.abs((Ke[Ee]-je[Ee])/(Ae[Ee]-je[Ee]))*(Ae.t-je.t),ot=Ce.t+Math.abs((Ke[Le]-Ce[Le])/(Re[Le]-Ce[Le]))*(Re.t-Ce.t);et>=0&&et<=1&&ot>=0&&ot<=1&&(ee?ue+=1:ue.push({x:Ke.x,y:Ke.y,t1:et,t2:ot}))}}return ue},ye=function(oe,J){return function(ee,Y,K){var G,ne,le,ue,Q,he,Se,je,Ae,Ce;ee=b(ee),Y=b(Y);for(var Re=K?0:[],Ee=0,Le=ee.length;Ee<Le;Ee++){var Ke=ee[Ee];if(Ke[0]==="M")G=Q=Ke[1],ne=he=Ke[2];else{Ke[0]==="C"?(Ae=[G,ne].concat(Ke.slice(1)),G=Ae[6],ne=Ae[7]):(Ae=[G,ne,G,ne,Q,he,Q,he],G=Q,ne=he);for(var et=0,ot=Y.length;et<ot;et++){var dt=Y[et];if(dt[0]==="M")le=Se=dt[1],ue=je=dt[2];else{dt[0]==="C"?(Ce=[le,ue].concat(dt.slice(1)),le=Ce[6],ue=Ce[7]):(Ce=[le,ue,le,ue,Se,je,Se,je],le=Se,ue=je);var At=xe(Ae,Ce,K);if(K)Re+=At;else{for(var Tt=0,jt=At.length;Tt<jt;Tt++)At[Tt].segment1=Ee,At[Tt].segment2=et,At[Tt].bez1=Ae,At[Tt].bez2=Ce;Re=Re.concat(At)}}}}}return Re}(oe,J)};function W(oe,J){var ee=[],Y=[];return oe.length&&function K(G,ne){if(G.length===1)ee.push(G[0]),Y.push(G[0]);else{for(var le=[],ue=0;ue<G.length-1;ue++)ue===0&&ee.push(G[0]),ue===G.length-2&&Y.push(G[ue+1]),le[ue]=[(1-ne)*G[ue][0]+ne*G[ue+1][0],(1-ne)*G[ue][1]+ne*G[ue+1][1]];K(le,ne)}}(oe,J),{left:ee,right:Y.reverse()}}var Ie=function(oe,J,ee){if(ee===1)return[[].concat(oe)];var Y=[];if(J[0]==="L"||J[0]==="C"||J[0]==="Q")Y=Y.concat(function(ne,le,ue){var Q=[[ne[1],ne[2]]];ue=ue||2;var he=[];le[0]==="A"?(Q.push(le[6]),Q.push(le[7])):le[0]==="C"?(Q.push([le[1],le[2]]),Q.push([le[3],le[4]]),Q.push([le[5],le[6]])):le[0]==="S"||le[0]==="Q"?(Q.push([le[1],le[2]]),Q.push([le[3],le[4]])):Q.push([le[1],le[2]]);for(var Se=Q,je=1/ue,Ae=0;Ae<ue-1;Ae++){var Ce=W(Se,je/(1-je*Ae));he.push(Ce.left),Se=Ce.right}return he.push(Se),he.map(function(Re){var Ee=[];return Re.length===4&&(Ee.push("C"),Ee=Ee.concat(Re[2])),Re.length>=3&&(Re.length===3&&Ee.push("Q"),Ee=Ee.concat(Re[1])),Re.length===2&&Ee.push("L"),Ee=Ee.concat(Re[Re.length-1])})}(oe,J,ee));else{var K=[].concat(oe);K[0]==="M"&&(K[0]="L");for(var G=0;G<=ee-1;G++)Y.push(K)}return Y},ge=function(oe,J){if(oe.length===1)return oe;var ee=oe.length-1,Y=J.length-1,K=ee/Y,G=[];if(oe.length===1&&oe[0][0]==="M"){for(var ne=0;ne<Y-ee;ne++)oe.push(oe[0]);return oe}for(ne=0;ne<Y;ne++){var le=Math.floor(K*ne);G[le]=(G[le]||0)+1}var ue=G.reduce(function(Q,he,Se){return Se===ee?Q.concat(oe[ee]):Q.concat(Ie(oe[Se],oe[Se+1],he))},[]);return ue.unshift(oe[0]),J[Y]!=="Z"&&J[Y]!=="z"||ue.push("Z"),ue},te=function(oe,J){if(oe.length!==J.length)return!1;var ee=!0;return Object(f.each)(oe,function(Y,K){if(Y!==J[K])return ee=!1,!1}),ee};function H(oe,J,ee){var Y=null,K=ee;return J<K&&(K=J,Y="add"),oe<K&&(K=oe,Y="del"),{type:Y,min:K}}var V=function(oe,J){var ee=function(je,Ae){var Ce,Re,Ee=je.length,Le=Ae.length,Ke=0;if(Ee===0||Le===0)return null;for(var et=[],ot=0;ot<=Ee;ot++)et[ot]=[],et[ot][0]={min:ot};for(var dt=0;dt<=Le;dt++)et[0][dt]={min:dt};for(ot=1;ot<=Ee;ot++)for(Ce=je[ot-1],dt=1;dt<=Le;dt++){Re=Ae[dt-1],Ke=te(Ce,Re)?0:1;var At=et[ot-1][dt].min+1,Tt=et[ot][dt-1].min+1,jt=et[ot-1][dt-1].min+Ke;et[ot][dt]=H(At,Tt,jt)}return et}(oe,J),Y=oe.length,K=J.length,G=[],ne=1,le=1;if(ee[Y][K].min!==Y){for(var ue=1;ue<=Y;ue++){var Q=ee[ue][ue].min;le=ue;for(var he=ne;he<=K;he++)ee[ue][he].min<Q&&(Q=ee[ue][he].min,le=he);ne=le,ee[ue][ne].type&&G.push({index:ue-1,type:ee[ue][ne].type})}for(ue=G.length-1;ue>=0;ue--)ne=G[ue].index,G[ue].type==="add"?oe.splice(ne,0,[].concat(oe[ne])):oe.splice(ne,1)}var Se=K-(Y=oe.length);if(Y<K)for(ue=0;ue<Se;ue++)oe[Y-1][0]==="z"||oe[Y-1][0]==="Z"?oe.splice(Y-2,0,oe[Y-2]):oe.push(oe[Y-1]),Y+=1;return oe};function ie(oe,J,ee){for(var Y,K=[].concat(oe),G=1/(ee+1),ne=we(J)[0],le=1;le<=ee;le++)G*=le,(Y=Math.floor(oe.length*G))===0?K.unshift([ne[0]*G+oe[Y][0]*(1-G),ne[1]*G+oe[Y][1]*(1-G)]):K.splice(Y,0,[ne[0]*G+oe[Y][0]*(1-G),ne[1]*G+oe[Y][1]*(1-G)]);return K}function we(oe){var J=[];switch(oe[0]){case"M":case"L":J.push([oe[1],oe[2]]);break;case"A":J.push([oe[6],oe[7]]);break;case"Q":J.push([oe[3],oe[4]]),J.push([oe[1],oe[2]]);break;case"T":J.push([oe[1],oe[2]]);break;case"C":J.push([oe[5],oe[6]]),J.push([oe[1],oe[2]]),J.push([oe[3],oe[4]]);break;case"S":J.push([oe[3],oe[4]]),J.push([oe[1],oe[2]]);break;case"H":case"V":J.push([oe[1],oe[1]])}return J}var ke=function(oe,J){if(oe.length<=1)return oe;for(var ee,Y=0;Y<J.length;Y++)if(oe[Y][0]!==J[Y][0])switch(ee=we(oe[Y]),J[Y][0]){case"M":oe[Y]=["M"].concat(ee[0]);break;case"L":oe[Y]=["L"].concat(ee[0]);break;case"A":oe[Y]=[].concat(J[Y]),oe[Y][6]=ee[0][0],oe[Y][7]=ee[0][1];break;case"Q":if(ee.length<2){if(!(Y>0)){oe[Y]=J[Y];break}ee=ie(ee,oe[Y-1],1)}oe[Y]=["Q"].concat(ee.reduce(function(K,G){return K.concat(G)},[]));break;case"T":oe[Y]=["T"].concat(ee[0]);break;case"C":if(ee.length<3){if(!(Y>0)){oe[Y]=J[Y];break}ee=ie(ee,oe[Y-1],2)}oe[Y]=["C"].concat(ee.reduce(function(K,G){return K.concat(G)},[]));break;case"S":if(ee.length<2){if(!(Y>0)){oe[Y]=J[Y];break}ee=ie(ee,oe[Y-1],1)}oe[Y]=["S"].concat(ee.reduce(function(K,G){return K.concat(G)},[]));break;default:oe[Y]=J[Y]}return oe}},function(D,m,o){var f=o(84),c=o(147);D.exports=function(M){return M!=null&&c(M.length)&&!f(M)}},function(D,m,o){function f(S){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}var c=o(363),M=o(373),_=o(65),x=o(31),O=o(380);D.exports=function(S){return typeof S=="function"?S:S==null?_:f(S)=="object"?x(S)?M(S[0],S[1]):c(S):O(S)}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.TargetTypeEnum=m.BindingTypeEnum=m.BindingScopeEnum=void 0,m.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"},m.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},m.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(D,m,o){"use strict";o.r(m),o.d(m,"Base",function(){return S}),o.d(m,"Circle",function(){return g}),o.d(m,"Ellipse",function(){return y}),o.d(m,"Image",function(){return b}),o.d(m,"Line",function(){return N}),o.d(m,"Marker",function(){return X}),o.d(m,"Path",function(){return V}),o.d(m,"Polygon",function(){return we}),o.d(m,"Polyline",function(){return ke}),o.d(m,"Rect",function(){return J}),o.d(m,"Text",function(){return ee});var f={};o.r(f),o.d(f,"Base",function(){return S}),o.d(f,"Circle",function(){return g}),o.d(f,"Ellipse",function(){return y}),o.d(f,"Image",function(){return b}),o.d(f,"Line",function(){return N}),o.d(f,"Marker",function(){return X}),o.d(f,"Path",function(){return V}),o.d(f,"Polygon",function(){return we}),o.d(f,"Polyline",function(){return ke}),o.d(f,"Rect",function(){return J}),o.d(f,"Text",function(){return ee});var c=o(1),M=o(21),_=o(15),x=o(30),O=o(75),S=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},K.prototype.getShapeBase=function(){return f},K.prototype.getGroupBase=function(){return O.a},K.prototype.onCanvasChange=function(G){Object(x.h)(this,G)},K.prototype.calculateBBox=function(){var G=this.get("type"),ne=this.getHitLineWidth(),le=Object(M.getBBoxMethod)(G)(this),ue=ne/2,Q=le.x-ue,he=le.y-ue,Se=le.x+le.width+ue,je=le.y+le.height+ue;return{x:Q,minX:Q,y:he,minY:he,width:le.width+ne,height:le.height+ne,maxX:Se,maxY:je}},K.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},K.prototype.isStroke=function(){return!!this.attrs.stroke},K.prototype._applyClip=function(G,ne){ne&&(G.save(),Object(x.a)(G,ne),ne.createPath(G),G.restore(),G.clip(),ne._afterDraw())},K.prototype.draw=function(G,ne){var le=this.cfg.clipShape;if(ne){if(this.cfg.refresh===!1)return void this.set("hasChanged",!1);var ue=this.getCanvasBBox();if(!Object(_.f)(ne,ue))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}G.save(),Object(x.a)(G,this),this._applyClip(G,le),this.drawPath(G),G.restore(),this._afterDraw()},K.prototype.getCanvasViewBox=function(){var G=this.cfg.canvas;return G?G.getViewRange():null},K.prototype.cacheCanvasBBox=function(){var G=this.getCanvasViewBox();if(G){var ne=this.getCanvasBBox(),le=Object(_.f)(ne,G);this.set("isInView",le),le?this.set("cacheCanvasBBox",ne):this.set("cacheCanvasBBox",null)}},K.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},K.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},K.prototype.drawPath=function(G){this.createPath(G),this.strokeAndFill(G),this.afterDrawPath(G)},K.prototype.fill=function(G){G.fill()},K.prototype.stroke=function(G){G.stroke()},K.prototype.strokeAndFill=function(G){var ne=this.attrs,le=ne.lineWidth,ue=ne.opacity,Q=ne.strokeOpacity,he=ne.fillOpacity;this.isFill()&&(Object(_.i)(he)||he===1?this.fill(G):(G.globalAlpha=he,this.fill(G),G.globalAlpha=ue)),this.isStroke()&&le>0&&(Object(_.i)(Q)||Q===1||(G.globalAlpha=Q),this.stroke(G)),this.afterDrawPath(G)},K.prototype.createPath=function(G){},K.prototype.afterDrawPath=function(G){},K.prototype.isInShape=function(G,ne){var le=this.isStroke(),ue=this.isFill(),Q=this.getHitLineWidth();return this.isInStrokeOrPath(G,ne,le,ue,Q)},K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){return!1},K.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var G=this.attrs;return G.lineWidth+G.lineAppendWidth},K}(M.AbstractShape),g=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{x:0,y:0,r:0})},K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){var he=this.attr(),Se=he.x,je=he.y,Ae=he.r,Ce=Q/2,Re=Object(_.b)(Se,je,G,ne);return ue&&le?Re<=Ae+Ce:ue?Re<=Ae:!!le&&Re>=Ae-Ce&&Re<=Ae+Ce},K.prototype.createPath=function(G){var ne=this.attr(),le=ne.x,ue=ne.y,Q=ne.r;G.beginPath(),G.arc(le,ue,Q,0,2*Math.PI,!1),G.closePath()},K}(S);function d(Y,K,G,ne){return Y/(G*G)+K/(ne*ne)}var y=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{x:0,y:0,rx:0,ry:0})},K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){var he=this.attr(),Se=Q/2,je=he.x,Ae=he.y,Ce=he.rx,Re=he.ry,Ee=(G-je)*(G-je),Le=(ne-Ae)*(ne-Ae);return ue&&le?d(Ee,Le,Ce+Se,Re+Se)<=1:ue?d(Ee,Le,Ce,Re)<=1:!!le&&d(Ee,Le,Ce-Se,Re-Se)>=1&&d(Ee,Le,Ce+Se,Re+Se)<=1},K.prototype.createPath=function(G){var ne=this.attr(),le=ne.x,ue=ne.y,Q=ne.rx,he=ne.ry;if(G.beginPath(),G.ellipse)G.ellipse(le,ue,Q,he,0,0,2*Math.PI,!1);else{var Se=Q>he?Q:he,je=Q>he?1:Q/he,Ae=Q>he?he/Q:1;G.save(),G.translate(le,ue),G.scale(je,Ae),G.arc(0,0,Se,0,2*Math.PI),G.restore(),G.closePath()}},K}(S);function E(Y){return Y instanceof HTMLElement&&Object(_.k)(Y.nodeName)&&Y.nodeName.toUpperCase()==="CANVAS"}var b=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{x:0,y:0,width:0,height:0})},K.prototype.initAttrs=function(G){this._setImage(G.img)},K.prototype.isStroke=function(){return!1},K.prototype.isOnlyHitBox=function(){return!0},K.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var G=this.get("canvas");G?G.draw():this.createPath(this.get("context"))}},K.prototype._setImage=function(G){var ne=this,le=this.attrs;if(Object(_.k)(G)){var ue=new Image;ue.onload=function(){if(ne.destroyed)return!1;ne.attr("img",ue),ne.set("loading",!1),ne._afterLoading();var Q=ne.get("callback");Q&&Q.call(ne)},ue.crossOrigin="Anonymous",ue.src=G,this.set("loading",!0)}else G instanceof Image?(le.width||(le.width=G.width),le.height||(le.height=G.height)):E(G)&&(le.width||(le.width=Number(G.getAttribute("width"))),le.height||(le.height,Number(G.getAttribute("height"))))},K.prototype.onAttrChange=function(G,ne,le){Y.prototype.onAttrChange.call(this,G,ne,le),G==="img"&&this._setImage(ne)},K.prototype.createPath=function(G){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",G);var ne=this.attr(),le=ne.x,ue=ne.y,Q=ne.width,he=ne.height,Se=ne.sx,je=ne.sy,Ae=ne.swidth,Ce=ne.sheight,Re=ne.img;(Re instanceof Image||E(Re))&&(Object(_.i)(Se)||Object(_.i)(je)||Object(_.i)(Ae)||Object(_.i)(Ce)?G.drawImage(Re,le,ue,Q,he):G.drawImage(Re,Se,je,Ae,Ce,le,ue,Q,he))},K}(S),p=o(20);function A(Y,K,G,ne,le,ue,Q){var he=Math.min(Y,G),Se=Math.max(Y,G),je=Math.min(K,ne),Ae=Math.max(K,ne),Ce=le/2;return ue>=he-Ce&&ue<=Se+Ce&&Q>=je-Ce&&Q<=Ae+Ce&&p.c.pointToLine(Y,K,G,ne,ue,Q)<=le/2}var C=o(33),N=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},K.prototype.initAttrs=function(G){this.setArrow()},K.prototype.onAttrChange=function(G,ne,le){Y.prototype.onAttrChange.call(this,G,ne,le),this.setArrow()},K.prototype.setArrow=function(){var G=this.attr(),ne=G.x1,le=G.y1,ue=G.x2,Q=G.y2,he=G.startArrow,Se=G.endArrow;he&&C.b(this,G,ue,Q,ne,le),Se&&C.a(this,G,ne,le,ue,Q)},K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){if(!le||!Q)return!1;var he=this.attr();return A(he.x1,he.y1,he.x2,he.y2,Q,G,ne)},K.prototype.createPath=function(G){var ne=this.attr(),le=ne.x1,ue=ne.y1,Q=ne.x2,he=ne.y2,Se=ne.startArrow,je=ne.endArrow,Ae={dx:0,dy:0},Ce={dx:0,dy:0};Se&&Se.d&&(Ae=C.c(le,ue,Q,he,ne.startArrow.d)),je&&je.d&&(Ce=C.c(le,ue,Q,he,ne.endArrow.d)),G.beginPath(),G.moveTo(le+Ae.dx,ue+Ae.dy),G.lineTo(Q-Ce.dx,he-Ce.dy)},K.prototype.afterDrawPath=function(G){var ne=this.get("startArrowShape"),le=this.get("endArrowShape");ne&&ne.draw(G),le&&le.draw(G)},K.prototype.getTotalLength=function(){var G=this.attr(),ne=G.x1,le=G.y1,ue=G.x2,Q=G.y2;return p.c.length(ne,le,ue,Q)},K.prototype.getPoint=function(G){var ne=this.attr(),le=ne.x1,ue=ne.y1,Q=ne.x2,he=ne.y2;return p.c.pointAt(le,ue,Q,he,G)},K}(S),P=o(0),L=o(37),z={circle:function(Y,K,G){return[["M",Y-G,K],["A",G,G,0,1,0,Y+G,K],["A",G,G,0,1,0,Y-G,K]]},square:function(Y,K,G){return[["M",Y-G,K-G],["L",Y+G,K-G],["L",Y+G,K+G],["L",Y-G,K+G],["Z"]]},diamond:function(Y,K,G){return[["M",Y-G,K],["L",Y,K-G],["L",Y+G,K],["L",Y,K+G],["Z"]]},triangle:function(Y,K,G){var ne=G*Math.sin(.3333333333333333*Math.PI);return[["M",Y-G,K+ne],["L",Y,K-ne],["L",Y+G,K+ne],["Z"]]},"triangle-down":function(Y,K,G){var ne=G*Math.sin(.3333333333333333*Math.PI);return[["M",Y-G,K-ne],["L",Y+G,K-ne],["L",Y,K+ne],["Z"]]}},X=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.initAttrs=function(G){this._resetParamsCache()},K.prototype._resetParamsCache=function(){this.set("paramsCache",{})},K.prototype.onAttrChange=function(G,ne,le){Y.prototype.onAttrChange.call(this,G,ne,le),["symbol","x","y","r","radius"].indexOf(G)!==-1&&this._resetParamsCache()},K.prototype.isOnlyHitBox=function(){return!0},K.prototype._getR=function(G){return Object(P.isNil)(G.r)?G.radius:G.r},K.prototype._getPath=function(){var G,ne,le=this.attr(),ue=le.x,Q=le.y,he=le.symbol||"circle",Se=this._getR(le);if(Object(_.h)(he))ne=(G=he)(ue,Q,Se),ne=Object(L.c)(ne);else{if(!(G=K.Symbols[he]))return console.warn(he+" marker is not supported."),null;ne=G(ue,Q,Se)}return ne},K.prototype.createPath=function(G){var ne=this._getPath(),le=this.get("paramsCache");Object(x.e)(this,G,{path:ne},le)},K.Symbols=z,K}(S);function re(Y,K,G){var ne=Object(M.getOffScreenContext)();return Y.createPath(ne),ne.isPointInPath(K,G)}function se(Y){return Math.abs(Y)<1e-6?0:Y<0?-1:1}function ce(Y,K,G){return(G[0]-Y[0])*(K[1]-Y[1])==(K[0]-Y[0])*(G[1]-Y[1])&&Math.min(Y[0],K[0])<=G[0]&&G[0]<=Math.max(Y[0],K[0])&&Math.min(Y[1],K[1])<=G[1]&&G[1]<=Math.max(Y[1],K[1])}function xe(Y,K,G){var ne=!1,le=Y.length;if(le<=2)return!1;for(var ue=0;ue<le;ue++){var Q=Y[ue],he=Y[(ue+1)%le];if(ce(Q,he,[K,G]))return!0;se(Q[1]-G)>0!=se(he[1]-G)>0&&se(K-(G-Q[1])*(Q[0]-he[0])/(Q[1]-he[1])-Q[0])<0&&(ne=!ne)}return ne}var ye=o(17),W=o(39);function Ie(Y,K,G,ne,le,ue,Q,he){var Se=(Math.atan2(he-K,Q-Y)+2*Math.PI)%(2*Math.PI);if(Se<ne||Se>le)return!1;var je={x:Y+G*Math.cos(Se),y:K+G*Math.sin(Se)};return Object(_.b)(je.x,je.y,Q,he)<=ue/2}var ge=ye.a.transform,te=Object(c.__assign)({hasArc:function(Y){for(var K=!1,G=Y.length,ne=0;ne<G;ne++){var le=Y[ne][0];if(le==="C"||le==="A"||le==="Q"){K=!0;break}}return K},extractPolygons:function(Y){for(var K=Y.length,G=[],ne=[],le=[],ue=0;ue<K;ue++){var Q=Y[ue],he=Q[0];he==="M"?(le.length&&(ne.push(le),le=[]),le.push([Q[1],Q[2]])):he==="Z"?le.length&&(G.push(le),le=[]):le.push([Q[1],Q[2]])}return le.length>0&&ne.push(le),{polygons:G,polylines:ne}},isPointInStroke:function(Y,K,G,ne,le){for(var ue=!1,Q=K/2,he=0;he<Y.length;he++){var Se=Y[he],je=Se.currentPoint,Ae=Se.params,Ce=Se.prePoint,Re=Se.box;if(!Re||Object(_.e)(Re.x-Q,Re.y-Q,Re.width+K,Re.height+K,G,ne)){switch(Se.command){case"L":case"Z":ue=A(Ce[0],Ce[1],je[0],je[1],K,G,ne);break;case"Q":ue=p.e.pointDistance(Ce[0],Ce[1],Ae[1],Ae[2],Ae[3],Ae[4],G,ne)<=K/2;break;case"C":ue=p.b.pointDistance(Ce[0],Ce[1],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],Ae[6],G,ne,le)<=K/2;break;case"A":var Ee=Se.arcParams,Le=Ee.cx,Ke=Ee.cy,et=Ee.rx,ot=Ee.ry,dt=Ee.startAngle,At=Ee.endAngle,Tt=Ee.xRotation,jt=[G,ne,1],Kt=et>ot?et:ot,Qt=ge(null,[["t",-Le,-Ke],["r",-Tt],["s",1/(et>ot?1:et/ot),1/(et>ot?ot/et:1)]]);W.transformMat3(jt,jt,Qt),ue=Ie(0,0,Kt,dt,At,K,jt[0],jt[1])}if(ue)break}}return ue}},M.PathUtil);function H(Y,K,G){for(var ne=!1,le=0;le<Y.length&&!(ne=xe(Y[le],K,G));le++);return ne}var V=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{startArrow:!1,endArrow:!1})},K.prototype.initAttrs=function(G){this._setPathArr(G.path),this.setArrow()},K.prototype.onAttrChange=function(G,ne,le){Y.prototype.onAttrChange.call(this,G,ne,le),G==="path"&&this._setPathArr(ne),this.setArrow()},K.prototype._setPathArr=function(G){this.attrs.path=Object(L.c)(G);var ne=te.hasArc(G);this.set("hasArc",ne),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},K.prototype.getSegments=function(){var G=this.get("segements");return G||(G=Object(L.d)(this.attr("path")),this.set("segments",G)),G},K.prototype.setArrow=function(){var G=this.attr(),ne=G.startArrow,le=G.endArrow;if(ne){var ue=this.getStartTangent();C.b(this,G,ue[0][0],ue[0][1],ue[1][0],ue[1][1])}le&&(ue=this.getEndTangent(),C.a(this,G,ue[0][0],ue[0][1],ue[1][0],ue[1][1]))},K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){var he=this.getSegments(),Se=this.get("hasArc"),je=!1;if(le){var Ae=this.getTotalLength();je=te.isPointInStroke(he,Q,G,ne,Ae)}if(!je&&ue)if(Se)je=re(this,G,ne);else{var Ce=this.attr("path"),Re=te.extractPolygons(Ce);je=H(Re.polygons,G,ne)||H(Re.polylines,G,ne)}return je},K.prototype.createPath=function(G){var ne=this.attr(),le=this.get("paramsCache");Object(x.e)(this,G,ne,le)},K.prototype.afterDrawPath=function(G){var ne=this.get("startArrowShape"),le=this.get("endArrowShape");ne&&ne.draw(G),le&&le.draw(G)},K.prototype.getTotalLength=function(){var G=this.get("totalLength");return Object(P.isNil)(G)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):G},K.prototype.getPoint=function(G){var ne,le,ue=this.get("tCache");ue||(this._calculateCurve(),this._setTcache(),ue=this.get("tCache"));var Q=this.get("curve");if(!ue||ue.length===0)return Q?{x:Q[0][1],y:Q[0][2]}:null;Object(P.each)(ue,function(Ae,Ce){G>=Ae[0]&&G<=Ae[1]&&(ne=(G-Ae[0])/(Ae[1]-Ae[0]),le=Ce)});var he=Q[le];if(Object(P.isNil)(he)||Object(P.isNil)(le))return null;var Se=he.length,je=Q[le+1];return p.b.pointAt(he[Se-2],he[Se-1],je[1],je[2],je[3],je[4],je[5],je[6],ne)},K.prototype._calculateCurve=function(){var G=this.attr().path;this.set("curve",te.pathToCurve(G))},K.prototype._setTcache=function(){var G,ne,le,ue,Q=0,he=0,Se=[],je=this.get("curve");je&&(Object(P.each)(je,function(Ae,Ce){le=je[Ce+1],ue=Ae.length,le&&(Q+=p.b.length(Ae[ue-2],Ae[ue-1],le[1],le[2],le[3],le[4],le[5],le[6])||0)}),this.set("totalLength",Q),Q!==0?(Object(P.each)(je,function(Ae,Ce){le=je[Ce+1],ue=Ae.length,le&&((G=[])[0]=he/Q,ne=p.b.length(Ae[ue-2],Ae[ue-1],le[1],le[2],le[3],le[4],le[5],le[6]),he+=ne||0,G[1]=he/Q,Se.push(G))}),this.set("tCache",Se)):this.set("tCache",[]))},K.prototype.getStartTangent=function(){var G,ne=this.getSegments();if(ne.length>1){var le=ne[0].currentPoint,ue=ne[1].currentPoint,Q=ne[1].startTangent;G=[],Q?(G.push([le[0]-Q[0],le[1]-Q[1]]),G.push([le[0],le[1]])):(G.push([ue[0],ue[1]]),G.push([le[0],le[1]]))}return G},K.prototype.getEndTangent=function(){var G,ne=this.getSegments(),le=ne.length;if(le>1){var ue=ne[le-2].currentPoint,Q=ne[le-1].currentPoint,he=ne[le-1].endTangent;G=[],he?(G.push([Q[0]-he[0],Q[1]-he[1]]),G.push([Q[0],Q[1]])):(G.push([ue[0],ue[1]]),G.push([Q[0],Q[1]]))}return G},K}(S);function ie(Y,K,G,ne,le){var ue=Y.length;if(ue<2)return!1;for(var Q=0;Q<ue-1;Q++)if(A(Y[Q][0],Y[Q][1],Y[Q+1][0],Y[Q+1][1],K,G,ne))return!0;if(le){var he=Y[0],Se=Y[ue-1];if(A(he[0],he[1],Se[0],Se[1],K,G,ne))return!0}return!1}var we=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){var he=this.attr().points,Se=!1;return le&&(Se=ie(he,Q,G,ne,!0)),!Se&&ue&&(Se=xe(he,G,ne)),Se},K.prototype.createPath=function(G){var ne=this.attr().points;if(!(ne.length<2)){G.beginPath();for(var le=0;le<ne.length;le++){var ue=ne[le];le===0?G.moveTo(ue[0],ue[1]):G.lineTo(ue[0],ue[1])}G.closePath()}},K}(S),ke=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{startArrow:!1,endArrow:!1})},K.prototype.initAttrs=function(G){this.setArrow()},K.prototype.onAttrChange=function(G,ne,le){Y.prototype.onAttrChange.call(this,G,ne,le),this.setArrow(),["points"].indexOf(G)!==-1&&this._resetCache()},K.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},K.prototype.setArrow=function(){var G=this.attr(),ne=this.attrs,le=ne.points,ue=ne.startArrow,Q=ne.endArrow,he=le.length,Se=le[0][0],je=le[0][1],Ae=le[he-1][0],Ce=le[he-1][1];ue&&C.b(this,G,le[1][0],le[1][1],Se,je),Q&&C.a(this,G,le[he-2][0],le[he-2][1],Ae,Ce)},K.prototype.isFill=function(){return!1},K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){return!(!le||!Q)&&ie(this.attr().points,Q,G,ne,!1)},K.prototype.isStroke=function(){return!0},K.prototype.createPath=function(G){var ne=this.attr(),le=ne.points,ue=ne.startArrow,Q=ne.endArrow,he=le.length;if(!(le.length<2)){var Se,je=le[0][0],Ae=le[0][1],Ce=le[he-1][0],Re=le[he-1][1];ue&&ue.d&&(je+=(Se=C.c(je,Ae,le[1][0],le[1][1],ue.d)).dx,Ae+=Se.dy),Q&&Q.d&&(Ce-=(Se=C.c(le[he-2][0],le[he-2][1],Ce,Re,Q.d)).dx,Re-=Se.dy),G.beginPath(),G.moveTo(je,Ae);for(var Ee=0;Ee<he-1;Ee++){var Le=le[Ee];G.lineTo(Le[0],Le[1])}G.lineTo(Ce,Re)}},K.prototype.afterDrawPath=function(G){var ne=this.get("startArrowShape"),le=this.get("endArrowShape");ne&&ne.draw(G),le&&le.draw(G)},K.prototype.getTotalLength=function(){var G=this.attr().points,ne=this.get("totalLength");return Object(P.isNil)(ne)?(this.set("totalLength",p.d.length(G)),this.get("totalLength")):ne},K.prototype.getPoint=function(G){var ne,le,ue=this.attr().points,Q=this.get("tCache");return Q||(this._setTcache(),Q=this.get("tCache")),Object(P.each)(Q,function(he,Se){G>=he[0]&&G<=he[1]&&(ne=(G-he[0])/(he[1]-he[0]),le=Se)}),p.c.pointAt(ue[le][0],ue[le][1],ue[le+1][0],ue[le+1][1],ne)},K.prototype._setTcache=function(){var G=this.attr().points;if(G&&G.length!==0){var ne=this.getTotalLength();if(!(ne<=0)){var le,ue,Q=0,he=[];Object(P.each)(G,function(Se,je){G[je+1]&&((le=[])[0]=Q/ne,ue=p.c.length(Se[0],Se[1],G[je+1][0],G[je+1][1]),Q+=ue,le[1]=Q/ne,he.push(le))}),this.set("tCache",he)}}},K.prototype.getStartTangent=function(){var G=this.attr().points,ne=[];return ne.push([G[1][0],G[1][1]]),ne.push([G[0][0],G[0][1]]),ne},K.prototype.getEndTangent=function(){var G=this.attr().points,ne=G.length-1,le=[];return le.push([G[ne-1][0],G[ne-1][1]]),le.push([G[ne][0],G[ne][1]]),le},K}(S),oe=o(139),J=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{x:0,y:0,width:0,height:0,radius:0})},K.prototype.isInStrokeOrPath=function(G,ne,le,ue,Q){var he=this.attr(),Se=he.x,je=he.y,Ae=he.width,Ce=he.height,Re=he.radius;if(Re){var Ee=!1;return le&&(Ee=function(Ke,et,ot,dt,At,Tt,jt,Kt){return A(Ke+At,et,Ke+ot-At,et,Tt,jt,Kt)||A(Ke+ot,et+At,Ke+ot,et+dt-At,Tt,jt,Kt)||A(Ke+ot-At,et+dt,Ke+At,et+dt,Tt,jt,Kt)||A(Ke,et+dt-At,Ke,et+At,Tt,jt,Kt)||Ie(Ke+ot-At,et+At,At,1.5*Math.PI,2*Math.PI,Tt,jt,Kt)||Ie(Ke+ot-At,et+dt-At,At,0,.5*Math.PI,Tt,jt,Kt)||Ie(Ke+At,et+dt-At,At,.5*Math.PI,Math.PI,Tt,jt,Kt)||Ie(Ke+At,et+At,At,Math.PI,1.5*Math.PI,Tt,jt,Kt)}(Se,je,Ae,Ce,Re,Q,G,ne)),!Ee&&ue&&(Ee=re(this,G,ne)),Ee}var Le=Q/2;return ue&&le?Object(_.e)(Se-Le,je-Le,Ae+Le,Ce+Le,G,ne):ue?Object(_.e)(Se,je,Ae,Ce,G,ne):le?function(Ke,et,ot,dt,At,Tt,jt){var Kt=At/2;return Object(_.e)(Ke-Kt,et-Kt,ot,At,Tt,jt)||Object(_.e)(Ke+ot-Kt,et-Kt,At,dt,Tt,jt)||Object(_.e)(Ke+Kt,et+dt-Kt,ot,At,Tt,jt)||Object(_.e)(Ke-Kt,et+Kt,At,dt,Tt,jt)}(Se,je,Ae,Ce,Q,G,ne):void 0},K.prototype.createPath=function(G){var ne=this.attr(),le=ne.x,ue=ne.y,Q=ne.width,he=ne.height,Se=ne.radius;if(G.beginPath(),Se===0)G.rect(le,ue,Q,he);else{var je=Object(oe.a)(Se),Ae=je[0],Ce=je[1],Re=je[2],Ee=je[3];G.moveTo(le+Ae,ue),G.lineTo(le+Q-Ce,ue),Ce!==0&&G.arc(le+Q-Ce,ue+Ce,Ce,-Math.PI/2,0),G.lineTo(le+Q,ue+he-Re),Re!==0&&G.arc(le+Q-Re,ue+he-Re,Re,0,Math.PI/2),G.lineTo(le+Ee,ue+he),Ee!==0&&G.arc(le+Ee,ue+he-Ee,Ee,Math.PI/2,Math.PI),G.lineTo(le,ue+Ae),Ae!==0&&G.arc(le+Ae,ue+Ae,Ae,Math.PI,1.5*Math.PI),G.closePath()}},K}(S),ee=function(Y){function K(){return Y!==null&&Y.apply(this,arguments)||this}return Object(c.__extends)(K,Y),K.prototype.getDefaultAttrs=function(){var G=Y.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},G),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},K.prototype.isOnlyHitBox=function(){return!0},K.prototype.initAttrs=function(G){this._assembleFont(),G.text&&this._setText(G.text)},K.prototype._assembleFont=function(){var G=this.attrs;G.font=Object(M.assembleFont)(G)},K.prototype._setText=function(G){var ne=null;Object(_.k)(G)&&G.indexOf(`
`)!==-1&&(ne=G.split(`
`)),this.set("textArr",ne)},K.prototype.onAttrChange=function(G,ne,le){Y.prototype.onAttrChange.call(this,G,ne,le),G.startsWith("font")&&this._assembleFont(),G==="text"&&this._setText(ne)},K.prototype._getSpaceingY=function(){var G=this.attrs,ne=G.lineHeight,le=1*G.fontSize;return ne?ne-le:.14*le},K.prototype._drawTextArr=function(G,ne,le){var ue,Q=this.attrs,he=Q.textBaseline,Se=Q.x,je=Q.y,Ae=1*Q.fontSize,Ce=this._getSpaceingY(),Re=Object(M.getTextHeight)(Q.text,Q.fontSize,Q.lineHeight);Object(_.c)(ne,function(Ee,Le){ue=je+Le*(Ce+Ae)-Re+Ae,he==="middle"&&(ue+=Re-Ae-(Re-Ae)/2),he==="top"&&(ue+=Re-Ae),Object(_.i)(Ee)||(le?G.fillText(Ee,Se,ue):G.strokeText(Ee,Se,ue))})},K.prototype._drawText=function(G,ne){var le=this.attr(),ue=le.x,Q=le.y,he=this.get("textArr");if(he)this._drawTextArr(G,he,ne);else{var Se=le.text;Object(_.i)(Se)||(ne?G.fillText(Se,ue,Q):G.strokeText(Se,ue,Q))}},K.prototype.strokeAndFill=function(G){var ne=this.attrs,le=ne.lineWidth,ue=ne.opacity,Q=ne.strokeOpacity,he=ne.fillOpacity;this.isStroke()&&le>0&&(Object(_.i)(Q)||Q===1||(G.globalAlpha=ue),this.stroke(G)),this.isFill()&&(Object(_.i)(he)||he===1?this.fill(G):(G.globalAlpha=he,this.fill(G),G.globalAlpha=ue)),this.afterDrawPath(G)},K.prototype.fill=function(G){this._drawText(G,!0)},K.prototype.stroke=function(G){this._drawText(G,!1)},K}(S)},function(D,m,o){"use strict";o.d(m,"b",function(){return f}),o.d(m,"a",function(){return y});var f,c=o(59),M=o.n(c),_=o(6),x=o.n(_),O=o(7),S=o.n(O),g=o(2),d=o(125);(function(E){E[E.OUTSIDE=4294967295]="OUTSIDE",E[E.INSIDE=0]="INSIDE",E[E.INDETERMINATE=2147483647]="INDETERMINATE"})(f||(f={}));var y=function(){function E(b){if(x()(this,E),this.planes=[],b)this.planes=b;else for(var p=0;p<6;p++)this.planes.push(new d.a)}return S()(E,[{key:"extractFromVPMatrix",value:function(b){var p=M()(b,16),A=p[0],C=p[1],N=p[2],P=p[3],L=p[4],z=p[5],X=p[6],re=p[7],se=p[8],ce=p[9],xe=p[10],ye=p[11],W=p[12],Ie=p[13],ge=p[14],te=p[15];g.e.set(this.planes[0].normal,P-A,re-L,ye-se),this.planes[0].distance=-(te-W),g.e.set(this.planes[1].normal,P+A,re+L,ye+se),this.planes[1].distance=-(te+W),g.e.set(this.planes[2].normal,P+C,re+z,ye+ce),this.planes[2].distance=-(te+Ie),g.e.set(this.planes[3].normal,P-C,re-z,ye-ce),this.planes[3].distance=-(te-Ie),g.e.set(this.planes[4].normal,P-N,re-X,ye-xe),this.planes[4].distance=-(te-ge),g.e.set(this.planes[5].normal,P+N,re+X,ye+xe),this.planes[5].distance=-(te+ge),this.planes.forEach(function(H){H.normalize(),H.updatePNVertexFlag()})}}]),E}()},function(D,m,o){var f=o(179),c=o(149),M=o(52);D.exports=function(_){return M(_)?f(_):c(_)}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.tagProperty=m.tagParameter=m.decorate=void 0;var f=o(40),c=o(32);function M(O,S,g,d,y){var E={},b=typeof y=="number",p=y!==void 0&&b?y.toString():g;if(b&&g!==void 0)throw new Error(f.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(O,S)&&(E=Reflect.getMetadata(O,S));var A=E[p];if(Array.isArray(A))for(var C=0,N=A;C<N.length;C++){var P=N[C];if(P.key===d.key)throw new Error(f.DUPLICATED_METADATA+" "+P.key.toString())}else A=[];A.push(d),E[p]=A,Reflect.defineMetadata(O,E,S)}function _(O,S){Reflect.decorate(O,S)}function x(O,S){return function(g,d){S(g,d,O)}}m.tagParameter=function(O,S,g,d){M(c.TAGGED,O,S,d,g)},m.tagProperty=function(O,S,g){M(c.TAGGED_PROP,O.constructor,S,g)},m.decorate=function(O,S,g){typeof g=="number"?_([x(g,O)],S):typeof g=="string"?Reflect.decorate([O],S,g):_([O],S)}},function(D,m,o){var f=o(482),c=o(483),M=o(229),_=o(484);D.exports=function(x,O){return f(x)||c(x,O)||M(x,O)||_()},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";o(78),o(21);var f=o(266);o.d(m,"Canvas",function(){return f.a}),o(76)},function(D,m,o){var f=o(255),c=o(254),M=o(262),_=o(162),x=o(263),O=[0,0];D.exports.computeMiter=function(S,g,d,y,E){return f(S,d,y),M(S,S),c(g,-S[1],S[0]),c(O,-d[1],d[0]),E/x(g,O)},D.exports.normal=function(S,g){return c(S,-g[1],g[0]),S},D.exports.direction=function(S,g,d){return _(S,g,d),M(S,S),S}},function(D,m,o){var f=o(318),c=o(323);D.exports=function(M,_){var x=c(M,_);return f(x)?x:void 0}},function(D,m,o){var f=o(71),c=o(319),M=o(320),_=f?f.toStringTag:void 0;D.exports=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":_&&_ in Object(x)?c(x):M(x)}},function(D,m,o){var f=o(179),c=o(343),M=o(52);D.exports=function(_){return M(_)?f(_,!0):c(_)}},function(D,m){D.exports=function(o){return o}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.id=void 0;var f=0;m.id=function(){return f++}},function(D,m,o){"use strict";o.d(m,"b",function(){return M}),o.d(m,"c",function(){return _}),o.d(m,"a",function(){return x});var f=o(19),c=o(117);function M(O,S,g){var d=1;return Object(f.h)(O)&&(d=O.split(`
`).length),d>1?S*d+function(y,E){return E?E-y:.14*y}(S,g)*(d-1):S}function _(O,S){var g=Object(c.a)(),d=0;if(Object(f.e)(O)||O==="")return d;if(g.save(),g.font=S,Object(f.h)(O)&&O.includes(`
`)){var y=O.split(`
`);Object(f.a)(y,function(E){var b=g.measureText(E).width;d<b&&(d=b)})}else d=g.measureText(O).width;return g.restore(),d}function x(O){var S=O.fontSize,g=O.fontFamily,d=O.fontWeight;return[O.fontStyle,O.fontVariant,d,S+"px",g].join(" ").trim()}},function(D,m,o){"use strict";o.d(m,"a",function(){return ke});var f,c,M,_,x,O,S,g,d,y,E,b,p,A=o(9),C=o.n(A),N=o(14),P=o.n(N),L=o(10),z=o.n(L),X=o(6),re=o.n(X),se=o(7),ce=o.n(se),xe=o(11),ye=o.n(xe),W=(o(29),o(5)),Ie=o(13),ge=o(140),te=o(50);function H(oe,J){var ee;if(typeof Symbol=="undefined"||oe[Symbol.iterator]==null){if(Array.isArray(oe)||(ee=function(ue,Q){if(!!ue){if(typeof ue=="string")return V(ue,Q);var he=Object.prototype.toString.call(ue).slice(8,-1);if(he==="Object"&&ue.constructor&&(he=ue.constructor.name),he==="Map"||he==="Set")return Array.from(ue);if(he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he))return V(ue,Q)}}(oe))||J&&oe&&typeof oe.length=="number"){ee&&(oe=ee);var Y=0,K=function(){};return{s:K,n:function(){return Y>=oe.length?{done:!0}:{done:!1,value:oe[Y++]}},e:function(ue){throw ue},f:K}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G,ne=!0,le=!1;return{s:function(){ee=oe[Symbol.iterator]()},n:function(){var ue=ee.next();return ne=ue.done,ue},e:function(ue){le=!0,G=ue},f:function(){try{ne||ee.return==null||ee.return()}finally{if(le)throw G}}}}function V(oe,J){(J==null||J>oe.length)&&(J=oe.length);for(var ee=0,Y=new Array(J);ee<J;ee++)Y[ee]=oe[ee];return Y}var ie=1,we=2,ke=(f=Object(W.injectable)(),c=Object(W.inject)(Ie.a.RenderEngine),M=Object(W.inject)(Ie.a.ResourcePool),_=Object(W.inject)(Ie.a.RenderPassFactory),x=Object(W.inject)(Ie.a.MeshComponentManager),f((p=b=function(){function oe(){var J=this;re()(this,oe),z()(this,"engine",g,this),z()(this,"resourcePool",d,this),z()(this,"renderPassFactory",y,this),z()(this,"mesh",E,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(ee,Y,K){var G=ee.createRenderTarget(Y,"picking fbo",{width:1,height:1});K.data={output:Y.write(ee,G)},Y.hasSideEffect=!0},this.execute=function(){var ee=P()(C.a.mark(function Y(K,G,ne){var le,ue,Q;return C.a.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(J.views=ne,!J.alreadyInRendering){he.next=3;break}return he.abrupt("return");case 3:le=H(ne);try{for(Q=function(){var Se=ue.value,je=Se.getViewport(),Ae=je.width,Ce=je.height;J.alreadyInRendering=!0;var Re=K.getResourceNode(G.data.output);J.pickingFBO=J.resourcePool.getOrCreateResource(Re.resource),J.pickingFBO.resize({width:Ae,height:Ce}),J.engine.useFramebuffer(J.pickingFBO,function(){J.engine.clear({framebuffer:J.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var Ee,Le=J.renderPassFactory(te.a.IDENTIFIER),Ke=[],et=H(Se.getScene().getEntities());try{for(et.s();!(Ee=et.n()).done;){var ot=Ee.value,dt=J.mesh.getComponentByEntity(ot);dt.material.setUniform("u_PickingStage",ie),Ke.push(dt)}}catch(At){et.e(At)}finally{et.f()}Le.renderView(Se),Ke.forEach(function(At){At.material.setUniform("u_PickingStage",we)}),J.alreadyInRendering=!1})},le.s();!(ue=le.n()).done;)Q()}catch(Se){le.e(Se)}finally{le.f()}case 5:case"end":return he.stop()}},Y)}));return function(Y,K,G){return ee.apply(this,arguments)}}(),this.pick=function(ee,Y){var K,G,ne=ee.x,le=ee.y,ue=J.engine,Q=ue.readPixels,he=ue.useFramebuffer,Se=Y.getViewport(),je=Se.width,Ae=Se.height,Ce=ne*window.devicePixelRatio,Re=le*window.devicePixelRatio;if(!(Ce>je||Ce<0||Re>Ae||Re<0))return he(J.pickingFBO,function(){(K=Q({x:Math.round(Ce),y:Math.round(Ae-(le+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:J.pickingFBO}))[0]===0&&K[1]===0&&K[2]===0||(G=Object(ge.a)(K),J.highlightEnabled&&J.highlightPickedFeature(K,Y))}),G}}return ce()(oe,[{key:"enableHighlight",value:function(J){this.highlightEnabled=J}},{key:"setHighlightColor",value:function(J){this.highlightColor=J}},{key:"highlightPickedFeature",value:function(J,ee){if(J){var Y,K=H(ee.getScene().getEntities());try{for(K.s();!(Y=K.n()).done;){var G=Y.value,ne=this.mesh.getComponentByEntity(G).material;ne.setUniform("u_PickingStage",we),ne.setUniform("u_PickingColor",[J[0],J[1],J[2]]),ne.setUniform("u_HighlightColor",this.highlightColor)}}catch(le){K.e(le)}finally{K.f()}}}}]),oe}(),b.IDENTIFIER="PixelPicking Pass",S=p,g=ye()(S.prototype,"engine",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=ye()(S.prototype,"resourcePool",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=ye()(S.prototype,"renderPassFactory",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=ye()(S.prototype,"mesh",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=S))||O)},function(D,m,o){"use strict";o.d(m,"a",function(){return M}),o.d(m,"b",function(){return _});var f=o(34),c=o(26);function M(x,O){O.forEach(function(S){S.draw(x)})}function _(x,O){var S=x.get("canvas");if(S&&S.get("autoDraw")){var g=S.get("context"),d=x.getParent(),y=d?d.getChildren():[S],E=x.get("el");if(O==="remove")if(x.get("isClipShape")){var b=E&&E.parentNode,p=b&&b.parentNode;b&&p&&p.removeChild(b)}else E&&E.parentNode&&E.parentNode.removeChild(E);else if(O==="show")E.setAttribute("visibility","visible");else if(O==="hide")E.setAttribute("visibility","hidden");else if(O==="zIndex")Object(c.c)(E,y.indexOf(x));else if(O==="sort"){var A=x.get("children");A&&A.length&&Object(c.d)(x,function(C,N){return A.indexOf(C)-A.indexOf(N)?1:0})}else O==="clear"?E&&(E.innerHTML=""):O==="matrix"?Object(f.c)(x):O==="clip"?Object(f.a)(x,g):O==="attr"||O==="add"&&x.draw(g)}}},function(D,m){D.exports=function(o,f){return o===f||o!=o&&f!=f}},function(D,m,o){var f=o(47).Symbol;D.exports=f},function(D,m,o){(function(f){function c(d){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(d)}var M=o(47),_=o(339),x=c(m)=="object"&&m&&!m.nodeType&&m,O=x&&c(f)=="object"&&f&&!f.nodeType&&f,S=O&&O.exports===x?M.Buffer:void 0,g=(S?S.isBuffer:void 0)||_;f.exports=g}).call(this,o(87)(D))},function(D,m,o){var f=o(348),c=o(144),M=o(349),_=o(188),x=o(350),O=o(63),S=o(177),g=S(f),d=S(c),y=S(M),E=S(_),b=S(x),p=O;(f&&p(new f(new ArrayBuffer(1)))!="[object DataView]"||c&&p(new c)!="[object Map]"||M&&p(M.resolve())!="[object Promise]"||_&&p(new _)!="[object Set]"||x&&p(new x)!="[object WeakMap]")&&(p=function(A){var C=O(A),N=C=="[object Object]"?A.constructor:void 0,P=N?S(N):"";if(P)switch(P){case g:return"[object DataView]";case d:return"[object Map]";case y:return"[object Promise]";case E:return"[object Set]";case b:return"[object WeakMap]"}return C}),D.exports=p},function(D,m,o){function f(_){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}var c=o(63),M=o(49);D.exports=function(_){return f(_)=="symbol"||M(_)&&c(_)=="[object Symbol]"}},function(D,m,o){"use strict";var f=o(1),c=o(21),M=o(55),_=o(30),x=o(0),O=o(15),S=function(g){function d(){return g!==null&&g.apply(this,arguments)||this}return Object(f.__extends)(d,g),d.prototype.onCanvasChange=function(y){Object(_.h)(this,y)},d.prototype.getShapeBase=function(){return M},d.prototype.getGroupBase=function(){return d},d.prototype._applyClip=function(y,E){E&&(y.save(),Object(_.a)(y,E),E.createPath(y),y.restore(),y.clip(),E._afterDraw())},d.prototype.cacheCanvasBBox=function(){var y=this.cfg.children,E=[],b=[];Object(x.each)(y,function(X){var re=X.cfg.cacheCanvasBBox;re&&X.cfg.isInView&&(E.push(re.minX,re.maxX),b.push(re.minY,re.maxY))});var p=null;if(E.length){var A=Object(x.min)(E),C=Object(x.max)(E),N=Object(x.min)(b),P=Object(x.max)(b);p={minX:A,minY:N,x:A,y:N,maxX:C,maxY:P,width:C-A,height:P-N};var L=this.cfg.canvas;if(L){var z=L.getViewRange();this.set("isInView",Object(O.f)(p,z))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",p)},d.prototype.draw=function(y,E){var b=this.cfg.children,p=!E||this.cfg.refresh;b.length&&p&&(y.save(),Object(_.a)(y,this),this._applyClip(y,this.getClip()),Object(_.d)(y,b,E),y.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},d.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},d}(c.AbstractGroup);m.a=S},function(D,m,o){"use strict";var f=o(1),c=o(21),M=o(0),_=o(78),x=o(69),O=o(34),S=o(16),g=o(26),d=function(y){function E(){return y!==null&&y.apply(this,arguments)||this}return Object(f.__extends)(E,y),E.prototype.isEntityGroup=function(){return!0},E.prototype.createDom=function(){var b=Object(g.b)("g");this.set("el",b);var p=this.getParent();if(p){var A=p.get("el");A||(A=p.createDom(),p.set("el",A)),A.appendChild(b)}return b},E.prototype.afterAttrsChange=function(b){y.prototype.afterAttrsChange.call(this,b);var p=this.get("canvas");if(p&&p.get("autoDraw")){var A=p.get("context");this.createPath(A,b)}},E.prototype.onCanvasChange=function(b){Object(x.b)(this,b)},E.prototype.getShapeBase=function(){return _},E.prototype.getGroupBase=function(){return E},E.prototype.draw=function(b){var p=this.getChildren(),A=this.get("el");this.get("destroyed")?A&&A.parentNode.removeChild(A):(A||this.createDom(),Object(O.a)(this,b),this.createPath(b),p.length&&Object(x.a)(b,p))},E.prototype.createPath=function(b,p){var A=this.attr(),C=this.get("el");Object(M.each)(p||A,function(N,P){S.b[P]&&C.setAttribute(S.b[P],N)}),Object(O.c)(this)},E}(c.AbstractGroup);m.a=d},function(D,m,o){"use strict";o.d(m,"a",function(){return O});var f=o(6),c=o.n(f),M=o(7),_=o.n(M),x=o(2),O=function(){function S(g,d){c()(this,S),this.center=void 0,this.halfExtents=void 0,this.min=x.e.create(),this.max=x.e.create(),this.update(g,d)}return _()(S,[{key:"update",value:function(g,d){this.center=g||x.e.create(),this.halfExtents=d||x.e.fromValues(.5,.5,.5),this.min=x.e.sub(this.min,this.center,this.halfExtents),this.max=x.e.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(g,d){x.e.add(this.center,d,g),x.e.scale(this.center,this.center,.5),x.e.sub(this.halfExtents,d,g),x.e.scale(this.halfExtents,this.halfExtents,.5),x.e.copy(this.min,g),x.e.copy(this.max,d)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(g){var d=this.center,y=d[0],E=d[1],b=d[2],p=this.halfExtents,A=p[0],C=p[1],N=p[2],P=y-A,L=y+A,z=E-C,X=E+C,re=b-N,se=b+N,ce=g.center,xe=ce[0],ye=ce[1],W=ce[2],Ie=g.halfExtents,ge=Ie[0],te=Ie[1],H=Ie[2],V=xe-ge,ie=xe+ge,we=ye-te,ke=ye+te,oe=W-H,J=W+H;V<P&&(P=V),ie>L&&(L=ie),we<z&&(z=we),ke>X&&(X=ke),oe<re&&(re=oe),J>se&&(se=J),d[0]=.5*(P+L),d[1]=.5*(z+X),d[2]=.5*(re+se),p[0]=.5*(L-P),p[1]=.5*(X-z),p[2]=.5*(se-re),this.min[0]=P,this.min[1]=z,this.min[2]=re,this.max[0]=L,this.max[1]=X,this.max[2]=se}},{key:"intersects",value:function(g){var d=this.getMax(),y=this.getMin(),E=g.getMax(),b=g.getMin();return y[0]<=E[0]&&d[0]>=b[0]&&y[1]<=E[1]&&d[1]>=b[1]&&y[2]<=E[2]&&d[2]>=b[2]}},{key:"containsPoint",value:function(g){var d=this.getMin(),y=this.getMax();return!(g[0]<d[0]||g[0]>y[0]||g[1]<d[1]||g[1]>y[1]||g[2]<d[2]||g[2]>y[2])}},{key:"getNegativeFarPoint",value:function(g){return g.pnVertexFlag===273?x.e.copy(x.e.create(),this.min):g.pnVertexFlag===272?x.e.fromValues(this.min[0],this.min[1],this.max[2]):g.pnVertexFlag===257?x.e.fromValues(this.min[0],this.max[1],this.min[2]):g.pnVertexFlag===256?x.e.fromValues(this.min[0],this.max[1],this.max[2]):g.pnVertexFlag===17?x.e.fromValues(this.max[0],this.min[1],this.min[2]):g.pnVertexFlag===16?x.e.fromValues(this.max[0],this.min[1],this.max[2]):g.pnVertexFlag===1?x.e.fromValues(this.max[0],this.max[1],this.min[2]):x.e.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(g){return g.pnVertexFlag===273?x.e.copy(x.e.create(),this.max):g.pnVertexFlag===272?x.e.fromValues(this.max[0],this.max[1],this.min[2]):g.pnVertexFlag===257?x.e.fromValues(this.max[0],this.min[1],this.max[2]):g.pnVertexFlag===256?x.e.fromValues(this.max[0],this.min[1],this.min[2]):g.pnVertexFlag===17?x.e.fromValues(this.min[0],this.max[1],this.max[2]):g.pnVertexFlag===16?x.e.fromValues(this.min[0],this.max[1],this.min[2]):g.pnVertexFlag===1?x.e.fromValues(this.min[0],this.min[1],this.max[2]):x.e.fromValues(this.min[0],this.min[1],this.min[2])}}]),S}()},function(D,m,o){"use strict";o.r(m),o.d(m,"Base",function(){return d}),o.d(m,"Circle",function(){return E}),o.d(m,"Dom",function(){return b}),o.d(m,"Ellipse",function(){return p}),o.d(m,"Image",function(){return A}),o.d(m,"Line",function(){return N}),o.d(m,"Marker",function(){return z}),o.d(m,"Path",function(){return X}),o.d(m,"Polygon",function(){return re}),o.d(m,"Polyline",function(){return se}),o.d(m,"Rect",function(){return ce}),o.d(m,"Text",function(){return ge});var f={};o.r(f),o.d(f,"Base",function(){return d}),o.d(f,"Circle",function(){return E}),o.d(f,"Dom",function(){return b}),o.d(f,"Ellipse",function(){return p}),o.d(f,"Image",function(){return A}),o.d(f,"Line",function(){return N}),o.d(f,"Marker",function(){return z}),o.d(f,"Path",function(){return X}),o.d(f,"Polygon",function(){return re}),o.d(f,"Polyline",function(){return se}),o.d(f,"Rect",function(){return ce}),o.d(f,"Text",function(){return ge});var c=o(1),M=o(21),_=o(34),x=o(26),O=o(69),S=o(16),g=o(76),d=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="svg",V.canFill=!1,V.canStroke=!1,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},H.prototype.afterAttrsChange=function(V){te.prototype.afterAttrsChange.call(this,V);var ie=this.get("canvas");if(ie&&ie.get("autoDraw")){var we=ie.get("context");this.draw(we,V)}},H.prototype.getShapeBase=function(){return f},H.prototype.getGroupBase=function(){return g.a},H.prototype.onCanvasChange=function(V){Object(O.b)(this,V)},H.prototype.calculateBBox=function(){var V=this.get("el"),ie=null;if(V)ie=V.getBBox();else{var we=Object(M.getBBoxMethod)(this.get("type"));we&&(ie=we(this))}if(ie){var ke=ie.x,oe=ie.y,J=ie.width,ee=ie.height,Y=this.getHitLineWidth(),K=Y/2,G=ke-K,ne=oe-K;return{x:G,y:ne,minX:G,minY:ne,maxX:ke+J+K,maxY:oe+ee+K,width:J+Y,height:ee+Y}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},H.prototype.isFill=function(){var V=this.attr(),ie=V.fill,we=V.fillStyle;return(ie||we||this.isClipShape())&&this.canFill},H.prototype.isStroke=function(){var V=this.attr(),ie=V.stroke,we=V.strokeStyle;return(ie||we)&&this.canStroke},H.prototype.draw=function(V,ie){var we=this.get("el");this.get("destroyed")?we&&we.parentNode.removeChild(we):(we||Object(x.a)(this),Object(_.a)(this,V),this.createPath(V,ie),this.shadow(V,ie),this.strokeAndFill(V,ie),this.transform(ie))},H.prototype.createPath=function(V,ie){},H.prototype.strokeAndFill=function(V,ie){var we=ie||this.attr(),ke=we.fill,oe=we.fillStyle,J=we.stroke,ee=we.strokeStyle,Y=we.fillOpacity,K=we.strokeOpacity,G=we.lineWidth,ne=this.get("el");this.canFill&&(ie?"fill"in we?this._setColor(V,"fill",ke):"fillStyle"in we&&this._setColor(V,"fill",oe):this._setColor(V,"fill",ke||oe),Y&&ne.setAttribute(S.b.fillOpacity,Y)),this.canStroke&&G>0&&(ie?"stroke"in we?this._setColor(V,"stroke",J):"strokeStyle"in we&&this._setColor(V,"stroke",ee):this._setColor(V,"stroke",J||ee),K&&ne.setAttribute(S.b.strokeOpacity,K),G&&ne.setAttribute(S.b.lineWidth,G))},H.prototype._setColor=function(V,ie,we){var ke=this.get("el");if(we)if(we=we.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(we))(oe=V.find("gradient",we))||(oe=V.addGradient(we)),ke.setAttribute(S.b[ie],"url(#"+oe+")");else if(/^[p,P]{1}[\s]*\(/.test(we)){var oe;(oe=V.find("pattern",we))||(oe=V.addPattern(we)),ke.setAttribute(S.b[ie],"url(#"+oe+")")}else ke.setAttribute(S.b[ie],we);else ke.setAttribute(S.b[ie],"none")},H.prototype.shadow=function(V,ie){var we=this.attr(),ke=ie||we,oe=ke.shadowOffsetX,J=ke.shadowOffsetY,ee=ke.shadowBlur,Y=ke.shadowColor;(oe||J||ee||Y)&&Object(_.b)(this,V)},H.prototype.transform=function(V){var ie=this.attr();(V||ie).matrix&&Object(_.c)(this)},H.prototype.isInShape=function(V,ie){return this.isPointInPath(V,ie)},H.prototype.isPointInPath=function(V,ie){var we=this.get("el"),ke=this.get("canvas").get("el").getBoundingClientRect(),oe=V+ke.left,J=ie+ke.top,ee=document.elementFromPoint(oe,J);return!(!ee||!ee.isEqualNode(we))},H.prototype.getHitLineWidth=function(){var V=this.attrs,ie=V.lineWidth,we=V.lineAppendWidth;return this.isStroke()?ie+we:0},H}(M.AbstractShape),y=o(0),E=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="circle",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{x:0,y:0,r:0})},H.prototype.createPath=function(V,ie){var we=this.attr(),ke=this.get("el");Object(y.each)(ie||we,function(oe,J){J==="x"||J==="y"?ke.setAttribute("c"+J,oe):S.b[J]&&ke.setAttribute(S.b[J],oe)})},H}(d),b=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="dom",V.canFill=!1,V.canStroke=!1,V}return Object(c.__extends)(H,te),H.prototype.createPath=function(V,ie){var we=this.attr(),ke=this.get("el");if(Object(y.each)(ie||we,function(Y,K){S.b[K]&&ke.setAttribute(S.b[K],Y)}),typeof we.html=="function"){var oe=we.html.call(this,we);if(oe instanceof Element||oe instanceof HTMLDocument){for(var J=ke.childNodes,ee=J.length-1;ee>=0;ee--)ke.removeChild(J[ee]);ke.appendChild(oe)}else ke.innerHTML=oe}else ke.innerHTML=we.html},H}(d),p=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="ellipse",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{x:0,y:0,rx:0,ry:0})},H.prototype.createPath=function(V,ie){var we=this.attr(),ke=this.get("el");Object(y.each)(ie||we,function(oe,J){J==="x"||J==="y"?ke.setAttribute("c"+J,oe):S.b[J]&&ke.setAttribute(S.b[J],oe)})},H}(d),A=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="image",V.canFill=!1,V.canStroke=!1,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{x:0,y:0,width:0,height:0})},H.prototype.createPath=function(V,ie){var we=this,ke=this.attr(),oe=this.get("el");Object(y.each)(ie||ke,function(J,ee){ee==="img"?we._setImage(ke.img):S.b[ee]&&oe.setAttribute(S.b[ee],J)})},H.prototype.setAttr=function(V,ie){this.attrs[V]=ie,V==="img"&&this._setImage(ie)},H.prototype._setImage=function(V){var ie=this.attr(),we=this.get("el");if(Object(y.isString)(V))we.setAttribute("href",V);else if(V instanceof window.Image)ie.width||(we.setAttribute("width",V.width),this.attr("width",V.width)),ie.height||(we.setAttribute("height",V.height),this.attr("height",V.height)),we.setAttribute("href",V.src);else if(V instanceof HTMLElement&&Object(y.isString)(V.nodeName)&&V.nodeName.toUpperCase()==="CANVAS")we.setAttribute("href",V.toDataURL());else if(V instanceof ImageData){var ke=document.createElement("canvas");ke.setAttribute("width",""+V.width),ke.setAttribute("height",""+V.height),ke.getContext("2d").putImageData(V,0,0),ie.width||(we.setAttribute("width",""+V.width),this.attr("width",V.width)),ie.height||(we.setAttribute("height",""+V.height),this.attr("height",V.height)),we.setAttribute("href",ke.toDataURL())}},H}(d),C=o(20),N=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="line",V.canFill=!1,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},H.prototype.createPath=function(V,ie){var we=this.attr(),ke=this.get("el");Object(y.each)(ie||we,function(oe,J){if(J==="startArrow"||J==="endArrow")if(oe){var ee=Object(y.isObject)(oe)?V.addArrow(we,S.b[J]):V.getDefaultArrow(we,S.b[J]);ke.setAttribute(S.b[J],"url(#"+ee+")")}else ke.removeAttribute(S.b[J]);else S.b[J]&&ke.setAttribute(S.b[J],oe)})},H.prototype.getTotalLength=function(){var V=this.attr(),ie=V.x1,we=V.y1,ke=V.x2,oe=V.y2;return C.c.length(ie,we,ke,oe)},H.prototype.getPoint=function(V){var ie=this.attr(),we=ie.x1,ke=ie.y1,oe=ie.x2,J=ie.y2;return C.c.pointAt(we,ke,oe,J,V)},H}(d),P={circle:function(te,H,V){return[["M",te,H],["m",-V,0],["a",V,V,0,1,0,2*V,0],["a",V,V,0,1,0,2*-V,0]]},square:function(te,H,V){return[["M",te-V,H-V],["L",te+V,H-V],["L",te+V,H+V],["L",te-V,H+V],["Z"]]},diamond:function(te,H,V){return[["M",te-V,H],["L",te,H-V],["L",te+V,H],["L",te,H+V],["Z"]]},triangle:function(te,H,V){var ie=V*Math.sin(.3333333333333333*Math.PI);return[["M",te-V,H+ie],["L",te,H-ie],["L",te+V,H+ie],["z"]]},triangleDown:function(te,H,V){var ie=V*Math.sin(.3333333333333333*Math.PI);return[["M",te-V,H-ie],["L",te+V,H-ie],["L",te,H+ie],["Z"]]}},L={get:function(te){return P[te]},register:function(te,H){P[te]=H},remove:function(te){delete P[te]},getAll:function(){return P}},z=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="marker",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.createPath=function(V){this.get("el").setAttribute("d",this._assembleMarker())},H.prototype._assembleMarker=function(){var V=this._getPath();return Object(y.isArray)(V)?V.map(function(ie){return ie.join(" ")}).join(""):V},H.prototype._getPath=function(){var V,ie=this.attr(),we=ie.x,ke=ie.y,oe=ie.r||ie.radius,J=ie.symbol||"circle";return(V=Object(y.isFunction)(J)?J:L.get(J))?V(we,ke,oe):(console.warn(V+" symbol is not exist."),null)},H.symbolsFactory=L,H}(d),X=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="path",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{startArrow:!1,endArrow:!1})},H.prototype.createPath=function(V,ie){var we=this,ke=this.attr(),oe=this.get("el");Object(y.each)(ie||ke,function(J,ee){if(ee==="path"&&Object(y.isArray)(J))oe.setAttribute("d",we._formatPath(J));else if(ee==="startArrow"||ee==="endArrow")if(J){var Y=Object(y.isObject)(J)?V.addArrow(ke,S.b[ee]):V.getDefaultArrow(ke,S.b[ee]);oe.setAttribute(S.b[ee],"url(#"+Y+")")}else oe.removeAttribute(S.b[ee]);else S.b[ee]&&oe.setAttribute(S.b[ee],J)})},H.prototype._formatPath=function(V){var ie=V.map(function(we){return we.join(" ")}).join("");return~ie.indexOf("NaN")?"":ie},H.prototype.getTotalLength=function(){var V=this.get("el");return V?V.getTotalLength():null},H.prototype.getPoint=function(V){var ie=this.get("el"),we=this.getTotalLength();if(we===0)return null;var ke=ie?ie.getPointAtLength(V*we):null;return ke?{x:ke.x,y:ke.y}:null},H}(d),re=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="polygon",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.createPath=function(V,ie){var we=this.attr(),ke=this.get("el");Object(y.each)(ie||we,function(oe,J){J==="points"&&Object(y.isArray)(oe)&&oe.length>=2?ke.setAttribute("points",oe.map(function(ee){return ee[0]+","+ee[1]}).join(" ")):S.b[J]&&ke.setAttribute(S.b[J],oe)})},H}(d),se=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="polyline",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{startArrow:!1,endArrow:!1})},H.prototype.onAttrChange=function(V,ie,we){te.prototype.onAttrChange.call(this,V,ie,we),["points"].indexOf(V)!==-1&&this._resetCache()},H.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},H.prototype.createPath=function(V,ie){var we=this.attr(),ke=this.get("el");Object(y.each)(ie||we,function(oe,J){J==="points"&&Object(y.isArray)(oe)&&oe.length>=2?ke.setAttribute("points",oe.map(function(ee){return ee[0]+","+ee[1]}).join(" ")):S.b[J]&&ke.setAttribute(S.b[J],oe)})},H.prototype.getTotalLength=function(){var V=this.attr().points,ie=this.get("totalLength");return Object(y.isNil)(ie)?(this.set("totalLength",C.d.length(V)),this.get("totalLength")):ie},H.prototype.getPoint=function(V){var ie,we,ke=this.attr().points,oe=this.get("tCache");return oe||(this._setTcache(),oe=this.get("tCache")),Object(y.each)(oe,function(J,ee){V>=J[0]&&V<=J[1]&&(ie=(V-J[0])/(J[1]-J[0]),we=ee)}),C.c.pointAt(ke[we][0],ke[we][1],ke[we+1][0],ke[we+1][1],ie)},H.prototype._setTcache=function(){var V=this.attr().points;if(V&&V.length!==0){var ie=this.getTotalLength();if(!(ie<=0)){var we,ke,oe=0,J=[];Object(y.each)(V,function(ee,Y){V[Y+1]&&((we=[])[0]=oe/ie,ke=C.c.length(ee[0],ee[1],V[Y+1][0],V[Y+1][1]),oe+=ke,we[1]=oe/ie,J.push(we))}),this.set("tCache",J)}}},H.prototype.getStartTangent=function(){var V=this.attr().points,ie=[];return ie.push([V[1][0],V[1][1]]),ie.push([V[0][0],V[0][1]]),ie},H.prototype.getEndTangent=function(){var V=this.attr().points,ie=V.length-1,we=[];return we.push([V[ie-1][0],V[ie-1][1]]),we.push([V[ie][0],V[ie][1]]),we},H}(d),ce=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="rect",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{x:0,y:0,width:0,height:0,radius:0})},H.prototype.createPath=function(V,ie){var we=this,ke=this.attr(),oe=this.get("el"),J=!1,ee=["x","y","width","height","radius"];Object(y.each)(ie||ke,function(Y,K){ee.indexOf(K)===-1||J?ee.indexOf(K)===-1&&S.b[K]&&oe.setAttribute(S.b[K],Y):(oe.setAttribute("d",we._assembleRect(ke)),J=!0)})},H.prototype._assembleRect=function(V){var ie=V.x,we=V.y,ke=V.width,oe=V.height,J=V.radius;if(!J)return"M "+ie+","+we+" l "+ke+",0 l 0,"+oe+" l"+-ke+" 0 z";var ee=function(Y){var K=0,G=0,ne=0,le=0;return Object(y.isArray)(Y)?Y.length===1?K=G=ne=le=Y[0]:Y.length===2?(K=ne=Y[0],G=le=Y[1]):Y.length===3?(K=Y[0],G=le=Y[1],ne=Y[2]):(K=Y[0],G=Y[1],ne=Y[2],le=Y[3]):K=G=ne=le=Y,{r1:K,r2:G,r3:ne,r4:le}}(J);return Object(y.isArray)(J)?J.length===1?ee.r1=ee.r2=ee.r3=ee.r4=J[0]:J.length===2?(ee.r1=ee.r3=J[0],ee.r2=ee.r4=J[1]):J.length===3?(ee.r1=J[0],ee.r2=ee.r4=J[1],ee.r3=J[2]):(ee.r1=J[0],ee.r2=J[1],ee.r3=J[2],ee.r4=J[3]):ee.r1=ee.r2=ee.r3=ee.r4=J,[["M "+(ie+ee.r1)+","+we],["l "+(ke-ee.r1-ee.r2)+",0"],["a "+ee.r2+","+ee.r2+",0,0,1,"+ee.r2+","+ee.r2],["l 0,"+(oe-ee.r2-ee.r3)],["a "+ee.r3+","+ee.r3+",0,0,1,"+-ee.r3+","+ee.r3],["l "+(ee.r3+ee.r4-ke)+",0"],["a "+ee.r4+","+ee.r4+",0,0,1,"+-ee.r4+","+-ee.r4],["l 0,"+(ee.r4+ee.r1-oe)],["a "+ee.r1+","+ee.r1+",0,0,1,"+ee.r1+","+-ee.r1],["z"]].join(" ")},H}(d),xe=o(138),ye={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},W={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},Ie={left:"left",start:"left",center:"middle",right:"end",end:"end"},ge=function(te){function H(){var V=te!==null&&te.apply(this,arguments)||this;return V.type="text",V.canFill=!0,V.canStroke=!0,V}return Object(c.__extends)(H,te),H.prototype.getDefaultAttrs=function(){var V=te.prototype.getDefaultAttrs.call(this);return Object(c.__assign)(Object(c.__assign)({},V),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},H.prototype.createPath=function(V,ie){var we=this,ke=this.attr(),oe=this.get("el");this._setFont(),Object(y.each)(ie||ke,function(J,ee){ee==="text"?we._setText(""+J):ee==="matrix"&&J?Object(_.c)(we):S.b[ee]&&oe.setAttribute(S.b[ee],J)}),oe.setAttribute("paint-order","stroke"),oe.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},H.prototype._setFont=function(){var V=this.get("el"),ie=this.attr(),we=ie.textBaseline,ke=ie.textAlign,oe=Object(xe.a)();oe&&oe.name==="firefox"?V.setAttribute("dominant-baseline",W[we]||"alphabetic"):V.setAttribute("alignment-baseline",ye[we]||"baseline"),V.setAttribute("text-anchor",Ie[ke]||"left")},H.prototype._setText=function(V){var ie=this.get("el"),we=this.attr(),ke=we.x,oe=we.textBaseline,J=oe===void 0?"bottom":oe;if(V)if(~V.indexOf(`
`)){var ee=V.split(`
`),Y=ee.length-1,K="";Object(y.each)(ee,function(G,ne){ne===0?J==="alphabetic"?K+='<tspan x="'+ke+'" dy="'+-Y+'em">'+G+"</tspan>":J==="top"?K+='<tspan x="'+ke+'" dy="0.9em">'+G+"</tspan>":J==="middle"?K+='<tspan x="'+ke+'" dy="'+-(Y-1)/2+'em">'+G+"</tspan>":J==="bottom"?K+='<tspan x="'+ke+'" dy="-'+(Y+.3)+'em">'+G+"</tspan>":J==="hanging"&&(K+='<tspan x="'+ke+'" dy="'+(-(Y-1)-.3)+'em">'+G+"</tspan>"):K+='<tspan x="'+ke+'" dy="1em">'+G+"</tspan>"}),ie.innerHTML=K}else ie.innerHTML=V;else ie.innerHTML=""},H}(d)},function(D,m,o){"use strict";o.r(m),o.d(m,"create",function(){return c}),o.d(m,"clone",function(){return M}),o.d(m,"fromValues",function(){return _}),o.d(m,"copy",function(){return x}),o.d(m,"set",function(){return O}),o.d(m,"add",function(){return S}),o.d(m,"subtract",function(){return g}),o.d(m,"multiply",function(){return d}),o.d(m,"divide",function(){return y}),o.d(m,"ceil",function(){return E}),o.d(m,"floor",function(){return b}),o.d(m,"min",function(){return p}),o.d(m,"max",function(){return A}),o.d(m,"round",function(){return C}),o.d(m,"scale",function(){return N}),o.d(m,"scaleAndAdd",function(){return P}),o.d(m,"distance",function(){return L}),o.d(m,"squaredDistance",function(){return z}),o.d(m,"length",function(){return X}),o.d(m,"squaredLength",function(){return re}),o.d(m,"negate",function(){return se}),o.d(m,"inverse",function(){return ce}),o.d(m,"normalize",function(){return xe}),o.d(m,"dot",function(){return ye}),o.d(m,"cross",function(){return W}),o.d(m,"lerp",function(){return Ie}),o.d(m,"random",function(){return ge}),o.d(m,"transformMat2",function(){return te}),o.d(m,"transformMat2d",function(){return H}),o.d(m,"transformMat3",function(){return V}),o.d(m,"transformMat4",function(){return ie}),o.d(m,"rotate",function(){return we}),o.d(m,"angle",function(){return ke}),o.d(m,"zero",function(){return oe}),o.d(m,"str",function(){return J}),o.d(m,"exactEquals",function(){return ee}),o.d(m,"equals",function(){return Y}),o.d(m,"len",function(){return G}),o.d(m,"sub",function(){return ne}),o.d(m,"mul",function(){return le}),o.d(m,"div",function(){return ue}),o.d(m,"dist",function(){return Q}),o.d(m,"sqrDist",function(){return he}),o.d(m,"sqrLen",function(){return Se}),o.d(m,"forEach",function(){return je});var f=o(12);function c(){var Ae=new f.a(2);return f.a!=Float32Array&&(Ae[0]=0,Ae[1]=0),Ae}function M(Ae){var Ce=new f.a(2);return Ce[0]=Ae[0],Ce[1]=Ae[1],Ce}function _(Ae,Ce){var Re=new f.a(2);return Re[0]=Ae,Re[1]=Ce,Re}function x(Ae,Ce){return Ae[0]=Ce[0],Ae[1]=Ce[1],Ae}function O(Ae,Ce,Re){return Ae[0]=Ce,Ae[1]=Re,Ae}function S(Ae,Ce,Re){return Ae[0]=Ce[0]+Re[0],Ae[1]=Ce[1]+Re[1],Ae}function g(Ae,Ce,Re){return Ae[0]=Ce[0]-Re[0],Ae[1]=Ce[1]-Re[1],Ae}function d(Ae,Ce,Re){return Ae[0]=Ce[0]*Re[0],Ae[1]=Ce[1]*Re[1],Ae}function y(Ae,Ce,Re){return Ae[0]=Ce[0]/Re[0],Ae[1]=Ce[1]/Re[1],Ae}function E(Ae,Ce){return Ae[0]=Math.ceil(Ce[0]),Ae[1]=Math.ceil(Ce[1]),Ae}function b(Ae,Ce){return Ae[0]=Math.floor(Ce[0]),Ae[1]=Math.floor(Ce[1]),Ae}function p(Ae,Ce,Re){return Ae[0]=Math.min(Ce[0],Re[0]),Ae[1]=Math.min(Ce[1],Re[1]),Ae}function A(Ae,Ce,Re){return Ae[0]=Math.max(Ce[0],Re[0]),Ae[1]=Math.max(Ce[1],Re[1]),Ae}function C(Ae,Ce){return Ae[0]=Math.round(Ce[0]),Ae[1]=Math.round(Ce[1]),Ae}function N(Ae,Ce,Re){return Ae[0]=Ce[0]*Re,Ae[1]=Ce[1]*Re,Ae}function P(Ae,Ce,Re,Ee){return Ae[0]=Ce[0]+Re[0]*Ee,Ae[1]=Ce[1]+Re[1]*Ee,Ae}function L(Ae,Ce){var Re=Ce[0]-Ae[0],Ee=Ce[1]-Ae[1];return Math.hypot(Re,Ee)}function z(Ae,Ce){var Re=Ce[0]-Ae[0],Ee=Ce[1]-Ae[1];return Re*Re+Ee*Ee}function X(Ae){var Ce=Ae[0],Re=Ae[1];return Math.hypot(Ce,Re)}function re(Ae){var Ce=Ae[0],Re=Ae[1];return Ce*Ce+Re*Re}function se(Ae,Ce){return Ae[0]=-Ce[0],Ae[1]=-Ce[1],Ae}function ce(Ae,Ce){return Ae[0]=1/Ce[0],Ae[1]=1/Ce[1],Ae}function xe(Ae,Ce){var Re=Ce[0],Ee=Ce[1],Le=Re*Re+Ee*Ee;return Le>0&&(Le=1/Math.sqrt(Le)),Ae[0]=Ce[0]*Le,Ae[1]=Ce[1]*Le,Ae}function ye(Ae,Ce){return Ae[0]*Ce[0]+Ae[1]*Ce[1]}function W(Ae,Ce,Re){var Ee=Ce[0]*Re[1]-Ce[1]*Re[0];return Ae[0]=Ae[1]=0,Ae[2]=Ee,Ae}function Ie(Ae,Ce,Re,Ee){var Le=Ce[0],Ke=Ce[1];return Ae[0]=Le+Ee*(Re[0]-Le),Ae[1]=Ke+Ee*(Re[1]-Ke),Ae}function ge(Ae,Ce){Ce=Ce||1;var Re=2*f.c()*Math.PI;return Ae[0]=Math.cos(Re)*Ce,Ae[1]=Math.sin(Re)*Ce,Ae}function te(Ae,Ce,Re){var Ee=Ce[0],Le=Ce[1];return Ae[0]=Re[0]*Ee+Re[2]*Le,Ae[1]=Re[1]*Ee+Re[3]*Le,Ae}function H(Ae,Ce,Re){var Ee=Ce[0],Le=Ce[1];return Ae[0]=Re[0]*Ee+Re[2]*Le+Re[4],Ae[1]=Re[1]*Ee+Re[3]*Le+Re[5],Ae}function V(Ae,Ce,Re){var Ee=Ce[0],Le=Ce[1];return Ae[0]=Re[0]*Ee+Re[3]*Le+Re[6],Ae[1]=Re[1]*Ee+Re[4]*Le+Re[7],Ae}function ie(Ae,Ce,Re){var Ee=Ce[0],Le=Ce[1];return Ae[0]=Re[0]*Ee+Re[4]*Le+Re[12],Ae[1]=Re[1]*Ee+Re[5]*Le+Re[13],Ae}function we(Ae,Ce,Re,Ee){var Le=Ce[0]-Re[0],Ke=Ce[1]-Re[1],et=Math.sin(Ee),ot=Math.cos(Ee);return Ae[0]=Le*ot-Ke*et+Re[0],Ae[1]=Le*et+Ke*ot+Re[1],Ae}function ke(Ae,Ce){var Re=Ae[0],Ee=Ae[1],Le=Ce[0],Ke=Ce[1],et=Math.sqrt(Re*Re+Ee*Ee)*Math.sqrt(Le*Le+Ke*Ke),ot=et&&(Re*Le+Ee*Ke)/et;return Math.acos(Math.min(Math.max(ot,-1),1))}function oe(Ae){return Ae[0]=0,Ae[1]=0,Ae}function J(Ae){return"vec2("+Ae[0]+", "+Ae[1]+")"}function ee(Ae,Ce){return Ae[0]===Ce[0]&&Ae[1]===Ce[1]}function Y(Ae,Ce){var Re=Ae[0],Ee=Ae[1],Le=Ce[0],Ke=Ce[1];return Math.abs(Re-Le)<=f.b*Math.max(1,Math.abs(Re),Math.abs(Le))&&Math.abs(Ee-Ke)<=f.b*Math.max(1,Math.abs(Ee),Math.abs(Ke))}var K,G=X,ne=g,le=d,ue=y,Q=L,he=z,Se=re,je=(K=c(),function(Ae,Ce,Re,Ee,Le,Ke){var et,ot;for(Ce||(Ce=2),Re||(Re=0),ot=Ee?Math.min(Ee*Ce+Re,Ae.length):Ae.length,et=Re;et<ot;et+=Ce)K[0]=Ae[et],K[1]=Ae[et+1],Le(K,K,Ke),Ae[et]=K[0],Ae[et+1]=K[1];return Ae})},function(D,m){var o=[],f=[];function c(M,_){if(_=_||{},M===void 0)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var x,O=_.prepend===!0?"prepend":"append",S=_.container!==void 0?_.container:document.querySelector("head"),g=o.indexOf(S);return g===-1&&(g=o.push(S)-1,f[g]={}),f[g]!==void 0&&f[g][O]!==void 0?x=f[g][O]:(x=f[g][O]=function(){var d=document.createElement("style");return d.setAttribute("type","text/css"),d}(),O==="prepend"?S.insertBefore(x,S.childNodes[0]):S.appendChild(x)),M.charCodeAt(0)===65279&&(M=M.substr(1,M.length)),x.styleSheet?x.styleSheet.cssText+=M:x.textContent+=M,x}D.exports=c,D.exports.insertCss=c},function(D,m,o){"use strict";o.d(m,"a",function(){return xe});var f,c,M,_,x,O,S,g,d,y=o(9),E=o.n(y),b=o(14),p=o.n(b),A=o(10),C=o.n(A),N=o(6),P=o.n(N),L=o(11),z=o.n(L),X=(o(29),o(5)),re=o(13),se=o(35),ce=o(50),xe=(f=Object(X.injectable)(),c=Object(X.inject)(re.a.RenderEngine),M=Object(X.inject)(re.a.ResourcePool),f((d=g=function ye(){var W=this;P()(this,ye),C()(this,"engine",O,this),C()(this,"resourcePool",S,this),this.model=void 0,this.setup=function(Ie,ge,te){var H=Ie.getPass(ce.a.IDENTIFIER);if(H){var V=Ie.createRenderTarget(ge,"render to screen",{width:1,height:1});te.data={input:ge.read(H.data.output),output:ge.write(Ie,V)}}},this.execute=function(){var Ie=p()(E.a.mark(function ge(te,H){var V,ie,we,ke,oe,J,ee;return E.a.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(V=W.engine,ie=V.createModel,we=V.createAttribute,ke=V.createBuffer,W.model){Y.next=6;break}return Y.next=4,ie({vs:W.engine.supportWebGPU?`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`:`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,fs:W.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`:`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,attributes:{a_Position:we({buffer:ke({data:[-4,-4,4,-4,0,4],type:se.a.FLOAT}),size:2,arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:oe=Y.sent,W.model=oe;case 6:J=te.getResourceNode(H.data.input),ee=W.resourcePool.getOrCreateResource(J.resource),W.engine.useFramebuffer(null,function(){W.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),W.model.draw({uniforms:{u_Texture:ee}})});case 9:case"end":return Y.stop()}},ge)}));return function(ge,te){return Ie.apply(this,arguments)}}(),this.tearDown=function(){W.model=void 0}},g.IDENTIFIER="Copy Pass",x=d,O=z()(x.prototype,"engine",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=z()(x.prototype,"resourcePool",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=x))||_)},function(D,m,o){(function(f){var c,M,_,x;function O(S){return(O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}x=function(){return function(S){var g={};function d(y){if(g[y])return g[y].exports;var E=g[y]={i:y,l:!1,exports:{}};return S[y].call(E.exports,E,E.exports,d),E.l=!0,E.exports}return d.m=S,d.c=g,d.d=function(y,E,b){d.o(y,E)||Object.defineProperty(y,E,{configurable:!1,enumerable:!0,get:b})},d.n=function(y){var E=y&&y.__esModule?function(){return y.default}:function(){return y};return d.d(E,"a",E),E},d.o=function(y,E){return Object.prototype.hasOwnProperty.call(y,E)},d.p="",d(d.s=31)}([function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Array.isArray?Array.isArray(E):Object(y.a)(E,"Array")}},function(S,g,d){"use strict";g.a=function(y){return y!==null&&typeof y!="function"&&isFinite(y.length)}},function(S,g,d){"use strict";var y=d(0),E=d(13);g.a=function(b,p){if(b){if(Object(y.a)(b))for(var A=0,C=b.length;A<C&&p(b[A],A)!==!1;A++);else if(Object(E.a)(b)){for(var N in b)if(b.hasOwnProperty(N)&&p(b[N],N)===!1)break}}}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"Function")}},function(S,g,d){"use strict";var y={}.toString;g.a=function(E,b){return y.call(E)==="[object "+b+"]"}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"Number")}},function(S,g,d){"use strict";g.a=function(y){return y==null}},function(S,g,d){var y=d(33).mix;S.exports={assign:y}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"String")}},function(S,g,d){"use strict";var y=d(15),E=d(4);g.a=function(b){if(!Object(y.a)(b)||!Object(E.a)(b,"Object"))return!1;if(Object.getPrototypeOf(b)===null)return!0;for(var p=b;Object.getPrototypeOf(p)!==null;)p=Object.getPrototypeOf(p);return Object.getPrototypeOf(b)===p}},function(S,g,d){"use strict";var y=d(6);g.a=function(E){return Object(y.a)(E)?"":E.toString()}},function(S,g,d){var y=d(18),E=function(){function b(p,A){A===void 0&&(A={}),this.options=A,this.rootNode=y(p,A)}return b.prototype.execute=function(){throw new Error("please override this method")},b}();S.exports=E},function(S,g,d){"use strict";var y=d(1);g.a=function(E,b){return!!Object(y.a)(E)&&E.indexOf(b)>-1}},function(S,g,d){"use strict";g.a=function(y){var E=O(y);return y!==null&&E==="object"||E==="function"}},function(S,g,d){"use strict";var y=d(2),E=d(1);g.a=function(b,p){if(!Object(E.a)(b))return b;var A=[];return Object(y.a)(b,function(C,N){p(C,N)&&A.push(C)}),A}},function(S,g,d){"use strict";g.a=function(y){return O(y)==="object"&&y!==null}},function(S,g,d){"use strict";function y(E,b){for(var p in b)b.hasOwnProperty(p)&&p!=="constructor"&&b[p]!==void 0&&(E[p]=b[p])}g.a=function(E,b,p,A){return b&&y(E,b),p&&y(E,p),A&&y(E,A),E}},function(S,g,d){var y=d(30),E=["LR","RL","TB","BT","H","V"],b=["LR","RL","H"],p=E[0];S.exports=function(A,C,N){var P=C.direction||p;if(C.isHorizontal=function(ce){return b.indexOf(ce)>-1}(P),P&&E.indexOf(P)===-1)throw new TypeError("Invalid direction: "+P);if(P===E[0])N(A,C);else if(P===E[1])N(A,C),A.right2left();else if(P===E[2])N(A,C);else if(P===E[3])N(A,C),A.bottom2top();else if(P===E[4]||P===E[5]){var L=y(A,C),z=L.left,X=L.right;N(z,C),N(X,C),C.isHorizontal?z.right2left():z.bottom2top(),X.translate(z.x-X.x,z.y-X.y),A.x=z.x,A.y=X.y;var re=A.getBoundingBox();C.isHorizontal?re.top<0&&A.translate(0,-re.top):re.left<0&&A.translate(-re.left,0)}var se=C.fixedRoot;return se===void 0&&(se=!0),se&&A.translate(-(A.x+A.width/2+A.hgap),-(A.y+A.height/2+A.vgap)),A}},function(S,g,d){var y=d(7),E={getId:function(p){return p.id||p.name},getPreH:function(p){return p.preH||0},getPreV:function(p){return p.preV||0},getHGap:function(p){return p.hgap||18},getVGap:function(p){return p.vgap||18},getChildren:function(p){return p.children},getHeight:function(p){return p.height||36},getWidth:function(p){var A=p.label||" ";return p.width||18*A.split("").length}};function b(p,A){var C=this;if(C.vgap=C.hgap=0,p instanceof b)return p;C.data=p;var N=A.getHGap(p),P=A.getVGap(p);return C.preH=A.getPreH(p),C.preV=A.getPreV(p),C.width=A.getWidth(p),C.height=A.getHeight(p),C.width+=C.preH,C.height+=C.preV,C.id=A.getId(p),C.x=C.y=0,C.depth=0,C.children||(C.children=[]),C.addGap(N,P),C}y.assign(b.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(p,A){this.hgap+=p,this.vgap+=A,this.width+=2*p,this.height+=2*A},eachNode:function(p){for(var A,C=[this];A=C.shift();)p(A),C=A.children.concat(C)},DFTraverse:function(p){this.eachNode(p)},BFTraverse:function(p){for(var A,C=[this];A=C.shift();)p(A),C=C.concat(A.children)},getBoundingBox:function(){var p={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(A){p.left=Math.min(p.left,A.x),p.top=Math.min(p.top,A.y),p.width=Math.max(p.width,A.x+A.width),p.height=Math.max(p.height,A.y+A.height)}),p},translate:function(p,A){p===void 0&&(p=0),A===void 0&&(A=0),this.eachNode(function(C){C.x+=p,C.y+=A,C.x+=C.preH,C.y+=C.preV})},right2left:function(){var p=this.getBoundingBox();this.eachNode(function(A){A.x=A.x-2*(A.x-p.left)-A.width}),this.translate(p.width,0)},bottom2top:function(){var p=this.getBoundingBox();this.eachNode(function(A){A.y=A.y-2*(A.y-p.top)-A.height}),this.translate(0,p.height)}}),S.exports=function(p,A,C){A===void 0&&(A={});var N,P=new b(p,A=y.assign({},E,A)),L=[P];if(!C&&!p.collapsed){for(;N=L.shift();)if(!N.data.collapsed){var z=A.getChildren(N.data),X=z?z.length:0;if(N.children=new Array(X),z&&X)for(var re=0;re<X;re++){var se=new b(z[re],A);N.children[re]=se,L.push(se),se.parent=N,se.depth=N.depth+1}}}return P}},function(S,g,d){"use strict";var y=d(6),E=d(20);g.a=function(b,p){var A=Object(E.a)(p),C=A.length;if(Object(y.a)(b))return!C;for(var N=0;N<C;N+=1){var P=A[N];if(p[P]!==b[P]||!(P in b))return!1}return!0}},function(S,g,d){"use strict";var y=d(2),E=d(3),b=Object.keys?function(p){return Object.keys(p)}:function(p){var A=[];return Object(y.a)(p,function(C,N){Object(E.a)(p)&&N==="prototype"||A.push(N)}),A};g.a=b},function(S,g,d){"use strict";var y=d(1),E=Array.prototype.splice;g.a=function(b,p){if(!Object(y.a)(b))return[];for(var A=b?p.length:0,C=A-1;A--;){var N=void 0,P=p[A];A!==C&&P===N||(N=P,E.call(b,P,1))}return b}},function(S,g,d){"use strict";var y=d(12),E=d(2);g.a=function(b){var p=[];return Object(E.a)(b,function(A){Object(y.a)(p,A)||p.push(A)}),p}},function(S,g,d){"use strict";var y=d(0),E=d(3),b=d(24);g.a=function(p,A){if(!A)return{0:p};if(!Object(E.a)(A)){var C=Object(y.a)(A)?A:A.replace(/\s+/g,"").split("*");A=function(N){for(var P="_",L=0,z=C.length;L<z;L++)P+=N[C[L]]&&N[C[L]].toString();return P}}return Object(b.a)(p,A)}},function(S,g,d){"use strict";var y=d(2),E=d(0),b=d(3),p=Object.prototype.hasOwnProperty;g.a=function(A,C){if(!C||!Object(E.a)(A))return{};var N,P={},L=Object(b.a)(C)?C:function(z){return z[C]};return Object(y.a)(A,function(z){N=L(z),p.call(P,N)?P[N].push(z):P[N]=[z]}),P}},function(S,g,d){"use strict";g.a=function(y,E){return y.hasOwnProperty(E)}},function(S,g,d){"use strict";var y=d(2),E=d(3),b=Object.values?function(p){return Object.values(p)}:function(p){var A=[];return Object(y.a)(p,function(C,N){Object(E.a)(p)&&N==="prototype"||A.push(C)}),A};g.a=b},function(S,g,d){"use strict";var y={}.toString;g.a=function(E){return y.call(E).replace(/^\[object /,"").replace(/]$/,"")}},function(S,g,d){"use strict";var y=Object.prototype;g.a=function(E){var b=E&&E.constructor;return E===(typeof b=="function"&&b.prototype||y)}},function(S,g,d){"use strict";var y=d(15),E=d(1),b=d(8);g.a=function p(A,C){if(A===C)return!0;if(!A||!C||Object(b.a)(A)||Object(b.a)(C))return!1;if(Object(E.a)(A)||Object(E.a)(C)){if(A.length!==C.length)return!1;for(var N=!0,P=0;P<A.length&&(N=p(A[P],C[P]));P++);return N}if(Object(y.a)(A)||Object(y.a)(C)){var L=Object.keys(A),z=Object.keys(C);if(L.length!==z.length)return!1;for(N=!0,P=0;P<L.length&&(N=p(A[L[P]],C[L[P]]));P++);return N}return!1}},function(S,g,d){var y=d(18);S.exports=function(E,b){for(var p=y(E.data,b,!0),A=y(E.data,b,!0),C=E.children.length,N=Math.round(C/2),P=b.getSide||function(X,re){return re<N?"right":"left"},L=0;L<C;L++){var z=E.children[L];P(z,L)==="right"?A.children.push(z):p.children.push(z)}return p.eachNode(function(X){X.isRoot()||(X.side="left")}),A.eachNode(function(X){X.isRoot()||(X.side="right")}),{left:p,right:A}}},function(S,g,d){var y={compactBox:d(32),dendrogram:d(114),indented:d(116),mindmap:d(118)};S.exports=y},function(S,g,d){var y=d(11),E=d(113),b=d(17),p=d(7),A=function(N){var P,L;function z(){return N.apply(this,arguments)||this}return L=N,(P=z).prototype=Object.create(L.prototype),P.prototype.constructor=P,P.__proto__=L,z.prototype.execute=function(){return b(this.rootNode,this.options,E)},z}(y),C={};S.exports=function(N,P){return P=p.assign({},C,P),new A(N,P).execute()}},function(S,g,d){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var y=d(12);d.d(g,"contains",function(){return y.a}),d.d(g,"includes",function(){return y.a});var E=d(34);d.d(g,"difference",function(){return E.a});var b=d(35);d.d(g,"find",function(){return b.a});var p=d(36);d.d(g,"findIndex",function(){return p.a});var A=d(37);d.d(g,"firstValue",function(){return A.a});var C=d(38);d.d(g,"flatten",function(){return C.a});var N=d(39);d.d(g,"flattenDeep",function(){return N.a});var P=d(40);d.d(g,"getRange",function(){return P.a});var L=d(41);d.d(g,"pull",function(){return L.a});var z=d(21);d.d(g,"pullAt",function(){return z.a});var X=d(42);d.d(g,"reduce",function(){return X.a});var re=d(43);d.d(g,"remove",function(){return re.a});var se=d(44);d.d(g,"sortBy",function(){return se.a});var ce=d(45);d.d(g,"union",function(){return ce.a});var xe=d(22);d.d(g,"uniq",function(){return xe.a});var ye=d(46);d.d(g,"valuesOfKey",function(){return ye.a});var W=d(47);d.d(g,"head",function(){return W.a});var Ie=d(48);d.d(g,"last",function(){return Ie.a});var ge=d(49);d.d(g,"startsWith",function(){return ge.a});var te=d(50);d.d(g,"endsWith",function(){return te.a});var H=d(14);d.d(g,"filter",function(){return H.a});var V=d(51);d.d(g,"every",function(){return V.a});var ie=d(52);d.d(g,"some",function(){return ie.a});var we=d(53);d.d(g,"group",function(){return we.a});var ke=d(24);d.d(g,"groupBy",function(){return ke.a});var oe=d(23);d.d(g,"groupToMap",function(){return oe.a});var J=d(54);d.d(g,"getWrapBehavior",function(){return J.a});var ee=d(55);d.d(g,"wrapBehavior",function(){return ee.a});var Y=d(56);d.d(g,"number2color",function(){return Y.a});var K=d(57);d.d(g,"parseRadius",function(){return K.a});var G=d(58);d.d(g,"clamp",function(){return G.a});var ne=d(59);d.d(g,"fixedBase",function(){return ne.a});var le=d(60);d.d(g,"isDecimal",function(){return le.a});var ue=d(61);d.d(g,"isEven",function(){return ue.a});var Q=d(62);d.d(g,"isInteger",function(){return Q.a});var he=d(63);d.d(g,"isNegative",function(){return he.a});var Se=d(64);d.d(g,"isNumberEqual",function(){return Se.a});var je=d(65);d.d(g,"isOdd",function(){return je.a});var Ae=d(66);d.d(g,"isPositive",function(){return Ae.a});var Ce=d(67);d.d(g,"maxBy",function(){return Ce.a});var Re=d(68);d.d(g,"minBy",function(){return Re.a});var Ee=d(69);d.d(g,"mod",function(){return Ee.a});var Le=d(70);d.d(g,"toDegree",function(){return Le.a});var Ke=d(71);d.d(g,"toInteger",function(){return Ke.a});var et=d(72);d.d(g,"toRadian",function(){return et.a});var ot=d(73);d.d(g,"forIn",function(){return ot.a});var dt=d(25);d.d(g,"has",function(){return dt.a});var At=d(74);d.d(g,"hasKey",function(){return At.a});var Tt=d(75);d.d(g,"hasValue",function(){return Tt.a});var jt=d(20);d.d(g,"keys",function(){return jt.a});var Kt=d(19);d.d(g,"isMatch",function(){return Kt.a});var Qt=d(26);d.d(g,"values",function(){return Qt.a});var rr=d(76);d.d(g,"lowerCase",function(){return rr.a});var or=d(77);d.d(g,"lowerFirst",function(){return or.a});var Mr=d(78);d.d(g,"substitute",function(){return Mr.a});var cr=d(79);d.d(g,"upperCase",function(){return cr.a});var yr=d(80);d.d(g,"upperFirst",function(){return yr.a});var br=d(27);d.d(g,"getType",function(){return br.a});var Xr=d(81);d.d(g,"isArguments",function(){return Xr.a});var gr=d(0);d.d(g,"isArray",function(){return gr.a});var xr=d(1);d.d(g,"isArrayLike",function(){return xr.a});var dr=d(82);d.d(g,"isBoolean",function(){return dr.a});var Br=d(83);d.d(g,"isDate",function(){return Br.a});var Rr=d(84);d.d(g,"isError",function(){return Rr.a});var pn=d(3);d.d(g,"isFunction",function(){return pn.a});var zr=d(85);d.d(g,"isFinite",function(){return zr.a});var Nr=d(6);d.d(g,"isNil",function(){return Nr.a});var Dr=d(86);d.d(g,"isNull",function(){return Dr.a});var rn=d(5);d.d(g,"isNumber",function(){return rn.a});var Ir=d(13);d.d(g,"isObject",function(){return Ir.a});var On=d(15);d.d(g,"isObjectLike",function(){return On.a});var In=d(9);d.d(g,"isPlainObject",function(){return In.a});var Dn=d(28);d.d(g,"isPrototype",function(){return Dn.a});var Rn=d(87);d.d(g,"isRegExp",function(){return Rn.a});var gn=d(8);d.d(g,"isString",function(){return gn.a});var Er=d(4);d.d(g,"isType",function(){return Er.a});var ln=d(88);d.d(g,"isUndefined",function(){return ln.a});var yn=d(89);d.d(g,"isElement",function(){return yn.a});var mn=d(90);d.d(g,"requestAnimationFrame",function(){return mn.a});var Qn=d(91);d.d(g,"clearAnimationFrame",function(){return Qn.a});var Un=d(92);d.d(g,"augment",function(){return Un.a});var ri=d(93);d.d(g,"clone",function(){return ri.a});var Ei=d(94);d.d(g,"debounce",function(){return Ei.a});var ni=d(95);d.d(g,"memoize",function(){return ni.a});var Bn=d(96);d.d(g,"deepMix",function(){return Bn.a});var wi=d(2);d.d(g,"each",function(){return wi.a});var Oi=d(97);d.d(g,"extend",function(){return Oi.a});var Wn=d(98);d.d(g,"indexOf",function(){return Wn.a});var ii=d(99);d.d(g,"isEmpty",function(){return ii.a});var Jn=d(29);d.d(g,"isEqual",function(){return Jn.a});var hi=d(100);d.d(g,"isEqualWith",function(){return hi.a});var Vn=d(101);d.d(g,"map",function(){return Vn.a});var oi=d(102);d.d(g,"mapValues",function(){return oi.a});var di=d(16);d.d(g,"mix",function(){return di.a}),d.d(g,"assign",function(){return di.a});var _i=d(103);d.d(g,"get",function(){return _i.a});var Xn=d(104);d.d(g,"set",function(){return Xn.a});var Yn=d(105);d.d(g,"pick",function(){return Yn.a});var Mi=d(106);d.d(g,"throttle",function(){return Mi.a});var Bi=d(107);d.d(g,"toArray",function(){return Bi.a});var Hn=d(10);d.d(g,"toString",function(){return Hn.a});var io=d(108);d.d(g,"uniqueId",function(){return io.a});var ci=d(109);d.d(g,"noop",function(){return ci.a});var li=d(110);d.d(g,"identity",function(){return li.a});var oo=d(111);d.d(g,"size",function(){return oo.a});var Ki=d(112);d.d(g,"Cache",function(){return Ki.a})},function(S,g,d){"use strict";var y=d(14),E=d(12);g.a=function(b,p){return p===void 0&&(p=[]),Object(y.a)(b,function(A){return!Object(E.a)(p,A)})}},function(S,g,d){"use strict";var y=d(3),E=d(19),b=d(0),p=d(9);g.a=function(A,C){if(!Object(b.a)(A))return null;var N;if(Object(y.a)(C)&&(N=C),Object(p.a)(C)&&(N=function(L){return Object(E.a)(L,C)}),N){for(var P=0;P<A.length;P+=1)if(N(A[P]))return A[P]}return null}},function(S,g,d){"use strict";g.a=function(y,E,b){b===void 0&&(b=0);for(var p=b;p<y.length;p++)if(E(y[p],p))return p;return-1}},function(S,g,d){"use strict";var y=d(6),E=d(0);g.a=function(b,p){for(var A=null,C=0;C<b.length;C++){var N=b[C][p];if(!Object(y.a)(N)){A=Object(E.a)(N)?N[0]:N;break}}return A}},function(S,g,d){"use strict";var y=d(0);g.a=function(E){if(!Object(y.a)(E))return[];for(var b=[],p=0;p<E.length;p++)b=b.concat(E[p]);return b}},function(S,g,d){"use strict";var y=d(0);g.a=function E(b,p){if(p===void 0&&(p=[]),Object(y.a)(b))for(var A=0;A<b.length;A+=1)E(b[A],p);else p.push(b);return p}},function(S,g,d){"use strict";var y=d(0),E=d(14);g.a=function(b){if(!(b=Object(E.a)(b,function(N){return!isNaN(N)})).length)return{min:0,max:0};if(Object(y.a)(b[0])){for(var p=[],A=0;A<b.length;A++)p=p.concat(b[A]);b=p}var C=Math.max.apply(null,b);return{min:Math.min.apply(null,b),max:C}}},function(S,g,d){"use strict";var y=Array.prototype,E=y.splice,b=y.indexOf;g.a=function(p){for(var A=[],C=1;C<arguments.length;C++)A[C-1]=arguments[C];for(var N=0;N<A.length;N++)for(var P=A[N],L=-1;(L=b.call(p,P))>-1;)E.call(p,L,1);return p}},function(S,g,d){"use strict";var y=d(2),E=d(0),b=d(9);g.a=function(p,A,C){if(!Object(E.a)(p)&&!Object(b.a)(p))return p;var N=C;return Object(y.a)(p,function(P,L){N=A(N,P,L)}),N}},function(S,g,d){"use strict";var y=d(1),E=d(21);g.a=function(b,p){var A=[];if(!Object(y.a)(b))return A;for(var C=-1,N=[],P=b.length;++C<P;){var L=b[C];p(L,C,b)&&(A.push(L),N.push(C))}return Object(E.a)(b,N),A}},function(S,g,d){"use strict";var y=d(0),E=d(8),b=d(3);g.a=function(p,A){var C;if(Object(b.a)(A))C=function(P,L){return A(P)-A(L)};else{var N=[];Object(E.a)(A)?N.push(A):Object(y.a)(A)&&(N=A),C=function(P,L){for(var z=0;z<N.length;z+=1){var X=N[z];if(P[X]>L[X])return 1;if(P[X]<L[X])return-1}return 0}}return p.sort(C),p}},function(S,g,d){"use strict";var y=d(22);g.a=function(){for(var E=[],b=0;b<arguments.length;b++)E[b]=arguments[b];return Object(y.a)([].concat.apply([],E))}},function(S,g,d){"use strict";var y=d(2),E=d(0),b=d(6);g.a=function(p,A){var C=[],N={};return p.forEach(function(P){var L=P[A];Object(b.a)(L)||(Object(E.a)(L)||(L=[L]),Object(y.a)(L,function(z){N[z]||(C.push(z),N[z]=!0)}))}),C}},function(S,g,d){"use strict";g.a=function(E){if(Object(y.a)(E))return E[0]};var y=d(1)},function(S,g,d){"use strict";g.a=function(E){if(Object(y.a)(E))return E[E.length-1]};var y=d(1)},function(S,g,d){"use strict";var y=d(0),E=d(8);g.a=function(b,p){return!(!Object(y.a)(b)&&!Object(E.a)(b))&&b[0]===p}},function(S,g,d){"use strict";var y=d(0),E=d(8);g.a=function(b,p){return!(!Object(y.a)(b)&&!Object(E.a)(b))&&b[b.length-1]===p}},function(S,g,d){"use strict";g.a=function(y,E){for(var b=0;b<y.length;b++)if(!E(y[b],b))return!1;return!0}},function(S,g,d){"use strict";g.a=function(y,E){for(var b=0;b<y.length;b++)if(E(y[b],b))return!0;return!1}},function(S,g,d){"use strict";var y=d(23);g.a=function(E,b){if(!b)return[E];var p=Object(y.a)(E,b),A=[];for(var C in p)A.push(p[C]);return A}},function(S,g,d){"use strict";g.a=function(y,E){return y["_wrap_"+E]}},function(S,g,d){"use strict";g.a=function(y,E){if(y["_wrap_"+E])return y["_wrap_"+E];var b=function(p){y[E](p)};return y["_wrap_"+E]=b,b}},function(S,g,d){"use strict";var y={};g.a=function(E){var b=y[E];if(!b){for(var p=E.toString(16),A=p.length;A<6;A++)p="0"+p;b="#"+p,y[E]=b}return b}},function(S,g,d){"use strict";var y=d(0);g.a=function(E){var b=0,p=0,A=0,C=0;return Object(y.a)(E)?E.length===1?b=p=A=C=E[0]:E.length===2?(b=A=E[0],p=C=E[1]):E.length===3?(b=E[0],p=C=E[1],A=E[2]):(b=E[0],p=E[1],A=E[2],C=E[3]):b=p=A=C=E,{r1:b,r2:p,r3:A,r4:C}}},function(S,g,d){"use strict";g.a=function(y,E,b){return y<E?E:y>b?b:y}},function(S,g,d){"use strict";g.a=function(y,E){var b=E.toString(),p=b.indexOf(".");if(p===-1)return Math.round(y);var A=b.substr(p+1).length;return A>20&&(A=20),parseFloat(y.toFixed(A))}},function(S,g,d){"use strict";var y=d(5);g.a=function(E){return Object(y.a)(E)&&E%1!=0}},function(S,g,d){"use strict";var y=d(5);g.a=function(E){return Object(y.a)(E)&&E%2==0}},function(S,g,d){"use strict";var y=d(5),E=Number.isInteger?Number.isInteger:function(b){return Object(y.a)(b)&&b%1==0};g.a=E},function(S,g,d){"use strict";var y=d(5);g.a=function(E){return Object(y.a)(E)&&E<0}},function(S,g,d){"use strict";g.a=function(y,E,b){return b===void 0&&(b=1e-5),Math.abs(y-E)<b}},function(S,g,d){"use strict";var y=d(5);g.a=function(E){return Object(y.a)(E)&&E%2!=0}},function(S,g,d){"use strict";var y=d(5);g.a=function(E){return Object(y.a)(E)&&E>0}},function(S,g,d){"use strict";var y=d(2),E=d(0),b=d(3);g.a=function(p,A){if(Object(E.a)(p)){var C,N,P=p[0];return C=Object(b.a)(A)?A(p[0]):p[0][A],Object(y.a)(p,function(L){(N=Object(b.a)(A)?A(L):L[A])>C&&(P=L,C=N)}),P}}},function(S,g,d){"use strict";var y=d(2),E=d(0),b=d(3);g.a=function(p,A){if(Object(E.a)(p)){var C,N,P=p[0];return C=Object(b.a)(A)?A(p[0]):p[0][A],Object(y.a)(p,function(L){(N=Object(b.a)(A)?A(L):L[A])<C&&(P=L,C=N)}),P}}},function(S,g,d){"use strict";g.a=function(y,E){return(y%E+E)%E}},function(S,g,d){"use strict";var y=180/Math.PI;g.a=function(E){return y*E}},function(S,g,d){"use strict";g.a=parseInt},function(S,g,d){"use strict";var y=Math.PI/180;g.a=function(E){return y*E}},function(S,g,d){"use strict";var y=d(2);g.a=y.a},function(S,g,d){"use strict";var y=d(25);g.a=y.a},function(S,g,d){"use strict";var y=d(12),E=d(26);g.a=function(b,p){return Object(y.a)(Object(E.a)(b),p)}},function(S,g,d){"use strict";var y=d(10);g.a=function(E){return Object(y.a)(E).toLowerCase()}},function(S,g,d){"use strict";var y=d(10);g.a=function(E){var b=Object(y.a)(E);return b.charAt(0).toLowerCase()+b.substring(1)}},function(S,g,d){"use strict";g.a=function(y,E){return y&&E?y.replace(/\\?\{([^{}]+)\}/g,function(b,p){return b.charAt(0)==="\\"?b.slice(1):E[p]===void 0?"":E[p]}):y}},function(S,g,d){"use strict";var y=d(10);g.a=function(E){return Object(y.a)(E).toUpperCase()}},function(S,g,d){"use strict";var y=d(10);g.a=function(E){var b=Object(y.a)(E);return b.charAt(0).toUpperCase()+b.substring(1)}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"Arguments")}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"Boolean")}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"Date")}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"Error")}},function(S,g,d){"use strict";var y=d(5);g.a=function(E){return Object(y.a)(E)&&isFinite(E)}},function(S,g,d){"use strict";g.a=function(y){return y===null}},function(S,g,d){"use strict";var y=d(4);g.a=function(E){return Object(y.a)(E,"RegExp")}},function(S,g,d){"use strict";g.a=function(y){return y===void 0}},function(S,g,d){"use strict";g.a=function(y){return y instanceof Element||y instanceof HTMLDocument}},function(S,g,d){"use strict";g.a=function(y){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(E){return setTimeout(E,16)})(y)}},function(S,g,d){"use strict";g.a=function(y){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(y)}},function(S,g,d){"use strict";var y=d(16),E=d(3);g.a=function(){for(var b=[],p=0;p<arguments.length;p++)b[p]=arguments[p];for(var A=b[0],C=1;C<b.length;C++){var N=b[C];Object(E.a)(N)&&(N=N.prototype),Object(y.a)(A.prototype,N)}}},function(S,g,d){"use strict";var y=d(0);g.a=function E(b){if(O(b)!=="object"||b===null)return b;var p;if(Object(y.a)(b)){p=[];for(var A=0,C=b.length;A<C;A++)O(b[A])==="object"&&b[A]!=null?p[A]=E(b[A]):p[A]=b[A]}else for(var N in p={},b)O(b[N])==="object"&&b[N]!=null?p[N]=E(b[N]):p[N]=b[N];return p}},function(S,g,d){"use strict";g.a=function(y,E,b){var p;return function(){var A=this,C=arguments,N=function(){p=null,b||y.apply(A,C)},P=b&&!p;clearTimeout(p),p=setTimeout(N,E),P&&y.apply(A,C)}}},function(S,g,d){"use strict";var y=d(3);g.a=function(E,b){if(!Object(y.a)(E))throw new TypeError("Expected a function");var p=function A(){for(var C=[],N=0;N<arguments.length;N++)C[N]=arguments[N];var P=b?b.apply(this,C):C[0],L=A.cache;if(L.has(P))return L.get(P);var z=E.apply(this,C);return L.set(P,z),z};return p.cache=new Map,p}},function(S,g,d){"use strict";var y=d(0),E=d(9);function b(p,A,C,N){for(var P in C=C||0,N=N||5,A)if(A.hasOwnProperty(P)){var L=A[P];L!==null&&Object(E.a)(L)?(Object(E.a)(p[P])||(p[P]={}),C<N?b(p[P],L,C+1,N):p[P]=A[P]):Object(y.a)(L)?(p[P]=[],p[P]=p[P].concat(L)):L!==void 0&&(p[P]=L)}}g.a=function(p){for(var A=[],C=1;C<arguments.length;C++)A[C-1]=arguments[C];for(var N=0;N<A.length;N+=1)b(p,A[N]);return p}},function(S,g,d){"use strict";var y=d(16),E=d(3);g.a=function(b,p,A,C){Object(E.a)(p)||(A=p,p=b,b=function(){});var N=Object.create?function(L,z){return Object.create(L,{constructor:{value:z}})}:function(L,z){function X(){}X.prototype=L;var re=new X;return re.constructor=z,re},P=N(p.prototype,b);return b.prototype=Object(y.a)(P,b.prototype),b.superclass=N(p.prototype,p),Object(y.a)(P,A),Object(y.a)(b,C),b}},function(S,g,d){"use strict";var y=d(1);g.a=function(E,b){if(!Object(y.a)(E))return-1;var p=Array.prototype.indexOf;if(p)return p.call(E,b);for(var A=-1,C=0;C<E.length;C++)if(E[C]===b){A=C;break}return A}},function(S,g,d){"use strict";var y=d(6),E=d(1),b=d(27),p=d(28),A=Object.prototype.hasOwnProperty;g.a=function(C){if(Object(y.a)(C))return!0;if(Object(E.a)(C))return!C.length;var N=Object(b.a)(C);if(N==="Map"||N==="Set")return!C.size;if(Object(p.a)(C))return!Object.keys(C).length;for(var P in C)if(A.call(C,P))return!1;return!0}},function(S,g,d){"use strict";var y=d(3),E=d(29);g.a=function(b,p,A){return Object(y.a)(A)?!!A(b,p):Object(E.a)(b,p)}},function(S,g,d){"use strict";var y=d(2),E=d(1);g.a=function(b,p){if(!Object(E.a)(b))return b;var A=[];return Object(y.a)(b,function(C,N){A.push(p(C,N))}),A}},function(S,g,d){"use strict";var y=d(6),E=d(13),b=function(p){return p};g.a=function(p,A){A===void 0&&(A=b);var C={};return Object(E.a)(p)&&!Object(y.a)(p)&&Object.keys(p).forEach(function(N){C[N]=A(p[N],N)}),C}},function(S,g,d){"use strict";var y=d(8);g.a=function(E,b,p){for(var A=0,C=Object(y.a)(b)?b.split("."):b;E&&A<C.length;)E=E[C[A++]];return E===void 0||A<C.length?p:E}},function(S,g,d){"use strict";var y=d(13),E=d(8),b=d(5);g.a=function(p,A,C){var N=p,P=Object(E.a)(A)?A.split("."):A;return P.forEach(function(L,z){z<P.length-1?(Object(y.a)(N[L])||(N[L]=Object(b.a)(P[z+1])?[]:{}),N=N[L]):N[L]=C}),p}},function(S,g,d){"use strict";var y=d(2),E=d(9),b=Object.prototype.hasOwnProperty;g.a=function(p,A){if(p===null||!Object(E.a)(p))return{};var C={};return Object(y.a)(A,function(N){b.call(p,N)&&(C[N]=p[N])}),C}},function(S,g,d){"use strict";g.a=function(y,E,b){var p,A,C,N,P=0;b||(b={});var L=function(){P=b.leading===!1?0:Date.now(),p=null,N=y.apply(A,C),p||(A=C=null)},z=function(){var X=Date.now();P||b.leading!==!1||(P=X);var re=E-(X-P);return A=this,C=arguments,re<=0||re>E?(p&&(clearTimeout(p),p=null),P=X,N=y.apply(A,C),p||(A=C=null)):p||b.trailing===!1||(p=setTimeout(L,re)),N};return z.cancel=function(){clearTimeout(p),P=0,p=A=C=null},z}},function(S,g,d){"use strict";var y=d(1);g.a=function(E){return Object(y.a)(E)?Array.prototype.slice.call(E):[]}},function(S,g,d){"use strict";var y={};g.a=function(E){return y[E=E||"g"]?y[E]+=1:y[E]=1,E+y[E]}},function(S,g,d){"use strict";g.a=function(){}},function(S,g,d){"use strict";g.a=function(y){return y}},function(S,g,d){"use strict";g.a=function(b){return Object(y.a)(b)?0:Object(E.a)(b)?b.length:Object.keys(b).length};var y=d(6),E=d(1)},function(S,g,d){"use strict";var y=function(){function E(){this.map={}}return E.prototype.has=function(b){return this.map[b]!==void 0},E.prototype.get=function(b,p){var A=this.map[b];return A===void 0?p:A},E.prototype.set=function(b,p){this.map[b]=p},E.prototype.clear=function(){this.map={}},E.prototype.delete=function(b){delete this.map[b]},E.prototype.size=function(){return Object.keys(this.map).length},E}();g.a=y},function(S,g){function d(E,b,p,A){A===void 0&&(A=[]);var C=this;C.w=E||0,C.h=b||0,C.y=p||0,C.x=0,C.c=A||[],C.cs=A.length,C.prelim=0,C.mod=0,C.shift=0,C.change=0,C.tl=null,C.tr=null,C.el=null,C.er=null,C.msel=0,C.mser=0}function y(E,b){var p=function A(C,N){var P=N?C.y:C.x;return C.children.forEach(function(L){P=Math.min(A(L,N),P)}),P}(E,b);(function A(C,N,P){P?C.y+=N:C.x+=N,C.children.forEach(function(L){A(L,N,P)})})(E,-p,b)}d.fromNode=function(E,b){if(!E)return null;var p=[];return E.children.forEach(function(A){p.push(d.fromNode(A,b))}),b?new d(E.height,E.width,E.x,p):new d(E.width,E.height,E.y,p)},S.exports=function(E,b){b===void 0&&(b={});var p=b.isHorizontal;function A(se){se.cs===0?(se.el=se,se.er=se,se.msel=se.mser=0):(se.el=se.c[0].el,se.msel=se.c[0].msel,se.er=se.c[se.cs-1].er,se.mser=se.c[se.cs-1].mser)}function C(se,ce,xe){for(var ye=se.c[ce-1],W=ye.mod,Ie=se.c[ce],ge=Ie.mod;ye!==null&&Ie!==null;){z(ye)>xe.low&&(xe=xe.nxt);var te=W+ye.prelim+ye.w-(ge+Ie.prelim);te>0&&(ge+=te,N(se,ce,xe.index,te));var H=z(ye),V=z(Ie);H<=V&&(ye=L(ye))!==null&&(W+=ye.mod),H>=V&&(Ie=P(Ie))!==null&&(ge+=Ie.mod)}!ye&&Ie?function(ie,we,ke,oe){var J=ie.c[0].el;J.tl=ke;var ee=oe-ke.mod-ie.c[0].msel;J.mod+=ee,J.prelim-=ee,ie.c[0].el=ie.c[we].el,ie.c[0].msel=ie.c[we].msel}(se,ce,Ie,ge):ye&&!Ie&&function(ie,we,ke,oe){var J=ie.c[we].er;J.tr=ke;var ee=oe-ke.mod-ie.c[we].mser;J.mod+=ee,J.prelim-=ee,ie.c[we].er=ie.c[we-1].er,ie.c[we].mser=ie.c[we-1].mser}(se,ce,ye,W)}function N(se,ce,xe,ye){se.c[ce].mod+=ye,se.c[ce].msel+=ye,se.c[ce].mser+=ye,function(W,Ie,ge,te){if(ge!==Ie-1){var H=Ie-ge;W.c[ge+1].shift+=te/H,W.c[Ie].shift-=te/H,W.c[Ie].change-=te-te/H}}(se,ce,xe,ye)}function P(se){return se.cs===0?se.tl:se.c[0]}function L(se){return se.cs===0?se.tr:se.c[se.cs-1]}function z(se){return se.y+se.h}function X(se,ce,xe){for(;xe!==null&&se>=xe.low;)xe=xe.nxt;return{low:se,index:ce,nxt:xe}}(function se(ce,xe,ye){ye===void 0&&(ye=0),xe?(ce.x=ye,ye+=ce.width):(ce.y=ye,ye+=ce.height),ce.children.forEach(function(W){se(W,xe,ye)})})(E,p);var re=d.fromNode(E,p);return function se(ce){if(ce.cs!==0){se(ce.c[0]);for(var xe=X(z(ce.c[0].el),0,null),ye=1;ye<ce.cs;++ye){se(ce.c[ye]);var W=z(ce.c[ye].er);C(ce,ye,xe),xe=X(W,ye,xe)}(function(Ie){Ie.prelim=(Ie.c[0].prelim+Ie.c[0].mod+Ie.c[Ie.cs-1].mod+Ie.c[Ie.cs-1].prelim+Ie.c[Ie.cs-1].w)/2-Ie.w/2})(ce),A(ce)}else A(ce)}(re),function se(ce,xe){xe+=ce.mod,ce.x=ce.prelim+xe,function(W){for(var Ie=0,ge=0,te=0;te<W.cs;te++)Ie+=W.c[te].shift,ge+=Ie+W.c[te].change,W.c[te].mod+=ge}(ce);for(var ye=0;ye<ce.cs;ye++)se(ce.c[ye],xe)}(re,0),function se(ce,xe,ye){ye?xe.y=ce.x:xe.x=ce.x,ce.c.forEach(function(W,Ie){se(W,xe.children[Ie],ye)})}(re,E,p),y(E,p),E}},function(S,g,d){var y=d(11),E=d(115),b=d(17),p=d(7),A=function(N){var P,L;function z(){return N.apply(this,arguments)||this}return L=N,(P=z).prototype=Object.create(L.prototype),P.prototype.constructor=P,P.__proto__=L,z.prototype.execute=function(){return this.rootNode.width=0,b(this.rootNode,this.options,E)},z}(y),C={};S.exports=function(N,P){return P=p.assign({},C,P),new A(N,P).execute()}},function(S,g,d){var y=d(7);function E(p,A){p===void 0&&(p=0),A===void 0&&(A=[]);var C=this;C.x=C.y=0,C.leftChild=C.rightChild=null,C.height=0,C.children=A}var b={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};S.exports=function(p,A){A===void 0&&(A={}),A=y.assign({},b,A);var C,N=0,P=function L(z){if(!z)return null;z.width=0,z.depth&&z.depth>N&&(N=z.depth);var X=z.children,re=X.length,se=new E(z.height,[]);return X.forEach(function(ce,xe){var ye=L(ce);se.children.push(ye),xe===0&&(se.leftChild=ye),xe===re-1&&(se.rightChild=ye)}),se.originNode=z,se.isLeaf=z.isLeaf(),se}(p);return function L(z){if(z.isLeaf||z.children.length===0)z.drawingDepth=N;else{var X=z.children.map(function(se){return L(se)}),re=Math.min.apply(null,X);z.drawingDepth=re-1}return z.drawingDepth}(P),function L(z){z.x=z.drawingDepth*A.rankSep,z.isLeaf?(z.y=0,C&&(z.y=C.y+C.height+A.nodeSep,z.originNode.parent!==C.originNode.parent&&(z.y+=A.subTreeSep)),C=z):(z.children.forEach(function(X){L(X)}),z.y=(z.leftChild.y+z.rightChild.y)/2)}(P),function L(z,X,re){re?(X.x=z.x,X.y=z.y):(X.x=z.y,X.y=z.x),z.children.forEach(function(se,ce){L(se,X.children[ce],re)})}(P,p,A.isHorizontal),p}},function(S,g,d){var y=d(11),E=d(117),b=d(30),p=d(7),A=["LR","RL","H"],C=A[0],N=function(L){var z,X;function re(){return L.apply(this,arguments)||this}return X=L,(z=re).prototype=Object.create(X.prototype),z.prototype.constructor=z,z.__proto__=X,re.prototype.execute=function(){var se=this.options,ce=this.rootNode;se.isHorizontal=!0;var xe=se.indent,ye=xe===void 0?20:xe,W=se.dropCap,Ie=W===void 0||W,ge=se.direction||C;if(ge&&A.indexOf(ge)===-1)throw new TypeError("Invalid direction: "+ge);if(ge===A[0])E(ce,ye,Ie);else if(ge===A[1])E(ce,ye,Ie),ce.right2left();else if(ge===A[2]){var te=b(ce,se),H=te.left,V=te.right;E(H,ye,Ie),H.right2left(),E(V,ye,Ie);var ie=H.getBoundingBox();V.translate(ie.width,0),ce.x=V.x-ce.width/2}return ce},re}(y),P={};S.exports=function(L,z){return z=p.assign({},P,z),new N(L,z).execute()}},function(S,g){S.exports=function(d,y,E){var b=null;d.eachNode(function(p){(function(A,C,N,P){if(!P)try{if(A.id===A.parent.children[0].id)return A.x+=N*A.depth,void(A.y=C?C.y:0)}catch(L){}A.x+=N*A.depth,A.y=C?C.y+C.height:0})(p,b,y,E),b=p})}},function(S,g,d){var y=d(11),E=d(119),b=d(17),p=d(7),A=function(N){var P,L;function z(){return N.apply(this,arguments)||this}return L=N,(P=z).prototype=Object.create(L.prototype),P.prototype.constructor=P,P.__proto__=L,z.prototype.execute=function(){return b(this.rootNode,this.options,E)},z}(y),C={};S.exports=function(N,P){return P=p.assign({},C,P),new A(N,P).execute()}},function(S,g,d){var y=d(7),E={getSubTreeSep:function(){return 0}};S.exports=function(b,p){p===void 0&&(p={}),p=y.assign({},E,p),b.parent={x:0,width:0,height:0,y:0},b.BFTraverse(function(A){A.x=A.parent.x+A.parent.width}),b.parent=null,function A(C,N){var P=0;return C.children.length?C.children.forEach(function(L){P+=A(L,N)}):P=C.height,C._subTreeSep=N.getSubTreeSep(C.data),C.totalHeight=Math.max(C.height,P)+2*C._subTreeSep,C.totalHeight}(b,p),b.startY=0,b.y=b.totalHeight/2-b.height/2,b.eachNode(function(A){var C=A.children,N=C.length;if(N){var P=C[0];if(P.startY=A.startY+A._subTreeSep,N===1)P.y=A.y+A.height/2-P.height/2;else{P.y=P.startY+P.totalHeight/2-P.height/2;for(var L=1;L<N;L++){var z=C[L];z.startY=C[L-1].startY+C[L-1].totalHeight,z.y=z.startY+z.totalHeight/2-z.height/2}}}}),function A(C){var N=C.children,P=N.length;if(P){N.forEach(function(ce){A(ce)});var L=N[0],z=N[P-1],X=z.y-L.y+z.height,re=0;if(N.forEach(function(ce){re+=ce.totalHeight}),X>C.height)C.y=L.y+X/2-C.height/2;else if(N.length!==1||C.height>re){var se=C.y+(C.height-X)/2-L.y;N.forEach(function(ce){ce.translate(0,se)})}else C.y=(L.y+L.height/2+z.y+z.height/2)/2-C.height/2}}(b)}}])},O(m)==="object"&&O(f)==="object"?f.exports=x():(M=[],(_=typeof(c=x)=="function"?c.apply(m,M):c)===void 0||(f.exports=_))}).call(this,o(87)(D))},function(D,m,o){"use strict";function f(p){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(p)}var c=o(298),M=o(302),_=[].slice,x=["keyword","gray","hex"],O={};Object.keys(M).forEach(function(p){O[_.call(M[p].labels).sort().join("")]=p});var S={};function g(p,A){if(!(this instanceof g))return new g(p,A);if(A&&A in x&&(A=null),A&&!(A in M))throw new Error("Unknown model: "+A);var C,N;if(p==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(p instanceof g)this.model=p.model,this.color=p.color.slice(),this.valpha=p.valpha;else if(typeof p=="string"){var P=c.get(p);if(P===null)throw new Error("Unable to parse color from string: "+p);this.model=P.model,N=M[this.model].channels,this.color=P.value.slice(0,N),this.valpha=typeof P.value[N]=="number"?P.value[N]:1}else if(p.length){this.model=A||"rgb",N=M[this.model].channels;var L=_.call(p,0,N);this.color=b(L,N),this.valpha=typeof p[N]=="number"?p[N]:1}else if(typeof p=="number")p&=16777215,this.model="rgb",this.color=[p>>16&255,p>>8&255,255&p],this.valpha=1;else{this.valpha=1;var z=Object.keys(p);"alpha"in p&&(z.splice(z.indexOf("alpha"),1),this.valpha=typeof p.alpha=="number"?p.alpha:0);var X=z.sort().join("");if(!(X in O))throw new Error("Unable to parse color from object: "+JSON.stringify(p));this.model=O[X];var re=M[this.model].labels,se=[];for(C=0;C<re.length;C++)se.push(p[re[C]]);this.color=b(se)}if(S[this.model])for(N=M[this.model].channels,C=0;C<N;C++){var ce=S[this.model][C];ce&&(this.color[C]=ce(this.color[C]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function d(p,A,C){return(p=Array.isArray(p)?p:[p]).forEach(function(N){(S[N]||(S[N]=[]))[A]=C}),p=p[0],function(N){var P;return arguments.length?(C&&(N=C(N)),(P=this[p]()).color[A]=N,P):(P=this[p]().color[A],C&&(P=C(P)),P)}}function y(p){return function(A){return Math.max(0,Math.min(p,A))}}function E(p){return Array.isArray(p)?p:[p]}function b(p,A){for(var C=0;C<A;C++)typeof p[C]!="number"&&(p[C]=0);return p}g.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(p){var A=this.model in c.to?this:this.rgb(),C=(A=A.round(typeof p=="number"?p:1)).valpha===1?A.color:A.color.concat(this.valpha);return c.to[A.model](C)},percentString:function(p){var A=this.rgb().round(typeof p=="number"?p:1),C=A.valpha===1?A.color:A.color.concat(this.valpha);return c.to.rgb.percent(C)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var p={},A=M[this.model].channels,C=M[this.model].labels,N=0;N<A;N++)p[C[N]]=this.color[N];return this.valpha!==1&&(p.alpha=this.valpha),p},unitArray:function(){var p=this.rgb().color;return p[0]/=255,p[1]/=255,p[2]/=255,this.valpha!==1&&p.push(this.valpha),p},unitObject:function(){var p=this.rgb().object();return p.r/=255,p.g/=255,p.b/=255,this.valpha!==1&&(p.alpha=this.valpha),p},round:function(p){return p=Math.max(p||0,0),new g(this.color.map(function(A){return function(C){return function(N,P){return Number(N.toFixed(P))}(C,A)}}(p)).concat(this.valpha),this.model)},alpha:function(p){return arguments.length?new g(this.color.concat(Math.max(0,Math.min(1,p))),this.model):this.valpha},red:d("rgb",0,y(255)),green:d("rgb",1,y(255)),blue:d("rgb",2,y(255)),hue:d(["hsl","hsv","hsl","hwb","hcg"],0,function(p){return(p%360+360)%360}),saturationl:d("hsl",1,y(100)),lightness:d("hsl",2,y(100)),saturationv:d("hsv",1,y(100)),value:d("hsv",2,y(100)),chroma:d("hcg",1,y(100)),gray:d("hcg",2,y(100)),white:d("hwb",1,y(100)),wblack:d("hwb",2,y(100)),cyan:d("cmyk",0,y(100)),magenta:d("cmyk",1,y(100)),yellow:d("cmyk",2,y(100)),black:d("cmyk",3,y(100)),x:d("xyz",0,y(100)),y:d("xyz",1,y(100)),z:d("xyz",2,y(100)),l:d("lab",0,y(100)),a:d("lab",1),b:d("lab",2),keyword:function(p){return arguments.length?new g(p):M[this.model].keyword(this.color)},hex:function(p){return arguments.length?new g(p):c.to.hex(this.rgb().round().color)},rgbNumber:function(){var p=this.rgb().color;return(255&p[0])<<16|(255&p[1])<<8|255&p[2]},luminosity:function(){for(var p=this.rgb().color,A=[],C=0;C<p.length;C++){var N=p[C]/255;A[C]=N<=.03928?N/12.92:Math.pow((N+.055)/1.055,2.4)}return .2126*A[0]+.7152*A[1]+.0722*A[2]},contrast:function(p){var A=this.luminosity(),C=p.luminosity();return A>C?(A+.05)/(C+.05):(C+.05)/(A+.05)},level:function(p){var A=this.contrast(p);return A>=7.1?"AAA":A>=4.5?"AA":""},isDark:function(){var p=this.rgb().color;return(299*p[0]+587*p[1]+114*p[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var p=this.rgb(),A=0;A<3;A++)p.color[A]=255-p.color[A];return p},lighten:function(p){var A=this.hsl();return A.color[2]+=A.color[2]*p,A},darken:function(p){var A=this.hsl();return A.color[2]-=A.color[2]*p,A},saturate:function(p){var A=this.hsl();return A.color[1]+=A.color[1]*p,A},desaturate:function(p){var A=this.hsl();return A.color[1]-=A.color[1]*p,A},whiten:function(p){var A=this.hwb();return A.color[1]+=A.color[1]*p,A},blacken:function(p){var A=this.hwb();return A.color[2]+=A.color[2]*p,A},grayscale:function(){var p=this.rgb().color,A=.3*p[0]+.59*p[1]+.11*p[2];return g.rgb(A,A,A)},fade:function(p){return this.alpha(this.valpha-this.valpha*p)},opaquer:function(p){return this.alpha(this.valpha+this.valpha*p)},rotate:function(p){var A=this.hsl(),C=A.color[0];return C=(C=(C+p)%360)<0?360+C:C,A.color[0]=C,A},mix:function(p,A){if(!p||!p.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+f(p));var C=p.rgb(),N=this.rgb(),P=A===void 0?.5:A,L=2*P-1,z=C.alpha()-N.alpha(),X=((L*z==-1?L:(L+z)/(1+L*z))+1)/2,re=1-X;return g.rgb(X*C.red()+re*N.red(),X*C.green()+re*N.green(),X*C.blue()+re*N.blue(),C.alpha()*P+N.alpha()*(1-P))}},Object.keys(M).forEach(function(p){if(x.indexOf(p)===-1){var A=M[p].channels;g.prototype[p]=function(){if(this.model===p)return new g(this);if(arguments.length)return new g(arguments,p);var C=typeof arguments[A]=="number"?A:this.valpha;return new g(E(M[this.model][p].raw(this.color)).concat(C),p)},g[p]=function(C){return typeof C=="number"&&(C=b(_.call(arguments),A)),new g(C,p)}}}),D.exports=g},function(D,m,o){var f=o(63),c=o(43);D.exports=function(M){if(!c(M))return!1;var _=f(M);return _=="[object Function]"||_=="[object GeneratorFunction]"||_=="[object AsyncFunction]"||_=="[object Proxy]"}},function(D,m,o){var f=o(101),c=o(102);D.exports=function(M,_,x,O){var S=!x;x||(x={});for(var g=-1,d=_.length;++g<d;){var y=_[g],E=O?O(x[y],M[y],y,x,M):void 0;E===void 0&&(E=M[y]),S?c(x,y,E):f(x,y,E)}return x}},function(D,m,o){var f=o(338),c=o(49),M=Object.prototype,_=M.hasOwnProperty,x=M.propertyIsEnumerable,O=f(function(){return arguments}())?f:function(S){return c(S)&&_.call(S,"callee")&&!x.call(S,"callee")};D.exports=O},function(D,m){D.exports=function(o){return o.webpackPolyfill||(o.deprecate=function(){},o.paths=[],o.children||(o.children=[]),Object.defineProperty(o,"loaded",{enumerable:!0,get:function(){return o.l}}),Object.defineProperty(o,"id",{enumerable:!0,get:function(){return o.i}}),o.webpackPolyfill=1),o}},function(D,m,o){var f=o(340),c=o(104),M=o(148),_=M&&M.isTypedArray,x=_?c(_):f;D.exports=x},function(D,m,o){var f=o(74);D.exports=function(c){if(typeof c=="string"||f(c))return c;var M=c+"";return M=="0"&&1/c==-1/0?"-0":M}},function(D,m,o){"use strict";function f(x){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}Object.defineProperty(m,"__esModule",{value:!0}),m.circularDependencyToException=m.listMetadataForTarget=m.listRegisteredBindingsForServiceIdentifier=m.getServiceIdentifierAsString=m.getFunctionName=void 0;var c=o(40);function M(x){return typeof x=="function"?x.name:f(x)==="symbol"?x.toString():x}function _(x){if(x.name)return x.name;var O=x.toString(),S=O.match(/^function\s*([^\s(]+)/);return S?S[1]:"Anonymous function: "+O}m.getServiceIdentifierAsString=M,m.listRegisteredBindingsForServiceIdentifier=function(x,O,S){var g="",d=S(x,O);return d.length!==0&&(g=`
Registered bindings:`,d.forEach(function(y){var E="Object";y.implementationType!==null&&(E=_(y.implementationType)),g=g+`
 `+E,y.constraint.metaData&&(g=g+" - "+y.constraint.metaData)})),g},m.circularDependencyToException=function x(O){O.childRequests.forEach(function(S){if(function d(y,E){return y.parentRequest!==null&&(y.parentRequest.serviceIdentifier===E||d(y.parentRequest,E))}(S,S.serviceIdentifier)){var g=function(d){return function y(E,b){b===void 0&&(b=[]);var p=M(E.serviceIdentifier);return b.push(p),E.parentRequest!==null?y(E.parentRequest,b):b}(d).reverse().join(" --> ")}(S);throw new Error(c.CIRCULAR_DEPENDENCY+" "+g)}x(S)})},m.listMetadataForTarget=function(x,O){if(O.isTagged()||O.isNamed()){var S="",g=O.getNamedTag(),d=O.getCustomTags();return g!==null&&(S+=g.toString()+`
`),d!==null&&d.forEach(function(y){S+=y.toString()+`
`})," "+x+`
 `+x+" - "+S}return" "+x},m.getFunctionName=_},function(D,m,o){"use strict";o.d(m,"a",function(){return Ae}),o(228);var f,c,M,_,x,O=o(5),S=o(271),g=o.n(S),d=o(25),y=o(10),E=o.n(y),b=o(6),p=o.n(b),A=o(7),C=o.n(A),N=o(11),P=o.n(N),L=(o(29),o(13)),z=o(35),X=(f=Object(O.injectable)(),c=Object(O.inject)(L.a.RenderEngine),f((_=function(){function Ce(){p()(this,Ce),E()(this,"engine",x,this),this.resourcePool={}}return C()(Ce,[{key:"getOrCreateResource",value:function(Re){if(!this.resourcePool[Re.name]){var Ee=Re.descriptor,Le=Ee.width,Ke=Ee.height,et=Ee.usage;this.resourcePool[Re.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:Le,height:Ke,wrapS:z.a.CLAMP_TO_EDGE,wrapT:z.a.CLAMP_TO_EDGE,usage:et})})}return this.resourcePool[Re.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),Ce}(),x=P()(_.prototype,"engine",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=_))||M),re=o(132),se=o(134),ce=o(119),xe=o(120),ye=o(121),W=o(122),Ie=o(123),ge=o(124),te=o(81),H=o(68),V=o(50),ie=o(126),we=o(127),ke=o(23),oe=o.n(ke),J=o(24),ee=o.n(J),Y=o(18),K=o.n(Y);function G(Ce){var Re=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Ee){return!1}}();return function(){var Ee,Le=K()(Ce);if(Re){var Ke=K()(this).constructor;Ee=Reflect.construct(Le,arguments,Ke)}else Ee=Le.apply(this,arguments);return ee()(this,Ee)}}var ne=function(Ce){oe()(Ee,Ce);var Re=G(Ee);function Ee(Le){var Ke;return p()(this,Ee),(Ke=Re.call(this,Le)).name=void 0,Ke.name=Le.name||"",Ke}return Ee}(d.a),le=o(128),ue=o(129),Q=o(130),he=o(131),Se=o(133),je=new O.Container;g()(je,!1);function Ae(){var Ce=new O.Container;return Ce.parent=je,Ce.bind(L.a.Systems).to(le.a).inSingletonScope().whenTargetNamed(L.a.SceneGraphSystem),Ce.bind(L.a.Systems).to(re.a).inSingletonScope().whenTargetNamed(L.a.FrameGraphSystem),Ce.bind(L.a.Systems).to(ge.a).inSingletonScope().whenTargetNamed(L.a.MeshSystem),Ce.bind(L.a.Systems).to(ce.a).inSingletonScope().whenTargetNamed(L.a.GeometrySystem),Ce.bind(L.a.Systems).to(ye.a).inSingletonScope().whenTargetNamed(L.a.MaterialSystem),Ce.bind(L.a.Systems).to(ie.a).inSingletonScope().whenTargetNamed(L.a.RendererSystem),Ce.bind(L.a.ResourcePool).to(X).inSingletonScope(),Ce.bind(L.a.ConfigService).to(Q.a).inSingletonScope(),Ce.bind(L.a.InteractorService).to(he.a).inSingletonScope(),Ce.bind(L.a.RenderPass).to(V.a).inSingletonScope().whenTargetNamed(V.a.IDENTIFIER),Ce.bind(L.a.RenderPass).to(te.a).inSingletonScope().whenTargetNamed(te.a.IDENTIFIER),Ce.bind(L.a.RenderPass).to(H.a).inSingletonScope().whenTargetNamed(H.a.IDENTIFIER),Ce.bind(L.a.RenderPassFactory).toFactory(function(Re){return function(Ee){return Re.container.getNamed(L.a.RenderPass,Ee)}}),Ce}je.bind(L.a.ShaderModuleService).to(Se.a).inSingletonScope(),je.bind(L.a.NameComponentManager).toConstantValue(new d.b(ne)),je.bind(L.a.HierarchyComponentManager).toConstantValue(new d.b(we.a)),je.bind(L.a.TransformComponentManager).toConstantValue(new d.b(ue.a)),je.bind(L.a.MeshComponentManager).toConstantValue(new d.b(Ie.a)),je.bind(L.a.CullableComponentManager).toConstantValue(new d.b(W.a)),je.bind(L.a.GeometryComponentManager).toConstantValue(new d.b(se.a)),je.bind(L.a.MaterialComponentManager).toConstantValue(new d.b(xe.a))},function(D,m,o){"use strict";o.d(m,"a",function(){return x});var f=o(15);function c(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])}function M(O,S){return c(O)*c(S)?(O[0]*S[0]+O[1]*S[1])/(c(O)*c(S)):1}function _(O,S){return(O[0]*S[1]<O[1]*S[0]?-1:1)*Math.acos(M(O,S))}function x(O,S){var g=S[1],d=S[2],y=Object(f.m)(Object(f.o)(S[3]),2*Math.PI),E=S[4],b=S[5],p=O[0],A=O[1],C=S[6],N=S[7],P=Math.cos(y)*(p-C)/2+Math.sin(y)*(A-N)/2,L=-1*Math.sin(y)*(p-C)/2+Math.cos(y)*(A-N)/2,z=P*P/(g*g)+L*L/(d*d);z>1&&(g*=Math.sqrt(z),d*=Math.sqrt(z));var X=g*g*(L*L)+d*d*(P*P),re=X?Math.sqrt((g*g*(d*d)-X)/X):1;E===b&&(re*=-1),isNaN(re)&&(re=0);var se=d?re*g*L/d:0,ce=g?re*-d*P/g:0,xe=(p+C)/2+Math.cos(y)*se-Math.sin(y)*ce,ye=(A+N)/2+Math.sin(y)*se+Math.cos(y)*ce,W=[(P-se)/g,(L-ce)/d],Ie=[(-1*P-se)/g,(-1*L-ce)/d],ge=_([1,0],W),te=_(W,Ie);return M(W,Ie)<=-1&&(te=Math.PI),M(W,Ie)>=1&&(te=0),b===0&&te>0&&(te-=2*Math.PI),b===1&&te<0&&(te+=2*Math.PI),{cx:xe,cy:ye,rx:Object(f.j)(O,[C,N])?0:g,ry:Object(f.j)(O,[C,N])?0:d,startAngle:ge,endAngle:ge+te,xRotation:y,arcFlag:E,sweepFlag:b}}},function(D,m,o){var f;function c(M){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(M)}(function(M){var _=/^\s+/,x=/\s+$/,O=0,S=M.round,g=M.min,d=M.max,y=M.random;function E(Q,he){if(he=he||{},(Q=Q||"")instanceof E)return Q;if(!(this instanceof E))return new E(Q,he);var Se=function(je){var Ae={r:0,g:0,b:0},Ce=1,Re=null,Ee=null,Le=null,Ke=!1,et=!1;typeof je=="string"&&(je=function(Tt){Tt=Tt.replace(_,"").replace(x,"").toLowerCase();var jt,Kt=!1;if(te[Tt])Tt=te[Tt],Kt=!0;else if(Tt=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(jt=le.rgb.exec(Tt))?{r:jt[1],g:jt[2],b:jt[3]}:(jt=le.rgba.exec(Tt))?{r:jt[1],g:jt[2],b:jt[3],a:jt[4]}:(jt=le.hsl.exec(Tt))?{h:jt[1],s:jt[2],l:jt[3]}:(jt=le.hsla.exec(Tt))?{h:jt[1],s:jt[2],l:jt[3],a:jt[4]}:(jt=le.hsv.exec(Tt))?{h:jt[1],s:jt[2],v:jt[3]}:(jt=le.hsva.exec(Tt))?{h:jt[1],s:jt[2],v:jt[3],a:jt[4]}:(jt=le.hex8.exec(Tt))?{r:ke(jt[1]),g:ke(jt[2]),b:ke(jt[3]),a:Y(jt[4]),format:Kt?"name":"hex8"}:(jt=le.hex6.exec(Tt))?{r:ke(jt[1]),g:ke(jt[2]),b:ke(jt[3]),format:Kt?"name":"hex"}:(jt=le.hex4.exec(Tt))?{r:ke(jt[1]+""+jt[1]),g:ke(jt[2]+""+jt[2]),b:ke(jt[3]+""+jt[3]),a:Y(jt[4]+""+jt[4]),format:Kt?"name":"hex8"}:(jt=le.hex3.exec(Tt))?{r:ke(jt[1]+""+jt[1]),g:ke(jt[2]+""+jt[2]),b:ke(jt[3]+""+jt[3]),format:Kt?"name":"hex"}:!1}(je)),c(je)=="object"&&(ue(je.r)&&ue(je.g)&&ue(je.b)?(ot=je.r,dt=je.g,At=je.b,Ae={r:255*ie(ot,255),g:255*ie(dt,255),b:255*ie(At,255)},Ke=!0,et=String(je.r).substr(-1)==="%"?"prgb":"rgb"):ue(je.h)&&ue(je.s)&&ue(je.v)?(Re=J(je.s),Ee=J(je.v),Ae=function(Tt,jt,Kt){Tt=6*ie(Tt,360),jt=ie(jt,100),Kt=ie(Kt,100);var Qt=M.floor(Tt),rr=Tt-Qt,or=Kt*(1-jt),Mr=Kt*(1-rr*jt),cr=Kt*(1-(1-rr)*jt),yr=Qt%6;return{r:255*[Kt,Mr,or,or,cr,Kt][yr],g:255*[cr,Kt,Kt,Mr,or,or][yr],b:255*[or,or,cr,Kt,Kt,Mr][yr]}}(je.h,Re,Ee),Ke=!0,et="hsv"):ue(je.h)&&ue(je.s)&&ue(je.l)&&(Re=J(je.s),Le=J(je.l),Ae=function(Tt,jt,Kt){var Qt,rr,or;function Mr(br,Xr,gr){return gr<0&&(gr+=1),gr>1&&(gr-=1),gr<1/6?br+6*(Xr-br)*gr:gr<.5?Xr:gr<2/3?br+(Xr-br)*(2/3-gr)*6:br}if(Tt=ie(Tt,360),jt=ie(jt,100),Kt=ie(Kt,100),jt===0)Qt=rr=or=Kt;else{var cr=Kt<.5?Kt*(1+jt):Kt+jt-Kt*jt,yr=2*Kt-cr;Qt=Mr(yr,cr,Tt+1/3),rr=Mr(yr,cr,Tt),or=Mr(yr,cr,Tt-1/3)}return{r:255*Qt,g:255*rr,b:255*or}}(je.h,Re,Le),Ke=!0,et="hsl"),je.hasOwnProperty("a")&&(Ce=je.a));var ot,dt,At;return Ce=V(Ce),{ok:Ke,format:je.format||et,r:g(255,d(Ae.r,0)),g:g(255,d(Ae.g,0)),b:g(255,d(Ae.b,0)),a:Ce}}(Q);this._originalInput=Q,this._r=Se.r,this._g=Se.g,this._b=Se.b,this._a=Se.a,this._roundA=S(100*this._a)/100,this._format=he.format||Se.format,this._gradientType=he.gradientType,this._r<1&&(this._r=S(this._r)),this._g<1&&(this._g=S(this._g)),this._b<1&&(this._b=S(this._b)),this._ok=Se.ok,this._tc_id=O++}function b(Q,he,Se){Q=ie(Q,255),he=ie(he,255),Se=ie(Se,255);var je,Ae,Ce=d(Q,he,Se),Re=g(Q,he,Se),Ee=(Ce+Re)/2;if(Ce==Re)je=Ae=0;else{var Le=Ce-Re;switch(Ae=Ee>.5?Le/(2-Ce-Re):Le/(Ce+Re),Ce){case Q:je=(he-Se)/Le+(he<Se?6:0);break;case he:je=(Se-Q)/Le+2;break;case Se:je=(Q-he)/Le+4}je/=6}return{h:je,s:Ae,l:Ee}}function p(Q,he,Se){Q=ie(Q,255),he=ie(he,255),Se=ie(Se,255);var je,Ae,Ce=d(Q,he,Se),Re=g(Q,he,Se),Ee=Ce,Le=Ce-Re;if(Ae=Ce===0?0:Le/Ce,Ce==Re)je=0;else{switch(Ce){case Q:je=(he-Se)/Le+(he<Se?6:0);break;case he:je=(Se-Q)/Le+2;break;case Se:je=(Q-he)/Le+4}je/=6}return{h:je,s:Ae,v:Ee}}function A(Q,he,Se,je){var Ae=[oe(S(Q).toString(16)),oe(S(he).toString(16)),oe(S(Se).toString(16))];return je&&Ae[0].charAt(0)==Ae[0].charAt(1)&&Ae[1].charAt(0)==Ae[1].charAt(1)&&Ae[2].charAt(0)==Ae[2].charAt(1)?Ae[0].charAt(0)+Ae[1].charAt(0)+Ae[2].charAt(0):Ae.join("")}function C(Q,he,Se,je){return[oe(ee(je)),oe(S(Q).toString(16)),oe(S(he).toString(16)),oe(S(Se).toString(16))].join("")}function N(Q,he){he=he===0?0:he||10;var Se=E(Q).toHsl();return Se.s-=he/100,Se.s=we(Se.s),E(Se)}function P(Q,he){he=he===0?0:he||10;var Se=E(Q).toHsl();return Se.s+=he/100,Se.s=we(Se.s),E(Se)}function L(Q){return E(Q).desaturate(100)}function z(Q,he){he=he===0?0:he||10;var Se=E(Q).toHsl();return Se.l+=he/100,Se.l=we(Se.l),E(Se)}function X(Q,he){he=he===0?0:he||10;var Se=E(Q).toRgb();return Se.r=d(0,g(255,Se.r-S(-he/100*255))),Se.g=d(0,g(255,Se.g-S(-he/100*255))),Se.b=d(0,g(255,Se.b-S(-he/100*255))),E(Se)}function re(Q,he){he=he===0?0:he||10;var Se=E(Q).toHsl();return Se.l-=he/100,Se.l=we(Se.l),E(Se)}function se(Q,he){var Se=E(Q).toHsl(),je=(Se.h+he)%360;return Se.h=je<0?360+je:je,E(Se)}function ce(Q){var he=E(Q).toHsl();return he.h=(he.h+180)%360,E(he)}function xe(Q){var he=E(Q).toHsl(),Se=he.h;return[E(Q),E({h:(Se+120)%360,s:he.s,l:he.l}),E({h:(Se+240)%360,s:he.s,l:he.l})]}function ye(Q){var he=E(Q).toHsl(),Se=he.h;return[E(Q),E({h:(Se+90)%360,s:he.s,l:he.l}),E({h:(Se+180)%360,s:he.s,l:he.l}),E({h:(Se+270)%360,s:he.s,l:he.l})]}function W(Q){var he=E(Q).toHsl(),Se=he.h;return[E(Q),E({h:(Se+72)%360,s:he.s,l:he.l}),E({h:(Se+216)%360,s:he.s,l:he.l})]}function Ie(Q,he,Se){he=he||6,Se=Se||30;var je=E(Q).toHsl(),Ae=360/Se,Ce=[E(Q)];for(je.h=(je.h-(Ae*he>>1)+720)%360;--he;)je.h=(je.h+Ae)%360,Ce.push(E(je));return Ce}function ge(Q,he){he=he||6;for(var Se=E(Q).toHsv(),je=Se.h,Ae=Se.s,Ce=Se.v,Re=[],Ee=1/he;he--;)Re.push(E({h:je,s:Ae,v:Ce})),Ce=(Ce+Ee)%1;return Re}E.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Q=this.toRgb();return(299*Q.r+587*Q.g+114*Q.b)/1e3},getLuminance:function(){var Q,he,Se,je=this.toRgb();return Q=je.r/255,he=je.g/255,Se=je.b/255,.2126*(Q<=.03928?Q/12.92:M.pow((Q+.055)/1.055,2.4))+.7152*(he<=.03928?he/12.92:M.pow((he+.055)/1.055,2.4))+.0722*(Se<=.03928?Se/12.92:M.pow((Se+.055)/1.055,2.4))},setAlpha:function(Q){return this._a=V(Q),this._roundA=S(100*this._a)/100,this},toHsv:function(){var Q=p(this._r,this._g,this._b);return{h:360*Q.h,s:Q.s,v:Q.v,a:this._a}},toHsvString:function(){var Q=p(this._r,this._g,this._b),he=S(360*Q.h),Se=S(100*Q.s),je=S(100*Q.v);return this._a==1?"hsv("+he+", "+Se+"%, "+je+"%)":"hsva("+he+", "+Se+"%, "+je+"%, "+this._roundA+")"},toHsl:function(){var Q=b(this._r,this._g,this._b);return{h:360*Q.h,s:Q.s,l:Q.l,a:this._a}},toHslString:function(){var Q=b(this._r,this._g,this._b),he=S(360*Q.h),Se=S(100*Q.s),je=S(100*Q.l);return this._a==1?"hsl("+he+", "+Se+"%, "+je+"%)":"hsla("+he+", "+Se+"%, "+je+"%, "+this._roundA+")"},toHex:function(Q){return A(this._r,this._g,this._b,Q)},toHexString:function(Q){return"#"+this.toHex(Q)},toHex8:function(Q){return function(he,Se,je,Ae,Ce){var Re=[oe(S(he).toString(16)),oe(S(Se).toString(16)),oe(S(je).toString(16)),oe(ee(Ae))];return Ce&&Re[0].charAt(0)==Re[0].charAt(1)&&Re[1].charAt(0)==Re[1].charAt(1)&&Re[2].charAt(0)==Re[2].charAt(1)&&Re[3].charAt(0)==Re[3].charAt(1)?Re[0].charAt(0)+Re[1].charAt(0)+Re[2].charAt(0)+Re[3].charAt(0):Re.join("")}(this._r,this._g,this._b,this._a,Q)},toHex8String:function(Q){return"#"+this.toHex8(Q)},toRgb:function(){return{r:S(this._r),g:S(this._g),b:S(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+S(this._r)+", "+S(this._g)+", "+S(this._b)+")":"rgba("+S(this._r)+", "+S(this._g)+", "+S(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:S(100*ie(this._r,255))+"%",g:S(100*ie(this._g,255))+"%",b:S(100*ie(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+S(100*ie(this._r,255))+"%, "+S(100*ie(this._g,255))+"%, "+S(100*ie(this._b,255))+"%)":"rgba("+S(100*ie(this._r,255))+"%, "+S(100*ie(this._g,255))+"%, "+S(100*ie(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(H[A(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Q){var he="#"+C(this._r,this._g,this._b,this._a),Se=he,je=this._gradientType?"GradientType = 1, ":"";if(Q){var Ae=E(Q);Se="#"+C(Ae._r,Ae._g,Ae._b,Ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+je+"startColorstr="+he+",endColorstr="+Se+")"},toString:function(Q){var he=!!Q;Q=Q||this._format;var Se=!1,je=this._a<1&&this._a>=0;return he||!je||Q!=="hex"&&Q!=="hex6"&&Q!=="hex3"&&Q!=="hex4"&&Q!=="hex8"&&Q!=="name"?(Q==="rgb"&&(Se=this.toRgbString()),Q==="prgb"&&(Se=this.toPercentageRgbString()),Q!=="hex"&&Q!=="hex6"||(Se=this.toHexString()),Q==="hex3"&&(Se=this.toHexString(!0)),Q==="hex4"&&(Se=this.toHex8String(!0)),Q==="hex8"&&(Se=this.toHex8String()),Q==="name"&&(Se=this.toName()),Q==="hsl"&&(Se=this.toHslString()),Q==="hsv"&&(Se=this.toHsvString()),Se||this.toHexString()):Q==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return E(this.toString())},_applyModification:function(Q,he){var Se=Q.apply(null,[this].concat([].slice.call(he)));return this._r=Se._r,this._g=Se._g,this._b=Se._b,this.setAlpha(Se._a),this},lighten:function(){return this._applyModification(z,arguments)},brighten:function(){return this._applyModification(X,arguments)},darken:function(){return this._applyModification(re,arguments)},desaturate:function(){return this._applyModification(N,arguments)},saturate:function(){return this._applyModification(P,arguments)},greyscale:function(){return this._applyModification(L,arguments)},spin:function(){return this._applyModification(se,arguments)},_applyCombination:function(Q,he){return Q.apply(null,[this].concat([].slice.call(he)))},analogous:function(){return this._applyCombination(Ie,arguments)},complement:function(){return this._applyCombination(ce,arguments)},monochromatic:function(){return this._applyCombination(ge,arguments)},splitcomplement:function(){return this._applyCombination(W,arguments)},triad:function(){return this._applyCombination(xe,arguments)},tetrad:function(){return this._applyCombination(ye,arguments)}},E.fromRatio=function(Q,he){if(c(Q)=="object"){var Se={};for(var je in Q)Q.hasOwnProperty(je)&&(Se[je]=je==="a"?Q[je]:J(Q[je]));Q=Se}return E(Q,he)},E.equals=function(Q,he){return!(!Q||!he)&&E(Q).toRgbString()==E(he).toRgbString()},E.random=function(){return E.fromRatio({r:y(),g:y(),b:y()})},E.mix=function(Q,he,Se){Se=Se===0?0:Se||50;var je=E(Q).toRgb(),Ae=E(he).toRgb(),Ce=Se/100;return E({r:(Ae.r-je.r)*Ce+je.r,g:(Ae.g-je.g)*Ce+je.g,b:(Ae.b-je.b)*Ce+je.b,a:(Ae.a-je.a)*Ce+je.a})},E.readability=function(Q,he){var Se=E(Q),je=E(he);return(M.max(Se.getLuminance(),je.getLuminance())+.05)/(M.min(Se.getLuminance(),je.getLuminance())+.05)},E.isReadable=function(Q,he,Se){var je,Ae,Ce=E.readability(Q,he);switch(Ae=!1,(je=function(Re){var Ee,Le;return Ee=((Re=Re||{level:"AA",size:"small"}).level||"AA").toUpperCase(),Le=(Re.size||"small").toLowerCase(),Ee!=="AA"&&Ee!=="AAA"&&(Ee="AA"),Le!=="small"&&Le!=="large"&&(Le="small"),{level:Ee,size:Le}}(Se)).level+je.size){case"AAsmall":case"AAAlarge":Ae=Ce>=4.5;break;case"AAlarge":Ae=Ce>=3;break;case"AAAsmall":Ae=Ce>=7}return Ae},E.mostReadable=function(Q,he,Se){var je,Ae,Ce,Re,Ee=null,Le=0;Ae=(Se=Se||{}).includeFallbackColors,Ce=Se.level,Re=Se.size;for(var Ke=0;Ke<he.length;Ke++)(je=E.readability(Q,he[Ke]))>Le&&(Le=je,Ee=E(he[Ke]));return E.isReadable(Q,Ee,{level:Ce,size:Re})||!Ae?Ee:(Se.includeFallbackColors=!1,E.mostReadable(Q,["#fff","#000"],Se))};var te=E.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},H=E.hexNames=function(Q){var he={};for(var Se in Q)Q.hasOwnProperty(Se)&&(he[Q[Se]]=Se);return he}(te);function V(Q){return Q=parseFloat(Q),(isNaN(Q)||Q<0||Q>1)&&(Q=1),Q}function ie(Q,he){(function(je){return typeof je=="string"&&je.indexOf(".")!=-1&&parseFloat(je)===1})(Q)&&(Q="100%");var Se=function(je){return typeof je=="string"&&je.indexOf("%")!=-1}(Q);return Q=g(he,d(0,parseFloat(Q))),Se&&(Q=parseInt(Q*he,10)/100),M.abs(Q-he)<1e-6?1:Q%he/parseFloat(he)}function we(Q){return g(1,d(0,Q))}function ke(Q){return parseInt(Q,16)}function oe(Q){return Q.length==1?"0"+Q:""+Q}function J(Q){return Q<=1&&(Q=100*Q+"%"),Q}function ee(Q){return M.round(255*parseFloat(Q)).toString(16)}function Y(Q){return ke(Q)/255}var K,G,ne,le=(G="[\\s|\\(]+("+(K="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",ne="[\\s|\\(]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",{CSS_UNIT:new RegExp(K),rgb:new RegExp("rgb"+G),rgba:new RegExp("rgba"+ne),hsl:new RegExp("hsl"+G),hsla:new RegExp("hsla"+ne),hsv:new RegExp("hsv"+G),hsva:new RegExp("hsva"+ne),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function ue(Q){return!!le.CSS_UNIT.exec(Q)}D.exports?D.exports=E:(f=function(){return E}.call(m,o,m,D))===void 0||(D.exports=f)})(Math)},function(D,m,o){D.exports={EPSILON:o(252),create:o(253),clone:o(516),fromValues:o(517),copy:o(518),set:o(254),equals:o(519),exactEquals:o(520),add:o(255),subtract:o(162),sub:o(521),multiply:o(256),mul:o(522),divide:o(257),div:o(523),inverse:o(524),min:o(525),max:o(526),rotate:o(527),floor:o(528),ceil:o(529),round:o(530),scale:o(531),scaleAndAdd:o(532),distance:o(258),dist:o(533),squaredDistance:o(259),sqrDist:o(534),length:o(260),len:o(535),squaredLength:o(261),sqrLen:o(536),negate:o(537),normalize:o(262),dot:o(263),cross:o(538),lerp:o(539),random:o(540),transformMat2:o(541),transformMat2d:o(542),transformMat3:o(543),transformMat4:o(544),forEach:o(545),limit:o(546)}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f=function(c,M){var _=c.nodes,x=c.edges,O=[],S={};if(!_)throw new Error("invalid nodes data!");return _&&_.forEach(function(g,d){S[g.id]=d,O.push([])}),x&&x.forEach(function(g){var d=g.source,y=g.target,E=S[d],b=S[y];!E&&E!==0||!b&&b!==0||(O[E][b]=1,M||(O[b][E]=1))}),O};m.default=f},function(D,m,o){var f=o(97),c=o(313),M=o(314),_=o(315),x=o(316),O=o(317);function S(g){var d=this.__data__=new f(g);this.size=d.size}S.prototype.clear=c,S.prototype.delete=M,S.prototype.get=_,S.prototype.has=x,S.prototype.set=O,D.exports=S},function(D,m,o){var f=o(308),c=o(309),M=o(310),_=o(311),x=o(312);function O(S){var g=-1,d=S==null?0:S.length;for(this.clear();++g<d;){var y=S[g];this.set(y[0],y[1])}}O.prototype.clear=f,O.prototype.delete=c,O.prototype.get=M,O.prototype.has=_,O.prototype.set=x,D.exports=O},function(D,m,o){var f=o(70);D.exports=function(c,M){for(var _=c.length;_--;)if(f(c[_][0],M))return _;return-1}},function(D,m,o){var f=o(62)(Object,"create");D.exports=f},function(D,m,o){var f=o(332);D.exports=function(c,M){var _=c.__data__;return f(M)?_[typeof M=="string"?"string":"hash"]:_.map}},function(D,m,o){var f=o(102),c=o(70),M=Object.prototype.hasOwnProperty;D.exports=function(_,x,O){var S=_[x];M.call(_,x)&&c(S,O)&&(O!==void 0||x in _)||f(_,x,O)}},function(D,m,o){var f=o(178);D.exports=function(c,M,_){M=="__proto__"&&f?f(c,M,{configurable:!0,enumerable:!0,value:_,writable:!0}):c[M]=_}},function(D,m){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(c)}var f=/^(?:0|[1-9]\d*)$/;D.exports=function(c,M){var _=o(c);return!!(M=M==null?9007199254740991:M)&&(_=="number"||_!="symbol"&&f.test(c))&&c>-1&&c%1==0&&c<M}},function(D,m){D.exports=function(o){return function(f){return o(f)}}},function(D,m){var o=Object.prototype;D.exports=function(f){var c=f&&f.constructor;return f===(typeof c=="function"&&c.prototype||o)}},function(D,m,o){var f=o(180)(Object.getPrototypeOf,Object);D.exports=f},function(D,m,o){var f=o(154),c=o(361)(f);D.exports=c},function(D,m,o){var f=o(109),c=o(89);D.exports=function(M,_){for(var x=0,O=(_=f(_,M)).length;M!=null&&x<O;)M=M[c(_[x++])];return x&&x==O?M:void 0}},function(D,m,o){var f=o(31),c=o(157),M=o(375),_=o(203);D.exports=function(x,O){return f(x)?x:c(x,O)?[x]:M(_(x))}},function(D,m){D.exports=function(o,f){for(var c=-1,M=o==null?0:o.length,_=Array(M);++c<M;)_[c]=f(o[c],c,o);return _}},function(D,m,o){var f=o(65),c=o(212),M=o(213);D.exports=function(_,x){return M(c(_,x,f),_+"")}},function(D,m,o){function f(O){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(O)}var c=o(70),M=o(52),_=o(103),x=o(43);D.exports=function(O,S,g){if(!x(g))return!1;var d=f(S);return!!(d=="number"?M(g)&&_(S,g.length):d=="string"&&S in g)&&c(g[S],O)}},function(D,m,o){"use strict";var f=o(28);D.exports={longestPath:function(c){var M={};f.forEach(c.sources(),function _(x){var O=c.node(x);if(f.has(M,x))return O.rank;M[x]=!0;var S=f.min(f.map(c.outEdges(x),function(g){return _(g.w)-c.edge(g).minlen}));return S!==Number.POSITIVE_INFINITY&&S!=null||(S=0),O.rank=S})},slack:function(c,M){return c.node(M.w).rank-c.node(M.v).rank-c.edge(M).minlen}}},function(D,m,o){"use strict";var f=o(35);o.d(m,"gl",function(){return f.a}),o(239),o(240),o(241),o(242),o(243),o(244),o(245),o(246),o(247),o(248),o(249)},function(D,m,o){"use strict";var f=function(){function c(M,_){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=M,this.name=M,this.originalEvent=_,this.timeStamp=_.timeStamp}return c.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},c.prototype.stopPropagation=function(){this.propagationStopped=!0},c.prototype.toString=function(){return"[Event (type="+this.type+")]"},c.prototype.save=function(){},c.prototype.restore=function(){},c}();m.a=f},function(D,m,o){"use strict";var f=o(1),c=o(135),M=o(19),_=function(x){function O(S){var g=x.call(this)||this;g.destroyed=!1;var d=g.getDefaultCfg();return g.cfg=Object(M.i)(d,S),g}return Object(f.__extends)(O,x),O.prototype.getDefaultCfg=function(){return{}},O.prototype.get=function(S){return this.cfg[S]},O.prototype.set=function(S,g){this.cfg[S]=g},O.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},O}(c.a);m.a=_},function(D,m,o){"use strict";o.d(m,"a",function(){return c});var f=null;function c(){if(!f){var M=document.createElement("canvas");M.width=1,M.height=1,f=M.getContext("2d")}return f}},function(D,m,o){"use strict";o.d(m,"a",function(){return f}),o.d(m,"b",function(){return M});var f=-1,c=1;function M(){return c++}},function(D,m,o){"use strict";o.d(m,"a",function(){return xe});var f,c,M,_,x,O,S,g=o(9),d=o.n(g),y=o(14),E=o.n(y),b=o(10),p=o.n(b),A=o(6),C=o.n(A),N=o(7),P=o.n(N),L=o(11),z=o.n(L),X=(o(29),o(5)),re=o(3),se=o(13),ce=o(35),xe=(f=Object(X.injectable)(),c=Object(X.inject)(se.a.GeometryComponentManager),M=Object(X.inject)(se.a.RenderEngine),f((x=function(){function ye(){C()(this,ye),p()(this,"geometry",O,this),p()(this,"engine",S,this)}var W;return P()(ye,[{key:"execute",value:(W=E()(d.a.mark(function Ie(){var ge=this;return d.a.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:this.geometry.forEach(function(H,V){V.dirty&&(V.attributes.forEach(function(ie){var we;ie.dirty&&ie.data&&(ie.buffer?(we=ie.buffer)===null||we===void 0||we.subData({data:ie.data,offset:0}):ie.buffer=ge.engine.createBuffer({data:ie.data,type:ce.a.FLOAT}),ie.dirty=!1)}),V.indices&&(V.indicesBuffer?V.indicesBuffer.subData({data:V.indices,offset:0}):V.indicesBuffer=ge.engine.createElements({data:V.indices,count:V.indices.length,type:ce.a.UNSIGNED_INT,usage:ce.a.STATIC_DRAW})),V.dirty=!1)});case 1:case"end":return te.stop()}},Ie,this)})),function(){return W.apply(this,arguments)})},{key:"tearDown",value:function(){this.geometry.forEach(function(Ie,ge){ge.indicesBuffer&&ge.indicesBuffer.destroy(),ge.attributes.forEach(function(te){te.buffer&&te.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},ge=Ie.vertexCount,te=Object(re.createEntity)();return this.geometry.create(te,{vertexCount:ge})}},{key:"createInstancedBufferGeometry",value:function(Ie){var ge=Ie.maxInstancedCount,te=Ie.vertexCount,H=Object(re.createEntity)();return this.geometry.create(H,{maxInstancedCount:ge,vertexCount:te})}}]),ye}(),O=z()(x.prototype,"geometry",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=z()(x.prototype,"engine",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=x))||_)},function(D,m,o){"use strict";o.d(m,"a",function(){return z});var f=o(4),c=o.n(f),M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(22),g=o.n(S),d=o(23),y=o.n(d),E=o(24),b=o.n(E),p=o(18),A=o.n(p),C=o(3);function N(X,re){var se=Object.keys(X);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(X);re&&(ce=ce.filter(function(xe){return Object.getOwnPropertyDescriptor(X,xe).enumerable})),se.push.apply(se,ce)}return se}function P(X){for(var re=1;re<arguments.length;re++){var se=arguments[re]!=null?arguments[re]:{};re%2?N(Object(se),!0).forEach(function(ce){c()(X,ce,se[ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(X,Object.getOwnPropertyDescriptors(se)):N(Object(se)).forEach(function(ce){Object.defineProperty(X,ce,Object.getOwnPropertyDescriptor(se,ce))})}return X}function L(X){var re=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(se){return!1}}();return function(){var se,ce=A()(X);if(re){var xe=A()(this).constructor;se=Reflect.construct(ce,arguments,xe)}else se=ce.apply(this,arguments);return b()(this,se)}}var z=function(X){y()(se,X);var re=L(se);function se(ce){var xe;return _()(this,se),(xe=re.call(this,ce)).vertexShaderGLSL=void 0,xe.fragmentShaderGLSL=void 0,xe.defines={},xe.dirty=!0,xe.uniforms=[],xe.cull={enable:!0,face:C.gl.BACK},xe.depth={enable:!0},xe.blend=void 0,xe.entity=void 0,xe.type=void 0,Object.assign(g()(xe),ce),xe}return O()(se,[{key:"setDefines",value:function(ce){return this.defines=P(P({},this.defines),ce),this}},{key:"setCull",value:function(ce){return this.cull=ce,this}},{key:"setDepth",value:function(ce){return this.depth=ce,this}},{key:"setBlend",value:function(ce){return this.blend=ce,this}},{key:"setUniform",value:function(ce,xe){var ye=this;if(typeof ce!="string")return Object.keys(ce).forEach(function(Ie){return ye.setUniform(Ie,ce[Ie])}),this;var W=this.uniforms.find(function(Ie){return Ie.name===ce});return W?(W.dirty=!0,W.data=xe):this.uniforms.push({name:ce,dirty:!0,data:xe}),this.dirty=!0,this}}]),se}(o(25).a)},function(D,m,o){"use strict";o.d(m,"a",function(){return te});var f,c,M,_,x,O,S,g,d,y=o(4),E=o.n(y),b=o(9),p=o.n(b),A=o(14),C=o.n(A),N=o(10),P=o.n(N),L=o(6),z=o.n(L),X=o(7),re=o.n(X),se=o(11),ce=o.n(se),xe=(o(29),o(5)),ye=o(3),W=o(13);function Ie(H,V){var ie=Object.keys(H);if(Object.getOwnPropertySymbols){var we=Object.getOwnPropertySymbols(H);V&&(we=we.filter(function(ke){return Object.getOwnPropertyDescriptor(H,ke).enumerable})),ie.push.apply(ie,we)}return ie}function ge(H){for(var V=1;V<arguments.length;V++){var ie=arguments[V]!=null?arguments[V]:{};V%2?Ie(Object(ie),!0).forEach(function(we){E()(H,we,ie[we])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(ie)):Ie(Object(ie)).forEach(function(we){Object.defineProperty(H,we,Object.getOwnPropertyDescriptor(ie,we))})}return H}var te=(f=Object(xe.injectable)(),c=Object(xe.inject)(W.a.MaterialComponentManager),M=Object(xe.inject)(W.a.RenderEngine),_=Object(xe.inject)(W.a.ShaderModuleService),f((O=function(){function H(){z()(this,H),P()(this,"material",S,this),P()(this,"engine",g,this),P()(this,"shaderModule",d,this)}var V;return re()(H,[{key:"execute",value:(V=C()(p.a.mark(function ie(){return p.a.wrap(function(we){for(;;)switch(we.prev=we.next){case 0:case"end":return we.stop()}},ie)})),function(){return V.apply(this,arguments)})},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(ie){var we=Object(ye.createEntity)(),ke=ie.vertexShader,oe=ie.fragmentShader,J=[];if(!this.engine.supportWebGPU){var ee="material-".concat(we);this.shaderModule.registerModule(ee,{vs:ie.vertexShader,fs:ie.fragmentShader});var Y=this.shaderModule.getModule(ee);ke=Y.vs,oe=Y.fs,Y.uniforms&&(J=Object.keys(Y.uniforms).map(function(K){return{dirty:!0,name:K,data:Y.uniforms[K]}}))}return this.material.create(we,ge(ge({vertexShaderGLSL:ke,fragmentShaderGLSL:oe},ie),{},{uniforms:J}))}}]),H}(),S=ce()(O.prototype,"material",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=ce()(O.prototype,"engine",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=ce()(O.prototype,"shaderModule",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=O))||x)},function(D,m,o){"use strict";o.d(m,"a",function(){return A});var f,c=o(6),M=o.n(c),_=o(22),x=o.n(_),O=o(23),S=o.n(O),g=o(24),d=o.n(g),y=o(18),E=o.n(y),b=o(25);function p(C){var N=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}();return function(){var P,L=E()(C);if(N){var z=E()(this).constructor;P=Reflect.construct(L,arguments,z)}else P=L.apply(this,arguments);return d()(this,P)}}(function(C){C[C.Standard=0]="Standard"})(f||(f={}));var A=function(C){S()(P,C);var N=p(P);function P(L){var z;return M()(this,P),(z=N.call(this,L)).strategy=f.Standard,z.visibilityPlaneMask=0,z.visible=!1,Object.assign(x()(z),L),z}return P}(b.a)},function(D,m,o){"use strict";o.d(m,"a",function(){return A});var f=o(6),c=o.n(f),M=o(22),_=o.n(M),x=o(23),O=o.n(x),S=o(24),g=o.n(S),d=o(18),y=o.n(d),E=o(25),b=o(77);function p(C){var N=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(P){return!1}}();return function(){var P,L=y()(C);if(N){var z=y()(this).constructor;P=Reflect.construct(L,arguments,z)}else P=L.apply(this,arguments);return g()(this,P)}}var A=function(C){O()(P,C);var N=p(P);function P(L){var z;return c()(this,P),(z=N.call(this,L)).material=void 0,z.geometry=void 0,z.aabb=new b.a,z.aabbDirty=!0,z.model=void 0,z.visible=!0,z.children=[],Object.assign(_()(z),L),z}return P}(E.a)},function(D,m,o){"use strict";o.d(m,"a",function(){return we});var f,c,M,_,x,O,S,g,d,y,E,b,p,A=o(9),C=o.n(A),N=o(14),P=o.n(N),L=o(10),z=o.n(L),X=o(6),re=o.n(X),se=o(7),ce=o.n(se),xe=o(11),ye=o.n(xe),W=(o(29),o(2)),Ie=o(5),ge=o(13),te=o(56),H=o(140);function V(ke,oe){var J;if(typeof Symbol=="undefined"||ke[Symbol.iterator]==null){if(Array.isArray(ke)||(J=function(le,ue){if(!!le){if(typeof le=="string")return ie(le,ue);var Q=Object.prototype.toString.call(le).slice(8,-1);if(Q==="Object"&&le.constructor&&(Q=le.constructor.name),Q==="Map"||Q==="Set")return Array.from(le);if(Q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return ie(le,ue)}}(ke))||oe&&ke&&typeof ke.length=="number"){J&&(ke=J);var ee=0,Y=function(){};return{s:Y,n:function(){return ee>=ke.length?{done:!0}:{done:!1,value:ke[ee++]}},e:function(le){throw le},f:Y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var K,G=!0,ne=!1;return{s:function(){J=ke[Symbol.iterator]()},n:function(){var le=J.next();return G=le.done,le},e:function(le){ne=!0,K=le},f:function(){try{G||J.return==null||J.return()}finally{if(ne)throw K}}}}function ie(ke,oe){(oe==null||oe>ke.length)&&(oe=ke.length);for(var J=0,ee=new Array(oe);J<oe;J++)ee[J]=ke[J];return ee}var we=(f=Object(Ie.injectable)(),c=Object(Ie.inject)(ge.a.MeshComponentManager),M=Object(Ie.inject)(ge.a.CullableComponentManager),_=Object(Ie.inject)(ge.a.GeometryComponentManager),x=Object(Ie.inject)(ge.a.HierarchyComponentManager),O=Object(Ie.inject)(ge.a.TransformComponentManager),f((g=function(){function ke(){re()(this,ke),z()(this,"mesh",d,this),z()(this,"cullable",y,this),z()(this,"geometry",E,this),z()(this,"hierarchy",b,this),z()(this,"transform",p,this),this.planes=void 0}var oe;return ce()(ke,[{key:"setFrustumPlanes",value:function(J){this.planes=J}},{key:"execute",value:(oe=P()(C.a.mark(function J(ee){var Y,K,G,ne,le,ue,Q,he,Se,je,Ae,Ce,Re,Ee,Le,Ke,et,ot,dt,At,Tt;return C.a.wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:Y=V(ee);try{for(Y.s();!(K=Y.n()).done;){G=K.value,ne=G.getScene(),le=G.getCamera(),ue=V(ne.getEntities());try{for(ue.s();!(Q=ue.n()).done;)he=Q.value,(Se=this.mesh.getComponentByEntity(he))&&(je=this.hierarchy.getComponentByEntity(he),Ae=this.cullable.getComponentByEntity(he),Ce=Se.geometry,Re=this.transform.getComponentByEntity(he),Ce&&Ce.aabb&&Re&&Se.aabbDirty&&(Ee=Re.worldTransform,Le=Ce.aabb,Ke=Le.center,et=Le.halfExtents,ot=W.e.transformMat4(W.e.create(),Ke,Ee),dt=Object(H.b)(Ee,W.a.create()),At=W.e.transformMat3(W.e.create(),et,dt),Se.aabb.update(ot,At),Se.aabbDirty=!1),Ae&&Ce&&(Tt=this.cullable.getComponentByEntity((je==null?void 0:je.parentID)||-1),Ae.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(Se.aabb,(Tt==null?void 0:Tt.visibilityPlaneMask)||te.b.INDETERMINATE,this.planes||le.getFrustum().planes),Ae.visible=Ae.visibilityPlaneMask!==te.b.OUTSIDE))}catch(Kt){ue.e(Kt)}finally{ue.f()}}}catch(Kt){Y.e(Kt)}finally{Y.f()}case 2:case"end":return jt.stop()}},J,this)})),function(J){return oe.apply(this,arguments)})},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(J,ee,Y){if(ee===te.b.OUTSIDE||ee===te.b.INSIDE)return ee;for(var K=te.b.INSIDE,G=0,ne=Y.length;G<ne;++G){var le=G<31?1<<G:0;if(!(G<31&&(ee&le)==0)){var ue=Y[G],Q=ue.normal,he=ue.distance;if(W.e.dot(Q,J.getNegativeFarPoint(Y[G]))+he>0)return te.b.OUTSIDE;W.e.dot(Q,J.getPositiveFarPoint(Y[G]))+he>0&&(K|=le)}}return K}}]),ke}(),d=ye()(g.prototype,"mesh",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=ye()(g.prototype,"cullable",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=ye()(g.prototype,"geometry",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=ye()(g.prototype,"hierarchy",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=ye()(g.prototype,"transform",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=g))||S)},function(D,m,o){"use strict";o.d(m,"a",function(){return O});var f=o(6),c=o.n(f),M=o(7),_=o.n(M),x=o(2),O=function(){function S(g,d){c()(this,S),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=g||0,this.normal=d||x.e.fromValues(0,1,0),this.updatePNVertexFlag()}return _()(S,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(g){return x.e.dot(g,this.normal)-this.distance}},{key:"normalize",value:function(){var g=1/x.e.len(this.normal);x.e.scale(this.normal,this.normal,g),this.distance*=g}},{key:"intersectsLine",value:function(g,d,y){var E=this.distanceToPoint(g),b=E/(E-this.distanceToPoint(d)),p=b>=0&&b<=1;return p&&y&&x.e.lerp(y,g,d,b),p}}]),S}()},function(D,m,o){"use strict";o.d(m,"a",function(){return H});var f,c,M,_,x,O,S,g,d,y,E,b,p=o(9),A=o.n(p),C=o(14),N=o.n(C),P=o(10),L=o.n(P),z=o(6),X=o.n(z),re=o(7),se=o.n(re),ce=o(11),xe=o.n(ce),ye=(o(29),o(5)),W=o(13),Ie=o(81),ge=o(68),te=o(50),H=(f=Object(ye.injectable)(),c=Object(ye.inject)(W.a.Systems),M=Object(ye.named)(W.a.FrameGraphSystem),_=Object(ye.inject)(W.a.RenderPassFactory),x=Object(ye.inject)(W.a.ConfigService),O=Object(ye.inject)(W.a.ResourcePool),f((g=function(){function V(){X()(this,V),L()(this,"frameGraphSystem",d,this),L()(this,"renderPassFactory",y,this),L()(this,"configService",E,this),L()(this,"resourcePool",b,this)}var ie;return se()(V,[{key:"execute",value:(ie=N()(A.a.mark(function we(ke){var oe,J,ee,Y,K,G,ne,le;return A.a.wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:oe=this.renderPassFactory(te.a.IDENTIFIER),J=oe.setup,ee=oe.execute,this.frameGraphSystem.addPass(te.a.IDENTIFIER,J,ee),Y=this.renderPassFactory(Ie.a.IDENTIFIER),K=Y.setup,G=Y.execute,ne=Y.tearDown,le=this.frameGraphSystem.addPass(Ie.a.IDENTIFIER,K,G,ne),this.frameGraphSystem.present(le.data.output);case 5:case"end":return ue.stop()}},we,this)})),function(we){return ie.apply(this,arguments)})},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(we,ke){return this.renderPassFactory(ge.a.IDENTIFIER).pick(we,ke)}}]),V}(),d=xe()(g.prototype,"frameGraphSystem",[c,M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=xe()(g.prototype,"renderPassFactory",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=xe()(g.prototype,"configService",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=xe()(g.prototype,"resourcePool",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=g))||S)},function(D,m,o){"use strict";o.d(m,"a",function(){return b});var f=o(6),c=o.n(f),M=o(22),_=o.n(M),x=o(23),O=o.n(x),S=o(24),g=o.n(S),d=o(18),y=o.n(d);function E(p){var A=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(C){return!1}}();return function(){var C,N=y()(p);if(A){var P=y()(this).constructor;C=Reflect.construct(N,arguments,P)}else C=N.apply(this,arguments);return g()(this,C)}}var b=function(p){O()(C,p);var A=E(C);function C(N){var P;return c()(this,C),(P=A.call(this,N)).parentID=void 0,Object.assign(_()(P),N),P}return C}(o(25).a)},function(D,m,o){"use strict";o.d(m,"a",function(){return ye});var f,c,M,_,x,O,S,g,d,y=o(9),E=o.n(y),b=o(14),p=o.n(b),A=o(10),C=o.n(A),N=o(6),P=o.n(N),L=o(7),z=o.n(L),X=o(11),re=o.n(X),se=(o(29),o(2)),ce=o(5),xe=o(13),ye=(f=Object(ce.injectable)(),c=Object(ce.inject)(xe.a.HierarchyComponentManager),M=Object(ce.inject)(xe.a.TransformComponentManager),_=Object(ce.inject)(xe.a.MeshComponentManager),f((O=function(){function W(){P()(this,W),C()(this,"hierarchy",S,this),C()(this,"transform",g,this),C()(this,"mesh",d,this)}var Ie;return z()(W,[{key:"execute",value:(Ie=p()(E.a.mark(function ge(){return E.a.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return te.stop()}},ge,this)})),function(){return Ie.apply(this,arguments)})},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var ge=this;this.transform.forEach(function(te,H){(H.isDirty()||H.isLocalDirty())&&(ge.setMeshAABBDirty(ge.mesh.getComponentByEntity(te)),H.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var ge=this;this.hierarchy.forEach(function(te,H){var V=ge.transform.getComponentByEntity(te),ie=ge.transform.getComponentByEntity(H.parentID);V!==null&&ie!==null&&V.updateTransformWithParent(ie)})}},{key:"attach",value:function(ge,te,H){this.hierarchy.contains(ge)&&this.detach(ge),this.hierarchy.create(ge,{parentID:te});var V=this.mesh.getComponentByEntity(te);if(this.setMeshAABBDirty(V),V&&V.children.indexOf(ge)===-1&&V.children.push(ge),this.hierarchy.getCount()>1){for(var ie=this.hierarchy.getCount()-1;ie>0;--ie)for(var we=this.hierarchy.getEntity(ie),ke=0;ke<ie;++ke)if(this.hierarchy.getComponent(ke).parentID===we){this.hierarchy.moveItem(ie,ke),++ie;break}}this.hierarchy.getComponentByEntity(ge);var oe=this.transform.getComponentByEntity(te);oe===null&&(oe=this.transform.create(te));var J=this.transform.getComponentByEntity(ge);J===null&&(J=this.transform.create(ge),oe=this.transform.getComponentByEntity(te)),J.parent=oe,!H&&oe&&(J.matrixTransform(se.b.invert(se.b.create(),oe.worldTransform)),J.updateTransform()),oe&&J.updateTransformWithParent(oe)}},{key:"detach",value:function(ge){var te=this.hierarchy.getComponentByEntity(ge);if(te!==null){var H=this.transform.getComponentByEntity(ge);H!==null&&(H.parent=null,H.applyTransform()),this.hierarchy.removeKeepSorted(ge);var V=this.mesh.getComponentByEntity(te.parentID);if(V){var ie=V.children.indexOf(ge);V.children.splice(ie,1)}this.setMeshAABBDirty(V)}}},{key:"detachChildren",value:function(ge){var te=this.mesh.getComponentByEntity(ge);te&&(te.children=[]);for(var H=0;H<this.hierarchy.getCount();){var V;if(((V=this.hierarchy.getComponent(H))===null||V===void 0?void 0:V.parentID)===ge){var ie=this.hierarchy.getEntity(H);this.detach(ie)}else++H}}},{key:"setMeshAABBDirty",value:function(ge){ge&&(ge.aabbDirty=!0)}}]),W}(),S=re()(O.prototype,"hierarchy",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=re()(O.prototype,"transform",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=re()(O.prototype,"mesh",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=O))||x)},function(D,m,o){"use strict";o.d(m,"a",function(){return C});var f=o(6),c=o.n(f),M=o(7),_=o.n(M),x=o(22),O=o.n(x),S=o(23),g=o.n(S),d=o(24),y=o.n(d),E=o(18),b=o.n(E),p=o(2);function A(N){var P=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(L){return!1}}();return function(){var L,z=b()(N);if(P){var X=b()(this).constructor;L=Reflect.construct(z,arguments,X)}else L=z.apply(this,arguments);return y()(this,L)}}var C=function(N){g()(L,N);var P=A(L);function L(z){var X,re,se,ce,xe,ye,W,Ie,ge,te,H,V,ie,we,ke;return c()(this,L),(X=P.call(this,z)).dirtyFlag=void 0,X.localDirtyFlag=void 0,X.parent=null,X.localPosition=p.e.fromValues(0,0,0),X.localRotation=p.c.fromValues(0,0,0,1),X.localScale=p.e.fromValues(1,1,1),X.localTransform=p.b.create(),X.position=p.e.fromValues(0,0,0),X.rotation=p.c.fromValues(0,0,0,1),X.scaling=p.e.fromValues(1,1,1),X.worldTransform=p.b.create(),X.matrixTransform=(re=p.b.create(),function(oe){p.b.multiply(re,X.getLocalTransform(),oe),p.b.getScaling(X.localScale,re),p.b.getTranslation(X.localPosition,re),p.b.getRotation(X.localRotation,re)}),X.rotateRollPitchYaw=(se=p.c.create(),ce=p.c.create(),xe=p.c.create(),function(oe,J,ee){X.setDirty(),p.c.fromEuler(se,oe,0,0),p.c.fromEuler(ce,0,J,0),p.c.fromEuler(xe,0,0,ee),p.c.multiply(X.localRotation,se,X.localRotation),p.c.multiply(X.localRotation,X.localRotation,ce),p.c.multiply(X.localRotation,xe,X.localRotation),p.c.normalize(X.localRotation,X.localRotation)}),X.lerp=(ye=p.e.create(),W=p.c.create(),Ie=p.e.create(),ge=p.e.create(),te=p.c.create(),H=p.e.create(),function(oe,J,ee){X.setDirty(),p.b.getScaling(ye,oe.worldTransform),p.b.getTranslation(Ie,oe.worldTransform),p.b.getRotation(W,oe.worldTransform),p.b.getScaling(ge,J.worldTransform),p.b.getTranslation(H,J.worldTransform),p.b.getRotation(te,J.worldTransform),p.e.lerp(X.localScale,ye,ge,ee),p.c.slerp(X.localRotation,W,te,ee),p.e.lerp(X.localPosition,Ie,H,ee)}),X.translate=(V=p.e.create(),function(oe){return p.e.add(V,X.getPosition(),oe),X.setPosition(V),X.setDirty(!0),O()(X)}),X.translateLocal=function(oe){return p.e.transformQuat(oe,oe,X.localRotation),p.e.add(X.localPosition,X.localPosition,oe),X.setLocalDirty(!0),O()(X)},X.setPosition=(ie=p.b.create(),function(oe){return X.position=oe,X.setLocalDirty(!0),X.parent===null?p.e.copy(X.localPosition,oe):(p.b.copy(ie,X.parent.worldTransform),p.b.invert(ie,ie),p.e.transformMat4(X.localPosition,oe,ie)),O()(X)}),X.rotate=(we=p.c.create(),function(oe){if(X.parent===null)p.c.multiply(X.localRotation,X.localRotation,oe),p.c.normalize(X.localRotation,X.localRotation);else{var J=X.getRotation(),ee=X.parent.getRotation();p.c.copy(we,ee),p.c.invert(we,we),p.c.multiply(we,we,oe),p.c.multiply(X.localRotation,oe,J),p.c.normalize(X.localRotation,X.localRotation)}return X.setLocalDirty(),O()(X)}),X.rotateLocal=function(oe){return p.c.multiply(X.localRotation,X.localRotation,oe),p.c.normalize(X.localRotation,X.localRotation),X.setLocalDirty(!0),O()(X)},X.setRotation=(ke=p.c.create(),function(oe){return X.parent===null?p.c.copy(X.localRotation,oe):(p.c.copy(ke,X.parent.getRotation()),p.c.invert(ke,ke),p.c.copy(X.localRotation,ke),p.c.mul(X.localRotation,X.localRotation,oe)),X.setLocalDirty(!0),O()(X)}),X}return _()(L,[{key:"setLocalPosition",value:function(z){p.e.copy(this.localPosition,z),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(z){p.e.copy(this.localScale,z),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(z){return p.c.copy(this.localRotation,z),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var z=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];z?this.dirtyFlag|=L.DIRTY:this.dirtyFlag&=~L.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var z=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];z?(this.localDirtyFlag|=L.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~L.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(p.b.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(z){p.b.multiply(this.worldTransform,z.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),p.b.getScaling(this.localScale,this.worldTransform),p.b.getTranslation(this.localPosition,this.worldTransform),p.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=p.e.fromValues(0,0,0),this.localRotation=p.c.fromValues(0,0,0,1),this.localScale=p.e.fromValues(1,1,1)}},{key:"scaleLocal",value:function(z){return this.setLocalDirty(),p.e.multiply(this.localScale,this.localScale,z),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(p.b.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return this.isLocalDirty()||this.isDirty()?(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform):this.worldTransform}},{key:"getPosition",value:function(){return p.b.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return p.b.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return p.b.getScaling(this.scaling,this.worldTransform),this.scaling}}]),L}(o(25).a);C.DIRTY=1},function(D,m,o){"use strict";o.d(m,"a",function(){return S});var f,c=o(6),M=o.n(c),_=o(7),x=o.n(_),O=o(5),S=Object(O.injectable)()(f=function(){function g(){M()(this,g),this.config=void 0}return x()(g,[{key:"get",value:function(){return this.config}},{key:"set",value:function(d){this.config=d}}]),g}())||f},function(D,m,o){"use strict";o.d(m,"a",function(){return g});var f,c,M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(5);(function(d){d.PANSTART="PANSTART",d.PANEND="PANEND",d.PANMOVE="PANMOVE",d.PINCH="PINCH",d.KEYDOWN="KEYDOWN",d.KEYUP="KEYUP",d.HOVER="HOVER"})(c||(c={}));var g=Object(S.injectable)()(f=function(){function d(){_()(this,d)}return O()(d,[{key:"listen",value:function(y){}},{key:"on",value:function(y,E){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),d}())||f},function(D,m,o){"use strict";o.d(m,"a",function(){return J});var f=o(59),c=o.n(f),M=o(9),_=o.n(M),x=o(14),O=o.n(x),S=o(10),g=o.n(S),d=o(6),y=o.n(d),E=o(7),b=o.n(E),p=o(11),A=o.n(p),C=(o(29),o(5)),N=o(13),P=function ee(){y()(this,ee),this.index=void 0},L=function ee(){y()(this,ee),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},z=function(){function ee(){y()(this,ee),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return b()(ee,[{key:"read",value:function(Y){return this.reads.find(function(K){return K.index===Y.index})||this.reads.push(Y),Y}},{key:"sample",value:function(Y){return this.read(Y),Y}},{key:"write",value:function(Y,K){if(this.writes.find(function(le){return le.index===K.index}))return K;var G=Y.getResourceNode(K);G.resource.version++,G.resource.imported&&(this.hasSideEffect=!0);var ne=Y.createResourceNode(G.resource);return Y.getResourceNode(ne).writer=this,this.writes.push(ne),ne}}]),ee}(),X=o(23),re=o.n(X),se=o(24),ce=o.n(se),xe=o(18),ye=o.n(xe);function W(ee){var Y=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(K){return!1}}();return function(){var K,G=ye()(ee);if(Y){var ne=ye()(this).constructor;K=Reflect.construct(G,arguments,ne)}else K=G.apply(this,arguments);return ce()(this,K)}}var Ie,ge,te,H,V,ie=function(ee){re()(K,ee);var Y=W(K);function K(){var G;y()(this,K);for(var ne=arguments.length,le=new Array(ne),ue=0;ue<ne;ue++)le[ue]=arguments[ue];return(G=Y.call.apply(Y,[this].concat(le))).version=0,G.refs=0,G.name=void 0,G.imported=void 0,G.priority=void 0,G.discardStart=!0,G.discardEnd=!1,G.descriptor=void 0,G.resource=void 0,G}return b()(K,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){this.imported}}]),K}(function ee(){y()(this,ee),this.first=void 0,this.last=void 0}),we=function ee(){y()(this,ee),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0};function ke(ee,Y){var K;if(typeof Symbol=="undefined"||ee[Symbol.iterator]==null){if(Array.isArray(ee)||(K=function(he,Se){if(!!he){if(typeof he=="string")return oe(he,Se);var je=Object.prototype.toString.call(he).slice(8,-1);if(je==="Object"&&he.constructor&&(je=he.constructor.name),je==="Map"||je==="Set")return Array.from(he);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return oe(he,Se)}}(ee))||Y&&ee&&typeof ee.length=="number"){K&&(ee=K);var G=0,ne=function(){};return{s:ne,n:function(){return G>=ee.length?{done:!0}:{done:!1,value:ee[G++]}},e:function(he){throw he},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le,ue=!0,Q=!1;return{s:function(){K=ee[Symbol.iterator]()},n:function(){var he=K.next();return ue=he.done,he},e:function(he){Q=!0,le=he},f:function(){try{ue||K.return==null||K.return()}finally{if(Q)throw le}}}}function oe(ee,Y){(Y==null||Y>ee.length)&&(Y=ee.length);for(var K=0,G=new Array(Y);K<Y;K++)G[K]=ee[K];return G}var J=(Ie=Object(C.injectable)(),ge=Object(C.inject)(N.a.RenderEngine),Ie((H=function(){function ee(){y()(this,ee),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],g()(this,"engine",V,this)}var Y,K;return b()(ee,[{key:"execute",value:(K=O()(_.a.mark(function G(ne){return _.a.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return this.compile(),le.next=3,this.executePassNodes(ne);case 3:case"end":return le.stop()}},G,this)})),function(G){return K.apply(this,arguments)})},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(G){G.tearDown&&G.tearDown()}),this.reset()}},{key:"addPass",value:function(G,ne,le,ue){var Q=new L;Q.execute=le,ue&&(Q.tearDown=ue),Q.name=G;var he=new z;return he.name=G,this.passNodes.push(he),this.frameGraphPasses.push(Q),ne(this,he,Q),Q}},{key:"getPass",value:function(G){return this.frameGraphPasses.find(function(ne){return ne.name===G})}},{key:"compile",value:function(){var G,ne=this,le=ke(this.passNodes);try{for(le.s();!(G=le.n()).done;){var ue=G.value;ue.refCount=ue.writes.length+(ue.hasSideEffect?1:0),ue.reads.forEach(function(dr){ne.resourceNodes[dr.index].readerCount++})}}catch(dr){le.e(dr)}finally{le.f()}var Q,he=[],Se=ke(this.resourceNodes);try{for(Se.s();!(Q=Se.n()).done;){var je=Q.value;je.readerCount===0&&he.push(je)}}catch(dr){Se.e(dr)}finally{Se.f()}for(;he.length;){var Ae=he.pop(),Ce=Ae&&Ae.writer;if(Ce&&--Ce.refCount==0){var Re,Ee=ke(Ce.reads);try{for(Ee.s();!(Re=Ee.n()).done;){var Le=Re.value,Ke=this.resourceNodes[Le.index];--Ke.readerCount==0&&he.push(Ke)}}catch(dr){Ee.e(dr)}finally{Ee.f()}}}this.resourceNodes.forEach(function(dr){dr.resource.refs+=dr.readerCount});var et,ot=ke(this.passNodes);try{for(ot.s();!(et=ot.n()).done;){var dt=et.value;if(dt.refCount){var At,Tt=ke(dt.reads);try{for(Tt.s();!(At=Tt.n()).done;){var jt=At.value,Kt=this.resourceNodes[jt.index].resource;Kt.first=Kt.first?Kt.first:dt,Kt.last=dt}}catch(dr){Tt.e(dr)}finally{Tt.f()}var Qt,rr=ke(dt.writes);try{for(rr.s();!(Qt=rr.n()).done;){var or=Qt.value,Mr=this.resourceNodes[or.index].resource;Mr.first=Mr.first?Mr.first:dt,Mr.last=dt}}catch(dr){rr.e(dr)}finally{rr.f()}}}}catch(dr){ot.e(dr)}finally{ot.f()}for(var cr=0;cr<2;cr++){var yr,br=ke(this.resourceNodes);try{for(br.s();!(yr=br.n()).done;){var Xr=yr.value.resource;if(Xr.priority===cr&&Xr.refs){var gr=Xr.first,xr=Xr.last;gr&&xr&&(gr.devirtualize.push(Xr),xr.destroy.push(Xr))}}}catch(dr){br.e(dr)}finally{br.f()}}}},{key:"executePassNodes",value:(Y=O()(_.a.mark(function G(ne){var le,ue,Q,he,Se,je,Ae,Ce,Re,Ee,Le,Ke,et;return _.a.wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:le=ke(this.passNodes.entries()),ot.prev=1,le.s();case 3:if((ue=le.n()).done){ot.next=18;break}if(Q=c()(ue.value,2),he=Q[0],!(Se=Q[1]).refCount){ot.next=16;break}je=ke(Se.devirtualize);try{for(je.s();!(Ae=je.n()).done;)Ae.value.preExecuteDevirtualize(this.engine)}catch(dt){je.e(dt)}finally{je.f()}Ce=ke(Se.destroy);try{for(Ce.s();!(Re=Ce.n()).done;)Re.value.preExecuteDestroy(this.engine)}catch(dt){Ce.e(dt)}finally{Ce.f()}return ot.next=12,this.frameGraphPasses[he].execute(this,this.frameGraphPasses[he],ne);case 12:Ee=ke(Se.devirtualize);try{for(Ee.s();!(Le=Ee.n()).done;)Le.value.postExecuteDevirtualize(this.engine)}catch(dt){Ee.e(dt)}finally{Ee.f()}Ke=ke(Se.destroy);try{for(Ke.s();!(et=Ke.n()).done;)et.value.postExecuteDestroy(this.engine)}catch(dt){Ke.e(dt)}finally{Ke.f()}case 16:ot.next=3;break;case 18:ot.next=23;break;case 20:ot.prev=20,ot.t0=ot.catch(1),le.e(ot.t0);case 23:return ot.prev=23,le.f(),ot.finish(23);case 26:this.reset();case 27:case"end":return ot.stop()}},G,this,[[1,20,23,26]])})),function(G){return Y.apply(this,arguments)})},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(G){return this.resourceNodes[G.index]}},{key:"createResourceNode",value:function(G){var ne=new we;ne.resource=G,ne.version=G.version,this.resourceNodes.push(ne);var le=new P;return le.index=this.resourceNodes.length-1,le}},{key:"createTexture",value:function(G,ne,le){var ue=new ie;return ue.name=ne,ue.descriptor=le,this.createResourceNode(ue)}},{key:"createRenderTarget",value:function(G,ne,le){var ue=new ie;return ue.name=ne,ue.descriptor=le,this.createResourceNode(ue)}},{key:"present",value:function(G){this.addPass("Present",function(ne,le){le.read(G),le.hasSideEffect=!0},O()(_.a.mark(function ne(){return _.a.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:case"end":return le.stop()}},ne)})))}}]),ee}(),V=A()(H.prototype,"engine",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=H))||te)},function(D,m,o){"use strict";o.d(m,"a",function(){return C});var f=o(4),c=o.n(f),M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(5),g,d=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function y(N){var P={};return{content:N=N.replace(d,function(L,z,X){var re=X.split(":"),se=re[0].trim(),ce="";switch(re.length>1&&(ce=re[1].trim()),z){case"bool":ce=ce==="true";break;case"float":case"int":ce=Number(ce);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":ce=ce?ce.replace("[","").replace("]","").split(",").reduce(function(xe,ye){return xe.push(Number(ye.trim())),xe},[]):new Array(function(xe){var ye=0;switch(xe){case"vec2":case"ivec2":ye=2;break;case"vec3":case"ivec3":ye=3;break;case"vec4":case"ivec4":case"mat2":ye=4;break;case"mat3":ye=9;break;case"mat4":ye=16}return ye}(z)).fill(0)}return P[se]=ce,"uniform ".concat(z," ").concat(se,`;
`)}),uniforms:P}}function E(N,P){var L=Object.keys(N);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(N);P&&(z=z.filter(function(X){return Object.getOwnPropertyDescriptor(N,X).enumerable})),L.push.apply(L,z)}return L}function b(N){for(var P=1;P<arguments.length;P++){var L=arguments[P]!=null?arguments[P]:{};P%2?E(Object(L),!0).forEach(function(z){c()(N,z,L[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(L)):E(Object(L)).forEach(function(z){Object.defineProperty(N,z,Object.getOwnPropertyDescriptor(L,z))})}return N}var p=/precision\s+(high|low|medium)p\s+float/,A=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,C=Object(S.injectable)()(g=function(){function N(){_()(this,N),this.moduleCache={},this.rawContentCache={}}return O()(N,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,fs:`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`}),this.registerModule("sdf2d",{vs:"",fs:`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`})}},{key:"registerModule",value:function(P,L){if(!this.rawContentCache[P]){var z=L.vs,X=z===void 0?"":z,re=L.fs,se=re===void 0?"":re,ce=L.uniforms,xe=y(X),ye=xe.content,W=xe.uniforms,Ie=y(se),ge=Ie.content,te=Ie.uniforms;this.rawContentCache[P]={fs:ge,uniforms:b(b(b({},W),te),ce),vs:ye}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(P){var L=this;if(this.moduleCache[P])return this.moduleCache[P];var z,X=this.rawContentCache[P].vs||"",re=this.rawContentCache[P].fs||"",se=this.processModule(X,[],"vs"),ce=se.content,xe=se.includeList,ye=this.processModule(re,[],"fs"),W=ye.content,Ie=ye.includeList,ge=W,te=(z=xe.concat(Ie).concat(P),z.filter(function(H,V,ie){return ie.indexOf(H)===V})).reduce(function(H,V){return b(b({},H),L.rawContentCache[V].uniforms)},{});return p.test(W)||(ge=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`+W),this.moduleCache[P]={fs:ge.trim(),uniforms:te,vs:ce.trim()},this.moduleCache[P]}},{key:"processModule",value:function(P,L,z){var X=this;return{content:P.replace(A,function(re,se){var ce=se.split(" ")[0].replace(/"/g,"");if(L.indexOf(ce)>-1)return"";var xe=X.rawContentCache[ce][z];return L.push(ce),X.processModule(xe||"",L,z).content}),includeList:L}}}]),N}())||g},function(D,m,o){"use strict";o.d(m,"a",function(){return ye});var f=o(4),c=o.n(f),M=o(6),_=o.n(M),x=o(7),O=o.n(x),S=o(22),g=o.n(S),d=o(23),y=o.n(d),E=o(24),b=o.n(E),p=o(18),A=o.n(p),C=o(2),N=o(25),P=o(41),L=o.n(P),z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z["[object Arguments]"]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object Boolean]"]=z["[object DataView]"]=z["[object Date]"]=z["[object Error]"]=z["[object Function]"]=z["[object Map]"]=z["[object Number]"]=z["[object Object]"]=z["[object RegExp]"]=z["[object Set]"]=z["[object String]"]=z["[object WeakMap]"]=!1;var X=Object.prototype.toString,re=function(W){return function(Ie){return!!Ie&&L()(Ie)==="object"}(W)&&function(Ie){return typeof Ie=="number"&&Ie>-1&&Ie%1==0&&Ie<=9007199254740991}(W.length)&&!!z[X.call(W)]};function se(W,Ie){var ge=Object.keys(W);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(W);Ie&&(te=te.filter(function(H){return Object.getOwnPropertyDescriptor(W,H).enumerable})),ge.push.apply(ge,te)}return ge}function ce(W){for(var Ie=1;Ie<arguments.length;Ie++){var ge=arguments[Ie]!=null?arguments[Ie]:{};Ie%2?se(Object(ge),!0).forEach(function(te){c()(W,te,ge[te])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(ge)):se(Object(ge)).forEach(function(te){Object.defineProperty(W,te,Object.getOwnPropertyDescriptor(ge,te))})}return W}function xe(W){var Ie=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ge){return!1}}();return function(){var ge,te=A()(W);if(Ie){var H=A()(this).constructor;ge=Reflect.construct(te,arguments,H)}else ge=te.apply(this,arguments);return b()(this,ge)}}var ye=function(W){y()(ge,W);var Ie=xe(ge);function ge(te){var H;return _()(this,ge),(H=Ie.call(this,te)).dirty=!0,H.attributes=[],H.indices=void 0,H.indicesBuffer=void 0,H.vertexCount=0,H.maxInstancedCount=void 0,H.aabb=void 0,H.entity=void 0,Object.assign(g()(H),te),H}return O()(ge,[{key:"setAttribute",value:function(te,H,V,ie){var we=this.attributes.find(function(ke){return ke.name===te});return we?(we.data=H,we.dirty=!0):this.attributes.push(ce(ce({dirty:!0,name:te,data:H},V),{},{bufferGetter:ie})),this.dirty=!0,this}},{key:"setIndex",value:function(te){return this.indices=new Uint32Array(te.buffer?te.buffer:te),this.dirty=!0,this}},{key:"applyMatrix",value:function(te){var H=this.attributes.find(function(ee){return ee.name==="position"}),V=this.attributes.find(function(ee){return ee.name==="normal"});if(H&&(H.dirty=!0,H.data&&H.data.length))for(var ie=0;ie<H.data.length;ie+=3){var we=C.f.fromValues(H.data[ie],H.data[ie+1],H.data[ie+2],1);C.f.transformMat4(we,we,te),re(H.data)?H.data.set([we[0],we[1],we[2]],ie):(H.data[ie]=we[0],H.data[ie+1]=we[1],H.data[ie+2]=we[2])}if(V){var ke=C.a.normalFromMat4(C.a.create(),te);if(V.data&&V.data.length)for(var oe=0;oe<V.data.length;oe+=3){var J=C.e.fromValues(V.data[oe],V.data[oe+1],V.data[oe+2]);C.e.transformMat3(J,J,ke),C.e.normalize(J,J),re(V.data)?V.data.set([J[0],J[1],J[2]],oe):(V.data[oe]=J[0],V.data[oe+1]=J[1],V.data[oe+2]=J[2])}}}}]),ge}(N.a)},function(D,m,o){"use strict";var f=function(){function c(){this._events={}}return c.prototype.on=function(M,_,x){return this._events[M]||(this._events[M]=[]),this._events[M].push({callback:_,once:!!x}),this},c.prototype.once=function(M,_){return this.on(M,_,!0),this},c.prototype.emit=function(M){for(var _=this,x=[],O=1;O<arguments.length;O++)x[O-1]=arguments[O];var S=this._events[M]||[],g=this._events["*"]||[],d=function(y){for(var E=y.length,b=0;b<E;b++)if(y[b]){var p=y[b],A=p.callback;p.once&&(y.splice(b,1),y.length===0&&delete _._events[M],E--,b--),A.apply(_,x)}};d(S),d(g)},c.prototype.off=function(M,_){if(M)if(_){for(var x=this._events[M]||[],O=x.length,S=0;S<O;S++)x[S].callback===_&&(x.splice(S,1),O--,S--);x.length===0&&delete this._events[M]}else delete this._events[M];else this._events={};return this},c.prototype.getEvents=function(){return this._events},c}();m.a=f},function(D,m,o){"use strict";var f=o(1),c=o(0),M=o(137),_=o(19),x={},O=function(S){function g(){return S!==null&&S.apply(this,arguments)||this}return Object(f.__extends)(g,S),g.prototype.isCanvas=function(){return!1},g.prototype.getBBox=function(){var d=1/0,y=-1/0,E=1/0,b=-1/0,p=[],A=[],C=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});return C.length>0?(Object(_.a)(C,function(N){var P=N.getBBox();p.push(P.minX,P.maxX),A.push(P.minY,P.maxY)}),d=Object(c.min)(p),y=Object(c.max)(p),E=Object(c.min)(A),b=Object(c.max)(A)):(d=0,y=0,E=0,b=0),{x:d,y:E,minX:d,minY:E,maxX:y,maxY:b,width:y-d,height:b-E}},g.prototype.getCanvasBBox=function(){var d=1/0,y=-1/0,E=1/0,b=-1/0,p=[],A=[],C=this.getChildren().filter(function(N){return N.get("visible")&&(!N.isGroup()||N.isGroup()&&N.getChildren().length>0)});return C.length>0?(Object(_.a)(C,function(N){var P=N.getCanvasBBox();p.push(P.minX,P.maxX),A.push(P.minY,P.maxY)}),d=Object(c.min)(p),y=Object(c.max)(p),E=Object(c.min)(A),b=Object(c.max)(A)):(d=0,y=0,E=0,b=0),{x:d,y:E,minX:d,minY:E,maxX:y,maxY:b,width:y-d,height:b-E}},g.prototype.getDefaultCfg=function(){var d=S.prototype.getDefaultCfg.call(this);return d.children=[],d},g.prototype.onAttrChange=function(d,y,E){if(S.prototype.onAttrChange.call(this,d,y,E),d==="matrix"){var b=this.getTotalMatrix();this._applyChildrenMarix(b)}},g.prototype.applyMatrix=function(d){var y=this.getTotalMatrix();S.prototype.applyMatrix.call(this,d);var E=this.getTotalMatrix();E!==y&&this._applyChildrenMarix(E)},g.prototype._applyChildrenMarix=function(d){var y=this.getChildren();Object(_.a)(y,function(E){E.applyMatrix(d)})},g.prototype.addShape=function(){for(var d=[],y=0;y<arguments.length;y++)d[y]=arguments[y];var E=d[0],b=d[1];Object(_.f)(E)?b=E:b.type=E;var p=x[b.type];p||(p=Object(_.k)(b.type),x[b.type]=p);var A=this.getShapeBase(),C=new A[p](b);return this.add(C),C},g.prototype.addGroup=function(){for(var d=[],y=0;y<arguments.length;y++)d[y]=arguments[y];var E,b=d[0],p=d[1];if(Object(_.d)(b))E=new b(p||{parent:this});else{var A=b||{},C=this.getGroupBase();E=new C(A)}return this.add(E),E},g.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},g.prototype.getShape=function(d,y,E){if(!Object(_.b)(this))return null;var b,p=this.getChildren();if(this.isCanvas())b=this._findShape(p,d,y,E);else{var A=[d,y,1];A=this.invertFromMatrix(A),this.isClipped(A[0],A[1])||(b=this._findShape(p,A[0],A[1],E))}return b},g.prototype._findShape=function(d,y,E,b){for(var p=null,A=d.length-1;A>=0;A--){var C=d[A];if(Object(_.b)(C)&&(C.isGroup()?p=C.getShape(y,E,b):C.isHit(y,E)&&(p=C)),p)break}return p},g.prototype.add=function(d){var y=this.getCanvas(),E=this.getChildren(),b=this.get("timeline"),p=d.getParent();p&&function(A,C,N){N===void 0&&(N=!0),N?C.destroy():(C.set("parent",null),C.set("canvas",null)),Object(_.j)(A.getChildren(),C)}(p,d,!1),d.set("parent",this),y&&function A(C,N){if(C.set("canvas",N),C.isGroup()){var P=C.get("children");P.length&&P.forEach(function(L){A(L,N)})}}(d,y),b&&function A(C,N){if(C.set("timeline",N),C.isGroup()){var P=C.get("children");P.length&&P.forEach(function(L){A(L,N)})}}(d,b),E.push(d),d.onCanvasChange("add"),this._applyElementMatrix(d)},g.prototype._applyElementMatrix=function(d){var y=this.getTotalMatrix();y&&d.applyMatrix(y)},g.prototype.getChildren=function(){return this.get("children")},g.prototype.sort=function(){var d,y=this.getChildren();Object(_.a)(y,function(E,b){return E._INDEX=b,E}),y.sort((d=function(E,b){return E.get("zIndex")-b.get("zIndex")},function(E,b){var p=d(E,b);return p===0?E._INDEX-b._INDEX:p})),this.onCanvasChange("sort")},g.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var d=this.getChildren(),y=d.length-1;y>=0;y--)d[y].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},g.prototype.destroy=function(){this.get("destroyed")||(this.clear(),S.prototype.destroy.call(this))},g.prototype.getFirst=function(){return this.getChildByIndex(0)},g.prototype.getLast=function(){var d=this.getChildren();return this.getChildByIndex(d.length-1)},g.prototype.getChildByIndex=function(d){return this.getChildren()[d]},g.prototype.getCount=function(){return this.getChildren().length},g.prototype.contain=function(d){return this.getChildren().indexOf(d)>-1},g.prototype.removeChild=function(d,y){y===void 0&&(y=!0),this.contain(d)&&d.remove(y)},g.prototype.findAll=function(d){var y=[],E=this.getChildren();return Object(_.a)(E,function(b){d(b)&&y.push(b),b.isGroup()&&(y=y.concat(b.findAll(d)))}),y},g.prototype.find=function(d){var y=null,E=this.getChildren();return Object(_.a)(E,function(b){if(d(b)?y=b:b.isGroup()&&(y=b.find(d)),y)return!1}),y},g.prototype.findById=function(d){return this.find(function(y){return y.get("id")===d})},g.prototype.findByClassName=function(d){return this.find(function(y){return y.get("className")===d})},g.prototype.findAllByName=function(d){return this.findAll(function(y){return y.get("name")===d})},g}(M.a);m.a=O},function(D,m,o){"use strict";var f=o(1),c=o(0),M=o(17),_=o(19),x=o(38),O=o(116),S=M.a.transform,g=["zIndex","capture","visible","type"],d=["repeat"];function y(A,C){var N={},P=C.attrs;for(var L in A)N[L]=P[L];return N}function E(A,C){var N={},P=C.attr();return Object(c.each)(A,function(L,z){d.indexOf(z)!==-1||Object(c.isEqual)(P[z],L)||(N[z]=L)}),N}function b(A,C){if(C.onFrame)return A;var N=C.startTime,P=C.delay,L=C.duration,z=Object.prototype.hasOwnProperty;return Object(c.each)(A,function(X){N+P<X.startTime+X.delay+X.duration&&L>X.delay&&Object(c.each)(C.toAttrs,function(re,se){z.call(X.toAttrs,se)&&(delete X.toAttrs[se],delete X.fromAttrs[se])})}),A}var p=function(A){function C(N){var P=A.call(this,N)||this;P.attrs={};var L=P.getDefaultAttrs();return Object(c.mix)(L,N.attrs),P.attrs=L,P.initAttrs(L),P.initAnimate(),P}return Object(f.__extends)(C,A),C.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},C.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},C.prototype.onCanvasChange=function(N){},C.prototype.initAttrs=function(N){},C.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},C.prototype.isGroup=function(){return!1},C.prototype.getParent=function(){return this.get("parent")},C.prototype.getCanvas=function(){return this.get("canvas")},C.prototype.attr=function(){for(var N,P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];var z=P[0],X=P[1];if(!z)return this.attrs;if(Object(c.isObject)(z)){for(var re in z)this.setAttr(re,z[re]);return this.afterAttrsChange(z),this}return P.length===2?(this.setAttr(z,X),this.afterAttrsChange(((N={})[z]=X,N)),this):this.attrs[z]},C.prototype.isClipped=function(N,P){var L=this.getClip();return L&&!L.isHit(N,P)},C.prototype.setAttr=function(N,P){var L=this.attrs[N];L!==P&&(this.attrs[N]=P,this.onAttrChange(N,P,L))},C.prototype.onAttrChange=function(N,P,L){N==="matrix"&&this.set("totalMatrix",null)},C.prototype.afterAttrsChange=function(N){if(this.cfg.isClipShape){var P=this.cfg.applyTo;P&&P.onCanvasChange("clip")}else this.onCanvasChange("attr")},C.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},C.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},C.prototype.setZIndex=function(N){this.set("zIndex",N);var P=this.getParent();return P&&P.sort(),this},C.prototype.toFront=function(){var N=this.getParent();if(N){var P=N.getChildren(),L=(this.get("el"),P.indexOf(this));P.splice(L,1),P.push(this),this.onCanvasChange("zIndex")}},C.prototype.toBack=function(){var N=this.getParent();if(N){var P=N.getChildren(),L=(this.get("el"),P.indexOf(this));P.splice(L,1),P.unshift(this),this.onCanvasChange("zIndex")}},C.prototype.remove=function(N){N===void 0&&(N=!0);var P=this.getParent();P?(Object(_.j)(P.getChildren(),this),P.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),N&&this.destroy()},C.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},C.prototype.getMatrix=function(){return this.attr("matrix")},C.prototype.setMatrix=function(N){this.attr("matrix",N),this.onCanvasChange("matrix")},C.prototype.getTotalMatrix=function(){var N=this.cfg.totalMatrix;if(!N){var P=this.attr("matrix"),L=this.cfg.parentMatrix;N=L&&P?Object(x.b)(L,P):P||L,this.set("totalMatrix",N)}return N},C.prototype.applyMatrix=function(N){var P=this.attr("matrix"),L=null;L=N&&P?Object(x.b)(N,P):P||N,this.set("totalMatrix",L),this.set("parentMatrix",N)},C.prototype.getDefaultMatrix=function(){return null},C.prototype.applyToMatrix=function(N){var P=this.attr("matrix");return P?Object(x.c)(P,N):N},C.prototype.invertFromMatrix=function(N){var P=this.attr("matrix");if(P){var L=Object(x.a)(P);if(L)return Object(x.c)(L,N)}return N},C.prototype.setClip=function(N){var P=this.getCanvas(),L=null;if(N){var z=this.getShapeBase()[Object(c.upperFirst)(N.type)];z&&(L=new z({type:N.type,isClipShape:!0,applyTo:this,attrs:N.attrs,canvas:P}))}return this.set("clipShape",L),this.onCanvasChange("clip"),L},C.prototype.getClip=function(){var N=this.cfg.clipShape;return N||null},C.prototype.clone=function(){var N=this,P=this.attrs,L={};Object(c.each)(P,function(X,re){Object(c.isArray)(P[re])?L[re]=function(se){for(var ce=[],xe=0;xe<se.length;xe++)Object(c.isArray)(se[xe])?ce.push([].concat(se[xe])):ce.push(se[xe]);return ce}(P[re]):L[re]=P[re]});var z=new this.constructor({attrs:L});return Object(c.each)(g,function(X){z.set(X,N.get(X))}),z},C.prototype.destroy=function(){this.destroyed||(this.attrs={},A.prototype.destroy.call(this))},C.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},C.prototype.animate=function(){for(var N=[],P=0;P<arguments.length;P++)N[P]=arguments[P];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var L=this.get("timeline");L||(L=this.get("canvas").get("timeline"),this.set("timeline",L));var z=this.get("animations")||[];L.timer||L.initTimer();var X,re,se,ce,xe,ye=N[0],W=N[1],Ie=N[2],ge=Ie===void 0?"easeLinear":Ie,te=N[3],H=te===void 0?c.noop:te,V=N[4],ie=V===void 0?0:V;Object(c.isFunction)(ye)?(X=ye,ye={}):Object(c.isObject)(ye)&&ye.onFrame&&(X=ye.onFrame,re=ye.repeat),Object(c.isObject)(W)?(W=(xe=W).duration,ge=xe.easing||"easeLinear",ie=xe.delay||0,re=xe.repeat||re||!1,H=xe.callback||c.noop,se=xe.pauseCallback||c.noop,ce=xe.resumeCallback||c.noop):(Object(c.isNumber)(H)&&(ie=H,H=null),Object(c.isFunction)(ge)?(H=ge,ge="easeLinear"):ge=ge||"easeLinear");var we=E(ye,this),ke={fromAttrs:y(we,this),toAttrs:we,duration:W,easing:ge,repeat:re,callback:H,pauseCallback:se,resumeCallback:ce,delay:ie,startTime:L.getTime(),id:Object(c.uniqueId)(),onFrame:X,pathFormatted:!1};z.length>0?z=b(z,ke):L.addAnimator(this),z.push(ke),this.set("animations",z),this.set("_pause",{isPaused:!1})}},C.prototype.stopAnimate=function(N){var P=this;N===void 0&&(N=!0);var L=this.get("animations");Object(c.each)(L,function(z){N&&(z.onFrame?P.attr(z.onFrame(1)):P.attr(z.toAttrs)),z.callback&&z.callback()}),this.set("animating",!1),this.set("animations",[])},C.prototype.pauseAnimate=function(){var N=this.get("timeline"),P=this.get("animations"),L=N.getTime();return Object(c.each)(P,function(z){z._paused=!0,z._pauseTime=L,z.pauseCallback&&z.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:L}),this},C.prototype.resumeAnimate=function(){var N=this.get("timeline").getTime(),P=this.get("animations"),L=this.get("_pause").pauseTime;return Object(c.each)(P,function(z){z.startTime=z.startTime+(N-L),z._paused=!1,z._pauseTime=null,z.resumeCallback&&z.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",P),this},C.prototype.emitDelegation=function(N,P){var L,z=this,X=P.propagationPath;this.getEvents(),N==="mouseenter"?L=P.fromShape:N==="mouseleave"&&(L=P.toShape);for(var re=function(xe){var ye=X[xe],W=ye.get("name");if(W){if((ye.isGroup()||ye.isCanvas&&ye.isCanvas())&&L&&Object(_.g)(ye,L))return"break";Object(c.isArray)(W)?Object(c.each)(W,function(Ie){z.emitDelegateEvent(ye,Ie,P)}):se.emitDelegateEvent(ye,W,P)}},se=this,ce=0;ce<X.length&&re(ce)!=="break";ce++);},C.prototype.emitDelegateEvent=function(N,P,L){var z=this.getEvents(),X=P+":"+L.type;(z[X]||z["*"])&&(L.name=X,L.currentTarget=N,L.delegateTarget=this,L.delegateObject=N.get("delegateObject"),this.emit(X,L))},C.prototype.translate=function(N,P){N===void 0&&(N=0),P===void 0&&(P=0);var L=this.getMatrix(),z=S(L,[["t",N,P]]);return this.setMatrix(z),this},C.prototype.move=function(N,P){var L=this.attr("x")||0,z=this.attr("y")||0;return this.translate(N-L,P-z),this},C.prototype.moveTo=function(N,P){return this.move(N,P)},C.prototype.scale=function(N,P){var L=this.getMatrix(),z=S(L,[["s",N,P||N]]);return this.setMatrix(z),this},C.prototype.rotate=function(N){var P=this.getMatrix(),L=S(P,[["r",N]]);return this.setMatrix(L),this},C.prototype.rotateAtStart=function(N){var P=this.attr(),L=P.x,z=P.y,X=this.getMatrix(),re=S(X,[["t",-L,-z],["r",N],["t",L,z]]);return this.setMatrix(re),this},C.prototype.rotateAtPoint=function(N,P,L){var z=this.getMatrix(),X=S(z,[["t",-N,-P],["r",L],["t",N,P]]);return this.setMatrix(X),this},C}(O.a);m.a=p},function(D,m,o){"use strict";(function(f){o.d(m,"a",function(){return E});var c=function(){for(var A=0,C=0,N=arguments.length;C<N;C++)A+=arguments[C].length;var P=Array(A),L=0;for(C=0;C<N;C++)for(var z=arguments[C],X=0,re=z.length;X<re;X++,L++)P[L]=z[X];return P},M=function(A,C,N){this.name=A,this.version=C,this.os=N,this.type="browser"},_=function(A){this.version=A,this.type="node",this.name="node",this.os=f.platform},x=function(A,C,N,P){this.name=A,this.version=C,this.os=N,this.bot=P,this.type="bot-device"},O=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},S=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},g=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],y=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function E(A){return A?p(A):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new S:typeof navigator!="undefined"?p(navigator.userAgent):f!==void 0&&f.version?new _(f.version.slice(1)):null}function b(A){return A!==""&&d.reduce(function(C,N){var P=N[0],L=N[1];if(C)return C;var z=L.exec(A);return!!z&&[P,z]},!1)}function p(A){var C=b(A);if(!C)return null;var N=C[0],P=C[1];if(N==="searchbot")return new O;var L=P[1]&&P[1].split(/[._]/).slice(0,3);L?L.length<3&&(L=c(L,function(se){for(var ce=[],xe=0;xe<se;xe++)ce.push("0");return ce}(3-L.length))):L=[];var z=L.join("."),X=function(se){for(var ce=0,xe=y.length;ce<xe;ce++){var ye=y[ce],W=ye[0];if(ye[1].exec(se))return W}return null}(A),re=g.exec(A);return re&&re[1]?new x(N,z,X,re[1]):new M(N,z,X)}}).call(this,o(166))},function(D,m,o){"use strict";o.d(m,"b",function(){return S}),o.d(m,"a",function(){return g});var f=o(15),c=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,M=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,x=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function O(d,y){var E=d.match(x);Object(f.c)(E,function(b){var p=b.split(":");y.addColorStop(p[0],p[1])})}function S(d,y,E){if(Object(f.k)(E)){if(E[1]==="("||E[2]==="("){if(E[0]==="l")return function(b,p,A){var C,N,P=c.exec(A),L=parseFloat(P[1])%360*(Math.PI/180),z=P[2],X=p.getBBox();L>=0&&L<.5*Math.PI?(C={x:X.minX,y:X.minY},N={x:X.maxX,y:X.maxY}):.5*Math.PI<=L&&L<Math.PI?(C={x:X.maxX,y:X.minY},N={x:X.minX,y:X.maxY}):Math.PI<=L&&L<1.5*Math.PI?(C={x:X.maxX,y:X.maxY},N={x:X.minX,y:X.minY}):(C={x:X.minX,y:X.maxY},N={x:X.maxX,y:X.minY});var re=Math.tan(L),se=re*re,ce=(N.x-C.x+re*(N.y-C.y))/(se+1)+C.x,xe=re*(N.x-C.x+re*(N.y-C.y))/(se+1)+C.y,ye=b.createLinearGradient(C.x,C.y,ce,xe);return O(z,ye),ye}(d,y,E);if(E[0]==="r")return function(b,p,A){var C=M.exec(A),N=parseFloat(C[1]),P=parseFloat(C[2]),L=parseFloat(C[3]),z=C[4];if(L===0){var X=z.match(x);return X[X.length-1].split(":")[1]}var re=p.getBBox(),se=re.maxX-re.minX,ce=re.maxY-re.minY,xe=Math.sqrt(se*se+ce*ce)/2,ye=b.createRadialGradient(re.minX+se*N,re.minY+ce*P,0,re.minX+se/2,re.minY+ce/2,L*xe);return O(z,ye),ye}(d,y,E);if(E[0]==="p")return function(b,p,A){if(p.get("patternSource")&&p.get("patternSource")===A)return p.get("pattern");var C,N,P=_.exec(A),L=P[1],z=P[2];function X(){C=b.createPattern(N,L),p.set("pattern",C),p.set("patternSource",A)}switch(L){case"a":L="repeat";break;case"x":L="repeat-x";break;case"y":L="repeat-y";break;case"n":L="no-repeat";break;default:L="no-repeat"}return N=new Image,z.match(/^data:/i)||(N.crossOrigin="Anonymous"),N.src=z,N.complete?X():(N.onload=X,N.src=N.src),C}(d,y,E)}return E}}function g(d){var y=0,E=0,b=0,p=0;return Object(f.g)(d)?d.length===1?y=E=b=p=d[0]:d.length===2?(y=b=d[0],E=p=d[1]):d.length===3?(y=d[0],E=p=d[1],b=d[2]):(y=d[0],E=d[1],b=d[2],p=d[3]):y=E=b=p=d,[y,E,b,p]}},function(D,m,o){"use strict";o.d(m,"b",function(){return M}),o.d(m,"a",function(){return _});var f=o(59),c=o.n(f);o(2);function M(x,O){return O[0]=x[0],O[1]=x[1],O[2]=x[2],O[3]=x[4],O[4]=x[5],O[5]=x[6],O[6]=x[8],O[7]=x[9],O[8]=x[10],O}function _(x){var O=c()(x,3);return O[0]+256*O[1]+65536*O[2]-1}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.MESSAGE=m.ALGORITHM=void 0,m.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},m.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f=o(1),c=o(0),M=o(45),_=function(O,S,g,d){var y=O.nodes,E=y===void 0?[]:y,b=O.edges,p=b===void 0?[]:b,A=[],C={},N={},P={};E.forEach(function(xe,ye){var W=xe.id;A.push(W),N[W]=1/0,W===S&&(N[W]=0)});for(var L=E.length,z=function(xe){var ye=function(Ie,ge,te){for(var H,V=1/0,ie=0;ie<ge.length;ie++){var we=ge[ie].id;!te[we]&&Ie[we]<=V&&(V=Ie[we],H=ge[ie])}return H}(N,E,C),W=ye.id;if(C[W]=!0,N[W]===1/0)return"continue";(g?(0,M.getOutEdgesNodeId)(W,p):(0,M.getEdgesByNodeId)(W,p)).forEach(function(Ie){var ge=Ie.target,te=Ie.source,H=ge===W?te:ge,V=d&&Ie[d]?Ie[d]:1;N[H]>N[ye.id]+V?(N[H]=N[ye.id]+V,P[H]=[ye.id]):N[H]===N[ye.id]+V&&P[H].push(ye.id)})},X=0;X<L;X++)z();P[S]=[S];var re={};for(var se in N)N[se]!==1/0&&x(S,se,P,re);var ce={};for(var se in re)ce[se]=re[se][0];return{length:N,path:ce,allPath:re}};function x(O,S,g,d){if(O===S)return[O];if(d[S])return d[S];for(var y=[],E=0,b=g[S];E<b.length;E++){var p=x(O,b[E],g,d);if(!p)return;for(var A=0,C=p;A<C.length;A++){var N=C[A];(0,c.isArray)(N)?y.push((0,f.__spreadArray)((0,f.__spreadArray)([],N),[S])):y.push([N,S])}}return d[S]=y,d[S]}m.default=_},function(D,m,o){"use strict";function f(d){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(d)}var c=o(42);D.exports=M;function M(d){this._isDirected=!c.has(d,"directed")||d.directed,this._isMultigraph=!!c.has(d,"multigraph")&&d.multigraph,this._isCompound=!!c.has(d,"compound")&&d.compound,this._label=void 0,this._defaultNodeLabelFn=c.constant(void 0),this._defaultEdgeLabelFn=c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function _(d,y){d[y]?d[y]++:d[y]=1}function x(d,y){--d[y]||delete d[y]}function O(d,y,E,b){var p=""+y,A=""+E;if(!d&&p>A){var C=p;p=A,A=C}return p+""+A+""+(c.isUndefined(b)?"\0":b)}function S(d,y,E,b){var p=""+y,A=""+E;if(!d&&p>A){var C=p;p=A,A=C}var N={v:p,w:A};return b&&(N.name=b),N}function g(d,y){return O(d,y.v,y.w,y.name)}M.prototype._nodeCount=0,M.prototype._edgeCount=0,M.prototype.isDirected=function(){return this._isDirected},M.prototype.isMultigraph=function(){return this._isMultigraph},M.prototype.isCompound=function(){return this._isCompound},M.prototype.setGraph=function(d){return this._label=d,this},M.prototype.graph=function(){return this._label},M.prototype.setDefaultNodeLabel=function(d){return c.isFunction(d)||(d=c.constant(d)),this._defaultNodeLabelFn=d,this},M.prototype.nodeCount=function(){return this._nodeCount},M.prototype.nodes=function(){return c.keys(this._nodes)},M.prototype.sources=function(){var d=this;return c.filter(this.nodes(),function(y){return c.isEmpty(d._in[y])})},M.prototype.sinks=function(){var d=this;return c.filter(this.nodes(),function(y){return c.isEmpty(d._out[y])})},M.prototype.setNodes=function(d,y){var E=arguments,b=this;return c.each(d,function(p){E.length>1?b.setNode(p,y):b.setNode(p)}),this},M.prototype.setNode=function(d,y){return c.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=y),this):(this._nodes[d]=arguments.length>1?y:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]="\0",this._children[d]={},this._children["\0"][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},M.prototype.node=function(d){return this._nodes[d]},M.prototype.hasNode=function(d){return c.has(this._nodes,d)},M.prototype.removeNode=function(d){var y=this;if(c.has(this._nodes,d)){var E=function(b){y.removeEdge(y._edgeObjs[b])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],c.each(this.children(d),function(b){y.setParent(b)}),delete this._children[d]),c.each(c.keys(this._in[d]),E),delete this._in[d],delete this._preds[d],c.each(c.keys(this._out[d]),E),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},M.prototype.setParent=function(d,y){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(c.isUndefined(y))y="\0";else{for(var E=y+="";!c.isUndefined(E);E=this.parent(E))if(E===d)throw new Error("Setting "+y+" as parent of "+d+" would create a cycle");this.setNode(y)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=y,this._children[y][d]=!0,this},M.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},M.prototype.parent=function(d){if(this._isCompound){var y=this._parent[d];if(y!=="\0")return y}},M.prototype.children=function(d){if(c.isUndefined(d)&&(d="\0"),this._isCompound){var y=this._children[d];if(y)return c.keys(y)}else{if(d==="\0")return this.nodes();if(this.hasNode(d))return[]}},M.prototype.predecessors=function(d){var y=this._preds[d];if(y)return c.keys(y)},M.prototype.successors=function(d){var y=this._sucs[d];if(y)return c.keys(y)},M.prototype.neighbors=function(d){var y=this.predecessors(d);if(y)return c.union(y,this.successors(d))},M.prototype.isLeaf=function(d){return(this.isDirected()?this.successors(d):this.neighbors(d)).length===0},M.prototype.filterNodes=function(d){var y=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});y.setGraph(this.graph());var E=this;c.each(this._nodes,function(p,A){d(A)&&y.setNode(A,p)}),c.each(this._edgeObjs,function(p){y.hasNode(p.v)&&y.hasNode(p.w)&&y.setEdge(p,E.edge(p))});var b={};return this._isCompound&&c.each(y.nodes(),function(p){y.setParent(p,function A(C){var N=E.parent(C);return N===void 0||y.hasNode(N)?(b[C]=N,N):N in b?b[N]:A(N)}(p))}),y},M.prototype.setDefaultEdgeLabel=function(d){return c.isFunction(d)||(d=c.constant(d)),this._defaultEdgeLabelFn=d,this},M.prototype.edgeCount=function(){return this._edgeCount},M.prototype.edges=function(){return c.values(this._edgeObjs)},M.prototype.setPath=function(d,y){var E=this,b=arguments;return c.reduce(d,function(p,A){return b.length>1?E.setEdge(p,A,y):E.setEdge(p,A),A}),this},M.prototype.setEdge=function(){var d,y,E,b,p=!1,A=arguments[0];f(A)==="object"&&A!==null&&"v"in A?(d=A.v,y=A.w,E=A.name,arguments.length===2&&(b=arguments[1],p=!0)):(d=A,y=arguments[1],E=arguments[3],arguments.length>2&&(b=arguments[2],p=!0)),d=""+d,y=""+y,c.isUndefined(E)||(E=""+E);var C=O(this._isDirected,d,y,E);if(c.has(this._edgeLabels,C))return p&&(this._edgeLabels[C]=b),this;if(!c.isUndefined(E)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(y),this._edgeLabels[C]=p?b:this._defaultEdgeLabelFn(d,y,E);var N=S(this._isDirected,d,y,E);return d=N.v,y=N.w,Object.freeze(N),this._edgeObjs[C]=N,_(this._preds[y],d),_(this._sucs[d],y),this._in[y][C]=N,this._out[d][C]=N,this._edgeCount++,this},M.prototype.edge=function(d,y,E){var b=arguments.length===1?g(this._isDirected,arguments[0]):O(this._isDirected,d,y,E);return this._edgeLabels[b]},M.prototype.hasEdge=function(d,y,E){var b=arguments.length===1?g(this._isDirected,arguments[0]):O(this._isDirected,d,y,E);return c.has(this._edgeLabels,b)},M.prototype.removeEdge=function(d,y,E){var b=arguments.length===1?g(this._isDirected,arguments[0]):O(this._isDirected,d,y,E),p=this._edgeObjs[b];return p&&(d=p.v,y=p.w,delete this._edgeLabels[b],delete this._edgeObjs[b],x(this._preds[y],d),x(this._sucs[d],y),delete this._in[y][b],delete this._out[d][b],this._edgeCount--),this},M.prototype.inEdges=function(d,y){var E=this._in[d];if(E){var b=c.values(E);return y?c.filter(b,function(p){return p.v===y}):b}},M.prototype.outEdges=function(d,y){var E=this._out[d];if(E){var b=c.values(E);return y?c.filter(b,function(p){return p.w===y}):b}},M.prototype.nodeEdges=function(d,y){var E=this.inEdges(d,y);if(E)return E.concat(this.outEdges(d,y))}},function(D,m,o){var f=o(62)(o(47),"Map");D.exports=f},function(D,m,o){var f=o(324),c=o(331),M=o(333),_=o(334),x=o(335);function O(S){var g=-1,d=S==null?0:S.length;for(this.clear();++g<d;){var y=S[g];this.set(y[0],y[1])}}O.prototype.clear=f,O.prototype.delete=c,O.prototype.get=M,O.prototype.has=_,O.prototype.set=x,D.exports=O},function(D,m){D.exports=function(o,f){for(var c=-1,M=o==null?0:o.length;++c<M&&f(o[c],c,o)!==!1;);return o}},function(D,m){D.exports=function(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=9007199254740991}},function(D,m,o){(function(f){function c(g){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}var M=o(175),_=c(m)=="object"&&m&&!m.nodeType&&m,x=_&&c(f)=="object"&&f&&!f.nodeType&&f,O=x&&x.exports===_&&M.process,S=function(){try{var g=x&&x.require&&x.require("util").types;return g||O&&O.binding&&O.binding("util")}catch(d){}}();f.exports=S}).call(this,o(87)(D))},function(D,m,o){var f=o(105),c=o(341),M=Object.prototype.hasOwnProperty;D.exports=function(_){if(!f(_))return c(_);var x=[];for(var O in Object(_))M.call(_,O)&&O!="constructor"&&x.push(O);return x}},function(D,m,o){var f=o(183),c=o(184),M=Object.prototype.propertyIsEnumerable,_=Object.getOwnPropertySymbols,x=_?function(O){return O==null?[]:(O=Object(O),f(_(O),function(S){return M.call(O,S)}))}:c;D.exports=x},function(D,m){D.exports=function(o,f){for(var c=-1,M=f.length,_=o.length;++c<M;)o[_+c]=f[c];return o}},function(D,m,o){var f=o(189);D.exports=function(c){var M=new c.constructor(c.byteLength);return new f(M).set(new f(c)),M}},function(D,m){D.exports=function(o){return function(){return o}}},function(D,m,o){var f=o(155),c=o(57);D.exports=function(M,_){return M&&f(M,_,c)}},function(D,m,o){var f=o(360)();D.exports=f},function(D,m){D.exports=function(o){var f=-1,c=Array(o.size);return o.forEach(function(M){c[++f]=M}),c}},function(D,m,o){function f(O){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(O)}var c=o(31),M=o(74),_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/;D.exports=function(O,S){if(c(O))return!1;var g=f(O);return!(g!="number"&&g!="symbol"&&g!="boolean"&&O!=null&&!M(O))||x.test(O)||!_.test(O)||S!=null&&O in Object(S)}},function(D,m,o){var f=o(151),c=o(394);D.exports=function M(_,x,O,S,g){var d=-1,y=_.length;for(O||(O=c),g||(g=[]);++d<y;){var E=_[d];x>0&&O(E)?x>1?M(E,x-1,O,S,g):f(g,E):S||(g[g.length]=E)}return g}},function(D,m,o){var f=o(74);D.exports=function(c,M,_){for(var x=-1,O=c.length;++x<O;){var S=c[x],g=M(S);if(g!=null&&(d===void 0?g==g&&!f(g):_(g,d)))var d=g,y=S}return y}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BindingOnSyntax=void 0;var f=o(161),c=function(){function M(_){this._binding=_}return M.prototype.onActivation=function(_){return this._binding.onActivation=_,new f.BindingWhenSyntax(this._binding)},M}();m.BindingOnSyntax=c},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BindingWhenSyntax=void 0;var f=o(160),c=o(236),M=function(){function _(x){this._binding=x}return _.prototype.when=function(x){return this._binding.constraint=x,new f.BindingOnSyntax(this._binding)},_.prototype.whenTargetNamed=function(x){return this._binding.constraint=c.namedConstraint(x),new f.BindingOnSyntax(this._binding)},_.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(x){return x.target!==null&&!x.target.isNamed()&&!x.target.isTagged()},new f.BindingOnSyntax(this._binding)},_.prototype.whenTargetTagged=function(x,O){return this._binding.constraint=c.taggedConstraint(x)(O),new f.BindingOnSyntax(this._binding)},_.prototype.whenInjectedInto=function(x){return this._binding.constraint=function(O){return c.typeConstraint(x)(O.parentRequest)},new f.BindingOnSyntax(this._binding)},_.prototype.whenParentNamed=function(x){return this._binding.constraint=function(O){return c.namedConstraint(x)(O.parentRequest)},new f.BindingOnSyntax(this._binding)},_.prototype.whenParentTagged=function(x,O){return this._binding.constraint=function(S){return c.taggedConstraint(x)(O)(S.parentRequest)},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorIs=function(x){return this._binding.constraint=function(O){return c.traverseAncerstors(O,c.typeConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorIs=function(x){return this._binding.constraint=function(O){return!c.traverseAncerstors(O,c.typeConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorNamed=function(x){return this._binding.constraint=function(O){return c.traverseAncerstors(O,c.namedConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorNamed=function(x){return this._binding.constraint=function(O){return!c.traverseAncerstors(O,c.namedConstraint(x))},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorTagged=function(x,O){return this._binding.constraint=function(S){return c.traverseAncerstors(S,c.taggedConstraint(x)(O))},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorTagged=function(x,O){return this._binding.constraint=function(S){return!c.traverseAncerstors(S,c.taggedConstraint(x)(O))},new f.BindingOnSyntax(this._binding)},_.prototype.whenAnyAncestorMatches=function(x){return this._binding.constraint=function(O){return c.traverseAncerstors(O,x)},new f.BindingOnSyntax(this._binding)},_.prototype.whenNoAncestorMatches=function(x){return this._binding.constraint=function(O){return!c.traverseAncerstors(O,x)},new f.BindingOnSyntax(this._binding)},_}();m.BindingWhenSyntax=M},function(D,m){D.exports=function(o,f,c){return o[0]=f[0]-c[0],o[1]=f[1]-c[1],o}},function(D,m,o){D.exports={graphlib:o(46),layout:o(418),debug:o(479),util:{time:o(36).time,notime:o(36).notime},version:o(480)}},function(D,m){},function(D,m){},function(D,m){var o,f,c=D.exports={};function M(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}function x(A){if(o===setTimeout)return setTimeout(A,0);if((o===M||!o)&&setTimeout)return o=setTimeout,setTimeout(A,0);try{return o(A,0)}catch(C){try{return o.call(null,A,0)}catch(N){return o.call(this,A,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:M}catch(A){o=M}try{f=typeof clearTimeout=="function"?clearTimeout:_}catch(A){f=_}})();var O,S=[],g=!1,d=-1;function y(){g&&O&&(g=!1,O.length?S=O.concat(S):d=-1,S.length&&E())}function E(){if(!g){var A=x(y);g=!0;for(var C=S.length;C;){for(O=S,S=[];++d<C;)O&&O[d].run();d=-1,C=S.length}O=null,g=!1,function(N){if(f===clearTimeout)return clearTimeout(N);if((f===_||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(N);try{f(N)}catch(P){try{return f.call(null,N)}catch(L){return f.call(this,N)}}}(A)}}function b(A,C){this.fun=A,this.array=C}function p(){}c.nextTick=function(A){var C=new Array(arguments.length-1);if(arguments.length>1)for(var N=1;N<arguments.length;N++)C[N-1]=arguments[N];S.push(new b(A,C)),S.length!==1||g||x(E)},b.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=p,c.addListener=p,c.once=p,c.off=p,c.removeListener=p,c.removeAllListeners=p,c.emit=p,c.prependListener=p,c.prependOnceListener=p,c.listeners=function(A){return[]},c.binding=function(A){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(A){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(D,m,o){"use strict";var f=o(1),c=function(M){function _(){return M!==null&&M.apply(this,arguments)||this}return Object(f.__extends)(_,M),_.prototype.isGroup=function(){return!0},_.prototype.isEntityGroup=function(){return!1},_.prototype.clone=function(){for(var x=M.prototype.clone.call(this),O=this.getChildren(),S=0;S<O.length;S++){var g=O[S];x.add(g.clone())}return x},_}(o(136).a);m.a=c},function(D,m,o){"use strict";var f=o(1),c=o(137),M=o(38),_=function(x){function O(S){return x.call(this,S)||this}return Object(f.__extends)(O,x),O.prototype._isInBBox=function(S,g){var d=this.getBBox();return d.minX<=S&&d.maxX>=S&&d.minY<=g&&d.maxY>=g},O.prototype.afterAttrsChange=function(S){x.prototype.afterAttrsChange.call(this,S),this.clearCacheBBox()},O.prototype.getBBox=function(){var S=this.cfg.bbox;return S||(S=this.calculateBBox(),this.set("bbox",S)),S},O.prototype.getCanvasBBox=function(){var S=this.cfg.canvasBBox;return S||(S=this.calculateCanvasBBox(),this.set("canvasBBox",S)),S},O.prototype.applyMatrix=function(S){x.prototype.applyMatrix.call(this,S),this.set("canvasBBox",null)},O.prototype.calculateCanvasBBox=function(){var S=this.getBBox(),g=this.getTotalMatrix(),d=S.minX,y=S.minY,E=S.maxX,b=S.maxY;if(g){var p=Object(M.c)(g,[S.minX,S.minY]),A=Object(M.c)(g,[S.maxX,S.minY]),C=Object(M.c)(g,[S.minX,S.maxY]),N=Object(M.c)(g,[S.maxX,S.maxY]);d=Math.min(p[0],A[0],C[0],N[0]),E=Math.max(p[0],A[0],C[0],N[0]),y=Math.min(p[1],A[1],C[1],N[1]),b=Math.max(p[1],A[1],C[1],N[1])}var P=this.attrs;if(P.shadowColor){var L=P.shadowBlur,z=L===void 0?0:L,X=P.shadowOffsetX,re=X===void 0?0:X,se=P.shadowOffsetY,ce=se===void 0?0:se,xe=d-z+re,ye=E+z+re,W=y-z+ce,Ie=b+z+ce;d=Math.min(d,xe),E=Math.max(E,ye),y=Math.min(y,W),b=Math.max(b,Ie)}return{x:d,y,minX:d,minY:y,maxX:E,maxY:b,width:E-d,height:b-y}},O.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},O.prototype.isClipShape=function(){return this.get("isClipShape")},O.prototype.isInShape=function(S,g){return!1},O.prototype.isOnlyHitBox=function(){return!1},O.prototype.isHit=function(S,g){var d=this.get("startArrowShape"),y=this.get("endArrowShape"),E=[S,g,1],b=(E=this.invertFromMatrix(E))[0],p=E[1],A=this._isInBBox(b,p);return this.isOnlyHitBox()?A:!!(A&&!this.isClipped(b,p)&&(this.isInShape(b,p)||d&&d.isHit(b,p)||y&&y.isHit(b,p)))},O}(c.a);m.a=_},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(_,x){return x?M(_):c(_)},m.detectStrongConnectComponents=m.detectConnectedComponents=void 0;var f=o(45),c=function(_){for(var x=_.nodes,O=x===void 0?[]:x,S=_.edges,g=S===void 0?[]:S,d=[],y={},E=[],b=function N(P){E.push(P),y[P.id]=!0;for(var L=(0,f.getNeighbors)(P.id,g),z=function(re){var se=L[re];if(!y[se]){var ce=O.filter(function(xe){return xe.id===se});ce.length>0&&N(ce[0])}},X=0;X<L.length;++X)z(X)},p=0;p<O.length;p++){var A=O[p];if(!y[A.id]){b(A);for(var C=[];E.length>0;)C.push(E.pop());d.push(C)}}return d};m.detectConnectedComponents=c;var M=function(_){for(var x=_.nodes,O=x===void 0?[]:x,S=_.edges,g=S===void 0?[]:S,d=[],y={},E={},b={},p=[],A=0,C=function z(X){E[X.id]=A,b[X.id]=A,A+=1,d.push(X),y[X.id]=!0;for(var re=(0,f.getNeighbors)(X.id,g,"target").filter(function(W){return O.map(function(Ie){return Ie.id}).indexOf(W)>-1}),se=function(W){var Ie=re[W];if(E[Ie]||E[Ie]===0)y[Ie]&&(b[X.id]=Math.min(b[X.id],E[Ie]));else{var ge=O.filter(function(te){return te.id===Ie});ge.length>0&&z(ge[0]),b[X.id]=Math.min(b[X.id],b[Ie])}},ce=0;ce<re.length;ce++)se(ce);if(b[X.id]===E[X.id]){for(var xe=[];d.length>0;){var ye=d.pop();if(y[ye.id]=!1,xe.push(ye),ye===X)break}xe.length>0&&p.push(xe)}},N=0,P=O;N<P.length;N++){var L=P[N];E[L.id]||E[L.id]===0||C(L)}return p};m.detectStrongConnectComponents=M},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.getOutDegree=m.getInDegree=m.default=void 0;var f=function(M){var _={},x=M.nodes,O=x===void 0?[]:x,S=M.edges,g=S===void 0?[]:S;return O.forEach(function(d){_[d.id]={degree:0,inDegree:0,outDegree:0}}),g.forEach(function(d){_[d.source].degree++,_[d.source].outDegree++,_[d.target].degree++,_[d.target].inDegree++}),_},c=f;m.default=c,m.getInDegree=function(M,_){return f(M)[_]?f(M)[_].inDegree:0},m.getOutDegree=function(M,_){return f(M)[_]?f(M)[_].outDegree:0}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(c,M,_){(function x(O,S,g,d){d.enter({current:S,previous:g});var y=O.edges,E=y===void 0?[]:y;(0,f.getNeighbors)(S,E,"target").forEach(function(b){d.allowTraversal({previous:g,current:S,next:b})&&x(O,b,S,d)}),d.leave({current:S,previous:g})})(c,M,"",function(x){x===void 0&&(x={});var O=x,S=function(){},g=(d={},function(y){var E=y.next;return!d[E]&&(d[E]=!0,!0)}),d;return O.allowTraversal=x.allowTraversal||g,O.enter=x.enter||S,O.leave=x.leave||S,O}(_))};var f=o(45)},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f,c=(f=o(95))&&f.__esModule?f:{default:f},M=function(_,x){for(var O=(0,c.default)(_,x),S=[],g=O.length,d=0;d<g;d+=1){S[d]=[];for(var y=0;y<g;y+=1)d===y?S[d][y]=0:O[d][y]!==0&&O[d][y]?S[d][y]=O[d][y]:S[d][y]=1/0}for(var E=0;E<g;E+=1)for(d=0;d<g;d+=1)for(y=0;y<g;y+=1)S[d][y]>S[d][E]+S[E][y]&&(S[d][y]=S[d][E]+S[E][y]);return S};m.default=M},function(D,m,o){var f=o(303),c={};for(var M in f)f.hasOwnProperty(M)&&(c[f[M]]=M);var _=D.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var x in _)if(_.hasOwnProperty(x)){if(!("channels"in _[x]))throw new Error("missing channels property: "+x);if(!("labels"in _[x]))throw new Error("missing channel labels property: "+x);if(_[x].labels.length!==_[x].channels)throw new Error("channel and label counts mismatch: "+x);var O=_[x].channels,S=_[x].labels;delete _[x].channels,delete _[x].labels,Object.defineProperty(_[x],"channels",{value:O}),Object.defineProperty(_[x],"labels",{value:S})}_.rgb.hsl=function(g){var d,y,E=g[0]/255,b=g[1]/255,p=g[2]/255,A=Math.min(E,b,p),C=Math.max(E,b,p),N=C-A;return C===A?d=0:E===C?d=(b-p)/N:b===C?d=2+(p-E)/N:p===C&&(d=4+(E-b)/N),(d=Math.min(60*d,360))<0&&(d+=360),y=(A+C)/2,[d,100*(C===A?0:y<=.5?N/(C+A):N/(2-C-A)),100*y]},_.rgb.hsv=function(g){var d,y,E,b,p,A=g[0]/255,C=g[1]/255,N=g[2]/255,P=Math.max(A,C,N),L=P-Math.min(A,C,N),z=function(X){return(P-X)/6/L+.5};return L===0?b=p=0:(p=L/P,d=z(A),y=z(C),E=z(N),A===P?b=E-y:C===P?b=1/3+d-E:N===P&&(b=2/3+y-d),b<0?b+=1:b>1&&(b-=1)),[360*b,100*p,100*P]},_.rgb.hwb=function(g){var d=g[0],y=g[1],E=g[2];return[_.rgb.hsl(g)[0],100*(1/255*Math.min(d,Math.min(y,E))),100*(E=1-1/255*Math.max(d,Math.max(y,E)))]},_.rgb.cmyk=function(g){var d,y=g[0]/255,E=g[1]/255,b=g[2]/255;return[100*((1-y-(d=Math.min(1-y,1-E,1-b)))/(1-d)||0),100*((1-E-d)/(1-d)||0),100*((1-b-d)/(1-d)||0),100*d]},_.rgb.keyword=function(g){var d=c[g];if(d)return d;var y,E,b,p=1/0;for(var A in f)if(f.hasOwnProperty(A)){var C=f[A],N=(E=g,b=C,Math.pow(E[0]-b[0],2)+Math.pow(E[1]-b[1],2)+Math.pow(E[2]-b[2],2));N<p&&(p=N,y=A)}return y},_.keyword.rgb=function(g){return f[g]},_.rgb.xyz=function(g){var d=g[0]/255,y=g[1]/255,E=g[2]/255;return[100*(.4124*(d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92)+.3576*(y=y>.04045?Math.pow((y+.055)/1.055,2.4):y/12.92)+.1805*(E=E>.04045?Math.pow((E+.055)/1.055,2.4):E/12.92)),100*(.2126*d+.7152*y+.0722*E),100*(.0193*d+.1192*y+.9505*E)]},_.rgb.lab=function(g){var d=_.rgb.xyz(g),y=d[0],E=d[1],b=d[2];return E/=100,b/=108.883,y=(y/=95.047)>.008856?Math.pow(y,1/3):7.787*y+16/116,[116*(E=E>.008856?Math.pow(E,1/3):7.787*E+16/116)-16,500*(y-E),200*(E-(b=b>.008856?Math.pow(b,1/3):7.787*b+16/116))]},_.hsl.rgb=function(g){var d,y,E,b,p,A=g[0]/360,C=g[1]/100,N=g[2]/100;if(C===0)return[p=255*N,p,p];d=2*N-(y=N<.5?N*(1+C):N+C-N*C),b=[0,0,0];for(var P=0;P<3;P++)(E=A+1/3*-(P-1))<0&&E++,E>1&&E--,p=6*E<1?d+6*(y-d)*E:2*E<1?y:3*E<2?d+(y-d)*(2/3-E)*6:d,b[P]=255*p;return b},_.hsl.hsv=function(g){var d=g[0],y=g[1]/100,E=g[2]/100,b=y,p=Math.max(E,.01);return y*=(E*=2)<=1?E:2-E,b*=p<=1?p:2-p,[d,100*(E===0?2*b/(p+b):2*y/(E+y)),100*((E+y)/2)]},_.hsv.rgb=function(g){var d=g[0]/60,y=g[1]/100,E=g[2]/100,b=Math.floor(d)%6,p=d-Math.floor(d),A=255*E*(1-y),C=255*E*(1-y*p),N=255*E*(1-y*(1-p));switch(E*=255,b){case 0:return[E,N,A];case 1:return[C,E,A];case 2:return[A,E,N];case 3:return[A,C,E];case 4:return[N,A,E];case 5:return[E,A,C]}},_.hsv.hsl=function(g){var d,y,E,b=g[0],p=g[1]/100,A=g[2]/100,C=Math.max(A,.01);return E=(2-p)*A,y=p*C,[b,100*(y=(y/=(d=(2-p)*C)<=1?d:2-d)||0),100*(E/=2)]},_.hwb.rgb=function(g){var d,y,E,b,p,A,C,N=g[0]/360,P=g[1]/100,L=g[2]/100,z=P+L;switch(z>1&&(P/=z,L/=z),E=6*N-(d=Math.floor(6*N)),(1&d)!=0&&(E=1-E),b=P+E*((y=1-L)-P),d){default:case 6:case 0:p=y,A=b,C=P;break;case 1:p=b,A=y,C=P;break;case 2:p=P,A=y,C=b;break;case 3:p=P,A=b,C=y;break;case 4:p=b,A=P,C=y;break;case 5:p=y,A=P,C=b}return[255*p,255*A,255*C]},_.cmyk.rgb=function(g){var d=g[0]/100,y=g[1]/100,E=g[2]/100,b=g[3]/100;return[255*(1-Math.min(1,d*(1-b)+b)),255*(1-Math.min(1,y*(1-b)+b)),255*(1-Math.min(1,E*(1-b)+b))]},_.xyz.rgb=function(g){var d,y,E,b=g[0]/100,p=g[1]/100,A=g[2]/100;return y=-.9689*b+1.8758*p+.0415*A,E=.0557*b+-.204*p+1.057*A,d=(d=3.2406*b+-1.5372*p+-.4986*A)>.0031308?1.055*Math.pow(d,1/2.4)-.055:12.92*d,y=y>.0031308?1.055*Math.pow(y,1/2.4)-.055:12.92*y,E=E>.0031308?1.055*Math.pow(E,1/2.4)-.055:12.92*E,[255*(d=Math.min(Math.max(0,d),1)),255*(y=Math.min(Math.max(0,y),1)),255*(E=Math.min(Math.max(0,E),1))]},_.xyz.lab=function(g){var d=g[0],y=g[1],E=g[2];return y/=100,E/=108.883,d=(d/=95.047)>.008856?Math.pow(d,1/3):7.787*d+16/116,[116*(y=y>.008856?Math.pow(y,1/3):7.787*y+16/116)-16,500*(d-y),200*(y-(E=E>.008856?Math.pow(E,1/3):7.787*E+16/116))]},_.lab.xyz=function(g){var d,y,E,b=g[0];d=g[1]/500+(y=(b+16)/116),E=y-g[2]/200;var p=Math.pow(y,3),A=Math.pow(d,3),C=Math.pow(E,3);return y=p>.008856?p:(y-16/116)/7.787,d=A>.008856?A:(d-16/116)/7.787,E=C>.008856?C:(E-16/116)/7.787,[d*=95.047,y*=100,E*=108.883]},_.lab.lch=function(g){var d,y=g[0],E=g[1],b=g[2];return(d=360*Math.atan2(b,E)/2/Math.PI)<0&&(d+=360),[y,Math.sqrt(E*E+b*b),d]},_.lch.lab=function(g){var d,y=g[0],E=g[1];return d=g[2]/360*2*Math.PI,[y,E*Math.cos(d),E*Math.sin(d)]},_.rgb.ansi16=function(g){var d=g[0],y=g[1],E=g[2],b=1 in arguments?arguments[1]:_.rgb.hsv(g)[2];if((b=Math.round(b/50))===0)return 30;var p=30+(Math.round(E/255)<<2|Math.round(y/255)<<1|Math.round(d/255));return b===2&&(p+=60),p},_.hsv.ansi16=function(g){return _.rgb.ansi16(_.hsv.rgb(g),g[2])},_.rgb.ansi256=function(g){var d=g[0],y=g[1],E=g[2];return d===y&&y===E?d<8?16:d>248?231:Math.round((d-8)/247*24)+232:16+36*Math.round(d/255*5)+6*Math.round(y/255*5)+Math.round(E/255*5)},_.ansi16.rgb=function(g){var d=g%10;if(d===0||d===7)return g>50&&(d+=3.5),[d=d/10.5*255,d,d];var y=.5*(1+~~(g>50));return[(1&d)*y*255,(d>>1&1)*y*255,(d>>2&1)*y*255]},_.ansi256.rgb=function(g){if(g>=232){var d=10*(g-232)+8;return[d,d,d]}var y;return g-=16,[Math.floor(g/36)/5*255,Math.floor((y=g%36)/6)/5*255,y%6/5*255]},_.rgb.hex=function(g){var d=(((255&Math.round(g[0]))<<16)+((255&Math.round(g[1]))<<8)+(255&Math.round(g[2]))).toString(16).toUpperCase();return"000000".substring(d.length)+d},_.hex.rgb=function(g){var d=g.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!d)return[0,0,0];var y=d[0];d[0].length===3&&(y=y.split("").map(function(b){return b+b}).join(""));var E=parseInt(y,16);return[E>>16&255,E>>8&255,255&E]},_.rgb.hcg=function(g){var d,y=g[0]/255,E=g[1]/255,b=g[2]/255,p=Math.max(Math.max(y,E),b),A=Math.min(Math.min(y,E),b),C=p-A;return d=C<=0?0:p===y?(E-b)/C%6:p===E?2+(b-y)/C:4+(y-E)/C+4,d/=6,[360*(d%=1),100*C,100*(C<1?A/(1-C):0)]},_.hsl.hcg=function(g){var d=g[1]/100,y=g[2]/100,E=1,b=0;return(E=y<.5?2*d*y:2*d*(1-y))<1&&(b=(y-.5*E)/(1-E)),[g[0],100*E,100*b]},_.hsv.hcg=function(g){var d=g[1]/100,y=g[2]/100,E=d*y,b=0;return E<1&&(b=(y-E)/(1-E)),[g[0],100*E,100*b]},_.hcg.rgb=function(g){var d=g[0]/360,y=g[1]/100,E=g[2]/100;if(y===0)return[255*E,255*E,255*E];var b,p=[0,0,0],A=d%1*6,C=A%1,N=1-C;switch(Math.floor(A)){case 0:p[0]=1,p[1]=C,p[2]=0;break;case 1:p[0]=N,p[1]=1,p[2]=0;break;case 2:p[0]=0,p[1]=1,p[2]=C;break;case 3:p[0]=0,p[1]=N,p[2]=1;break;case 4:p[0]=C,p[1]=0,p[2]=1;break;default:p[0]=1,p[1]=0,p[2]=N}return b=(1-y)*E,[255*(y*p[0]+b),255*(y*p[1]+b),255*(y*p[2]+b)]},_.hcg.hsv=function(g){var d=g[1]/100,y=d+g[2]/100*(1-d),E=0;return y>0&&(E=d/y),[g[0],100*E,100*y]},_.hcg.hsl=function(g){var d=g[1]/100,y=g[2]/100*(1-d)+.5*d,E=0;return y>0&&y<.5?E=d/(2*y):y>=.5&&y<1&&(E=d/(2*(1-y))),[g[0],100*E,100*y]},_.hcg.hwb=function(g){var d=g[1]/100,y=d+g[2]/100*(1-d);return[g[0],100*(y-d),100*(1-y)]},_.hwb.hcg=function(g){var d=g[1]/100,y=1-g[2]/100,E=y-d,b=0;return E<1&&(b=(y-E)/(1-E)),[g[0],100*E,100*b]},_.apple.rgb=function(g){return[g[0]/65535*255,g[1]/65535*255,g[2]/65535*255]},_.rgb.apple=function(g){return[g[0]/255*65535,g[1]/255*65535,g[2]/255*65535]},_.gray.rgb=function(g){return[g[0]/100*255,g[0]/100*255,g[0]/100*255]},_.gray.hsl=_.gray.hsv=function(g){return[0,0,g[0]]},_.gray.hwb=function(g){return[0,100,g[0]]},_.gray.cmyk=function(g){return[0,0,0,g[0]]},_.gray.lab=function(g){return[g[0],0,0]},_.gray.hex=function(g){var d=255&Math.round(g[0]/100*255),y=((d<<16)+(d<<8)+d).toString(16).toUpperCase();return"000000".substring(y.length)+y},_.rgb.gray=function(g){return[(g[0]+g[1]+g[2])/3/255*100]}},function(D,m,o){var f=o(96),c=o(146),M=o(101),_=o(336),x=o(342),O=o(181),S=o(182),g=o(345),d=o(346),y=o(186),E=o(347),b=o(73),p=o(351),A=o(352),C=o(191),N=o(31),P=o(72),L=o(356),z=o(43),X=o(358),re=o(57),se=o(64),ce={};ce["[object Arguments]"]=ce["[object Array]"]=ce["[object ArrayBuffer]"]=ce["[object DataView]"]=ce["[object Boolean]"]=ce["[object Date]"]=ce["[object Float32Array]"]=ce["[object Float64Array]"]=ce["[object Int8Array]"]=ce["[object Int16Array]"]=ce["[object Int32Array]"]=ce["[object Map]"]=ce["[object Number]"]=ce["[object Object]"]=ce["[object RegExp]"]=ce["[object Set]"]=ce["[object String]"]=ce["[object Symbol]"]=ce["[object Uint8Array]"]=ce["[object Uint8ClampedArray]"]=ce["[object Uint16Array]"]=ce["[object Uint32Array]"]=!0,ce["[object Error]"]=ce["[object Function]"]=ce["[object WeakMap]"]=!1,D.exports=function xe(ye,W,Ie,ge,te,H){var V,ie=1&W,we=2&W,ke=4&W;if(Ie&&(V=te?Ie(ye,ge,te,H):Ie(ye)),V!==void 0)return V;if(!z(ye))return ye;var oe=N(ye);if(oe){if(V=p(ye),!ie)return S(ye,V)}else{var J=b(ye),ee=J=="[object Function]"||J=="[object GeneratorFunction]";if(P(ye))return O(ye,ie);if(J=="[object Object]"||J=="[object Arguments]"||ee&&!te){if(V=we||ee?{}:C(ye),!ie)return we?d(ye,x(V,ye)):g(ye,_(V,ye))}else{if(!ce[J])return te?ye:{};V=A(ye,J,ie)}}H||(H=new f);var Y=H.get(ye);if(Y)return Y;H.set(ye,V),X(ye)?ye.forEach(function(G){V.add(xe(G,W,Ie,G,ye,H))}):L(ye)&&ye.forEach(function(G,ne){V.set(ne,xe(G,W,Ie,ne,ye,H))});var K=oe?void 0:(ke?we?E:y:we?se:re)(ye);return c(K||ye,function(G,ne){K&&(G=ye[ne=G]),M(V,ne,xe(G,W,Ie,ne,ye,H))}),V}},function(D,m,o){(function(f){function c(_){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}var M=(f===void 0?"undefined":c(f))=="object"&&f&&f.Object===Object&&f;D.exports=M}).call(this,o(176))},function(D,m){function o(c){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(c)}var f;f=function(){return this}();try{f=f||new Function("return this")()}catch(c){(typeof window=="undefined"?"undefined":o(window))==="object"&&(f=window)}D.exports=f},function(D,m){var o=Function.prototype.toString;D.exports=function(f){if(f!=null){try{return o.call(f)}catch(c){}try{return f+""}catch(c){}}return""}},function(D,m,o){var f=o(62),c=function(){try{var M=f(Object,"defineProperty");return M({},"",{}),M}catch(_){}}();D.exports=c},function(D,m,o){var f=o(337),c=o(86),M=o(31),_=o(72),x=o(103),O=o(88),S=Object.prototype.hasOwnProperty;D.exports=function(g,d){var y=M(g),E=!y&&c(g),b=!y&&!E&&_(g),p=!y&&!E&&!b&&O(g),A=y||E||b||p,C=A?f(g.length,String):[],N=C.length;for(var P in g)!d&&!S.call(g,P)||A&&(P=="length"||b&&(P=="offset"||P=="parent")||p&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||x(P,N))||C.push(P);return C}},function(D,m){D.exports=function(o,f){return function(c){return o(f(c))}}},function(D,m,o){(function(f){function c(g){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(g)}var M=o(47),_=c(m)=="object"&&m&&!m.nodeType&&m,x=_&&c(f)=="object"&&f&&!f.nodeType&&f,O=x&&x.exports===_?M.Buffer:void 0,S=O?O.allocUnsafe:void 0;f.exports=function(g,d){if(d)return g.slice();var y=g.length,E=S?S(y):new g.constructor(y);return g.copy(E),E}}).call(this,o(87)(D))},function(D,m){D.exports=function(o,f){var c=-1,M=o.length;for(f||(f=Array(M));++c<M;)f[c]=o[c];return f}},function(D,m){D.exports=function(o,f){for(var c=-1,M=o==null?0:o.length,_=0,x=[];++c<M;){var O=o[c];f(O,c,o)&&(x[_++]=O)}return x}},function(D,m){D.exports=function(){return[]}},function(D,m,o){var f=o(151),c=o(106),M=o(150),_=o(184),x=Object.getOwnPropertySymbols?function(O){for(var S=[];O;)f(S,M(O)),O=c(O);return S}:_;D.exports=x},function(D,m,o){var f=o(187),c=o(150),M=o(57);D.exports=function(_){return f(_,M,c)}},function(D,m,o){var f=o(151),c=o(31);D.exports=function(M,_,x){var O=_(M);return c(M)?O:f(O,x(M))}},function(D,m,o){var f=o(62)(o(47),"Set");D.exports=f},function(D,m,o){var f=o(47).Uint8Array;D.exports=f},function(D,m,o){var f=o(152);D.exports=function(c,M){var _=M?f(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.length)}},function(D,m,o){var f=o(192),c=o(106),M=o(105);D.exports=function(_){return typeof _.constructor!="function"||M(_)?{}:f(c(_))}},function(D,m,o){var f=o(43),c=Object.create,M=function(){function _(){}return function(x){if(!f(x))return{};if(c)return c(x);_.prototype=x;var O=new _;return _.prototype=void 0,O}}();D.exports=M},function(D,m,o){D.exports=o(194)},function(D,m,o){var f=o(146),c=o(107),M=o(195),_=o(31);D.exports=function(x,O){return(_(x)?f:c)(x,M(O))}},function(D,m,o){var f=o(65);D.exports=function(c){return typeof c=="function"?c:f}},function(D,m,o){var f=o(183),c=o(362),M=o(53),_=o(31);D.exports=function(x,O){return(_(x)?f:c)(x,M(O,3))}},function(D,m,o){var f=o(365),c=o(49);D.exports=function M(_,x,O,S,g){return _===x||(_==null||x==null||!c(_)&&!c(x)?_!=_&&x!=x:f(_,x,O,S,M,g))}},function(D,m,o){var f=o(199),c=o(368),M=o(200);D.exports=function(_,x,O,S,g,d){var y=1&O,E=_.length,b=x.length;if(E!=b&&!(y&&b>E))return!1;var p=d.get(_),A=d.get(x);if(p&&A)return p==x&&A==_;var C=-1,N=!0,P=2&O?new f:void 0;for(d.set(_,x),d.set(x,_);++C<E;){var L=_[C],z=x[C];if(S)var X=y?S(z,L,C,x,_,d):S(L,z,C,_,x,d);if(X!==void 0){if(X)continue;N=!1;break}if(P){if(!c(x,function(re,se){if(!M(P,se)&&(L===re||g(L,re,O,S,d)))return P.push(se)})){N=!1;break}}else if(L!==z&&!g(L,z,O,S,d)){N=!1;break}}return d.delete(_),d.delete(x),N}},function(D,m,o){var f=o(145),c=o(366),M=o(367);function _(x){var O=-1,S=x==null?0:x.length;for(this.__data__=new f;++O<S;)this.add(x[O])}_.prototype.add=_.prototype.push=c,_.prototype.has=M,D.exports=_},function(D,m){D.exports=function(o,f){return o.has(f)}},function(D,m,o){var f=o(43);D.exports=function(c){return c==c&&!f(c)}},function(D,m){D.exports=function(o,f){return function(c){return c!=null&&c[o]===f&&(f!==void 0||o in Object(c))}}},function(D,m,o){var f=o(378);D.exports=function(c){return c==null?"":f(c)}},function(D,m,o){var f=o(379),c=o(205);D.exports=function(M,_){return M!=null&&c(M,_,f)}},function(D,m,o){var f=o(109),c=o(86),M=o(31),_=o(103),x=o(147),O=o(89);D.exports=function(S,g,d){for(var y=-1,E=(g=f(g,S)).length,b=!1;++y<E;){var p=O(g[y]);if(!(b=S!=null&&d(S,p)))break;S=S[p]}return b||++y!=E?b:!!(E=S==null?0:S.length)&&x(E)&&_(p,E)&&(M(S)||c(S))}},function(D,m){D.exports=function(o){return function(f){return f==null?void 0:f[o]}}},function(D,m,o){var f=o(382),c=o(205);D.exports=function(M,_){return M!=null&&c(M,_,f)}},function(D,m){D.exports=function(o){return o===void 0}},function(D,m,o){var f=o(110),c=o(53),M=o(210),_=o(31);D.exports=function(x,O){return(_(x)?f:M)(x,c(O,3))}},function(D,m,o){var f=o(107),c=o(52);D.exports=function(M,_){var x=-1,O=c(M)?Array(M.length):[];return f(M,function(S,g,d){O[++x]=_(S,g,d)}),O}},function(D,m,o){var f=o(384),c=o(107),M=o(53),_=o(385),x=o(31);D.exports=function(O,S,g){var d=x(O)?f:_,y=arguments.length<3;return d(O,M(S,4),g,y,c)}},function(D,m,o){var f=o(395),c=Math.max;D.exports=function(M,_,x){return _=c(_===void 0?M.length-1:_,0),function(){for(var O=arguments,S=-1,g=c(O.length-_,0),d=Array(g);++S<g;)d[S]=O[_+S];S=-1;for(var y=Array(_+1);++S<_;)y[S]=O[S];return y[_]=x(d),f(M,this,y)}}},function(D,m,o){var f=o(396),c=o(397)(f);D.exports=c},function(D,m){D.exports=function(o,f,c,M){for(var _=o.length,x=c+(M?1:-1);M?x--:++x<_;)if(f(o[x],x,o))return x;return-1}},function(D,m,o){var f=o(52),c=o(49);D.exports=function(M){return c(M)&&f(M)}},function(D,m,o){var f=o(406),c=o(57);D.exports=function(M){return M==null?[]:f(M,c(M))}},function(D,m,o){var f=o(42),c=o(218);D.exports=function(_,x,O,S){return function(g,d,y,E){var b,p,A={},C=new c,N=function(P){var L=P.v!==b?P.v:P.w,z=A[L],X=y(P),re=p.distance+X;if(X<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+P+" Weight: "+X);re<z.distance&&(z.distance=re,z.predecessor=b,C.decrease(L,re))};for(g.nodes().forEach(function(P){var L=P===d?0:Number.POSITIVE_INFINITY;A[P]={distance:L},C.add(P,L)});C.size()>0&&(b=C.removeMin(),(p=A[b]).distance!==Number.POSITIVE_INFINITY);)E(b).forEach(N);return A}(_,String(x),O||M,S||function(g){return _.outEdges(g)})};var M=f.constant(1)},function(D,m,o){var f=o(42);function c(){this._arr=[],this._keyIndices={}}D.exports=c,c.prototype.size=function(){return this._arr.length},c.prototype.keys=function(){return this._arr.map(function(M){return M.key})},c.prototype.has=function(M){return f.has(this._keyIndices,M)},c.prototype.priority=function(M){var _=this._keyIndices[M];if(_!==void 0)return this._arr[_].priority},c.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},c.prototype.add=function(M,_){var x=this._keyIndices;if(M=String(M),!f.has(x,M)){var O=this._arr,S=O.length;return x[M]=S,O.push({key:M,priority:_}),this._decrease(S),!0}return!1},c.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var M=this._arr.pop();return delete this._keyIndices[M.key],this._heapify(0),M.key},c.prototype.decrease=function(M,_){var x=this._keyIndices[M];if(_>this._arr[x].priority)throw new Error("New priority is greater than current priority. Key: "+M+" Old: "+this._arr[x].priority+" New: "+_);this._arr[x].priority=_,this._decrease(x)},c.prototype._heapify=function(M){var _=this._arr,x=2*M,O=x+1,S=M;x<_.length&&(S=_[x].priority<_[S].priority?x:S,O<_.length&&(S=_[O].priority<_[S].priority?O:S),S!==M&&(this._swap(M,S),this._heapify(S)))},c.prototype._decrease=function(M){for(var _,x=this._arr,O=x[M].priority;M!==0&&!(x[_=M>>1].priority<O);)this._swap(M,_),M=_},c.prototype._swap=function(M,_){var x=this._arr,O=this._keyIndices,S=x[M],g=x[_];x[M]=g,x[_]=S,O[g.key]=M,O[S.key]=_}},function(D,m,o){var f=o(42);D.exports=function(c){var M=0,_=[],x={},O=[];return c.nodes().forEach(function(S){f.has(x,S)||function g(d){var y=x[d]={onStack:!0,lowlink:M,index:M++};if(_.push(d),c.successors(d).forEach(function(p){f.has(x,p)?x[p].onStack&&(y.lowlink=Math.min(y.lowlink,x[p].index)):(g(p),y.lowlink=Math.min(y.lowlink,x[p].lowlink))}),y.lowlink===y.index){var E,b=[];do E=_.pop(),x[E].onStack=!1,b.push(E);while(d!==E);O.push(b)}}(S)}),O}},function(D,m,o){var f=o(42);function c(_){var x={},O={},S=[];if(f.each(_.sinks(),function g(d){if(f.has(O,d))throw new M;f.has(x,d)||(O[d]=!0,x[d]=!0,f.each(_.predecessors(d),g),delete O[d],S.push(d))}),f.size(x)!==_.nodeCount())throw new M;return S}function M(){}D.exports=c,c.CycleException=M,M.prototype=new Error},function(D,m,o){var f=o(42);D.exports=function(c,M,_){f.isArray(M)||(M=[M]);var x=(c.isDirected()?c.successors:c.neighbors).bind(c),O=[],S={};return f.each(M,function(g){if(!c.hasNode(g))throw new Error("Graph does not have node: "+g);(function d(y,E,b,p,A,C){f.has(p,E)||(p[E]=!0,b||C.push(E),f.each(A(E),function(N){d(y,N,b,p,A,C)}),b&&C.push(E))})(c,g,_==="post",S,x,O)}),O}},function(D,m,o){var f=o(425);D.exports=function(c){return c?(c=f(c))===1/0||c===-1/0?17976931348623157e292*(c<0?-1:1):c==c?c:0:c===0?c:0}},function(D,m,o){var f=o(158);D.exports=function(c){return c!=null&&c.length?f(c,1):[]}},function(D,m,o){var f=o(102),c=o(70);D.exports=function(M,_,x){(x!==void 0&&!c(M[_],x)||x===void 0&&!(_ in M))&&f(M,_,x)}},function(D,m){D.exports=function(o,f){if((f!=="constructor"||typeof o[f]!="function")&&f!="__proto__")return o[f]}},function(D,m){D.exports=function(o,f){return o<f}},function(D,m,o){"use strict";var f=o(28),c=o(46).Graph,M=o(113).slack;function _(S,g){return f.forEach(S.nodes(),function d(y){f.forEach(g.nodeEdges(y),function(E){var b=E.v,p=y===b?E.w:b;S.hasNode(p)||M(g,E)||(S.setNode(p,{}),S.setEdge(y,p,{}),d(p))})}),S.nodeCount()}function x(S,g){return f.minBy(g.edges(),function(d){if(S.hasNode(d.v)!==S.hasNode(d.w))return M(g,d)})}function O(S,g,d){f.forEach(S.nodes(),function(y){g.node(y).rank+=d})}D.exports=function(S){var g,d,y=new c({directed:!1}),E=S.nodes()[0],b=S.nodeCount();for(y.setNode(E,{});_(y,S)<b;)g=x(y,S),d=y.hasNode(g.v)?M(S,g):-M(S,g),O(y,S,d);return y}},function(D,m,o){(function(f,c){function M(x){return(M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}var _;(function(x){(function(O){var S=(c===void 0?"undefined":M(c))==="object"?c:(typeof self=="undefined"?"undefined":M(self))==="object"?self:M(this)==="object"?this:Function("return this;")(),g=d(x);function d(y,E){return function(b,p){typeof y[b]!="function"&&Object.defineProperty(y,b,{configurable:!0,writable:!0,value:p}),E&&E(b,p)}}S.Reflect===void 0?S.Reflect=x:g=d(S.Reflect,g),function(y){var E=Object.prototype.hasOwnProperty,b=typeof Symbol=="function",p=b&&Symbol.toPrimitive!==void 0?Symbol.toPrimitive:"@@toPrimitive",A=b&&Symbol.iterator!==void 0?Symbol.iterator:"@@iterator",C=typeof Object.create=="function",N={__proto__:[]}instanceof Array,P=!C&&!N,L={create:C?function(){return le(Object.create(null))}:N?function(){return le({__proto__:null})}:function(){return le({})},has:P?function(ue,Q){return E.call(ue,Q)}:function(ue,Q){return Q in ue},get:P?function(ue,Q){return E.call(ue,Q)?ue[Q]:void 0}:function(ue,Q){return ue[Q]}},z=Object.getPrototypeOf(Function),X=(f===void 0?"undefined":M(f))==="object"&&f.env&&f.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",re=X||typeof Map!="function"||typeof Map.prototype.entries!="function"?function(){var ue={},Q=[],he=function(){function Ce(Re,Ee,Le){this._index=0,this._keys=Re,this._values=Ee,this._selector=Le}return Ce.prototype["@@iterator"]=function(){return this},Ce.prototype[A]=function(){return this},Ce.prototype.next=function(){var Re=this._index;if(Re>=0&&Re<this._keys.length){var Ee=this._selector(this._keys[Re],this._values[Re]);return Re+1>=this._keys.length?(this._index=-1,this._keys=Q,this._values=Q):this._index++,{value:Ee,done:!1}}return{value:void 0,done:!0}},Ce.prototype.throw=function(Re){throw this._index>=0&&(this._index=-1,this._keys=Q,this._values=Q),Re},Ce.prototype.return=function(Re){return this._index>=0&&(this._index=-1,this._keys=Q,this._values=Q),{value:Re,done:!0}},Ce}();return function(){function Ce(){this._keys=[],this._values=[],this._cacheKey=ue,this._cacheIndex=-2}return Object.defineProperty(Ce.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Ce.prototype.has=function(Re){return this._find(Re,!1)>=0},Ce.prototype.get=function(Re){var Ee=this._find(Re,!1);return Ee>=0?this._values[Ee]:void 0},Ce.prototype.set=function(Re,Ee){var Le=this._find(Re,!0);return this._values[Le]=Ee,this},Ce.prototype.delete=function(Re){var Ee=this._find(Re,!1);if(Ee>=0){for(var Le=this._keys.length,Ke=Ee+1;Ke<Le;Ke++)this._keys[Ke-1]=this._keys[Ke],this._values[Ke-1]=this._values[Ke];return this._keys.length--,this._values.length--,Re===this._cacheKey&&(this._cacheKey=ue,this._cacheIndex=-2),!0}return!1},Ce.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ue,this._cacheIndex=-2},Ce.prototype.keys=function(){return new he(this._keys,this._values,Se)},Ce.prototype.values=function(){return new he(this._keys,this._values,je)},Ce.prototype.entries=function(){return new he(this._keys,this._values,Ae)},Ce.prototype["@@iterator"]=function(){return this.entries()},Ce.prototype[A]=function(){return this.entries()},Ce.prototype._find=function(Re,Ee){return this._cacheKey!==Re&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Re)),this._cacheIndex<0&&Ee&&(this._cacheIndex=this._keys.length,this._keys.push(Re),this._values.push(void 0)),this._cacheIndex},Ce}();function Se(Ce,Re){return Ce}function je(Ce,Re){return Re}function Ae(Ce,Re){return[Ce,Re]}}():Map,se=X||typeof Set!="function"||typeof Set.prototype.entries!="function"?function(){function ue(){this._map=new re}return Object.defineProperty(ue.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ue.prototype.has=function(Q){return this._map.has(Q)},ue.prototype.add=function(Q){return this._map.set(Q,Q),this},ue.prototype.delete=function(Q){return this._map.delete(Q)},ue.prototype.clear=function(){this._map.clear()},ue.prototype.keys=function(){return this._map.keys()},ue.prototype.values=function(){return this._map.values()},ue.prototype.entries=function(){return this._map.entries()},ue.prototype["@@iterator"]=function(){return this.keys()},ue.prototype[A]=function(){return this.keys()},ue}():Set,ce=new(X||typeof WeakMap!="function"?function(){var ue=L.create(),Q=he();return function(){function Ce(){this._key=he()}return Ce.prototype.has=function(Re){var Ee=Se(Re,!1);return Ee!==void 0&&L.has(Ee,this._key)},Ce.prototype.get=function(Re){var Ee=Se(Re,!1);return Ee!==void 0?L.get(Ee,this._key):void 0},Ce.prototype.set=function(Re,Ee){return Se(Re,!0)[this._key]=Ee,this},Ce.prototype.delete=function(Re){var Ee=Se(Re,!1);return Ee!==void 0&&delete Ee[this._key]},Ce.prototype.clear=function(){this._key=he()},Ce}();function he(){var Ce;do Ce="@@WeakMap@@"+Ae();while(L.has(ue,Ce));return ue[Ce]=!0,Ce}function Se(Ce,Re){if(!E.call(Ce,Q)){if(!Re)return;Object.defineProperty(Ce,Q,{value:L.create()})}return Ce[Q]}function je(Ce,Re){for(var Ee=0;Ee<Re;++Ee)Ce[Ee]=255*Math.random()|0;return Ce}function Ae(){var Ce,Re=(Ce=16,typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ce)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ce)):je(new Uint8Array(Ce),Ce):je(new Array(Ce),Ce));Re[6]=79&Re[6]|64,Re[8]=191&Re[8]|128;for(var Ee="",Le=0;Le<16;++Le){var Ke=Re[Le];Le!==4&&Le!==6&&Le!==8||(Ee+="-"),Ke<16&&(Ee+="0"),Ee+=Ke.toString(16).toLowerCase()}return Ee}}():WeakMap);function xe(ue,Q,he){var Se=ce.get(ue);if(H(Se)){if(!he)return;Se=new re,ce.set(ue,Se)}var je=Se.get(Q);if(H(je)){if(!he)return;je=new re,Se.set(Q,je)}return je}function ye(ue,Q,he){var Se=xe(Q,he,!1);return!H(Se)&&!!Se.has(ue)}function W(ue,Q,he){var Se=xe(Q,he,!1);if(!H(Se))return Se.get(ue)}function Ie(ue,Q,he,Se){xe(he,Se,!0).set(ue,Q)}function ge(ue,Q){var he=[],Se=xe(ue,Q,!1);if(H(Se))return he;for(var je=function(Ee){var Le=Y(Ee,A);if(!J(Le))throw new TypeError;var Ke=Le.call(Ee);if(!ie(Ke))throw new TypeError;return Ke}(Se.keys()),Ae=0;;){var Ce=K(je);if(!Ce)return he.length=Ae,he;var Re=Ce.value;try{he[Ae]=Re}catch(Ee){try{G(je)}finally{throw Ee}}Ae++}}function te(ue){if(ue===null)return 1;switch(M(ue)){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ue===null?1:6;default:return 6}}function H(ue){return ue===void 0}function V(ue){return ue===null}function ie(ue){return M(ue)==="object"?ue!==null:typeof ue=="function"}function we(ue,Q){switch(te(ue)){case 0:case 1:case 2:case 3:case 4:case 5:return ue}var he=Q===3?"string":Q===5?"number":"default",Se=Y(ue,p);if(Se!==void 0){var je=Se.call(ue,he);if(ie(je))throw new TypeError;return je}return function(Ae,Ce){if(Ce==="string"){var Re=Ae.toString;if(J(Re)&&!ie(Le=Re.call(Ae))||J(Ee=Ae.valueOf)&&!ie(Le=Ee.call(Ae)))return Le}else{var Ee;if(J(Ee=Ae.valueOf)&&!ie(Le=Ee.call(Ae)))return Le;var Le,Ke=Ae.toString;if(J(Ke)&&!ie(Le=Ke.call(Ae)))return Le}throw new TypeError}(ue,he==="default"?"number":he)}function ke(ue){var Q=we(ue,3);return M(Q)==="symbol"?Q:function(he){return""+he}(Q)}function oe(ue){return Array.isArray?Array.isArray(ue):ue instanceof Object?ue instanceof Array:Object.prototype.toString.call(ue)==="[object Array]"}function J(ue){return typeof ue=="function"}function ee(ue){return typeof ue=="function"}function Y(ue,Q){var he=ue[Q];if(he!=null){if(!J(he))throw new TypeError;return he}}function K(ue){var Q=ue.next();return!Q.done&&Q}function G(ue){var Q=ue.return;Q&&Q.call(ue)}function ne(ue){var Q=Object.getPrototypeOf(ue);if(typeof ue!="function"||ue===z||Q!==z)return Q;var he=ue.prototype,Se=he&&Object.getPrototypeOf(he);if(Se==null||Se===Object.prototype)return Q;var je=Se.constructor;return typeof je!="function"||je===ue?Q:je}function le(ue){return ue.__=void 0,delete ue.__,ue}y("decorate",function(ue,Q,he,Se){if(H(he)){if(!oe(ue))throw new TypeError;if(!ee(Q))throw new TypeError;return function(je,Ae){for(var Ce=je.length-1;Ce>=0;--Ce){var Re=(0,je[Ce])(Ae);if(!H(Re)&&!V(Re)){if(!ee(Re))throw new TypeError;Ae=Re}}return Ae}(ue,Q)}if(!oe(ue))throw new TypeError;if(!ie(Q))throw new TypeError;if(!ie(Se)&&!H(Se)&&!V(Se))throw new TypeError;return V(Se)&&(Se=void 0),function(je,Ae,Ce,Re){for(var Ee=je.length-1;Ee>=0;--Ee){var Le=(0,je[Ee])(Ae,Ce,Re);if(!H(Le)&&!V(Le)){if(!ie(Le))throw new TypeError;Re=Le}}return Re}(ue,Q,he=ke(he),Se)}),y("metadata",function(ue,Q){return function(he,Se){if(!ie(he))throw new TypeError;if(!H(Se)&&!function(je){switch(te(je)){case 3:case 4:return!0;default:return!1}}(Se))throw new TypeError;Ie(ue,Q,he,Se)}}),y("defineMetadata",function(ue,Q,he,Se){if(!ie(he))throw new TypeError;return H(Se)||(Se=ke(Se)),Ie(ue,Q,he,Se)}),y("hasMetadata",function(ue,Q,he){if(!ie(Q))throw new TypeError;return H(he)||(he=ke(he)),function Se(je,Ae,Ce){if(ye(je,Ae,Ce))return!0;var Re=ne(Ae);return!V(Re)&&Se(je,Re,Ce)}(ue,Q,he)}),y("hasOwnMetadata",function(ue,Q,he){if(!ie(Q))throw new TypeError;return H(he)||(he=ke(he)),ye(ue,Q,he)}),y("getMetadata",function(ue,Q,he){if(!ie(Q))throw new TypeError;return H(he)||(he=ke(he)),function Se(je,Ae,Ce){if(ye(je,Ae,Ce))return W(je,Ae,Ce);var Re=ne(Ae);return V(Re)?void 0:Se(je,Re,Ce)}(ue,Q,he)}),y("getOwnMetadata",function(ue,Q,he){if(!ie(Q))throw new TypeError;return H(he)||(he=ke(he)),W(ue,Q,he)}),y("getMetadataKeys",function(ue,Q){if(!ie(ue))throw new TypeError;return H(Q)||(Q=ke(Q)),function he(Se,je){var Ae=ge(Se,je),Ce=ne(Se);if(Ce===null)return Ae;var Re=he(Ce,je);if(Re.length<=0)return Ae;if(Ae.length<=0)return Re;for(var Ee=new se,Le=[],Ke=0,et=Ae;Ke<et.length;Ke++){var ot=et[Ke];Ee.has(ot)||(Ee.add(ot),Le.push(ot))}for(var dt=0,At=Re;dt<At.length;dt++)ot=At[dt],Ee.has(ot)||(Ee.add(ot),Le.push(ot));return Le}(ue,Q)}),y("getOwnMetadataKeys",function(ue,Q){if(!ie(ue))throw new TypeError;return H(Q)||(Q=ke(Q)),ge(ue,Q)}),y("deleteMetadata",function(ue,Q,he){if(!ie(Q))throw new TypeError;H(he)||(he=ke(he));var Se=xe(Q,he,!1);if(H(Se)||!Se.delete(ue))return!1;if(Se.size>0)return!0;var je=ce.get(Q);return je.delete(he),je.size>0||ce.delete(Q),!0})}(g)})()})(_||(_={}))}).call(this,o(166),o(176))},function(D,m,o){var f=o(230);D.exports=function(c,M){if(c){if(typeof c=="string")return f(c,M);var _=Object.prototype.toString.call(c).slice(8,-1);return _==="Object"&&c.constructor&&(_=c.constructor.name),_==="Map"||_==="Set"?Array.from(c):_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?f(c,M):void 0}},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){D.exports=function(o,f){(f==null||f>o.length)&&(f=o.length);for(var c=0,M=new Array(f);c<f;c++)M[c]=o[c];return M},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.MetadataReader=void 0;var f=o(32),c=function(){function M(){}return M.prototype.getConstructorMetadata=function(_){return{compilerGeneratedMetadata:Reflect.getMetadata(f.PARAM_TYPES,_),userGeneratedMetadata:Reflect.getMetadata(f.TAGGED,_)||{}}},M.prototype.getPropertiesMetadata=function(_){return Reflect.getMetadata(f.TAGGED_PROP,_)||[]},M}();m.MetadataReader=c},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.isStackOverflowExeption=void 0;var f=o(40);m.isStackOverflowExeption=function(c){return c instanceof RangeError||c.message===f.STACK_OVERFLOW}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.inject=m.LazyServiceIdentifer=void 0;var f=o(40),c=o(32),M=o(48),_=o(58),x=function(){function O(S){this._cb=S}return O.prototype.unwrap=function(){return this._cb()},O}();m.LazyServiceIdentifer=x,m.inject=function(O){return function(S,g,d){if(O===void 0)throw new Error(f.UNDEFINED_INJECT_ANNOTATION(S.name));var y=new M.Metadata(c.INJECT_TAG,O);typeof d=="number"?_.tagParameter(S,g,d,y):_.tagProperty(S,g,y)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Target=void 0;var f=o(32),c=o(66),M=o(48),_=o(492),x=function(){function O(S,g,d,y){this.id=c.id(),this.type=S,this.serviceIdentifier=d,this.name=new _.QueryableString(g||""),this.metadata=new Array;var E=null;typeof y=="string"?E=new M.Metadata(f.NAMED_TAG,y):y instanceof M.Metadata&&(E=y),E!==null&&this.metadata.push(E)}return O.prototype.hasTag=function(S){for(var g=0,d=this.metadata;g<d.length;g++)if(d[g].key===S)return!0;return!1},O.prototype.isArray=function(){return this.hasTag(f.MULTI_INJECT_TAG)},O.prototype.matchesArray=function(S){return this.matchesTag(f.MULTI_INJECT_TAG)(S)},O.prototype.isNamed=function(){return this.hasTag(f.NAMED_TAG)},O.prototype.isTagged=function(){return this.metadata.some(function(S){return f.NON_CUSTOM_TAG_KEYS.every(function(g){return S.key!==g})})},O.prototype.isOptional=function(){return this.matchesTag(f.OPTIONAL_TAG)(!0)},O.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(S){return S.key===f.NAMED_TAG})[0]:null},O.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(S){return f.NON_CUSTOM_TAG_KEYS.every(function(g){return S.key!==g})}):null},O.prototype.matchesNamedTag=function(S){return this.matchesTag(f.NAMED_TAG)(S)},O.prototype.matchesTag=function(S){var g=this;return function(d){for(var y=0,E=g.metadata;y<E.length;y++){var b=E[y];if(b.key===S&&b.value===d)return!0}return!1}},O}();m.Target=x},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BindingWhenOnSyntax=void 0;var f=o(160),c=o(161),M=function(){function _(x){this._binding=x,this._bindingWhenSyntax=new c.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new f.BindingOnSyntax(this._binding)}return _.prototype.when=function(x){return this._bindingWhenSyntax.when(x)},_.prototype.whenTargetNamed=function(x){return this._bindingWhenSyntax.whenTargetNamed(x)},_.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},_.prototype.whenTargetTagged=function(x,O){return this._bindingWhenSyntax.whenTargetTagged(x,O)},_.prototype.whenInjectedInto=function(x){return this._bindingWhenSyntax.whenInjectedInto(x)},_.prototype.whenParentNamed=function(x){return this._bindingWhenSyntax.whenParentNamed(x)},_.prototype.whenParentTagged=function(x,O){return this._bindingWhenSyntax.whenParentTagged(x,O)},_.prototype.whenAnyAncestorIs=function(x){return this._bindingWhenSyntax.whenAnyAncestorIs(x)},_.prototype.whenNoAncestorIs=function(x){return this._bindingWhenSyntax.whenNoAncestorIs(x)},_.prototype.whenAnyAncestorNamed=function(x){return this._bindingWhenSyntax.whenAnyAncestorNamed(x)},_.prototype.whenAnyAncestorTagged=function(x,O){return this._bindingWhenSyntax.whenAnyAncestorTagged(x,O)},_.prototype.whenNoAncestorNamed=function(x){return this._bindingWhenSyntax.whenNoAncestorNamed(x)},_.prototype.whenNoAncestorTagged=function(x,O){return this._bindingWhenSyntax.whenNoAncestorTagged(x,O)},_.prototype.whenAnyAncestorMatches=function(x){return this._bindingWhenSyntax.whenAnyAncestorMatches(x)},_.prototype.whenNoAncestorMatches=function(x){return this._bindingWhenSyntax.whenNoAncestorMatches(x)},_.prototype.onActivation=function(x){return this._bindingOnSyntax.onActivation(x)},_}();m.BindingWhenOnSyntax=M},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.typeConstraint=m.namedConstraint=m.taggedConstraint=m.traverseAncerstors=void 0;var f=o(32),c=o(48);m.traverseAncerstors=function x(O,S){var g=O.parentRequest;return g!==null&&(!!S(g)||x(g,S))};var M=function(x){return function(O){var S=function(g){return g!==null&&g.target!==null&&g.target.matchesTag(x)(O)};return S.metaData=new c.Metadata(x,O),S}};m.taggedConstraint=M;var _=M(f.NAMED_TAG);m.namedConstraint=_,m.typeConstraint=function(x){return function(O){var S=null;if(O!==null){if(S=O.bindings[0],typeof x=="string")return S.serviceIdentifier===x;var g=O.bindings[0].implementationType;return x===g}return!1}}},function(D,m,o){"use strict";o.d(m,"a",function(){return M});var f=o(2),c=o(77);function M(_){for(var x=new c.a,O=f.e.fromValues(_[0],_[1],_[2]),S=f.e.fromValues(_[0],_[1],_[2]),g=3;g<_.length;){var d=_[g++],y=_[g++],E=_[g++];d<O[0]&&(O[0]=d),y<O[1]&&(O[1]=y),E<O[2]&&(O[2]=E),d>S[0]&&(S[0]=d),y>S[1]&&(S[1]=y),E>S[2]&&(S[2]=E)}return x.setMinMax(O,S),x}},function(D,m,o){"use strict";o.d(m,"a",function(){return f});var f=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent)},function(D,m){},function(D,m){},function(D,m){},function(D,m){},function(D,m){},function(D,m){},function(D,m,o){"use strict";var f;(function(c){c.Normal="normal",c.PostProcessing="post-processing"})(f||(f={}))},function(D,m){},function(D,m){},function(D,m){},function(D,m){},function(D,m){},function(D,m){},function(D,m){D.exports=1e-6},function(D,m){D.exports=function(){var o=new Float32Array(2);return o[0]=0,o[1]=0,o}},function(D,m){D.exports=function(o,f,c){return o[0]=f,o[1]=c,o}},function(D,m){D.exports=function(o,f,c){return o[0]=f[0]+c[0],o[1]=f[1]+c[1],o}},function(D,m){D.exports=function(o,f,c){return o[0]=f[0]*c[0],o[1]=f[1]*c[1],o}},function(D,m){D.exports=function(o,f,c){return o[0]=f[0]/c[0],o[1]=f[1]/c[1],o}},function(D,m){D.exports=function(o,f){var c=f[0]-o[0],M=f[1]-o[1];return Math.sqrt(c*c+M*M)}},function(D,m){D.exports=function(o,f){var c=f[0]-o[0],M=f[1]-o[1];return c*c+M*M}},function(D,m){D.exports=function(o){var f=o[0],c=o[1];return Math.sqrt(f*f+c*c)}},function(D,m){D.exports=function(o){var f=o[0],c=o[1];return f*f+c*c}},function(D,m){D.exports=function(o,f){var c=f[0],M=f[1],_=c*c+M*M;return _>0&&(_=1/Math.sqrt(_),o[0]=f[0]*_,o[1]=f[1]*_),o}},function(D,m){D.exports=function(o,f){return o[0]*f[0]+o[1]*f[1]}},function(D,m,o){"use strict";var f={};o.r(f),o.d(f,"easeLinear",function(){return ye}),o.d(f,"easeQuad",function(){return ge}),o.d(f,"easeQuadIn",function(){return W}),o.d(f,"easeQuadOut",function(){return Ie}),o.d(f,"easeQuadInOut",function(){return ge}),o.d(f,"easeCubic",function(){return V}),o.d(f,"easeCubicIn",function(){return te}),o.d(f,"easeCubicOut",function(){return H}),o.d(f,"easeCubicInOut",function(){return V}),o.d(f,"easePoly",function(){return ke}),o.d(f,"easePolyIn",function(){return ie}),o.d(f,"easePolyOut",function(){return we}),o.d(f,"easePolyInOut",function(){return ke}),o.d(f,"easeSin",function(){return K}),o.d(f,"easeSinIn",function(){return ee}),o.d(f,"easeSinOut",function(){return Y}),o.d(f,"easeSinInOut",function(){return K}),o.d(f,"easeExp",function(){return ue}),o.d(f,"easeExpIn",function(){return ne}),o.d(f,"easeExpOut",function(){return le}),o.d(f,"easeExpInOut",function(){return ue}),o.d(f,"easeCircle",function(){return Se}),o.d(f,"easeCircleIn",function(){return Q}),o.d(f,"easeCircleOut",function(){return he}),o.d(f,"easeCircleInOut",function(){return Se}),o.d(f,"easeBounce",function(){return Ce}),o.d(f,"easeBounceIn",function(){return Ae}),o.d(f,"easeBounceOut",function(){return Ce}),o.d(f,"easeBounceInOut",function(){return Re}),o.d(f,"easeBack",function(){return Ke}),o.d(f,"easeBackIn",function(){return Ee}),o.d(f,"easeBackOut",function(){return Le}),o.d(f,"easeBackInOut",function(){return Ke}),o.d(f,"easeElastic",function(){return dt}),o.d(f,"easeElasticIn",function(){return ot}),o.d(f,"easeElasticOut",function(){return dt}),o.d(f,"easeElasticInOut",function(){return At});var c=o(1),M=o(138),_=o(136),x=o(19),O=o(0);function S(We){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne})(We)}var g,d,y=0,E=0,b=0,p=0,A=0,C=0,N=(typeof performance=="undefined"?"undefined":S(performance))==="object"&&performance.now?performance:Date,P=(typeof window=="undefined"?"undefined":S(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(We){setTimeout(We,17)};function L(){return A||(P(z),A=N.now()+C)}function z(){A=0}function X(){this._call=this._time=this._next=null}function re(We,Ne,He){var ft=new X;return ft.restart(We,Ne,He),ft}function se(){A=(p=N.now())+C,y=E=0;try{(function(){L(),++y;for(var We,Ne=g;Ne;)(We=A-Ne._time)>=0&&Ne._call.call(null,We),Ne=Ne._next;--y})()}finally{y=0,function(){for(var We,Ne,He=g,ft=1/0;He;)He._call?(ft>He._time&&(ft=He._time),We=He,He=He._next):(Ne=He._next,He._next=null,He=We?We._next=Ne:g=Ne);d=We,xe(ft)}(),A=0}}function ce(){var We=N.now(),Ne=We-p;Ne>1e3&&(C-=Ne,p=We)}function xe(We){y||(E&&(E=clearTimeout(E)),We-A>24?(We<1/0&&(E=setTimeout(se,We-N.now()-C)),b&&(b=clearInterval(b))):(b||(p=N.now(),b=setInterval(ce,1e3)),y=1,P(se)))}function ye(We){return+We}function W(We){return We*We}function Ie(We){return We*(2-We)}function ge(We){return((We*=2)<=1?We*We:--We*(2-We)+1)/2}function te(We){return We*We*We}function H(We){return--We*We*We+1}function V(We){return((We*=2)<=1?We*We*We:(We-=2)*We*We+2)/2}X.prototype=re.prototype={constructor:X,restart:function(We,Ne,He){if(typeof We!="function")throw new TypeError("callback is not a function");He=(He==null?L():+He)+(Ne==null?0:+Ne),this._next||d===this||(d?d._next=this:g=this,d=this),this._call=We,this._time=He,xe()},stop:function(){this._call&&(this._call=null,this._time=1/0,xe())}};var ie=function We(Ne){function He(ft){return Math.pow(ft,Ne)}return Ne=+Ne,He.exponent=We,He}(3),we=function We(Ne){function He(ft){return 1-Math.pow(1-ft,Ne)}return Ne=+Ne,He.exponent=We,He}(3),ke=function We(Ne){function He(ft){return((ft*=2)<=1?Math.pow(ft,Ne):2-Math.pow(2-ft,Ne))/2}return Ne=+Ne,He.exponent=We,He}(3),oe=Math.PI,J=oe/2;function ee(We){return+We==1?1:1-Math.cos(We*J)}function Y(We){return Math.sin(We*J)}function K(We){return(1-Math.cos(oe*We))/2}function G(We){return 1.0009775171065494*(Math.pow(2,-10*We)-.0009765625)}function ne(We){return G(1-+We)}function le(We){return 1-G(We)}function ue(We){return((We*=2)<=1?G(1-We):2-G(We-1))/2}function Q(We){return 1-Math.sqrt(1-We*We)}function he(We){return Math.sqrt(1- --We*We)}function Se(We){return((We*=2)<=1?1-Math.sqrt(1-We*We):Math.sqrt(1-(We-=2)*We)+1)/2}var je=7.5625;function Ae(We){return 1-Ce(1-We)}function Ce(We){return(We=+We)<4/11?je*We*We:We<8/11?je*(We-=6/11)*We+3/4:We<10/11?je*(We-=9/11)*We+15/16:je*(We-=21/22)*We+63/64}function Re(We){return((We*=2)<=1?1-Ce(1-We):Ce(We-1)+1)/2}var Ee=function We(Ne){function He(ft){return(ft=+ft)*ft*(Ne*(ft-1)+ft)}return Ne=+Ne,He.overshoot=We,He}(1.70158),Le=function We(Ne){function He(ft){return--ft*ft*((ft+1)*Ne+ft)+1}return Ne=+Ne,He.overshoot=We,He}(1.70158),Ke=function We(Ne){function He(ft){return((ft*=2)<1?ft*ft*((Ne+1)*ft-Ne):(ft-=2)*ft*((Ne+1)*ft+Ne)+2)/2}return Ne=+Ne,He.overshoot=We,He}(1.70158),et=2*Math.PI,ot=function We(Ne,He){var ft=Math.asin(1/(Ne=Math.max(1,Ne)))*(He/=et);function Ct(Ht){return Ne*G(- --Ht)*Math.sin((ft-Ht)/He)}return Ct.amplitude=function(Ht){return We(Ht,He*et)},Ct.period=function(Ht){return We(Ne,Ht)},Ct}(1,.3),dt=function We(Ne,He){var ft=Math.asin(1/(Ne=Math.max(1,Ne)))*(He/=et);function Ct(Ht){return 1-Ne*G(Ht=+Ht)*Math.sin((Ht+ft)/He)}return Ct.amplitude=function(Ht){return We(Ht,He*et)},Ct.period=function(Ht){return We(Ne,Ht)},Ct}(1,.3),At=function We(Ne,He){var ft=Math.asin(1/(Ne=Math.max(1,Ne)))*(He/=et);function Ct(Ht){return((Ht=2*Ht-1)<0?Ne*G(-Ht)*Math.sin((ft-Ht)/He):2-Ne*G(Ht)*Math.sin((ft+Ht)/He))/2}return Ct.amplitude=function(Ht){return We(Ht,He*et)},Ct.period=function(Ht){return We(Ne,Ht)},Ct}(1,.3),Tt=function(We,Ne,He){We.prototype=Ne.prototype=He,He.constructor=We};function jt(We,Ne){var He=Object.create(We.prototype);for(var ft in Ne)He[ft]=Ne[ft];return He}function Kt(){}var Qt="\\s*([+-]?\\d+)\\s*",rr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mr=/^#([0-9a-f]{3,8})$/,cr=new RegExp("^rgb\\("+[Qt,Qt,Qt]+"\\)$"),yr=new RegExp("^rgb\\("+[or,or,or]+"\\)$"),br=new RegExp("^rgba\\("+[Qt,Qt,Qt,rr]+"\\)$"),Xr=new RegExp("^rgba\\("+[or,or,or,rr]+"\\)$"),gr=new RegExp("^hsl\\("+[rr,or,or]+"\\)$"),xr=new RegExp("^hsla\\("+[rr,or,or,rr]+"\\)$"),dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Br(){return this.rgb().formatHex()}function Rr(){return this.rgb().formatRgb()}function pn(We){var Ne,He;return We=(We+"").trim().toLowerCase(),(Ne=Mr.exec(We))?(He=Ne[1].length,Ne=parseInt(Ne[1],16),He===6?zr(Ne):He===3?new Ir(Ne>>8&15|Ne>>4&240,Ne>>4&15|240&Ne,(15&Ne)<<4|15&Ne,1):He===8?Nr(Ne>>24&255,Ne>>16&255,Ne>>8&255,(255&Ne)/255):He===4?Nr(Ne>>12&15|Ne>>8&240,Ne>>8&15|Ne>>4&240,Ne>>4&15|240&Ne,((15&Ne)<<4|15&Ne)/255):null):(Ne=cr.exec(We))?new Ir(Ne[1],Ne[2],Ne[3],1):(Ne=yr.exec(We))?new Ir(255*Ne[1]/100,255*Ne[2]/100,255*Ne[3]/100,1):(Ne=br.exec(We))?Nr(Ne[1],Ne[2],Ne[3],Ne[4]):(Ne=Xr.exec(We))?Nr(255*Ne[1]/100,255*Ne[2]/100,255*Ne[3]/100,Ne[4]):(Ne=gr.exec(We))?Rn(Ne[1],Ne[2]/100,Ne[3]/100,1):(Ne=xr.exec(We))?Rn(Ne[1],Ne[2]/100,Ne[3]/100,Ne[4]):dr.hasOwnProperty(We)?zr(dr[We]):We==="transparent"?new Ir(NaN,NaN,NaN,0):null}function zr(We){return new Ir(We>>16&255,We>>8&255,255&We,1)}function Nr(We,Ne,He,ft){return ft<=0&&(We=Ne=He=NaN),new Ir(We,Ne,He,ft)}function Dr(We){return We instanceof Kt||(We=pn(We)),We?new Ir((We=We.rgb()).r,We.g,We.b,We.opacity):new Ir}function rn(We,Ne,He,ft){return arguments.length===1?Dr(We):new Ir(We,Ne,He,ft==null?1:ft)}function Ir(We,Ne,He,ft){this.r=+We,this.g=+Ne,this.b=+He,this.opacity=+ft}function On(){return"#"+Dn(this.r)+Dn(this.g)+Dn(this.b)}function In(){var We=this.opacity;return((We=isNaN(We)?1:Math.max(0,Math.min(1,We)))===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(We===1?")":", "+We+")")}function Dn(We){return((We=Math.max(0,Math.min(255,Math.round(We)||0)))<16?"0":"")+We.toString(16)}function Rn(We,Ne,He,ft){return ft<=0?We=Ne=He=NaN:He<=0||He>=1?We=Ne=NaN:Ne<=0&&(We=NaN),new Er(We,Ne,He,ft)}function gn(We){if(We instanceof Er)return new Er(We.h,We.s,We.l,We.opacity);if(We instanceof Kt||(We=pn(We)),!We)return new Er;if(We instanceof Er)return We;var Ne=(We=We.rgb()).r/255,He=We.g/255,ft=We.b/255,Ct=Math.min(Ne,He,ft),Ht=Math.max(Ne,He,ft),vr=NaN,Be=Ht-Ct,ut=(Ht+Ct)/2;return Be?(vr=Ne===Ht?(He-ft)/Be+6*(He<ft):He===Ht?(ft-Ne)/Be+2:(Ne-He)/Be+4,Be/=ut<.5?Ht+Ct:2-Ht-Ct,vr*=60):Be=ut>0&&ut<1?0:vr,new Er(vr,Be,ut,We.opacity)}function Er(We,Ne,He,ft){this.h=+We,this.s=+Ne,this.l=+He,this.opacity=+ft}function ln(We,Ne,He){return 255*(We<60?Ne+(He-Ne)*We/60:We<180?He:We<240?Ne+(He-Ne)*(240-We)/60:Ne)}function yn(We,Ne,He,ft,Ct){var Ht=We*We,vr=Ht*We;return((1-3*We+3*Ht-vr)*Ne+(4-6*Ht+3*vr)*He+(1+3*We+3*Ht-3*vr)*ft+vr*Ct)/6}Tt(Kt,pn,{copy:function(We){return Object.assign(new this.constructor,this,We)},displayable:function(){return this.rgb().displayable()},hex:Br,formatHex:Br,formatHsl:function(){return gn(this).formatHsl()},formatRgb:Rr,toString:Rr}),Tt(Ir,rn,jt(Kt,{brighter:function(We){return We=We==null?1/.7:Math.pow(1/.7,We),new Ir(this.r*We,this.g*We,this.b*We,this.opacity)},darker:function(We){return We=We==null?.7:Math.pow(.7,We),new Ir(this.r*We,this.g*We,this.b*We,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:On,formatHex:On,formatRgb:In,toString:In})),Tt(Er,function(We,Ne,He,ft){return arguments.length===1?gn(We):new Er(We,Ne,He,ft==null?1:ft)},jt(Kt,{brighter:function(We){return We=We==null?1/.7:Math.pow(1/.7,We),new Er(this.h,this.s,this.l*We,this.opacity)},darker:function(We){return We=We==null?.7:Math.pow(.7,We),new Er(this.h,this.s,this.l*We,this.opacity)},rgb:function(){var We=this.h%360+360*(this.h<0),Ne=isNaN(We)||isNaN(this.s)?0:this.s,He=this.l,ft=He+(He<.5?He:1-He)*Ne,Ct=2*He-ft;return new Ir(ln(We>=240?We-240:We+120,Ct,ft),ln(We,Ct,ft),ln(We<120?We+240:We-120,Ct,ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var We=this.opacity;return((We=isNaN(We)?1:Math.max(0,Math.min(1,We)))===1?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(We===1?")":", "+We+")")}}));var mn=function(We){return function(){return We}};function Qn(We,Ne){return function(He){return We+He*Ne}}function Un(We){return(We=+We)==1?ri:function(Ne,He){return He-Ne?function(ft,Ct,Ht){return ft=Math.pow(ft,Ht),Ct=Math.pow(Ct,Ht)-ft,Ht=1/Ht,function(vr){return Math.pow(ft+vr*Ct,Ht)}}(Ne,He,We):mn(isNaN(Ne)?He:Ne)}}function ri(We,Ne){var He=Ne-We;return He?Qn(We,He):mn(isNaN(We)?Ne:We)}var Ei=function We(Ne){var He=Un(Ne);function ft(Ct,Ht){var vr=He((Ct=rn(Ct)).r,(Ht=rn(Ht)).r),Be=He(Ct.g,Ht.g),ut=He(Ct.b,Ht.b),bt=ri(Ct.opacity,Ht.opacity);return function(Ft){return Ct.r=vr(Ft),Ct.g=Be(Ft),Ct.b=ut(Ft),Ct.opacity=bt(Ft),Ct+""}}return ft.gamma=We,ft}(1);function ni(We){return function(Ne){var He,ft,Ct=Ne.length,Ht=new Array(Ct),vr=new Array(Ct),Be=new Array(Ct);for(He=0;He<Ct;++He)ft=rn(Ne[He]),Ht[He]=ft.r||0,vr[He]=ft.g||0,Be[He]=ft.b||0;return Ht=We(Ht),vr=We(vr),Be=We(Be),ft.opacity=1,function(ut){return ft.r=Ht(ut),ft.g=vr(ut),ft.b=Be(ut),ft+""}}}ni(function(We){var Ne=We.length-1;return function(He){var ft=He<=0?He=0:He>=1?(He=1,Ne-1):Math.floor(He*Ne),Ct=We[ft],Ht=We[ft+1],vr=ft>0?We[ft-1]:2*Ct-Ht,Be=ft<Ne-1?We[ft+2]:2*Ht-Ct;return yn((He-ft/Ne)*Ne,vr,Ct,Ht,Be)}}),ni(function(We){var Ne=We.length;return function(He){var ft=Math.floor(((He%=1)<0?++He:He)*Ne),Ct=We[(ft+Ne-1)%Ne],Ht=We[ft%Ne],vr=We[(ft+1)%Ne],Be=We[(ft+2)%Ne];return yn((He-ft/Ne)*Ne,Ct,Ht,vr,Be)}});var Bn=function(We,Ne){Ne||(Ne=[]);var He,ft=We?Math.min(Ne.length,We.length):0,Ct=Ne.slice();return function(Ht){for(He=0;He<ft;++He)Ct[He]=We[He]*(1-Ht)+Ne[He]*Ht;return Ct}};function wi(We){return ArrayBuffer.isView(We)&&!(We instanceof DataView)}function Oi(We,Ne){var He,ft=Ne?Ne.length:0,Ct=We?Math.min(ft,We.length):0,Ht=new Array(Ct),vr=new Array(ft);for(He=0;He<Ct;++He)Ht[He]=Xn(We[He],Ne[He]);for(;He<ft;++He)vr[He]=Ne[He];return function(Be){for(He=0;He<Ct;++He)vr[He]=Ht[He](Be);return vr}}var Wn=function(We,Ne){var He=new Date;return We=+We,Ne=+Ne,function(ft){return He.setTime(We*(1-ft)+Ne*ft),He}},ii=function(We,Ne){return We=+We,Ne=+Ne,function(He){return We*(1-He)+Ne*He}};function Jn(We){return(Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne})(We)}var hi=function(We,Ne){var He,ft={},Ct={};for(He in We!==null&&Jn(We)==="object"||(We={}),Ne!==null&&Jn(Ne)==="object"||(Ne={}),Ne)He in We?ft[He]=Xn(We[He],Ne[He]):Ct[He]=Ne[He];return function(Ht){for(He in ft)Ct[He]=ft[He](Ht);return Ct}},Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oi=new RegExp(Vn.source,"g"),di=function(We,Ne){var He,ft,Ct,Ht=Vn.lastIndex=oi.lastIndex=0,vr=-1,Be=[],ut=[];for(We+="",Ne+="";(He=Vn.exec(We))&&(ft=oi.exec(Ne));)(Ct=ft.index)>Ht&&(Ct=Ne.slice(Ht,Ct),Be[vr]?Be[vr]+=Ct:Be[++vr]=Ct),(He=He[0])===(ft=ft[0])?Be[vr]?Be[vr]+=ft:Be[++vr]=ft:(Be[++vr]=null,ut.push({i:vr,x:ii(He,ft)})),Ht=oi.lastIndex;return Ht<Ne.length&&(Ct=Ne.slice(Ht),Be[vr]?Be[vr]+=Ct:Be[++vr]=Ct),Be.length<2?ut[0]?function(bt){return function(Ft){return bt(Ft)+""}}(ut[0].x):function(bt){return function(){return bt}}(Ne):(Ne=ut.length,function(bt){for(var Ft,_e=0;_e<Ne;++_e)Be[(Ft=ut[_e]).i]=Ft.x(bt);return Be.join("")})};function _i(We){return(_i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne})(We)}var Xn=function(We,Ne){var He,ft=_i(Ne);return Ne==null||ft==="boolean"?mn(Ne):(ft==="number"?ii:ft==="string"?(He=pn(Ne))?(Ne=He,Ei):di:Ne instanceof pn?Ei:Ne instanceof Date?Wn:wi(Ne)?Bn:Array.isArray(Ne)?Oi:typeof Ne.valueOf!="function"&&typeof Ne.toString!="function"||isNaN(Ne)?hi:ii)(We,Ne)},Yn=o(51),Mi=[1,0,0,0,1,0,0,0,1];function Bi(We,Ne,He){var ft,Ct=Ne.startTime;if(He<Ct+Ne.delay||Ne._paused)return!1;var Ht=Ne.duration,vr=Ne.easing;if(He=He-Ct-Ne.delay,Ne.repeat)ft=He%Ht/Ht,ft=f[vr](ft);else{if(!((ft=He/Ht)<1))return Ne.onFrame?We.attr(Ne.onFrame(1)):We.attr(Ne.toAttrs),!0;ft=f[vr](ft)}if(Ne.onFrame){var Be=Ne.onFrame(ft);We.attr(Be)}else(function(ut,bt,Ft){var _e={},ze=bt.fromAttrs,Qe=bt.toAttrs;if(!ut.destroyed){var lt,vt,wt,Lt;for(var Wt in Qe)if(!Object(O.isEqual)(ze[Wt],Qe[Wt]))if(Wt==="path"){var er=Qe[Wt],tr=ze[Wt];er.length>tr.length?(er=Yn.parsePathString(Qe[Wt]),tr=Yn.parsePathString(ze[Wt]),tr=Yn.fillPathByDiff(tr,er),tr=Yn.formatPath(tr,er),bt.fromAttrs.path=tr,bt.toAttrs.path=er):bt.pathFormatted||(er=Yn.parsePathString(Qe[Wt]),tr=Yn.parsePathString(ze[Wt]),tr=Yn.formatPath(tr,er),bt.fromAttrs.path=tr,bt.toAttrs.path=er,bt.pathFormatted=!0),_e[Wt]=[];for(var ar=0;ar<er.length;ar++){for(var pr=er[ar],Ur=tr[ar],Gr=[],$r=0;$r<pr.length;$r++)Object(O.isNumber)(pr[$r])&&Ur&&Object(O.isNumber)(Ur[$r])?(lt=Xn(Ur[$r],pr[$r]),Gr.push(lt(Ft))):Gr.push(pr[$r]);_e[Wt].push(Gr)}}else if(Wt==="matrix"){var Kr=(wt=ze[Wt]||Mi,(wi(Lt=Qe[Wt]||Mi)?Bn:Oi)(wt,Lt))(Ft);_e[Wt]=Kr}else["fill","stroke","fillStyle","strokeStyle"].includes(Wt)&&(vt=Qe[Wt],/^[r,R,L,l]{1}[\s]*\(/.test(vt))?_e[Wt]=Qe[Wt]:Object(O.isFunction)(Qe[Wt])||(lt=Xn(ze[Wt],Qe[Wt]),_e[Wt]=lt(Ft));ut.attr(_e)}})(We,Ne,ft);return!1}var Hn=function(){function We(Ne){this.animators=[],this.current=0,this.timer=null,this.canvas=Ne}return We.prototype.initTimer=function(){var Ne,He,ft,Ct=this;this.timer=re(function(Ht){if(Ct.current=Ht,Ct.animators.length>0){for(var vr=Ct.animators.length-1;vr>=0;vr--)if((Ne=Ct.animators[vr]).destroyed)Ct.removeAnimator(vr);else{if(!Ne.isAnimatePaused())for(var Be=(He=Ne.get("animations")).length-1;Be>=0;Be--)ft=He[Be],Bi(Ne,ft,Ht)&&(He.splice(Be,1),ft.callback&&ft.callback());He.length===0&&Ct.removeAnimator(vr)}Ct.canvas.get("autoDraw")||Ct.canvas.draw()}})},We.prototype.addAnimator=function(Ne){this.animators.push(Ne)},We.prototype.removeAnimator=function(Ne){this.animators.splice(Ne,1)},We.prototype.isAnimating=function(){return!!this.animators.length},We.prototype.stop=function(){this.timer&&this.timer.stop()},We.prototype.stopAllAnimations=function(Ne){Ne===void 0&&(Ne=!0),this.animators.forEach(function(He){He.stopAnimate(Ne)}),this.animators=[],this.canvas.draw()},We.prototype.getTime=function(){return this.current},We}(),io=o(115),ci=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function li(We,Ne,He){He.name=Ne,He.target=We,He.currentTarget=We,He.delegateTarget=We,We.emit(Ne,He)}function oo(We,Ne,He){if(He.bubbles){var ft=void 0,Ct=!1;if(Ne==="mouseenter"?(ft=He.fromShape,Ct=!0):Ne==="mouseleave"&&(Ct=!0,ft=He.toShape),We.isCanvas()&&Ct)return;if(ft&&Object(x.g)(We,ft))return void(He.bubbles=!1);He.name=Ne,He.currentTarget=We,He.delegateTarget=We,We.emit(Ne,He)}}var Ki=function(){function We(Ne){var He=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(ft){var Ct=ft.type;He._triggerEvent(Ct,ft)},this._onDocumentMove=function(ft){if(He.canvas.get("el")!==ft.target&&(He.dragging||He.currentShape)){var Ct=He._getPointInfo(ft);He.dragging&&He._emitEvent("drag",ft,Ct,He.draggingShape)}},this._onDocumentMouseUp=function(ft){if(He.canvas.get("el")!==ft.target&&He.dragging){var Ct=He._getPointInfo(ft);He.draggingShape&&He._emitEvent("drop",ft,Ct,null),He._emitEvent("dragend",ft,Ct,He.draggingShape),He._afterDrag(He.draggingShape,Ct,ft)}},this.canvas=Ne.canvas}return We.prototype.init=function(){this._bindEvents()},We.prototype._bindEvents=function(){var Ne=this,He=this.canvas.get("el");Object(x.a)(ci,function(ft){He.addEventListener(ft,Ne._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},We.prototype._clearEvents=function(){var Ne=this,He=this.canvas.get("el");Object(x.a)(ci,function(ft){He.removeEventListener(ft,Ne._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},We.prototype._getEventObj=function(Ne,He,ft,Ct,Ht,vr){var Be=new io.a(Ne,He);return Be.fromShape=Ht,Be.toShape=vr,Be.x=ft.x,Be.y=ft.y,Be.clientX=ft.clientX,Be.clientY=ft.clientY,Be.propagationPath.push(Ct),Be},We.prototype._getShape=function(Ne,He){return this.canvas.getShape(Ne.x,Ne.y,He)},We.prototype._getPointInfo=function(Ne){var He=this.canvas,ft=He.getClientByEvent(Ne),Ct=He.getPointByEvent(Ne);return{x:Ct.x,y:Ct.y,clientX:ft.x,clientY:ft.y}},We.prototype._triggerEvent=function(Ne,He){var ft=this._getPointInfo(He),Ct=this._getShape(ft,He),Ht=this["_on"+Ne],vr=!1;if(Ht)Ht.call(this,ft,Ct,He);else{var Be=this.currentShape;Ne==="mouseenter"||Ne==="dragenter"||Ne==="mouseover"?(this._emitEvent(Ne,He,ft,null,null,Ct),Ct&&this._emitEvent(Ne,He,ft,Ct,null,Ct),Ne==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",He,ft,null)):Ne==="mouseleave"||Ne==="dragleave"||Ne==="mouseout"?(vr=!0,Be&&this._emitEvent(Ne,He,ft,Be,Be,null),this._emitEvent(Ne,He,ft,null,Be,null),Ne==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",He,ft,null)):this._emitEvent(Ne,He,ft,Ct,null,null)}if(vr||(this.currentShape=Ct),Ct&&!Ct.get("destroyed")){var ut=this.canvas;ut.get("el").style.cursor=Ct.attr("cursor")||ut.get("cursor")}},We.prototype._onmousedown=function(Ne,He,ft){ft.button===0&&(this.mousedownShape=He,this.mousedownPoint=Ne,this.mousedownTimeStamp=ft.timeStamp),this._emitEvent("mousedown",ft,Ne,He,null,null)},We.prototype._emitMouseoverEvents=function(Ne,He,ft,Ct){var Ht=this.canvas.get("el");ft!==Ct&&(ft&&(this._emitEvent("mouseout",Ne,He,ft,ft,Ct),this._emitEvent("mouseleave",Ne,He,ft,ft,Ct),Ct&&!Ct.get("destroyed")||(Ht.style.cursor=this.canvas.get("cursor"))),Ct&&(this._emitEvent("mouseover",Ne,He,Ct,ft,Ct),this._emitEvent("mouseenter",Ne,He,Ct,ft,Ct)))},We.prototype._emitDragoverEvents=function(Ne,He,ft,Ct,Ht){Ct?(Ct!==ft&&(ft&&this._emitEvent("dragleave",Ne,He,ft,ft,Ct),this._emitEvent("dragenter",Ne,He,Ct,ft,Ct)),Ht||this._emitEvent("dragover",Ne,He,Ct)):ft&&this._emitEvent("dragleave",Ne,He,ft,ft,Ct),Ht&&this._emitEvent("dragover",Ne,He,Ct)},We.prototype._afterDrag=function(Ne,He,ft){Ne&&(Ne.set("capture",!0),this.draggingShape=null),this.dragging=!1;var Ct=this._getShape(He,ft);Ct!==Ne&&this._emitMouseoverEvents(ft,He,Ne,Ct),this.currentShape=Ct},We.prototype._onmouseup=function(Ne,He,ft){if(ft.button===0){var Ct=this.draggingShape;this.dragging?(Ct&&this._emitEvent("drop",ft,Ne,He),this._emitEvent("dragend",ft,Ne,Ct),this._afterDrag(Ct,Ne,ft)):(this._emitEvent("mouseup",ft,Ne,He),He===this.mousedownShape&&this._emitEvent("click",ft,Ne,He),this.mousedownShape=null,this.mousedownPoint=null)}},We.prototype._ondragover=function(Ne,He,ft){ft.preventDefault();var Ct=this.currentShape;this._emitDragoverEvents(ft,Ne,Ct,He,!0)},We.prototype._onmousemove=function(Ne,He,ft){var Ct=this.canvas,Ht=this.currentShape,vr=this.draggingShape;if(this.dragging)vr&&this._emitDragoverEvents(ft,Ne,Ht,He,!1),this._emitEvent("drag",ft,Ne,vr);else{var Be=this.mousedownPoint;if(Be){var ut=this.mousedownShape,bt=ft.timeStamp-this.mousedownTimeStamp,Ft=Be.clientX-Ne.clientX,_e=Be.clientY-Ne.clientY;bt>120||Ft*Ft+_e*_e>40?ut&&ut.get("draggable")?((vr=this.mousedownShape).set("capture",!1),this.draggingShape=vr,this.dragging=!0,this._emitEvent("dragstart",ft,Ne,vr),this.mousedownShape=null,this.mousedownPoint=null):!ut&&Ct.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",ft,Ne,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(ft,Ne,Ht,He),this._emitEvent("mousemove",ft,Ne,He)):(this._emitMouseoverEvents(ft,Ne,Ht,He),this._emitEvent("mousemove",ft,Ne,He))}else this._emitMouseoverEvents(ft,Ne,Ht,He),this._emitEvent("mousemove",ft,Ne,He)}},We.prototype._emitEvent=function(Ne,He,ft,Ct,Ht,vr){var Be=this._getEventObj(Ne,He,ft,Ct,Ht,vr);if(Ct){Be.shape=Ct,li(Ct,Ne,Be);for(var ut=Ct.getParent();ut;)ut.emitDelegation(Ne,Be),Be.propagationStopped||oo(ut,Ne,Be),Be.propagationPath.push(ut),ut=ut.getParent()}else li(this.canvas,Ne,Be)},We.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},We}(),Zi=Object(M.a)(),go=Zi&&Zi.name==="firefox",nr=function(We){function Ne(He){var ft=We.call(this,He)||this;return ft.initContainer(),ft.initDom(),ft.initEvents(),ft.initTimeline(),ft}return Object(c.__extends)(Ne,We),Ne.prototype.getDefaultCfg=function(){var He=We.prototype.getDefaultCfg.call(this);return He.cursor="default",He.supportCSSTransform=!1,He},Ne.prototype.initContainer=function(){var He=this.get("container");Object(x.h)(He)&&(He=document.getElementById(He),this.set("container",He))},Ne.prototype.initDom=function(){var He=this.createDom();this.set("el",He),this.get("container").appendChild(He),this.setDOMSize(this.get("width"),this.get("height"))},Ne.prototype.initEvents=function(){var He=new Ki({canvas:this});He.init(),this.set("eventController",He)},Ne.prototype.initTimeline=function(){var He=new Hn(this);this.set("timeline",He)},Ne.prototype.setDOMSize=function(He,ft){var Ct=this.get("el");x.c&&(Ct.style.width=He+"px",Ct.style.height=ft+"px")},Ne.prototype.changeSize=function(He,ft){this.setDOMSize(He,ft),this.set("width",He),this.set("height",ft),this.onCanvasChange("changeSize")},Ne.prototype.getRenderer=function(){return this.get("renderer")},Ne.prototype.getCursor=function(){return this.get("cursor")},Ne.prototype.setCursor=function(He){this.set("cursor",He);var ft=this.get("el");x.c&&ft&&(ft.style.cursor=He)},Ne.prototype.getPointByEvent=function(He){if(this.get("supportCSSTransform")){if(go&&!Object(x.e)(He.layerX)&&He.layerX!==He.offsetX)return{x:He.layerX,y:He.layerY};if(!Object(x.e)(He.offsetX))return{x:He.offsetX,y:He.offsetY}}var ft=this.getClientByEvent(He),Ct=ft.x,Ht=ft.y;return this.getPointByClient(Ct,Ht)},Ne.prototype.getClientByEvent=function(He){var ft=He;return He.touches&&(ft=He.type==="touchend"?He.changedTouches[0]:He.touches[0]),{x:ft.clientX,y:ft.clientY}},Ne.prototype.getPointByClient=function(He,ft){var Ct=this.get("el").getBoundingClientRect();return{x:He-Ct.left,y:ft-Ct.top}},Ne.prototype.getClientByPoint=function(He,ft){var Ct=this.get("el").getBoundingClientRect();return{x:He+Ct.left,y:ft+Ct.top}},Ne.prototype.draw=function(){},Ne.prototype.removeDom=function(){var He=this.get("el");He.parentNode.removeChild(He)},Ne.prototype.clearEvents=function(){this.get("eventController").destroy()},Ne.prototype.isCanvas=function(){return!0},Ne.prototype.getParent=function(){return null},Ne.prototype.destroy=function(){var He=this.get("timeline");this.get("destroyed")||(this.clear(),He&&He.stop(),this.clearEvents(),this.removeDom(),We.prototype.destroy.call(this))},Ne}(_.a);m.a=nr},function(D,m,o){"use strict";o.d(m,"a",function(){return M});var f=new Map;function c(p,A){f.set(p,A)}function M(p){return f.get(p)}var _=function(p){var A=p.attr();return{x:A.x,y:A.y,width:A.width,height:A.height}},x=function(p){var A=p.attr(),C=A.x,N=A.y,P=A.r;return{x:C-P,y:N-P,width:2*P,height:2*P}},O=o(20);function S(p,A){return p&&A?{minX:Math.min(p.minX,A.minX),minY:Math.min(p.minY,A.minY),maxX:Math.max(p.maxX,A.maxX),maxY:Math.max(p.maxY,A.maxY)}:p||A}function g(p,A){var C=p.get("startArrowShape"),N=p.get("endArrowShape");return C&&(A=S(A,C.getCanvasBBox())),N&&(A=S(A,N.getCanvasBBox())),A}var d=o(67),y=o(37),E=o(0);function b(p,A){var C=p.prePoint,N=p.currentPoint,P=p.nextPoint,L=Math.pow(N[0]-C[0],2)+Math.pow(N[1]-C[1],2),z=Math.pow(N[0]-P[0],2)+Math.pow(N[1]-P[1],2),X=Math.pow(C[0]-P[0],2)+Math.pow(C[1]-P[1],2),re=Math.acos((L+z-X)/(2*Math.sqrt(L)*Math.sqrt(z)));if(!re||Math.sin(re)===0||Object(E.isNumberEqual)(re,0))return{xExtra:0,yExtra:0};var se=Math.abs(Math.atan2(P[1]-N[1],P[0]-N[0])),ce=Math.abs(Math.atan2(P[0]-N[0],P[1]-N[1]));return se=se>Math.PI/2?Math.PI-se:se,ce=ce>Math.PI/2?Math.PI-ce:ce,{xExtra:Math.cos(re/2-se)*(A/2*(1/Math.sin(re/2)))-A/2||0,yExtra:Math.cos(ce-re/2)*(A/2*(1/Math.sin(re/2)))-A/2||0}}c("rect",_),c("image",_),c("circle",x),c("marker",x),c("polyline",function(p){for(var A=p.attr().points,C=[],N=[],P=0;P<A.length;P++){var L=A[P];C.push(L[0]),N.push(L[1])}var z=O.f.getBBoxByArray(C,N),X=z.x,re=z.y,se={minX:X,minY:re,maxX:X+z.width,maxY:re+z.height};return{x:(se=g(p,se)).minX,y:se.minY,width:se.maxX-se.minX,height:se.maxY-se.minY}}),c("polygon",function(p){for(var A=p.attr().points,C=[],N=[],P=0;P<A.length;P++){var L=A[P];C.push(L[0]),N.push(L[1])}return O.f.getBBoxByArray(C,N)}),c("text",function(p){var A=p.attr(),C=A.x,N=A.y,P=A.text,L=A.fontSize,z=A.lineHeight,X=A.font;X||(X=Object(d.a)(A));var re,se=Object(d.c)(P,X);if(se){var ce=A.textAlign,xe=A.textBaseline,ye=Object(d.b)(P,L,z),W={x:C,y:N-ye};ce&&(ce==="end"||ce==="right"?W.x-=se:ce==="center"&&(W.x-=se/2)),xe&&(xe==="top"?W.y+=ye:xe==="middle"&&(W.y+=ye/2)),re={x:W.x,y:W.y,width:se,height:ye}}else re={x:C,y:N,width:0,height:0};return re}),c("path",function(p){var A=p.attr(),C=A.path,N=A.stroke?A.lineWidth:0,P=function(re,se){for(var ce=[],xe=[],ye=[],W=0;W<re.length;W++){var Ie=(J=re[W]).currentPoint,ge=J.params,te=J.prePoint,H=void 0;switch(J.command){case"Q":H=O.e.box(te[0],te[1],ge[1],ge[2],ge[3],ge[4]);break;case"C":H=O.b.box(te[0],te[1],ge[1],ge[2],ge[3],ge[4],ge[5],ge[6]);break;case"A":var V=J.arcParams;H=O.a.box(V.cx,V.cy,V.rx,V.ry,V.xRotation,V.startAngle,V.endAngle);break;default:ce.push(Ie[0]),xe.push(Ie[1])}H&&(J.box=H,ce.push(H.x,H.x+H.width),xe.push(H.y,H.y+H.height)),se&&(J.command==="L"||J.command==="M")&&J.prePoint&&J.nextPoint&&ye.push(J)}ce=ce.filter(function(ee){return!Number.isNaN(ee)}),xe=xe.filter(function(ee){return!Number.isNaN(ee)});var ie=Object(E.min)(ce),we=Object(E.min)(xe),ke=Object(E.max)(ce),oe=Object(E.max)(xe);if(ye.length===0)return{x:ie,y:we,width:ke-ie,height:oe-we};for(W=0;W<ye.length;W++){var J;(Ie=(J=ye[W]).currentPoint)[0]===ie?ie-=b(J,se).xExtra:Ie[0]===ke&&(ke+=b(J,se).xExtra),Ie[1]===we?we-=b(J,se).yExtra:Ie[1]===oe&&(oe+=b(J,se).yExtra)}return{x:ie,y:we,width:ke-ie,height:oe-we}}(p.get("segments")||Object(y.d)(C),N),L=P.x,z=P.y,X={minX:L,minY:z,maxX:L+P.width,maxY:z+P.height};return{x:(X=g(p,X)).minX,y:X.minY,width:X.maxX-X.minX,height:X.maxY-X.minY}}),c("line",function(p){var A=p.attr(),C=A.x1,N=A.y1,P=A.x2,L=A.y2,z={minX:Math.min(C,P),maxX:Math.max(C,P),minY:Math.min(N,L),maxY:Math.max(N,L)};return{x:(z=g(p,z)).minX,y:z.minY,width:z.maxX-z.minX,height:z.maxY-z.minY}}),c("ellipse",function(p){var A=p.attr(),C=A.x,N=A.y,P=A.rx,L=A.ry;return{x:C-P,y:N-L,width:2*P,height:2*L}})},function(D,m,o){"use strict";var f=o(1),c=o(21),M=o(16),_=o(69),x=o(34),O=o(26),S=o(78),g=o(76),d=o(0),y=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,E=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,b=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function p(xe){var ye=xe.match(b);if(!ye)return"";var W="";return ye.sort(function(Ie,ge){return Ie=Ie.split(":"),ge=ge.split(":"),Number(Ie[0])-Number(ge[0])}),Object(d.each)(ye,function(Ie){Ie=Ie.split(":"),W+='<stop offset="'+Ie[0]+'" stop-color="'+Ie[1]+'"></stop>'}),W}var A=function(){function xe(ye){this.cfg={};var W=null,Ie=Object(d.uniqueId)("gradient_");return ye.toLowerCase()[0]==="l"?function(ge,te){var H,V,ie=y.exec(ge),we=Object(d.mod)(Object(d.toRadian)(parseFloat(ie[1])),2*Math.PI),ke=ie[2];we>=0&&we<.5*Math.PI?(H={x:0,y:0},V={x:1,y:1}):.5*Math.PI<=we&&we<Math.PI?(H={x:1,y:0},V={x:0,y:1}):Math.PI<=we&&we<1.5*Math.PI?(H={x:1,y:1},V={x:0,y:0}):(H={x:0,y:1},V={x:1,y:0});var oe=Math.tan(we),J=oe*oe,ee=(V.x-H.x+oe*(V.y-H.y))/(J+1)+H.x,Y=oe*(V.x-H.x+oe*(V.y-H.y))/(J+1)+H.y;te.setAttribute("x1",H.x),te.setAttribute("y1",H.y),te.setAttribute("x2",ee),te.setAttribute("y2",Y),te.innerHTML=p(ke)}(ye,W=Object(O.b)("linearGradient")):function(ge,te){var H=E.exec(ge),V=parseFloat(H[1]),ie=parseFloat(H[2]),we=parseFloat(H[3]),ke=H[4];te.setAttribute("cx",V),te.setAttribute("cy",ie),te.setAttribute("r",we),te.innerHTML=p(ke)}(ye,W=Object(O.b)("radialGradient")),W.setAttribute("id",Ie),this.el=W,this.id=Ie,this.cfg=ye,this}return xe.prototype.match=function(ye,W){return this.cfg===W},xe}(),C={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},N={x:"-40%",y:"-40%",width:"200%",height:"200%"},P=function(){function xe(ye){this.type="filter",this.cfg={},this.type="filter";var W=Object(O.b)("filter");return Object(d.each)(N,function(Ie,ge){W.setAttribute(ge,Ie)}),this.el=W,this.id=Object(d.uniqueId)("filter_"),this.el.id=this.id,this.cfg=ye,this._parseShadow(ye,W),this}return xe.prototype.match=function(ye,W){if(this.type!==ye)return!1;var Ie=!0,ge=this.cfg;return Object(d.each)(Object.keys(ge),function(te){if(ge[te]!==W[te])return Ie=!1,!1}),Ie},xe.prototype.update=function(ye,W){var Ie=this.cfg;return Ie[C[ye]]=W,this._parseShadow(Ie,this.el),this},xe.prototype._parseShadow=function(ye,W){var Ie=`<feDropShadow
      dx="`+(ye.dx||0)+`"
      dy="`+(ye.dy||0)+`"
      stdDeviation="`+(ye.blur?ye.blur/10:0)+`"
      flood-color="`+(ye.color?ye.color:"#000")+`"
      flood-opacity="`+(ye.opacity?ye.opacity:1)+`"
      />`;W.innerHTML=Ie},xe}(),L=function(){function xe(ye,W){this.cfg={};var Ie=Object(O.b)("marker"),ge=Object(d.uniqueId)("marker_");Ie.setAttribute("id",ge);var te=Object(O.b)("path");te.setAttribute("stroke",ye.stroke||"none"),te.setAttribute("fill",ye.fill||"none"),Ie.appendChild(te),Ie.setAttribute("overflow","visible"),Ie.setAttribute("orient","auto-start-reverse"),this.el=Ie,this.child=te,this.id=ge;var H=ye[W==="marker-start"?"startArrow":"endArrow"];return this.stroke=ye.stroke||"#000",H===!0?this._setDefaultPath(W,te):(this.cfg=H,this._setMarker(ye.lineWidth,te)),this}return xe.prototype.match=function(){return!1},xe.prototype._setDefaultPath=function(ye,W){var Ie=this.el;W.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),Ie.setAttribute("refX",""+10*Math.cos(Math.PI/6)),Ie.setAttribute("refY","5")},xe.prototype._setMarker=function(ye,W){var Ie=this.el,ge=this.cfg.path,te=this.cfg.d;Object(d.isArray)(ge)&&(ge=ge.map(function(H){return H.join(" ")}).join("")),W.setAttribute("d",ge),Ie.appendChild(W),te&&Ie.setAttribute("refX",""+te/ye)},xe.prototype.update=function(ye){var W=this.child;W.attr?W.attr("fill",ye):W.setAttribute("fill",ye)},xe}(),z=function(){function xe(ye){this.type="clip",this.cfg={};var W=Object(O.b)("clipPath");this.el=W,this.id=Object(d.uniqueId)("clip_"),W.id=this.id;var Ie=ye.cfg.el;return W.appendChild(Ie),this.cfg=ye,this}return xe.prototype.match=function(){return!1},xe.prototype.remove=function(){var ye=this.el;ye.parentNode.removeChild(ye)},xe}(),X=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,re=function(){function xe(ye){this.cfg={};var W=Object(O.b)("pattern");W.setAttribute("patternUnits","userSpaceOnUse");var Ie=Object(O.b)("image");W.appendChild(Ie);var ge=Object(d.uniqueId)("pattern_");W.id=ge,this.el=W,this.id=ge,this.cfg=ye;var te=X.exec(ye)[2];Ie.setAttribute("href",te);var H=new Image;function V(){W.setAttribute("width",""+H.width),W.setAttribute("height",""+H.height)}return te.match(/^data:/i)||(H.crossOrigin="Anonymous"),H.src=te,H.complete?V():(H.onload=V,H.src=H.src),this}return xe.prototype.match=function(ye,W){return this.cfg===W},xe}(),se=function(){function xe(ye){var W=Object(O.b)("defs"),Ie=Object(d.uniqueId)("defs_");W.id=Ie,ye.appendChild(W),this.children=[],this.defaultArrow={},this.el=W,this.canvas=ye}return xe.prototype.find=function(ye,W){for(var Ie=this.children,ge=null,te=0;te<Ie.length;te++)if(Ie[te].match(ye,W)){ge=Ie[te].id;break}return ge},xe.prototype.findById=function(ye){for(var W=this.children,Ie=null,ge=0;ge<W.length;ge++)if(W[ge].id===ye){Ie=W[ge];break}return Ie},xe.prototype.add=function(ye){this.children.push(ye),ye.canvas=this.canvas,ye.parent=this},xe.prototype.getDefaultArrow=function(ye,W){var Ie=ye.stroke||ye.strokeStyle;if(this.defaultArrow[Ie])return this.defaultArrow[Ie].id;var ge=new L(ye,W);return this.defaultArrow[Ie]=ge,this.el.appendChild(ge.el),this.add(ge),ge.id},xe.prototype.addGradient=function(ye){var W=new A(ye);return this.el.appendChild(W.el),this.add(W),W.id},xe.prototype.addArrow=function(ye,W){var Ie=new L(ye,W);return this.el.appendChild(Ie.el),this.add(Ie),Ie.id},xe.prototype.addShadow=function(ye){var W=new P(ye);return this.el.appendChild(W.el),this.add(W),W.id},xe.prototype.addPattern=function(ye){var W=new re(ye);return this.el.appendChild(W.el),this.add(W),W.id},xe.prototype.addClip=function(ye){var W=new z(ye);return this.el.appendChild(W.el),this.add(W),W.id},xe}(),ce=function(xe){function ye(W){return xe.call(this,Object(f.__assign)(Object(f.__assign)({},W),{autoDraw:!0,renderer:"svg"}))||this}return Object(f.__extends)(ye,xe),ye.prototype.getShapeBase=function(){return S},ye.prototype.getGroupBase=function(){return g.a},ye.prototype.getShape=function(W,Ie,ge){var te=ge.target||ge.srcElement;if(!M.a[te.tagName]){for(var H=te.parentNode;H&&!M.a[H.tagName];)H=H.parentNode;te=H}return this.find(function(V){return V.get("el")===te})},ye.prototype.createDom=function(){var W=Object(O.b)("svg"),Ie=new se(W);return W.setAttribute("width",""+this.get("width")),W.setAttribute("height",""+this.get("height")),this.set("context",Ie),W},ye.prototype.onCanvasChange=function(W){var Ie=this.get("context"),ge=this.get("el");if(W==="sort"){var te=this.get("children");te&&te.length&&Object(O.d)(this,function(V,ie){return te.indexOf(V)-te.indexOf(ie)?1:0})}else if(W==="clear"){if(ge){ge.innerHTML="";var H=Ie.el;H.innerHTML="",ge.appendChild(H)}}else W==="matrix"?Object(x.c)(this):W==="clip"?Object(x.a)(this,Ie):W==="changeSize"&&(ge.setAttribute("width",""+this.get("width")),ge.setAttribute("height",""+this.get("height")))},ye.prototype.draw=function(){var W=this.get("context"),Ie=this.getChildren();Object(x.a)(this,W),Ie.length&&Object(_.a)(W,Ie)},ye}(c.AbstractCanvas);m.a=ce},function(D,m,o){"use strict";o(130),o(131),o(133)},function(D,m,o){"use strict";o.d(m,"a",function(){return f.a}),o.d(m,"b",function(){return M.a});var f=o(77),c=(o(6),o(7),o(2)),M=(c.e.create(),o(56));o(125),c.e.create(),c.e.create(),c.e.create(),c.e.create(),c.e.create()},function(D,m,o){"use strict";var f=o(1),c=o(21);function M(y,E,b){var p=y.getTotalMatrix();if(p){var A=function(C,N){if(N){var P=Object(c.invert)(N);return Object(c.multiplyVec2)(P,C)}return C}([E,b,1],p);return[A[0],A[1]]}return[E,b]}function _(y,E,b){if(y.isCanvas&&y.isCanvas())return!0;if(!Object(c.isAllowCapture)(y)||y.cfg.isInView===!1)return!1;if(y.cfg.clipShape){var p=M(y,E,b),A=p[0],C=p[1];if(y.isClipped(A,C))return!1}var N=y.cfg.cacheCanvasBBox||y.getCanvasBBox();return E>=N.minX&&E<=N.maxX&&b>=N.minY&&b<=N.maxY}var x=o(55),O=o(75),S=o(15),g=o(30),d=function(y){function E(){return y!==null&&y.apply(this,arguments)||this}return Object(f.__extends)(E,y),E.prototype.getDefaultCfg=function(){var b=y.prototype.getDefaultCfg.call(this);return b.renderer="canvas",b.autoDraw=!0,b.localRefresh=!0,b.refreshElements=[],b.clipView=!0,b.quickHit=!1,b},E.prototype.onCanvasChange=function(b){b!=="attr"&&b!=="sort"&&b!=="changeSize"||(this.set("refreshElements",[this]),this.draw())},E.prototype.getShapeBase=function(){return x},E.prototype.getGroupBase=function(){return O.a},E.prototype.getPixelRatio=function(){var b=this.get("pixelRatio")||Object(S.d)();return b>=1?Math.ceil(b):1},E.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},E.prototype.createDom=function(){var b=document.createElement("canvas"),p=b.getContext("2d");return this.set("context",p),b},E.prototype.setDOMSize=function(b,p){y.prototype.setDOMSize.call(this,b,p);var A=this.get("context"),C=this.get("el"),N=this.getPixelRatio();C.width=N*b,C.height=N*p,N>1&&A.scale(N,N)},E.prototype.clear=function(){y.prototype.clear.call(this),this._clearFrame();var b=this.get("context"),p=this.get("el");b.clearRect(0,0,p.width,p.height)},E.prototype.getShape=function(b,p){return this.get("quickHit")?function A(C,N,P){if(!_(C,N,P))return null;for(var L=null,z=C.getChildren(),X=z.length-1;X>=0;X--){var re=z[X];if(re.isGroup())L=A(re,N,P);else if(_(re,N,P)){var se=re,ce=M(re,N,P),xe=ce[0],ye=ce[1];se.isInShape(xe,ye)&&(L=re)}if(L)break}return L}(this,b,p):y.prototype.getShape.call(this,b,p,null)},E.prototype._getRefreshRegion=function(){var b,p=this.get("refreshElements"),A=this.getViewRange();return p.length&&p[0]===this?b=A:(b=Object(g.f)(p))&&(b.minX=Math.floor(b.minX),b.minY=Math.floor(b.minY),b.maxX=Math.ceil(b.maxX),b.maxY=Math.ceil(b.maxY),b.maxY+=1,this.get("clipView")&&(b=Object(g.g)(b,A))),b},E.prototype.refreshElement=function(b){this.get("refreshElements").push(b)},E.prototype._clearFrame=function(){var b=this.get("drawFrame");b&&(Object(S.a)(b),this.set("drawFrame",null),this.set("refreshElements",[]))},E.prototype.draw=function(){var b=this.get("drawFrame");this.get("autoDraw")&&b||this._startDraw()},E.prototype._drawAll=function(){var b=this.get("context"),p=this.get("el"),A=this.getChildren();b.clearRect(0,0,p.width,p.height),Object(g.a)(b,this),Object(g.d)(b,A),this.set("refreshElements",[])},E.prototype._drawRegion=function(){var b=this.get("context"),p=this.get("refreshElements"),A=this.getChildren(),C=this._getRefreshRegion();C?(b.clearRect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),b.save(),b.beginPath(),b.rect(C.minX,C.minY,C.maxX-C.minX,C.maxY-C.minY),b.clip(),Object(g.a)(b,this),Object(g.b)(this,A,C),Object(g.d)(b,A,C),b.restore()):p.length&&Object(g.c)(p),Object(S.c)(p,function(N){N.get("hasChanged")&&N.set("hasChanged",!1)}),this.set("refreshElements",[])},E.prototype._startDraw=function(){var b=this,p=this.get("drawFrame");p||(p=Object(S.n)(function(){b.get("localRefresh")?b._drawRegion():b._drawAll(),b.set("drawFrame",null)}),this.set("drawFrame",p))},E.prototype.skipDraw=function(){},E.prototype.removeDom=function(){var b=this.get("el");b.width=0,b.height=0,b.parentNode.removeChild(b)},E}(c.AbstractCanvas);m.a=d},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),Object.defineProperty(m,"getAdjMatrixAsync",{enumerable:!0,get:function(){return f.getAdjMatrixAsync}}),Object.defineProperty(m,"connectedComponentAsync",{enumerable:!0,get:function(){return f.connectedComponentAsync}}),Object.defineProperty(m,"getDegreeAsync",{enumerable:!0,get:function(){return f.getDegreeAsync}}),Object.defineProperty(m,"getInDegreeAsync",{enumerable:!0,get:function(){return f.getInDegreeAsync}}),Object.defineProperty(m,"getOutDegreeAsync",{enumerable:!0,get:function(){return f.getOutDegreeAsync}}),Object.defineProperty(m,"detectCycleAsync",{enumerable:!0,get:function(){return f.detectCycleAsync}}),Object.defineProperty(m,"detectAllCyclesAsync",{enumerable:!0,get:function(){return f.detectAllCyclesAsync}}),Object.defineProperty(m,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return f.detectAllDirectedCycleAsync}}),Object.defineProperty(m,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return f.detectAllUndirectedCycleAsync}}),Object.defineProperty(m,"dijkstraAsync",{enumerable:!0,get:function(){return f.dijkstraAsync}}),Object.defineProperty(m,"findAllPathAsync",{enumerable:!0,get:function(){return f.findAllPathAsync}}),Object.defineProperty(m,"findShortestPathAsync",{enumerable:!0,get:function(){return f.findShortestPathAsync}}),Object.defineProperty(m,"floydWarshallAsync",{enumerable:!0,get:function(){return f.floydWarshallAsync}}),Object.defineProperty(m,"labelPropagationAsync",{enumerable:!0,get:function(){return f.labelPropagationAsync}}),Object.defineProperty(m,"louvainAsync",{enumerable:!0,get:function(){return f.louvainAsync}}),Object.defineProperty(m,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return f.minimumSpanningTreeAsync}}),Object.defineProperty(m,"pageRankAsync",{enumerable:!0,get:function(){return f.pageRankAsync}}),Object.defineProperty(m,"getNeighborsAsync",{enumerable:!0,get:function(){return f.getNeighborsAsync}}),Object.defineProperty(m,"GADDIAsync",{enumerable:!0,get:function(){return f.GADDIAsync}}),m.default=m.detectDirectedCycleAsync=void 0;var f=o(280),c=f.detectCycleAsync;m.detectDirectedCycleAsync=c;var M={getAdjMatrixAsync:f.getAdjMatrixAsync,connectedComponentAsync:f.connectedComponentAsync,getDegreeAsync:f.getDegreeAsync,getInDegreeAsync:f.getInDegreeAsync,getOutDegreeAsync:f.getOutDegreeAsync,detectCycleAsync:f.detectCycleAsync,detectDirectedCycleAsync:c,detectAllCyclesAsync:f.detectAllCyclesAsync,detectAllDirectedCycleAsync:f.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:f.detectAllUndirectedCycleAsync,dijkstraAsync:f.dijkstraAsync,findAllPathAsync:f.findAllPathAsync,findShortestPathAsync:f.findShortestPathAsync,floydWarshallAsync:f.floydWarshallAsync,labelPropagationAsync:f.labelPropagationAsync,louvainAsync:f.louvainAsync,minimumSpanningTreeAsync:f.minimumSpanningTreeAsync,pageRankAsync:f.pageRankAsync,getNeighborsAsync:f.getNeighborsAsync,GADDIAsync:f.GADDIAsync};m.default=M},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var f=o(512);m.default=function(c,M){return M===void 0&&(M=!0),{lazyInject:f.makePropertyInjectDecorator(c,M),lazyInjectNamed:f.makePropertyInjectNamedDecorator(c,M),lazyInjectTagged:f.makePropertyInjectTaggedDecorator(c,M),lazyMultiInject:f.makePropertyMultiInjectDecorator(c,M)}}},function(D,m,o){var f,c,M;function _(x){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}M=function(){"use strict";var x=function(Be){return Be instanceof Uint8Array||Be instanceof Uint16Array||Be instanceof Uint32Array||Be instanceof Int8Array||Be instanceof Int16Array||Be instanceof Int32Array||Be instanceof Float32Array||Be instanceof Float64Array||Be instanceof Uint8ClampedArray},O=function(Be,ut){for(var bt=Object.keys(ut),Ft=0;Ft<bt.length;++Ft)Be[bt[Ft]]=ut[bt[Ft]];return Be};function S(Be){var ut=new Error("(regl) "+Be);throw console.error(ut),ut}function g(Be,ut){Be||S(ut)}function d(Be){return Be?": "+Be:""}function y(Be,ut){switch(ut){case"number":return typeof Be=="number";case"object":return _(Be)==="object";case"string":return typeof Be=="string";case"boolean":return typeof Be=="boolean";case"function":return typeof Be=="function";case"undefined":return Be===void 0;case"symbol":return _(Be)==="symbol"}}function E(Be,ut,bt){ut.indexOf(Be)<0&&S("invalid value"+d(bt)+". must be one of: "+ut)}var b=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(Be,ut){for(Be+="";Be.length<ut;)Be=" "+Be;return Be}function A(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function C(Be,ut){this.number=Be,this.line=ut,this.errors=[]}function N(Be,ut,bt){this.file=Be,this.line=ut,this.message=bt}function P(){var Be=new Error,ut=(Be.stack||Be).toString(),bt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ut);if(bt)return bt[1];var Ft=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ut);return Ft?Ft[1]:"unknown"}function L(){var Be=new Error,ut=(Be.stack||Be).toString(),bt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ut);if(bt)return bt[1];var Ft=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ut);return Ft?Ft[1]:"unknown"}function z(Be,ut){var bt,Ft=Be.split(`
`),_e=1,ze=0,Qe={unknown:new A,0:new A};Qe.unknown.name=Qe[0].name=ut||P(),Qe.unknown.lines.push(new C(0,""));for(var lt=0;lt<Ft.length;++lt){var vt=Ft[lt],wt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(vt);if(wt)switch(wt[1]){case"line":var Lt=/(\d+)(\s+\d+)?/.exec(wt[2]);Lt&&(_e=0|Lt[1],Lt[2]&&((ze=0|Lt[2])in Qe||(Qe[ze]=new A)));break;case"define":var Wt=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wt[2]);Wt&&(Qe[ze].name=Wt[1]?(bt=Wt[2],typeof atob!="undefined"?atob(bt):"base64:"+bt):Wt[2])}Qe[ze].lines.push(new C(_e++,vt))}return Object.keys(Qe).forEach(function(er){var tr=Qe[er];tr.lines.forEach(function(ar){tr.index[ar.number]=ar})}),Qe}function X(Be){Be._commandRef=P()}function re(Be,ut){var bt=L();S(Be+" in command "+(ut||P())+(bt==="unknown"?"":" called from "+bt))}function se(Be,ut,bt,Ft){y(Be,ut)||re("invalid parameter type"+d(bt)+". expected "+ut+", got "+_(Be),Ft||P())}var ce={};function xe(Be,ut){return Be===32820||Be===32819||Be===33635?2:Be===34042?4:ce[Be]*ut}function ye(Be){return!(Be&Be-1||!Be)}ce[5120]=ce[5121]=1,ce[5122]=ce[5123]=ce[36193]=ce[33635]=ce[32819]=ce[32820]=2,ce[5124]=ce[5125]=ce[5126]=ce[34042]=4;var W=O(g,{optional:function(Be){Be()},raise:S,commandRaise:re,command:function(Be,ut,bt){Be||re(ut,bt||P())},parameter:function(Be,ut,bt){Be in ut||S("unknown parameter ("+Be+")"+d(bt)+". possible values: "+Object.keys(ut).join())},commandParameter:function(Be,ut,bt,Ft){Be in ut||re("unknown parameter ("+Be+")"+d(bt)+". possible values: "+Object.keys(ut).join(),Ft||P())},constructor:function(Be){Object.keys(Be).forEach(function(ut){b.indexOf(ut)<0&&S('invalid regl constructor argument "'+ut+'". must be one of '+b)})},type:function(Be,ut,bt){y(Be,ut)||S("invalid parameter type"+d(bt)+". expected "+ut+", got "+_(Be))},commandType:se,isTypedArray:function(Be,ut){x(Be)||S("invalid parameter type"+d(ut)+". must be a typed array")},nni:function(Be,ut){Be>=0&&(0|Be)===Be||S("invalid parameter type, ("+Be+")"+d(ut)+". must be a nonnegative integer")},oneOf:E,shaderError:function(Be,ut,bt,Ft,_e){if(!Be.getShaderParameter(ut,Be.COMPILE_STATUS)){var ze=Be.getShaderInfoLog(ut),Qe=Ft===Be.FRAGMENT_SHADER?"fragment":"vertex";se(bt,"string",Qe+" shader source must be a string",_e);var lt=z(bt,_e),vt=function(wt){var Lt=[];return wt.split(`
`).forEach(function(Wt){if(!(Wt.length<5)){var er=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Wt);er?Lt.push(new N(0|er[1],0|er[2],er[3].trim())):Wt.length>0&&Lt.push(new N("unknown",0,Wt))}}),Lt}(ze);(function(wt,Lt){Lt.forEach(function(Wt){var er=wt[Wt.file];if(er){var tr=er.index[Wt.line];if(tr)return tr.errors.push(Wt),void(er.hasErrors=!0)}wt.unknown.hasErrors=!0,wt.unknown.lines[0].errors.push(Wt)})})(lt,vt),Object.keys(lt).forEach(function(wt){var Lt=lt[wt];if(Lt.hasErrors){var Wt=[""],er=[""];tr("file number "+wt+": "+Lt.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Lt.lines.forEach(function(ar){if(ar.errors.length>0){tr(p(ar.number,4)+"|  ","background-color:yellow; font-weight:bold"),tr(ar.line+`
`,"color:red; background-color:yellow; font-weight:bold");var pr=0;ar.errors.forEach(function(Ur){var Gr=Ur.message,$r=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Gr);if($r){var Kr=$r[1];switch(Gr=$r[2],Kr){case"assign":Kr="="}pr=Math.max(ar.line.indexOf(Kr,pr),0)}else pr=0;tr(p("| ",6)),tr(p("^^^",pr+3)+`
`,"font-weight:bold"),tr(p("| ",6)),tr(Gr+`
`,"font-weight:bold")}),tr(p("| ",6)+`
`)}else tr(p(ar.number,4)+"|  "),tr(ar.line+`
`,"color:red")}),typeof document=="undefined"||window.chrome?console.log(Wt.join("")):(er[0]=Wt.join("%c"),console.log.apply(console,er))}function tr(ar,pr){Wt.push(ar),er.push(pr||"")}}),g.raise("Error compiling "+Qe+" shader, "+lt[0].name)}},linkError:function(Be,ut,bt,Ft,_e){if(!Be.getProgramParameter(ut,Be.LINK_STATUS)){var ze=Be.getProgramInfoLog(ut),Qe=z(bt,_e),lt='Error linking program with vertex shader, "'+z(Ft,_e)[0].name+'", and fragment shader "'+Qe[0].name+'"';typeof document!="undefined"?console.log("%c"+lt+`
%c`+ze,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(lt+`
`+ze),g.raise(lt)}},callSite:L,saveCommandRef:X,saveDrawInfo:function(Be,ut,bt,Ft){function _e(vt){return vt?Ft.id(vt):0}function ze(vt,wt){Object.keys(wt).forEach(function(Lt){vt[Ft.id(Lt)]=!0})}X(Be),Be._fragId=_e(Be.static.frag),Be._vertId=_e(Be.static.vert);var Qe=Be._uniformSet={};ze(Qe,ut.static),ze(Qe,ut.dynamic);var lt=Be._attributeSet={};ze(lt,bt.static),ze(lt,bt.dynamic),Be._hasCount="count"in Be.static||"count"in Be.dynamic||"elements"in Be.static||"elements"in Be.dynamic},framebufferFormat:function(Be,ut,bt){Be.texture?E(Be.texture._texture.internalformat,ut,"unsupported texture format for attachment"):E(Be.renderbuffer._renderbuffer.format,bt,"unsupported renderbuffer format for attachment")},guessCommand:P,texture2D:function(Be,ut,bt){var Ft,_e=ut.width,ze=ut.height,Qe=ut.channels;g(_e>0&&_e<=bt.maxTextureSize&&ze>0&&ze<=bt.maxTextureSize,"invalid texture shape"),Be.wrapS===33071&&Be.wrapT===33071||g(ye(_e)&&ye(ze),"incompatible wrap mode for texture, both width and height must be power of 2"),ut.mipmask===1?_e!==1&&ze!==1&&g(Be.minFilter!==9984&&Be.minFilter!==9986&&Be.minFilter!==9985&&Be.minFilter!==9987,"min filter requires mipmap"):(g(ye(_e)&&ye(ze),"texture must be a square power of 2 to support mipmapping"),g(ut.mipmask===(_e<<1)-1,"missing or incomplete mipmap data")),ut.type===5126&&(bt.extensions.indexOf("oes_texture_float_linear")<0&&g(Be.minFilter===9728&&Be.magFilter===9728,"filter not supported, must enable oes_texture_float_linear"),g(!Be.genMipmaps,"mipmap generation not supported with float textures"));var lt=ut.images;for(Ft=0;Ft<16;++Ft)if(lt[Ft]){var vt=_e>>Ft,wt=ze>>Ft;g(ut.mipmask&1<<Ft,"missing mipmap data");var Lt=lt[Ft];if(g(Lt.width===vt&&Lt.height===wt,"invalid shape for mip images"),g(Lt.format===ut.format&&Lt.internalformat===ut.internalformat&&Lt.type===ut.type,"incompatible type for mip image"),!Lt.compressed)if(Lt.data){var Wt=Math.ceil(xe(Lt.type,Qe)*vt/Lt.unpackAlignment)*Lt.unpackAlignment;g(Lt.data.byteLength===Wt*wt,"invalid data for image, buffer size is inconsistent with image format")}else Lt.element||Lt.copy}else Be.genMipmaps||g((ut.mipmask&1<<Ft)==0,"extra mipmap data");ut.compressed&&g(!Be.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(Be,ut,bt,Ft){var _e=Be.width,ze=Be.height,Qe=Be.channels;g(_e>0&&_e<=Ft.maxTextureSize&&ze>0&&ze<=Ft.maxTextureSize,"invalid texture shape"),g(_e===ze,"cube map must be square"),g(ut.wrapS===33071&&ut.wrapT===33071,"wrap mode not supported by cube map");for(var lt=0;lt<bt.length;++lt){var vt=bt[lt];g(vt.width===_e&&vt.height===ze,"inconsistent cube map face shape"),ut.genMipmaps&&(g(!vt.compressed,"can not generate mipmap for compressed textures"),g(vt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var wt=vt.images,Lt=0;Lt<16;++Lt){var Wt=wt[Lt];if(Wt){var er=_e>>Lt,tr=ze>>Lt;g(vt.mipmask&1<<Lt,"missing mipmap data"),g(Wt.width===er&&Wt.height===tr,"invalid shape for mip images"),g(Wt.format===Be.format&&Wt.internalformat===Be.internalformat&&Wt.type===Be.type,"incompatible type for mip image"),Wt.compressed||(Wt.data?g(Wt.data.byteLength===er*tr*Math.max(xe(Wt.type,Qe),Wt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Wt.element||Wt.copy)}}}}}),Ie=0;function ge(Be,ut){this.id=Ie++,this.type=Be,this.data=ut}function te(Be){return Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function H(Be){return"["+function ut(bt){if(bt.length===0)return[];var Ft=bt.charAt(0),_e=bt.charAt(bt.length-1);if(bt.length>1&&Ft===_e&&(Ft==='"'||Ft==="'"))return['"'+te(bt.substr(1,bt.length-2))+'"'];var ze=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(bt);if(ze)return ut(bt.substr(0,ze.index)).concat(ut(ze[1])).concat(ut(bt.substr(ze.index+ze[0].length)));var Qe=bt.split(".");if(Qe.length===1)return['"'+te(bt)+'"'];for(var lt=[],vt=0;vt<Qe.length;++vt)lt=lt.concat(ut(Qe[vt]));return lt}(Be).join("][")+"]"}var V={DynamicVariable:ge,define:function(Be,ut){return new ge(Be,H(ut+""))},isDynamic:function(Be){return typeof Be=="function"&&!Be._reglType||Be instanceof ge},unbox:function Be(ut,bt){return typeof ut=="function"?new ge(0,ut):typeof ut=="number"||typeof ut=="boolean"?new ge(5,ut):Array.isArray(ut)?new ge(6,ut.map(function(Ft,_e){return Be(Ft,bt+"["+_e+"]")})):ut instanceof ge?ut:void W(!1,"invalid option type in uniform "+bt)},accessor:H},ie={next:typeof requestAnimationFrame=="function"?function(Be){return requestAnimationFrame(Be)}:function(Be){return setTimeout(Be,16)},cancel:typeof cancelAnimationFrame=="function"?function(Be){return cancelAnimationFrame(Be)}:clearTimeout},we=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ke(Be){return typeof Be=="string"?Be.split():(W(Array.isArray(Be),"invalid extension array"),Be)}function oe(Be){return typeof Be=="string"?(W(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Be)):Be}function J(Be){var ut,bt,Ft,_e,ze,Qe=Be||{},lt={},vt=[],wt=[],Lt=typeof window=="undefined"?1:window.devicePixelRatio,Wt=!1,er=function(pr){pr&&W.raise(pr)},tr=function(){};if(typeof Qe=="string"?(W(typeof document!="undefined","selector queries only supported in DOM enviroments"),ut=document.querySelector(Qe),W(ut,"invalid query string for element")):_(Qe)==="object"?typeof(ze=Qe).nodeName=="string"&&typeof ze.appendChild=="function"&&typeof ze.getBoundingClientRect=="function"?ut=Qe:function(pr){return typeof pr.drawArrays=="function"||typeof pr.drawElements=="function"}(Qe)?Ft=(_e=Qe).canvas:(W.constructor(Qe),"gl"in Qe?_e=Qe.gl:"canvas"in Qe?Ft=oe(Qe.canvas):"container"in Qe&&(bt=oe(Qe.container)),"attributes"in Qe&&(lt=Qe.attributes,W.type(lt,"object","invalid context attributes")),"extensions"in Qe&&(vt=ke(Qe.extensions)),"optionalExtensions"in Qe&&(wt=ke(Qe.optionalExtensions)),"onDone"in Qe&&(W.type(Qe.onDone,"function","invalid or missing onDone callback"),er=Qe.onDone),"profile"in Qe&&(Wt=!!Qe.profile),"pixelRatio"in Qe&&(Lt=+Qe.pixelRatio,W(Lt>0,"invalid pixel ratio"))):W.raise("invalid arguments to regl"),ut&&(ut.nodeName.toLowerCase()==="canvas"?Ft=ut:bt=ut),!_e){if(!Ft){W(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var ar=function(pr,Ur,Gr){var $r,Kr=document.createElement("canvas");function jn(){var Cn=window.innerWidth,qn=window.innerHeight;if(pr!==document.body){var Qr=pr.getBoundingClientRect();Cn=Qr.right-Qr.left,qn=Qr.bottom-Qr.top}Kr.width=Gr*Cn,Kr.height=Gr*qn,O(Kr.style,{width:Cn+"px",height:qn+"px"})}return O(Kr.style,{border:0,margin:0,padding:0,top:0,left:0}),pr.appendChild(Kr),pr===document.body&&(Kr.style.position="absolute",O(pr.style,{margin:0,padding:0})),pr!==document.body&&typeof ResizeObserver=="function"?($r=new ResizeObserver(function(){setTimeout(jn)})).observe(pr):window.addEventListener("resize",jn,!1),jn(),{canvas:Kr,onDestroy:function(){$r?$r.disconnect():window.removeEventListener("resize",jn),pr.removeChild(Kr)}}}(bt||document.body,0,Lt);if(!ar)return null;Ft=ar.canvas,tr=ar.onDestroy}lt.premultipliedAlpha===void 0&&(lt.premultipliedAlpha=!0),_e=function(pr,Ur){function Gr($r){try{return pr.getContext($r,Ur)}catch(Kr){return null}}return Gr("webgl")||Gr("experimental-webgl")||Gr("webgl-experimental")}(Ft,lt)}return _e?{gl:_e,canvas:Ft,container:bt,extensions:vt,optionalExtensions:wt,pixelRatio:Lt,profile:Wt,onDone:er,onDestroy:tr}:(tr(),er("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function ee(Be,ut){for(var bt=Array(Be),Ft=0;Ft<Be;++Ft)bt[Ft]=ut(Ft);return bt}function Y(Be){var ut,bt;return ut=(Be>65535)<<4,ut|=bt=((Be>>>=ut)>255)<<3,ut|=bt=((Be>>>=bt)>15)<<2,(ut|=bt=((Be>>>=bt)>3)<<1)|(Be>>>=bt)>>1}function K(){var Be=ee(8,function(){return[]});function ut(Ft){var _e=function(Qe){for(var lt=16;lt<=268435456;lt*=16)if(Qe<=lt)return lt;return 0}(Ft),ze=Be[Y(_e)>>2];return ze.length>0?ze.pop():new ArrayBuffer(_e)}function bt(Ft){Be[Y(Ft.byteLength)>>2].push(Ft)}return{alloc:ut,free:bt,allocType:function(Ft,_e){var ze=null;switch(Ft){case 5120:ze=new Int8Array(ut(_e),0,_e);break;case 5121:ze=new Uint8Array(ut(_e),0,_e);break;case 5122:ze=new Int16Array(ut(2*_e),0,_e);break;case 5123:ze=new Uint16Array(ut(2*_e),0,_e);break;case 5124:ze=new Int32Array(ut(4*_e),0,_e);break;case 5125:ze=new Uint32Array(ut(4*_e),0,_e);break;case 5126:ze=new Float32Array(ut(4*_e),0,_e);break;default:return null}return ze.length!==_e?ze.subarray(0,_e):ze},freeType:function(Ft){bt(Ft.buffer)}}}var G=K();function ne(Be){return!!Be&&_(Be)==="object"&&Array.isArray(Be.shape)&&Array.isArray(Be.stride)&&typeof Be.offset=="number"&&Be.shape.length===Be.stride.length&&(Array.isArray(Be.data)||x(Be.data))}G.zero=K();var le=function(Be){return Object.keys(Be).map(function(ut){return Be[ut]})},ue={shape:function(Be){for(var ut=[],bt=Be;bt.length;bt=bt[0])ut.push(bt.length);return ut},flatten:function(Be,ut,bt,Ft){var _e=1;if(ut.length)for(var ze=0;ze<ut.length;++ze)_e*=ut[ze];else _e=0;var Qe=Ft||G.allocType(bt,_e);switch(ut.length){case 0:break;case 1:(function(lt,vt,wt){for(var Lt=0;Lt<vt;++Lt)wt[Lt]=lt[Lt]})(Be,ut[0],Qe);break;case 2:(function(lt,vt,wt,Lt){for(var Wt=0,er=0;er<vt;++er)for(var tr=lt[er],ar=0;ar<wt;++ar)Lt[Wt++]=tr[ar]})(Be,ut[0],ut[1],Qe);break;case 3:Q(Be,ut[0],ut[1],ut[2],Qe,0);break;default:(function lt(vt,wt,Lt,Wt,er){for(var tr=1,ar=Lt+1;ar<wt.length;++ar)tr*=wt[ar];var pr=wt[Lt];if(wt.length-Lt==4){var Ur=wt[Lt+1],Gr=wt[Lt+2],$r=wt[Lt+3];for(ar=0;ar<pr;++ar)Q(vt[ar],Ur,Gr,$r,Wt,er),er+=tr}else for(ar=0;ar<pr;++ar)lt(vt[ar],wt,Lt+1,Wt,er),er+=tr})(Be,ut,0,Qe,0)}return Qe}};function Q(Be,ut,bt,Ft,_e,ze){for(var Qe=ze,lt=0;lt<ut;++lt)for(var vt=Be[lt],wt=0;wt<bt;++wt)for(var Lt=vt[wt],Wt=0;Wt<Ft;++Wt)_e[Qe++]=Lt[Wt]}var he={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Se={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},je={dynamic:35048,stream:35040,static:35044},Ae=ue.flatten,Ce=ue.shape,Re=[];function Ee(Be){return 0|he[Object.prototype.toString.call(Be)]}function Le(Be,ut){for(var bt=0;bt<ut.length;++bt)Be[bt]=ut[bt]}function Ke(Be,ut,bt,Ft,_e,ze,Qe){for(var lt=0,vt=0;vt<bt;++vt)for(var wt=0;wt<Ft;++wt)Be[lt++]=ut[_e*vt+ze*wt+Qe]}Re[5120]=1,Re[5122]=2,Re[5124]=4,Re[5121]=1,Re[5123]=2,Re[5125]=4,Re[5126]=4;var et={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ot=new Float32Array(1),dt=new Uint32Array(ot.buffer);function At(Be){for(var ut=G.allocType(5123,Be.length),bt=0;bt<Be.length;++bt)if(isNaN(Be[bt]))ut[bt]=65535;else if(Be[bt]===1/0)ut[bt]=31744;else if(Be[bt]===-1/0)ut[bt]=64512;else{ot[0]=Be[bt];var Ft=dt[0],_e=Ft>>>31<<15,ze=(Ft<<1>>>24)-127,Qe=Ft>>13&1023;if(ze<-24)ut[bt]=_e;else if(ze<-14){var lt=-14-ze;ut[bt]=_e+(Qe+1024>>lt)}else ut[bt]=ze>15?_e+31744:_e+(ze+15<<10)+Qe}return ut}function Tt(Be){return Array.isArray(Be)||x(Be)}var jt=function(Be){return!(Be&Be-1||!Be)},Kt=[9984,9986,9985,9987],Qt=[0,6409,6410,6407,6408],rr={};function or(Be){return"[object "+Be+"]"}rr[6409]=rr[6406]=rr[6402]=1,rr[34041]=rr[6410]=2,rr[6407]=rr[35904]=3,rr[6408]=rr[35906]=4;var Mr=or("HTMLCanvasElement"),cr=or("OffscreenCanvas"),yr=or("CanvasRenderingContext2D"),br=or("ImageBitmap"),Xr=or("HTMLImageElement"),gr=or("HTMLVideoElement"),xr=Object.keys(he).concat([Mr,cr,yr,br,Xr,gr]),dr=[];dr[5121]=1,dr[5126]=4,dr[36193]=2,dr[5123]=2,dr[5125]=4;var Br=[];function Rr(Be){return Array.isArray(Be)&&(Be.length===0||typeof Be[0]=="number")}function pn(Be){return!!Array.isArray(Be)&&!(Be.length===0||!Tt(Be[0]))}function zr(Be){return Object.prototype.toString.call(Be)}function Nr(Be){return zr(Be)===Mr}function Dr(Be){return zr(Be)===cr}function rn(Be){if(!Be)return!1;var ut=zr(Be);return xr.indexOf(ut)>=0||Rr(Be)||pn(Be)||ne(Be)}function Ir(Be){return 0|he[Object.prototype.toString.call(Be)]}function On(Be,ut){return G.allocType(Be.type===36193?5126:Be.type,ut)}function In(Be,ut){Be.type===36193?(Be.data=At(ut),G.freeType(ut)):Be.data=ut}function Dn(Be,ut,bt,Ft,_e,ze){var Qe;if(Qe=Br[Be]!==void 0?Br[Be]:rr[Be]*dr[ut],ze&&(Qe*=6),_e){for(var lt=0,vt=bt;vt>=1;)lt+=Qe*vt*vt,vt/=2;return lt}return Qe*bt*Ft}function Rn(Be,ut,bt,Ft,_e,ze,Qe){var lt={"don't care":4352,"dont care":4352,nice:4354,fast:4353},vt={repeat:10497,clamp:33071,mirror:33648},wt={nearest:9728,linear:9729},Lt=O({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},wt),Wt={none:0,browser:37444},er={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},tr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},ar={};ut.ext_srgb&&(tr.srgb=35904,tr.srgba=35906),ut.oes_texture_float&&(er.float32=er.float=5126),ut.oes_texture_half_float&&(er.float16=er["half float"]=36193),ut.webgl_depth_texture&&(O(tr,{depth:6402,"depth stencil":34041}),O(er,{uint16:5123,uint32:5125,"depth stencil":34042})),ut.webgl_compressed_texture_s3tc&&O(ar,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ut.webgl_compressed_texture_atc&&O(ar,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ut.webgl_compressed_texture_pvrtc&&O(ar,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ut.webgl_compressed_texture_etc1&&(ar["rgb etc1"]=36196);var pr=Array.prototype.slice.call(Be.getParameter(34467));Object.keys(ar).forEach(function(Z){var ae=ar[Z];pr.indexOf(ae)>=0&&(tr[Z]=ae)});var Ur=Object.keys(tr);bt.textureFormats=Ur;var Gr=[];Object.keys(tr).forEach(function(Z){var ae=tr[Z];Gr[ae]=Z});var $r=[];Object.keys(er).forEach(function(Z){var ae=er[Z];$r[ae]=Z});var Kr=[];Object.keys(wt).forEach(function(Z){Kr[wt[Z]]=Z});var jn=[];Object.keys(Lt).forEach(function(Z){var ae=Lt[Z];jn[ae]=Z});var Cn=[];Object.keys(vt).forEach(function(Z){Cn[vt[Z]]=Z});var qn=Ur.reduce(function(Z,ae){var pe=tr[ae];return pe===6409||pe===6406||pe===6409||pe===6410||pe===6402||pe===34041||ut.ext_srgb&&(pe===35904||pe===35906)?Z[pe]=pe:pe===32855||ae.indexOf("rgba")>=0?Z[pe]=6408:Z[pe]=6407,Z},{});function Qr(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function Mn(Z,ae){Z.internalformat=ae.internalformat,Z.format=ae.format,Z.type=ae.type,Z.compressed=ae.compressed,Z.premultiplyAlpha=ae.premultiplyAlpha,Z.flipY=ae.flipY,Z.unpackAlignment=ae.unpackAlignment,Z.colorSpace=ae.colorSpace,Z.width=ae.width,Z.height=ae.height,Z.channels=ae.channels}function ai(Z,ae){if(_(ae)==="object"&&ae){if("premultiplyAlpha"in ae&&(W.type(ae.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Z.premultiplyAlpha=ae.premultiplyAlpha),"flipY"in ae&&(W.type(ae.flipY,"boolean","invalid texture flip"),Z.flipY=ae.flipY),"alignment"in ae&&(W.oneOf(ae.alignment,[1,2,4,8],"invalid texture unpack alignment"),Z.unpackAlignment=ae.alignment),"colorSpace"in ae&&(W.parameter(ae.colorSpace,Wt,"invalid colorSpace"),Z.colorSpace=Wt[ae.colorSpace]),"type"in ae){var pe=ae.type;W(ut.oes_texture_float||!(pe==="float"||pe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),W(ut.oes_texture_half_float||!(pe==="half float"||pe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),W(ut.webgl_depth_texture||!(pe==="uint16"||pe==="uint32"||pe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),W.parameter(pe,er,"invalid texture type"),Z.type=er[pe]}var be=Z.width,De=Z.height,Ue=Z.channels,Me=!1;"shape"in ae?(W(Array.isArray(ae.shape)&&ae.shape.length>=2,"shape must be an array"),be=ae.shape[0],De=ae.shape[1],ae.shape.length===3&&(Ue=ae.shape[2],W(Ue>0&&Ue<=4,"invalid number of channels"),Me=!0),W(be>=0&&be<=bt.maxTextureSize,"invalid width"),W(De>=0&&De<=bt.maxTextureSize,"invalid height")):("radius"in ae&&(be=De=ae.radius,W(be>=0&&be<=bt.maxTextureSize,"invalid radius")),"width"in ae&&(be=ae.width,W(be>=0&&be<=bt.maxTextureSize,"invalid width")),"height"in ae&&(De=ae.height,W(De>=0&&De<=bt.maxTextureSize,"invalid height")),"channels"in ae&&(Ue=ae.channels,W(Ue>0&&Ue<=4,"invalid number of channels"),Me=!0)),Z.width=0|be,Z.height=0|De,Z.channels=0|Ue;var Fe=!1;if("format"in ae){var Ye=ae.format;W(ut.webgl_depth_texture||!(Ye==="depth"||Ye==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),W.parameter(Ye,tr,"invalid texture format");var Ge=Z.internalformat=tr[Ye];Z.format=qn[Ge],Ye in er&&("type"in ae||(Z.type=er[Ye])),Ye in ar&&(Z.compressed=!0),Fe=!0}!Me&&Fe?Z.channels=rr[Z.format]:Me&&!Fe?Z.channels!==Qt[Z.format]&&(Z.format=Z.internalformat=Qt[Z.channels]):Fe&&Me&&W(Z.channels===rr[Z.format],"number of channels inconsistent with specified format")}}function Sn(Z){Be.pixelStorei(37440,Z.flipY),Be.pixelStorei(37441,Z.premultiplyAlpha),Be.pixelStorei(37443,Z.colorSpace),Be.pixelStorei(3317,Z.unpackAlignment)}function si(){Qr.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Jr(Z,ae){var pe=null;if(rn(ae)?pe=ae:ae&&(W.type(ae,"object","invalid pixel data type"),ai(Z,ae),"x"in ae&&(Z.xOffset=0|ae.x),"y"in ae&&(Z.yOffset=0|ae.y),rn(ae.data)&&(pe=ae.data)),W(!Z.compressed||pe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ae.copy){W(!pe,"can not specify copy and data field for the same texture");var be=_e.viewportWidth,De=_e.viewportHeight;Z.width=Z.width||be-Z.xOffset,Z.height=Z.height||De-Z.yOffset,Z.needsCopy=!0,W(Z.xOffset>=0&&Z.xOffset<be&&Z.yOffset>=0&&Z.yOffset<De&&Z.width>0&&Z.width<=be&&Z.height>0&&Z.height<=De,"copy texture read out of bounds")}else if(pe){if(x(pe))Z.channels=Z.channels||4,Z.data=pe,"type"in ae||Z.type!==5121||(Z.type=Ir(pe));else if(Rr(pe))Z.channels=Z.channels||4,function(qe,at){var ht=at.length;switch(qe.type){case 5121:case 5123:case 5125:case 5126:var Mt=G.allocType(qe.type,ht);Mt.set(at),qe.data=Mt;break;case 36193:qe.data=At(at);break;default:W.raise("unsupported texture type, must specify a typed array")}}(Z,pe),Z.alignment=1,Z.needsFree=!0;else if(ne(pe)){var Ue=pe.data;Array.isArray(Ue)||Z.type!==5121||(Z.type=Ir(Ue));var Me,Fe,Ye,Ge,Xe,Je,tt=pe.shape,Ve=pe.stride;tt.length===3?(Ye=tt[2],Je=Ve[2]):(W(tt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Ye=1,Je=1),Me=tt[0],Fe=tt[1],Ge=Ve[0],Xe=Ve[1],Z.alignment=1,Z.width=Me,Z.height=Fe,Z.channels=Ye,Z.format=Z.internalformat=Qt[Ye],Z.needsFree=!0,function(qe,at,ht,Mt,zt,Ut){for(var Xt=qe.width,fr=qe.height,Or=qe.channels,kr=On(qe,Xt*fr*Or),mr=0,sr=0;sr<fr;++sr)for(var an=0;an<Xt;++an)for(var sn=0;sn<Or;++sn)kr[mr++]=at[ht*an+Mt*sr+zt*sn+Ut];In(qe,kr)}(Z,Ue,Ge,Xe,Je,pe.offset)}else if(Nr(pe)||Dr(pe)||zr(pe)===yr)Nr(pe)||Dr(pe)?Z.element=pe:Z.element=pe.canvas,Z.width=Z.element.width,Z.height=Z.element.height,Z.channels=4;else if(function(qe){return zr(qe)===br}(pe))Z.element=pe,Z.width=pe.width,Z.height=pe.height,Z.channels=4;else if(function(qe){return zr(qe)===Xr}(pe))Z.element=pe,Z.width=pe.naturalWidth,Z.height=pe.naturalHeight,Z.channels=4;else if(function(qe){return zr(qe)===gr}(pe))Z.element=pe,Z.width=pe.videoWidth,Z.height=pe.videoHeight,Z.channels=4;else if(pn(pe)){var it=Z.width||pe[0].length,pt=Z.height||pe.length,Et=Z.channels;Et=Tt(pe[0][0])?Et||pe[0][0].length:Et||1;for(var mt=ue.shape(pe),xt=1,Ot=0;Ot<mt.length;++Ot)xt*=mt[Ot];var yt=On(Z,xt);ue.flatten(pe,mt,"",yt),In(Z,yt),Z.alignment=1,Z.width=it,Z.height=pt,Z.channels=Et,Z.format=Z.internalformat=Qt[Et],Z.needsFree=!0}}else Z.width=Z.width||1,Z.height=Z.height||1,Z.channels=Z.channels||4;Z.type===5126?W(bt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Z.type===36193&&W(bt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Mo(Z,ae,pe){var be=Z.element,De=Z.data,Ue=Z.internalformat,Me=Z.format,Fe=Z.type,Ye=Z.width,Ge=Z.height;Sn(Z),be?Be.texImage2D(ae,pe,Me,Me,Fe,be):Z.compressed?Be.compressedTexImage2D(ae,pe,Ue,Ye,Ge,0,De):Z.needsCopy?(Ft(),Be.copyTexImage2D(ae,pe,Me,Z.xOffset,Z.yOffset,Ye,Ge,0)):Be.texImage2D(ae,pe,Me,Ye,Ge,0,Me,Fe,De||null)}function Gi(Z,ae,pe,be,De){var Ue=Z.element,Me=Z.data,Fe=Z.internalformat,Ye=Z.format,Ge=Z.type,Xe=Z.width,Je=Z.height;Sn(Z),Ue?Be.texSubImage2D(ae,De,pe,be,Ye,Ge,Ue):Z.compressed?Be.compressedTexSubImage2D(ae,De,pe,be,Fe,Xe,Je,Me):Z.needsCopy?(Ft(),Be.copyTexSubImage2D(ae,De,pe,be,Z.xOffset,Z.yOffset,Xe,Je)):Be.texSubImage2D(ae,De,pe,be,Xe,Je,Ye,Ge,Me)}var $i=[];function nn(){return $i.pop()||new si}function pi(Z){Z.needsFree&&G.freeType(Z.data),si.call(Z),$i.push(Z)}function Qi(){Qr.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ki(Z,ae,pe){var be=Z.images[0]=nn();Z.mipmask=1,be.width=Z.width=ae,be.height=Z.height=pe,be.channels=Z.channels=4}function Gn(Z,ae){var pe=null;if(rn(ae))Mn(pe=Z.images[0]=nn(),Z),Jr(pe,ae),Z.mipmask=1;else if(ai(Z,ae),Array.isArray(ae.mipmap))for(var be=ae.mipmap,De=0;De<be.length;++De)Mn(pe=Z.images[De]=nn(),Z),pe.width>>=De,pe.height>>=De,Jr(pe,be[De]),Z.mipmask|=1<<De;else Mn(pe=Z.images[0]=nn(),Z),Jr(pe,ae),Z.mipmask=1;Mn(Z,Z.images[0]),!Z.compressed||Z.internalformat!==33776&&Z.internalformat!==33777&&Z.internalformat!==33778&&Z.internalformat!==33779||W(Z.width%4==0&&Z.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Fi(Z,ae){for(var pe=Z.images,be=0;be<pe.length;++be){if(!pe[be])return;Mo(pe[be],ae,be)}}var Ni=[];function fi(){var Z=Ni.pop()||new Qi;Qr.call(Z),Z.mipmask=0;for(var ae=0;ae<16;++ae)Z.images[ae]=null;return Z}function zi(Z){for(var ae=Z.images,pe=0;pe<ae.length;++pe)ae[pe]&&pi(ae[pe]),ae[pe]=null;Ni.push(Z)}function Ai(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Ji(Z,ae){if("min"in ae){var pe=ae.min;W.parameter(pe,Lt),Z.minFilter=Lt[pe],Kt.indexOf(Z.minFilter)>=0&&!("faces"in ae)&&(Z.genMipmaps=!0)}if("mag"in ae){var be=ae.mag;W.parameter(be,wt),Z.magFilter=wt[be]}var De=Z.wrapS,Ue=Z.wrapT;if("wrap"in ae){var Me=ae.wrap;typeof Me=="string"?(W.parameter(Me,vt),De=Ue=vt[Me]):Array.isArray(Me)&&(W.parameter(Me[0],vt),W.parameter(Me[1],vt),De=vt[Me[0]],Ue=vt[Me[1]])}else{if("wrapS"in ae){var Fe=ae.wrapS;W.parameter(Fe,vt),De=vt[Fe]}if("wrapT"in ae){var Ye=ae.wrapT;W.parameter(Ye,vt),Ue=vt[Ye]}}if(Z.wrapS=De,Z.wrapT=Ue,"anisotropic"in ae){var Ge=ae.anisotropic;W(typeof Ge=="number"&&Ge>=1&&Ge<=bt.maxAnisotropic,"aniso samples must be between 1 and "),Z.anisotropic=ae.anisotropic}if("mipmap"in ae){var Xe=!1;switch(_(ae.mipmap)){case"string":W.parameter(ae.mipmap,lt,"invalid mipmap hint"),Z.mipmapHint=lt[ae.mipmap],Z.genMipmaps=!0,Xe=!0;break;case"boolean":Xe=Z.genMipmaps=ae.mipmap;break;case"object":W(Array.isArray(ae.mipmap),"invalid mipmap type"),Z.genMipmaps=!1,Xe=!0;break;default:W.raise("invalid mipmap type")}Xe&&!("min"in ae)&&(Z.minFilter=9984)}}function ao(Z,ae){Be.texParameteri(ae,10241,Z.minFilter),Be.texParameteri(ae,10240,Z.magFilter),Be.texParameteri(ae,10242,Z.wrapS),Be.texParameteri(ae,10243,Z.wrapT),ut.ext_texture_filter_anisotropic&&Be.texParameteri(ae,34046,Z.anisotropic),Z.genMipmaps&&(Be.hint(33170,Z.mipmapHint),Be.generateMipmap(ae))}var Ui=0,Ci={},_t=bt.maxTextureUnits,$e=Array(_t).map(function(){return null});function St(Z){Qr.call(this),this.mipmask=0,this.internalformat=6408,this.id=Ui++,this.refCount=1,this.target=Z,this.texture=Be.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ai,Qe.profile&&(this.stats={size:0})}function w(Z){Be.activeTexture(33984),Be.bindTexture(Z.target,Z.texture)}function R(){var Z=$e[0];Z?Be.bindTexture(Z.target,Z.texture):Be.bindTexture(3553,null)}function fe(Z){var ae=Z.texture;W(ae,"must not double destroy texture");var pe=Z.unit,be=Z.target;pe>=0&&(Be.activeTexture(33984+pe),Be.bindTexture(be,null),$e[pe]=null),Be.deleteTexture(ae),Z.texture=null,Z.params=null,Z.pixels=null,Z.refCount=0,delete Ci[Z.id],ze.textureCount--}return O(St.prototype,{bind:function(){this.bindCount+=1;var Z=this.unit;if(Z<0){for(var ae=0;ae<_t;++ae){var pe=$e[ae];if(pe){if(pe.bindCount>0)continue;pe.unit=-1}$e[ae]=this,Z=ae;break}Z>=_t&&W.raise("insufficient number of texture units"),Qe.profile&&ze.maxTextureUnits<Z+1&&(ze.maxTextureUnits=Z+1),this.unit=Z,Be.activeTexture(33984+Z),Be.bindTexture(this.target,this.texture)}return Z},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&fe(this)}}),Qe.profile&&(ze.getTotalTextureSize=function(){var Z=0;return Object.keys(Ci).forEach(function(ae){Z+=Ci[ae].stats.size}),Z}),{create2D:function(Z,ae){var pe=new St(3553);function be(De,Ue){var Me=pe.texInfo;Ai.call(Me);var Fe=fi();return typeof De=="number"?ki(Fe,0|De,typeof Ue=="number"?0|Ue:0|De):De?(W.type(De,"object","invalid arguments to regl.texture"),Ji(Me,De),Gn(Fe,De)):ki(Fe,1,1),Me.genMipmaps&&(Fe.mipmask=(Fe.width<<1)-1),pe.mipmask=Fe.mipmask,Mn(pe,Fe),W.texture2D(Me,Fe,bt),pe.internalformat=Fe.internalformat,be.width=Fe.width,be.height=Fe.height,w(pe),Fi(Fe,3553),ao(Me,3553),R(),zi(Fe),Qe.profile&&(pe.stats.size=Dn(pe.internalformat,pe.type,Fe.width,Fe.height,Me.genMipmaps,!1)),be.format=Gr[pe.internalformat],be.type=$r[pe.type],be.mag=Kr[Me.magFilter],be.min=jn[Me.minFilter],be.wrapS=Cn[Me.wrapS],be.wrapT=Cn[Me.wrapT],be}return Ci[pe.id]=pe,ze.textureCount++,be(Z,ae),be.subimage=function(De,Ue,Me,Fe){W(!!De,"must specify image data");var Ye=0|Ue,Ge=0|Me,Xe=0|Fe,Je=nn();return Mn(Je,pe),Je.width=0,Je.height=0,Jr(Je,De),Je.width=Je.width||(pe.width>>Xe)-Ye,Je.height=Je.height||(pe.height>>Xe)-Ge,W(pe.type===Je.type&&pe.format===Je.format&&pe.internalformat===Je.internalformat,"incompatible format for texture.subimage"),W(Ye>=0&&Ge>=0&&Ye+Je.width<=pe.width&&Ge+Je.height<=pe.height,"texture.subimage write out of bounds"),W(pe.mipmask&1<<Xe,"missing mipmap data"),W(Je.data||Je.element||Je.needsCopy,"missing image data"),w(pe),Gi(Je,3553,Ye,Ge,Xe),R(),pi(Je),be},be.resize=function(De,Ue){var Me=0|De,Fe=0|Ue||Me;if(Me===pe.width&&Fe===pe.height)return be;be.width=pe.width=Me,be.height=pe.height=Fe,w(pe);for(var Ye=0;pe.mipmask>>Ye;++Ye){var Ge=Me>>Ye,Xe=Fe>>Ye;if(!Ge||!Xe)break;Be.texImage2D(3553,Ye,pe.format,Ge,Xe,0,pe.format,pe.type,null)}return R(),Qe.profile&&(pe.stats.size=Dn(pe.internalformat,pe.type,Me,Fe,!1,!1)),be},be._reglType="texture2d",be._texture=pe,Qe.profile&&(be.stats=pe.stats),be.destroy=function(){pe.decRef()},be},createCube:function(Z,ae,pe,be,De,Ue){var Me=new St(34067);Ci[Me.id]=Me,ze.cubeCount++;var Fe=new Array(6);function Ye(Ge,Xe,Je,tt,Ve,it){var pt,Et=Me.texInfo;for(Ai.call(Et),pt=0;pt<6;++pt)Fe[pt]=fi();if(typeof Ge!="number"&&Ge)if(_(Ge)==="object")if(Xe)Gn(Fe[0],Ge),Gn(Fe[1],Xe),Gn(Fe[2],Je),Gn(Fe[3],tt),Gn(Fe[4],Ve),Gn(Fe[5],it);else if(Ji(Et,Ge),ai(Me,Ge),"faces"in Ge){var mt=Ge.faces;for(W(Array.isArray(mt)&&mt.length===6,"cube faces must be a length 6 array"),pt=0;pt<6;++pt)W(_(mt[pt])==="object"&&!!mt[pt],"invalid input for cube map face"),Mn(Fe[pt],Me),Gn(Fe[pt],mt[pt])}else for(pt=0;pt<6;++pt)Gn(Fe[pt],Ge);else W.raise("invalid arguments to cube map");else{var xt=0|Ge||1;for(pt=0;pt<6;++pt)ki(Fe[pt],xt,xt)}for(Mn(Me,Fe[0]),bt.npotTextureCube||W(jt(Me.width)&&jt(Me.height),"your browser does not support non power or two texture dimensions"),Et.genMipmaps?Me.mipmask=(Fe[0].width<<1)-1:Me.mipmask=Fe[0].mipmask,W.textureCube(Me,Et,Fe,bt),Me.internalformat=Fe[0].internalformat,Ye.width=Fe[0].width,Ye.height=Fe[0].height,w(Me),pt=0;pt<6;++pt)Fi(Fe[pt],34069+pt);for(ao(Et,34067),R(),Qe.profile&&(Me.stats.size=Dn(Me.internalformat,Me.type,Ye.width,Ye.height,Et.genMipmaps,!0)),Ye.format=Gr[Me.internalformat],Ye.type=$r[Me.type],Ye.mag=Kr[Et.magFilter],Ye.min=jn[Et.minFilter],Ye.wrapS=Cn[Et.wrapS],Ye.wrapT=Cn[Et.wrapT],pt=0;pt<6;++pt)zi(Fe[pt]);return Ye}return Ye(Z,ae,pe,be,De,Ue),Ye.subimage=function(Ge,Xe,Je,tt,Ve){W(!!Xe,"must specify image data"),W(typeof Ge=="number"&&Ge===(0|Ge)&&Ge>=0&&Ge<6,"invalid face");var it=0|Je,pt=0|tt,Et=0|Ve,mt=nn();return Mn(mt,Me),mt.width=0,mt.height=0,Jr(mt,Xe),mt.width=mt.width||(Me.width>>Et)-it,mt.height=mt.height||(Me.height>>Et)-pt,W(Me.type===mt.type&&Me.format===mt.format&&Me.internalformat===mt.internalformat,"incompatible format for texture.subimage"),W(it>=0&&pt>=0&&it+mt.width<=Me.width&&pt+mt.height<=Me.height,"texture.subimage write out of bounds"),W(Me.mipmask&1<<Et,"missing mipmap data"),W(mt.data||mt.element||mt.needsCopy,"missing image data"),w(Me),Gi(mt,34069+Ge,it,pt,Et),R(),pi(mt),Ye},Ye.resize=function(Ge){var Xe=0|Ge;if(Xe!==Me.width){Ye.width=Me.width=Xe,Ye.height=Me.height=Xe,w(Me);for(var Je=0;Je<6;++Je)for(var tt=0;Me.mipmask>>tt;++tt)Be.texImage2D(34069+Je,tt,Me.format,Xe>>tt,Xe>>tt,0,Me.format,Me.type,null);return R(),Qe.profile&&(Me.stats.size=Dn(Me.internalformat,Me.type,Ye.width,Ye.height,!1,!0)),Ye}},Ye._reglType="textureCube",Ye._texture=Me,Qe.profile&&(Ye.stats=Me.stats),Ye.destroy=function(){Me.decRef()},Ye},clear:function(){for(var Z=0;Z<_t;++Z)Be.activeTexture(33984+Z),Be.bindTexture(3553,null),$e[Z]=null;le(Ci).forEach(fe),ze.cubeCount=0,ze.textureCount=0},getTexture:function(Z){return null},restore:function(){for(var Z=0;Z<_t;++Z){var ae=$e[Z];ae&&(ae.bindCount=0,ae.unit=-1,$e[Z]=null)}le(Ci).forEach(function(pe){pe.texture=Be.createTexture(),Be.bindTexture(pe.target,pe.texture);for(var be=0;be<32;++be)if((pe.mipmask&1<<be)!=0)if(pe.target===3553)Be.texImage2D(3553,be,pe.internalformat,pe.width>>be,pe.height>>be,0,pe.internalformat,pe.type,null);else for(var De=0;De<6;++De)Be.texImage2D(34069+De,be,pe.internalformat,pe.width>>be,pe.height>>be,0,pe.internalformat,pe.type,null);ao(pe.texInfo,pe.target)})},refresh:function(){for(var Z=0;Z<_t;++Z){var ae=$e[Z];ae&&(ae.bindCount=0,ae.unit=-1,$e[Z]=null),Be.activeTexture(33984+Z),Be.bindTexture(3553,null),Be.bindTexture(34067,null)}}}}Br[32854]=2,Br[32855]=2,Br[36194]=2,Br[34041]=4,Br[33776]=.5,Br[33777]=.5,Br[33778]=1,Br[33779]=1,Br[35986]=.5,Br[35987]=1,Br[34798]=1,Br[35840]=.5,Br[35841]=.25,Br[35842]=.5,Br[35843]=.25,Br[36196]=.5;var gn=[];function Er(Be,ut,bt){return gn[Be]*ut*bt}gn[32854]=2,gn[32855]=2,gn[36194]=2,gn[33189]=2,gn[36168]=1,gn[34041]=4,gn[35907]=4,gn[34836]=16,gn[34842]=8,gn[34843]=6;var ln=[6407,6408],yn=[];yn[6408]=4,yn[6407]=3;var mn=[];mn[5121]=1,mn[5126]=4,mn[36193]=2;var Qn=[32854,32855,36194,35907,34842,34843,34836],Un={};function ri(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Ei(Be,ut,bt,Ft,_e,ze,Qe){function lt(vt){var wt;ut.next===null?(W(_e.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),wt=5121):(W(ut.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),wt=ut.next.colorAttachments[0].texture._texture.type,ze.oes_texture_float?(W(wt===5121||wt===5126,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),wt===5126&&W(Qe.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):W(wt===5121,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Lt=0,Wt=0,er=Ft.framebufferWidth,tr=Ft.framebufferHeight,ar=null;x(vt)?ar=vt:vt&&(W.type(vt,"object","invalid arguments to regl.read()"),Lt=0|vt.x,Wt=0|vt.y,W(Lt>=0&&Lt<Ft.framebufferWidth,"invalid x offset for regl.read"),W(Wt>=0&&Wt<Ft.framebufferHeight,"invalid y offset for regl.read"),er=0|(vt.width||Ft.framebufferWidth-Lt),tr=0|(vt.height||Ft.framebufferHeight-Wt),ar=vt.data||null),ar&&(wt===5121?W(ar instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):wt===5126&&W(ar instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),W(er>0&&er+Lt<=Ft.framebufferWidth,"invalid width for read pixels"),W(tr>0&&tr+Wt<=Ft.framebufferHeight,"invalid height for read pixels"),bt();var pr=er*tr*4;return ar||(wt===5121?ar=new Uint8Array(pr):wt===5126&&(ar=ar||new Float32Array(pr))),W.isTypedArray(ar,"data buffer for regl.read() must be a typedarray"),W(ar.byteLength>=pr,"data buffer for regl.read() too small"),Be.pixelStorei(3333,4),Be.readPixels(Lt,Wt,er,tr,6408,wt,ar),ar}return function(vt){return vt&&"framebuffer"in vt?function(wt){var Lt;return ut.setFBO({framebuffer:wt.framebuffer},function(){Lt=lt(wt)}),Lt}(vt):lt(vt)}}function ni(Be){return Array.prototype.slice.call(Be)}function Bn(Be){return ni(Be).join("")}Un[36053]="complete",Un[36054]="incomplete attachment",Un[36057]="incomplete dimensions",Un[36055]="incomplete, missing attachment",Un[36061]="unsupported";var wi="xyzw".split(""),Oi="profile",Wn="framebuffer",ii="vert",Jn="frag",hi="elements",Vn="primitive",oi="count",di="offset",_i="instances",Xn="vao",Yn=Wn+"Width",Mi=Wn+"Height",Bi=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],Hn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},io=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ci={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},li={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},oo={frag:35632,vert:35633},Ki={cw:2304,ccw:2305};function Zi(Be){return Array.isArray(Be)||x(Be)||ne(Be)}function go(Be){return Be.sort(function(ut,bt){return ut==="viewport"?-1:bt==="viewport"?1:ut<bt?-1:1})}function nr(Be,ut,bt,Ft){this.thisDep=Be,this.contextDep=ut,this.propDep=bt,this.append=Ft}function We(Be){return Be&&!(Be.thisDep||Be.contextDep||Be.propDep)}function Ne(Be){return new nr(!1,!1,!1,Be)}function He(Be,ut){var bt=Be.type;if(bt===0){var Ft=Be.data.length;return new nr(!0,Ft>=1,Ft>=2,ut)}if(bt===4){var _e=Be.data;return new nr(_e.thisDep,_e.contextDep,_e.propDep,ut)}if(bt===5)return new nr(!1,!1,!1,ut);if(bt===6){for(var ze=!1,Qe=!1,lt=!1,vt=0;vt<Be.data.length;++vt){var wt=Be.data[vt];if(wt.type===1)lt=!0;else if(wt.type===2)Qe=!0;else if(wt.type===3)ze=!0;else if(wt.type===0){ze=!0;var Lt=wt.data;Lt>=1&&(Qe=!0),Lt>=2&&(lt=!0)}else wt.type===4&&(ze=ze||wt.data.thisDep,Qe=Qe||wt.data.contextDep,lt=lt||wt.data.propDep)}return new nr(ze,Qe,lt,ut)}return new nr(bt===3,bt===2,bt===1,ut)}var ft=new nr(!1,!1,!1,function(){});function Ct(Be,ut,bt,Ft,_e,ze,Qe,lt,vt,wt,Lt,Wt,er,tr,ar){var pr=wt.Record,Ur={add:32774,subtract:32778,"reverse subtract":32779};bt.ext_blend_minmax&&(Ur.min=32775,Ur.max=32776);var Gr=bt.angle_instanced_arrays,$r=bt.webgl_draw_buffers,Kr={dirty:!0,profile:ar.profile},jn={},Cn=[],qn={},Qr={};function Mn(_t){return _t.replace(".","_")}function ai(_t,$e,St){var w=Mn(_t);Cn.push(_t),jn[w]=Kr[w]=!!St,qn[w]=$e}function Sn(_t,$e,St){var w=Mn(_t);Cn.push(_t),Array.isArray(St)?(Kr[w]=St.slice(),jn[w]=St.slice()):Kr[w]=jn[w]=St,Qr[w]=$e}ai("dither",3024),ai("blend.enable",3042),Sn("blend.color","blendColor",[0,0,0,0]),Sn("blend.equation","blendEquationSeparate",[32774,32774]),Sn("blend.func","blendFuncSeparate",[1,0,1,0]),ai("depth.enable",2929,!0),Sn("depth.func","depthFunc",513),Sn("depth.range","depthRange",[0,1]),Sn("depth.mask","depthMask",!0),Sn("colorMask","colorMask",[!0,!0,!0,!0]),ai("cull.enable",2884),Sn("cull.face","cullFace",1029),Sn("frontFace","frontFace",2305),Sn("lineWidth","lineWidth",1),ai("polygonOffset.enable",32823),Sn("polygonOffset.offset","polygonOffset",[0,0]),ai("sample.alpha",32926),ai("sample.enable",32928),Sn("sample.coverage","sampleCoverage",[1,!1]),ai("stencil.enable",2960),Sn("stencil.mask","stencilMask",-1),Sn("stencil.func","stencilFunc",[519,0,-1]),Sn("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Sn("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),ai("scissor.enable",3089),Sn("scissor.box","scissor",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]),Sn("viewport","viewport",[0,0,Be.drawingBufferWidth,Be.drawingBufferHeight]);var si={gl:Be,context:er,strings:ut,next:jn,current:Kr,draw:Wt,elements:ze,buffer:_e,shader:Lt,attributes:wt.state,vao:wt,uniforms:vt,framebuffer:lt,extensions:bt,timer:tr,isBufferArgs:Zi},Jr={primTypes:et,compareFuncs:ci,blendFuncs:Hn,blendEquations:Ur,stencilOps:li,glTypes:Se,orientationType:Ki};W.optional(function(){si.isArrayLike=Tt}),$r&&(Jr.backBuffer=[1029],Jr.drawBuffer=ee(Ft.maxDrawbuffers,function(_t){return _t===0?[0]:ee(_t,function($e){return 36064+$e})}));var Mo=0;function Gi(){var _t=function(){var be=0,De=[],Ue=[];function Me(){var Xe=[],Je=[];return O(function(){Xe.push.apply(Xe,ni(arguments))},{def:function(){var tt="v"+be++;return Je.push(tt),arguments.length>0&&(Xe.push(tt,"="),Xe.push.apply(Xe,ni(arguments)),Xe.push(";")),tt},toString:function(){return Bn([Je.length>0?"var "+Je.join(",")+";":"",Bn(Xe)])}})}function Fe(){var Xe=Me(),Je=Me(),tt=Xe.toString,Ve=Je.toString;function it(pt,Et){Je(pt,Et,"=",Xe.def(pt,Et),";")}return O(function(){Xe.apply(Xe,ni(arguments))},{def:Xe.def,entry:Xe,exit:Je,save:it,set:function(pt,Et,mt){it(pt,Et),Xe(pt,Et,"=",mt,";")},toString:function(){return tt()+Ve()}})}var Ye=Me(),Ge={};return{global:Ye,link:function(Xe){for(var Je=0;Je<Ue.length;++Je)if(Ue[Je]===Xe)return De[Je];var tt="g"+be++;return De.push(tt),Ue.push(Xe),tt},block:Me,proc:function(Xe,Je){var tt=[];function Ve(){var mt="a"+tt.length;return tt.push(mt),mt}Je=Je||0;for(var it=0;it<Je;++it)Ve();var pt=Fe(),Et=pt.toString;return Ge[Xe]=O(pt,{arg:Ve,toString:function(){return Bn(["function(",tt.join(),"){",Et(),"}"])}})},scope:Fe,cond:function(){var Xe=Bn(arguments),Je=Fe(),tt=Fe(),Ve=Je.toString,it=tt.toString;return O(Je,{then:function(){return Je.apply(Je,ni(arguments)),this},else:function(){return tt.apply(tt,ni(arguments)),this},toString:function(){var pt=it();return pt&&(pt="else{"+pt+"}"),Bn(["if(",Xe,"){",Ve(),"}",pt])}})},compile:function(){var Xe=['"use strict";',Ye,"return {"];Object.keys(Ge).forEach(function(tt){Xe.push('"',tt,'":',Ge[tt].toString(),",")}),Xe.push("}");var Je=Bn(Xe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,De.concat(Je)).apply(null,Ue)}}}(),$e=_t.link,St=_t.global;_t.id=Mo++,_t.batchId="0";var w=$e(si),R=_t.shared={props:"a0"};Object.keys(si).forEach(function(be){R[be]=St.def(w,".",be)}),W.optional(function(){_t.CHECK=$e(W),_t.commandStr=W.guessCommand(),_t.command=$e(_t.commandStr),_t.assert=function(be,De,Ue){be("if(!(",De,"))",this.CHECK,".commandRaise(",$e(Ue),",",this.command,");")},Jr.invalidBlendCombinations=io});var fe=_t.next={},Z=_t.current={};Object.keys(Qr).forEach(function(be){Array.isArray(Kr[be])&&(fe[be]=St.def(R.next,".",be),Z[be]=St.def(R.current,".",be))});var ae=_t.constants={};Object.keys(Jr).forEach(function(be){ae[be]=St.def(JSON.stringify(Jr[be]))}),_t.invoke=function(be,De){switch(De.type){case 0:var Ue=["this",R.context,R.props,_t.batchId];return be.def($e(De.data),".call(",Ue.slice(0,Math.max(De.data.length+1,4)),")");case 1:return be.def(R.props,De.data);case 2:return be.def(R.context,De.data);case 3:return be.def("this",De.data);case 4:return De.data.append(_t,be),De.data.ref;case 5:return De.data.toString();case 6:return De.data.map(function(Me){return _t.invoke(be,Me)})}},_t.attribCache={};var pe={};return _t.scopeAttrib=function(be){var De=ut.id(be);if(De in pe)return pe[De];var Ue=wt.scope[De];return Ue||(Ue=wt.scope[De]=new pr),pe[De]=$e(Ue)},_t}function $i(_t,$e,St,w,R){var fe=_t.static,Z=_t.dynamic;W.optional(function(){var Ve=[Wn,ii,Jn,hi,Vn,di,oi,_i,Oi,Xn].concat(Cn);function it(pt){Object.keys(pt).forEach(function(Et){W.command(Ve.indexOf(Et)>=0,'unknown parameter "'+Et+'"',R.commandStr)})}it(fe),it(Z)});var ae=function(Ve,it){var pt=Ve.static;if(typeof pt[Jn]=="string"&&typeof pt[ii]=="string"){if(Object.keys(it.dynamic).length>0)return null;var Et=it.static,mt=Object.keys(Et);if(mt.length>0&&typeof Et[mt[0]]=="number"){for(var xt=[],Ot=0;Ot<mt.length;++Ot)W(typeof Et[mt[Ot]]=="number","must specify all vertex attribute locations when using vaos"),xt.push([0|Et[mt[Ot]],mt[Ot]]);return xt}}return null}(_t,$e),pe=function(Ve,it){var pt=Ve.static,Et=Ve.dynamic;if(Wn in pt){var mt=pt[Wn];return mt?(mt=lt.getFramebuffer(mt),W.command(mt,"invalid framebuffer object"),Ne(function(Ot,yt){var qe=Ot.link(mt),at=Ot.shared;yt.set(at.framebuffer,".next",qe);var ht=at.context;return yt.set(ht,"."+Yn,qe+".width"),yt.set(ht,"."+Mi,qe+".height"),qe})):Ne(function(Ot,yt){var qe=Ot.shared;yt.set(qe.framebuffer,".next","null");var at=qe.context;return yt.set(at,"."+Yn,at+".drawingBufferWidth"),yt.set(at,"."+Mi,at+".drawingBufferHeight"),"null"})}if(Wn in Et){var xt=Et[Wn];return He(xt,function(Ot,yt){var qe=Ot.invoke(yt,xt),at=Ot.shared,ht=at.framebuffer,Mt=yt.def(ht,".getFramebuffer(",qe,")");W.optional(function(){Ot.assert(yt,"!"+qe+"||"+Mt,"invalid framebuffer object")}),yt.set(ht,".next",Mt);var zt=at.context;return yt.set(zt,"."+Yn,Mt+"?"+Mt+".width:"+zt+".drawingBufferWidth"),yt.set(zt,"."+Mi,Mt+"?"+Mt+".height:"+zt+".drawingBufferHeight"),Mt})}return null}(_t),be=function(Ve,it,pt){var Et=Ve.static,mt=Ve.dynamic;function xt(qe){if(qe in Et){var at=Et[qe];W.commandType(at,"object","invalid "+qe,pt.commandStr);var ht,Mt,zt=!0,Ut=0|at.x,Xt=0|at.y;return"width"in at?(ht=0|at.width,W.command(ht>=0,"invalid "+qe,pt.commandStr)):zt=!1,"height"in at?(Mt=0|at.height,W.command(Mt>=0,"invalid "+qe,pt.commandStr)):zt=!1,new nr(!zt&&it&&it.thisDep,!zt&&it&&it.contextDep,!zt&&it&&it.propDep,function(kr,mr){var sr=kr.shared.context,an=ht;"width"in at||(an=mr.def(sr,".",Yn,"-",Ut));var sn=Mt;return"height"in at||(sn=mr.def(sr,".",Mi,"-",Xt)),[Ut,Xt,an,sn]})}if(qe in mt){var fr=mt[qe],Or=He(fr,function(kr,mr){var sr=kr.invoke(mr,fr);W.optional(function(){kr.assert(mr,sr+"&&typeof "+sr+'==="object"',"invalid "+qe)});var an=kr.shared.context,sn=mr.def(sr,".x|0"),Ti=mr.def(sr,".y|0"),Vi=mr.def('"width" in ',sr,"?",sr,".width|0:","(",an,".",Yn,"-",sn,")"),lo=mr.def('"height" in ',sr,"?",sr,".height|0:","(",an,".",Mi,"-",Ti,")");return W.optional(function(){kr.assert(mr,Vi+">=0&&"+lo+">=0","invalid "+qe)}),[sn,Ti,Vi,lo]});return it&&(Or.thisDep=Or.thisDep||it.thisDep,Or.contextDep=Or.contextDep||it.contextDep,Or.propDep=Or.propDep||it.propDep),Or}return it?new nr(it.thisDep,it.contextDep,it.propDep,function(kr,mr){var sr=kr.shared.context;return[0,0,mr.def(sr,".",Yn),mr.def(sr,".",Mi)]}):null}var Ot=xt("viewport");if(Ot){var yt=Ot;Ot=new nr(Ot.thisDep,Ot.contextDep,Ot.propDep,function(qe,at){var ht=yt.append(qe,at),Mt=qe.shared.context;return at.set(Mt,".viewportWidth",ht[2]),at.set(Mt,".viewportHeight",ht[3]),ht})}return{viewport:Ot,scissor_box:xt("scissor.box")}}(_t,pe,R),De=function(Ve,it){var pt=Ve.static,Et=Ve.dynamic,mt=function(){if(hi in pt){var yt=pt[hi];Zi(yt)?yt=ze.getElements(ze.create(yt,!0)):yt&&(yt=ze.getElements(yt),W.command(yt,"invalid elements",it.commandStr));var qe=Ne(function(ht,Mt){if(yt){var zt=ht.link(yt);return ht.ELEMENTS=zt,zt}return ht.ELEMENTS=null,null});return qe.value=yt,qe}if(hi in Et){var at=Et[hi];return He(at,function(ht,Mt){var zt=ht.shared,Ut=zt.isBufferArgs,Xt=zt.elements,fr=ht.invoke(Mt,at),Or=Mt.def("null"),kr=Mt.def(Ut,"(",fr,")"),mr=ht.cond(kr).then(Or,"=",Xt,".createStream(",fr,");").else(Or,"=",Xt,".getElements(",fr,");");return W.optional(function(){ht.assert(mr.else,"!"+fr+"||"+Or,"invalid elements")}),Mt.entry(mr),Mt.exit(ht.cond(kr).then(Xt,".destroyStream(",Or,");")),ht.ELEMENTS=Or,Or})}return null}();function xt(yt,qe){if(yt in pt){var at=0|pt[yt];return W.command(!qe||at>=0,"invalid "+yt,it.commandStr),Ne(function(Mt,zt){return qe&&(Mt.OFFSET=at),at})}if(yt in Et){var ht=Et[yt];return He(ht,function(Mt,zt){var Ut=Mt.invoke(zt,ht);return qe&&(Mt.OFFSET=Ut,W.optional(function(){Mt.assert(zt,Ut+">=0","invalid "+yt)})),Ut})}return qe&&mt?Ne(function(Mt,zt){return Mt.OFFSET="0",0}):null}var Ot=xt(di,!0);return{elements:mt,primitive:function(){if(Vn in pt){var yt=pt[Vn];return W.commandParameter(yt,et,"invalid primitve",it.commandStr),Ne(function(at,ht){return et[yt]})}if(Vn in Et){var qe=Et[Vn];return He(qe,function(at,ht){var Mt=at.constants.primTypes,zt=at.invoke(ht,qe);return W.optional(function(){at.assert(ht,zt+" in "+Mt,"invalid primitive, must be one of "+Object.keys(et))}),ht.def(Mt,"[",zt,"]")})}return mt?We(mt)?mt.value?Ne(function(at,ht){return ht.def(at.ELEMENTS,".primType")}):Ne(function(){return 4}):new nr(mt.thisDep,mt.contextDep,mt.propDep,function(at,ht){var Mt=at.ELEMENTS;return ht.def(Mt,"?",Mt,".primType:",4)}):null}(),count:function(){if(oi in pt){var yt=0|pt[oi];return W.command(typeof yt=="number"&&yt>=0,"invalid vertex count",it.commandStr),Ne(function(){return yt})}if(oi in Et){var qe=Et[oi];return He(qe,function(Mt,zt){var Ut=Mt.invoke(zt,qe);return W.optional(function(){Mt.assert(zt,"typeof "+Ut+'==="number"&&'+Ut+">=0&&"+Ut+"===("+Ut+"|0)","invalid vertex count")}),Ut})}if(mt){if(We(mt)){if(mt)return Ot?new nr(Ot.thisDep,Ot.contextDep,Ot.propDep,function(Mt,zt){var Ut=zt.def(Mt.ELEMENTS,".vertCount-",Mt.OFFSET);return W.optional(function(){Mt.assert(zt,Ut+">=0","invalid vertex offset/element buffer too small")}),Ut}):Ne(function(Mt,zt){return zt.def(Mt.ELEMENTS,".vertCount")});var at=Ne(function(){return-1});return W.optional(function(){at.MISSING=!0}),at}var ht=new nr(mt.thisDep||Ot.thisDep,mt.contextDep||Ot.contextDep,mt.propDep||Ot.propDep,function(Mt,zt){var Ut=Mt.ELEMENTS;return Mt.OFFSET?zt.def(Ut,"?",Ut,".vertCount-",Mt.OFFSET,":-1"):zt.def(Ut,"?",Ut,".vertCount:-1")});return W.optional(function(){ht.DYNAMIC=!0}),ht}return null}(),instances:xt(_i,!1),offset:Ot}}(_t,R),Ue=function(Ve,it){var pt=Ve.static,Et=Ve.dynamic,mt={};return Cn.forEach(function(xt){var Ot=Mn(xt);function yt(qe,at){if(xt in pt){var ht=qe(pt[xt]);mt[Ot]=Ne(function(){return ht})}else if(xt in Et){var Mt=Et[xt];mt[Ot]=He(Mt,function(zt,Ut){return at(zt,Ut,zt.invoke(Ut,Mt))})}}switch(xt){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return yt(function(qe){return W.commandType(qe,"boolean",xt,it.commandStr),qe},function(qe,at,ht){return W.optional(function(){qe.assert(at,"typeof "+ht+'==="boolean"',"invalid flag "+xt,qe.commandStr)}),ht});case"depth.func":return yt(function(qe){return W.commandParameter(qe,ci,"invalid "+xt,it.commandStr),ci[qe]},function(qe,at,ht){var Mt=qe.constants.compareFuncs;return W.optional(function(){qe.assert(at,ht+" in "+Mt,"invalid "+xt+", must be one of "+Object.keys(ci))}),at.def(Mt,"[",ht,"]")});case"depth.range":return yt(function(qe){return W.command(Tt(qe)&&qe.length===2&&typeof qe[0]=="number"&&typeof qe[1]=="number"&&qe[0]<=qe[1],"depth range is 2d array",it.commandStr),qe},function(qe,at,ht){return W.optional(function(){qe.assert(at,qe.shared.isArrayLike+"("+ht+")&&"+ht+".length===2&&typeof "+ht+'[0]==="number"&&typeof '+ht+'[1]==="number"&&'+ht+"[0]<="+ht+"[1]","depth range must be a 2d array")}),[at.def("+",ht,"[0]"),at.def("+",ht,"[1]")]});case"blend.func":return yt(function(qe){W.commandType(qe,"object","blend.func",it.commandStr);var at="srcRGB"in qe?qe.srcRGB:qe.src,ht="srcAlpha"in qe?qe.srcAlpha:qe.src,Mt="dstRGB"in qe?qe.dstRGB:qe.dst,zt="dstAlpha"in qe?qe.dstAlpha:qe.dst;return W.commandParameter(at,Hn,Ot+".srcRGB",it.commandStr),W.commandParameter(ht,Hn,Ot+".srcAlpha",it.commandStr),W.commandParameter(Mt,Hn,Ot+".dstRGB",it.commandStr),W.commandParameter(zt,Hn,Ot+".dstAlpha",it.commandStr),W.command(io.indexOf(at+", "+Mt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+at+", "+Mt+")",it.commandStr),[Hn[at],Hn[Mt],Hn[ht],Hn[zt]]},function(qe,at,ht){var Mt=qe.constants.blendFuncs;function zt(kr,mr){var sr=at.def('"',kr,mr,'" in ',ht,"?",ht,".",kr,mr,":",ht,".",kr);return W.optional(function(){qe.assert(at,sr+" in "+Mt,"invalid "+xt+"."+kr+mr+", must be one of "+Object.keys(Hn))}),sr}W.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid blend func, must be an object")});var Ut=zt("src","RGB"),Xt=zt("dst","RGB");W.optional(function(){var kr=qe.constants.invalidBlendCombinations;qe.assert(at,kr+".indexOf("+Ut+'+", "+'+Xt+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var fr=at.def(Mt,"[",Ut,"]"),Or=at.def(Mt,"[",zt("src","Alpha"),"]");return[fr,at.def(Mt,"[",Xt,"]"),Or,at.def(Mt,"[",zt("dst","Alpha"),"]")]});case"blend.equation":return yt(function(qe){return typeof qe=="string"?(W.commandParameter(qe,Ur,"invalid "+xt,it.commandStr),[Ur[qe],Ur[qe]]):_(qe)==="object"?(W.commandParameter(qe.rgb,Ur,xt+".rgb",it.commandStr),W.commandParameter(qe.alpha,Ur,xt+".alpha",it.commandStr),[Ur[qe.rgb],Ur[qe.alpha]]):void W.commandRaise("invalid blend.equation",it.commandStr)},function(qe,at,ht){var Mt=qe.constants.blendEquations,zt=at.def(),Ut=at.def(),Xt=qe.cond("typeof ",ht,'==="string"');return W.optional(function(){function fr(Or,kr,mr){qe.assert(Or,mr+" in "+Mt,"invalid "+kr+", must be one of "+Object.keys(Ur))}fr(Xt.then,xt,ht),qe.assert(Xt.else,ht+"&&typeof "+ht+'==="object"',"invalid "+xt),fr(Xt.else,xt+".rgb",ht+".rgb"),fr(Xt.else,xt+".alpha",ht+".alpha")}),Xt.then(zt,"=",Ut,"=",Mt,"[",ht,"];"),Xt.else(zt,"=",Mt,"[",ht,".rgb];",Ut,"=",Mt,"[",ht,".alpha];"),at(Xt),[zt,Ut]});case"blend.color":return yt(function(qe){return W.command(Tt(qe)&&qe.length===4,"blend.color must be a 4d array",it.commandStr),ee(4,function(at){return+qe[at]})},function(qe,at,ht){return W.optional(function(){qe.assert(at,qe.shared.isArrayLike+"("+ht+")&&"+ht+".length===4","blend.color must be a 4d array")}),ee(4,function(Mt){return at.def("+",ht,"[",Mt,"]")})});case"stencil.mask":return yt(function(qe){return W.commandType(qe,"number",Ot,it.commandStr),0|qe},function(qe,at,ht){return W.optional(function(){qe.assert(at,"typeof "+ht+'==="number"',"invalid stencil.mask")}),at.def(ht,"|0")});case"stencil.func":return yt(function(qe){W.commandType(qe,"object",Ot,it.commandStr);var at=qe.cmp||"keep",ht=qe.ref||0,Mt="mask"in qe?qe.mask:-1;return W.commandParameter(at,ci,xt+".cmp",it.commandStr),W.commandType(ht,"number",xt+".ref",it.commandStr),W.commandType(Mt,"number",xt+".mask",it.commandStr),[ci[at],ht,Mt]},function(qe,at,ht){var Mt=qe.constants.compareFuncs;return W.optional(function(){function zt(){qe.assert(at,Array.prototype.join.call(arguments,""),"invalid stencil.func")}zt(ht+"&&typeof ",ht,'==="object"'),zt('!("cmp" in ',ht,")||(",ht,".cmp in ",Mt,")")}),[at.def('"cmp" in ',ht,"?",Mt,"[",ht,".cmp]",":",7680),at.def(ht,".ref|0"),at.def('"mask" in ',ht,"?",ht,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return yt(function(qe){W.commandType(qe,"object",Ot,it.commandStr);var at=qe.fail||"keep",ht=qe.zfail||"keep",Mt=qe.zpass||"keep";return W.commandParameter(at,li,xt+".fail",it.commandStr),W.commandParameter(ht,li,xt+".zfail",it.commandStr),W.commandParameter(Mt,li,xt+".zpass",it.commandStr),[xt==="stencil.opBack"?1029:1028,li[at],li[ht],li[Mt]]},function(qe,at,ht){var Mt=qe.constants.stencilOps;function zt(Ut){return W.optional(function(){qe.assert(at,'!("'+Ut+'" in '+ht+")||("+ht+"."+Ut+" in "+Mt+")","invalid "+xt+"."+Ut+", must be one of "+Object.keys(li))}),at.def('"',Ut,'" in ',ht,"?",Mt,"[",ht,".",Ut,"]:",7680)}return W.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid "+xt)}),[xt==="stencil.opBack"?1029:1028,zt("fail"),zt("zfail"),zt("zpass")]});case"polygonOffset.offset":return yt(function(qe){W.commandType(qe,"object",Ot,it.commandStr);var at=0|qe.factor,ht=0|qe.units;return W.commandType(at,"number",Ot+".factor",it.commandStr),W.commandType(ht,"number",Ot+".units",it.commandStr),[at,ht]},function(qe,at,ht){return W.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid "+xt)}),[at.def(ht,".factor|0"),at.def(ht,".units|0")]});case"cull.face":return yt(function(qe){var at=0;return qe==="front"?at=1028:qe==="back"&&(at=1029),W.command(!!at,Ot,it.commandStr),at},function(qe,at,ht){return W.optional(function(){qe.assert(at,ht+'==="front"||'+ht+'==="back"',"invalid cull.face")}),at.def(ht,'==="front"?',1028,":",1029)});case"lineWidth":return yt(function(qe){return W.command(typeof qe=="number"&&qe>=Ft.lineWidthDims[0]&&qe<=Ft.lineWidthDims[1],"invalid line width, must be a positive number between "+Ft.lineWidthDims[0]+" and "+Ft.lineWidthDims[1],it.commandStr),qe},function(qe,at,ht){return W.optional(function(){qe.assert(at,"typeof "+ht+'==="number"&&'+ht+">="+Ft.lineWidthDims[0]+"&&"+ht+"<="+Ft.lineWidthDims[1],"invalid line width")}),ht});case"frontFace":return yt(function(qe){return W.commandParameter(qe,Ki,Ot,it.commandStr),Ki[qe]},function(qe,at,ht){return W.optional(function(){qe.assert(at,ht+'==="cw"||'+ht+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),at.def(ht+'==="cw"?2304:2305')});case"colorMask":return yt(function(qe){return W.command(Tt(qe)&&qe.length===4,"color.mask must be length 4 array",it.commandStr),qe.map(function(at){return!!at})},function(qe,at,ht){return W.optional(function(){qe.assert(at,qe.shared.isArrayLike+"("+ht+")&&"+ht+".length===4","invalid color.mask")}),ee(4,function(Mt){return"!!"+ht+"["+Mt+"]"})});case"sample.coverage":return yt(function(qe){W.command(_(qe)==="object"&&qe,Ot,it.commandStr);var at="value"in qe?qe.value:1,ht=!!qe.invert;return W.command(typeof at=="number"&&at>=0&&at<=1,"sample.coverage.value must be a number between 0 and 1",it.commandStr),[at,ht]},function(qe,at,ht){return W.optional(function(){qe.assert(at,ht+"&&typeof "+ht+'==="object"',"invalid sample.coverage")}),[at.def('"value" in ',ht,"?+",ht,".value:1"),at.def("!!",ht,".invert")]})}}),mt}(_t,R),Me=function(Ve,it,pt){var Et=Ve.static,mt=Ve.dynamic;function xt(ht){if(ht in Et){var Mt=ut.id(Et[ht]);W.optional(function(){Lt.shader(oo[ht],Mt,W.guessCommand())});var zt=Ne(function(){return Mt});return zt.id=Mt,zt}if(ht in mt){var Ut=mt[ht];return He(Ut,function(Xt,fr){var Or=Xt.invoke(fr,Ut),kr=fr.def(Xt.shared.strings,".id(",Or,")");return W.optional(function(){fr(Xt.shared.shader,".shader(",oo[ht],",",kr,",",Xt.command,");")}),kr})}return null}var Ot,yt=xt(Jn),qe=xt(ii),at=null;return We(yt)&&We(qe)?(at=Lt.program(qe.id,yt.id,null,pt),Ot=Ne(function(ht,Mt){return ht.link(at)})):Ot=new nr(yt&&yt.thisDep||qe&&qe.thisDep,yt&&yt.contextDep||qe&&qe.contextDep,yt&&yt.propDep||qe&&qe.propDep,function(ht,Mt){var zt,Ut=ht.shared.shader;zt=yt?yt.append(ht,Mt):Mt.def(Ut,".",Jn);var Xt=Ut+".program("+(qe?qe.append(ht,Mt):Mt.def(Ut,".",ii))+","+zt;return W.optional(function(){Xt+=","+ht.command}),Mt.def(Xt+")")}),{frag:yt,vert:qe,progVar:Ot,program:at}}(_t,0,ae);function Fe(Ve){var it=be[Ve];it&&(Ue[Ve]=it)}Fe("viewport"),Fe(Mn("scissor.box"));var Ye=Object.keys(Ue).length>0,Ge={framebuffer:pe,draw:De,shader:Me,state:Ue,dirty:Ye,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ge.profile=function(Ve){var it,pt=Ve.static,Et=Ve.dynamic;if(Oi in pt){var mt=!!pt[Oi];(it=Ne(function(Ot,yt){return mt})).enable=mt}else if(Oi in Et){var xt=Et[Oi];it=He(xt,function(Ot,yt){return Ot.invoke(yt,xt)})}return it}(_t),Ge.uniforms=function(Ve,it){var pt=Ve.static,Et=Ve.dynamic,mt={};return Object.keys(pt).forEach(function(xt){var Ot,yt=pt[xt];if(typeof yt=="number"||typeof yt=="boolean")Ot=Ne(function(){return yt});else if(typeof yt=="function"){var qe=yt._reglType;qe==="texture2d"||qe==="textureCube"?Ot=Ne(function(at){return at.link(yt)}):qe==="framebuffer"||qe==="framebufferCube"?(W.command(yt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+xt+'"',it.commandStr),Ot=Ne(function(at){return at.link(yt.color[0])})):W.commandRaise('invalid data for uniform "'+xt+'"',it.commandStr)}else Tt(yt)?Ot=Ne(function(at){return at.global.def("[",ee(yt.length,function(ht){return W.command(typeof yt[ht]=="number"||typeof yt[ht]=="boolean","invalid uniform "+xt,at.commandStr),yt[ht]}),"]")}):W.commandRaise('invalid or missing data for uniform "'+xt+'"',it.commandStr);Ot.value=yt,mt[xt]=Ot}),Object.keys(Et).forEach(function(xt){var Ot=Et[xt];mt[xt]=He(Ot,function(yt,qe){return yt.invoke(qe,Ot)})}),mt}(St,R),Ge.drawVAO=Ge.scopeVAO=function(Ve,it){var pt=Ve.static,Et=Ve.dynamic;if(Xn in pt){var mt=pt[Xn];return mt!==null&&wt.getVAO(mt)===null&&(mt=wt.createVAO(mt)),Ne(function(Ot){return Ot.link(wt.getVAO(mt))})}if(Xn in Et){var xt=Et[Xn];return He(xt,function(Ot,yt){var qe=Ot.invoke(yt,xt);return yt.def(Ot.shared.vao+".getVAO("+qe+")")})}return null}(_t),!Ge.drawVAO&&Me.program&&!ae&&bt.angle_instanced_arrays){var Xe=!0,Je=Me.program.attributes.map(function(Ve){var it=$e.static[Ve];return Xe=Xe&&!!it,it});if(Xe&&Je.length>0){var tt=wt.getVAO(wt.createVAO(Je));Ge.drawVAO=new nr(null,null,null,function(Ve,it){return Ve.link(tt)}),Ge.useVAO=!0}}return ae?Ge.useVAO=!0:Ge.attributes=function(Ve,it){var pt=Ve.static,Et=Ve.dynamic,mt={};return Object.keys(pt).forEach(function(xt){var Ot=pt[xt],yt=ut.id(xt),qe=new pr;if(Zi(Ot))qe.state=1,qe.buffer=_e.getBuffer(_e.create(Ot,34962,!1,!0)),qe.type=0;else{var at=_e.getBuffer(Ot);if(at)qe.state=1,qe.buffer=at,qe.type=0;else if(W.command(_(Ot)==="object"&&Ot,"invalid data for attribute "+xt,it.commandStr),"constant"in Ot){var ht=Ot.constant;qe.buffer="null",qe.state=2,typeof ht=="number"?qe.x=ht:(W.command(Tt(ht)&&ht.length>0&&ht.length<=4,"invalid constant for attribute "+xt,it.commandStr),wi.forEach(function(kr,mr){mr<ht.length&&(qe[kr]=ht[mr])}))}else{at=Zi(Ot.buffer)?_e.getBuffer(_e.create(Ot.buffer,34962,!1,!0)):_e.getBuffer(Ot.buffer),W.command(!!at,'missing buffer for attribute "'+xt+'"',it.commandStr);var Mt=0|Ot.offset;W.command(Mt>=0,'invalid offset for attribute "'+xt+'"',it.commandStr);var zt=0|Ot.stride;W.command(zt>=0&&zt<256,'invalid stride for attribute "'+xt+'", must be integer betweeen [0, 255]',it.commandStr);var Ut=0|Ot.size;W.command(!("size"in Ot)||Ut>0&&Ut<=4,'invalid size for attribute "'+xt+'", must be 1,2,3,4',it.commandStr);var Xt=!!Ot.normalized,fr=0;"type"in Ot&&(W.commandParameter(Ot.type,Se,"invalid type for attribute "+xt,it.commandStr),fr=Se[Ot.type]);var Or=0|Ot.divisor;"divisor"in Ot&&(W.command(Or===0||Gr,'cannot specify divisor for attribute "'+xt+'", instancing not supported',it.commandStr),W.command(Or>=0,'invalid divisor for attribute "'+xt+'"',it.commandStr)),W.optional(function(){var kr=it.commandStr,mr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ot).forEach(function(sr){W.command(mr.indexOf(sr)>=0,'unknown parameter "'+sr+'" for attribute pointer "'+xt+'" (valid parameters are '+mr+")",kr)})}),qe.buffer=at,qe.state=1,qe.size=Ut,qe.normalized=Xt,qe.type=fr||at.dtype,qe.offset=Mt,qe.stride=zt,qe.divisor=Or}}mt[xt]=Ne(function(kr,mr){var sr=kr.attribCache;if(yt in sr)return sr[yt];var an={isStream:!1};return Object.keys(qe).forEach(function(sn){an[sn]=qe[sn]}),qe.buffer&&(an.buffer=kr.link(qe.buffer),an.type=an.type||an.buffer+".dtype"),sr[yt]=an,an})}),Object.keys(Et).forEach(function(xt){var Ot=Et[xt];mt[xt]=He(Ot,function(yt,qe){var at=yt.invoke(qe,Ot),ht=yt.shared,Mt=yt.constants,zt=ht.isBufferArgs,Ut=ht.buffer;W.optional(function(){yt.assert(qe,at+"&&(typeof "+at+'==="object"||typeof '+at+'==="function")&&('+zt+"("+at+")||"+Ut+".getBuffer("+at+")||"+Ut+".getBuffer("+at+".buffer)||"+zt+"("+at+'.buffer)||("constant" in '+at+"&&(typeof "+at+'.constant==="number"||'+ht.isArrayLike+"("+at+".constant))))",'invalid dynamic attribute "'+xt+'"')});var Xt={isStream:qe.def(!1)},fr=new pr;fr.state=1,Object.keys(fr).forEach(function(sr){Xt[sr]=qe.def(""+fr[sr])});var Or=Xt.buffer,kr=Xt.type;function mr(sr){qe(Xt[sr],"=",at,".",sr,"|0;")}return qe("if(",zt,"(",at,")){",Xt.isStream,"=true;",Or,"=",Ut,".createStream(",34962,",",at,");",kr,"=",Or,".dtype;","}else{",Or,"=",Ut,".getBuffer(",at,");","if(",Or,"){",kr,"=",Or,".dtype;",'}else if("constant" in ',at,"){",Xt.state,"=",2,";","if(typeof "+at+'.constant === "number"){',Xt[wi[0]],"=",at,".constant;",wi.slice(1).map(function(sr){return Xt[sr]}).join("="),"=0;","}else{",wi.map(function(sr,an){return Xt[sr]+"="+at+".constant.length>"+an+"?"+at+".constant["+an+"]:0;"}).join(""),"}}else{","if(",zt,"(",at,".buffer)){",Or,"=",Ut,".createStream(",34962,",",at,".buffer);","}else{",Or,"=",Ut,".getBuffer(",at,".buffer);","}",kr,'="type" in ',at,"?",Mt.glTypes,"[",at,".type]:",Or,".dtype;",Xt.normalized,"=!!",at,".normalized;"),mr("size"),mr("offset"),mr("stride"),mr("divisor"),qe("}}"),qe.exit("if(",Xt.isStream,"){",Ut,".destroyStream(",Or,");","}"),Xt})}),mt}($e,R),Ge.context=function(Ve){var it=Ve.static,pt=Ve.dynamic,Et={};return Object.keys(it).forEach(function(mt){var xt=it[mt];Et[mt]=Ne(function(Ot,yt){return typeof xt=="number"||typeof xt=="boolean"?""+xt:Ot.link(xt)})}),Object.keys(pt).forEach(function(mt){var xt=pt[mt];Et[mt]=He(xt,function(Ot,yt){return Ot.invoke(yt,xt)})}),Et}(w),Ge}function nn(_t,$e,St){var w=_t.shared.context,R=_t.scope();Object.keys(St).forEach(function(fe){$e.save(w,"."+fe);var Z=St[fe].append(_t,$e);Array.isArray(Z)?R(w,".",fe,"=[",Z.join(),"];"):R(w,".",fe,"=",Z,";")}),$e(R)}function pi(_t,$e,St,w){var R,fe=_t.shared,Z=fe.gl,ae=fe.framebuffer;$r&&(R=$e.def(fe.extensions,".webgl_draw_buffers"));var pe,be=_t.constants,De=be.drawBuffer,Ue=be.backBuffer;pe=St?St.append(_t,$e):$e.def(ae,".next"),w||$e("if(",pe,"!==",ae,".cur){"),$e("if(",pe,"){",Z,".bindFramebuffer(",36160,",",pe,".framebuffer);"),$r&&$e(R,".drawBuffersWEBGL(",De,"[",pe,".colorAttachments.length]);"),$e("}else{",Z,".bindFramebuffer(",36160,",null);"),$r&&$e(R,".drawBuffersWEBGL(",Ue,");"),$e("}",ae,".cur=",pe,";"),w||$e("}")}function Qi(_t,$e,St){var w=_t.shared,R=w.gl,fe=_t.current,Z=_t.next,ae=w.current,pe=w.next,be=_t.cond(ae,".dirty");Cn.forEach(function(De){var Ue,Me,Fe=Mn(De);if(!(Fe in St.state))if(Fe in Z){Ue=Z[Fe],Me=fe[Fe];var Ye=ee(Kr[Fe].length,function(Xe){return be.def(Ue,"[",Xe,"]")});be(_t.cond(Ye.map(function(Xe,Je){return Xe+"!=="+Me+"["+Je+"]"}).join("||")).then(R,".",Qr[Fe],"(",Ye,");",Ye.map(function(Xe,Je){return Me+"["+Je+"]="+Xe}).join(";"),";"))}else{Ue=be.def(pe,".",Fe);var Ge=_t.cond(Ue,"!==",ae,".",Fe);be(Ge),Fe in qn?Ge(_t.cond(Ue).then(R,".enable(",qn[Fe],");").else(R,".disable(",qn[Fe],");"),ae,".",Fe,"=",Ue,";"):Ge(R,".",Qr[Fe],"(",Ue,");",ae,".",Fe,"=",Ue,";")}}),Object.keys(St.state).length===0&&be(ae,".dirty=false;"),$e(be)}function ki(_t,$e,St,w){var R=_t.shared,fe=_t.current,Z=R.current,ae=R.gl;go(Object.keys(St)).forEach(function(pe){var be=St[pe];if(!w||w(be)){var De=be.append(_t,$e);if(qn[pe]){var Ue=qn[pe];We(be)?$e(ae,De?".enable(":".disable(",Ue,");"):$e(_t.cond(De).then(ae,".enable(",Ue,");").else(ae,".disable(",Ue,");")),$e(Z,".",pe,"=",De,";")}else if(Tt(De)){var Me=fe[pe];$e(ae,".",Qr[pe],"(",De,");",De.map(function(Fe,Ye){return Me+"["+Ye+"]="+Fe}).join(";"),";")}else $e(ae,".",Qr[pe],"(",De,");",Z,".",pe,"=",De,";")}})}function Gn(_t,$e){Gr&&(_t.instancing=$e.def(_t.shared.extensions,".angle_instanced_arrays"))}function Fi(_t,$e,St,w,R){var fe,Z,ae,pe=_t.shared,be=_t.stats,De=pe.current,Ue=pe.timer,Me=St.profile;function Fe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function Ye(Ve){Ve(fe=$e.def(),"=",Fe(),";"),typeof R=="string"?Ve(be,".count+=",R,";"):Ve(be,".count++;"),tr&&(w?Ve(Z=$e.def(),"=",Ue,".getNumPendingQueries();"):Ve(Ue,".beginQuery(",be,");"))}function Ge(Ve){Ve(be,".cpuTime+=",Fe(),"-",fe,";"),tr&&(w?Ve(Ue,".pushScopeStats(",Z,",",Ue,".getNumPendingQueries(),",be,");"):Ve(Ue,".endQuery();"))}function Xe(Ve){var it=$e.def(De,".profile");$e(De,".profile=",Ve,";"),$e.exit(De,".profile=",it,";")}if(Me){if(We(Me))return void(Me.enable?(Ye($e),Ge($e.exit),Xe("true")):Xe("false"));Xe(ae=Me.append(_t,$e))}else ae=$e.def(De,".profile");var Je=_t.block();Ye(Je),$e("if(",ae,"){",Je,"}");var tt=_t.block();Ge(tt),$e.exit("if(",ae,"){",tt,"}")}function Ni(_t,$e,St,w,R){var fe=_t.shared;w.forEach(function(Z){var ae,pe=Z.name,be=St.attributes[pe];if(be){if(!R(be))return;ae=be.append(_t,$e)}else{if(!R(ft))return;var De=_t.scopeAttrib(pe);W.optional(function(){_t.assert($e,De+".state","missing attribute "+pe)}),ae={},Object.keys(new pr).forEach(function(Ue){ae[Ue]=$e.def(De,".",Ue)})}(function(Ue,Me,Fe){var Ye=fe.gl,Ge=$e.def(Ue,".location"),Xe=$e.def(fe.attributes,"[",Ge,"]"),Je=Fe.state,tt=Fe.buffer,Ve=[Fe.x,Fe.y,Fe.z,Fe.w],it=["buffer","normalized","offset","stride"];function pt(){$e("if(!",Xe,".buffer){",Ye,".enableVertexAttribArray(",Ge,");}");var mt,xt=Fe.type;if(mt=Fe.size?$e.def(Fe.size,"||",Me):Me,$e("if(",Xe,".type!==",xt,"||",Xe,".size!==",mt,"||",it.map(function(yt){return Xe+"."+yt+"!=="+Fe[yt]}).join("||"),"){",Ye,".bindBuffer(",34962,",",tt,".buffer);",Ye,".vertexAttribPointer(",[Ge,mt,xt,Fe.normalized,Fe.stride,Fe.offset],");",Xe,".type=",xt,";",Xe,".size=",mt,";",it.map(function(yt){return Xe+"."+yt+"="+Fe[yt]+";"}).join(""),"}"),Gr){var Ot=Fe.divisor;$e("if(",Xe,".divisor!==",Ot,"){",_t.instancing,".vertexAttribDivisorANGLE(",[Ge,Ot],");",Xe,".divisor=",Ot,";}")}}function Et(){$e("if(",Xe,".buffer){",Ye,".disableVertexAttribArray(",Ge,");",Xe,".buffer=null;","}if(",wi.map(function(mt,xt){return Xe+"."+mt+"!=="+Ve[xt]}).join("||"),"){",Ye,".vertexAttrib4f(",Ge,",",Ve,");",wi.map(function(mt,xt){return Xe+"."+mt+"="+Ve[xt]+";"}).join(""),"}")}Je===1?pt():Je===2?Et():($e("if(",Je,"===",1,"){"),pt(),$e("}else{"),Et(),$e("}"))})(_t.link(Z),function(Ue){switch(Ue){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Z.info.type),ae)})}function fi(_t,$e,St,w,R){for(var fe,Z=_t.shared,ae=Z.gl,pe=0;pe<w.length;++pe){var be,De=w[pe],Ue=De.name,Me=De.info.type,Fe=St.uniforms[Ue],Ye=_t.link(De)+".location";if(Fe){if(!R(Fe))continue;if(We(Fe)){var Ge=Fe.value;if(W.command(Ge!=null,'missing uniform "'+Ue+'"',_t.commandStr),Me===35678||Me===35680){W.command(typeof Ge=="function"&&(Me===35678&&(Ge._reglType==="texture2d"||Ge._reglType==="framebuffer")||Me===35680&&(Ge._reglType==="textureCube"||Ge._reglType==="framebufferCube")),"invalid texture for uniform "+Ue,_t.commandStr);var Xe=_t.link(Ge._texture||Ge.color[0]._texture);$e(ae,".uniform1i(",Ye,",",Xe+".bind());"),$e.exit(Xe,".unbind();")}else if(Me===35674||Me===35675||Me===35676){W.optional(function(){W.command(Tt(Ge),"invalid matrix for uniform "+Ue,_t.commandStr),W.command(Me===35674&&Ge.length===4||Me===35675&&Ge.length===9||Me===35676&&Ge.length===16,"invalid length for matrix uniform "+Ue,_t.commandStr)});var Je=_t.global.def("new Float32Array(["+Array.prototype.slice.call(Ge)+"])"),tt=2;Me===35675?tt=3:Me===35676&&(tt=4),$e(ae,".uniformMatrix",tt,"fv(",Ye,",false,",Je,");")}else{switch(Me){case 5126:W.commandType(Ge,"number","uniform "+Ue,_t.commandStr),fe="1f";break;case 35664:W.command(Tt(Ge)&&Ge.length===2,"uniform "+Ue,_t.commandStr),fe="2f";break;case 35665:W.command(Tt(Ge)&&Ge.length===3,"uniform "+Ue,_t.commandStr),fe="3f";break;case 35666:W.command(Tt(Ge)&&Ge.length===4,"uniform "+Ue,_t.commandStr),fe="4f";break;case 35670:W.commandType(Ge,"boolean","uniform "+Ue,_t.commandStr),fe="1i";break;case 5124:W.commandType(Ge,"number","uniform "+Ue,_t.commandStr),fe="1i";break;case 35671:case 35667:W.command(Tt(Ge)&&Ge.length===2,"uniform "+Ue,_t.commandStr),fe="2i";break;case 35672:case 35668:W.command(Tt(Ge)&&Ge.length===3,"uniform "+Ue,_t.commandStr),fe="3i";break;case 35673:case 35669:W.command(Tt(Ge)&&Ge.length===4,"uniform "+Ue,_t.commandStr),fe="4i"}$e(ae,".uniform",fe,"(",Ye,",",Tt(Ge)?Array.prototype.slice.call(Ge):Ge,");")}continue}be=Fe.append(_t,$e)}else{if(!R(ft))continue;be=$e.def(Z.uniforms,"[",ut.id(Ue),"]")}Me===35678?(W(!Array.isArray(be),"must specify a scalar prop for textures"),$e("if(",be,"&&",be,'._reglType==="framebuffer"){',be,"=",be,".color[0];","}")):Me===35680&&(W(!Array.isArray(be),"must specify a scalar prop for cube maps"),$e("if(",be,"&&",be,'._reglType==="framebufferCube"){',be,"=",be,".color[0];","}")),W.optional(function(){function mt(qe,at){_t.assert($e,qe,'bad data or missing for uniform "'+Ue+'".  '+at)}function xt(qe){W(!Array.isArray(be),"must not specify an array type for uniform"),mt("typeof "+be+'==="'+qe+'"',"invalid type, expected "+qe)}function Ot(qe,at){Array.isArray(be)?W(be.length===qe,"must have length "+qe):mt(Z.isArrayLike+"("+be+")&&"+be+".length==="+qe,"invalid vector, should have length "+qe,_t.commandStr)}function yt(qe){W(!Array.isArray(be),"must not specify a value type"),mt("typeof "+be+'==="function"&&'+be+'._reglType==="texture'+(qe===3553?"2d":"Cube")+'"',"invalid texture type",_t.commandStr)}switch(Me){case 5124:xt("number");break;case 35667:Ot(2);break;case 35668:Ot(3);break;case 35669:Ot(4);break;case 5126:xt("number");break;case 35664:Ot(2);break;case 35665:Ot(3);break;case 35666:Ot(4);break;case 35670:xt("boolean");break;case 35671:Ot(2);break;case 35672:Ot(3);break;case 35673:case 35674:Ot(4);break;case 35675:Ot(9);break;case 35676:Ot(16);break;case 35678:yt(3553);break;case 35680:yt(34067)}});var Ve=1;switch(Me){case 35678:case 35680:var it=$e.def(be,"._texture");$e(ae,".uniform1i(",Ye,",",it,".bind());"),$e.exit(it,".unbind();");continue;case 5124:case 35670:fe="1i";break;case 35667:case 35671:fe="2i",Ve=2;break;case 35668:case 35672:fe="3i",Ve=3;break;case 35669:case 35673:fe="4i",Ve=4;break;case 5126:fe="1f";break;case 35664:fe="2f",Ve=2;break;case 35665:fe="3f",Ve=3;break;case 35666:fe="4f",Ve=4;break;case 35674:fe="Matrix2fv";break;case 35675:fe="Matrix3fv";break;case 35676:fe="Matrix4fv"}if($e(ae,".uniform",fe,"(",Ye,","),fe.charAt(0)==="M"){var pt=Math.pow(Me-35674+2,2),Et=_t.global.def("new Float32Array(",pt,")");Array.isArray(be)?$e("false,(",ee(pt,function(mt){return Et+"["+mt+"]="+be[mt]}),",",Et,")"):$e("false,(Array.isArray(",be,")||",be," instanceof Float32Array)?",be,":(",ee(pt,function(mt){return Et+"["+mt+"]="+be+"["+mt+"]"}),",",Et,")")}else Ve>1?$e(ee(Ve,function(mt){return Array.isArray(be)?be[mt]:be+"["+mt+"]"})):(W(!Array.isArray(be),"uniform value must not be an array"),$e(be));$e(");")}}function zi(_t,$e,St,w){var R=_t.shared,fe=R.gl,Z=R.draw,ae=w.draw,pe=function(){var Ve,it=ae.elements,pt=$e;return it?((it.contextDep&&w.contextDynamic||it.propDep)&&(pt=St),Ve=it.append(_t,pt)):Ve=pt.def(Z,".",hi),Ve&&pt("if("+Ve+")"+fe+".bindBuffer(34963,"+Ve+".buffer.buffer);"),Ve}();function be(Ve){var it=ae[Ve];return it?it.contextDep&&w.contextDynamic||it.propDep?it.append(_t,St):it.append(_t,$e):$e.def(Z,".",Ve)}var De,Ue,Me=be(Vn),Fe=be(di),Ye=function(){var Ve,it=ae.count,pt=$e;return it?((it.contextDep&&w.contextDynamic||it.propDep)&&(pt=St),Ve=it.append(_t,pt),W.optional(function(){it.MISSING&&_t.assert($e,"false","missing vertex count"),it.DYNAMIC&&_t.assert(pt,Ve+">=0","missing vertex count")})):(Ve=pt.def(Z,".",oi),W.optional(function(){_t.assert(pt,Ve+">=0","missing vertex count")})),Ve}();if(typeof Ye=="number"){if(Ye===0)return}else St("if(",Ye,"){"),St.exit("}");Gr&&(De=be(_i),Ue=_t.instancing);var Ge=pe+".type",Xe=ae.elements&&We(ae.elements);function Je(){function Ve(){St(Ue,".drawElementsInstancedANGLE(",[Me,Ye,Ge,Fe+"<<(("+Ge+"-5121)>>1)",De],");")}function it(){St(Ue,".drawArraysInstancedANGLE(",[Me,Fe,Ye,De],");")}pe?Xe?Ve():(St("if(",pe,"){"),Ve(),St("}else{"),it(),St("}")):it()}function tt(){function Ve(){St(fe+".drawElements("+[Me,Ye,Ge,Fe+"<<(("+Ge+"-5121)>>1)"]+");")}function it(){St(fe+".drawArrays("+[Me,Fe,Ye]+");")}pe?Xe?Ve():(St("if(",pe,"){"),Ve(),St("}else{"),it(),St("}")):it()}Gr&&(typeof De!="number"||De>=0)?typeof De=="string"?(St("if(",De,">0){"),Je(),St("}else if(",De,"<0){"),tt(),St("}")):Je():tt()}function Ai(_t,$e,St,w,R){var fe=Gi(),Z=fe.proc("body",R);return W.optional(function(){fe.commandStr=$e.commandStr,fe.command=fe.link($e.commandStr)}),Gr&&(fe.instancing=Z.def(fe.shared.extensions,".angle_instanced_arrays")),_t(fe,Z,St,w),fe.compile().body}function Ji(_t,$e,St,w){Gn(_t,$e),St.useVAO?St.drawVAO?$e(_t.shared.vao,".setVAO(",St.drawVAO.append(_t,$e),");"):$e(_t.shared.vao,".setVAO(",_t.shared.vao,".targetVAO);"):($e(_t.shared.vao,".setVAO(null);"),Ni(_t,$e,St,w.attributes,function(){return!0})),fi(_t,$e,St,w.uniforms,function(){return!0}),zi(_t,$e,$e,St)}function ao(_t,$e,St,w){function R(){return!0}_t.batchId="a1",Gn(_t,$e),Ni(_t,$e,St,w.attributes,R),fi(_t,$e,St,w.uniforms,R),zi(_t,$e,$e,St)}function Ui(_t,$e,St,w){Gn(_t,$e);var R=St.contextDep,fe=$e.def(),Z=$e.def();_t.shared.props=Z,_t.batchId=fe;var ae=_t.scope(),pe=_t.scope();function be(Ge){return Ge.contextDep&&R||Ge.propDep}function De(Ge){return!be(Ge)}if($e(ae.entry,"for(",fe,"=0;",fe,"<","a1",";++",fe,"){",Z,"=","a0","[",fe,"];",pe,"}",ae.exit),St.needsContext&&nn(_t,pe,St.context),St.needsFramebuffer&&pi(_t,pe,St.framebuffer),ki(_t,pe,St.state,be),St.profile&&be(St.profile)&&Fi(_t,pe,St,!1,!0),w)St.useVAO?St.drawVAO?be(St.drawVAO)?pe(_t.shared.vao,".setVAO(",St.drawVAO.append(_t,pe),");"):ae(_t.shared.vao,".setVAO(",St.drawVAO.append(_t,ae),");"):ae(_t.shared.vao,".setVAO(",_t.shared.vao,".targetVAO);"):(ae(_t.shared.vao,".setVAO(null);"),Ni(_t,ae,St,w.attributes,De),Ni(_t,pe,St,w.attributes,be)),fi(_t,ae,St,w.uniforms,De),fi(_t,pe,St,w.uniforms,be),zi(_t,ae,pe,St);else{var Ue=_t.global.def("{}"),Me=St.shader.progVar.append(_t,pe),Fe=pe.def(Me,".id"),Ye=pe.def(Ue,"[",Fe,"]");pe(_t.shared.gl,".useProgram(",Me,".program);","if(!",Ye,"){",Ye,"=",Ue,"[",Fe,"]=",_t.link(function(Ge){return Ai(ao,_t,St,Ge,2)}),"(",Me,");}",Ye,".call(this,a0[",fe,"],",fe,");")}}function Ci(_t,$e,St){var w=$e.static[St];if(w&&function(De){if(_(De)==="object"&&!Tt(De)){for(var Ue=Object.keys(De),Me=0;Me<Ue.length;++Me)if(V.isDynamic(De[Ue[Me]]))return!0;return!1}}(w)){var R=_t.global,fe=Object.keys(w),Z=!1,ae=!1,pe=!1,be=_t.global.def("{}");fe.forEach(function(De){var Ue=w[De];if(V.isDynamic(Ue)){typeof Ue=="function"&&(Ue=w[De]=V.unbox(Ue));var Me=He(Ue,null);Z=Z||Me.thisDep,pe=pe||Me.propDep,ae=ae||Me.contextDep}else{switch(R(be,".",De,"="),_(Ue)){case"number":R(Ue);break;case"string":R('"',Ue,'"');break;case"object":Array.isArray(Ue)&&R("[",Ue.join(),"]");break;default:R(_t.link(Ue))}R(";")}}),$e.dynamic[St]=new V.DynamicVariable(4,{thisDep:Z,contextDep:ae,propDep:pe,ref:be,append:function(De,Ue){fe.forEach(function(Me){var Fe=w[Me];if(V.isDynamic(Fe)){var Ye=De.invoke(Ue,Fe);Ue(be,".",Me,"=",Ye,";")}})}}),delete $e.static[St]}}return{next:jn,current:Kr,procs:function(){var _t=Gi(),$e=_t.proc("poll"),St=_t.proc("refresh"),w=_t.block();$e(w),St(w);var R,fe=_t.shared,Z=fe.gl,ae=fe.next,pe=fe.current;w(pe,".dirty=false;"),pi(_t,$e),pi(_t,St,null,!0),Gr&&(R=_t.link(Gr)),bt.oes_vertex_array_object&&St(_t.link(bt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var be=0;be<Ft.maxAttributes;++be){var De=St.def(fe.attributes,"[",be,"]"),Ue=_t.cond(De,".buffer");Ue.then(Z,".enableVertexAttribArray(",be,");",Z,".bindBuffer(",34962,",",De,".buffer.buffer);",Z,".vertexAttribPointer(",be,",",De,".size,",De,".type,",De,".normalized,",De,".stride,",De,".offset);").else(Z,".disableVertexAttribArray(",be,");",Z,".vertexAttrib4f(",be,",",De,".x,",De,".y,",De,".z,",De,".w);",De,".buffer=null;"),St(Ue),Gr&&St(R,".vertexAttribDivisorANGLE(",be,",",De,".divisor);")}return St(_t.shared.vao,".currentVAO=null;",_t.shared.vao,".setVAO(",_t.shared.vao,".targetVAO);"),Object.keys(qn).forEach(function(Me){var Fe=qn[Me],Ye=w.def(ae,".",Me),Ge=_t.block();Ge("if(",Ye,"){",Z,".enable(",Fe,")}else{",Z,".disable(",Fe,")}",pe,".",Me,"=",Ye,";"),St(Ge),$e("if(",Ye,"!==",pe,".",Me,"){",Ge,"}")}),Object.keys(Qr).forEach(function(Me){var Fe,Ye,Ge=Qr[Me],Xe=Kr[Me],Je=_t.block();if(Je(Z,".",Ge,"("),Tt(Xe)){var tt=Xe.length;Fe=_t.global.def(ae,".",Me),Ye=_t.global.def(pe,".",Me),Je(ee(tt,function(Ve){return Fe+"["+Ve+"]"}),");",ee(tt,function(Ve){return Ye+"["+Ve+"]="+Fe+"["+Ve+"];"}).join("")),$e("if(",ee(tt,function(Ve){return Fe+"["+Ve+"]!=="+Ye+"["+Ve+"]"}).join("||"),"){",Je,"}")}else Fe=w.def(ae,".",Me),Ye=w.def(pe,".",Me),Je(Fe,");",pe,".",Me,"=",Fe,";"),$e("if(",Fe,"!==",Ye,"){",Je,"}");St(Je)}),_t.compile()}(),compile:function(_t,$e,St,w,R){var fe=Gi();fe.stats=fe.link(R),Object.keys($e.static).forEach(function(ae){Ci(fe,$e,ae)}),Bi.forEach(function(ae){Ci(fe,_t,ae)});var Z=$i(_t,$e,St,w,fe);return function(ae,pe){var be=ae.proc("draw",1);Gn(ae,be),nn(ae,be,pe.context),pi(ae,be,pe.framebuffer),Qi(ae,be,pe),ki(ae,be,pe.state),Fi(ae,be,pe,!1,!0);var De=pe.shader.progVar.append(ae,be);if(be(ae.shared.gl,".useProgram(",De,".program);"),pe.shader.program)Ji(ae,be,pe,pe.shader.program);else{be(ae.shared.vao,".setVAO(null);");var Ue=ae.global.def("{}"),Me=be.def(De,".id"),Fe=be.def(Ue,"[",Me,"]");be(ae.cond(Fe).then(Fe,".call(this,a0);").else(Fe,"=",Ue,"[",Me,"]=",ae.link(function(Ye){return Ai(Ji,ae,pe,Ye,1)}),"(",De,");",Fe,".call(this,a0);"))}Object.keys(pe.state).length>0&&be(ae.shared.current,".dirty=true;")}(fe,Z),function(ae,pe){var be=ae.proc("scope",3);ae.batchId="a2";var De=ae.shared,Ue=De.current;function Me(Fe){var Ye=pe.shader[Fe];Ye&&be.set(De.shader,"."+Fe,Ye.append(ae,be))}nn(ae,be,pe.context),pe.framebuffer&&pe.framebuffer.append(ae,be),go(Object.keys(pe.state)).forEach(function(Fe){var Ye=pe.state[Fe].append(ae,be);Tt(Ye)?Ye.forEach(function(Ge,Xe){be.set(ae.next[Fe],"["+Xe+"]",Ge)}):be.set(De.next,"."+Fe,Ye)}),Fi(ae,be,pe,!0,!0),[hi,di,oi,_i,Vn].forEach(function(Fe){var Ye=pe.draw[Fe];Ye&&be.set(De.draw,"."+Fe,""+Ye.append(ae,be))}),Object.keys(pe.uniforms).forEach(function(Fe){var Ye=pe.uniforms[Fe].append(ae,be);Array.isArray(Ye)&&(Ye="["+Ye.join()+"]"),be.set(De.uniforms,"["+ut.id(Fe)+"]",Ye)}),Object.keys(pe.attributes).forEach(function(Fe){var Ye=pe.attributes[Fe].append(ae,be),Ge=ae.scopeAttrib(Fe);Object.keys(new pr).forEach(function(Xe){be.set(Ge,"."+Xe,Ye[Xe])})}),pe.scopeVAO&&be.set(De.vao,".targetVAO",pe.scopeVAO.append(ae,be)),Me(ii),Me(Jn),Object.keys(pe.state).length>0&&(be(Ue,".dirty=true;"),be.exit(Ue,".dirty=true;")),be("a1(",ae.shared.context,",a0,",ae.batchId,");")}(fe,Z),function(ae,pe){var be=ae.proc("batch",2);ae.batchId="0",Gn(ae,be);var De=!1,Ue=!0;Object.keys(pe.context).forEach(function(it){De=De||pe.context[it].propDep}),De||(nn(ae,be,pe.context),Ue=!1);var Me=pe.framebuffer,Fe=!1;function Ye(it){return it.contextDep&&De||it.propDep}Me?(Me.propDep?De=Fe=!0:Me.contextDep&&De&&(Fe=!0),Fe||pi(ae,be,Me)):pi(ae,be,null),pe.state.viewport&&pe.state.viewport.propDep&&(De=!0),Qi(ae,be,pe),ki(ae,be,pe.state,function(it){return!Ye(it)}),pe.profile&&Ye(pe.profile)||Fi(ae,be,pe,!1,"a1"),pe.contextDep=De,pe.needsContext=Ue,pe.needsFramebuffer=Fe;var Ge=pe.shader.progVar;if(Ge.contextDep&&De||Ge.propDep)Ui(ae,be,pe,null);else{var Xe=Ge.append(ae,be);if(be(ae.shared.gl,".useProgram(",Xe,".program);"),pe.shader.program)Ui(ae,be,pe,pe.shader.program);else{be(ae.shared.vao,".setVAO(null);");var Je=ae.global.def("{}"),tt=be.def(Xe,".id"),Ve=be.def(Je,"[",tt,"]");be(ae.cond(Ve).then(Ve,".call(this,a0,a1);").else(Ve,"=",Je,"[",tt,"]=",ae.link(function(it){return Ai(Ui,ae,pe,it,2)}),"(",Xe,");",Ve,".call(this,a0,a1);"))}}Object.keys(pe.state).length>0&&be(ae.shared.current,".dirty=true;")}(fe,Z),O(fe.compile(),{destroy:function(){Z.shader.program.destroy()}})}}}var Ht=function(Be,ut){if(!ut.ext_disjoint_timer_query)return null;var bt=[];function Ft(er){bt.push(er)}var _e=[];function ze(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Qe=[];function lt(er){Qe.push(er)}var vt=[];function wt(er,tr,ar){var pr=Qe.pop()||new ze;pr.startQueryIndex=er,pr.endQueryIndex=tr,pr.sum=0,pr.stats=ar,vt.push(pr)}var Lt=[],Wt=[];return{beginQuery:function(er){var tr=bt.pop()||ut.ext_disjoint_timer_query.createQueryEXT();ut.ext_disjoint_timer_query.beginQueryEXT(35007,tr),_e.push(tr),wt(_e.length-1,_e.length,er)},endQuery:function(){ut.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:wt,update:function(){var er,tr,ar=_e.length;if(ar!==0){Wt.length=Math.max(Wt.length,ar+1),Lt.length=Math.max(Lt.length,ar+1),Lt[0]=0,Wt[0]=0;var pr=0;for(er=0,tr=0;tr<_e.length;++tr){var Ur=_e[tr];ut.ext_disjoint_timer_query.getQueryObjectEXT(Ur,34919)?(pr+=ut.ext_disjoint_timer_query.getQueryObjectEXT(Ur,34918),Ft(Ur)):_e[er++]=Ur,Lt[tr+1]=pr,Wt[tr+1]=er}for(_e.length=er,er=0,tr=0;tr<vt.length;++tr){var Gr=vt[tr],$r=Gr.startQueryIndex,Kr=Gr.endQueryIndex;Gr.sum+=Lt[Kr]-Lt[$r];var jn=Wt[$r],Cn=Wt[Kr];Cn===jn?(Gr.stats.gpuTime+=Gr.sum/1e6,lt(Gr)):(Gr.startQueryIndex=jn,Gr.endQueryIndex=Cn,vt[er++]=Gr)}vt.length=er}},getNumPendingQueries:function(){return _e.length},clear:function(){bt.push.apply(bt,_e);for(var er=0;er<bt.length;er++)ut.ext_disjoint_timer_query.deleteQueryEXT(bt[er]);_e.length=0,bt.length=0},restore:function(){_e.length=0,bt.length=0}}};function vr(Be,ut){for(var bt=0;bt<Be.length;++bt)if(Be[bt]===ut)return bt;return-1}return function(Be){var ut=J(Be);if(!ut)return null;var bt=ut.gl,Ft=bt.getContextAttributes(),_e=bt.isContextLost(),ze=function($e,St){var w={};function R(ae){W.type(ae,"string","extension name must be string");var pe,be=ae.toLowerCase();try{pe=w[be]=$e.getExtension(be)}catch(De){}return!!pe}for(var fe=0;fe<St.extensions.length;++fe){var Z=St.extensions[fe];if(!R(Z))return St.onDestroy(),St.onDone('"'+Z+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return St.optionalExtensions.forEach(R),{extensions:w,restore:function(){Object.keys(w).forEach(function(ae){if(w[ae]&&!R(ae))throw new Error("(regl): error restoring extension "+ae)})}}}(bt,ut);if(!ze)return null;var Qe,lt,vt=(Qe={"":0},lt=[""],{id:function($e){var St=Qe[$e];return St||(St=Qe[$e]=lt.length,lt.push($e),St)},str:function($e){return lt[$e]}}),wt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Lt=ze.extensions,Wt=Ht(0,Lt),er=we(),tr=bt.drawingBufferWidth,ar=bt.drawingBufferHeight,pr={tick:0,time:0,viewportWidth:tr,viewportHeight:ar,framebufferWidth:tr,framebufferHeight:ar,drawingBufferWidth:tr,drawingBufferHeight:ar,pixelRatio:ut.pixelRatio},Ur=function($e,St){var w=1;St.ext_texture_filter_anisotropic&&(w=$e.getParameter(34047));var R=1,fe=1;St.webgl_draw_buffers&&(R=$e.getParameter(34852),fe=$e.getParameter(36063));var Z=!!St.oes_texture_float;if(Z){var ae=$e.createTexture();$e.bindTexture(3553,ae),$e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var pe=$e.createFramebuffer();if($e.bindFramebuffer(36160,pe),$e.framebufferTexture2D(36160,36064,3553,ae,0),$e.bindTexture(3553,null),$e.checkFramebufferStatus(36160)!==36053)Z=!1;else{$e.viewport(0,0,1,1),$e.clearColor(1,0,0,1),$e.clear(16384);var be=G.allocType(5126,4);$e.readPixels(0,0,1,1,6408,5126,be),$e.getError()?Z=!1:($e.deleteFramebuffer(pe),$e.deleteTexture(ae),Z=be[0]===1),G.freeType(be)}}var De=!0;if(typeof navigator=="undefined"||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var Ue=$e.createTexture(),Me=G.allocType(5121,36);$e.activeTexture(33984),$e.bindTexture(34067,Ue),$e.texImage2D(34069,0,6408,3,3,0,6408,5121,Me),G.freeType(Me),$e.bindTexture(34067,null),$e.deleteTexture(Ue),De=!$e.getError()}return{colorBits:[$e.getParameter(3410),$e.getParameter(3411),$e.getParameter(3412),$e.getParameter(3413)],depthBits:$e.getParameter(3414),stencilBits:$e.getParameter(3415),subpixelBits:$e.getParameter(3408),extensions:Object.keys(St).filter(function(Fe){return!!St[Fe]}),maxAnisotropic:w,maxDrawbuffers:R,maxColorAttachments:fe,pointSizeDims:$e.getParameter(33901),lineWidthDims:$e.getParameter(33902),maxViewportDims:$e.getParameter(3386),maxCombinedTextureUnits:$e.getParameter(35661),maxCubeMapSize:$e.getParameter(34076),maxRenderbufferSize:$e.getParameter(34024),maxTextureUnits:$e.getParameter(34930),maxTextureSize:$e.getParameter(3379),maxAttributes:$e.getParameter(34921),maxVertexUniforms:$e.getParameter(36347),maxVertexTextureUnits:$e.getParameter(35660),maxVaryingVectors:$e.getParameter(36348),maxFragmentUniforms:$e.getParameter(36349),glsl:$e.getParameter(35724),renderer:$e.getParameter(7937),vendor:$e.getParameter(7936),version:$e.getParameter(7938),readFloat:Z,npotTextureCube:De}}(bt,Lt),Gr=function($e,St,w,R){var fe=0,Z={};function ae(Me){this.id=fe++,this.buffer=$e.createBuffer(),this.type=Me,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,w.profile&&(this.stats={size:0})}ae.prototype.bind=function(){$e.bindBuffer(this.type,this.buffer)},ae.prototype.destroy=function(){Ue(this)};var pe=[];function be(Me,Fe,Ye){Me.byteLength=Fe.byteLength,$e.bufferData(Me.type,Fe,Ye)}function De(Me,Fe,Ye,Ge,Xe,Je){var tt,Ve;if(Me.usage=Ye,Array.isArray(Fe)){if(Me.dtype=Ge||5126,Fe.length>0)if(Array.isArray(Fe[0])){tt=Ce(Fe);for(var it=1,pt=1;pt<tt.length;++pt)it*=tt[pt];Me.dimension=it,be(Me,Ve=Ae(Fe,tt,Me.dtype),Ye),Je?Me.persistentData=Ve:G.freeType(Ve)}else if(typeof Fe[0]=="number"){Me.dimension=Xe;var Et=G.allocType(Me.dtype,Fe.length);Le(Et,Fe),be(Me,Et,Ye),Je?Me.persistentData=Et:G.freeType(Et)}else x(Fe[0])?(Me.dimension=Fe[0].length,Me.dtype=Ge||Ee(Fe[0])||5126,be(Me,Ve=Ae(Fe,[Fe.length,Fe[0].length],Me.dtype),Ye),Je?Me.persistentData=Ve:G.freeType(Ve)):W.raise("invalid buffer data")}else if(x(Fe))Me.dtype=Ge||Ee(Fe),Me.dimension=Xe,be(Me,Fe,Ye),Je&&(Me.persistentData=new Uint8Array(new Uint8Array(Fe.buffer)));else if(ne(Fe)){tt=Fe.shape;var mt=Fe.stride,xt=Fe.offset,Ot=0,yt=0,qe=0,at=0;tt.length===1?(Ot=tt[0],yt=1,qe=mt[0],at=0):tt.length===2?(Ot=tt[0],yt=tt[1],qe=mt[0],at=mt[1]):W.raise("invalid shape"),Me.dtype=Ge||Ee(Fe.data)||5126,Me.dimension=yt;var ht=G.allocType(Me.dtype,Ot*yt);Ke(ht,Fe.data,Ot,yt,qe,at,xt),be(Me,ht,Ye),Je?Me.persistentData=ht:G.freeType(ht)}else Fe instanceof ArrayBuffer?(Me.dtype=5121,Me.dimension=Xe,be(Me,Fe,Ye),Je&&(Me.persistentData=new Uint8Array(new Uint8Array(Fe)))):W.raise("invalid buffer data")}function Ue(Me){St.bufferCount--,R(Me);var Fe=Me.buffer;W(Fe,"buffer must not be deleted already"),$e.deleteBuffer(Fe),Me.buffer=null,delete Z[Me.id]}return w.profile&&(St.getTotalBufferSize=function(){var Me=0;return Object.keys(Z).forEach(function(Fe){Me+=Z[Fe].stats.size}),Me}),{create:function(Me,Fe,Ye,Ge){St.bufferCount++;var Xe=new ae(Fe);function Je(Ve){var it=35044,pt=null,Et=0,mt=0,xt=1;return Array.isArray(Ve)||x(Ve)||ne(Ve)||Ve instanceof ArrayBuffer?pt=Ve:typeof Ve=="number"?Et=0|Ve:Ve&&(W.type(Ve,"object","buffer arguments must be an object, a number or an array"),"data"in Ve&&(W(pt===null||Array.isArray(pt)||x(pt)||ne(pt),"invalid data for buffer"),pt=Ve.data),"usage"in Ve&&(W.parameter(Ve.usage,je,"invalid buffer usage"),it=je[Ve.usage]),"type"in Ve&&(W.parameter(Ve.type,Se,"invalid buffer type"),mt=Se[Ve.type]),"dimension"in Ve&&(W.type(Ve.dimension,"number","invalid dimension"),xt=0|Ve.dimension),"length"in Ve&&(W.nni(Et,"buffer length must be a nonnegative integer"),Et=0|Ve.length)),Xe.bind(),pt?De(Xe,pt,it,mt,xt,Ge):(Et&&$e.bufferData(Xe.type,Et,it),Xe.dtype=mt||5121,Xe.usage=it,Xe.dimension=xt,Xe.byteLength=Et),w.profile&&(Xe.stats.size=Xe.byteLength*Re[Xe.dtype]),Je}function tt(Ve,it){W(it+Ve.byteLength<=Xe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ve.byteLength+" starting from offset "+it+" to a buffer of size "+Xe.byteLength),$e.bufferSubData(Xe.type,it,Ve)}return Z[Xe.id]=Xe,Ye||Je(Me),Je._reglType="buffer",Je._buffer=Xe,Je.subdata=function(Ve,it){var pt,Et=0|(it||0);if(Xe.bind(),x(Ve)||Ve instanceof ArrayBuffer)tt(Ve,Et);else if(Array.isArray(Ve)){if(Ve.length>0)if(typeof Ve[0]=="number"){var mt=G.allocType(Xe.dtype,Ve.length);Le(mt,Ve),tt(mt,Et),G.freeType(mt)}else if(Array.isArray(Ve[0])||x(Ve[0])){pt=Ce(Ve);var xt=Ae(Ve,pt,Xe.dtype);tt(xt,Et),G.freeType(xt)}else W.raise("invalid buffer data")}else if(ne(Ve)){pt=Ve.shape;var Ot=Ve.stride,yt=0,qe=0,at=0,ht=0;pt.length===1?(yt=pt[0],qe=1,at=Ot[0],ht=0):pt.length===2?(yt=pt[0],qe=pt[1],at=Ot[0],ht=Ot[1]):W.raise("invalid shape");var Mt=Array.isArray(Ve.data)?Xe.dtype:Ee(Ve.data),zt=G.allocType(Mt,yt*qe);Ke(zt,Ve.data,yt,qe,at,ht,Ve.offset),tt(zt,Et),G.freeType(zt)}else W.raise("invalid data for buffer subdata");return Je},w.profile&&(Je.stats=Xe.stats),Je.destroy=function(){Ue(Xe)},Je},createStream:function(Me,Fe){var Ye=pe.pop();return Ye||(Ye=new ae(Me)),Ye.bind(),De(Ye,Fe,35040,0,1,!1),Ye},destroyStream:function(Me){pe.push(Me)},clear:function(){le(Z).forEach(Ue),pe.forEach(Ue)},getBuffer:function(Me){return Me&&Me._buffer instanceof ae?Me._buffer:null},restore:function(){le(Z).forEach(function(Me){Me.buffer=$e.createBuffer(),$e.bindBuffer(Me.type,Me.buffer),$e.bufferData(Me.type,Me.persistentData||Me.byteLength,Me.usage)})},_initBuffer:De}}(bt,wt,ut,function($e){return $r.destroyBuffer($e)}),$r=function($e,St,w,R,fe){for(var Z=w.maxAttributes,ae=new Array(Z),pe=0;pe<Z;++pe)ae[pe]=new ri;var be=0,De={},Ue={Record:ri,scope:{},state:ae,currentVAO:null,targetVAO:null,restore:Me()?function(){Me()&&le(De).forEach(function(Ge){Ge.refresh()})}:function(){},createVAO:function(Ge){var Xe=new Ye;function Je(tt){W(Array.isArray(tt),"arguments to vertex array constructor must be an array"),W(tt.length<Z,"too many attributes"),W(tt.length>0,"must specify at least one attribute");var Ve={},it=Xe.attributes;it.length=tt.length;for(var pt=0;pt<tt.length;++pt){var Et,mt=tt[pt],xt=it[pt]=new ri,Ot=mt.data||mt;Array.isArray(Ot)||x(Ot)||ne(Ot)?(Xe.buffers[pt]&&(Et=Xe.buffers[pt],x(Ot)&&Et._buffer.byteLength>=Ot.byteLength?Et.subdata(Ot):(Et.destroy(),Xe.buffers[pt]=null)),Xe.buffers[pt]||(Et=Xe.buffers[pt]=fe.create(mt,34962,!1,!0)),xt.buffer=fe.getBuffer(Et),xt.size=0|xt.buffer.dimension,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1,Ve[pt]=1):fe.getBuffer(mt)?(xt.buffer=fe.getBuffer(mt),xt.size=0|xt.buffer.dimension,xt.normalized=!1,xt.type=xt.buffer.dtype,xt.offset=0,xt.stride=0,xt.divisor=0,xt.state=1):fe.getBuffer(mt.buffer)?(xt.buffer=fe.getBuffer(mt.buffer),xt.size=0|(+mt.size||xt.buffer.dimension),xt.normalized=!!mt.normalized||!1,"type"in mt?(W.parameter(mt.type,Se,"invalid buffer type"),xt.type=Se[mt.type]):xt.type=xt.buffer.dtype,xt.offset=0|(mt.offset||0),xt.stride=0|(mt.stride||0),xt.divisor=0|(mt.divisor||0),xt.state=1,W(xt.size>=1&&xt.size<=4,"size must be between 1 and 4"),W(xt.offset>=0,"invalid offset"),W(xt.stride>=0&&xt.stride<=255,"stride must be between 0 and 255"),W(xt.divisor>=0,"divisor must be positive"),W(!xt.divisor||!!St.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in mt?(W(pt>0,"first attribute must not be a constant"),xt.x=+mt.x||0,xt.y=+mt.y||0,xt.z=+mt.z||0,xt.w=+mt.w||0,xt.state=2):W(!1,"invalid attribute spec for location "+pt)}for(var yt=0;yt<Xe.buffers.length;++yt)!Ve[yt]&&Xe.buffers[yt]&&(Xe.buffers[yt].destroy(),Xe.buffers[yt]=null);return Xe.refresh(),Je}return R.vaoCount+=1,Je.destroy=function(){for(var tt=0;tt<Xe.buffers.length;++tt)Xe.buffers[tt]&&Xe.buffers[tt].destroy();Xe.buffers.length=0,Xe.destroy()},Je._vao=Xe,Je._reglType="vao",Je(Ge)},getVAO:function(Ge){return typeof Ge=="function"&&Ge._vao?Ge._vao:null},destroyBuffer:function(Ge){for(var Xe=0;Xe<ae.length;++Xe){var Je=ae[Xe];Je.buffer===Ge&&($e.disableVertexAttribArray(Xe),Je.buffer=null)}},setVAO:Me()?function(Ge){if(Ge!==Ue.currentVAO){var Xe=Me();Ge?Xe.bindVertexArrayOES(Ge.vao):Xe.bindVertexArrayOES(null),Ue.currentVAO=Ge}}:function(Ge){if(Ge!==Ue.currentVAO){if(Ge)Ge.bindAttrs();else for(var Xe=Fe(),Je=0;Je<ae.length;++Je){var tt=ae[Je];tt.buffer?($e.enableVertexAttribArray(Je),$e.vertexAttribPointer(Je,tt.size,tt.type,tt.normalized,tt.stride,tt.offfset),Xe&&tt.divisor&&Xe.vertexAttribDivisorANGLE(Je,tt.divisor)):($e.disableVertexAttribArray(Je),$e.vertexAttrib4f(Je,tt.x,tt.y,tt.z,tt.w))}Ue.currentVAO=Ge}},clear:Me()?function(){le(De).forEach(function(Ge){Ge.destroy()})}:function(){}};function Me(){return St.oes_vertex_array_object}function Fe(){return St.angle_instanced_arrays}function Ye(){this.id=++be,this.attributes=[];var Ge=Me();this.vao=Ge?Ge.createVertexArrayOES():null,De[this.id]=this,this.buffers=[]}return Ye.prototype.bindAttrs=function(){for(var Ge=Fe(),Xe=this.attributes,Je=0;Je<Xe.length;++Je){var tt=Xe[Je];tt.buffer?($e.enableVertexAttribArray(Je),$e.bindBuffer(34962,tt.buffer.buffer),$e.vertexAttribPointer(Je,tt.size,tt.type,tt.normalized,tt.stride,tt.offset),Ge&&tt.divisor&&Ge.vertexAttribDivisorANGLE(Je,tt.divisor)):($e.disableVertexAttribArray(Je),$e.vertexAttrib4f(Je,tt.x,tt.y,tt.z,tt.w))}for(var Ve=Xe.length;Ve<Z;++Ve)$e.disableVertexAttribArray(Ve)},Ye.prototype.refresh=function(){var Ge=Me();Ge&&(Ge.bindVertexArrayOES(this.vao),this.bindAttrs(),Ue.currentVAO=this)},Ye.prototype.destroy=function(){if(this.vao){var Ge=Me();this===Ue.currentVAO&&(Ue.currentVAO=null,Ge.bindVertexArrayOES(null)),Ge.deleteVertexArrayOES(this.vao),this.vao=null}De[this.id]&&(delete De[this.id],R.vaoCount-=1)},Ue}(bt,Lt,Ur,wt,Gr),Kr=function($e,St,w,R){var fe={},Z=0,ae={uint8:5121,uint16:5123};function pe(Me){this.id=Z++,fe[this.id]=this,this.buffer=Me,this.primType=4,this.vertCount=0,this.type=0}St.oes_element_index_uint&&(ae.uint32=5125),pe.prototype.bind=function(){this.buffer.bind()};var be=[];function De(Me,Fe,Ye,Ge,Xe,Je,tt){var Ve;if(Me.buffer.bind(),Fe){var it=tt;tt||x(Fe)&&(!ne(Fe)||x(Fe.data))||(it=St.oes_element_index_uint?5125:5123),w._initBuffer(Me.buffer,Fe,Ye,it,3)}else $e.bufferData(34963,Je,Ye),Me.buffer.dtype=Ve||5121,Me.buffer.usage=Ye,Me.buffer.dimension=3,Me.buffer.byteLength=Je;if(Ve=tt,!tt){switch(Me.buffer.dtype){case 5121:case 5120:Ve=5121;break;case 5123:case 5122:Ve=5123;break;case 5125:case 5124:Ve=5125;break;default:W.raise("unsupported type for element array")}Me.buffer.dtype=Ve}Me.type=Ve,W(Ve!==5125||!!St.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var pt=Xe;pt<0&&(pt=Me.buffer.byteLength,Ve===5123?pt>>=1:Ve===5125&&(pt>>=2)),Me.vertCount=pt;var Et=Ge;if(Ge<0){Et=4;var mt=Me.buffer.dimension;mt===1&&(Et=0),mt===2&&(Et=1),mt===3&&(Et=4)}Me.primType=Et}function Ue(Me){R.elementsCount--,W(Me.buffer!==null,"must not double destroy elements"),delete fe[Me.id],Me.buffer.destroy(),Me.buffer=null}return{create:function(Me,Fe){var Ye=w.create(null,34963,!0),Ge=new pe(Ye._buffer);function Xe(Je){if(Je)if(typeof Je=="number")Ye(Je),Ge.primType=4,Ge.vertCount=0|Je,Ge.type=5121;else{var tt=null,Ve=35044,it=-1,pt=-1,Et=0,mt=0;Array.isArray(Je)||x(Je)||ne(Je)?tt=Je:(W.type(Je,"object","invalid arguments for elements"),"data"in Je&&(tt=Je.data,W(Array.isArray(tt)||x(tt)||ne(tt),"invalid data for element buffer")),"usage"in Je&&(W.parameter(Je.usage,je,"invalid element buffer usage"),Ve=je[Je.usage]),"primitive"in Je&&(W.parameter(Je.primitive,et,"invalid element buffer primitive"),it=et[Je.primitive]),"count"in Je&&(W(typeof Je.count=="number"&&Je.count>=0,"invalid vertex count for elements"),pt=0|Je.count),"type"in Je&&(W.parameter(Je.type,ae,"invalid buffer type"),mt=ae[Je.type]),"length"in Je?Et=0|Je.length:(Et=pt,mt===5123||mt===5122?Et*=2:mt!==5125&&mt!==5124||(Et*=4))),De(Ge,tt,Ve,it,pt,Et,mt)}else Ye(),Ge.primType=4,Ge.vertCount=0,Ge.type=5121;return Xe}return R.elementsCount++,Xe(Me),Xe._reglType="elements",Xe._elements=Ge,Xe.subdata=function(Je,tt){return Ye.subdata(Je,tt),Xe},Xe.destroy=function(){Ue(Ge)},Xe},createStream:function(Me){var Fe=be.pop();return Fe||(Fe=new pe(w.create(null,34963,!0,!1)._buffer)),De(Fe,Me,35040,-1,-1,0,0),Fe},destroyStream:function(Me){be.push(Me)},getElements:function(Me){return typeof Me=="function"&&Me._elements instanceof pe?Me._elements:null},clear:function(){le(fe).forEach(Ue)}}}(bt,Lt,Gr,wt),jn=function($e,St,w,R){var fe={},Z={};function ae(Ge,Xe,Je,tt){this.name=Ge,this.id=Xe,this.location=Je,this.info=tt}function pe(Ge,Xe){for(var Je=0;Je<Ge.length;++Je)if(Ge[Je].id===Xe.id)return void(Ge[Je].location=Xe.location);Ge.push(Xe)}function be(Ge,Xe,Je){var tt=Ge===35632?fe:Z,Ve=tt[Xe];if(!Ve){var it=St.str(Xe);Ve=$e.createShader(Ge),$e.shaderSource(Ve,it),$e.compileShader(Ve),W.shaderError($e,Ve,it,Ge,Je),tt[Xe]=Ve}return Ve}var De={},Ue=[],Me=0;function Fe(Ge,Xe){this.id=Me++,this.fragId=Ge,this.vertId=Xe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,R.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ye(Ge,Xe,Je){var tt,Ve,it=be(35632,Ge.fragId),pt=be(35633,Ge.vertId),Et=Ge.program=$e.createProgram();if($e.attachShader(Et,it),$e.attachShader(Et,pt),Je)for(tt=0;tt<Je.length;++tt){var mt=Je[tt];$e.bindAttribLocation(Et,mt[0],mt[1])}$e.linkProgram(Et),W.linkError($e,Et,St.str(Ge.fragId),St.str(Ge.vertId),Xe);var xt=$e.getProgramParameter(Et,35718);R.profile&&(Ge.stats.uniformsCount=xt);var Ot=Ge.uniforms;for(tt=0;tt<xt;++tt)if(Ve=$e.getActiveUniform(Et,tt))if(Ve.size>1)for(var yt=0;yt<Ve.size;++yt){var qe=Ve.name.replace("[0]","["+yt+"]");pe(Ot,new ae(qe,St.id(qe),$e.getUniformLocation(Et,qe),Ve))}else pe(Ot,new ae(Ve.name,St.id(Ve.name),$e.getUniformLocation(Et,Ve.name),Ve));var at=$e.getProgramParameter(Et,35721);R.profile&&(Ge.stats.attributesCount=at);var ht=Ge.attributes;for(tt=0;tt<at;++tt)(Ve=$e.getActiveAttrib(Et,tt))&&pe(ht,new ae(Ve.name,St.id(Ve.name),$e.getAttribLocation(Et,Ve.name),Ve))}return R.profile&&(w.getMaxUniformsCount=function(){var Ge=0;return Ue.forEach(function(Xe){Xe.stats.uniformsCount>Ge&&(Ge=Xe.stats.uniformsCount)}),Ge},w.getMaxAttributesCount=function(){var Ge=0;return Ue.forEach(function(Xe){Xe.stats.attributesCount>Ge&&(Ge=Xe.stats.attributesCount)}),Ge}),{clear:function(){var Ge=$e.deleteShader.bind($e);le(fe).forEach(Ge),fe={},le(Z).forEach(Ge),Z={},Ue.forEach(function(Xe){$e.deleteProgram(Xe.program)}),Ue.length=0,De={},w.shaderCount=0},program:function(Ge,Xe,Je,tt){W.command(Ge>=0,"missing vertex shader",Je),W.command(Xe>=0,"missing fragment shader",Je);var Ve=De[Xe];Ve||(Ve=De[Xe]={});var it=Ve[Ge];if(it&&(it.refCount++,!tt))return it;var pt=new Fe(Xe,Ge);return w.shaderCount++,Ye(pt,Je,tt),it||(Ve[Ge]=pt),Ue.push(pt),O(pt,{destroy:function(){if(pt.refCount--,pt.refCount<=0){$e.deleteProgram(pt.program);var Et=Ue.indexOf(pt);Ue.splice(Et,1),w.shaderCount--}Ve[pt.vertId].refCount<=0&&($e.deleteShader(Z[pt.vertId]),delete Z[pt.vertId],delete De[pt.fragId][pt.vertId]),Object.keys(De[pt.fragId]).length||($e.deleteShader(fe[pt.fragId]),delete fe[pt.fragId],delete De[pt.fragId])}})},restore:function(){fe={},Z={};for(var Ge=0;Ge<Ue.length;++Ge)Ye(Ue[Ge],null,Ue[Ge].attributes.map(function(Xe){return[Xe.location,Xe.name]}))},shader:be,frag:-1,vert:-1}}(bt,vt,wt,ut),Cn=Rn(bt,Lt,Ur,function(){Mn.procs.poll()},pr,wt,ut),qn=function($e,St,w,R,fe){var Z={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};St.ext_srgb&&(Z.srgba=35907),St.ext_color_buffer_half_float&&(Z.rgba16f=34842,Z.rgb16f=34843),St.webgl_color_buffer_float&&(Z.rgba32f=34836);var ae=[];Object.keys(Z).forEach(function(Me){var Fe=Z[Me];ae[Fe]=Me});var pe=0,be={};function De(Me){this.id=pe++,this.refCount=1,this.renderbuffer=Me,this.format=32854,this.width=0,this.height=0,fe.profile&&(this.stats={size:0})}function Ue(Me){var Fe=Me.renderbuffer;W(Fe,"must not double destroy renderbuffer"),$e.bindRenderbuffer(36161,null),$e.deleteRenderbuffer(Fe),Me.renderbuffer=null,Me.refCount=0,delete be[Me.id],R.renderbufferCount--}return De.prototype.decRef=function(){--this.refCount<=0&&Ue(this)},fe.profile&&(R.getTotalRenderbufferSize=function(){var Me=0;return Object.keys(be).forEach(function(Fe){Me+=be[Fe].stats.size}),Me}),{create:function(Me,Fe){var Ye=new De($e.createRenderbuffer());function Ge(Xe,Je){var tt=0,Ve=0,it=32854;if(_(Xe)==="object"&&Xe){var pt=Xe;if("shape"in pt){var Et=pt.shape;W(Array.isArray(Et)&&Et.length>=2,"invalid renderbuffer shape"),tt=0|Et[0],Ve=0|Et[1]}else"radius"in pt&&(tt=Ve=0|pt.radius),"width"in pt&&(tt=0|pt.width),"height"in pt&&(Ve=0|pt.height);"format"in pt&&(W.parameter(pt.format,Z,"invalid renderbuffer format"),it=Z[pt.format])}else typeof Xe=="number"?(tt=0|Xe,Ve=typeof Je=="number"?0|Je:tt):Xe?W.raise("invalid arguments to renderbuffer constructor"):tt=Ve=1;if(W(tt>0&&Ve>0&&tt<=w.maxRenderbufferSize&&Ve<=w.maxRenderbufferSize,"invalid renderbuffer size"),tt!==Ye.width||Ve!==Ye.height||it!==Ye.format)return Ge.width=Ye.width=tt,Ge.height=Ye.height=Ve,Ye.format=it,$e.bindRenderbuffer(36161,Ye.renderbuffer),$e.renderbufferStorage(36161,it,tt,Ve),W($e.getError()===0,"invalid render buffer format"),fe.profile&&(Ye.stats.size=Er(Ye.format,Ye.width,Ye.height)),Ge.format=ae[Ye.format],Ge}return be[Ye.id]=Ye,R.renderbufferCount++,Ge(Me,Fe),Ge.resize=function(Xe,Je){var tt=0|Xe,Ve=0|Je||tt;return tt===Ye.width&&Ve===Ye.height||(W(tt>0&&Ve>0&&tt<=w.maxRenderbufferSize&&Ve<=w.maxRenderbufferSize,"invalid renderbuffer size"),Ge.width=Ye.width=tt,Ge.height=Ye.height=Ve,$e.bindRenderbuffer(36161,Ye.renderbuffer),$e.renderbufferStorage(36161,Ye.format,tt,Ve),W($e.getError()===0,"invalid render buffer format"),fe.profile&&(Ye.stats.size=Er(Ye.format,Ye.width,Ye.height))),Ge},Ge._reglType="renderbuffer",Ge._renderbuffer=Ye,fe.profile&&(Ge.stats=Ye.stats),Ge.destroy=function(){Ye.decRef()},Ge},clear:function(){le(be).forEach(Ue)},restore:function(){le(be).forEach(function(Me){Me.renderbuffer=$e.createRenderbuffer(),$e.bindRenderbuffer(36161,Me.renderbuffer),$e.renderbufferStorage(36161,Me.format,Me.width,Me.height)}),$e.bindRenderbuffer(36161,null)}}}(bt,Lt,Ur,wt,ut),Qr=function($e,St,w,R,fe,Z){var ae={cur:null,next:null,dirty:!1,setFBO:null},pe=["rgba"],be=["rgba4","rgb565","rgb5 a1"];St.ext_srgb&&be.push("srgba"),St.ext_color_buffer_half_float&&be.push("rgba16f","rgb16f"),St.webgl_color_buffer_float&&be.push("rgba32f");var De=["uint8"];function Ue(yt,qe,at){this.target=yt,this.texture=qe,this.renderbuffer=at;var ht=0,Mt=0;qe?(ht=qe.width,Mt=qe.height):at&&(ht=at.width,Mt=at.height),this.width=ht,this.height=Mt}function Me(yt){yt&&(yt.texture&&yt.texture._texture.decRef(),yt.renderbuffer&&yt.renderbuffer._renderbuffer.decRef())}function Fe(yt,qe,at){if(yt)if(yt.texture){var ht=yt.texture._texture,Mt=Math.max(1,ht.width),zt=Math.max(1,ht.height);W(Mt===qe&&zt===at,"inconsistent width/height for supplied texture"),ht.refCount+=1}else{var Ut=yt.renderbuffer._renderbuffer;W(Ut.width===qe&&Ut.height===at,"inconsistent width/height for renderbuffer"),Ut.refCount+=1}}function Ye(yt,qe){qe&&(qe.texture?$e.framebufferTexture2D(36160,yt,qe.target,qe.texture._texture.texture,0):$e.framebufferRenderbuffer(36160,yt,36161,qe.renderbuffer._renderbuffer.renderbuffer))}function Ge(yt){var qe=3553,at=null,ht=null,Mt=yt;_(yt)==="object"&&(Mt=yt.data,"target"in yt&&(qe=0|yt.target)),W.type(Mt,"function","invalid attachment data");var zt=Mt._reglType;return zt==="texture2d"?(at=Mt,W(qe===3553)):zt==="textureCube"?(at=Mt,W(qe>=34069&&qe<34075,"invalid cube map target")):zt==="renderbuffer"?(ht=Mt,qe=36161):W.raise("invalid regl object for attachment"),new Ue(qe,at,ht)}function Xe(yt,qe,at,ht,Mt){if(at){var zt=R.create2D({width:yt,height:qe,format:ht,type:Mt});return zt._texture.refCount=0,new Ue(3553,zt,null)}var Ut=fe.create({width:yt,height:qe,format:ht});return Ut._renderbuffer.refCount=0,new Ue(36161,null,Ut)}function Je(yt){return yt&&(yt.texture||yt.renderbuffer)}function tt(yt,qe,at){yt&&(yt.texture?yt.texture.resize(qe,at):yt.renderbuffer&&yt.renderbuffer.resize(qe,at),yt.width=qe,yt.height=at)}St.oes_texture_half_float&&De.push("half float","float16"),St.oes_texture_float&&De.push("float","float32");var Ve=0,it={};function pt(){this.id=Ve++,it[this.id]=this,this.framebuffer=$e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Et(yt){yt.colorAttachments.forEach(Me),Me(yt.depthAttachment),Me(yt.stencilAttachment),Me(yt.depthStencilAttachment)}function mt(yt){var qe=yt.framebuffer;W(qe,"must not double destroy framebuffer"),$e.deleteFramebuffer(qe),yt.framebuffer=null,Z.framebufferCount--,delete it[yt.id]}function xt(yt){var qe;$e.bindFramebuffer(36160,yt.framebuffer);var at=yt.colorAttachments;for(qe=0;qe<at.length;++qe)Ye(36064+qe,at[qe]);for(qe=at.length;qe<w.maxColorAttachments;++qe)$e.framebufferTexture2D(36160,36064+qe,3553,null,0);$e.framebufferTexture2D(36160,33306,3553,null,0),$e.framebufferTexture2D(36160,36096,3553,null,0),$e.framebufferTexture2D(36160,36128,3553,null,0),Ye(36096,yt.depthAttachment),Ye(36128,yt.stencilAttachment),Ye(33306,yt.depthStencilAttachment);var ht=$e.checkFramebufferStatus(36160);$e.isContextLost()||ht===36053||W.raise("framebuffer configuration not supported, status = "+Un[ht]),$e.bindFramebuffer(36160,ae.next?ae.next.framebuffer:null),ae.cur=ae.next,$e.getError()}function Ot(yt,qe){var at=new pt;function ht(Mt,zt){var Ut;W(ae.next!==at,"can not update framebuffer which is currently in use");var Xt=0,fr=0,Or=!0,kr=!0,mr=null,sr=!0,an="rgba",sn="uint8",Ti=1,Vi=null,lo=null,ir=null,ga=!1;if(typeof Mt=="number")Xt=0|Mt,fr=0|zt||Xt;else if(Mt){W.type(Mt,"object","invalid arguments for framebuffer");var Wr=Mt;if("shape"in Wr){var ko=Wr.shape;W(Array.isArray(ko)&&ko.length>=2,"invalid shape for framebuffer"),Xt=ko[0],fr=ko[1]}else"radius"in Wr&&(Xt=fr=Wr.radius),"width"in Wr&&(Xt=Wr.width),"height"in Wr&&(fr=Wr.height);("color"in Wr||"colors"in Wr)&&(mr=Wr.color||Wr.colors,Array.isArray(mr)&&W(mr.length===1||St.webgl_draw_buffers,"multiple render targets not supported")),mr||("colorCount"in Wr&&(Ti=0|Wr.colorCount,W(Ti>0,"invalid color buffer count")),"colorTexture"in Wr&&(sr=!!Wr.colorTexture,an="rgba4"),"colorType"in Wr&&(sn=Wr.colorType,sr?(W(St.oes_texture_float||!(sn==="float"||sn==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),W(St.oes_texture_half_float||!(sn==="half float"||sn==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):sn==="half float"||sn==="float16"?(W(St.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),an="rgba16f"):sn!=="float"&&sn!=="float32"||(W(St.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),an="rgba32f"),W.oneOf(sn,De,"invalid color type")),"colorFormat"in Wr&&(an=Wr.colorFormat,pe.indexOf(an)>=0?sr=!0:be.indexOf(an)>=0?sr=!1:sr?W.oneOf(Wr.colorFormat,pe,"invalid color format for texture"):W.oneOf(Wr.colorFormat,be,"invalid color format for renderbuffer"))),("depthTexture"in Wr||"depthStencilTexture"in Wr)&&(ga=!(!Wr.depthTexture&&!Wr.depthStencilTexture),W(!ga||St.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Wr&&(typeof Wr.depth=="boolean"?Or=Wr.depth:(Vi=Wr.depth,kr=!1)),"stencil"in Wr&&(typeof Wr.stencil=="boolean"?kr=Wr.stencil:(lo=Wr.stencil,Or=!1)),"depthStencil"in Wr&&(typeof Wr.depthStencil=="boolean"?Or=kr=Wr.depthStencil:(ir=Wr.depthStencil,Or=!1,kr=!1))}else Xt=fr=1;var Nt=null,so=null,vo=null,uo=null;if(Array.isArray(mr))Nt=mr.map(Ge);else if(mr)Nt=[Ge(mr)];else for(Nt=new Array(Ti),Ut=0;Ut<Ti;++Ut)Nt[Ut]=Xe(Xt,fr,sr,an,sn);W(St.webgl_draw_buffers||Nt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),W(Nt.length<=w.maxColorAttachments,"too many color attachments, not supported"),Xt=Xt||Nt[0].width,fr=fr||Nt[0].height,Vi?so=Ge(Vi):Or&&!kr&&(so=Xe(Xt,fr,ga,"depth","uint32")),lo?vo=Ge(lo):kr&&!Or&&(vo=Xe(Xt,fr,!1,"stencil","uint8")),ir?uo=Ge(ir):!Vi&&!lo&&kr&&Or&&(uo=Xe(Xt,fr,ga,"depth stencil","depth stencil")),W(!!Vi+!!lo+!!ir<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Da=null;for(Ut=0;Ut<Nt.length;++Ut)if(Fe(Nt[Ut],Xt,fr),W(!Nt[Ut]||Nt[Ut].texture&&ln.indexOf(Nt[Ut].texture._texture.format)>=0||Nt[Ut].renderbuffer&&Qn.indexOf(Nt[Ut].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ut+" is invalid"),Nt[Ut]&&Nt[Ut].texture){var Ra=yn[Nt[Ut].texture._texture.format]*mn[Nt[Ut].texture._texture.type];Da===null?Da=Ra:W(Da===Ra,"all color attachments much have the same number of bits per pixel.")}return Fe(so,Xt,fr),W(!so||so.texture&&so.texture._texture.format===6402||so.renderbuffer&&so.renderbuffer._renderbuffer.format===33189,"invalid depth attachment for framebuffer object"),Fe(vo,Xt,fr),W(!vo||vo.renderbuffer&&vo.renderbuffer._renderbuffer.format===36168,"invalid stencil attachment for framebuffer object"),Fe(uo,Xt,fr),W(!uo||uo.texture&&uo.texture._texture.format===34041||uo.renderbuffer&&uo.renderbuffer._renderbuffer.format===34041,"invalid depth-stencil attachment for framebuffer object"),Et(at),at.width=Xt,at.height=fr,at.colorAttachments=Nt,at.depthAttachment=so,at.stencilAttachment=vo,at.depthStencilAttachment=uo,ht.color=Nt.map(Je),ht.depth=Je(so),ht.stencil=Je(vo),ht.depthStencil=Je(uo),ht.width=at.width,ht.height=at.height,xt(at),ht}return Z.framebufferCount++,ht(yt,qe),O(ht,{resize:function(Mt,zt){W(ae.next!==at,"can not resize a framebuffer which is currently in use");var Ut=Math.max(0|Mt,1),Xt=Math.max(0|zt||Ut,1);if(Ut===at.width&&Xt===at.height)return ht;for(var fr=at.colorAttachments,Or=0;Or<fr.length;++Or)tt(fr[Or],Ut,Xt);return tt(at.depthAttachment,Ut,Xt),tt(at.stencilAttachment,Ut,Xt),tt(at.depthStencilAttachment,Ut,Xt),at.width=ht.width=Ut,at.height=ht.height=Xt,xt(at),ht},_reglType:"framebuffer",_framebuffer:at,destroy:function(){mt(at),Et(at)},use:function(Mt){ae.setFBO({framebuffer:ht},Mt)}})}return O(ae,{getFramebuffer:function(yt){if(typeof yt=="function"&&yt._reglType==="framebuffer"){var qe=yt._framebuffer;if(qe instanceof pt)return qe}return null},create:Ot,createCube:function(yt){var qe=Array(6);function at(ht){var Mt;W(qe.indexOf(ae.next)<0,"can not update framebuffer which is currently in use");var zt,Ut={color:null},Xt=0,fr=null,Or="rgba",kr="uint8",mr=1;if(typeof ht=="number")Xt=0|ht;else if(ht){W.type(ht,"object","invalid arguments for framebuffer");var sr=ht;if("shape"in sr){var an=sr.shape;W(Array.isArray(an)&&an.length>=2,"invalid shape for framebuffer"),W(an[0]===an[1],"cube framebuffer must be square"),Xt=an[0]}else"radius"in sr&&(Xt=0|sr.radius),"width"in sr?(Xt=0|sr.width,"height"in sr&&W(sr.height===Xt,"must be square")):"height"in sr&&(Xt=0|sr.height);("color"in sr||"colors"in sr)&&(fr=sr.color||sr.colors,Array.isArray(fr)&&W(fr.length===1||St.webgl_draw_buffers,"multiple render targets not supported")),fr||("colorCount"in sr&&(mr=0|sr.colorCount,W(mr>0,"invalid color buffer count")),"colorType"in sr&&(W.oneOf(sr.colorType,De,"invalid color type"),kr=sr.colorType),"colorFormat"in sr&&(Or=sr.colorFormat,W.oneOf(sr.colorFormat,pe,"invalid color format for texture"))),"depth"in sr&&(Ut.depth=sr.depth),"stencil"in sr&&(Ut.stencil=sr.stencil),"depthStencil"in sr&&(Ut.depthStencil=sr.depthStencil)}else Xt=1;if(fr)if(Array.isArray(fr))for(zt=[],Mt=0;Mt<fr.length;++Mt)zt[Mt]=fr[Mt];else zt=[fr];else{zt=Array(mr);var sn={radius:Xt,format:Or,type:kr};for(Mt=0;Mt<mr;++Mt)zt[Mt]=R.createCube(sn)}for(Ut.color=Array(zt.length),Mt=0;Mt<zt.length;++Mt){var Ti=zt[Mt];W(typeof Ti=="function"&&Ti._reglType==="textureCube","invalid cube map"),Xt=Xt||Ti.width,W(Ti.width===Xt&&Ti.height===Xt,"invalid cube map shape"),Ut.color[Mt]={target:34069,data:zt[Mt]}}for(Mt=0;Mt<6;++Mt){for(var Vi=0;Vi<zt.length;++Vi)Ut.color[Vi].target=34069+Mt;Mt>0&&(Ut.depth=qe[0].depth,Ut.stencil=qe[0].stencil,Ut.depthStencil=qe[0].depthStencil),qe[Mt]?qe[Mt](Ut):qe[Mt]=Ot(Ut)}return O(at,{width:Xt,height:Xt,color:zt})}return at(yt),O(at,{faces:qe,resize:function(ht){var Mt,zt=0|ht;if(W(zt>0&&zt<=w.maxCubeMapSize,"invalid radius for cube fbo"),zt===at.width)return at;var Ut=at.color;for(Mt=0;Mt<Ut.length;++Mt)Ut[Mt].resize(zt);for(Mt=0;Mt<6;++Mt)qe[Mt].resize(zt);return at.width=at.height=zt,at},_reglType:"framebufferCube",destroy:function(){qe.forEach(function(ht){ht.destroy()})}})},clear:function(){le(it).forEach(mt)},restore:function(){ae.cur=null,ae.next=null,ae.dirty=!0,le(it).forEach(function(yt){yt.framebuffer=$e.createFramebuffer(),xt(yt)})}})}(bt,Lt,Ur,Cn,qn,wt),Mn=Ct(bt,vt,Lt,Ur,Gr,Kr,0,Qr,{},$r,jn,{elements:null,primitive:4,count:-1,offset:0,instances:-1},pr,Wt,ut),ai=Ei(bt,Qr,Mn.procs.poll,pr,Ft,Lt,Ur),Sn=Mn.next,si=bt.canvas,Jr=[],Mo=[],Gi=[],$i=[ut.onDestroy],nn=null;function pi(){if(Jr.length===0)return Wt&&Wt.update(),void(nn=null);nn=ie.next(pi),ao();for(var $e=Jr.length-1;$e>=0;--$e){var St=Jr[$e];St&&St(pr,null,0)}bt.flush(),Wt&&Wt.update()}function Qi(){!nn&&Jr.length>0&&(nn=ie.next(pi))}function ki(){nn&&(ie.cancel(pi),nn=null)}function Gn($e){$e.preventDefault(),_e=!0,ki(),Mo.forEach(function(St){St()})}function Fi($e){bt.getError(),_e=!1,ze.restore(),jn.restore(),Gr.restore(),Cn.restore(),qn.restore(),Qr.restore(),$r.restore(),Wt&&Wt.restore(),Mn.procs.refresh(),Qi(),Gi.forEach(function(St){St()})}function Ni($e){function St(Fe,Ye){var Ge={},Xe={};return Object.keys(Fe).forEach(function(Je){var tt=Fe[Je];if(V.isDynamic(tt))Xe[Je]=V.unbox(tt,Je);else{if(Ye&&Array.isArray(tt)){for(var Ve=0;Ve<tt.length;++Ve)if(V.isDynamic(tt[Ve]))return void(Xe[Je]=V.unbox(tt,Je))}Ge[Je]=tt}}),{dynamic:Xe,static:Ge}}W(!!$e,"invalid args to regl({...})"),W.type($e,"object","invalid args to regl({...})");var w=St($e.context||{},!0),R=St($e.uniforms||{},!0),fe=St($e.attributes||{},!1),Z=St(function(Fe){var Ye=O({},Fe);function Ge(Xe){if(Xe in Ye){var Je=Ye[Xe];delete Ye[Xe],Object.keys(Je).forEach(function(tt){Ye[Xe+"."+tt]=Je[tt]})}}return delete Ye.uniforms,delete Ye.attributes,delete Ye.context,delete Ye.vao,"stencil"in Ye&&Ye.stencil.op&&(Ye.stencil.opBack=Ye.stencil.opFront=Ye.stencil.op,delete Ye.stencil.op),Ge("blend"),Ge("depth"),Ge("cull"),Ge("stencil"),Ge("polygonOffset"),Ge("scissor"),Ge("sample"),"vao"in Fe&&(Ye.vao=Fe.vao),Ye}($e),!1),ae={gpuTime:0,cpuTime:0,count:0},pe=Mn.compile(Z,fe,R,w,ae),be=pe.draw,De=pe.batch,Ue=pe.scope,Me=[];return O(function(Fe,Ye){var Ge;if(_e&&W.raise("context lost"),typeof Fe=="function")return Ue.call(this,null,Fe,0);if(typeof Ye=="function")if(typeof Fe=="number")for(Ge=0;Ge<Fe;++Ge)Ue.call(this,null,Ye,Ge);else{if(!Array.isArray(Fe))return Ue.call(this,Fe,Ye,0);for(Ge=0;Ge<Fe.length;++Ge)Ue.call(this,Fe[Ge],Ye,Ge)}else if(typeof Fe=="number"){if(Fe>0)return De.call(this,function(Xe){for(;Me.length<Xe;)Me.push(null);return Me}(0|Fe),0|Fe)}else{if(!Array.isArray(Fe))return be.call(this,Fe);if(Fe.length)return De.call(this,Fe,Fe.length)}},{stats:ae,destroy:function(){pe.destroy()}})}si&&(si.addEventListener("webglcontextlost",Gn,!1),si.addEventListener("webglcontextrestored",Fi,!1));var fi=Qr.setFBO=Ni({framebuffer:V.define.call(null,1,"framebuffer")});function zi($e,St){var w=0;Mn.procs.poll();var R=St.color;R&&(bt.clearColor(+R[0]||0,+R[1]||0,+R[2]||0,+R[3]||0),w|=16384),"depth"in St&&(bt.clearDepth(+St.depth),w|=256),"stencil"in St&&(bt.clearStencil(0|St.stencil),w|=1024),W(!!w,"called regl.clear with no buffer specified"),bt.clear(w)}function Ai($e){return W.type($e,"function","regl.frame() callback must be a function"),Jr.push($e),Qi(),{cancel:function(){var St=vr(Jr,$e);W(St>=0,"cannot cancel a frame twice"),Jr[St]=function w(){var R=vr(Jr,w);Jr[R]=Jr[Jr.length-1],Jr.length-=1,Jr.length<=0&&ki()}}}}function Ji(){var $e=Sn.viewport,St=Sn.scissor_box;$e[0]=$e[1]=St[0]=St[1]=0,pr.viewportWidth=pr.framebufferWidth=pr.drawingBufferWidth=$e[2]=St[2]=bt.drawingBufferWidth,pr.viewportHeight=pr.framebufferHeight=pr.drawingBufferHeight=$e[3]=St[3]=bt.drawingBufferHeight}function ao(){pr.tick+=1,pr.time=Ci(),Ji(),Mn.procs.poll()}function Ui(){Cn.refresh(),Ji(),Mn.procs.refresh(),Wt&&Wt.update()}function Ci(){return(we()-er)/1e3}Ui();var _t=O(Ni,{clear:function($e){if(W(_($e)==="object"&&$e,"regl.clear() takes an object as input"),"framebuffer"in $e)if($e.framebuffer&&$e.framebuffer_reglType==="framebufferCube")for(var St=0;St<6;++St)fi(O({framebuffer:$e.framebuffer.faces[St]},$e),zi);else fi($e,zi);else zi(0,$e)},prop:V.define.bind(null,1),context:V.define.bind(null,2),this:V.define.bind(null,3),draw:Ni({}),buffer:function($e){return Gr.create($e,34962,!1,!1)},elements:function($e){return Kr.create($e,!1)},texture:Cn.create2D,cube:Cn.createCube,renderbuffer:qn.create,framebuffer:Qr.create,framebufferCube:Qr.createCube,vao:$r.createVAO,attributes:Ft,frame:Ai,on:function($e,St){var w;switch(W.type(St,"function","listener callback must be a function"),$e){case"frame":return Ai(St);case"lost":w=Mo;break;case"restore":w=Gi;break;case"destroy":w=$i;break;default:W.raise("invalid event, must be one of frame,lost,restore,destroy")}return w.push(St),{cancel:function(){for(var R=0;R<w.length;++R)if(w[R]===St)return w[R]=w[w.length-1],void w.pop()}}},limits:Ur,hasExtension:function($e){return Ur.extensions.indexOf($e.toLowerCase())>=0},read:ai,destroy:function(){Jr.length=0,ki(),si&&(si.removeEventListener("webglcontextlost",Gn),si.removeEventListener("webglcontextrestored",Fi)),jn.clear(),Qr.clear(),qn.clear(),Cn.clear(),Kr.clear(),Gr.clear(),$r.clear(),Wt&&Wt.clear(),$i.forEach(function($e){$e()})},_gl:bt,_refresh:Ui,poll:function(){ao(),Wt&&Wt.update()},now:Ci,stats:wt});return ut.onDone(null,_t),_t}},_(m)==="object"&&D!==void 0?D.exports=M():(c=typeof(f=M)=="function"?f.call(m,o,m,D):f)===void 0||(D.exports=c)},,,,,,,,function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.GADDIAsync=m.getNeighborsAsync=m.pageRankAsync=m.minimumSpanningTreeAsync=m.louvainAsync=m.labelPropagationAsync=m.floydWarshallAsync=m.findShortestPathAsync=m.findAllPathAsync=m.dijkstraAsync=m.detectAllUndirectedCycleAsync=m.detectAllDirectedCycleAsync=m.detectAllCyclesAsync=m.detectCycleAsync=m.getOutDegreeAsync=m.getInDegreeAsync=m.getDegreeAsync=m.connectedComponentAsync=m.getAdjMatrixAsync=void 0;var f,c=(f=o(281))&&f.__esModule?f:{default:f},M=o(141);m.getAdjMatrixAsync=function(_,x){return(0,c.default)(M.ALGORITHM.getAdjMatrix).apply(void 0,[_,x])},m.connectedComponentAsync=function(_,x){return(0,c.default)(M.ALGORITHM.connectedComponent).apply(void 0,[_,x])},m.getDegreeAsync=function(_){return(0,c.default)(M.ALGORITHM.getDegree)(_)},m.getInDegreeAsync=function(_,x){return(0,c.default)(M.ALGORITHM.getInDegree)(_,x)},m.getOutDegreeAsync=function(_,x){return(0,c.default)(M.ALGORITHM.getOutDegree)(_,x)},m.detectCycleAsync=function(_){return(0,c.default)(M.ALGORITHM.detectCycle)(_)},m.detectAllCyclesAsync=function(_){return(0,c.default)(M.ALGORITHM.detectAllCycles)(_)},m.detectAllDirectedCycleAsync=function(_){return(0,c.default)(M.ALGORITHM.detectAllDirectedCycle)(_)},m.detectAllUndirectedCycleAsync=function(_){return(0,c.default)(M.ALGORITHM.detectAllUndirectedCycle)(_)},m.dijkstraAsync=function(_,x,O,S){return(0,c.default)(M.ALGORITHM.dijkstra).apply(void 0,[_,x,O,S])},m.findAllPathAsync=function(_,x,O,S){return(0,c.default)(M.ALGORITHM.findAllPath).apply(void 0,[_,x,O,S])},m.findShortestPathAsync=function(_,x,O,S,g){return(0,c.default)(M.ALGORITHM.findShortestPath).apply(void 0,[_,x,O,S,g])},m.floydWarshallAsync=function(_,x){return(0,c.default)(M.ALGORITHM.floydWarshall).apply(void 0,[_,x])},m.labelPropagationAsync=function(_,x,O,S){return S===void 0&&(S=1e3),(0,c.default)(M.ALGORITHM.labelPropagation)(_,x,O,S)},m.louvainAsync=function(_,x,O,S){return(0,c.default)(M.ALGORITHM.louvain)(_,x,O,S)},m.minimumSpanningTreeAsync=function(_,x,O){return(0,c.default)(M.ALGORITHM.minimumSpanningTree).apply(void 0,[_,x,O])},m.pageRankAsync=function(_,x,O){return(0,c.default)(M.ALGORITHM.pageRank).apply(void 0,[_,x,O])},m.getNeighborsAsync=function(_,x,O){return(0,c.default)(M.ALGORITHM.getNeighbors).apply(void 0,[_,x,O])},m.GADDIAsync=function(_,x,O,S,g,d,y){return O===void 0&&(O=!1),d===void 0&&(d="cluster"),y===void 0&&(y="cluster"),(0,c.default)(M.ALGORITHM.GADDI).apply(void 0,[_,x,O,S,g,d,y])}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f,c=o(141),M=(f=o(282))&&f.__esModule?f:{default:f},_=function(x){return function(){for(var O=[],S=0;S<arguments.length;S++)O[S]=arguments[S];return new Promise(function(g,d){var y=new M.default;y.postMessage({_algorithmType:x,data:O}),y.onmessage=function(E){var b=E.data,p=b.data,A=b._algorithmType;c.MESSAGE.SUCCESS===A?g(p):d(),y.terminate()}})}};m.default=_},function(D,m,o){"use strict";function f(O){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(O)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var c=function(O){if(O&&O.__esModule)return O;if(O===null||f(O)!=="object"&&typeof O!="function")return{default:O};var S=_();if(S&&S.has(O))return S.get(O);var g={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in O)if(Object.prototype.hasOwnProperty.call(O,y)){var E=d?Object.getOwnPropertyDescriptor(O,y):null;E&&(E.get||E.set)?Object.defineProperty(g,y,E):g[y]=O[y]}return g.default=O,S&&S.set(O,g),g}(o(283)),M=o(141);function _(){if(typeof WeakMap!="function")return null;var O=new WeakMap;return _=function(){return O},O}var x=self;x.onmessage=function(O){var S=O.data,g=S._algorithmType,d=S.data;if(g)if(typeof c[g]!="function")x.postMessage({_algorithmType:M.MESSAGE.FAILURE});else{var y=c[g].apply(c,d);x.postMessage({_algorithmType:M.MESSAGE.SUCCESS,data:y})}},m.default=null},function(D,m,o){"use strict";function f(z){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X})(z)}Object.defineProperty(m,"__esModule",{value:!0}),Object.defineProperty(m,"getAdjMatrix",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(m,"breadthFirstSearch",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(m,"connectedComponent",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(m,"getDegree",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(m,"getInDegree",{enumerable:!0,get:function(){return x.getInDegree}}),Object.defineProperty(m,"getOutDegree",{enumerable:!0,get:function(){return x.getOutDegree}}),Object.defineProperty(m,"detectCycle",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(m,"depthFirstSearch",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(m,"dijkstra",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(m,"findAllPath",{enumerable:!0,get:function(){return d.findAllPath}}),Object.defineProperty(m,"findShortestPath",{enumerable:!0,get:function(){return d.findShortestPath}}),Object.defineProperty(m,"floydWarshall",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(m,"labelPropagation",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(m,"louvain",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(m,"minimumSpanningTree",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(m,"pageRank",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(m,"GADDI",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(m,"getNeighbors",{enumerable:!0,get:function(){return N.getNeighbors}});var c=L(o(95)),M=L(o(284)),_=L(o(169)),x=function(z){if(z&&z.__esModule)return z;if(z===null||f(z)!=="object"&&typeof z!="function")return{default:z};var X=P();if(X&&X.has(z))return X.get(z);var re={},se=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ce in z)if(Object.prototype.hasOwnProperty.call(z,ce)){var xe=se?Object.getOwnPropertyDescriptor(z,ce):null;xe&&(xe.get||xe.set)?Object.defineProperty(re,ce,xe):re[ce]=z[ce]}return re.default=z,X&&X.set(z,re),re}(o(170)),O=L(o(287)),S=L(o(171)),g=L(o(142)),d=o(288),y=L(o(172)),E=L(o(289)),b=L(o(290)),p=L(o(291)),A=L(o(294)),C=L(o(295)),N=o(45);function P(){if(typeof WeakMap!="function")return null;var z=new WeakMap;return P=function(){return z},z}function L(z){return z&&z.__esModule?z:{default:z}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f,c=(f=o(285))&&f.__esModule?f:{default:f},M=o(45),_=function(x,O,S){var g=function(A){A===void 0&&(A={});var C,N=A,P=function(){},L=(C={},function(z){var X=z.next;return!C[X]&&(C[X]=!0,!0)});return N.allowTraversal=A.allowTraversal||L,N.enter=A.enter||P,N.leave=A.leave||P,N}(S),d=new c.default,y=x.edges,E=y===void 0?[]:y;d.enqueue(O);for(var b="",p=function(){var A=d.dequeue();g.enter({current:A,previous:b}),(0,M.getNeighbors)(A,E,"target").forEach(function(C){g.allowTraversal({previous:b,current:A,next:C})&&d.enqueue(C)}),g.leave({current:A,previous:b}),b=A};!d.isEmpty();)p()};m.default=_},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f,c=(f=o(286))&&f.__esModule?f:{default:f},M=function(){function _(){this.linkedList=new c.default}return _.prototype.isEmpty=function(){return!this.linkedList.head},_.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},_.prototype.enqueue=function(x){this.linkedList.append(x)},_.prototype.dequeue=function(){var x=this.linkedList.deleteHead();return x?x.value:null},_.prototype.toString=function(x){return this.linkedList.toString(x)},_}();m.default=M},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=m.LinkedListNode=void 0;var f=function(_,x){return _===x},c=function(){function _(x,O){O===void 0&&(O=null),this.value=x,this.next=O}return _.prototype.toString=function(x){return x?x(this.value):""+this.value},_}();m.LinkedListNode=c;var M=function(){function _(x){x===void 0&&(x=f),this.head=null,this.tail=null,this.compare=x}return _.prototype.prepend=function(x){var O=new c(x,this.head);return this.head=O,this.tail||(this.tail=O),this},_.prototype.append=function(x){var O=new c(x);return this.head?(this.tail.next=O,this.tail=O,this):(this.head=O,this.tail=O,this)},_.prototype.delete=function(x){if(!this.head)return null;for(var O=null;this.head&&this.compare(this.head.value,x);)O=this.head,this.head=this.head.next;var S=this.head;if(S!==null)for(;S.next;)this.compare(S.next.value,x)?(O=S.next,S.next=S.next.next):S=S.next;return this.compare(this.tail.value,x)&&(this.tail=S),O},_.prototype.find=function(x){var O=x.value,S=O===void 0?void 0:O,g=x.callback,d=g===void 0?void 0:g;if(!this.head)return null;for(var y=this.head;y;){if(d&&d(y.value)||S!==void 0&&this.compare(y.value,S))return y;y=y.next}return null},_.prototype.deleteTail=function(){var x=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,x;for(var O=this.head;O.next;)O.next.next?O=O.next:O.next=null;return this.tail=O,x},_.prototype.deleteHead=function(){if(!this.head)return null;var x=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),x},_.prototype.fromArray=function(x){var O=this;return x.forEach(function(S){return O.append(S)}),this},_.prototype.toArray=function(){for(var x=[],O=this.head;O;)x.push(O),O=O.next;return x},_.prototype.reverse=function(){for(var x=this.head,O=null,S=null;x;)S=x.next,x.next=O,O=x,x=S;this.tail=this.head,this.head=O},_.prototype.toString=function(x){return x===void 0&&(x=void 0),this.toArray().map(function(O){return O.toString(x)}).toString()},_}();m.default=M},function(D,m,o){"use strict";function f(y){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(y)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=m.detectAllCycles=m.detectAllDirectedCycle=m.detectAllUndirectedCycle=void 0;var c,M=(c=o(171))&&c.__esModule?c:{default:c},_=function(y){if(y&&y.__esModule)return y;if(y===null||f(y)!=="object"&&typeof y!="function")return{default:y};var E=O();if(E&&E.has(y))return E.get(y);var b={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in y)if(Object.prototype.hasOwnProperty.call(y,A)){var C=p?Object.getOwnPropertyDescriptor(y,A):null;C&&(C.get||C.set)?Object.defineProperty(b,A,C):b[A]=y[A]}return b.default=y,E&&E.set(y,b),b}(o(169)),x=o(45);function O(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return O=function(){return y},y}var S=function(y,E,b){var p,A;b===void 0&&(b=!0);for(var C=[],N=0,P=(0,_.default)(y,!1);N<P.length;N++){var L=P[N];if(L.length)for(var z=L[0],X=z.id,re=[z],se=((p={})[X]=z,p),ce=((A={})[X]=new Set,A);re.length>0;)for(var xe=re.pop(),ye=xe.id,W=(0,x.getNeighbors)(ye,y.edges),Ie=function(te){var H,V=W[te],ie=y.nodes.find(function(Y){return Y.id===V});if(V===ye)C.push(((H={})[V]=xe,H));else if(V in ce){if(!ce[ye].has(ie)){for(var we=!0,ke=[ie,xe],oe=se[ye];ce[V].size&&!ce[V].has(oe)&&(ke.push(oe),oe!==se[oe.id]);)oe=se[oe.id];if(ke.push(oe),E&&b?(we=!1,ke.findIndex(function(Y){return E.indexOf(Y.id)>-1})>-1&&(we=!0)):E&&!b&&ke.findIndex(function(Y){return E.indexOf(Y.id)>-1})>-1&&(we=!1),we){for(var J={},ee=1;ee<ke.length;ee+=1)J[ke[ee-1].id]=ke[ee];ke.length&&(J[ke[ke.length-1].id]=ke[0]),C.push(J)}ce[V].add(xe)}}else se[V]=xe,re.push(ie),ce[V]=new Set([xe])},ge=0;ge<W.length;ge+=1)Ie(ge)}return C};m.detectAllUndirectedCycle=S;var g=function(y,E,b){b===void 0&&(b=!0);for(var p=[],A=new Set,C=[],N=[],P={},L={},z=function oe(J,ee,Y){var K=!1;if(E&&b===!1&&E.indexOf(J.id)>-1)return K;p.push(J),A.add(J);for(var G=Y[J.id],ne=0;ne<G.length;ne+=1)if((Q=P[G[ne]])===ee){for(var le={},ue=1;ue<p.length;ue+=1)le[p[ue-1].id]=p[ue];p.length&&(le[p[p.length-1].id]=p[0]),N.push(le),K=!0}else A.has(Q)||oe(Q,ee,Y)&&(K=!0);if(K)(function(he){for(var Se=[he];Se.length>0;){var je=Se.pop();A.has(je)&&(A.delete(je),C[je.id].forEach(function(Ae){Se.push(Ae)}),C[je.id].clear())}})(J);else for(ne=0;ne<G.length;ne+=1){var Q=P[G[ne]];C[Q.id].has(J)||C[Q.id].add(J)}return p.pop(),K},X=y.nodes,re=X===void 0?[]:X,se=0;se<re.length;se+=1){var ce=re[se],xe=ce.id;L[xe]=se,P[se]=ce}if(E&&b){var ye=function(oe){var J=E[oe];L[re[oe].id]=L[J],L[J]=0,P[0]=re.find(function(ee){return ee.id===J}),P[L[re[oe].id]]=re[oe]};for(se=0;se<E.length;se++)ye(se)}for(var W=function(oe){for(var J,ee,Y=1/0,K=0;K<oe.length;K+=1)for(var G=oe[K],ne=0;ne<G.length;ne++){var le=L[G[ne].id];le<Y&&(Y=le,ee=K)}var ue=oe[ee],Q=[];for(K=0;K<ue.length;K+=1){var he=ue[K];Q[he.id]=[];for(var Se=0,je=(0,x.getNeighbors)(he.id,y.edges,"target").filter(function(Ce){return ue.map(function(Re){return Re.id}).indexOf(Ce)>-1});Se<je.length;Se++){var Ae=je[Se];Ae!==he.id||b===!1&&E.indexOf(he.id)>-1?Q[he.id].push(L[Ae]):N.push(((J={})[he.id]=he,J))}}return{component:ue,adjList:Q,minIdx:Y}},Ie=0;Ie<re.length;){var ge=re.filter(function(oe){return L[oe.id]>=Ie}),te=(0,_.detectStrongConnectComponents)({nodes:ge,edges:y.edges}).filter(function(oe){return oe.length>1});if(te.length===0)break;var H=W(te),V=H.minIdx,ie=H.adjList,we=H.component;if(!(we.length>1))break;we.forEach(function(oe){C[oe.id]=new Set});var ke=P[V];if(E&&b&&E.indexOf(ke.id)===-1)return N;z(ke,ke,ie),Ie=V+1}return N};m.detectAllDirectedCycle=g,m.detectAllCycles=function(y,E,b,p){return p===void 0&&(p=!0),E?g(y,b,p):S(y,b,p)};var d=function(y){var E=null,b=y.nodes,p={},A={},C={},N={};(b===void 0?[]:b).forEach(function(z){A[z.id]=z});for(var P={enter:function(z){var X=z.current,re=z.previous;if(C[X]){E={};for(var se=X,ce=re;ce!==X;)E[se]=ce,se=ce,ce=p[ce];E[se]=ce}else C[X]=X,delete A[X],p[X]=re},leave:function(z){var X=z.current;N[X]=X,delete C[X]},allowTraversal:function(z){var X=z.next;return!E&&!N[X]}};Object.keys(A).length;){var L=Object.keys(A)[0];(0,M.default)(y,L,P)}return E};m.default=d},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.findAllPath=m.findShortestPath=void 0;var f,c=(f=o(142))&&f.__esModule?f:{default:f},M=o(45);m.findShortestPath=function(_,x,O,S,g){var d=(0,c.default)(_,x,S,g),y=d.length,E=d.path,b=d.allPath;return{length:y[O],path:E[O],allPath:b[O]}},m.findAllPath=function(_,x,O,S){var g;if(x===O)return[[x]];var d=_.edges,y=d===void 0?[]:d,E=[x],b=((g={})[x]=!0,g),p=[],A=[],C=S?(0,M.getNeighbors)(x,y,"target"):(0,M.getNeighbors)(x,y);for(p.push(C);E.length>0&&p.length>0;){var N=p[p.length-1];if(N.length){var P=N.shift();if(P&&(E.push(P),b[P]=!0,C=S?(0,M.getNeighbors)(P,y,"target"):(0,M.getNeighbors)(P,y),p.push(C.filter(function(X){return!b[X]}))),E[E.length-1]===O){var L=E.map(function(X){return X});A.push(L),z=E.pop(),b[z]=!1,p.pop()}}else{var z=E.pop();b[z]=!1,p.pop()}}return A}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f,c=(f=o(95))&&f.__esModule?f:{default:f},M=o(45),_=function(x,O,S,g){O===void 0&&(O=!1),S===void 0&&(S="weight"),g===void 0&&(g=1e3);var d=x.nodes,y=d===void 0?[]:d,E=x.edges,b=E===void 0?[]:E,p={},A={};y.forEach(function(ce,xe){var ye=(0,M.uniqueId)();ce.clusterId=ye,p[ye]={id:ye,nodes:[ce]},A[ce.id]={node:ce,idx:xe}});var C=(0,c.default)(x,O),N=[],P={};C.forEach(function(ce,xe){var ye=0,W=y[xe].id;P[W]={},ce.forEach(function(Ie,ge){if(Ie){ye+=Ie;var te=y[ge].id;P[W][te]=Ie}}),N.push(ye)});for(var L=0,z=function(){var ce=!1;if(y.forEach(function(xe){var ye={};Object.keys(P[xe.id]).forEach(function(we){var ke=P[xe.id][we],oe=A[we].node.clusterId;ye[oe]||(ye[oe]=0),ye[oe]+=ke});var W=-1/0,Ie=[];if(Object.keys(ye).forEach(function(we){W<ye[we]?(W=ye[we],Ie=[we]):W===ye[we]&&Ie.push(we)}),Ie.length!==1||Ie[0]!==xe.clusterId){var ge=Ie.indexOf(xe.clusterId);if(ge>=0&&Ie.splice(ge,1),Ie&&Ie.length){ce=!0;var te=p[xe.clusterId],H=te.nodes.indexOf(xe);te.nodes.splice(H,1);var V=Math.floor(Math.random()*Ie.length),ie=p[Ie[V]];ie.nodes.push(xe),xe.clusterId=ie.id}}}),!ce)return"break";L++};L<g&&z()!=="break";);Object.keys(p).forEach(function(ce){var xe=p[ce];xe.nodes&&xe.nodes.length||delete p[ce]});var X=[],re={};b.forEach(function(ce){var xe=ce.source,ye=ce.target,W=ce[S]||1,Ie=A[xe].node.clusterId,ge=A[ye].node.clusterId,te=Ie+"---"+ge;if(re[te])re[te].weight+=W,re[te].count++;else{var H={source:Ie,target:ge,weight:W,count:1};re[te]=H,X.push(H)}});var se=[];return Object.keys(p).forEach(function(ce){se.push(p[ce])}),{clusters:se,clusterEdges:X}};m.default=_},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f,c=(f=o(95))&&f.__esModule?f:{default:f},M=function(x,O,S,g){for(var d=O.length,y=2*g,E=0,b=0;b<d;b++)for(var p=x[b].clusterId,A=0;A<d;A++)p===x[A].clusterId&&(E+=(O[b][A]||0)-(S[b]||0)*(S[A]||0)/y);return E*=1/y},_=function(x,O,S,g){O===void 0&&(O=!1),S===void 0&&(S="weight"),g===void 0&&(g=1e-4);var d=x.nodes,y=d===void 0?[]:d,E=x.edges,b=E===void 0?[]:E,p=1,A={},C={};y.forEach(function(ge,te){var H=String(p++);ge.clusterId=H,A[H]={id:H,nodes:[ge]},C[ge.id]={node:ge,idx:te}});var N=(0,c.default)(x,O),P=[],L={},z=0;N.forEach(function(ge,te){var H=0,V=y[te].id;L[V]={},ge.forEach(function(ie,we){if(ie){H+=ie;var ke=y[we].id;L[V][ke]=ie,z+=ie}}),P.push(H)}),z/=2;for(var X=1/0,re=1/0,se=0;X=M(y,N,P,z),!(Math.abs(X-re)<g||se>100);)re=X,se++,Object.keys(A).forEach(function(ge){var te=0;b.forEach(function(H){var V=H.source,ie=H.target,we=C[V].node.clusterId,ke=C[ie].node.clusterId;(we===ge&&ke!==ge||ke===ge&&we!==ge)&&(te+=H[S]||1)}),A[ge].sumTot=te}),y.forEach(function(ge,te){var H,V=A[ge.clusterId],ie=0,we=P[te]/(2*z),ke=0;V.nodes.forEach(function(ne){var le=C[ne.id].idx;ke+=N[te][le]||0});var oe=ke-V.sumTot*we,J=L[ge.id];if(Object.keys(J).forEach(function(ne){var le=C[ne].node.clusterId;if(le!==ge.clusterId){var ue=A[le],Q=ue.nodes;if(Q&&Q.length){var he=0;Q.forEach(function(je){var Ae=C[je.id].idx;he+=N[te][Ae]||0});var Se=he-ue.sumTot*we-oe;Se>ie&&(ie=Se,H=ue)}}}),ie>0){H.nodes.push(ge);var ee=ge.clusterId;ge.clusterId=H.id;var Y=V.nodes.indexOf(ge);V.nodes.splice(Y,1);var K=0,G=0;b.forEach(function(ne){var le=ne.source,ue=ne.target,Q=C[le].node.clusterId,he=C[ue].node.clusterId;(Q===H.id&&he!==H.id||he===H.id&&Q!==H.id)&&(K+=ne[S]||1),(Q===ee&&he!==ee||he===ee&&Q!==ee)&&(G+=ne[S]||1)}),H.sumTot=K,V.sumTot=G}});var ce={},xe=0;Object.keys(A).forEach(function(ge){var te=A[ge];if(te.nodes&&te.nodes.length){var H=String(xe+1);H!==ge&&(te.id=H,te.nodes=te.nodes.map(function(V){return{id:V.id,clusterId:H}}),A[H]=te,ce[ge]=H,delete A[ge],xe++)}else delete A[ge]}),y.forEach(function(ge){ge.clusterId&&ce[ge.clusterId]&&(ge.clusterId=ce[ge.clusterId])});var ye=[],W={};b.forEach(function(ge){var te=ge.source,H=ge.target,V=ge[S]||1,ie=C[te].node.clusterId,we=C[H].node.clusterId,ke=ie+"---"+we;if(W[ke])W[ke].weight+=V,W[ke].count++;else{var oe={source:ie,target:we,weight:V,count:1};W[ke]=oe,ye.push(oe)}});var Ie=[];return Object.keys(A).forEach(function(ge){Ie.push(A[ge])}),{clusters:Ie,clusterEdges:ye}};m.default=_},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f=_(o(292)),c=_(o(293)),M=o(45);function _(g){return g&&g.__esModule?g:{default:g}}var x=function(g,d){var y=[],E=g.nodes,b=E===void 0?[]:E,p=g.edges,A=p===void 0?[]:p;if(b.length===0)return y;var C=b[0],N=new Set;N.add(C);var P=new c.default(function(re,se){return d?re.weight-se.weight:0});for((0,M.getEdgesByNodeId)(C.id,A).forEach(function(re){P.insert(re)});!P.isEmpty();){var L=P.delMin(),z=L.source,X=L.target;N.has(z)&&N.has(X)||(y.push(L),N.has(z)||(N.add(z),(0,M.getEdgesByNodeId)(z,A).forEach(function(re){P.insert(re)})),N.has(X)||(N.add(X),(0,M.getEdgesByNodeId)(X,A).forEach(function(re){P.insert(re)})))}return y},O=function(g,d){var y=[],E=g.nodes,b=E===void 0?[]:E,p=g.edges,A=p===void 0?[]:p;if(b.length===0)return y;var C=A.map(function(X){return X});d&&C.sort(function(X,re){return X.weight-re.weight});for(var N=new f.default(b.map(function(X){return X.id}));C.length>0;){var P=C.shift(),L=P.source,z=P.target;N.connected(L,z)||(y.push(P),N.union(L,z))}return y},S=function(g,d,y){return y?{prim:x,kruskal:O}[y](g,d):O(g,d)};m.default=S},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f=function(){function c(M){this.count=M.length,this.parent={};for(var _=0,x=M;_<x.length;_++){var O=x[_];this.parent[O]=O}}return c.prototype.find=function(M){for(;this.parent[M]!==M;)M=this.parent[M];return M},c.prototype.union=function(M,_){var x=this.find(M),O=this.find(_);x!==O&&(x<O?(this.parent[_]!==_&&this.union(this.parent[_],M),this.parent[_]=this.parent[M]):(this.parent[M]!==M&&this.union(this.parent[M],_),this.parent[M]=this.parent[_]))},c.prototype.connected=function(M,_){return this.find(M)===this.find(_)},c}();m.default=f},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f=function(M,_){return M-_},c=function(){function M(_){_===void 0&&(_=f),this.compareFn=_,this.list=[]}return M.prototype.getLeft=function(_){return 2*_+1},M.prototype.getRight=function(_){return 2*_+2},M.prototype.getParent=function(_){return _===0?null:Math.floor((_-1)/2)},M.prototype.isEmpty=function(){return this.list.length<=0},M.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},M.prototype.delMin=function(){var _=this.top(),x=this.list.pop();return this.list.length>0&&(this.list[0]=x,this.moveDown(0)),_},M.prototype.insert=function(_){if(_!==null){this.list.push(_);var x=this.list.length-1;return this.moveUp(x),!0}return!1},M.prototype.moveUp=function(_){for(var x=this.getParent(_);_&&_>0&&this.compareFn(this.list[x],this.list[_])>0;){var O=this.list[x];this.list[x]=this.list[_],this.list[_]=O,_=x,x=this.getParent(_)}},M.prototype.moveDown=function(_){var x,O=_,S=this.getLeft(_),g=this.getRight(_),d=this.list.length;S!==null&&S<d&&this.compareFn(this.list[O],this.list[S])>0?O=S:g!==null&&g<d&&this.compareFn(this.list[O],this.list[g])>0&&(O=g),_!==O&&(x=[this.list[O],this.list[_]],this.list[_]=x[0],this.list[O]=x[1],this.moveDown(O))},M}();m.default=c},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f,c=(f=o(170))&&f.__esModule?f:{default:f},M=o(45),_=function(x,O,S){typeof O!="number"&&(O=1e-6),typeof S!="number"&&(S=.85);for(var g,d=1,y=0,E=1e3,b=x.nodes,p=b===void 0?[]:b,A=x.edges,C=A===void 0?[]:A,N=p.length,P={},L={},z=0;z<N;++z)P[re=(W=p[z]).id]=1/N,L[re]=1/N;for(var X=(0,c.default)(x);E>0&&d>O;){for(y=0,z=0;z<N;++z){var re=(W=p[z]).id;if(g=0,X[W.id].inDegree===0)P[re]=0;else{for(var se=(0,M.getNeighbors)(re,C,"source"),ce=0;ce<se.length;++ce){var xe=se[ce],ye=X[xe].outDegree;ye>0&&(g+=L[xe]/ye)}P[re]=S*g,y+=P[re]}}for(y=(1-y)/N,d=0,z=0;z<N;++z){var W;g=P[re=(W=p[z]).id]+y,d+=Math.abs(g-L[re]),L[re]=g}E-=1}return L};m.default=_},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f=o(1),c=O(o(172)),M=O(o(296)),_=O(o(142)),x=o(45);function O(N){return N&&N.__esModule?N:{default:N}}function S(N){return(S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(N)}var g=function(N,P,L,z){L===void 0&&(L="cluster"),z===void 0&&(z=2);var X=[],re=N.nodes;return P.forEach(function(se,ce){X.push(d(re,se,ce,L,z))}),X},d=function(N,P,L,z,X){var re=[L],se=[],ce={};return P.forEach(function(xe,ye){if(xe<=X&&L!==ye){re.push(ye),se.push(N[ye]);var W=N[ye][z];ce[W]?(ce[W].count++,ce[W].dists.push(xe)):ce[W]={count:1,dists:[xe]}}}),Object.keys(ce).forEach(function(xe){ce[xe].dists=ce[xe].dists.sort(function(ye,W){return ye-W})}),{nodeIdx:L,nodeId:N[L].id,nodeIdxs:re,neighbors:se,neighborNum:re.length-1,nodeLabelCountMap:ce}},y=function(N,P,L,z){var X=L.nodes;return z||(z={}),Object.keys(N).forEach(function(re){var se,ce;if(!z||!z[re]){z[re]={nodes:[],edges:[]};var xe=N[re],ye=(se=P[xe.start])===null||se===void 0?void 0:se.nodeIdxs,W=(ce=P[xe.end])===null||ce===void 0?void 0:ce.nodeIdxs;if(ye&&W){var Ie=new Set(W),ge=ye.filter(function(we){return Ie.has(we)});if(ge&&ge.length){for(var te={},H=ge.length,V=0;V<H;V++){var ie=X[ge[V]];z[re].nodes.push(ie),te[ie.id]=!0}L.edges.forEach(function(we){te[we.source]&&te[we.target]&&z[re].edges.push(we)})}}}}),z},E=function(N,P,L,z){var X={};N.nodes.forEach(function(se){X[se.id]=se});var re=0;return N.edges.forEach(function(se){var ce=X[se.source][L],xe=X[se.target][L],ye=P.nodes[0][L],W=P.nodes[1][L],Ie=P.edges[0][z];se[z]===Ie&&(ce===ye&&xe===W||ce===W&&xe===ye)&&re++}),re},b=function(N,P){var L={},z={};return N.forEach(function(X,re){L[X.id]={idx:re,node:X,degree:0};var se=X[P];z[se]||(z[se]=[]),z[se].push(X)}),{nodeMap:L,nodeLabelMap:z}},p=function(N,P,L){var z={},X={};return N.forEach(function(re,se){z[""+x.uniqueId]={idx:se,edge:re};var ce=re[P];X[ce]||(X[ce]=[]),X[ce].push(re);var xe=L[re.source];xe&&xe.degree++;var ye=L[re.target];ye&&ye.degree++}),{edgeMap:z,edgeLabelMap:X}},A=function(N,P,L){var z=P.length,X={};return P.forEach(function(re,se){for(var ce=L?0:se+1,xe=N[se].id,ye=ce;ye<z;ye++)if(se!==ye){var W=N[ye].id,Ie=re[ye];X[xe+"-"+W]=Ie,L||(X[W+"-"+xe]=Ie)}}),X},C=function(N,P,L,z,X,re,se){if(L===void 0&&(L=!1),re===void 0&&(re="cluster"),se===void 0&&(se="cluster"),N&&N.nodes){var ce=N.nodes.length;if(ce){var xe=(0,c.default)(N,L),ye=(0,c.default)(P,L),W=A(N.nodes,xe,L),Ie=A(P.nodes,ye,L),ge=b(N.nodes,re),te=ge.nodeMap,H=ge.nodeLabelMap,V=b(P.nodes,re),ie=V.nodeMap,we=V.nodeLabelMap;p(N.edges,se,te);var ke=p(P.edges,se,ie).edgeLabelMap;X||(X=Math.max.apply(Math,(0,f.__spreadArray)((0,f.__spreadArray)([],ye[0]),[2]))),z||(z=X);var oe=g(N,xe,re,z),J=g(P,ye,re,z),ee=function(Qt,rr,or,Mr,cr){var yr=Math.ceil(or/rr),br={},Xr=0;return Mr.forEach(function(gr,xr){for(var dr=0,Br=0,Rr=gr.nodeIdxs,pn=gr.neighborNum-1;dr<yr;){for(var zr=Rr[1+Math.floor(Math.random()*pn)],Nr=0;(br[xr+"-"+zr]||br[zr+"-"+xr])&&(zr=Math.floor(Math.random()*rr),!(++Nr>2*rr)););if(Nr<2*rr&&(br[xr+"-"+zr]={start:xr,end:zr,distance:cr[xr][zr]},dr++,++Xr>=or))return br;if(++Br>2*rr)break}dr<yr&&(yr=(yr+(yr-dr))/(rr-xr-1))}),br}(0,ce,Math.min(100,ce*(ce-1)/2),J,xe),Y=y(ee,oe,N),K={graphs:Y,nodeLabelProp:re,edgeLabelProp:se,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:L},G=(0,M.default)(K).slice(0,10),ne=G.length,le=[];G.forEach(function(Qt,rr){le[rr]={},Object.keys(Y).forEach(function(or){var Mr=Y[or],cr=E(Mr,Qt,re,se);le[rr][or]=cr})});var ue=function(Qt,rr,or){for(var Mr=1/0,cr=0,yr=function(Xr){var gr=Qt[Xr],xr=Object.keys(gr).sort(function(Nr,Dr){return gr[Nr]-gr[Dr]}),dr=[];xr.forEach(function(Nr,Dr){dr[Dr%10]||(dr[Dr%10]={graphs:[],totalCount:0,aveCount:0}),dr[Dr%10].graphs.push(Nr),dr[Dr%10].totalCount+=gr[Nr]});var Br=0,Rr=[];dr.forEach(function(Nr){var Dr=Nr.totalCount/Nr.graphs.length;Nr.aveCount=Dr,Rr.push(Dr);var rn=0,Ir=Nr.length;Nr.graphs.forEach(function(On,In){var Dn=gr[On];Nr.graphs.forEach(function(Rn,gn){In!==gn&&(rn+=Math.abs(Dn-gr[Rn]))})}),Br+=rn/=Ir*(Ir-1)/2}),Br/=dr.length;var pn=0;Rr.forEach(function(Nr,Dr){Rr.forEach(function(rn,Ir){Dr!==Ir&&(pn+=Math.abs(Nr-rn))}),pn/=Rr.length*(Rr.length-1)/2});var zr=pn-Br;Mr<zr&&(Mr=zr,cr=Xr)},br=0;br<rr;br++)yr(br);return{structure:or[cr],structureCountMap:Qt[cr]}}(le,ne,G),Q=ue.structure,he=ue.structureCountMap,Se=P.nodes[0],je=Se[re],Ae=H[je],Ce={},Re={},Ee={},Le={},Ke={};Object.keys(we).forEach(function(Qt,rr){Ke[Qt]=[];var or=-1/0,Mr=we[Qt],cr={};Mr.forEach(function(gr){var xr=Ie[Se.id+"-"+gr.id];xr&&Ke[Qt].push(xr),or<xr&&(or=xr),cr[Se.id+"-"+gr.id]={start:0,end:ie[gr.id].idx,distance:xr}}),Ke[Qt]=Ke[Qt].sort(function(gr,xr){return gr-xr}),Re=y(cr,J,P,Re);var yr=[];if(Object.keys(cr).forEach(function(gr){if(Ee[gr])yr.push(Ee[gr]);else{var xr=Re[gr];Ee[gr]=E(xr,Q,re,se),yr.push(Ee[gr])}}),yr=yr.sort(function(gr,xr){return xr-gr}),Le[Se.id+"-"+Qt]=yr,Qt!==je)for(var br=function(gr){var xr=Ae[gr],dr=oe[te[xr.id].idx],Br=dr.nodeLabelCountMap[Qt],Rr=we[Qt].length;if(!Br||Br.count<Rr)return Ae.splice(gr,1),"continue";for(var pn=!1,zr=0;zr<Rr;zr++)if(Br.dists[zr]>Ke[Qt][zr]){pn=!0;break}if(pn)return Ae.splice(gr,1),"continue";var Nr={};dr.neighbors.forEach(function(Ir){var On=W[xr.id+"-"+Ir.id];Nr[xr.id+"-"+Ir.id]={start:te[xr.id].idx,end:te[Ir.id].idx,distance:On}}),Y=y(Nr,oe,N,Y);var Dr=[];Object.keys(Nr).forEach(function(Ir){if(he[Ir])Dr.push(he[Ir]);else{var On=Y[Ir];he[Ir]=E(On,Q,re,se),Dr.push(he[Ir])}}),Dr=Dr.sort(function(Ir,On){return On-Ir});var rn=!1;for(zr=0;zr<Rr;zr++)if(Dr[zr]<yr[zr]){rn=!0;break}return rn?(Ae.splice(gr,1),"continue"):void 0},Xr=Ae.length-1;Xr>=0;Xr--)br(Xr)});var et=[];Ae.forEach(function(Qt){for(var rr=te[Qt.id].idx,or=d(N.nodes,xe[rr],rr,re,X).neighbors,Mr=or.length,cr=!1,yr=function(gr){if(or.length+1<P.nodes.length)return cr=!0,{value:void 0};var xr=or[gr],dr=xr[re];if(!we[dr]||!we[dr].length)return or.splice(gr,1),"continue";var Br=Qt.id+"-"+xr.id;if(!Ke[dr]||!Ke[dr].length)return or.splice(gr,1),"continue";var Rr=W[Br];if(Rr>Ke[dr][Ke[dr].length-1])return or.splice(gr,1),"continue";var pn=he[Br]?he[Br]:function(Dr,rn,Ir,On,In,Dn,Rn,gn,Er,ln,yn){var mn,Qn=rn.id+"-"+Ir.id;if(ln&&ln[Qn])return ln[Qn];var Un=yn?yn[Qn]:void 0;if(!Un){var ri=((mn={})[Qn]={start:On[rn.id].idx,end:On[Ir.id].idx,distance:In},mn);Un=(yn=y(ri,Dn,Dr,yn))[Qn]}return E(Un,Rn,gn,Er)}(N,Qt,xr,te,Rr,oe,Q,re,se,he,Y),zr=Se.id+"-"+dr;if(pn<Le[zr][Le[zr].length-1])return or.splice(gr,1),"continue";var Nr=Ce[dr];return Nr===void 0&&(Nr=1/0,we[dr].forEach(function(Dr){var rn=ie[Dr.id].degree;Nr>rn&&(Nr=rn)}),Ce[dr]=Nr),te[xr.id].degree<Nr?(or.splice(gr,1),"continue"):void 0},br=Mr-1;br>=0;br--){var Xr=yr(br);if(S(Xr)==="object")return Xr.value}cr||et.push({nodes:[Qt].concat(or)})});var ot=(0,_.default)(P,Se.id,!1).length,dt={};L?(Object.keys(ot).forEach(function(Qt){var rr=ie[Qt].node[re];dt[rr]?dt[rr].push(ot[Qt]):dt[rr]=[ot[Qt]]}),Object.keys(dt).forEach(function(Qt){dt[Qt].sort(function(rr,or){return rr-or})})):dt=Ke;for(var At=function(Qt){var rr=et[Qt],or=rr.nodes[0],Mr={},cr={};rr.nodes.forEach(function(Er,ln){cr[Er.id]={idx:ln,node:Er,degree:0};var yn=Er[re];Mr[yn]?Mr[yn]++:Mr[yn]=1});var yr=[],br={};N.edges.forEach(function(Er){cr[Er.source]&&cr[Er.target]&&(yr.push(Er),br[Er[se]]?br[Er[se]]++:br[Er[se]]=1,cr[Er.source].degree++,cr[Er.target].degree++)});for(var Xr=Object.keys(ke).length,gr=!1,xr=0;xr<Xr;xr++){var dr=Object.keys(ke)[xr];if(!br[dr]||br[dr]<ke[dr].length){gr=!0;break}}if(gr)return et.splice(Qt,1),"continue";var Br=yr.length;if(Br<P.edges.length)return et.splice(Qt,1),"break";var Rr=!1,pn=function(Er){var ln=yr[Er],yn=ln[se],mn=ke[yn];if(!mn||!mn.length)return br[yn]--,mn&&br[yn]<mn.length?(Rr=!0,"break"):(yr.splice(Er,1),cr[ln.source].degree--,cr[ln.target].degree--,"continue");var Qn=cr[ln.source].node[re],Un=cr[ln.target].node[re],ri=!1;return mn.forEach(function(Ei){var ni=ie[Ei.source].node,Bn=ie[Ei.target].node;ni[re]===Qn&&Bn[re]===Un&&(ri=!0),L||ni[re]!==Un||Bn[re]!==Qn||(ri=!0)}),ri?void 0:(br[yn]--,mn&&br[yn]<mn.length?(Rr=!0,"break"):(yr.splice(Er,1),cr[ln.source].degree--,cr[ln.target].degree--,"continue"))};for(xr=Br-1;xr>=0&&pn(xr)!=="break";xr--);if(Rr)return et.splice(Qt,1),"continue";rr.edges=yr;var zr=(0,_.default)(rr,rr.nodes[0].id,!1).length;if(Object.keys(zr).reverse().forEach(function(Er){if(Er!==rr.nodes[0].id&&!Rr){if(zr[Er]===1/0){var ln=cr[Er].node[re];if(Mr[ln]--,Mr[ln]<we[ln].length)return void(Rr=!0);var yn=rr.nodes.indexOf(cr[Er].node);return rr.nodes.splice(yn,1),void(cr[Er]=void 0)}var mn=te[Er].node[re];if(!dt[mn]||!dt[mn].length||zr[Er]>dt[mn][dt[mn].length-1]){if(ln=cr[Er].node[re],Mr[ln]--,Mr[ln]<we[ln].length)return void(Rr=!0);yn=rr.nodes.indexOf(cr[Er].node),rr.nodes.splice(yn,1),cr[Er]=void 0}}}),Rr)return et.splice(Qt,1),"continue";for(var Nr=!0,Dr=0;Nr&&!Rr;){if(Nr=!1,cr[or.id].degree<ie[Se.id].degree){Rr=!0;break}if(Mr[or[re]]<we[or[re]].length){Rr=!0;break}for(var rn=rr.nodes.length-1;rn>=0;rn--){var Ir=rr.nodes[rn],On=cr[Ir.id].degree,In=Ir[re];if(On<Ce[In]){if(Mr[Ir[re]]--,Mr[Ir[re]]<we[Ir[re]].length){Rr=!0;break}rr.nodes.splice(rn,1),cr[Ir.id]=void 0,Nr=!0}}if(Rr||!Nr&&Dr!==0)break;for(var Dn=(Br=yr.length)-1;Dn>=0;Dn--){var Rn=yr[Dn];if(!cr[Rn.source]||!cr[Rn.target]){yr.splice(Dn,1);var gn=Rn[se];if(br[gn]--,cr[Rn.source]&&cr[Rn.source].degree--,cr[Rn.target]&&cr[Rn.target].degree--,ke[gn]&&br[gn]<ke[gn].length){Rr=!0;break}Nr=!0}}Dr++}return Rr||Rr||rr.nodes.length<P.nodes.length||yr.length<P.edges.length?(et.splice(Qt,1),"continue"):void 0},Tt=et.length-1;Tt>=0&&At(Tt)!=="break";Tt--);var jt=et.length,Kt=function(Qt){var rr=et[Qt],or={};rr.edges.forEach(function(yr){var br=yr.source+"-"+yr.target+"-"+yr.label;or[br]?or[br]++:or[br]=1});for(var Mr=function(yr){var br=et[yr],Xr={};br.edges.forEach(function(xr){var dr=xr.source+"-"+xr.target+"-"+xr.label;Xr[dr]?Xr[dr]++:Xr[dr]=1});var gr=!0;Object.keys(Xr).length!==Object.keys(or).length?gr=!1:Object.keys(or).forEach(function(xr){Xr[xr]!==or[xr]&&(gr=!1)}),gr&&et.splice(yr,1)},cr=jt-1;cr>Qt;cr--)Mr(cr);jt=et.length};for(Tt=0;Tt<=jt-1;Tt++)Kt(Tt);return et}}};m.default=C},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var f=o(0),c=o(297),M=function(){function g(d,y,E,b,p){this.fromNode=d,this.toNode=y,this.nodeEdgeNodeLabel={nodeLabel1:E||c.VACANT_NODE_LABEL,edgeLabel:b||c.VACANT_EDGE_LABEL,nodeLabel2:p||c.VACANT_NODE_LABEL}}return g.prototype.equalTo=function(d){return this.fromNode===d.formNode&&this.toNode===d.toNode&&this.nodeEdgeNodeLabel===d.nodeEdgeNodeLabel},g.prototype.notEqualTo=function(d){return!this.equalTo(d)},g}(),_=function(){function g(){this.rmpath=[],this.dfsEdgeList=[]}return g.prototype.equalTo=function(d){var y=this.dfsEdgeList.length;if(y!==d.length)return!1;for(var E=0;E<y;E++)if(this.dfsEdgeList[E]!==d[E])return!1;return!0},g.prototype.notEqualTo=function(d){return!this.equalTo(d)},g.prototype.pushBack=function(d,y,E,b,p){return this.dfsEdgeList.push(new M(d,y,E,b,p)),this.dfsEdgeList},g.prototype.toGraph=function(d,y){d===void 0&&(d=c.VACANT_GRAPH_ID),y===void 0&&(y=!1);var E=new c.Graph(d,!0,y);return this.dfsEdgeList.forEach(function(b){var p=b.fromNode,A=b.toNode,C=b.nodeEdgeNodeLabel,N=C.nodeLabel1,P=C.edgeLabel,L=C.nodeLabel2;N!==c.VACANT_NODE_LABEL&&E.addNode(p,N),L!==c.VACANT_NODE_LABEL&&E.addNode(A,L),E.addEdge(void 0,p,A,P)}),E},g.prototype.buildRmpath=function(){this.rmpath=[];for(var d=void 0,y=this.dfsEdgeList.length-1;y>=0;y--){var E=this.dfsEdgeList[y],b=E.fromNode,p=E.toNode;b<p&&(d===void 0||p===d)&&(this.rmpath.push(y),d=b)}return this.rmpath},g.prototype.getNodeNum=function(){var d={};return this.dfsEdgeList.forEach(function(y){d[y.fromNode]||(d[y.fromNode]=!0),d[y.toNode]||(d[y.toNode]=!0)}),Object.keys(d).length},g}(),x=function(){function g(d){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],d){for(;d;){var y=d.edge;this.edges.push(y),this.nodesUsed[y.from]=1,this.nodesUsed[y.to]=1,this.edgesUsed[y.id]=1,d=d.preNode}this.edges=this.edges.reverse()}}return g.prototype.hasNode=function(d){return this.nodesUsed[d.id]===1},g.prototype.hasEdge=function(d){return this.edgesUsed[d.id]===1},g}(),O=function(){function g(d){var y=d.graphs,E=d.minSupport,b=E===void 0?2:E,p=d.minNodeNum,A=p===void 0?1:p,C=d.maxNodeNum,N=C===void 0?4:C,P=d.top,L=P===void 0?10:P,z=d.directed,X=z!==void 0&&z,re=d.verbose,se=re!==void 0&&re;this.graphs=y,this.dfsCode=new _,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=b,this.top=L,this.directed=X,this.counter=0,this.maxNodeNum=N,this.minNodeNum=A,this.verbose=se,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return g.prototype.findForwardRootEdges=function(d,y){var E=this,b=[],p=d.nodeMap;return y.edges.forEach(function(A){(E.directed||y.label<=p[A.to].label)&&b.push(A)}),b},g.prototype.findBackwardEdge=function(d,y,E,b){if(!this.directed&&y===E)return null;for(var p=d.nodeMap,A=p[E.to].edges,C=A.length,N=0;N<C;N++){var P=A[N];if(!b.hasEdge(P)&&P.to===y.from){if(this.directed){if(p[y.from].label<p[E.to].label||p[y.from].label===p[E.to].label&&y.label<=P.label)return P}else if(y.label<P.label||y.label===P.label&&p[y.to].label<=p[E.to].label)return P}}return null},g.prototype.findForwardPureEdges=function(d,y,E,b){for(var p=[],A=y.to,C=d.nodeMap[A].edges,N=C.length,P=0;P<N;P++){var L=C[P],z=d.nodeMap[L.to];E<=z.label&&!b.hasNode(z)&&p.push(L)}return p},g.prototype.findForwardRmpathEdges=function(d,y,E,b){for(var p=[],A=d.nodeMap,C=A[y.to].label,N=A[y.from].edges,P=N.length,L=0;L<P;L++){var z=N[L],X=A[z.to].label;y.to===z.to||E>X||b.hasNode(A[z.to])||(y.label<z.label||y.label===z.label&&C<=X)&&p.push(z)}return p},g.prototype.getSupport=function(d){var y={};return d.forEach(function(E){y[E.graphId]||(y[E.graphId]=!0)}),Object.keys(y).length},g.prototype.findMinLabel=function(d){var y=void 0;return Object.keys(d).forEach(function(E){var b=d[E],p=b.nodeLabel1,A=b.edgeLabel,C=b.nodeLabel2;y?(p<y.nodeLabel1||p===y.nodeLabel1&&A<y.edgeLabel||p===y.nodeLabel1&&A===y.edgeLabel&&C<y.nodeLabel2)&&(y={nodeLabel1:p,edgeLabel:A,nodeLabel2:C}):y={nodeLabel1:p,edgeLabel:A,nodeLabel2:C}}),y},g.prototype.isMin=function(){var d=this,y=this.dfsCode;if(this.verbose&&console.log("isMin checking",y),y.dfsEdgeList.length===1)return!0;var E=this.directed,b=y.toGraph(c.VACANT_GRAPH_ID,E),p=b.nodeMap,A=new _,C={};b.nodes.forEach(function(L){d.findForwardRootEdges(b,L).forEach(function(z){var X=p[z.to],re=L.label+"-"+z.label+"-"+X.label;C[re]||(C[re]={projected:[],nodeLabel1:L.label,edgeLabel:z.label,nodeLabel2:X.label});var se={graphId:b.id,edge:z,preNode:null};C[re].projected.push(se)})});var N=this.findMinLabel(C);A.dfsEdgeList.push(new M(0,1,N.nodeLabel1,N.edgeLabel,N.nodeLabel2));var P=N.nodeLabel1+"-"+N.edgeLabel+"-"+N.nodeLabel2;return function L(z){for(var X=A.buildRmpath(),re=A.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,se=A.dfsEdgeList[X[0]].toNode,ce={},xe=!1,ye=0,W=E?-1:0,Ie=function(ee){if(xe)return"break";z.forEach(function(Y){var K=new x(Y),G=d.findBackwardEdge(b,K.edges[X[ee]],K.edges[X[0]],K);G&&(ce[G.label]||(ce[G.label]={projected:[],edgeLabel:G.label}),ce[G.label].projected.push({graphId:b.id,edge:ce,preNode:Y}),ye=A.dfsEdgeList[X[ee]].fromNode,xe=!0)})},ge=X.length-1;ge>W&&Ie(ge)!=="break";ge--);if(xe){var te=d.findMinLabel(ce);A.dfsEdgeList.push(new M(se,ye,c.VACANT_NODE_LABEL,te.edgeLabel,c.VACANT_NODE_LABEL));var H=A.dfsEdgeList.length-1;return d.dfsCode.dfsEdgeList[H]===A.dfsEdgeList[H]&&L(ce[te.edgeLabel].projected)}var V={};xe=!1;var ie=0;z.forEach(function(ee){var Y=new x(ee),K=d.findForwardPureEdges(b,Y.edges[X[0]],re,Y);K.length>0&&(xe=!0,ie=se,K.forEach(function(G){var ne=G.label+"-"+p[G.to].label;V[ne]||(V[ne]={projected:[],edgeLabel:G.label,nodeLabel2:p[G.to].label}),V[ne].projected.push({graphId:b.id,edge:G,preNode:ee})}))});var we=X.length,ke=function(ee){if(xe)return"break";var Y=X[ee];z.forEach(function(K){var G=new x(K),ne=d.findForwardRmpathEdges(b,G.edges[Y],re,G);ne.length>0&&(xe=!0,ie=A.dfsEdgeList[Y].fromNode,ne.forEach(function(le){var ue=le.label+"-"+p[le.to].label;V[ue]||(V[ue]={projected:[],edgeLabel:le.label,nodeLabel2:p[le.to].label}),V[ue].projected.push({graphId:b.id,edge:le,preNode:K})}))})};for(ge=0;ge<we&&ke(ge)!=="break";ge++);if(!xe)return!0;var oe=d.findMinLabel(V);A.dfsEdgeList.push(new M(ie,se+1,c.VACANT_NODE_LABEL,oe.edgeLabel,oe.nodeLabel2));var J=A.dfsEdgeList.length-1;return y.dfsEdgeList[J]===A.dfsEdgeList[J]&&L(V[oe.edgeLabel+"-"+oe.nodeLabel2].projected)}(C[P].projected)},g.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var d=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,f.clone)(d))}},g.prototype.subGraphMining=function(d){var y=this;if(!(this.getSupport(d)<this.minSupport)&&this.isMin()){this.report();var E=this.dfsCode.getNodeNum(),b=this.dfsCode.buildRmpath(),p=this.dfsCode.dfsEdgeList[b[0]].toNode,A=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,C={},N={};d.forEach(function(P){for(var L=y.graphs[P.graphId],z=L.nodeMap,X=new x(P),re=b.length-1;re>=0;re--){var se=y.findBackwardEdge(L,X.edges[b[re]],X.edges[b[0]],X);if(se){var ce=y.dfsCode.dfsEdgeList[b[re]].fromNode+"-"+se.label;N[ce]||(N[ce]={projected:[],toNodeId:y.dfsCode.dfsEdgeList[b[re]].fromNode,edgeLabel:se.label}),N[ce].projected.push({graphId:P.graphId,edge:se,preNode:P})}}if(!(E>=y.maxNodeNum)){y.findForwardPureEdges(L,X.edges[b[0]],A,X).forEach(function(ye){var W=p+"-"+ye.label+"-"+z[ye.to].label;C[W]||(C[W]={projected:[],fromNodeId:p,edgeLabel:ye.label,nodeLabel2:z[ye.to].label}),C[W].projected.push({graphId:P.graphId,edge:ye,preNode:P})});var xe=function(ye){y.findForwardRmpathEdges(L,X.edges[b[ye]],A,X).forEach(function(W){var Ie=y.dfsCode.dfsEdgeList[b[ye]].fromNode+"-"+W.label+"-"+z[W.to].label;C[Ie]||(C[Ie]={projected:[],fromNodeId:y.dfsCode.dfsEdgeList[b[ye]].fromNode,edgeLabel:W.label,nodeLabel2:z[W.to].label}),C[Ie].projected.push({graphId:P.graphId,edge:W,preNode:P})})};for(re=0;re<b.length;re++)xe(re)}}),Object.keys(N).forEach(function(P){var L=N[P],z=L.toNodeId,X=L.edgeLabel;y.dfsCode.dfsEdgeList.push(new M(p,z,"-1",X,"-1")),y.subGraphMining(N[P].projected),y.dfsCode.dfsEdgeList.pop()}),Object.keys(C).forEach(function(P){var L=C[P],z=L.fromNodeId,X=L.edgeLabel,re=L.nodeLabel2;y.dfsCode.dfsEdgeList.push(new M(z,p+1,c.VACANT_NODE_LABEL,X,re)),y.subGraphMining(C[P].projected),y.dfsCode.dfsEdgeList.pop()})}},g.prototype.generate1EdgeFrequentSubGraphs=function(){var d=this.graphs,y=this.directed,E=this.minSupport,b=this.frequentSize1Subgraphs,p={},A={},C={},N={};return Object.keys(d).forEach(function(P){var L=d[P],z=L.nodeMap;L.nodes.forEach(function(X,re){var se=X.label,ce=P+"-"+se;if(!C[ce]){var xe=p[se]||0;xe++,p[se]=xe}C[ce]={graphKey:P,label:se},X.edges.forEach(function(ye){var W=se,Ie=z[ye.to].label;if(!y&&W>Ie){var ge=Ie;Ie=W,W=ge}var te=ye.label,H=P+"-"+W+"-"+te+"-"+Ie,V=W+"-"+te+"-"+Ie;if(!A[V]){var ie=A[V]||0;ie++,A[V]=ie}N[H]={graphId:P,nodeLabel1:W,edgeLabel:te,nodeLabel2:Ie}})})}),Object.keys(p).forEach(function(P){if(!(p[P]<E)){var L={nodes:[],edges:[]};L.nodes.push({id:"0",label:P}),b.push(L)}}),b},g.prototype.run=function(){var d=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var y=this.graphs,E=(this.directed,{});Object.keys(y).forEach(function(b){var p=y[b],A=p.nodeMap;p.nodes.forEach(function(C){d.findForwardRootEdges(p,C).forEach(function(N){var P=A[N.to],L=C.label+"-"+N.label+"-"+P.label;E[L]||(E[L]={projected:[],nodeLabel1:C.label,edgeLabel:N.label,nodeLabel2:P.label});var z={graphId:b,edge:N,preNode:null};E[L].projected.push(z)})})}),Object.keys(E).forEach(function(b){var p=E[b],A=p.projected,C=p.nodeLabel1,N=p.edgeLabel,P=p.nodeLabel2;d.dfsCode.dfsEdgeList.push(new M(0,1,C,N,P)),d.subGraphMining(A),d.dfsCode.dfsEdgeList.pop()})}},g}(),S=function(g){var d=g.graphs,y=g.directed,E=y!==void 0&&y,b=g.nodeLabelProp,p=b===void 0?"cluster":b,A=g.edgeLabelProp,C=A===void 0?"cluster":A,N=function(ce,xe,ye,W){var Ie={};return Object.keys(ce).forEach(function(ge,te){var H=ce[ge],V=new c.Graph(te,!0,xe),ie={};H.nodes.forEach(function(we,ke){V.addNode(ke,we[ye]),ie[we.id]=ke}),H.edges.forEach(function(we,ke){var oe=ie[we.source],J=ie[we.target];V.addEdge(-1,oe,J,we[W])}),V&&V.getNodeNum()&&(Ie[V.id]=V)}),Ie}(d,E,p,C),P=g.minSupport,L=g.maxNodeNum,z=g.minNodeNum,X=g.verbose,re=g.top,se=new O({graphs:N,minSupport:P,maxNodeNum:L,minNodeNum:z,top:re,verbose:X,directed:E});return se.run(),function(ce,xe,ye){var W=[];return ce.forEach(function(Ie){var ge={nodes:[],edges:[]};Ie.nodes.forEach(function(te){var H;ge.nodes.push(((H={id:""+te.id})[xe]=te.label,H))}),Ie.edges.forEach(function(te){var H;ge.edges.push(((H={source:""+te.from,target:""+te.to})[ye]=te.label,H))}),W.push(ge)}),W}(se.frequentSubgraphs,p,C)};m.default=S},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Graph=m.Node=m.Edge=m.AUTO_EDGE_ID=m.VACANT_GRAPH_ID=m.VACANT_NODE_LABEL=m.VACANT_EDGE_LABEL=m.VACANT_NODE_ID=m.VACANT_EDGE_ID=void 0,m.VACANT_EDGE_ID=-1,m.VACANT_NODE_ID=-1,m.VACANT_EDGE_LABEL="-1",m.VACANT_NODE_LABEL="-1",m.VACANT_GRAPH_ID=-1,m.AUTO_EDGE_ID="-1";var f=function(_,x,O,S){_===void 0&&(_=-1),x===void 0&&(x=-1),O===void 0&&(O=-1),S===void 0&&(S="-1"),this.id=_,this.from=x,this.to=O,this.label=S};m.Edge=f;var c=function(){function _(x,O){x===void 0&&(x=-1),O===void 0&&(O="-1"),this.id=x,this.label=O,this.edges=[],this.edgeMap={}}return _.prototype.addEdge=function(x){this.edges.push(x),this.edgeMap[x.id]=x},_}();m.Node=c;var M=function(){function _(x,O,S){x===void 0&&(x=-1),O===void 0&&(O=!0),S===void 0&&(S=!1),this.id=x,this.edgeIdAutoIncrease=O,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=S}return _.prototype.getNodeNum=function(){return this.nodes.length},_.prototype.addNode=function(x,O){if(!this.nodeMap[x]){var S=new c(x,O);this.nodes.push(S),this.nodeMap[x]=S,this.nodeLabelMap[O]||(this.nodeLabelMap[O]=[]),this.nodeLabelMap[O].push(x)}},_.prototype.addEdge=function(x,O,S,g){if((this.edgeIdAutoIncrease||x===void 0)&&(x=this.counter++),!(this.nodeMap[O]&&this.nodeMap[S]&&this.nodeMap[S].edgeMap[x])){var d=new f(x,O,S,g);if(this.edges.push(d),this.edgeMap[x]=d,this.nodeMap[O].addEdge(d),this.edgeLabelMap[g]||(this.edgeLabelMap[g]=[]),this.edgeLabelMap[g].push(d),!this.directed){var y=new f(x,S,O,g);this.nodeMap[S].addEdge(y),this.edgeLabelMap[g].push(y)}}},_}();m.Graph=M},function(D,m,o){var f=o(299),c=o(300),M={};for(var _ in f)f.hasOwnProperty(_)&&(M[f[_]]=_);var x=D.exports={to:{},get:{}};function O(g,d,y){return Math.min(Math.max(d,g),y)}function S(g){var d=g.toString(16).toUpperCase();return d.length<2?"0"+d:d}x.get=function(g){var d,y;switch(g.substring(0,3).toLowerCase()){case"hsl":d=x.get.hsl(g),y="hsl";break;case"hwb":d=x.get.hwb(g),y="hwb";break;default:d=x.get.rgb(g),y="rgb"}return d?{model:y,value:d}:null},x.get.rgb=function(g){if(!g)return null;var d,y,E,b=[0,0,0,1];if(d=g.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(E=d[2],d=d[1],y=0;y<3;y++){var p=2*y;b[y]=parseInt(d.slice(p,p+2),16)}E&&(b[3]=parseInt(E,16)/255)}else if(d=g.match(/^#([a-f0-9]{3,4})$/i)){for(E=(d=d[1])[3],y=0;y<3;y++)b[y]=parseInt(d[y]+d[y],16);E&&(b[3]=parseInt(E+E,16)/255)}else if(d=g.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(y=0;y<3;y++)b[y]=parseInt(d[y+1],0);d[4]&&(b[3]=parseFloat(d[4]))}else{if(!(d=g.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(d=g.match(/(\D+)/))?d[1]==="transparent"?[0,0,0,0]:(b=f[d[1]])?(b[3]=1,b):null:null;for(y=0;y<3;y++)b[y]=Math.round(2.55*parseFloat(d[y+1]));d[4]&&(b[3]=parseFloat(d[4]))}for(y=0;y<3;y++)b[y]=O(b[y],0,255);return b[3]=O(b[3],0,1),b},x.get.hsl=function(g){if(!g)return null;var d=g.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)\s*)?\)$/);if(d){var y=parseFloat(d[4]);return[(parseFloat(d[1])+360)%360,O(parseFloat(d[2]),0,100),O(parseFloat(d[3]),0,100),O(isNaN(y)?1:y,0,1)]}return null},x.get.hwb=function(g){if(!g)return null;var d=g.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(d){var y=parseFloat(d[4]);return[(parseFloat(d[1])%360+360)%360,O(parseFloat(d[2]),0,100),O(parseFloat(d[3]),0,100),O(isNaN(y)?1:y,0,1)]}return null},x.to.hex=function(){var g=c(arguments);return"#"+S(g[0])+S(g[1])+S(g[2])+(g[3]<1?S(Math.round(255*g[3])):"")},x.to.rgb=function(){var g=c(arguments);return g.length<4||g[3]===1?"rgb("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+")":"rgba("+Math.round(g[0])+", "+Math.round(g[1])+", "+Math.round(g[2])+", "+g[3]+")"},x.to.rgb.percent=function(){var g=c(arguments),d=Math.round(g[0]/255*100),y=Math.round(g[1]/255*100),E=Math.round(g[2]/255*100);return g.length<4||g[3]===1?"rgb("+d+"%, "+y+"%, "+E+"%)":"rgba("+d+"%, "+y+"%, "+E+"%, "+g[3]+")"},x.to.hsl=function(){var g=c(arguments);return g.length<4||g[3]===1?"hsl("+g[0]+", "+g[1]+"%, "+g[2]+"%)":"hsla("+g[0]+", "+g[1]+"%, "+g[2]+"%, "+g[3]+")"},x.to.hwb=function(){var g=c(arguments),d="";return g.length>=4&&g[3]!==1&&(d=", "+g[3]),"hwb("+g[0]+", "+g[1]+"%, "+g[2]+"%"+d+")"},x.to.keyword=function(g){return M[g.slice(0,3)]}},function(D,m,o){"use strict";D.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(D,m,o){"use strict";var f=o(301),c=Array.prototype.concat,M=Array.prototype.slice,_=D.exports=function(x){for(var O=[],S=0,g=x.length;S<g;S++){var d=x[S];f(d)?O=c.call(O,M.call(d)):O.push(d)}return O};_.wrap=function(x){return function(){return x(_(arguments))}}},function(D,m){D.exports=function(o){return!(!o||typeof o=="string")&&(o instanceof Array||Array.isArray(o)||o.length>=0&&(o.splice instanceof Function||Object.getOwnPropertyDescriptor(o,o.length-1)&&o.constructor.name!=="String"))}},function(D,m,o){function f(x){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(x)}var c=o(173),M=o(304),_={};Object.keys(c).forEach(function(x){_[x]={},Object.defineProperty(_[x],"channels",{value:c[x].channels}),Object.defineProperty(_[x],"labels",{value:c[x].labels});var O=M(x);Object.keys(O).forEach(function(S){var g=O[S];_[x][S]=function(d){var y=function(E){if(E==null)return E;arguments.length>1&&(E=Array.prototype.slice.call(arguments));var b=d(E);if(f(b)==="object")for(var p=b.length,A=0;A<p;A++)b[A]=Math.round(b[A]);return b};return"conversion"in d&&(y.conversion=d.conversion),y}(g),_[x][S].raw=function(d){var y=function(E){return E==null?E:(arguments.length>1&&(E=Array.prototype.slice.call(arguments)),d(E))};return"conversion"in d&&(y.conversion=d.conversion),y}(g)})}),D.exports=_},function(D,m,o){"use strict";D.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(D,m,o){var f=o(173);function c(x){var O=function(){for(var A={},C=Object.keys(f),N=C.length,P=0;P<N;P++)A[C[P]]={distance:-1,parent:null};return A}(),S=[x];for(O[x].distance=0;S.length;)for(var g=S.pop(),d=Object.keys(f[g]),y=d.length,E=0;E<y;E++){var b=d[E],p=O[b];p.distance===-1&&(p.distance=O[g].distance+1,p.parent=g,S.unshift(b))}return O}function M(x,O){return function(S){return O(x(S))}}function _(x,O){for(var S=[O[x].parent,x],g=f[O[x].parent][x],d=O[x].parent;O[d].parent;)S.unshift(O[d].parent),g=M(f[O[d].parent][d],g),d=O[d].parent;return g.conversion=S,g}D.exports=function(x){for(var O=c(x),S={},g=Object.keys(O),d=g.length,y=0;y<d;y++){var E=g[y];O[E].parent!==null&&(S[E]=_(E,O))}return S}},function(D,m,o){var f=o(306);D.exports={Graph:f.Graph,json:o(408),alg:o(409),version:f.version}},function(D,m,o){D.exports={Graph:o(143),version:o(407)}},function(D,m,o){var f=o(174);D.exports=function(c){return f(c,4)}},function(D,m){D.exports=function(){this.__data__=[],this.size=0}},function(D,m,o){var f=o(98),c=Array.prototype.splice;D.exports=function(M){var _=this.__data__,x=f(_,M);return!(x<0)&&(x==_.length-1?_.pop():c.call(_,x,1),--this.size,!0)}},function(D,m,o){var f=o(98);D.exports=function(c){var M=this.__data__,_=f(M,c);return _<0?void 0:M[_][1]}},function(D,m,o){var f=o(98);D.exports=function(c){return f(this.__data__,c)>-1}},function(D,m,o){var f=o(98);D.exports=function(c,M){var _=this.__data__,x=f(_,c);return x<0?(++this.size,_.push([c,M])):_[x][1]=M,this}},function(D,m,o){var f=o(97);D.exports=function(){this.__data__=new f,this.size=0}},function(D,m){D.exports=function(o){var f=this.__data__,c=f.delete(o);return this.size=f.size,c}},function(D,m){D.exports=function(o){return this.__data__.get(o)}},function(D,m){D.exports=function(o){return this.__data__.has(o)}},function(D,m,o){var f=o(97),c=o(144),M=o(145);D.exports=function(_,x){var O=this.__data__;if(O instanceof f){var S=O.__data__;if(!c||S.length<199)return S.push([_,x]),this.size=++O.size,this;O=this.__data__=new M(S)}return O.set(_,x),this.size=O.size,this}},function(D,m,o){var f=o(84),c=o(321),M=o(43),_=o(177),x=/^\[object .+?Constructor\]$/,O=Function.prototype,S=Object.prototype,g=O.toString,d=S.hasOwnProperty,y=RegExp("^"+g.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");D.exports=function(E){return!(!M(E)||c(E))&&(f(E)?y:x).test(_(E))}},function(D,m,o){var f=o(71),c=Object.prototype,M=c.hasOwnProperty,_=c.toString,x=f?f.toStringTag:void 0;D.exports=function(O){var S=M.call(O,x),g=O[x];try{O[x]=void 0;var d=!0}catch(E){}var y=_.call(O);return d&&(S?O[x]=g:delete O[x]),y}},function(D,m){var o=Object.prototype.toString;D.exports=function(f){return o.call(f)}},function(D,m,o){var f,c=o(322),M=(f=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"";D.exports=function(_){return!!M&&M in _}},function(D,m,o){var f=o(47)["__core-js_shared__"];D.exports=f},function(D,m){D.exports=function(o,f){return o==null?void 0:o[f]}},function(D,m,o){var f=o(325),c=o(97),M=o(144);D.exports=function(){this.size=0,this.__data__={hash:new f,map:new(M||c),string:new f}}},function(D,m,o){var f=o(326),c=o(327),M=o(328),_=o(329),x=o(330);function O(S){var g=-1,d=S==null?0:S.length;for(this.clear();++g<d;){var y=S[g];this.set(y[0],y[1])}}O.prototype.clear=f,O.prototype.delete=c,O.prototype.get=M,O.prototype.has=_,O.prototype.set=x,D.exports=O},function(D,m,o){var f=o(99);D.exports=function(){this.__data__=f?f(null):{},this.size=0}},function(D,m){D.exports=function(o){var f=this.has(o)&&delete this.__data__[o];return this.size-=f?1:0,f}},function(D,m,o){var f=o(99),c=Object.prototype.hasOwnProperty;D.exports=function(M){var _=this.__data__;if(f){var x=_[M];return x==="__lodash_hash_undefined__"?void 0:x}return c.call(_,M)?_[M]:void 0}},function(D,m,o){var f=o(99),c=Object.prototype.hasOwnProperty;D.exports=function(M){var _=this.__data__;return f?_[M]!==void 0:c.call(_,M)}},function(D,m,o){var f=o(99);D.exports=function(c,M){var _=this.__data__;return this.size+=this.has(c)?0:1,_[c]=f&&M===void 0?"__lodash_hash_undefined__":M,this}},function(D,m,o){var f=o(100);D.exports=function(c){var M=f(this,c).delete(c);return this.size-=M?1:0,M}},function(D,m){function o(f){return(o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}D.exports=function(f){var c=o(f);return c=="string"||c=="number"||c=="symbol"||c=="boolean"?f!=="__proto__":f===null}},function(D,m,o){var f=o(100);D.exports=function(c){return f(this,c).get(c)}},function(D,m,o){var f=o(100);D.exports=function(c){return f(this,c).has(c)}},function(D,m,o){var f=o(100);D.exports=function(c,M){var _=f(this,c),x=_.size;return _.set(c,M),this.size+=_.size==x?0:1,this}},function(D,m,o){var f=o(85),c=o(57);D.exports=function(M,_){return M&&f(_,c(_),M)}},function(D,m){D.exports=function(o,f){for(var c=-1,M=Array(o);++c<o;)M[c]=f(c);return M}},function(D,m,o){var f=o(63),c=o(49);D.exports=function(M){return c(M)&&f(M)=="[object Arguments]"}},function(D,m){D.exports=function(){return!1}},function(D,m,o){var f=o(63),c=o(147),M=o(49),_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Arguments]"]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_["[object Function]"]=_["[object Map]"]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1,D.exports=function(x){return M(x)&&c(x.length)&&!!_[f(x)]}},function(D,m,o){var f=o(180)(Object.keys,Object);D.exports=f},function(D,m,o){var f=o(85),c=o(64);D.exports=function(M,_){return M&&f(_,c(_),M)}},function(D,m,o){var f=o(43),c=o(105),M=o(344),_=Object.prototype.hasOwnProperty;D.exports=function(x){if(!f(x))return M(x);var O=c(x),S=[];for(var g in x)(g!="constructor"||!O&&_.call(x,g))&&S.push(g);return S}},function(D,m){D.exports=function(o){var f=[];if(o!=null)for(var c in Object(o))f.push(c);return f}},function(D,m,o){var f=o(85),c=o(150);D.exports=function(M,_){return f(M,c(M),_)}},function(D,m,o){var f=o(85),c=o(185);D.exports=function(M,_){return f(M,c(M),_)}},function(D,m,o){var f=o(187),c=o(185),M=o(64);D.exports=function(_){return f(_,M,c)}},function(D,m,o){var f=o(62)(o(47),"DataView");D.exports=f},function(D,m,o){var f=o(62)(o(47),"Promise");D.exports=f},function(D,m,o){var f=o(62)(o(47),"WeakMap");D.exports=f},function(D,m){var o=Object.prototype.hasOwnProperty;D.exports=function(f){var c=f.length,M=new f.constructor(c);return c&&typeof f[0]=="string"&&o.call(f,"index")&&(M.index=f.index,M.input=f.input),M}},function(D,m,o){var f=o(152),c=o(353),M=o(354),_=o(355),x=o(190);D.exports=function(O,S,g){var d=O.constructor;switch(S){case"[object ArrayBuffer]":return f(O);case"[object Boolean]":case"[object Date]":return new d(+O);case"[object DataView]":return c(O,g);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(O,g);case"[object Map]":return new d;case"[object Number]":case"[object String]":return new d(O);case"[object RegExp]":return M(O);case"[object Set]":return new d;case"[object Symbol]":return _(O)}}},function(D,m,o){var f=o(152);D.exports=function(c,M){var _=M?f(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.byteLength)}},function(D,m){var o=/\w*$/;D.exports=function(f){var c=new f.constructor(f.source,o.exec(f));return c.lastIndex=f.lastIndex,c}},function(D,m,o){var f=o(71),c=f?f.prototype:void 0,M=c?c.valueOf:void 0;D.exports=function(_){return M?Object(M.call(_)):{}}},function(D,m,o){var f=o(357),c=o(104),M=o(148),_=M&&M.isMap,x=_?c(_):f;D.exports=x},function(D,m,o){var f=o(73),c=o(49);D.exports=function(M){return c(M)&&f(M)=="[object Map]"}},function(D,m,o){var f=o(359),c=o(104),M=o(148),_=M&&M.isSet,x=_?c(_):f;D.exports=x},function(D,m,o){var f=o(73),c=o(49);D.exports=function(M){return c(M)&&f(M)=="[object Set]"}},function(D,m){D.exports=function(o){return function(f,c,M){for(var _=-1,x=Object(f),O=M(f),S=O.length;S--;){var g=O[o?S:++_];if(c(x[g],g,x)===!1)break}return f}}},function(D,m,o){var f=o(52);D.exports=function(c,M){return function(_,x){if(_==null)return _;if(!f(_))return c(_,x);for(var O=_.length,S=M?O:-1,g=Object(_);(M?S--:++S<O)&&x(g[S],S,g)!==!1;);return _}}},function(D,m,o){var f=o(107);D.exports=function(c,M){var _=[];return f(c,function(x,O,S){M(x,O,S)&&_.push(x)}),_}},function(D,m,o){var f=o(364),c=o(372),M=o(202);D.exports=function(_){var x=c(_);return x.length==1&&x[0][2]?M(x[0][0],x[0][1]):function(O){return O===_||f(O,_,x)}}},function(D,m,o){var f=o(96),c=o(197);D.exports=function(M,_,x,O){var S=x.length,g=S,d=!O;if(M==null)return!g;for(M=Object(M);S--;){var y=x[S];if(d&&y[2]?y[1]!==M[y[0]]:!(y[0]in M))return!1}for(;++S<g;){var E=(y=x[S])[0],b=M[E],p=y[1];if(d&&y[2]){if(b===void 0&&!(E in M))return!1}else{var A=new f;if(O)var C=O(b,p,E,M,_,A);if(!(C===void 0?c(p,b,3,O,A):C))return!1}}return!0}},function(D,m,o){var f=o(96),c=o(198),M=o(369),_=o(371),x=o(73),O=o(31),S=o(72),g=o(88),d="[object Object]",y=Object.prototype.hasOwnProperty;D.exports=function(E,b,p,A,C,N){var P=O(E),L=O(b),z=P?"[object Array]":x(E),X=L?"[object Array]":x(b),re=(z=z=="[object Arguments]"?d:z)==d,se=(X=X=="[object Arguments]"?d:X)==d,ce=z==X;if(ce&&S(E)){if(!S(b))return!1;P=!0,re=!1}if(ce&&!re)return N||(N=new f),P||g(E)?c(E,b,p,A,C,N):M(E,b,z,p,A,C,N);if(!(1&p)){var xe=re&&y.call(E,"__wrapped__"),ye=se&&y.call(b,"__wrapped__");if(xe||ye){var W=xe?E.value():E,Ie=ye?b.value():b;return N||(N=new f),C(W,Ie,p,A,N)}}return!!ce&&(N||(N=new f),_(E,b,p,A,C,N))}},function(D,m){D.exports=function(o){return this.__data__.set(o,"__lodash_hash_undefined__"),this}},function(D,m){D.exports=function(o){return this.__data__.has(o)}},function(D,m){D.exports=function(o,f){for(var c=-1,M=o==null?0:o.length;++c<M;)if(f(o[c],c,o))return!0;return!1}},function(D,m,o){var f=o(71),c=o(189),M=o(70),_=o(198),x=o(370),O=o(156),S=f?f.prototype:void 0,g=S?S.valueOf:void 0;D.exports=function(d,y,E,b,p,A,C){switch(E){case"[object DataView]":if(d.byteLength!=y.byteLength||d.byteOffset!=y.byteOffset)return!1;d=d.buffer,y=y.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=y.byteLength||!A(new c(d),new c(y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return M(+d,+y);case"[object Error]":return d.name==y.name&&d.message==y.message;case"[object RegExp]":case"[object String]":return d==y+"";case"[object Map]":var N=x;case"[object Set]":var P=1&b;if(N||(N=O),d.size!=y.size&&!P)return!1;var L=C.get(d);if(L)return L==y;b|=2,C.set(d,y);var z=_(N(d),N(y),b,p,A,C);return C.delete(d),z;case"[object Symbol]":if(g)return g.call(d)==g.call(y)}return!1}},function(D,m){D.exports=function(o){var f=-1,c=Array(o.size);return o.forEach(function(M,_){c[++f]=[_,M]}),c}},function(D,m,o){var f=o(186),c=Object.prototype.hasOwnProperty;D.exports=function(M,_,x,O,S,g){var d=1&x,y=f(M),E=y.length;if(E!=f(_).length&&!d)return!1;for(var b=E;b--;){var p=y[b];if(!(d?p in _:c.call(_,p)))return!1}var A=g.get(M),C=g.get(_);if(A&&C)return A==_&&C==M;var N=!0;g.set(M,_),g.set(_,M);for(var P=d;++b<E;){var L=M[p=y[b]],z=_[p];if(O)var X=d?O(z,L,p,_,M,g):O(L,z,p,M,_,g);if(!(X===void 0?L===z||S(L,z,x,O,g):X)){N=!1;break}P||(P=p=="constructor")}if(N&&!P){var re=M.constructor,se=_.constructor;re==se||!("constructor"in M)||!("constructor"in _)||typeof re=="function"&&re instanceof re&&typeof se=="function"&&se instanceof se||(N=!1)}return g.delete(M),g.delete(_),N}},function(D,m,o){var f=o(201),c=o(57);D.exports=function(M){for(var _=c(M),x=_.length;x--;){var O=_[x],S=M[O];_[x]=[O,S,f(S)]}return _}},function(D,m,o){var f=o(197),c=o(374),M=o(204),_=o(157),x=o(201),O=o(202),S=o(89);D.exports=function(g,d){return _(g)&&x(d)?O(S(g),d):function(y){var E=c(y,g);return E===void 0&&E===d?M(y,g):f(d,E,3)}}},function(D,m,o){var f=o(108);D.exports=function(c,M,_){var x=c==null?void 0:f(c,M);return x===void 0?_:x}},function(D,m,o){var f=o(376),c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,_=f(function(x){var O=[];return x.charCodeAt(0)===46&&O.push(""),x.replace(c,function(S,g,d,y){O.push(d?y.replace(M,"$1"):g||S)}),O});D.exports=_},function(D,m,o){var f=o(377);D.exports=function(c){var M=f(c,function(x){return _.size===500&&_.clear(),x}),_=M.cache;return M}},function(D,m,o){var f=o(145);function c(M,_){if(typeof M!="function"||_!=null&&typeof _!="function")throw new TypeError("Expected a function");var x=function O(){var S=arguments,g=_?_.apply(this,S):S[0],d=O.cache;if(d.has(g))return d.get(g);var y=M.apply(this,S);return O.cache=d.set(g,y)||d,y};return x.cache=new(c.Cache||f),x}c.Cache=f,D.exports=c},function(D,m,o){var f=o(71),c=o(110),M=o(31),_=o(74),x=f?f.prototype:void 0,O=x?x.toString:void 0;D.exports=function S(g){if(typeof g=="string")return g;if(M(g))return c(g,S)+"";if(_(g))return O?O.call(g):"";var d=g+"";return d=="0"&&1/g==-1/0?"-0":d}},function(D,m){D.exports=function(o,f){return o!=null&&f in Object(o)}},function(D,m,o){var f=o(206),c=o(381),M=o(157),_=o(89);D.exports=function(x){return M(x)?f(_(x)):c(x)}},function(D,m,o){var f=o(108);D.exports=function(c){return function(M){return f(M,c)}}},function(D,m){var o=Object.prototype.hasOwnProperty;D.exports=function(f,c){return f!=null&&o.call(f,c)}},function(D,m,o){var f=o(149),c=o(73),M=o(86),_=o(31),x=o(52),O=o(72),S=o(105),g=o(88),d=Object.prototype.hasOwnProperty;D.exports=function(y){if(y==null)return!0;if(x(y)&&(_(y)||typeof y=="string"||typeof y.splice=="function"||O(y)||g(y)||M(y)))return!y.length;var E=c(y);if(E=="[object Map]"||E=="[object Set]")return!y.size;if(S(y))return!f(y).length;for(var b in y)if(d.call(y,b))return!1;return!0}},function(D,m){D.exports=function(o,f,c,M){var _=-1,x=o==null?0:o.length;for(M&&x&&(c=o[++_]);++_<x;)c=f(c,o[_],_,o);return c}},function(D,m){D.exports=function(o,f,c,M,_){return _(o,function(x,O,S){c=M?(M=!1,x):f(c,x,O,S)}),c}},function(D,m,o){var f=o(149),c=o(73),M=o(52),_=o(387),x=o(388);D.exports=function(O){if(O==null)return 0;if(M(O))return _(O)?x(O):O.length;var S=c(O);return S=="[object Map]"||S=="[object Set]"?O.size:f(O).length}},function(D,m,o){var f=o(63),c=o(31),M=o(49);D.exports=function(_){return typeof _=="string"||!c(_)&&M(_)&&f(_)=="[object String]"}},function(D,m,o){var f=o(389),c=o(390),M=o(391);D.exports=function(_){return c(_)?M(_):f(_)}},function(D,m,o){var f=o(206)("length");D.exports=f},function(D,m){var o=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");D.exports=function(f){return o.test(f)}},function(D,m){var o="[\\ud800-\\udfff]",f="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",c="\\ud83c[\\udffb-\\udfff]",M="[^\\ud800-\\udfff]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",x="[\\ud800-\\udbff][\\udc00-\\udfff]",O="(?:"+f+"|"+c+")?",S="[\\ufe0e\\ufe0f]?"+O+("(?:\\u200d(?:"+[M,_,x].join("|")+")[\\ufe0e\\ufe0f]?"+O+")*"),g="(?:"+[M+f+"?",f,_,x,o].join("|")+")",d=RegExp(c+"(?="+c+")|"+g+S,"g");D.exports=function(y){for(var E=d.lastIndex=0;d.test(y);)++E;return E}},function(D,m,o){var f=o(146),c=o(192),M=o(154),_=o(53),x=o(106),O=o(31),S=o(72),g=o(84),d=o(43),y=o(88);D.exports=function(E,b,p){var A=O(E),C=A||S(E)||y(E);if(b=_(b,4),p==null){var N=E&&E.constructor;p=C?A?new N:[]:d(E)&&g(N)?c(x(E)):{}}return(C?f:M)(E,function(P,L,z){return b(p,P,L,z)}),p}},function(D,m,o){var f=o(158),c=o(111),M=o(398),_=o(215),x=c(function(O){return M(f(O,1,_,!0))});D.exports=x},function(D,m,o){var f=o(71),c=o(86),M=o(31),_=f?f.isConcatSpreadable:void 0;D.exports=function(x){return M(x)||c(x)||!!(_&&x&&x[_])}},function(D,m){D.exports=function(o,f,c){switch(c.length){case 0:return o.call(f);case 1:return o.call(f,c[0]);case 2:return o.call(f,c[0],c[1]);case 3:return o.call(f,c[0],c[1],c[2])}return o.apply(f,c)}},function(D,m,o){var f=o(153),c=o(178),M=o(65),_=c?function(x,O){return c(x,"toString",{configurable:!0,enumerable:!1,value:f(O),writable:!0})}:M;D.exports=_},function(D,m){var o=Date.now;D.exports=function(f){var c=0,M=0;return function(){var _=o(),x=16-(_-M);if(M=_,x>0){if(++c>=800)return arguments[0]}else c=0;return f.apply(void 0,arguments)}}},function(D,m,o){var f=o(199),c=o(399),M=o(403),_=o(200),x=o(404),O=o(156);D.exports=function(S,g,d){var y=-1,E=c,b=S.length,p=!0,A=[],C=A;if(d)p=!1,E=M;else if(b>=200){var N=g?null:x(S);if(N)return O(N);p=!1,E=_,C=new f}else C=g?[]:A;e:for(;++y<b;){var P=S[y],L=g?g(P):P;if(P=d||P!==0?P:0,p&&L==L){for(var z=C.length;z--;)if(C[z]===L)continue e;g&&C.push(L),A.push(P)}else E(C,L,d)||(C!==A&&C.push(L),A.push(P))}return A}},function(D,m,o){var f=o(400);D.exports=function(c,M){return!!(c!=null&&c.length)&&f(c,M,0)>-1}},function(D,m,o){var f=o(214),c=o(401),M=o(402);D.exports=function(_,x,O){return x==x?M(_,x,O):f(_,c,O)}},function(D,m){D.exports=function(o){return o!=o}},function(D,m){D.exports=function(o,f,c){for(var M=c-1,_=o.length;++M<_;)if(o[M]===f)return M;return-1}},function(D,m){D.exports=function(o,f,c){for(var M=-1,_=o==null?0:o.length;++M<_;)if(c(f,o[M]))return!0;return!1}},function(D,m,o){var f=o(188),c=o(405),M=o(156),_=f&&1/M(new f([,-0]))[1]==1/0?function(x){return new f(x)}:c;D.exports=_},function(D,m){D.exports=function(){}},function(D,m,o){var f=o(110);D.exports=function(c,M){return f(M,function(_){return c[_]})}},function(D,m){D.exports="2.1.8"},function(D,m,o){var f=o(42),c=o(143);function M(x){return f.map(x.nodes(),function(O){var S=x.node(O),g=x.parent(O),d={v:O};return f.isUndefined(S)||(d.value=S),f.isUndefined(g)||(d.parent=g),d})}function _(x){return f.map(x.edges(),function(O){var S=x.edge(O),g={v:O.v,w:O.w};return f.isUndefined(O.name)||(g.name=O.name),f.isUndefined(S)||(g.value=S),g})}D.exports={write:function(x){var O={options:{directed:x.isDirected(),multigraph:x.isMultigraph(),compound:x.isCompound()},nodes:M(x),edges:_(x)};return f.isUndefined(x.graph())||(O.value=f.clone(x.graph())),O},read:function(x){var O=new c(x.options).setGraph(x.value);return f.each(x.nodes,function(S){O.setNode(S.v,S.value),S.parent&&O.setParent(S.v,S.parent)}),f.each(x.edges,function(S){O.setEdge({v:S.v,w:S.w,name:S.name},S.value)}),O}}},function(D,m,o){D.exports={components:o(410),dijkstra:o(217),dijkstraAll:o(411),findCycles:o(412),floydWarshall:o(413),isAcyclic:o(414),postorder:o(415),preorder:o(416),prim:o(417),tarjan:o(219),topsort:o(220)}},function(D,m,o){var f=o(42);D.exports=function(c){var M,_={},x=[];function O(S){f.has(_,S)||(_[S]=!0,M.push(S),f.each(c.successors(S),O),f.each(c.predecessors(S),O))}return f.each(c.nodes(),function(S){M=[],O(S),M.length&&x.push(M)}),x}},function(D,m,o){var f=o(217),c=o(42);D.exports=function(M,_,x){return c.transform(M.nodes(),function(O,S){O[S]=f(M,S,_,x)},{})}},function(D,m,o){var f=o(42),c=o(219);D.exports=function(M){return f.filter(c(M),function(_){return _.length>1||_.length===1&&M.hasEdge(_[0],_[0])})}},function(D,m,o){var f=o(42);D.exports=function(M,_,x){return function(O,S,g){var d={},y=O.nodes();return y.forEach(function(E){d[E]={},d[E][E]={distance:0},y.forEach(function(b){E!==b&&(d[E][b]={distance:Number.POSITIVE_INFINITY})}),g(E).forEach(function(b){var p=b.v===E?b.w:b.v,A=S(b);d[E][p]={distance:A,predecessor:E}})}),y.forEach(function(E){var b=d[E];y.forEach(function(p){var A=d[p];y.forEach(function(C){var N=A[E],P=b[C],L=A[C],z=N.distance+P.distance;z<L.distance&&(L.distance=z,L.predecessor=P.predecessor)})})}),d}(M,_||c,x||function(O){return M.outEdges(O)})};var c=f.constant(1)},function(D,m,o){var f=o(220);D.exports=function(c){try{f(c)}catch(M){if(M instanceof f.CycleException)return!1;throw M}return!0}},function(D,m,o){var f=o(221);D.exports=function(c,M){return f(c,M,"post")}},function(D,m,o){var f=o(221);D.exports=function(c,M){return f(c,M,"pre")}},function(D,m,o){var f=o(42),c=o(143),M=o(218);D.exports=function(_,x){var O,S=new c,g={},d=new M;function y(b){var p=b.v===O?b.w:b.v,A=d.priority(p);if(A!==void 0){var C=x(b);C<A&&(g[p]=O,d.decrease(p,C))}}if(_.nodeCount()===0)return S;f.each(_.nodes(),function(b){d.add(b,Number.POSITIVE_INFINITY),S.setNode(b)}),d.decrease(_.nodes()[0],0);for(var E=!1;d.size()>0;){if(O=d.removeMin(),f.has(g,O))S.setEdge(O,g[O]);else{if(E)throw new Error("Input graph is not connected: "+_);E=!0}_.nodeEdges(O).forEach(y)}return S}},function(D,m,o){"use strict";var f=o(28),c=o(458),M=o(461),_=o(462),x=o(36).normalizeRanks,O=o(464),S=o(36).removeEmptyRanks,g=o(465),d=o(466),y=o(467),E=o(468),b=o(477),p=o(36),A=o(46).Graph;D.exports=function(ye,W){var Ie=W&&W.debugTiming?p.time:p.notime;Ie("layout",function(){var ge=Ie("  buildLayoutGraph",function(){return function(te){var H=new A({multigraph:!0,compound:!0}),V=xe(te.graph());return H.setGraph(f.merge({},N,ce(V,C),f.pick(V,P))),f.forEach(te.nodes(),function(ie){var we=xe(te.node(ie));H.setNode(ie,f.defaults(ce(we,L),z)),H.setParent(ie,te.parent(ie))}),f.forEach(te.edges(),function(ie){var we=xe(te.edge(ie));H.setEdge(ie,f.merge({},re,ce(we,X),f.pick(we,se)))}),H}(ye)});Ie("  runLayout",function(){(function(te,H){H("    makeSpaceForEdgeLabels",function(){(function(V){var ie=V.graph();ie.ranksep/=2,f.forEach(V.edges(),function(we){var ke=V.edge(we);ke.minlen*=2,ke.labelpos.toLowerCase()!=="c"&&(ie.rankdir==="TB"||ie.rankdir==="BT"?ke.width+=ke.labeloffset:ke.height+=ke.labeloffset)})})(te)}),H("    removeSelfEdges",function(){(function(V){f.forEach(V.edges(),function(ie){if(ie.v===ie.w){var we=V.node(ie.v);we.selfEdges||(we.selfEdges=[]),we.selfEdges.push({e:ie,label:V.edge(ie)}),V.removeEdge(ie)}})})(te)}),H("    acyclic",function(){c.run(te)}),H("    nestingGraph.run",function(){g.run(te)}),H("    rank",function(){_(p.asNonCompoundGraph(te))}),H("    injectEdgeLabelProxies",function(){(function(V){f.forEach(V.edges(),function(ie){var we=V.edge(ie);if(we.width&&we.height){var ke=V.node(ie.v),oe={rank:(V.node(ie.w).rank-ke.rank)/2+ke.rank,e:ie};p.addDummyNode(V,"edge-proxy",oe,"_ep")}})})(te)}),H("    removeEmptyRanks",function(){S(te)}),H("    nestingGraph.cleanup",function(){g.cleanup(te)}),H("    normalizeRanks",function(){x(te)}),H("    assignRankMinMax",function(){(function(V){var ie=0;f.forEach(V.nodes(),function(we){var ke=V.node(we);ke.borderTop&&(ke.minRank=V.node(ke.borderTop).rank,ke.maxRank=V.node(ke.borderBottom).rank,ie=f.max(ie,ke.maxRank))}),V.graph().maxRank=ie})(te)}),H("    removeEdgeLabelProxies",function(){(function(V){f.forEach(V.nodes(),function(ie){var we=V.node(ie);we.dummy==="edge-proxy"&&(V.edge(we.e).labelRank=we.rank,V.removeNode(ie))})})(te)}),H("    normalize.run",function(){M.run(te)}),H("    parentDummyChains",function(){O(te)}),H("    addBorderSegments",function(){d(te)}),H("    order",function(){E(te)}),H("    insertSelfEdges",function(){(function(V){var ie=p.buildLayerMatrix(V);f.forEach(ie,function(we){var ke=0;f.forEach(we,function(oe,J){var ee=V.node(oe);ee.order=J+ke,f.forEach(ee.selfEdges,function(Y){p.addDummyNode(V,"selfedge",{width:Y.label.width,height:Y.label.height,rank:ee.rank,order:J+ ++ke,e:Y.e,label:Y.label},"_se")}),delete ee.selfEdges})})})(te)}),H("    adjustCoordinateSystem",function(){y.adjust(te)}),H("    position",function(){b(te)}),H("    positionSelfEdges",function(){(function(V){f.forEach(V.nodes(),function(ie){var we=V.node(ie);if(we.dummy==="selfedge"){var ke=V.node(we.e.v),oe=ke.x+ke.width/2,J=ke.y,ee=we.x-oe,Y=ke.height/2;V.setEdge(we.e,we.label),V.removeNode(ie),we.label.points=[{x:oe+2*ee/3,y:J-Y},{x:oe+5*ee/6,y:J-Y},{x:oe+ee,y:J},{x:oe+5*ee/6,y:J+Y},{x:oe+2*ee/3,y:J+Y}],we.label.x=we.x,we.label.y=we.y}})})(te)}),H("    removeBorderNodes",function(){(function(V){f.forEach(V.nodes(),function(ie){if(V.children(ie).length){var we=V.node(ie),ke=V.node(we.borderTop),oe=V.node(we.borderBottom),J=V.node(f.last(we.borderLeft)),ee=V.node(f.last(we.borderRight));we.width=Math.abs(ee.x-J.x),we.height=Math.abs(oe.y-ke.y),we.x=J.x+we.width/2,we.y=ke.y+we.height/2}}),f.forEach(V.nodes(),function(ie){V.node(ie).dummy==="border"&&V.removeNode(ie)})})(te)}),H("    normalize.undo",function(){M.undo(te)}),H("    fixupEdgeLabelCoords",function(){(function(V){f.forEach(V.edges(),function(ie){var we=V.edge(ie);if(f.has(we,"x"))switch(we.labelpos!=="l"&&we.labelpos!=="r"||(we.width-=we.labeloffset),we.labelpos){case"l":we.x-=we.width/2+we.labeloffset;break;case"r":we.x+=we.width/2+we.labeloffset}})})(te)}),H("    undoCoordinateSystem",function(){y.undo(te)}),H("    translateGraph",function(){(function(V){var ie=Number.POSITIVE_INFINITY,we=0,ke=Number.POSITIVE_INFINITY,oe=0,J=V.graph(),ee=J.marginx||0,Y=J.marginy||0;function K(G){var ne=G.x,le=G.y,ue=G.width,Q=G.height;ie=Math.min(ie,ne-ue/2),we=Math.max(we,ne+ue/2),ke=Math.min(ke,le-Q/2),oe=Math.max(oe,le+Q/2)}f.forEach(V.nodes(),function(G){K(V.node(G))}),f.forEach(V.edges(),function(G){var ne=V.edge(G);f.has(ne,"x")&&K(ne)}),ie-=ee,ke-=Y,f.forEach(V.nodes(),function(G){var ne=V.node(G);ne.x-=ie,ne.y-=ke}),f.forEach(V.edges(),function(G){var ne=V.edge(G);f.forEach(ne.points,function(le){le.x-=ie,le.y-=ke}),f.has(ne,"x")&&(ne.x-=ie),f.has(ne,"y")&&(ne.y-=ke)}),J.width=we-ie+ee,J.height=oe-ke+Y})(te)}),H("    assignNodeIntersects",function(){(function(V){f.forEach(V.edges(),function(ie){var we,ke,oe=V.edge(ie),J=V.node(ie.v),ee=V.node(ie.w);oe.points?(we=oe.points[0],ke=oe.points[oe.points.length-1]):(oe.points=[],we=ee,ke=J),oe.points.unshift(p.intersectRect(J,we)),oe.points.push(p.intersectRect(ee,ke))})})(te)}),H("    reversePoints",function(){(function(V){f.forEach(V.edges(),function(ie){var we=V.edge(ie);we.reversed&&we.points.reverse()})})(te)}),H("    acyclic.undo",function(){c.undo(te)})})(ge,Ie)}),Ie("  updateInputGraph",function(){(function(te,H){f.forEach(te.nodes(),function(V){var ie=te.node(V),we=H.node(V);ie&&(ie.x=we.x,ie.y=we.y,H.children(V).length&&(ie.width=we.width,ie.height=we.height))}),f.forEach(te.edges(),function(V){var ie=te.edge(V),we=H.edge(V);ie.points=we.points,f.has(we,"x")&&(ie.x=we.x,ie.y=we.y)}),te.graph().width=H.graph().width,te.graph().height=H.graph().height})(ye,ge)})})};var C=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},P=["acyclicer","ranker","rankdir","align"],L=["width","height"],z={width:0,height:0},X=["minlen","weight","width","height","labeloffset"],re={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},se=["labelpos"];function ce(ye,W){return f.mapValues(f.pick(ye,W),Number)}function xe(ye){var W={};return f.forEach(ye,function(Ie,ge){W[ge.toLowerCase()]=Ie}),W}},function(D,m,o){var f=o(174);D.exports=function(c){return f(c,5)}},function(D,m,o){var f=o(111),c=o(70),M=o(112),_=o(64),x=Object.prototype,O=x.hasOwnProperty,S=f(function(g,d){g=Object(g);var y=-1,E=d.length,b=E>2?d[2]:void 0;for(b&&M(d[0],d[1],b)&&(E=1);++y<E;)for(var p=d[y],A=_(p),C=-1,N=A.length;++C<N;){var P=A[C],L=g[P];(L===void 0||c(L,x[P])&&!O.call(g,P))&&(g[P]=p[P])}return g});D.exports=S},function(D,m,o){var f=o(422)(o(423));D.exports=f},function(D,m,o){var f=o(53),c=o(52),M=o(57);D.exports=function(_){return function(x,O,S){var g=Object(x);if(!c(x)){var d=f(O,3);x=M(x),O=function(E){return d(g[E],E,g)}}var y=_(x,O,S);return y>-1?g[d?x[y]:y]:void 0}}},function(D,m,o){var f=o(214),c=o(53),M=o(424),_=Math.max;D.exports=function(x,O,S){var g=x==null?0:x.length;if(!g)return-1;var d=S==null?0:M(S);return d<0&&(d=_(g+d,0)),f(x,c(O,3),d)}},function(D,m,o){var f=o(222);D.exports=function(c){var M=f(c),_=M%1;return M==M?_?M-_:M:0}},function(D,m,o){var f=o(426),c=o(43),M=o(74),_=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,O=/^0o[0-7]+$/i,S=parseInt;D.exports=function(g){if(typeof g=="number")return g;if(M(g))return NaN;if(c(g)){var d=typeof g.valueOf=="function"?g.valueOf():g;g=c(d)?d+"":d}if(typeof g!="string")return g===0?g:+g;g=f(g);var y=x.test(g);return y||O.test(g)?S(g.slice(2),y?2:8):_.test(g)?NaN:+g}},function(D,m,o){var f=o(427),c=/^\s+/;D.exports=function(M){return M&&M.slice(0,f(M)+1).replace(c,"")}},function(D,m){var o=/\s/;D.exports=function(f){for(var c=f.length;c--&&o.test(f.charAt(c)););return c}},function(D,m,o){var f=o(155),c=o(195),M=o(64);D.exports=function(_,x){return _==null?_:f(_,c(x),M)}},function(D,m){D.exports=function(o){var f=o==null?0:o.length;return f?o[f-1]:void 0}},function(D,m,o){var f=o(102),c=o(154),M=o(53);D.exports=function(_,x){var O={};return x=M(x,3),c(_,function(S,g,d){f(O,g,x(S,g,d))}),O}},function(D,m,o){var f=o(159),c=o(432),M=o(65);D.exports=function(_){return _&&_.length?f(_,M,c):void 0}},function(D,m){D.exports=function(o,f){return o>f}},function(D,m,o){var f=o(434),c=o(438)(function(M,_,x){f(M,_,x)});D.exports=c},function(D,m,o){var f=o(96),c=o(224),M=o(155),_=o(435),x=o(43),O=o(64),S=o(225);D.exports=function g(d,y,E,b,p){d!==y&&M(y,function(A,C){if(p||(p=new f),x(A))_(d,y,C,E,g,b,p);else{var N=b?b(S(d,C),A,C+"",d,y,p):void 0;N===void 0&&(N=A),c(d,C,N)}},O)}},function(D,m,o){var f=o(224),c=o(181),M=o(190),_=o(182),x=o(191),O=o(86),S=o(31),g=o(215),d=o(72),y=o(84),E=o(43),b=o(436),p=o(88),A=o(225),C=o(437);D.exports=function(N,P,L,z,X,re,se){var ce=A(N,L),xe=A(P,L),ye=se.get(xe);if(ye)f(N,L,ye);else{var W=re?re(ce,xe,L+"",N,P,se):void 0,Ie=W===void 0;if(Ie){var ge=S(xe),te=!ge&&d(xe),H=!ge&&!te&&p(xe);W=xe,ge||te||H?S(ce)?W=ce:g(ce)?W=_(ce):te?(Ie=!1,W=c(xe,!0)):H?(Ie=!1,W=M(xe,!0)):W=[]:b(xe)||O(xe)?(W=ce,O(ce)?W=C(ce):E(ce)&&!y(ce)||(W=x(xe))):Ie=!1}Ie&&(se.set(xe,W),X(W,xe,z,re,se),se.delete(xe)),f(N,L,W)}}},function(D,m,o){var f=o(63),c=o(106),M=o(49),_=Function.prototype,x=Object.prototype,O=_.toString,S=x.hasOwnProperty,g=O.call(Object);D.exports=function(d){if(!M(d)||f(d)!="[object Object]")return!1;var y=c(d);if(y===null)return!0;var E=S.call(y,"constructor")&&y.constructor;return typeof E=="function"&&E instanceof E&&O.call(E)==g}},function(D,m,o){var f=o(85),c=o(64);D.exports=function(M){return f(M,c(M))}},function(D,m,o){var f=o(111),c=o(112);D.exports=function(M){return f(function(_,x){var O=-1,S=x.length,g=S>1?x[S-1]:void 0,d=S>2?x[2]:void 0;for(g=M.length>3&&typeof g=="function"?(S--,g):void 0,d&&c(x[0],x[1],d)&&(g=S<3?void 0:g,S=1),_=Object(_);++O<S;){var y=x[O];y&&M(_,y,O,g)}return _})}},function(D,m,o){var f=o(159),c=o(226),M=o(65);D.exports=function(_){return _&&_.length?f(_,M,c):void 0}},function(D,m,o){var f=o(159),c=o(53),M=o(226);D.exports=function(_,x){return _&&_.length?f(_,c(x,2),M):void 0}},function(D,m,o){var f=o(47);D.exports=function(){return f.Date.now()}},function(D,m,o){var f=o(443),c=o(446)(function(M,_){return M==null?{}:f(M,_)});D.exports=c},function(D,m,o){var f=o(444),c=o(204);D.exports=function(M,_){return f(M,_,function(x,O){return c(M,O)})}},function(D,m,o){var f=o(108),c=o(445),M=o(109);D.exports=function(_,x,O){for(var S=-1,g=x.length,d={};++S<g;){var y=x[S],E=f(_,y);O(E,y)&&c(d,M(y,_),E)}return d}},function(D,m,o){var f=o(101),c=o(109),M=o(103),_=o(43),x=o(89);D.exports=function(O,S,g,d){if(!_(O))return O;for(var y=-1,E=(S=c(S,O)).length,b=E-1,p=O;p!=null&&++y<E;){var A=x(S[y]),C=g;if(A==="__proto__"||A==="constructor"||A==="prototype")return O;if(y!=b){var N=p[A];(C=d?d(N,A,p):void 0)===void 0&&(C=_(N)?N:M(S[y+1])?[]:{})}f(p,A,C),p=p[A]}return O}},function(D,m,o){var f=o(223),c=o(212),M=o(213);D.exports=function(_){return M(c(_,void 0,f),_+"")}},function(D,m,o){var f=o(448)();D.exports=f},function(D,m,o){var f=o(449),c=o(112),M=o(222);D.exports=function(_){return function(x,O,S){return S&&typeof S!="number"&&c(x,O,S)&&(O=S=void 0),x=M(x),O===void 0?(O=x,x=0):O=M(O),S=S===void 0?x<O?1:-1:M(S),f(x,O,S,_)}}},function(D,m){var o=Math.ceil,f=Math.max;D.exports=function(c,M,_,x){for(var O=-1,S=f(o((M-c)/(_||1)),0),g=Array(S);S--;)g[x?S:++O]=c,c+=_;return g}},function(D,m,o){var f=o(158),c=o(451),M=o(111),_=o(112),x=M(function(O,S){if(O==null)return[];var g=S.length;return g>1&&_(O,S[0],S[1])?S=[]:g>2&&_(S[0],S[1],S[2])&&(S=[S[0]]),c(O,f(S,1),[])});D.exports=x},function(D,m,o){var f=o(110),c=o(108),M=o(53),_=o(210),x=o(452),O=o(104),S=o(453),g=o(65),d=o(31);D.exports=function(y,E,b){E=E.length?f(E,function(C){return d(C)?function(N){return c(N,C.length===1?C[0]:C)}:C}):[g];var p=-1;E=f(E,O(M));var A=_(y,function(C,N,P){return{criteria:f(E,function(L){return L(C)}),index:++p,value:C}});return x(A,function(C,N){return S(C,N,b)})}},function(D,m){D.exports=function(o,f){var c=o.length;for(o.sort(f);c--;)o[c]=o[c].value;return o}},function(D,m,o){var f=o(454);D.exports=function(c,M,_){for(var x=-1,O=c.criteria,S=M.criteria,g=O.length,d=_.length;++x<g;){var y=f(O[x],S[x]);if(y)return x>=d?y:y*(_[x]=="desc"?-1:1)}return c.index-M.index}},function(D,m,o){var f=o(74);D.exports=function(c,M){if(c!==M){var _=c!==void 0,x=c===null,O=c==c,S=f(c),g=M!==void 0,d=M===null,y=M==M,E=f(M);if(!d&&!E&&!S&&c>M||S&&g&&y&&!d&&!E||x&&g&&y||!_&&y||!O)return 1;if(!x&&!S&&!E&&c<M||E&&_&&O&&!x&&!S||d&&_&&O||!g&&O||!y)return-1}return 0}},function(D,m,o){var f=o(203),c=0;D.exports=function(M){var _=++c;return f(M)+_}},function(D,m,o){var f=o(101),c=o(457);D.exports=function(M,_){return c(M||[],_||[],f)}},function(D,m){D.exports=function(o,f,c){for(var M=-1,_=o.length,x=f.length,O={};++M<_;){var S=M<x?f[M]:void 0;c(O,o[M],S)}return O}},function(D,m,o){"use strict";var f=o(28),c=o(459);D.exports={run:function(M){var _=M.graph().acyclicer==="greedy"?c(M,function(x){return function(O){return x.edge(O).weight}}(M)):function(x){var O=[],S={},g={};function d(y){f.has(g,y)||(g[y]=!0,S[y]=!0,f.forEach(x.outEdges(y),function(E){f.has(S,E.w)?O.push(E):d(E.w)}),delete S[y])}return f.forEach(x.nodes(),d),O}(M);f.forEach(_,function(x){var O=M.edge(x);M.removeEdge(x),O.forwardName=x.name,O.reversed=!0,M.setEdge(x.w,x.v,O,f.uniqueId("rev"))})},undo:function(M){f.forEach(M.edges(),function(_){var x=M.edge(_);if(x.reversed){M.removeEdge(_);var O=x.forwardName;delete x.reversed,delete x.forwardName,M.setEdge(_.w,_.v,x,O)}})}}},function(D,m,o){var f=o(28),c=o(46).Graph,M=o(460);D.exports=function(S,g){if(S.nodeCount()<=1)return[];var d=function(E,b){var p=new c,A=0,C=0;f.forEach(E.nodes(),function(L){p.setNode(L,{v:L,in:0,out:0})}),f.forEach(E.edges(),function(L){var z=p.edge(L.v,L.w)||0,X=b(L),re=z+X;p.setEdge(L.v,L.w,re),C=Math.max(C,p.node(L.v).out+=X),A=Math.max(A,p.node(L.w).in+=X)});var N=f.range(C+A+3).map(function(){return new M}),P=A+1;return f.forEach(p.nodes(),function(L){O(N,P,p.node(L))}),{graph:p,buckets:N,zeroIdx:P}}(S,g||_),y=function(E,b,p){for(var A,C=[],N=b[b.length-1],P=b[0];E.nodeCount();){for(;A=P.dequeue();)x(E,b,p,A);for(;A=N.dequeue();)x(E,b,p,A);if(E.nodeCount()){for(var L=b.length-2;L>0;--L)if(A=b[L].dequeue()){C=C.concat(x(E,b,p,A,!0));break}}}return C}(d.graph,d.buckets,d.zeroIdx);return f.flatten(f.map(y,function(E){return S.outEdges(E.v,E.w)}),!0)};var _=f.constant(1);function x(S,g,d,y,E){var b=E?[]:void 0;return f.forEach(S.inEdges(y.v),function(p){var A=S.edge(p),C=S.node(p.v);E&&b.push({v:p.v,w:p.w}),C.out-=A,O(g,d,C)}),f.forEach(S.outEdges(y.v),function(p){var A=S.edge(p),C=p.w,N=S.node(C);N.in-=A,O(g,d,N)}),S.removeNode(y.v),b}function O(S,g,d){d.out?d.in?S[d.out-d.in+g].enqueue(d):S[S.length-1].enqueue(d):S[0].enqueue(d)}},function(D,m){function o(){var M={};M._next=M._prev=M,this._sentinel=M}function f(M){M._prev._next=M._next,M._next._prev=M._prev,delete M._next,delete M._prev}function c(M,_){if(M!=="_next"&&M!=="_prev")return _}D.exports=o,o.prototype.dequeue=function(){var M=this._sentinel,_=M._prev;if(_!==M)return f(_),_},o.prototype.enqueue=function(M){var _=this._sentinel;M._prev&&M._next&&f(M),M._next=_._next,_._next._prev=M,_._next=M,M._prev=_},o.prototype.toString=function(){for(var M=[],_=this._sentinel,x=_._prev;x!==_;)M.push(JSON.stringify(x,c)),x=x._prev;return"["+M.join(", ")+"]"}},function(D,m,o){"use strict";var f=o(28),c=o(36);D.exports={run:function(M){M.graph().dummyChains=[],f.forEach(M.edges(),function(_){(function(x,O){var S,g,d,y=O.v,E=x.node(y).rank,b=O.w,p=x.node(b).rank,A=O.name,C=x.edge(O),N=C.labelRank;if(p!==E+1){for(x.removeEdge(O),d=0,++E;E<p;++d,++E)C.points=[],g={width:0,height:0,edgeLabel:C,edgeObj:O,rank:E},S=c.addDummyNode(x,"edge",g,"_d"),E===N&&(g.width=C.width,g.height=C.height,g.dummy="edge-label",g.labelpos=C.labelpos),x.setEdge(y,S,{weight:C.weight},A),d===0&&x.graph().dummyChains.push(S),y=S;x.setEdge(y,b,{weight:C.weight},A)}})(M,_)})},undo:function(M){f.forEach(M.graph().dummyChains,function(_){var x,O=M.node(_),S=O.edgeLabel;for(M.setEdge(O.edgeObj,S);O.dummy;)x=M.successors(_)[0],M.removeNode(_),S.points.push({x:O.x,y:O.y}),O.dummy==="edge-label"&&(S.x=O.x,S.y=O.y,S.width=O.width,S.height=O.height),_=x,O=M.node(_)})}}},function(D,m,o){"use strict";var f=o(113).longestPath,c=o(227),M=o(463);D.exports=function(O){switch(O.graph().ranker){case"network-simplex":x(O);break;case"tight-tree":(function(S){f(S),c(S)})(O);break;case"longest-path":_(O);break;default:x(O)}};var _=f;function x(O){M(O)}},function(D,m,o){"use strict";var f=o(28),c=o(227),M=o(113).slack,_=o(113).longestPath,x=o(46).alg.preorder,O=o(46).alg.postorder,S=o(36).simplify;function g(P){P=S(P),_(P);var L,z=c(P);for(E(z),d(z,P);L=p(z);)C(z,P,L,A(z,P,L))}function d(P,L){var z=O(P,P.nodes());z=z.slice(0,z.length-1),f.forEach(z,function(X){(function(re,se,ce){var xe=re.node(ce).parent;re.edge(ce,xe).cutvalue=y(re,se,ce)})(P,L,X)})}function y(P,L,z){var X=P.node(z).parent,re=!0,se=L.edge(z,X),ce=0;return se||(re=!1,se=L.edge(X,z)),ce=se.weight,f.forEach(L.nodeEdges(z),function(xe){var ye,W,Ie=xe.v===z,ge=Ie?xe.w:xe.v;if(ge!==X){var te=Ie===re,H=L.edge(xe).weight;if(ce+=te?H:-H,ye=z,W=ge,P.hasEdge(ye,W)){var V=P.edge(z,ge).cutvalue;ce+=te?-V:V}}}),ce}function E(P,L){arguments.length<2&&(L=P.nodes()[0]),b(P,{},1,L)}function b(P,L,z,X,re){var se=z,ce=P.node(X);return L[X]=!0,f.forEach(P.neighbors(X),function(xe){f.has(L,xe)||(z=b(P,L,z,xe,X))}),ce.low=se,ce.lim=z++,re?ce.parent=re:delete ce.parent,z}function p(P){return f.find(P.edges(),function(L){return P.edge(L).cutvalue<0})}function A(P,L,z){var X=z.v,re=z.w;L.hasEdge(X,re)||(X=z.w,re=z.v);var se=P.node(X),ce=P.node(re),xe=se,ye=!1;se.lim>ce.lim&&(xe=ce,ye=!0);var W=f.filter(L.edges(),function(Ie){return ye===N(P,P.node(Ie.v),xe)&&ye!==N(P,P.node(Ie.w),xe)});return f.minBy(W,function(Ie){return M(L,Ie)})}function C(P,L,z,X){var re=z.v,se=z.w;P.removeEdge(re,se),P.setEdge(X.v,X.w,{}),E(P),d(P,L),function(ce,xe){var ye=f.find(ce.nodes(),function(Ie){return!xe.node(Ie).parent}),W=x(ce,ye);W=W.slice(1),f.forEach(W,function(Ie){var ge=ce.node(Ie).parent,te=xe.edge(Ie,ge),H=!1;te||(te=xe.edge(ge,Ie),H=!0),xe.node(Ie).rank=xe.node(ge).rank+(H?te.minlen:-te.minlen)})}(P,L)}function N(P,L,z){return z.low<=L.lim&&L.lim<=z.lim}D.exports=g,g.initLowLimValues=E,g.initCutValues=d,g.calcCutValue=y,g.leaveEdge=p,g.enterEdge=A,g.exchangeEdges=C},function(D,m,o){var f=o(28);D.exports=function(c){var M=function(_){var x={},O=0;function S(g){var d=O;f.forEach(_.children(g),S),x[g]={low:d,lim:O++}}return f.forEach(_.children(),S),x}(c);f.forEach(c.graph().dummyChains,function(_){for(var x=c.node(_),O=x.edgeObj,S=function(p,A,C,N){var P,L,z=[],X=[],re=Math.min(A[C].low,A[N].low),se=Math.max(A[C].lim,A[N].lim);P=C;do P=p.parent(P),z.push(P);while(P&&(A[P].low>re||se>A[P].lim));for(L=P,P=N;(P=p.parent(P))!==L;)X.push(P);return{path:z.concat(X.reverse()),lca:L}}(c,M,O.v,O.w),g=S.path,d=S.lca,y=0,E=g[y],b=!0;_!==O.w;){if(x=c.node(_),b){for(;(E=g[y])!==d&&c.node(E).maxRank<x.rank;)y++;E===d&&(b=!1)}if(!b){for(;y<g.length-1&&c.node(E=g[y+1]).minRank<=x.rank;)y++;E=g[y]}c.setParent(_,E),_=c.successors(_)[0]}})}},function(D,m,o){var f=o(28),c=o(36);D.exports={run:function(M){var _=c.addDummyNode(M,"root",{},"_root"),x=function(d){var y={};return f.forEach(d.children(),function(E){(function b(p,A){var C=d.children(p);C&&C.length&&f.forEach(C,function(N){b(N,A+1)}),y[p]=A})(E,1)}),y}(M),O=f.max(f.values(x))-1,S=2*O+1;M.graph().nestingRoot=_,f.forEach(M.edges(),function(d){M.edge(d).minlen*=S});var g=function(d){return f.reduce(d.edges(),function(y,E){return y+d.edge(E).weight},0)}(M)+1;f.forEach(M.children(),function(d){(function y(E,b,p,A,C,N,P){var L=E.children(P);if(!L.length)return void(P!==b&&E.setEdge(b,P,{weight:0,minlen:p}));var z=c.addBorderNode(E,"_bt"),X=c.addBorderNode(E,"_bb"),re=E.node(P);E.setParent(z,P),re.borderTop=z,E.setParent(X,P),re.borderBottom=X,f.forEach(L,function(se){y(E,b,p,A,C,N,se);var ce=E.node(se),xe=ce.borderTop?ce.borderTop:se,ye=ce.borderBottom?ce.borderBottom:se,W=ce.borderTop?A:2*A,Ie=xe!==ye?1:C-N[P]+1;E.setEdge(z,xe,{weight:W,minlen:Ie,nestingEdge:!0}),E.setEdge(ye,X,{weight:W,minlen:Ie,nestingEdge:!0})}),E.parent(P)||E.setEdge(b,z,{weight:0,minlen:C+N[P]})})(M,_,S,g,O,x,d)}),M.graph().nodeRankFactor=S},cleanup:function(M){var _=M.graph();M.removeNode(_.nestingRoot),delete _.nestingRoot,f.forEach(M.edges(),function(x){M.edge(x).nestingEdge&&M.removeEdge(x)})}}},function(D,m,o){var f=o(28),c=o(36);function M(_,x,O,S,g,d){var y={width:0,height:0,rank:d,borderType:x},E=g[x][d-1],b=c.addDummyNode(_,"border",y,O);g[x][d]=b,_.setParent(b,S),E&&_.setEdge(E,b,{weight:1})}D.exports=function(_){f.forEach(_.children(),function x(O){var S=_.children(O),g=_.node(O);if(S.length&&f.forEach(S,x),f.has(g,"minRank")){g.borderLeft=[],g.borderRight=[];for(var d=g.minRank,y=g.maxRank+1;d<y;++d)M(_,"borderLeft","_bl",O,g,d),M(_,"borderRight","_br",O,g,d)}})}},function(D,m,o){"use strict";var f=o(28);function c(O){f.forEach(O.nodes(),function(S){M(O.node(S))}),f.forEach(O.edges(),function(S){M(O.edge(S))})}function M(O){var S=O.width;O.width=O.height,O.height=S}function _(O){O.y=-O.y}function x(O){var S=O.x;O.x=O.y,O.y=S}D.exports={adjust:function(O){var S=O.graph().rankdir.toLowerCase();S!=="lr"&&S!=="rl"||c(O)},undo:function(O){var S=O.graph().rankdir.toLowerCase();S!=="bt"&&S!=="rl"||function(g){f.forEach(g.nodes(),function(d){_(g.node(d))}),f.forEach(g.edges(),function(d){var y=g.edge(d);f.forEach(y.points,_),f.has(y,"y")&&_(y)})}(O),S!=="lr"&&S!=="rl"||(function(g){f.forEach(g.nodes(),function(d){x(g.node(d))}),f.forEach(g.edges(),function(d){var y=g.edge(d);f.forEach(y.points,x),f.has(y,"x")&&x(y)})}(O),c(O))}}},function(D,m,o){"use strict";var f=o(28),c=o(469),M=o(470),_=o(471),x=o(475),O=o(476),S=o(46).Graph,g=o(36);function d(b,p,A){return f.map(p,function(C){return x(b,C,A)})}function y(b,p){var A=new S;f.forEach(b,function(C){var N=C.graph().root,P=_(C,N,A,p);f.forEach(P.vs,function(L,z){C.node(L).order=z}),O(C,A,P.vs)})}function E(b,p){f.forEach(p,function(A){f.forEach(A,function(C,N){b.node(C).order=N})})}D.exports=function(b){var p=g.maxRank(b),A=d(b,f.range(1,p+1),"inEdges"),C=d(b,f.range(p-1,-1,-1),"outEdges"),N=c(b);E(b,N);for(var P,L=Number.POSITIVE_INFINITY,z=0,X=0;X<4;++z,++X){y(z%2?A:C,z%4>=2),N=g.buildLayerMatrix(b);var re=M(b,N);re<L&&(X=0,P=f.cloneDeep(N),L=re)}E(b,P)}},function(D,m,o){"use strict";var f=o(28);D.exports=function(c){var M={},_=f.filter(c.nodes(),function(g){return!c.children(g).length}),x=f.max(f.map(_,function(g){return c.node(g).rank})),O=f.map(f.range(x+1),function(){return[]}),S=f.sortBy(_,function(g){return c.node(g).rank});return f.forEach(S,function g(d){if(!f.has(M,d)){M[d]=!0;var y=c.node(d);O[y.rank].push(d),f.forEach(c.successors(d),g)}}),O}},function(D,m,o){"use strict";var f=o(28);function c(M,_,x){for(var O=f.zipObject(x,f.map(x,function(b,p){return p})),S=f.flatten(f.map(_,function(b){return f.sortBy(f.map(M.outEdges(b),function(p){return{pos:O[p.w],weight:M.edge(p).weight}}),"pos")}),!0),g=1;g<x.length;)g<<=1;var d=2*g-1;g-=1;var y=f.map(new Array(d),function(){return 0}),E=0;return f.forEach(S.forEach(function(b){var p=b.pos+g;y[p]+=b.weight;for(var A=0;p>0;)p%2&&(A+=y[p+1]),y[p=p-1>>1]+=b.weight;E+=b.weight*A})),E}D.exports=function(M,_){for(var x=0,O=1;O<_.length;++O)x+=c(M,_[O-1],_[O]);return x}},function(D,m,o){var f=o(28),c=o(472),M=o(473),_=o(474);D.exports=function x(O,S,g,d){var y=O.children(S),E=O.node(S),b=E?E.borderLeft:void 0,p=E?E.borderRight:void 0,A={};b&&(y=f.filter(y,function(X){return X!==b&&X!==p}));var C=c(O,y);f.forEach(C,function(X){if(O.children(X.v).length){var re=x(O,X.v,g,d);A[X.v]=re,f.has(re,"barycenter")&&(se=X,ce=re,f.isUndefined(se.barycenter)?(se.barycenter=ce.barycenter,se.weight=ce.weight):(se.barycenter=(se.barycenter*se.weight+ce.barycenter*ce.weight)/(se.weight+ce.weight),se.weight+=ce.weight))}var se,ce});var N=M(C,g);(function(X,re){f.forEach(X,function(se){se.vs=f.flatten(se.vs.map(function(ce){return re[ce]?re[ce].vs:ce}),!0)})})(N,A);var P=_(N,d);if(b&&(P.vs=f.flatten([b,P.vs,p],!0),O.predecessors(b).length)){var L=O.node(O.predecessors(b)[0]),z=O.node(O.predecessors(p)[0]);f.has(P,"barycenter")||(P.barycenter=0,P.weight=0),P.barycenter=(P.barycenter*P.weight+L.order+z.order)/(P.weight+2),P.weight+=2}return P}},function(D,m,o){var f=o(28);D.exports=function(c,M){return f.map(M,function(_){var x=c.inEdges(_);if(x.length){var O=f.reduce(x,function(S,g){var d=c.edge(g),y=c.node(g.v);return{sum:S.sum+d.weight*y.order,weight:S.weight+d.weight}},{sum:0,weight:0});return{v:_,barycenter:O.sum/O.weight,weight:O.weight}}return{v:_}})}},function(D,m,o){"use strict";var f=o(28);D.exports=function(c,M){var _={};return f.forEach(c,function(x,O){var S=_[x.v]={indegree:0,in:[],out:[],vs:[x.v],i:O};f.isUndefined(x.barycenter)||(S.barycenter=x.barycenter,S.weight=x.weight)}),f.forEach(M.edges(),function(x){var O=_[x.v],S=_[x.w];f.isUndefined(O)||f.isUndefined(S)||(S.indegree++,O.out.push(_[x.w]))}),function(x){var O=[];function S(y){return function(E){E.merged||(f.isUndefined(E.barycenter)||f.isUndefined(y.barycenter)||E.barycenter>=y.barycenter)&&function(b,p){var A=0,C=0;b.weight&&(A+=b.barycenter*b.weight,C+=b.weight),p.weight&&(A+=p.barycenter*p.weight,C+=p.weight),b.vs=p.vs.concat(b.vs),b.barycenter=A/C,b.weight=C,b.i=Math.min(p.i,b.i),p.merged=!0}(y,E)}}function g(y){return function(E){E.in.push(y),--E.indegree==0&&x.push(E)}}for(;x.length;){var d=x.pop();O.push(d),f.forEach(d.in.reverse(),S(d)),f.forEach(d.out,g(d))}return f.map(f.filter(O,function(y){return!y.merged}),function(y){return f.pick(y,["vs","i","barycenter","weight"])})}(f.filter(_,function(x){return!x.indegree}))}},function(D,m,o){var f=o(28),c=o(36);function M(_,x,O){for(var S;x.length&&(S=f.last(x)).i<=O;)x.pop(),_.push(S.vs),O++;return O}D.exports=function(_,x){var O=c.partition(_,function(C){return f.has(C,"barycenter")}),S=O.lhs,g=f.sortBy(O.rhs,function(C){return-C.i}),d=[],y=0,E=0,b=0;S.sort((p=!!x,function(C,N){return C.barycenter<N.barycenter?-1:C.barycenter>N.barycenter?1:p?N.i-C.i:C.i-N.i})),b=M(d,g,b),f.forEach(S,function(C){b+=C.vs.length,d.push(C.vs),y+=C.barycenter*C.weight,E+=C.weight,b=M(d,g,b)});var p,A={vs:f.flatten(d,!0)};return E&&(A.barycenter=y/E,A.weight=E),A}},function(D,m,o){var f=o(28),c=o(46).Graph;D.exports=function(M,_,x){var O=function(g){for(var d;g.hasNode(d=f.uniqueId("_root")););return d}(M),S=new c({compound:!0}).setGraph({root:O}).setDefaultNodeLabel(function(g){return M.node(g)});return f.forEach(M.nodes(),function(g){var d=M.node(g),y=M.parent(g);(d.rank===_||d.minRank<=_&&_<=d.maxRank)&&(S.setNode(g),S.setParent(g,y||O),f.forEach(M[x](g),function(E){var b=E.v===g?E.w:E.v,p=S.edge(b,g),A=f.isUndefined(p)?0:p.weight;S.setEdge(b,g,{weight:M.edge(E).weight+A})}),f.has(d,"minRank")&&S.setNode(g,{borderLeft:d.borderLeft[_],borderRight:d.borderRight[_]}))}),S}},function(D,m,o){var f=o(28);D.exports=function(c,M,_){var x,O={};f.forEach(_,function(S){for(var g,d,y=c.parent(S);y;){if((g=c.parent(y))?(d=O[g],O[g]=y):(d=x,x=y),d&&d!==y)return void M.setEdge(d,y);y=g}})}},function(D,m,o){"use strict";var f=o(28),c=o(36),M=o(478).positionX;D.exports=function(_){(function(x){var O=c.buildLayerMatrix(x),S=x.graph().ranksep,g=0;f.forEach(O,function(d){var y=f.max(f.map(d,function(E){return x.node(E).height}));f.forEach(d,function(E){x.node(E).y=g+y/2}),g+=y+S})})(_=c.asNonCompoundGraph(_)),f.forEach(M(_),function(x,O){_.node(O).x=x})}},function(D,m,o){"use strict";var f=o(28),c=o(46).Graph,M=o(36);function _(p,A){var C={};return f.reduce(A,function(N,P){var L=0,z=0,X=N.length,re=f.last(P);return f.forEach(P,function(se,ce){var xe=function(W,Ie){if(W.node(Ie).dummy)return f.find(W.predecessors(Ie),function(ge){return W.node(ge).dummy})}(p,se),ye=xe?p.node(xe).order:X;(xe||se===re)&&(f.forEach(P.slice(z,ce+1),function(W){f.forEach(p.predecessors(W),function(Ie){var ge=p.node(Ie),te=ge.order;!(te<L||ye<te)||ge.dummy&&p.node(W).dummy||O(C,Ie,W)})}),z=ce+1,L=ye)}),P}),C}function x(p,A){var C={};function N(P,L,z,X,re){var se;f.forEach(f.range(L,z),function(ce){se=P[ce],p.node(se).dummy&&f.forEach(p.predecessors(se),function(xe){var ye=p.node(xe);ye.dummy&&(ye.order<X||ye.order>re)&&O(C,xe,se)})})}return f.reduce(A,function(P,L){var z,X=-1,re=0;return f.forEach(L,function(se,ce){if(p.node(se).dummy==="border"){var xe=p.predecessors(se);xe.length&&(z=p.node(xe[0]).order,N(L,re,ce,X,z),re=ce,X=z)}N(L,re,L.length,z,P.length)}),L}),C}function O(p,A,C){if(A>C){var N=A;A=C,C=N}var P=p[A];P||(p[A]=P={}),P[C]=!0}function S(p,A,C){if(A>C){var N=A;A=C,C=N}return f.has(p[A],C)}function g(p,A,C,N){var P={},L={},z={};return f.forEach(A,function(X){f.forEach(X,function(re,se){P[re]=re,L[re]=re,z[re]=se})}),f.forEach(A,function(X){var re=-1;f.forEach(X,function(se){var ce=N(se);if(ce.length)for(var xe=((ce=f.sortBy(ce,function(ge){return z[ge]})).length-1)/2,ye=Math.floor(xe),W=Math.ceil(xe);ye<=W;++ye){var Ie=ce[ye];L[se]===se&&re<z[Ie]&&!S(C,se,Ie)&&(L[Ie]=se,L[se]=P[se]=P[Ie],re=z[Ie])}})}),{root:P,align:L}}function d(p,A,C,N,P){var L={},z=function(se,ce,xe,ye){var W=new c,Ie=se.graph(),ge=function(te,H,V){return function(ie,we,ke){var oe,J=ie.node(we),ee=ie.node(ke),Y=0;if(Y+=J.width/2,f.has(J,"labelpos"))switch(J.labelpos.toLowerCase()){case"l":oe=-J.width/2;break;case"r":oe=J.width/2}if(oe&&(Y+=V?oe:-oe),oe=0,Y+=(J.dummy?H:te)/2,Y+=(ee.dummy?H:te)/2,Y+=ee.width/2,f.has(ee,"labelpos"))switch(ee.labelpos.toLowerCase()){case"l":oe=ee.width/2;break;case"r":oe=-ee.width/2}return oe&&(Y+=V?oe:-oe),oe=0,Y}}(Ie.nodesep,Ie.edgesep,ye);return f.forEach(ce,function(te){var H;f.forEach(te,function(V){var ie=xe[V];if(W.setNode(ie),H){var we=xe[H],ke=W.edge(we,ie);W.setEdge(we,ie,Math.max(ge(se,V,H),ke||0))}H=V})}),W}(p,A,C,P),X=P?"borderLeft":"borderRight";function re(se,ce){for(var xe=z.nodes(),ye=xe.pop(),W={};ye;)W[ye]?se(ye):(W[ye]=!0,xe.push(ye),xe=xe.concat(ce(ye))),ye=xe.pop()}return re(function(se){L[se]=z.inEdges(se).reduce(function(ce,xe){return Math.max(ce,L[xe.v]+z.edge(xe))},0)},z.predecessors.bind(z)),re(function(se){var ce=z.outEdges(se).reduce(function(ye,W){return Math.min(ye,L[W.w]-z.edge(W))},Number.POSITIVE_INFINITY),xe=p.node(se);ce!==Number.POSITIVE_INFINITY&&xe.borderType!==X&&(L[se]=Math.max(L[se],ce))},z.successors.bind(z)),f.forEach(N,function(se){L[se]=L[C[se]]}),L}function y(p,A){return f.minBy(f.values(A),function(C){var N=Number.NEGATIVE_INFINITY,P=Number.POSITIVE_INFINITY;return f.forIn(C,function(L,z){var X=function(re,se){return re.node(se).width}(p,z)/2;N=Math.max(L+X,N),P=Math.min(L-X,P)}),N-P})}function E(p,A){var C=f.values(A),N=f.min(C),P=f.max(C);f.forEach(["u","d"],function(L){f.forEach(["l","r"],function(z){var X,re=L+z,se=p[re];if(se!==A){var ce=f.values(se);(X=z==="l"?N-f.min(ce):P-f.max(ce))&&(p[re]=f.mapValues(se,function(xe){return xe+X}))}})})}function b(p,A){return f.mapValues(p.ul,function(C,N){if(A)return p[A.toLowerCase()][N];var P=f.sortBy(f.map(p,N));return(P[1]+P[2])/2})}D.exports={positionX:function(p){var A,C=M.buildLayerMatrix(p),N=f.merge(_(p,C),x(p,C)),P={};f.forEach(["u","d"],function(z){A=z==="u"?C:f.values(C).reverse(),f.forEach(["l","r"],function(X){X==="r"&&(A=f.map(A,function(xe){return f.values(xe).reverse()}));var re=(z==="u"?p.predecessors:p.successors).bind(p),se=g(p,A,N,re),ce=d(p,A,se.root,se.align,X==="r");X==="r"&&(ce=f.mapValues(ce,function(xe){return-xe})),P[z+X]=ce})});var L=y(p,P);return E(P,L),b(P,p.graph().align)},findType1Conflicts:_,findType2Conflicts:x,addConflict:O,hasConflict:S,verticalAlignment:g,horizontalCompaction:d,alignCoordinates:E,findSmallestWidthAlignment:y,balance:b}},function(D,m,o){var f=o(28),c=o(36),M=o(46).Graph;D.exports={debugOrdering:function(_){var x=c.buildLayerMatrix(_),O=new M({compound:!0,multigraph:!0}).setGraph({});return f.forEach(_.nodes(),function(S){O.setNode(S,{label:S}),O.setParent(S,"layer"+_.node(S).rank)}),f.forEach(_.edges(),function(S){O.setEdge(S.v,S.w,{},S.name)}),f.forEach(x,function(S,g){var d="layer"+g;O.setNode(d,{rank:"same"}),f.reduce(S,function(y,E){return O.setEdge(y,E,{style:"invis"}),E})}),O}}},function(D,m){D.exports="0.8.5"},function(D,m,o){(function(f){function c(_){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(_)}var M=function(_){"use strict";var x=Object.prototype,O=x.hasOwnProperty,S=typeof Symbol=="function"?Symbol:{},g=S.iterator||"@@iterator",d=S.asyncIterator||"@@asyncIterator",y=S.toStringTag||"@@toStringTag";function E(H,V,ie){return Object.defineProperty(H,V,{value:ie,enumerable:!0,configurable:!0,writable:!0}),H[V]}try{E({},"")}catch(H){E=function(V,ie,we){return V[ie]=we}}function b(H,V,ie,we){var ke=V&&V.prototype instanceof C?V:C,oe=Object.create(ke.prototype),J=new Ie(we||[]);return oe._invoke=function(ee,Y,K){var G="suspendedStart";return function(ne,le){if(G==="executing")throw new Error("Generator is already running");if(G==="completed"){if(ne==="throw")throw le;return te()}for(K.method=ne,K.arg=le;;){var ue=K.delegate;if(ue){var Q=xe(ue,K);if(Q){if(Q===A)continue;return Q}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(G==="suspendedStart")throw G="completed",K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);G="executing";var he=p(ee,Y,K);if(he.type==="normal"){if(G=K.done?"completed":"suspendedYield",he.arg===A)continue;return{value:he.arg,done:K.done}}he.type==="throw"&&(G="completed",K.method="throw",K.arg=he.arg)}}}(H,ie,J),oe}function p(H,V,ie){try{return{type:"normal",arg:H.call(V,ie)}}catch(we){return{type:"throw",arg:we}}}_.wrap=b;var A={};function C(){}function N(){}function P(){}var L={};E(L,g,function(){return this});var z=Object.getPrototypeOf,X=z&&z(z(ge([])));X&&X!==x&&O.call(X,g)&&(L=X);var re=P.prototype=C.prototype=Object.create(L);function se(H){["next","throw","return"].forEach(function(V){E(H,V,function(ie){return this._invoke(V,ie)})})}function ce(H,V){var ie;this._invoke=function(we,ke){function oe(){return new V(function(J,ee){(function Y(K,G,ne,le){var ue=p(H[K],H,G);if(ue.type!=="throw"){var Q=ue.arg,he=Q.value;return he&&c(he)==="object"&&O.call(he,"__await")?V.resolve(he.__await).then(function(Se){Y("next",Se,ne,le)},function(Se){Y("throw",Se,ne,le)}):V.resolve(he).then(function(Se){Q.value=Se,ne(Q)},function(Se){return Y("throw",Se,ne,le)})}le(ue.arg)})(we,ke,J,ee)})}return ie=ie?ie.then(oe,oe):oe()}}function xe(H,V){var ie=H.iterator[V.method];if(ie===void 0){if(V.delegate=null,V.method==="throw"){if(H.iterator.return&&(V.method="return",V.arg=void 0,xe(H,V),V.method==="throw"))return A;V.method="throw",V.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var we=p(ie,H.iterator,V.arg);if(we.type==="throw")return V.method="throw",V.arg=we.arg,V.delegate=null,A;var ke=we.arg;return ke?ke.done?(V[H.resultName]=ke.value,V.next=H.nextLoc,V.method!=="return"&&(V.method="next",V.arg=void 0),V.delegate=null,A):ke:(V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,A)}function ye(H){var V={tryLoc:H[0]};1 in H&&(V.catchLoc=H[1]),2 in H&&(V.finallyLoc=H[2],V.afterLoc=H[3]),this.tryEntries.push(V)}function W(H){var V=H.completion||{};V.type="normal",delete V.arg,H.completion=V}function Ie(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(ye,this),this.reset(!0)}function ge(H){if(H){var V=H[g];if(V)return V.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var ie=-1,we=function ke(){for(;++ie<H.length;)if(O.call(H,ie))return ke.value=H[ie],ke.done=!1,ke;return ke.value=void 0,ke.done=!0,ke};return we.next=we}}return{next:te}}function te(){return{value:void 0,done:!0}}return N.prototype=P,E(re,"constructor",P),E(P,"constructor",N),N.displayName=E(P,y,"GeneratorFunction"),_.isGeneratorFunction=function(H){var V=typeof H=="function"&&H.constructor;return!!V&&(V===N||(V.displayName||V.name)==="GeneratorFunction")},_.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,P):(H.__proto__=P,E(H,y,"GeneratorFunction")),H.prototype=Object.create(re),H},_.awrap=function(H){return{__await:H}},se(ce.prototype),E(ce.prototype,d,function(){return this}),_.AsyncIterator=ce,_.async=function(H,V,ie,we,ke){ke===void 0&&(ke=Promise);var oe=new ce(b(H,V,ie,we),ke);return _.isGeneratorFunction(V)?oe:oe.next().then(function(J){return J.done?J.value:oe.next()})},se(re),E(re,y,"Generator"),E(re,g,function(){return this}),E(re,"toString",function(){return"[object Generator]"}),_.keys=function(H){var V=[];for(var ie in H)V.push(ie);return V.reverse(),function we(){for(;V.length;){var ke=V.pop();if(ke in H)return we.value=ke,we.done=!1,we}return we.done=!0,we}},_.values=ge,Ie.prototype={constructor:Ie,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(W),!H)for(var V in this)V.charAt(0)==="t"&&O.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=void 0)},stop:function(){this.done=!0;var H=this.tryEntries[0].completion;if(H.type==="throw")throw H.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var V=this;function ie(Y,K){return oe.type="throw",oe.arg=H,V.next=Y,K&&(V.method="next",V.arg=void 0),!!K}for(var we=this.tryEntries.length-1;we>=0;--we){var ke=this.tryEntries[we],oe=ke.completion;if(ke.tryLoc==="root")return ie("end");if(ke.tryLoc<=this.prev){var J=O.call(ke,"catchLoc"),ee=O.call(ke,"finallyLoc");if(J&&ee){if(this.prev<ke.catchLoc)return ie(ke.catchLoc,!0);if(this.prev<ke.finallyLoc)return ie(ke.finallyLoc)}else if(J){if(this.prev<ke.catchLoc)return ie(ke.catchLoc,!0)}else{if(!ee)throw new Error("try statement without catch or finally");if(this.prev<ke.finallyLoc)return ie(ke.finallyLoc)}}}},abrupt:function(H,V){for(var ie=this.tryEntries.length-1;ie>=0;--ie){var we=this.tryEntries[ie];if(we.tryLoc<=this.prev&&O.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var ke=we;break}}ke&&(H==="break"||H==="continue")&&ke.tryLoc<=V&&V<=ke.finallyLoc&&(ke=null);var oe=ke?ke.completion:{};return oe.type=H,oe.arg=V,ke?(this.method="next",this.next=ke.finallyLoc,A):this.complete(oe)},complete:function(H,V){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&V&&(this.next=V),A},finish:function(H){for(var V=this.tryEntries.length-1;V>=0;--V){var ie=this.tryEntries[V];if(ie.finallyLoc===H)return this.complete(ie.completion,ie.afterLoc),W(ie),A}},catch:function(H){for(var V=this.tryEntries.length-1;V>=0;--V){var ie=this.tryEntries[V];if(ie.tryLoc===H){var we=ie.completion;if(we.type==="throw"){var ke=we.arg;W(ie)}return ke}}throw new Error("illegal catch attempt")},delegateYield:function(H,V,ie){return this.delegate={iterator:ge(H),resultName:V,nextLoc:ie},this.method==="next"&&(this.arg=void 0),A}},_}(c(f)==="object"?f.exports:{});try{regeneratorRuntime=M}catch(_){(typeof globalThis=="undefined"?"undefined":c(globalThis))==="object"?globalThis.regeneratorRuntime=M:Function("r","regeneratorRuntime = r")(M)}}).call(this,o(87)(D))},function(D,m){D.exports=function(o){if(Array.isArray(o))return o},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){D.exports=function(o,f){var c=o==null?null:typeof Symbol!="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(c!=null){var M,_,x=[],O=!0,S=!1;try{for(c=c.call(o);!(O=(M=c.next()).done)&&(x.push(M.value),!f||x.length!==f);O=!0);}catch(g){S=!0,_=g}finally{try{O||c.return==null||c.return()}finally{if(S)throw _}}return x}},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){D.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";function f(L){return(f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(L)}var c=this&&this.__awaiter||function(L,z,X,re){return new(X||(X=Promise))(function(se,ce){function xe(Ie){try{W(re.next(Ie))}catch(ge){ce(ge)}}function ye(Ie){try{W(re.throw(Ie))}catch(ge){ce(ge)}}function W(Ie){var ge;Ie.done?se(Ie.value):(ge=Ie.value,ge instanceof X?ge:new X(function(te){te(ge)})).then(xe,ye)}W((re=re.apply(L,z||[])).next())})},M=this&&this.__generator||function(L,z){var X,re,se,ce,xe={label:0,sent:function(){if(1&se[0])throw se[1];return se[1]},trys:[],ops:[]};return ce={next:ye(0),throw:ye(1),return:ye(2)},typeof Symbol=="function"&&(ce[Symbol.iterator]=function(){return this}),ce;function ye(W){return function(Ie){return function(ge){if(X)throw new TypeError("Generator is already executing.");for(;xe;)try{if(X=1,re&&(se=2&ge[0]?re.return:ge[0]?re.throw||((se=re.return)&&se.call(re),0):re.next)&&!(se=se.call(re,ge[1])).done)return se;switch(re=0,se&&(ge=[2&ge[0],se.value]),ge[0]){case 0:case 1:se=ge;break;case 4:return xe.label++,{value:ge[1],done:!1};case 5:xe.label++,re=ge[1],ge=[0];continue;case 7:ge=xe.ops.pop(),xe.trys.pop();continue;default:if(se=xe.trys,!((se=se.length>0&&se[se.length-1])||ge[0]!==6&&ge[0]!==2)){xe=0;continue}if(ge[0]===3&&(!se||ge[1]>se[0]&&ge[1]<se[3])){xe.label=ge[1];break}if(ge[0]===6&&xe.label<se[1]){xe.label=se[1],se=ge;break}if(se&&xe.label<se[2]){xe.label=se[2],xe.ops.push(ge);break}se[2]&&xe.ops.pop(),xe.trys.pop();continue}ge=z.call(L,xe)}catch(te){ge=[6,te],re=0}finally{X=se=0}if(5&ge[0])throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}([W,Ie])}}},_=this&&this.__spreadArray||function(L,z){for(var X=0,re=z.length,se=L.length;X<re;X++,se++)L[se]=z[X];return L};Object.defineProperty(m,"__esModule",{value:!0}),m.Container=void 0;var x=o(486),O=o(40),S=o(54),g=o(32),d=o(231),y=o(487),E=o(494),b=o(496),p=o(66),A=o(90),C=o(499),N=o(500),P=function(){function L(z){this._appliedMiddleware=[];var X=z||{};if(f(X)!=="object")throw new Error(""+O.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(X.defaultScope===void 0)X.defaultScope=S.BindingScopeEnum.Transient;else if(X.defaultScope!==S.BindingScopeEnum.Singleton&&X.defaultScope!==S.BindingScopeEnum.Transient&&X.defaultScope!==S.BindingScopeEnum.Request)throw new Error(""+O.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(X.autoBindInjectable===void 0)X.autoBindInjectable=!1;else if(typeof X.autoBindInjectable!="boolean")throw new Error(""+O.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(X.skipBaseClassChecks===void 0)X.skipBaseClassChecks=!1;else if(typeof X.skipBaseClassChecks!="boolean")throw new Error(""+O.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:X.autoBindInjectable,defaultScope:X.defaultScope,skipBaseClassChecks:X.skipBaseClassChecks},this.id=p.id(),this._bindingDictionary=new N.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new d.MetadataReader}return L.merge=function(z,X){for(var re=[],se=2;se<arguments.length;se++)re[se-2]=arguments[se];var ce=new L,xe=_([z,X],re).map(function(Ie){return y.getBindingDictionary(Ie)}),ye=y.getBindingDictionary(ce);function W(Ie,ge){Ie.traverse(function(te,H){H.forEach(function(V){ge.add(V.serviceIdentifier,V.clone())})})}return xe.forEach(function(Ie){W(Ie,ye)}),ce},L.prototype.load=function(){for(var z=[],X=0;X<arguments.length;X++)z[X]=arguments[X];for(var re=this._getContainerModuleHelpersFactory(),se=0,ce=z;se<ce.length;se++){var xe=ce[se],ye=re(xe.id);xe.registry(ye.bindFunction,ye.unbindFunction,ye.isboundFunction,ye.rebindFunction)}},L.prototype.loadAsync=function(){for(var z=[],X=0;X<arguments.length;X++)z[X]=arguments[X];return c(this,void 0,void 0,function(){var re,se,ce,xe,ye;return M(this,function(W){switch(W.label){case 0:re=this._getContainerModuleHelpersFactory(),se=0,ce=z,W.label=1;case 1:return se<ce.length?(xe=ce[se],ye=re(xe.id),[4,xe.registry(ye.bindFunction,ye.unbindFunction,ye.isboundFunction,ye.rebindFunction)]):[3,4];case 2:W.sent(),W.label=3;case 3:return se++,[3,1];case 4:return[2]}})})},L.prototype.unload=function(){for(var z=this,X=[],re=0;re<arguments.length;re++)X[re]=arguments[re];var se=function(ce){return function(xe){return xe.moduleId===ce}};X.forEach(function(ce){var xe=se(ce.id);z._bindingDictionary.removeByCondition(xe)})},L.prototype.bind=function(z){var X=this.options.defaultScope||S.BindingScopeEnum.Transient,re=new x.Binding(z,X);return this._bindingDictionary.add(z,re),new b.BindingToSyntax(re)},L.prototype.rebind=function(z){return this.unbind(z),this.bind(z)},L.prototype.unbind=function(z){try{this._bindingDictionary.remove(z)}catch(X){throw new Error(O.CANNOT_UNBIND+" "+A.getServiceIdentifierAsString(z))}},L.prototype.unbindAll=function(){this._bindingDictionary=new N.Lookup},L.prototype.isBound=function(z){var X=this._bindingDictionary.hasKey(z);return!X&&this.parent&&(X=this.parent.isBound(z)),X},L.prototype.isBoundNamed=function(z,X){return this.isBoundTagged(z,g.NAMED_TAG,X)},L.prototype.isBoundTagged=function(z,X,re){var se=!1;if(this._bindingDictionary.hasKey(z)){var ce=this._bindingDictionary.get(z),xe=y.createMockRequest(this,z,X,re);se=ce.some(function(ye){return ye.constraint(xe)})}return!se&&this.parent&&(se=this.parent.isBoundTagged(z,X,re)),se},L.prototype.snapshot=function(){this._snapshots.push(C.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},L.prototype.restore=function(){var z=this._snapshots.pop();if(z===void 0)throw new Error(O.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=z.bindings,this._middleware=z.middleware},L.prototype.createChild=function(z){var X=new L(z||this.options);return X.parent=this,X},L.prototype.applyMiddleware=function(){for(var z=[],X=0;X<arguments.length;X++)z[X]=arguments[X];this._appliedMiddleware=this._appliedMiddleware.concat(z);var re=this._middleware?this._middleware:this._planAndResolve();this._middleware=z.reduce(function(se,ce){return ce(se)},re)},L.prototype.applyCustomMetadataReader=function(z){this._metadataReader=z},L.prototype.get=function(z){return this._get(!1,!1,S.TargetTypeEnum.Variable,z)},L.prototype.getTagged=function(z,X,re){return this._get(!1,!1,S.TargetTypeEnum.Variable,z,X,re)},L.prototype.getNamed=function(z,X){return this.getTagged(z,g.NAMED_TAG,X)},L.prototype.getAll=function(z){return this._get(!0,!0,S.TargetTypeEnum.Variable,z)},L.prototype.getAllTagged=function(z,X,re){return this._get(!1,!0,S.TargetTypeEnum.Variable,z,X,re)},L.prototype.getAllNamed=function(z,X){return this.getAllTagged(z,g.NAMED_TAG,X)},L.prototype.resolve=function(z){var X=this.createChild();return X.bind(z).toSelf(),this._appliedMiddleware.forEach(function(re){X.applyMiddleware(re)}),X.get(z)},L.prototype._getContainerModuleHelpersFactory=function(){var z=this,X=function(se,ce){se._binding.moduleId=ce},re=function(se){return function(ce){var xe=z.rebind.bind(z)(ce);return X(xe,se),xe}};return function(se){return{bindFunction:(ce=se,function(xe){var ye=z.bind.bind(z)(xe);return X(ye,ce),ye}),isboundFunction:function(xe){return z.isBound.bind(z)(xe)},rebindFunction:re(se),unbindFunction:function(xe){z.unbind.bind(z)(xe)}};var ce}},L.prototype._get=function(z,X,re,se,ce,xe){var ye=null,W={avoidConstraints:z,contextInterceptor:function(Ie){return Ie},isMultiInject:X,key:ce,serviceIdentifier:se,targetType:re,value:xe};if(this._middleware){if((ye=this._middleware(W))==null)throw new Error(O.INVALID_MIDDLEWARE_RETURN)}else ye=this._planAndResolve()(W);return ye},L.prototype._planAndResolve=function(){var z=this;return function(X){var re=y.plan(z._metadataReader,z,X.isMultiInject,X.targetType,X.serviceIdentifier,X.key,X.value,X.avoidConstraints);return re=X.contextInterceptor(re),E.resolve(re)}},L}();m.Container=P},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Binding=void 0;var f=o(54),c=o(66),M=function(){function _(x,O){this.id=c.id(),this.activated=!1,this.serviceIdentifier=x,this.scope=O,this.type=f.BindingTypeEnum.Invalid,this.constraint=function(S){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return _.prototype.clone=function(){var x=new _(this.serviceIdentifier,this.scope);return x.activated=x.scope===f.BindingScopeEnum.Singleton&&this.activated,x.implementationType=this.implementationType,x.dynamicValue=this.dynamicValue,x.scope=this.scope,x.type=this.type,x.factory=this.factory,x.provider=this.provider,x.constraint=this.constraint,x.onActivation=this.onActivation,x.cache=this.cache,x},_}();m.Binding=M},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.getBindingDictionary=m.createMockRequest=m.plan=void 0;var f=o(488),c=o(40),M=o(54),_=o(32),x=o(232),O=o(90),S=o(489),g=o(48),d=o(490),y=o(491),E=o(493),b=o(234);function p(N){return N._bindingDictionary}function A(N,P,L,z,X){var re=C(L.container,X.serviceIdentifier),se=[];return re.length===f.BindingCount.NoBindingsAvailable&&L.container.options.autoBindInjectable&&typeof X.serviceIdentifier=="function"&&N.getConstructorMetadata(X.serviceIdentifier).compilerGeneratedMetadata&&(L.container.bind(X.serviceIdentifier).toSelf(),re=C(L.container,X.serviceIdentifier)),se=P?re:re.filter(function(ce){var xe=new E.Request(ce.serviceIdentifier,L,z,ce,X);return ce.constraint(xe)}),function(ce,xe,ye,W){switch(xe.length){case f.BindingCount.NoBindingsAvailable:if(ye.isOptional())return xe;var Ie=O.getServiceIdentifierAsString(ce),ge=c.NOT_REGISTERED;throw ge+=O.listMetadataForTarget(Ie,ye),ge+=O.listRegisteredBindingsForServiceIdentifier(W,Ie,C),new Error(ge);case f.BindingCount.OnlyOneBindingAvailable:if(!ye.isArray())return xe;case f.BindingCount.MultipleBindingsAvailable:default:if(ye.isArray())return xe;throw Ie=O.getServiceIdentifierAsString(ce),ge=c.AMBIGUOUS_MATCH+" "+Ie,ge+=O.listRegisteredBindingsForServiceIdentifier(W,Ie,C),new Error(ge)}}(X.serviceIdentifier,se,X,L.container),se}function C(N,P){var L=[],z=p(N);return z.hasKey(P)?L=z.get(P):N.parent!==null&&(L=C(N.parent,P)),L}m.getBindingDictionary=p,m.plan=function(N,P,L,z,X,re,se,ce){ce===void 0&&(ce=!1);var xe=new S.Context(P),ye=function(W,Ie,ge,te,H,V){var ie=W?_.MULTI_INJECT_TAG:_.INJECT_TAG,we=new g.Metadata(ie,ge),ke=new b.Target(Ie,te,ge,we);if(H!==void 0){var oe=new g.Metadata(H,V);ke.metadata.push(oe)}return ke}(L,z,X,"",re,se);try{return function W(Ie,ge,te,H,V,ie){var we,ke;if(V===null){we=A(Ie,ge,H,null,ie),ke=new E.Request(te,H,null,we,ie);var oe=new d.Plan(H,ke);H.addPlan(oe)}else we=A(Ie,ge,H,V,ie),ke=V.addChildRequest(ie.serviceIdentifier,we,ie);we.forEach(function(J){var ee=null;if(ie.isArray())ee=ke.addChildRequest(J.serviceIdentifier,J,ie);else{if(J.cache)return;ee=ke}if(J.type===M.BindingTypeEnum.Instance&&J.implementationType!==null){var Y=y.getDependencies(Ie,J.implementationType);if(!H.container.options.skipBaseClassChecks){var K=y.getBaseClassDependencyCount(Ie,J.implementationType);if(Y.length<K){var G=c.ARGUMENTS_LENGTH_MISMATCH(y.getFunctionName(J.implementationType));throw new Error(G)}}Y.forEach(function(ne){W(Ie,!1,ne.serviceIdentifier,H,ee,ne)})}})}(N,ce,X,xe,null,ye),xe}catch(W){throw x.isStackOverflowExeption(W)&&xe.plan&&O.circularDependencyToException(xe.plan.rootRequest),W}},m.createMockRequest=function(N,P,L,z){var X=new b.Target(M.TargetTypeEnum.Variable,"",P,new g.Metadata(L,z)),re=new S.Context(N);return new E.Request(P,re,null,[],X)}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BindingCount=void 0,m.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Context=void 0;var f=o(66),c=function(){function M(_){this.id=f.id(),this.container=_}return M.prototype.addPlan=function(_){this.plan=_},M.prototype.setCurrentRequest=function(_){this.currentRequest=_},M}();m.Context=c},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Plan=void 0;var f=function(c,M){this.parentContext=c,this.rootRequest=M};m.Plan=f},function(D,m,o){"use strict";var f=this&&this.__spreadArray||function(E,b){for(var p=0,A=b.length,C=E.length;p<A;p++,C++)E[C]=b[p];return E};Object.defineProperty(m,"__esModule",{value:!0}),m.getFunctionName=m.getBaseClassDependencyCount=m.getDependencies=void 0;var c=o(233),M=o(40),_=o(54),x=o(32),O=o(90);Object.defineProperty(m,"getFunctionName",{enumerable:!0,get:function(){return O.getFunctionName}});var S=o(234);function g(E,b,p,A){var C=E.getConstructorMetadata(p),N=C.compilerGeneratedMetadata;if(N===void 0){var P=M.MISSING_INJECTABLE_ANNOTATION+" "+b+".";throw new Error(P)}var L=C.userGeneratedMetadata,z=Object.keys(L),X=p.length===0&&z.length>0,re=z.length>p.length,se=function(xe,ye,W,Ie,ge){for(var te=[],H=0;H<ge;H++){var V=d(H,xe,ye,W,Ie);V!==null&&te.push(V)}return te}(A,b,N,L,X||re?z.length:p.length),ce=function xe(ye,W){for(var Ie=ye.getPropertiesMetadata(W),ge=[],te=Object.keys(Ie),H=0,V=te;H<V.length;H++){var ie=V[H],we=Ie[ie],ke=y(Ie[ie]),oe=ke.targetName||ie,J=ke.inject||ke.multiInject,ee=new S.Target(_.TargetTypeEnum.ClassProperty,oe,J);ee.metadata=we,ge.push(ee)}var Y=Object.getPrototypeOf(W.prototype).constructor;if(Y!==Object){var K=xe(ye,Y);ge=f(f([],ge),K)}return ge}(E,p);return f(f([],se),ce)}function d(E,b,p,A,C){var N=C[E.toString()]||[],P=y(N),L=P.unmanaged!==!0,z=A[E],X=P.inject||P.multiInject;if((z=X||z)instanceof c.LazyServiceIdentifer&&(z=z.unwrap()),L){if(!b&&(z===Object||z===Function||z===void 0)){var re=M.MISSING_INJECT_ANNOTATION+" argument "+E+" in class "+p+".";throw new Error(re)}var se=new S.Target(_.TargetTypeEnum.ConstructorArgument,P.targetName,z);return se.metadata=N,se}return null}function y(E){var b={};return E.forEach(function(p){b[p.key.toString()]=p.value}),{inject:b[x.INJECT_TAG],multiInject:b[x.MULTI_INJECT_TAG],targetName:b[x.NAME_TAG],unmanaged:b[x.UNMANAGED_TAG]}}m.getDependencies=function(E,b){return g(E,O.getFunctionName(b),b,!1)},m.getBaseClassDependencyCount=function E(b,p){var A=Object.getPrototypeOf(p.prototype).constructor;if(A!==Object){var C=g(b,O.getFunctionName(A),A,!0),N=C.map(function(z){return z.metadata.filter(function(X){return X.key===x.UNMANAGED_TAG})}),P=[].concat.apply([],N).length,L=C.length-P;return L>0?L:E(b,A)}return 0}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.QueryableString=void 0;var f=function(){function c(M){this.str=M}return c.prototype.startsWith=function(M){return this.str.indexOf(M)===0},c.prototype.endsWith=function(M){var _,x=M.split("").reverse().join("");return _=this.str.split("").reverse().join(""),this.startsWith.call({str:_},x)},c.prototype.contains=function(M){return this.str.indexOf(M)!==-1},c.prototype.equals=function(M){return this.str===M},c.prototype.value=function(){return this.str},c}();m.QueryableString=f},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Request=void 0;var f=o(66),c=function(){function M(_,x,O,S,g){this.id=f.id(),this.serviceIdentifier=_,this.parentContext=x,this.parentRequest=O,this.target=g,this.childRequests=[],this.bindings=Array.isArray(S)?S:[S],this.requestScope=O===null?new Map:null}return M.prototype.addChildRequest=function(_,x,O){var S=new M(_,this.parentContext,this,x,O);return this.childRequests.push(S),S},M}();m.Request=c},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.resolve=void 0;var f=o(40),c=o(54),M=o(232),_=o(90),x=o(495),O=function(S,g,d){try{return d()}catch(y){throw M.isStackOverflowExeption(y)?new Error(f.CIRCULAR_DEPENDENCY_IN_FACTORY(S,g.toString())):y}};m.resolve=function(S){return function g(d){return function(y){y.parentContext.setCurrentRequest(y);var E=y.bindings,b=y.childRequests,p=y.target&&y.target.isArray(),A=!(y.parentRequest&&y.parentRequest.target&&y.target&&y.parentRequest.target.matchesArray(y.target.serviceIdentifier));if(p&&A)return b.map(function(X){return g(d)(X)});var C=null;if(!y.target.isOptional()||E.length!==0){var N=E[0],P=N.scope===c.BindingScopeEnum.Singleton,L=N.scope===c.BindingScopeEnum.Request;if(P&&N.activated)return N.cache;if(L&&d!==null&&d.has(N.id))return d.get(N.id);if(N.type===c.BindingTypeEnum.ConstantValue)C=N.cache,N.activated=!0;else if(N.type===c.BindingTypeEnum.Function)C=N.cache,N.activated=!0;else if(N.type===c.BindingTypeEnum.Constructor)C=N.implementationType;else if(N.type===c.BindingTypeEnum.DynamicValue&&N.dynamicValue!==null)C=O("toDynamicValue",N.serviceIdentifier,function(){return N.dynamicValue(y.parentContext)});else if(N.type===c.BindingTypeEnum.Factory&&N.factory!==null)C=O("toFactory",N.serviceIdentifier,function(){return N.factory(y.parentContext)});else if(N.type===c.BindingTypeEnum.Provider&&N.provider!==null)C=O("toProvider",N.serviceIdentifier,function(){return N.provider(y.parentContext)});else{if(N.type!==c.BindingTypeEnum.Instance||N.implementationType===null){var z=_.getServiceIdentifierAsString(y.serviceIdentifier);throw new Error(f.INVALID_BINDING_TYPE+" "+z)}C=x.resolveInstance(N.implementationType,b,g(d))}return typeof N.onActivation=="function"&&(C=N.onActivation(y.parentContext,C)),P&&(N.cache=C,N.activated=!0),L&&d!==null&&!d.has(N.id)&&d.set(N.id,C),C}}}(S.plan.rootRequest.requestScope)(S.plan.rootRequest)}},function(D,m,o){"use strict";var f=this&&this.__spreadArray||function(x,O){for(var S=0,g=O.length,d=x.length;S<g;S++,d++)x[d]=O[S];return x};Object.defineProperty(m,"__esModule",{value:!0}),m.resolveInstance=void 0;var c=o(40),M=o(54),_=o(32);m.resolveInstance=function(x,O,S){var g,d,y=null;if(O.length>0){var E=O.filter(function(b){return b.target!==null&&b.target.type===M.TargetTypeEnum.ConstructorArgument}).map(S);d=E,y=function(b,p,A){var C=p.filter(function(P){return P.target!==null&&P.target.type===M.TargetTypeEnum.ClassProperty}),N=C.map(A);return C.forEach(function(P,L){var z;z=P.target.name.value();var X=N[L];b[z]=X}),b}(y=new((g=x).bind.apply(g,f([void 0],d))),O,S)}else y=new x;return function(b,p){if(Reflect.hasMetadata(_.POST_CONSTRUCT,b)){var A=Reflect.getMetadata(_.POST_CONSTRUCT,b);try{p[A.value]()}catch(C){throw new Error(c.POST_CONSTRUCT_ERROR(b.name,C.message))}}}(x,y),y}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BindingToSyntax=void 0;var f=o(40),c=o(54),M=o(497),_=o(235),x=function(){function O(S){this._binding=S}return O.prototype.to=function(S){return this._binding.type=c.BindingTypeEnum.Instance,this._binding.implementationType=S,new M.BindingInWhenOnSyntax(this._binding)},O.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+f.INVALID_TO_SELF_VALUE);var S=this._binding.serviceIdentifier;return this.to(S)},O.prototype.toConstantValue=function(S){return this._binding.type=c.BindingTypeEnum.ConstantValue,this._binding.cache=S,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toDynamicValue=function(S){return this._binding.type=c.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=S,this._binding.implementationType=null,new M.BindingInWhenOnSyntax(this._binding)},O.prototype.toConstructor=function(S){return this._binding.type=c.BindingTypeEnum.Constructor,this._binding.implementationType=S,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toFactory=function(S){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=S,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toFunction=function(S){if(typeof S!="function")throw new Error(f.INVALID_FUNCTION_BINDING);var g=this.toConstantValue(S);return this._binding.type=c.BindingTypeEnum.Function,this._binding.scope=c.BindingScopeEnum.Singleton,g},O.prototype.toAutoFactory=function(S){return this._binding.type=c.BindingTypeEnum.Factory,this._binding.factory=function(g){return function(){return g.container.get(S)}},this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toProvider=function(S){return this._binding.type=c.BindingTypeEnum.Provider,this._binding.provider=S,this._binding.scope=c.BindingScopeEnum.Singleton,new _.BindingWhenOnSyntax(this._binding)},O.prototype.toService=function(S){this.toDynamicValue(function(g){return g.container.get(S)})},O}();m.BindingToSyntax=x},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BindingInWhenOnSyntax=void 0;var f=o(498),c=o(160),M=o(161),_=function(){function x(O){this._binding=O,this._bindingWhenSyntax=new M.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new c.BindingOnSyntax(this._binding),this._bindingInSyntax=new f.BindingInSyntax(O)}return x.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},x.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},x.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},x.prototype.when=function(O){return this._bindingWhenSyntax.when(O)},x.prototype.whenTargetNamed=function(O){return this._bindingWhenSyntax.whenTargetNamed(O)},x.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},x.prototype.whenTargetTagged=function(O,S){return this._bindingWhenSyntax.whenTargetTagged(O,S)},x.prototype.whenInjectedInto=function(O){return this._bindingWhenSyntax.whenInjectedInto(O)},x.prototype.whenParentNamed=function(O){return this._bindingWhenSyntax.whenParentNamed(O)},x.prototype.whenParentTagged=function(O,S){return this._bindingWhenSyntax.whenParentTagged(O,S)},x.prototype.whenAnyAncestorIs=function(O){return this._bindingWhenSyntax.whenAnyAncestorIs(O)},x.prototype.whenNoAncestorIs=function(O){return this._bindingWhenSyntax.whenNoAncestorIs(O)},x.prototype.whenAnyAncestorNamed=function(O){return this._bindingWhenSyntax.whenAnyAncestorNamed(O)},x.prototype.whenAnyAncestorTagged=function(O,S){return this._bindingWhenSyntax.whenAnyAncestorTagged(O,S)},x.prototype.whenNoAncestorNamed=function(O){return this._bindingWhenSyntax.whenNoAncestorNamed(O)},x.prototype.whenNoAncestorTagged=function(O,S){return this._bindingWhenSyntax.whenNoAncestorTagged(O,S)},x.prototype.whenAnyAncestorMatches=function(O){return this._bindingWhenSyntax.whenAnyAncestorMatches(O)},x.prototype.whenNoAncestorMatches=function(O){return this._bindingWhenSyntax.whenNoAncestorMatches(O)},x.prototype.onActivation=function(O){return this._bindingOnSyntax.onActivation(O)},x}();m.BindingInWhenOnSyntax=_},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.BindingInSyntax=void 0;var f=o(54),c=o(235),M=function(){function _(x){this._binding=x}return _.prototype.inRequestScope=function(){return this._binding.scope=f.BindingScopeEnum.Request,new c.BindingWhenOnSyntax(this._binding)},_.prototype.inSingletonScope=function(){return this._binding.scope=f.BindingScopeEnum.Singleton,new c.BindingWhenOnSyntax(this._binding)},_.prototype.inTransientScope=function(){return this._binding.scope=f.BindingScopeEnum.Transient,new c.BindingWhenOnSyntax(this._binding)},_}();m.BindingInSyntax=M},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.ContainerSnapshot=void 0;var f=function(){function c(){}return c.of=function(M,_){var x=new c;return x.bindings=M,x.middleware=_,x},c}();m.ContainerSnapshot=f},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.Lookup=void 0;var f=o(40),c=function(){function M(){this._map=new Map}return M.prototype.getMap=function(){return this._map},M.prototype.add=function(_,x){if(_==null)throw new Error(f.NULL_ARGUMENT);if(x==null)throw new Error(f.NULL_ARGUMENT);var O=this._map.get(_);O!==void 0?(O.push(x),this._map.set(_,O)):this._map.set(_,[x])},M.prototype.get=function(_){if(_==null)throw new Error(f.NULL_ARGUMENT);var x=this._map.get(_);if(x!==void 0)return x;throw new Error(f.KEY_NOT_FOUND)},M.prototype.remove=function(_){if(_==null)throw new Error(f.NULL_ARGUMENT);if(!this._map.delete(_))throw new Error(f.KEY_NOT_FOUND)},M.prototype.removeByCondition=function(_){var x=this;this._map.forEach(function(O,S){var g=O.filter(function(d){return!_(d)});g.length>0?x._map.set(S,g):x._map.delete(S)})},M.prototype.hasKey=function(_){if(_==null)throw new Error(f.NULL_ARGUMENT);return this._map.has(_)},M.prototype.clone=function(){var _=new M;return this._map.forEach(function(x,O){x.forEach(function(S){return _.add(O,S.clone())})}),_},M.prototype.traverse=function(_){this._map.forEach(function(x,O){_(O,x)})},M}();m.Lookup=c},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.AsyncContainerModule=m.ContainerModule=void 0;var f=o(66),c=function(_){this.id=f.id(),this.registry=_};m.ContainerModule=c;var M=function(_){this.id=f.id(),this.registry=_};m.AsyncContainerModule=M},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.injectable=void 0;var f=o(40),c=o(32);m.injectable=function(){return function(M){if(Reflect.hasOwnMetadata(c.PARAM_TYPES,M))throw new Error(f.DUPLICATED_INJECTABLE_DECORATOR);var _=Reflect.getMetadata(c.DESIGN_PARAM_TYPES,M)||[];return Reflect.defineMetadata(c.PARAM_TYPES,_,M),M}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.tagged=void 0;var f=o(48),c=o(58);m.tagged=function(M,_){return function(x,O,S){var g=new f.Metadata(M,_);typeof S=="number"?c.tagParameter(x,O,S,g):c.tagProperty(x,O,g)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.named=void 0;var f=o(32),c=o(48),M=o(58);m.named=function(_){return function(x,O,S){var g=new c.Metadata(f.NAMED_TAG,_);typeof S=="number"?M.tagParameter(x,O,S,g):M.tagProperty(x,O,g)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.optional=void 0;var f=o(32),c=o(48),M=o(58);m.optional=function(){return function(_,x,O){var S=new c.Metadata(f.OPTIONAL_TAG,!0);typeof O=="number"?M.tagParameter(_,x,O,S):M.tagProperty(_,x,S)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.unmanaged=void 0;var f=o(32),c=o(48),M=o(58);m.unmanaged=function(){return function(_,x,O){var S=new c.Metadata(f.UNMANAGED_TAG,!0);M.tagParameter(_,x,O,S)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.multiInject=void 0;var f=o(32),c=o(48),M=o(58);m.multiInject=function(_){return function(x,O,S){var g=new c.Metadata(f.MULTI_INJECT_TAG,_);typeof S=="number"?M.tagParameter(x,O,S,g):M.tagProperty(x,O,g)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.targetName=void 0;var f=o(32),c=o(48),M=o(58);m.targetName=function(_){return function(x,O,S){var g=new c.Metadata(f.NAME_TAG,_);M.tagParameter(x,O,S,g)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.postConstruct=void 0;var f=o(40),c=o(32),M=o(48);m.postConstruct=function(){return function(_,x,O){var S=new M.Metadata(c.POST_CONSTRUCT,x);if(Reflect.hasOwnMetadata(c.POST_CONSTRUCT,_.constructor))throw new Error(f.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(c.POST_CONSTRUCT,S,_.constructor)}}},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.multiBindToService=void 0,m.multiBindToService=function(f){return function(c){return function(){for(var M=[],_=0;_<arguments.length;_++)M[_]=arguments[_];return M.forEach(function(x){return f.bind(x).toService(c)})}}}},function(D,m){function o(f,c){return D.exports=o=Object.setPrototypeOf||function(M,_){return M.__proto__=_,M},D.exports.default=D.exports,D.exports.__esModule=!0,o(f,c)}D.exports=o,D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m,o){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var f=Symbol.for("INJECTION");function c(M,_,x,O){Object.defineProperty(M,_,{configurable:!0,enumerable:!0,get:function(){return O&&!Reflect.hasMetadata(f,this,_)&&Reflect.defineMetadata(f,x(),this,_),Reflect.hasMetadata(f,this,_)?Reflect.getMetadata(f,this,_):x()},set:function(S){Reflect.defineMetadata(f,S,this,_)}})}m.makePropertyInjectDecorator=function(M,_){return function(x){return function(O,S){c(O,S,function(){return M.get(x)},_)}}},m.makePropertyInjectNamedDecorator=function(M,_){return function(x,O){return function(S,g){c(S,g,function(){return M.getNamed(x,O)},_)}}},m.makePropertyInjectTaggedDecorator=function(M,_){return function(x,O,S){return function(g,d){c(g,d,function(){return M.getTagged(x,O,S)},_)}}},m.makePropertyMultiInjectDecorator=function(M,_){return function(x){return function(O,S){c(O,S,function(){return M.getAll(x)},_)}}}},function(D,m,o){var f=o(230);D.exports=function(c){if(Array.isArray(c))return f(c)},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){D.exports=function(o){if(typeof Symbol!="undefined"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){D.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},D.exports.default=D.exports,D.exports.__esModule=!0},function(D,m){D.exports=function(o){var f=new Float32Array(2);return f[0]=o[0],f[1]=o[1],f}},function(D,m){D.exports=function(o,f){var c=new Float32Array(2);return c[0]=o,c[1]=f,c}},function(D,m){D.exports=function(o,f){return o[0]=f[0],o[1]=f[1],o}},function(D,m,o){D.exports=function(c,M){var _=c[0],x=c[1],O=M[0],S=M[1];return Math.abs(_-O)<=f*Math.max(1,Math.abs(_),Math.abs(O))&&Math.abs(x-S)<=f*Math.max(1,Math.abs(x),Math.abs(S))};var f=o(252)},function(D,m){D.exports=function(o,f){return o[0]===f[0]&&o[1]===f[1]}},function(D,m,o){D.exports=o(162)},function(D,m,o){D.exports=o(256)},function(D,m,o){D.exports=o(257)},function(D,m){D.exports=function(o,f){return o[0]=1/f[0],o[1]=1/f[1],o}},function(D,m){D.exports=function(o,f,c){return o[0]=Math.min(f[0],c[0]),o[1]=Math.min(f[1],c[1]),o}},function(D,m){D.exports=function(o,f,c){return o[0]=Math.max(f[0],c[0]),o[1]=Math.max(f[1],c[1]),o}},function(D,m){D.exports=function(o,f,c){var M=Math.cos(c),_=Math.sin(c),x=f[0],O=f[1];return o[0]=x*M-O*_,o[1]=x*_+O*M,o}},function(D,m){D.exports=function(o,f){return o[0]=Math.floor(f[0]),o[1]=Math.floor(f[1]),o}},function(D,m){D.exports=function(o,f){return o[0]=Math.ceil(f[0]),o[1]=Math.ceil(f[1]),o}},function(D,m){D.exports=function(o,f){return o[0]=Math.round(f[0]),o[1]=Math.round(f[1]),o}},function(D,m){D.exports=function(o,f,c){return o[0]=f[0]*c,o[1]=f[1]*c,o}},function(D,m){D.exports=function(o,f,c,M){return o[0]=f[0]+c[0]*M,o[1]=f[1]+c[1]*M,o}},function(D,m,o){D.exports=o(258)},function(D,m,o){D.exports=o(259)},function(D,m,o){D.exports=o(260)},function(D,m,o){D.exports=o(261)},function(D,m){D.exports=function(o,f){return o[0]=-f[0],o[1]=-f[1],o}},function(D,m){D.exports=function(o,f,c){var M=f[0]*c[1]-f[1]*c[0];return o[0]=o[1]=0,o[2]=M,o}},function(D,m){D.exports=function(o,f,c,M){var _=f[0],x=f[1];return o[0]=_+M*(c[0]-_),o[1]=x+M*(c[1]-x),o}},function(D,m){D.exports=function(o,f){f=f||1;var c=2*Math.random()*Math.PI;return o[0]=Math.cos(c)*f,o[1]=Math.sin(c)*f,o}},function(D,m){D.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[2]*_,o[1]=c[1]*M+c[3]*_,o}},function(D,m){D.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[2]*_+c[4],o[1]=c[1]*M+c[3]*_+c[5],o}},function(D,m){D.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[3]*_+c[6],o[1]=c[1]*M+c[4]*_+c[7],o}},function(D,m){D.exports=function(o,f,c){var M=f[0],_=f[1];return o[0]=c[0]*M+c[4]*_+c[12],o[1]=c[1]*M+c[5]*_+c[13],o}},function(D,m,o){D.exports=function(c,M,_,x,O,S){var g,d;for(M||(M=2),_||(_=0),d=x?Math.min(x*M+_,c.length):c.length,g=_;g<d;g+=M)f[0]=c[g],f[1]=c[g+1],O(f,f,S),c[g]=f[0],c[g+1]=f[1];return c};var f=o(253)()},function(D,m){D.exports=function(o,f,c){var M=f[0]*f[0]+f[1]*f[1];if(M>c*c){var _=Math.sqrt(M);o[0]=f[0]/_*c,o[1]=f[1]/_*c}else o[0]=f[0],o[1]=f[1];return o}},function(D,m,o){"use strict";o.r(m),o.d(m,"G6GraphEvent",function(){return ar}),o.d(m,"G6Event",function(){return zt}),o.d(m,"Node",function(){return Gn}),o.d(m,"Edge",function(){return ki}),o.d(m,"Combo",function(){return Fi}),o.d(m,"Hull",function(){return Xe}),o.d(m,"registerNode",function(){return sn}),o.d(m,"registerCombo",function(){return Vi}),o.d(m,"AbstractGraph",function(){return tt}),o.d(m,"registerEdge",function(){return Ti}),o.d(m,"registerBehavior",function(){return lo}),o.d(m,"AbstractLayout",function(){return sr}),o.d(m,"AbstractEvent",function(){return an}),o.d(m,"BaseGlobal",function(){return ir}),o.d(m,"Graph",function(){return Ju}),o.d(m,"TreeGraph",function(){return Pd}),o.d(m,"Util",function(){return Po}),o.d(m,"Layout",function(){return Ws}),o.d(m,"TreeLayout",function(){return Md}),o.d(m,"registerLayout",function(){return kd}),o.d(m,"Global",function(){return Xo}),o.d(m,"Minimap",function(){return Ub}),o.d(m,"Grid",function(){return zb}),o.d(m,"Bundling",function(){return Vb}),o.d(m,"Menu",function(){return Wb}),o.d(m,"Fisheye",function(){return Fp}),o.d(m,"Algorithm",function(){return Gp}),o.d(m,"ToolBar",function(){return Xb}),o.d(m,"Tooltip",function(){return Yb}),o.d(m,"TimeBar",function(){return zp}),o.d(m,"ImageMinimap",function(){return Up}),o.d(m,"EdgeFilterLens",function(){return Vp}),o.d(m,"SnapLine",function(){return Wp}),o.d(m,"Legend",function(){return Hb}),o.d(m,"Arrow",function(){return Ut}),o.d(m,"Marker",function(){return Xt}),o.d(m,"Shape",function(){return fr}),o.d(m,"version",function(){return qb});var f={};o.r(f),o.d(f,"getAdjMatrix",function(){return z}),o.d(f,"breadthFirstSearch",function(){return Ie}),o.d(f,"connectedComponent",function(){return te}),o.d(f,"getDegree",function(){return V}),o.d(f,"getInDegree",function(){return ie}),o.d(f,"getOutDegree",function(){return we}),o.d(f,"detectCycle",function(){return Y}),o.d(f,"detectDirectedCycle",function(){return Br}),o.d(f,"detectAllCycles",function(){return ee}),o.d(f,"detectAllDirectedCycle",function(){return J}),o.d(f,"detectAllUndirectedCycle",function(){return oe}),o.d(f,"depthFirstSearch",function(){return ke}),o.d(f,"dijkstra",function(){return K}),o.d(f,"findAllPath",function(){return le}),o.d(f,"findShortestPath",function(){return ne}),o.d(f,"floydWarshall",function(){return ue}),o.d(f,"labelPropagation",function(){return Q}),o.d(f,"louvain",function(){return Se}),o.d(f,"minimumSpanningTree",function(){return Le}),o.d(f,"pageRank",function(){return Ke}),o.d(f,"getNeighbors",function(){return xe}),o.d(f,"Stack",function(){return dr}),o.d(f,"GADDI",function(){return xr}),o.d(f,"default",function(){return Rr});var c={};o.r(c),o.d(c,"compare",function(){return zr}),o.d(c,"getLineIntersect",function(){return Dr}),o.d(c,"getRectIntersectByPoint",function(){return rn}),o.d(c,"getCircleIntersectByPoint",function(){return Ir}),o.d(c,"getEllipseIntersectByPoint",function(){return On}),o.d(c,"applyMatrix",function(){return In}),o.d(c,"invertMatrix",function(){return Dn}),o.d(c,"getCircleCenterByPoints",function(){return Rn}),o.d(c,"distance",function(){return gn}),o.d(c,"scaleMatrix",function(){return Er}),o.d(c,"floydWarshall",function(){return ln}),o.d(c,"getAdjMatrix",function(){return yn}),o.d(c,"translate",function(){return mn}),o.d(c,"move",function(){return Qn}),o.d(c,"scale",function(){return Un}),o.d(c,"rotate",function(){return ri}),o.d(c,"getDegree",function(){return Ei}),o.d(c,"isPointInPolygon",function(){return Bn}),o.d(c,"intersectBBox",function(){return wi}),o.d(c,"isPolygonsIntersect",function(){return Oi}),o.d(c,"Line",function(){return Wn}),o.d(c,"getBBoxBoundLine",function(){return ii}),o.d(c,"itemIntersectByLine",function(){return hi}),o.d(c,"fractionToLine",function(){return Vn}),o.d(c,"getPointsCenter",function(){return oi}),o.d(c,"squareDist",function(){return di}),o.d(c,"pointLineSquareDist",function(){return _i}),o.d(c,"isPointsOverlap",function(){return Xn}),o.d(c,"pointRectSquareDist",function(){return Yn}),o.d(c,"pointLineDistance",function(){return Mi});var M={};o.r(M),o.d(M,"getBBox",function(){return vr}),o.d(M,"getLoopCfgs",function(){return Be}),o.d(M,"getLabelPosition",function(){return ut}),o.d(M,"traverseTree",function(){return Ft}),o.d(M,"traverseTreeUp",function(){return _e}),o.d(M,"getLetterWidth",function(){return ze}),o.d(M,"getTextSize",function(){return Qe}),o.d(M,"plainCombosToTrees",function(){return lt}),o.d(M,"reconstructTree",function(){return vt}),o.d(M,"getComboBBox",function(){return wt}),o.d(M,"shouldRefreshEdge",function(){return Lt}),o.d(M,"cloneBesidesImg",function(){return Wt});var _={};o.r(_),o.d(_,"uniqueId",function(){return pr}),o.d(_,"formatPadding",function(){return Ur}),o.d(_,"cloneEvent",function(){return Gr}),o.d(_,"isViewportChanged",function(){return $r}),o.d(_,"isNaN",function(){return Kr}),o.d(_,"calculationItemsBBox",function(){return jn}),o.d(_,"processParallelEdges",function(){return Cn});var x={};o.r(x),o.d(x,"getSpline",function(){return ao}),o.d(x,"getControlPoint",function(){return Ui}),o.d(x,"pointsToPolygon",function(){return Ci}),o.d(x,"pathToPoints",function(){return _t}),o.d(x,"getClosedSpline",function(){return $e}),o.d(x,"roundedHull",function(){return fe}),o.d(x,"paddedHull",function(){return Z});var O={};o.r(O),o.d(O,"defaultSubjectColors",function(){return Or});var S={};o.r(S),o.d(S,"leftTranslate",function(){return so}),o.d(S,"leftRotate",function(){return vo}),o.d(S,"leftScale",function(){return uo}),o.d(S,"transform",function(){return Da}),o.d(S,"direction",function(){return Ra}),o.d(S,"angleTo",function(){return Hp}),o.d(S,"vertical",function(){return qp});var g={};o.r(g),o.d(g,"mixColor",function(){return gi}),o.d(g,"getColorsWithSubjectColor",function(){return fu}),o.d(g,"getColorSetsBySubjectColors",function(){return Qp});var d={};o.r(d),o.d(d,"proccessToFunc",function(){return vy}),o.d(d,"buildTextureData",function(){return yy}),o.d(d,"buildTextureDataWithOneEdgeAttr",function(){return my}),o.d(d,"buildTextureDataWithTwoEdgeAttr",function(){return by}),o.d(d,"attributesToTextureData",function(){return xy}),o.d(d,"arrayToTextureData",function(){return wy}),o.d(d,"radialLayout",function(){return _y});var y={};o.r(y),o.d(y,"gpuDetector",function(){return Od});var E={};o.r(E),o.d(E,"default",function(){return np}),o.d(E,"assign",function(){return Jo}),o.d(E,"format",function(){return tp}),o.d(E,"parse",function(){return rp}),o.d(E,"defaultI18n",function(){return rc}),o.d(E,"setGlobalDateI18n",function(){return Hd}),o.d(E,"setGlobalDateMasks",function(){return ep});var b=o(1),p=o(0),A={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(n){return Object.assign(this,n),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(n){var t=this,e=this.events;this.graph=n,this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||n.get("canvas").set("draggable",!0),Object(p.each)(e,function(r,i){n.on(i,r)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(n){var t=this.events;this.type!=="drag-canvas"&&this.type!=="brush-select"&&this.type!=="lasso-select"||n.get("canvas").set("draggable",!1),Object(p.each)(t,function(e,r){n.off(r,e)})},get:function(n){return this[n]},set:function(n,t){return this[n]=t,this}},C=function(){function n(){}return n.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: "+t);var r=Object(p.clone)(A);Object.assign(r,e);var i=function(a){var s=this;Object.assign(this,this.getDefaultCfg(),a);var u=this.getEvents();this.events=null;var l={};u&&(Object(p.each)(u,function(h,v){l[v]=Object(p.wrapBehavior)(s,h)}),this.events=l)};i.prototype=r,n.types[t]=i},n.hasBehavior=function(t){return!!n.types[t]},n.getBehavior=function(t){return n.types[t]},n.types={},n}(),N=C,P=o(135),L=o(17),z=function(n,t){var e=n.nodes,r=n.edges,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){a[s.id]=u,i.push([])}),r&&r.forEach(function(s){var u=s.source,l=s.target,h=a[u],v=a[l];!h&&h!==0||!v&&v!==0||(i[h][v]=1,t||(i[v][h]=1))}),i},X=function(n,t){return n===t},re=function(){function n(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return n.prototype.toString=function(t){return t?t(this.value):""+this.value},n}(),se=function(){function n(t){t===void 0&&(t=X),this.head=null,this.tail=null,this.compare=t}return n.prototype.prepend=function(t){var e=new re(t,this.head);return this.head=e,this.tail||(this.tail=e),this},n.prototype.append=function(t){var e=new re(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},n.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,t)?(e=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,t)&&(this.tail=r),e},n.prototype.find=function(t){var e=t.value,r=e===void 0?void 0:e,i=t.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var s=this.head;s;){if(a&&a(s.value)||r!==void 0&&this.compare(s.value,r))return s;s=s.next}return null},n.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},n.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},n.prototype.fromArray=function(t){var e=this;return t.forEach(function(r){return e.append(r)}),this},n.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},n.prototype.reverse=function(){for(var t=this.head,e=null,r=null;t;)r=t.next,t.next=e,e=t,t=r;this.tail=this.head,this.head=e},n.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},n}(),ce=function(){function n(){this.linkedList=new se}return n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},n.prototype.enqueue=function(t){this.linkedList.append(t)},n.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},n.prototype.toString=function(t){return this.linkedList.toString(t)},n}(),xe=function(n,t,e){t===void 0&&(t=[]);var r=t.filter(function(i){return i.source===n||i.target===n});return e==="target"?r.filter(function(i){return i.source===n}).map(function(i){return i.target}):e==="source"?r.filter(function(i){return i.target===n}).map(function(i){return i.source}):r.map(function(i){return i.source===n?i.target:i.source})},ye=function(n,t){return t.filter(function(e){return e.source===n||e.target===n})},W=function(n){return n===void 0&&(n=0),n+"-"+(""+Math.random()).split(".")[1].substr(0,5)+(""+Math.random()).split(".")[1].substr(0,5)},Ie=function(n,t,e){var r=function(h){h===void 0&&(h={});var v,k=h,T=function(){},I=(v={},function(j){var F=j.next;return!v[F]&&(v[F]=!0,!0)});return k.allowTraversal=h.allowTraversal||I,k.enter=h.enter||T,k.leave=h.leave||T,k}(e),i=new ce,a=n.edges,s=a===void 0?[]:a;i.enqueue(t);for(var u="",l=function(){var h=i.dequeue();r.enter({current:h,previous:u}),xe(h,s,"target").forEach(function(v){r.allowTraversal({previous:u,current:h,next:v})&&i.enqueue(v)}),r.leave({current:h,previous:u}),u=h};!i.isEmpty();)l()},ge=function(n){for(var t=n.nodes,e=t===void 0?[]:t,r=n.edges,i=r===void 0?[]:r,a=[],s={},u={},l={},h=[],v=0,k=function F(B){u[B.id]=v,l[B.id]=v,v+=1,a.push(B),s[B.id]=!0;for(var U=xe(B.id,i,"target").filter(function(me){return e.map(function(Te){return Te.id}).indexOf(me)>-1}),q=function(me){var Te=U[me];if(u[Te]||u[Te]===0)s[Te]&&(l[B.id]=Math.min(l[B.id],u[Te]));else{var Oe=e.filter(function(Pe){return Pe.id===Te});Oe.length>0&&F(Oe[0]),l[B.id]=Math.min(l[B.id],l[Te])}},$=0;$<U.length;$++)q($);if(l[B.id]===u[B.id]){for(var ve=[];a.length>0;){var de=a.pop();if(s[de.id]=!1,ve.push(de),de===B)break}ve.length>0&&h.push(ve)}},T=0,I=e;T<I.length;T++){var j=I[T];u[j.id]||u[j.id]===0||k(j)}return h};function te(n,t){return t?ge(n):function(e){for(var r=e.nodes,i=r===void 0?[]:r,a=e.edges,s=a===void 0?[]:a,u=[],l={},h=[],v=function j(F){h.push(F),l[F.id]=!0;for(var B=xe(F.id,s),U=function($){var ve=B[$];if(!l[ve]){var de=i.filter(function(me){return me.id===ve});de.length>0&&j(de[0])}},q=0;q<B.length;++q)U(q)},k=0;k<i.length;k++){var T=i[k];if(!l[T.id]){v(T);for(var I=[];h.length>0;)I.push(h.pop());u.push(I)}}return u}(n)}var H=function(n){var t={},e=n.nodes,r=e===void 0?[]:e,i=n.edges,a=i===void 0?[]:i;return r.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),a.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},V=H,ie=function(n,t){return H(n)[t]?H(n)[t].inDegree:0},we=function(n,t){return H(n)[t]?H(n)[t].outDegree:0};function ke(n,t,e){(function r(i,a,s,u){u.enter({current:a,previous:s});var l=i.edges;xe(a,l===void 0?[]:l,"target").forEach(function(h){u.allowTraversal({previous:s,current:a,next:h})&&r(i,h,a,u)}),u.leave({current:a,previous:s})})(n,t,"",function(r){r===void 0&&(r={});var i,a=r,s=function(){},u=(i={},function(l){var h=l.next;return!i[h]&&(i[h]=!0,!0)});return a.allowTraversal=r.allowTraversal||u,a.enter=r.enter||s,a.leave=r.leave||s,a}(e))}var oe=function(n,t,e){var r,i;e===void 0&&(e=!0);for(var a=[],s=0,u=te(n,!1);s<u.length;s++){var l=u[s];if(l.length)for(var h=l[0],v=h.id,k=[h],T=((r={})[v]=h,r),I=((i={})[v]=new Set,i);k.length>0;)for(var j=k.pop(),F=j.id,B=xe(F,n.edges),U=function($){var ve,de=B[$],me=n.nodes.find(function(ct){return ct.id===de});if(de===F)a.push(((ve={})[de]=j,ve));else if(de in I){if(!I[F].has(me)){for(var Te=!0,Oe=[me,j],Pe=T[F];I[de].size&&!I[de].has(Pe)&&(Oe.push(Pe),Pe!==T[Pe.id]);)Pe=T[Pe.id];if(Oe.push(Pe),t&&e?(Te=!1,Oe.findIndex(function(ct){return t.indexOf(ct.id)>-1})>-1&&(Te=!0)):t&&!e&&Oe.findIndex(function(ct){return t.indexOf(ct.id)>-1})>-1&&(Te=!1),Te){for(var Ze={},nt=1;nt<Oe.length;nt+=1)Ze[Oe[nt-1].id]=Oe[nt];Oe.length&&(Ze[Oe[Oe.length-1].id]=Oe[0]),a.push(Ze)}I[de].add(j)}}else T[de]=j,k.push(me),I[de]=new Set([j])},q=0;q<B.length;q+=1)U(q)}return a},J=function(n,t,e){e===void 0&&(e=!0);for(var r=[],i=new Set,a=[],s=[],u={},l={},h=function Pe(Ze,nt,ct){var st=!1;if(t&&e===!1&&t.indexOf(Ze.id)>-1)return st;r.push(Ze),i.add(Ze);for(var It=ct[Ze.id],gt=0;gt<It.length;gt+=1)if((Zt=u[It[gt]])===nt){for(var Pt={},Rt=1;Rt<r.length;Rt+=1)Pt[r[Rt-1].id]=r[Rt];r.length&&(Pt[r[r.length-1].id]=r[0]),s.push(Pt),st=!0}else i.has(Zt)||Pe(Zt,nt,ct)&&(st=!0);if(st)(function(kt){for(var Vt=[kt];Vt.length>0;){var Dt=Vt.pop();i.has(Dt)&&(i.delete(Dt),a[Dt.id].forEach(function(qt){Vt.push(qt)}),a[Dt.id].clear())}})(Ze);else for(gt=0;gt<It.length;gt+=1){var Zt=u[It[gt]];a[Zt.id].has(Ze)||a[Zt.id].add(Ze)}return r.pop(),st},v=n.nodes,k=v===void 0?[]:v,T=0;T<k.length;T+=1){var I=k[T],j=I.id;l[j]=T,u[T]=I}if(t&&e){var F=function(Pe){var Ze=t[Pe];l[k[Pe].id]=l[Ze],l[Ze]=0,u[0]=k.find(function(nt){return nt.id===Ze}),u[l[k[Pe].id]]=k[Pe]};for(T=0;T<t.length;T++)F(T)}for(var B=function(Pe){for(var Ze,nt,ct=1/0,st=0;st<Pe.length;st+=1)for(var It=Pe[st],gt=0;gt<It.length;gt++){var Pt=l[It[gt].id];Pt<ct&&(ct=Pt,nt=st)}var Rt=Pe[nt],Zt=[];for(st=0;st<Rt.length;st+=1){var kt=Rt[st];Zt[kt.id]=[];for(var Vt=0,Dt=xe(kt.id,n.edges,"target").filter(function($t){return Rt.map(function(Gt){return Gt.id}).indexOf($t)>-1});Vt<Dt.length;Vt++){var qt=Dt[Vt];qt!==kt.id||e===!1&&t.indexOf(kt.id)>-1?Zt[kt.id].push(l[qt]):s.push(((Ze={})[kt.id]=kt,Ze))}}return{component:Rt,adjList:Zt,minIdx:ct}},U=0;U<k.length;){var q=k.filter(function(Pe){return l[Pe.id]>=U}),$=ge({nodes:q,edges:n.edges}).filter(function(Pe){return Pe.length>1});if($.length===0)break;var ve=B($),de=ve.minIdx,me=ve.adjList,Te=ve.component;if(!(Te.length>1))break;Te.forEach(function(Pe){a[Pe.id]=new Set});var Oe=u[de];if(t&&e&&t.indexOf(Oe.id)===-1)return s;h(Oe,Oe,me),U=de+1}return s},ee=function(n,t,e,r){return r===void 0&&(r=!0),t?J(n,e,r):oe(n,e,r)},Y=function(n){var t=null,e=n.nodes,r={},i={},a={},s={};(e===void 0?[]:e).forEach(function(l){i[l.id]=l});for(var u={enter:function(l){var h=l.current,v=l.previous;if(a[h]){t={};for(var k=h,T=v;T!==h;)t[k]=T,k=T,T=r[T];t[k]=T}else a[h]=h,delete i[h],r[h]=v},leave:function(l){var h=l.current;s[h]=h,delete a[h]},allowTraversal:function(l){var h=l.next;return!t&&!s[h]}};Object.keys(i).length;)ke(n,Object.keys(i)[0],u);return t},K=function(n,t,e,r){var i=n.nodes,a=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,l=[],h={},v={},k={};a.forEach(function(q,$){var ve=q.id;l.push(ve),v[ve]=1/0,ve===t&&(v[ve]=0)});for(var T=a.length,I=function(q){var $=function(de,me,Te){for(var Oe,Pe=1/0,Ze=0;Ze<me.length;Ze++){var nt=me[Ze].id;!Te[nt]&&de[nt]<=Pe&&(Pe=de[nt],Oe=me[Ze])}return Oe}(v,a,h),ve=$.id;if(h[ve]=!0,v[ve]===1/0)return"continue";(e?function(de,me){return me.filter(function(Te){return Te.source===de})}(ve,u):ye(ve,u)).forEach(function(de){var me=de.target,Te=de.source,Oe=me===ve?Te:me,Pe=r&&de[r]?de[r]:1;v[Oe]>v[$.id]+Pe?(v[Oe]=v[$.id]+Pe,k[Oe]=[$.id]):v[Oe]===v[$.id]+Pe&&k[Oe].push($.id)})},j=0;j<T;j++)I();k[t]=[t];var F={};for(var B in v)v[B]!==1/0&&G(t,B,k,F);var U={};for(var B in F)U[B]=F[B][0];return{length:v,path:U,allPath:F}};function G(n,t,e,r){if(n===t)return[n];if(r[t])return r[t];for(var i=[],a=0,s=e[t];a<s.length;a++){var u=G(n,s[a],e,r);if(!u)return;for(var l=0,h=u;l<h.length;l++){var v=h[l];Object(p.isArray)(v)?i.push(Object(b.__spreadArray)(Object(b.__spreadArray)([],v),[t])):i.push([v,t])}}return r[t]=i,r[t]}var ne=function(n,t,e,r,i){var a=K(n,t,r,i),s=a.length,u=a.path,l=a.allPath;return{length:s[e],path:u[e],allPath:l[e]}},le=function(n,t,e,r){var i;if(t===e)return[[t]];var a=n.edges,s=a===void 0?[]:a,u=[t],l=((i={})[t]=!0,i),h=[],v=[],k=r?xe(t,s,"target"):xe(t,s);for(h.push(k);u.length>0&&h.length>0;){var T=h[h.length-1];if(T.length){var I=T.shift();if(I&&(u.push(I),l[I]=!0,k=r?xe(I,s,"target"):xe(I,s),h.push(k.filter(function(B){return!l[B]}))),u[u.length-1]===e){var j=u.map(function(B){return B});v.push(j),F=u.pop(),l[F]=!1,h.pop()}}else{var F=u.pop();l[F]=!1,h.pop()}}return v},ue=function(n,t){for(var e=z(n,t),r=[],i=e.length,a=0;a<i;a+=1){r[a]=[];for(var s=0;s<i;s+=1)a===s?r[a][s]=0:e[a][s]!==0&&e[a][s]?r[a][s]=e[a][s]:r[a][s]=1/0}for(var u=0;u<i;u+=1)for(a=0;a<i;a+=1)for(s=0;s<i;s+=1)r[a][s]>r[a][u]+r[u][s]&&(r[a][s]=r[a][u]+r[u][s]);return r},Q=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e="weight"),r===void 0&&(r=1e3);var i=n.nodes,a=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,l={},h={};a.forEach(function(q,$){var ve=W();q.clusterId=ve,l[ve]={id:ve,nodes:[q]},h[q.id]={node:q,idx:$}});var v=z(n,t),k=[],T={};v.forEach(function(q,$){var ve=0,de=a[$].id;T[de]={},q.forEach(function(me,Te){if(me){ve+=me;var Oe=a[Te].id;T[de][Oe]=me}}),k.push(ve)});for(var I=0,j=function(){var q=!1;if(a.forEach(function($){var ve={};Object.keys(T[$.id]).forEach(function(ct){var st=T[$.id][ct],It=h[ct].node.clusterId;ve[It]||(ve[It]=0),ve[It]+=st});var de=-1/0,me=[];if(Object.keys(ve).forEach(function(ct){de<ve[ct]?(de=ve[ct],me=[ct]):de===ve[ct]&&me.push(ct)}),me.length!==1||me[0]!==$.clusterId){var Te=me.indexOf($.clusterId);if(Te>=0&&me.splice(Te,1),me&&me.length){q=!0;var Oe=l[$.clusterId],Pe=Oe.nodes.indexOf($);Oe.nodes.splice(Pe,1);var Ze=Math.floor(Math.random()*me.length),nt=l[me[Ze]];nt.nodes.push($),$.clusterId=nt.id}}}),!q)return"break";I++};I<r&&j()!=="break";);Object.keys(l).forEach(function(q){var $=l[q];$.nodes&&$.nodes.length||delete l[q]});var F=[],B={};u.forEach(function(q){var $=q.source,ve=q.target,de=q[e]||1,me=h[$].node.clusterId,Te=h[ve].node.clusterId,Oe=me+"---"+Te;if(B[Oe])B[Oe].weight+=de,B[Oe].count++;else{var Pe={source:me,target:Te,weight:de,count:1};B[Oe]=Pe,F.push(Pe)}});var U=[];return Object.keys(l).forEach(function(q){U.push(l[q])}),{clusters:U,clusterEdges:F}},he=function(n,t,e,r){for(var i=t.length,a=2*r,s=0,u=0;u<i;u++)for(var l=n[u].clusterId,h=0;h<i;h++)l===n[h].clusterId&&(s+=(t[u][h]||0)-(e[u]||0)*(e[h]||0)/a);return s*=1/a},Se=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e="weight"),r===void 0&&(r=1e-4);var i=n.nodes,a=i===void 0?[]:i,s=n.edges,u=s===void 0?[]:s,l=1,h={},v={};a.forEach(function(Te,Oe){var Pe=String(l++);Te.clusterId=Pe,h[Pe]={id:Pe,nodes:[Te]},v[Te.id]={node:Te,idx:Oe}});var k=z(n,t),T=[],I={},j=0;k.forEach(function(Te,Oe){var Pe=0,Ze=a[Oe].id;I[Ze]={},Te.forEach(function(nt,ct){if(nt){Pe+=nt;var st=a[ct].id;I[Ze][st]=nt,j+=nt}}),T.push(Pe)}),j/=2;for(var F=1/0,B=1/0,U=0;F=he(a,k,T,j),!(Math.abs(F-B)<r||U>100);)B=F,U++,Object.keys(h).forEach(function(Te){var Oe=0;u.forEach(function(Pe){var Ze=Pe.source,nt=Pe.target,ct=v[Ze].node.clusterId,st=v[nt].node.clusterId;(ct===Te&&st!==Te||st===Te&&ct!==Te)&&(Oe+=Pe[e]||1)}),h[Te].sumTot=Oe}),a.forEach(function(Te,Oe){var Pe,Ze=h[Te.clusterId],nt=0,ct=T[Oe]/(2*j),st=0;Ze.nodes.forEach(function(Vt){var Dt=v[Vt.id].idx;st+=k[Oe][Dt]||0});var It=st-Ze.sumTot*ct,gt=I[Te.id];if(Object.keys(gt).forEach(function(Vt){var Dt=v[Vt].node.clusterId;if(Dt!==Te.clusterId){var qt=h[Dt],$t=qt.nodes;if($t&&$t.length){var Gt=0;$t.forEach(function(Lr){var wn=v[Lr.id].idx;Gt+=k[Oe][wn]||0});var lr=Gt-qt.sumTot*ct-It;lr>nt&&(nt=lr,Pe=qt)}}}),nt>0){Pe.nodes.push(Te);var Pt=Te.clusterId;Te.clusterId=Pe.id;var Rt=Ze.nodes.indexOf(Te);Ze.nodes.splice(Rt,1);var Zt=0,kt=0;u.forEach(function(Vt){var Dt=Vt.source,qt=Vt.target,$t=v[Dt].node.clusterId,Gt=v[qt].node.clusterId;($t===Pe.id&&Gt!==Pe.id||Gt===Pe.id&&$t!==Pe.id)&&(Zt+=Vt[e]||1),($t===Pt&&Gt!==Pt||Gt===Pt&&$t!==Pt)&&(kt+=Vt[e]||1)}),Pe.sumTot=Zt,Ze.sumTot=kt}});var q={},$=0;Object.keys(h).forEach(function(Te){var Oe=h[Te];if(Oe.nodes&&Oe.nodes.length){var Pe=String($+1);Pe!==Te&&(Oe.id=Pe,Oe.nodes=Oe.nodes.map(function(Ze){return{id:Ze.id,clusterId:Pe}}),h[Pe]=Oe,q[Te]=Pe,delete h[Te],$++)}else delete h[Te]}),a.forEach(function(Te){Te.clusterId&&q[Te.clusterId]&&(Te.clusterId=q[Te.clusterId])});var ve=[],de={};u.forEach(function(Te){var Oe=Te.source,Pe=Te.target,Ze=Te[e]||1,nt=v[Oe].node.clusterId,ct=v[Pe].node.clusterId,st=nt+"---"+ct;if(de[st])de[st].weight+=Ze,de[st].count++;else{var It={source:nt,target:ct,weight:Ze,count:1};de[st]=It,ve.push(It)}});var me=[];return Object.keys(h).forEach(function(Te){me.push(h[Te])}),{clusters:me,clusterEdges:ve}},je=function(){function n(t){this.count=t.length,this.parent={};for(var e=0,r=t;e<r.length;e++){var i=r[e];this.parent[i]=i}}return n.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},n.prototype.union=function(t,e){var r=this.find(t),i=this.find(e);r!==i&&(r<i?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},n.prototype.connected=function(t,e){return this.find(t)===this.find(e)},n}(),Ae=function(n,t){return n-t},Ce=function(){function n(t){t===void 0&&(t=Ae),this.compareFn=t,this.list=[]}return n.prototype.getLeft=function(t){return 2*t+1},n.prototype.getRight=function(t){return 2*t+2},n.prototype.getParent=function(t){return t===0?null:Math.floor((t-1)/2)},n.prototype.isEmpty=function(){return this.list.length<=0},n.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},n.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},n.prototype.insert=function(t){if(t!==null){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},n.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var r=this.list[e];this.list[e]=this.list[t],this.list[t]=r,t=e,e=this.getParent(t)}},n.prototype.moveDown=function(t){var e,r=t,i=this.getLeft(t),a=this.getRight(t),s=this.list.length;i!==null&&i<s&&this.compareFn(this.list[r],this.list[i])>0?r=i:a!==null&&a<s&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),t!==r&&(e=[this.list[r],this.list[t]],this.list[t]=e[0],this.list[r]=e[1],this.moveDown(r))},n}(),Re=function(n,t){var e=[],r=n.nodes,i=r===void 0?[]:r,a=n.edges,s=a===void 0?[]:a;if(i.length===0)return e;var u=i[0],l=new Set;l.add(u);var h=new Ce(function(I,j){return t?I.weight-j.weight:0});for(ye(u.id,s).forEach(function(I){h.insert(I)});!h.isEmpty();){var v=h.delMin(),k=v.source,T=v.target;l.has(k)&&l.has(T)||(e.push(v),l.has(k)||(l.add(k),ye(k,s).forEach(function(I){h.insert(I)})),l.has(T)||(l.add(T),ye(T,s).forEach(function(I){h.insert(I)})))}return e},Ee=function(n,t){var e=[],r=n.nodes,i=r===void 0?[]:r,a=n.edges,s=a===void 0?[]:a;if(i.length===0)return e;var u=s.map(function(T){return T});t&&u.sort(function(T,I){return T.weight-I.weight});for(var l=new je(i.map(function(T){return T.id}));u.length>0;){var h=u.shift(),v=h.source,k=h.target;l.connected(v,k)||(e.push(h),l.union(v,k))}return e},Le=function(n,t,e){return e?{prim:Re,kruskal:Ee}[e](n,t):Ee(n,t)},Ke=function(n,t,e){typeof t!="number"&&(t=1e-6),typeof e!="number"&&(e=.85);for(var r,i=1,a=0,s=1e3,u=n.nodes,l=u===void 0?[]:u,h=n.edges,v=h===void 0?[]:h,k=l.length,T={},I={},j=0;j<k;++j)T[B=(de=l[j]).id]=1/k,I[B]=1/k;for(var F=V(n);s>0&&i>t;){for(a=0,j=0;j<k;++j){var B=(de=l[j]).id;if(r=0,F[de.id].inDegree===0)T[B]=0;else{for(var U=xe(B,v,"source"),q=0;q<U.length;++q){var $=U[q],ve=F[$].outDegree;ve>0&&(r+=I[$]/ve)}T[B]=e*r,a+=T[B]}}for(a=(1-a)/k,i=0,j=0;j<k;++j){var de;r=T[B=(de=l[j]).id]+a,i+=Math.abs(r-I[B]),I[B]=r}s-=1}return I},et=function(n,t,e,r){n===void 0&&(n=-1),t===void 0&&(t=-1),e===void 0&&(e=-1),r===void 0&&(r="-1"),this.id=n,this.from=t,this.to=e,this.label=r},ot=function(){function n(t,e){t===void 0&&(t=-1),e===void 0&&(e="-1"),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return n.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},n}(),dt=function(){function n(t,e,r){t===void 0&&(t=-1),e===void 0&&(e=!0),r===void 0&&(r=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return n.prototype.getNodeNum=function(){return this.nodes.length},n.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var r=new ot(t,e);this.nodes.push(r),this.nodeMap[t]=r,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},n.prototype.addEdge=function(t,e,r,i){if((this.edgeIdAutoIncrease||t===void 0)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t])){var a=new et(t,e,r,i);if(this.edges.push(a),this.edgeMap[t]=a,this.nodeMap[e].addEdge(a),this.edgeLabelMap[i]||(this.edgeLabelMap[i]=[]),this.edgeLabelMap[i].push(a),!this.directed){var s=new et(t,r,e,i);this.nodeMap[r].addEdge(s),this.edgeLabelMap[i].push(s)}}},n}(),At=function(){function n(t,e,r,i,a){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:r||"-1",edgeLabel:i||"-1",nodeLabel2:a||"-1"}}return n.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},n.prototype.notEqualTo=function(t){return!this.equalTo(t)},n}(),Tt=function(){function n(){this.rmpath=[],this.dfsEdgeList=[]}return n.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var r=0;r<e;r++)if(this.dfsEdgeList[r]!==t[r])return!1;return!0},n.prototype.notEqualTo=function(t){return!this.equalTo(t)},n.prototype.pushBack=function(t,e,r,i,a){return this.dfsEdgeList.push(new At(t,e,r,i,a)),this.dfsEdgeList},n.prototype.toGraph=function(t,e){t===void 0&&(t=-1),e===void 0&&(e=!1);var r=new dt(t,!0,e);return this.dfsEdgeList.forEach(function(i){var a=i.fromNode,s=i.toNode,u=i.nodeEdgeNodeLabel,l=u.nodeLabel1,h=u.edgeLabel,v=u.nodeLabel2;l!=="-1"&&r.addNode(a,l),v!=="-1"&&r.addNode(s,v),r.addEdge(void 0,a,s,h)}),r},n.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;e>=0;e--){var r=this.dfsEdgeList[e],i=r.fromNode,a=r.toNode;i<a&&(t===void 0||a===t)&&(this.rmpath.push(e),t=i)}return this.rmpath},n.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},n}(),jt=function(){function n(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return n.prototype.hasNode=function(t){return this.nodesUsed[t.id]===1},n.prototype.hasEdge=function(t){return this.edgesUsed[t.id]===1},n}(),Kt=function(){function n(t){var e=t.graphs,r=t.minSupport,i=r===void 0?2:r,a=t.minNodeNum,s=a===void 0?1:a,u=t.maxNodeNum,l=u===void 0?4:u,h=t.top,v=h===void 0?10:h,k=t.directed,T=k!==void 0&&k,I=t.verbose,j=I!==void 0&&I;this.graphs=e,this.dfsCode=new Tt,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=i,this.top=v,this.directed=T,this.counter=0,this.maxNodeNum=l,this.minNodeNum=s,this.verbose=j,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return n.prototype.findForwardRootEdges=function(t,e){var r=this,i=[],a=t.nodeMap;return e.edges.forEach(function(s){(r.directed||e.label<=a[s.to].label)&&i.push(s)}),i},n.prototype.findBackwardEdge=function(t,e,r,i){if(!this.directed&&e===r)return null;for(var a=t.nodeMap,s=a[r.to].edges,u=s.length,l=0;l<u;l++){var h=s[l];if(!i.hasEdge(h)&&h.to===e.from){if(this.directed){if(a[e.from].label<a[r.to].label||a[e.from].label===a[r.to].label&&e.label<=h.label)return h}else if(e.label<h.label||e.label===h.label&&a[e.to].label<=a[r.to].label)return h}}return null},n.prototype.findForwardPureEdges=function(t,e,r,i){for(var a=[],s=e.to,u=t.nodeMap[s].edges,l=u.length,h=0;h<l;h++){var v=u[h],k=t.nodeMap[v.to];r<=k.label&&!i.hasNode(k)&&a.push(v)}return a},n.prototype.findForwardRmpathEdges=function(t,e,r,i){for(var a=[],s=t.nodeMap,u=s[e.to].label,l=s[e.from].edges,h=l.length,v=0;v<h;v++){var k=l[v],T=s[k.to].label;e.to===k.to||r>T||i.hasNode(s[k.to])||(e.label<k.label||e.label===k.label&&u<=T)&&a.push(k)}return a},n.prototype.getSupport=function(t){var e={};return t.forEach(function(r){e[r.graphId]||(e[r.graphId]=!0)}),Object.keys(e).length},n.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(r){var i=t[r],a=i.nodeLabel1,s=i.edgeLabel,u=i.nodeLabel2;e?(a<e.nodeLabel1||a===e.nodeLabel1&&s<e.edgeLabel||a===e.nodeLabel1&&s===e.edgeLabel&&u<e.nodeLabel2)&&(e={nodeLabel1:a,edgeLabel:s,nodeLabel2:u}):e={nodeLabel1:a,edgeLabel:s,nodeLabel2:u}}),e},n.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),e.dfsEdgeList.length===1)return!0;var r=this.directed,i=e.toGraph(-1,r),a=i.nodeMap,s=new Tt,u={};i.nodes.forEach(function(v){t.findForwardRootEdges(i,v).forEach(function(k){var T=a[k.to],I=v.label+"-"+k.label+"-"+T.label;u[I]||(u[I]={projected:[],nodeLabel1:v.label,edgeLabel:k.label,nodeLabel2:T.label});var j={graphId:i.id,edge:k,preNode:null};u[I].projected.push(j)})});var l=this.findMinLabel(u);s.dfsEdgeList.push(new At(0,1,l.nodeLabel1,l.edgeLabel,l.nodeLabel2));var h=l.nodeLabel1+"-"+l.edgeLabel+"-"+l.nodeLabel2;return function v(k){for(var T=s.buildRmpath(),I=s.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,j=s.dfsEdgeList[T[0]].toNode,F={},B=!1,U=0,q=r?-1:0,$=function(st){if(B)return"break";k.forEach(function(It){var gt=new jt(It),Pt=t.findBackwardEdge(i,gt.edges[T[st]],gt.edges[T[0]],gt);Pt&&(F[Pt.label]||(F[Pt.label]={projected:[],edgeLabel:Pt.label}),F[Pt.label].projected.push({graphId:i.id,edge:F,preNode:It}),U=s.dfsEdgeList[T[st]].fromNode,B=!0)})},ve=T.length-1;ve>q&&$(ve)!=="break";ve--);if(B){var de=t.findMinLabel(F);s.dfsEdgeList.push(new At(j,U,"-1",de.edgeLabel,"-1"));var me=s.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[me]===s.dfsEdgeList[me]&&v(F[de.edgeLabel].projected)}var Te={};B=!1;var Oe=0;k.forEach(function(st){var It=new jt(st),gt=t.findForwardPureEdges(i,It.edges[T[0]],I,It);gt.length>0&&(B=!0,Oe=j,gt.forEach(function(Pt){var Rt=Pt.label+"-"+a[Pt.to].label;Te[Rt]||(Te[Rt]={projected:[],edgeLabel:Pt.label,nodeLabel2:a[Pt.to].label}),Te[Rt].projected.push({graphId:i.id,edge:Pt,preNode:st})}))});var Pe=T.length,Ze=function(st){if(B)return"break";var It=T[st];k.forEach(function(gt){var Pt=new jt(gt),Rt=t.findForwardRmpathEdges(i,Pt.edges[It],I,Pt);Rt.length>0&&(B=!0,Oe=s.dfsEdgeList[It].fromNode,Rt.forEach(function(Zt){var kt=Zt.label+"-"+a[Zt.to].label;Te[kt]||(Te[kt]={projected:[],edgeLabel:Zt.label,nodeLabel2:a[Zt.to].label}),Te[kt].projected.push({graphId:i.id,edge:Zt,preNode:gt})}))})};for(ve=0;ve<Pe&&Ze(ve)!=="break";ve++);if(!B)return!0;var nt=t.findMinLabel(Te);s.dfsEdgeList.push(new At(Oe,j+1,"-1",nt.edgeLabel,nt.nodeLabel2));var ct=s.dfsEdgeList.length-1;return e.dfsEdgeList[ct]===s.dfsEdgeList[ct]&&v(Te[nt.edgeLabel+"-"+nt.nodeLabel2].projected)}(u[h].projected)},n.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(Object(p.clone)(t))}},n.prototype.subGraphMining=function(t){var e=this;if(!(this.getSupport(t)<this.minSupport)&&this.isMin()){this.report();var r=this.dfsCode.getNodeNum(),i=this.dfsCode.buildRmpath(),a=this.dfsCode.dfsEdgeList[i[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},l={};t.forEach(function(h){for(var v=e.graphs[h.graphId],k=v.nodeMap,T=new jt(h),I=i.length-1;I>=0;I--){var j=e.findBackwardEdge(v,T.edges[i[I]],T.edges[i[0]],T);if(j){var F=e.dfsCode.dfsEdgeList[i[I]].fromNode+"-"+j.label;l[F]||(l[F]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[i[I]].fromNode,edgeLabel:j.label}),l[F].projected.push({graphId:h.graphId,edge:j,preNode:h})}}if(!(r>=e.maxNodeNum)){e.findForwardPureEdges(v,T.edges[i[0]],s,T).forEach(function(U){var q=a+"-"+U.label+"-"+k[U.to].label;u[q]||(u[q]={projected:[],fromNodeId:a,edgeLabel:U.label,nodeLabel2:k[U.to].label}),u[q].projected.push({graphId:h.graphId,edge:U,preNode:h})});var B=function(U){e.findForwardRmpathEdges(v,T.edges[i[U]],s,T).forEach(function(q){var $=e.dfsCode.dfsEdgeList[i[U]].fromNode+"-"+q.label+"-"+k[q.to].label;u[$]||(u[$]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[i[U]].fromNode,edgeLabel:q.label,nodeLabel2:k[q.to].label}),u[$].projected.push({graphId:h.graphId,edge:q,preNode:h})})};for(I=0;I<i.length;I++)B(I)}}),Object.keys(l).forEach(function(h){var v=l[h],k=v.toNodeId,T=v.edgeLabel;e.dfsCode.dfsEdgeList.push(new At(a,k,"-1",T,"-1")),e.subGraphMining(l[h].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(h){var v=u[h],k=v.fromNodeId,T=v.edgeLabel,I=v.nodeLabel2;e.dfsCode.dfsEdgeList.push(new At(k,a+1,"-1",T,I)),e.subGraphMining(u[h].projected),e.dfsCode.dfsEdgeList.pop()})}},n.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,r=this.minSupport,i=this.frequentSize1Subgraphs,a={},s={},u={},l={};return Object.keys(t).forEach(function(h){var v=t[h],k=v.nodeMap;v.nodes.forEach(function(T,I){var j=T.label,F=h+"-"+j;if(!u[F]){var B=a[j]||0;B++,a[j]=B}u[F]={graphKey:h,label:j},T.edges.forEach(function(U){var q=j,$=k[U.to].label;if(!e&&q>$){var ve=$;$=q,q=ve}var de=U.label,me=h+"-"+q+"-"+de+"-"+$,Te=q+"-"+de+"-"+$;if(!s[Te]){var Oe=s[Te]||0;Oe++,s[Te]=Oe}l[me]={graphId:h,nodeLabel1:q,edgeLabel:de,nodeLabel2:$}})})}),Object.keys(a).forEach(function(h){if(!(a[h]<r)){var v={nodes:[],edges:[]};v.nodes.push({id:"0",label:h}),i.push(v)}}),i},n.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,r=(this.directed,{});Object.keys(e).forEach(function(i){var a=e[i],s=a.nodeMap;a.nodes.forEach(function(u){t.findForwardRootEdges(a,u).forEach(function(l){var h=s[l.to],v=u.label+"-"+l.label+"-"+h.label;r[v]||(r[v]={projected:[],nodeLabel1:u.label,edgeLabel:l.label,nodeLabel2:h.label});var k={graphId:i,edge:l,preNode:null};r[v].projected.push(k)})})}),Object.keys(r).forEach(function(i){var a=r[i],s=a.projected,u=a.nodeLabel1,l=a.edgeLabel,h=a.nodeLabel2;t.dfsCode.dfsEdgeList.push(new At(0,1,u,l,h)),t.subGraphMining(s),t.dfsCode.dfsEdgeList.pop()})}},n}(),Qt=function(n){var t=n.graphs,e=n.directed,r=e!==void 0&&e,i=n.nodeLabelProp,a=i===void 0?"cluster":i,s=n.edgeLabelProp,u=s===void 0?"cluster":s,l=function(F,B,U,q){var $={};return Object.keys(F).forEach(function(ve,de){var me=F[ve],Te=new dt(de,!0,B),Oe={};me.nodes.forEach(function(Pe,Ze){Te.addNode(Ze,Pe[U]),Oe[Pe.id]=Ze}),me.edges.forEach(function(Pe,Ze){var nt=Oe[Pe.source],ct=Oe[Pe.target];Te.addEdge(-1,nt,ct,Pe[q])}),Te&&Te.getNodeNum()&&($[Te.id]=Te)}),$}(t,r,a,u),h=n.minSupport,v=n.maxNodeNum,k=n.minNodeNum,T=n.verbose,I=n.top,j=new Kt({graphs:l,minSupport:h,maxNodeNum:v,minNodeNum:k,top:I,verbose:T,directed:r});return j.run(),function(F,B,U){var q=[];return F.forEach(function($){var ve={nodes:[],edges:[]};$.nodes.forEach(function(de){var me;ve.nodes.push(((me={id:""+de.id})[B]=de.label,me))}),$.edges.forEach(function(de){var me;ve.edges.push(((me={source:""+de.from,target:""+de.to})[U]=de.label,me))}),q.push(ve)}),q}(j.frequentSubgraphs,a,u)};function rr(n){return(rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var or=function(n,t,e,r){e===void 0&&(e="cluster"),r===void 0&&(r=2);var i=[],a=n.nodes;return t.forEach(function(s,u){i.push(Mr(a,s,u,e,r))}),i},Mr=function(n,t,e,r,i){var a=[e],s=[],u={};return t.forEach(function(l,h){if(l<=i&&e!==h){a.push(h),s.push(n[h]);var v=n[h][r];u[v]?(u[v].count++,u[v].dists.push(l)):u[v]={count:1,dists:[l]}}}),Object.keys(u).forEach(function(l){u[l].dists=u[l].dists.sort(function(h,v){return h-v})}),{nodeIdx:e,nodeId:n[e].id,nodeIdxs:a,neighbors:s,neighborNum:a.length-1,nodeLabelCountMap:u}},cr=function(n,t,e,r){var i=e.nodes;return r||(r={}),Object.keys(n).forEach(function(a){var s,u;if(!r||!r[a]){r[a]={nodes:[],edges:[]};var l=n[a],h=(s=t[l.start])===null||s===void 0?void 0:s.nodeIdxs,v=(u=t[l.end])===null||u===void 0?void 0:u.nodeIdxs;if(h&&v){var k=new Set(v),T=h.filter(function(U){return k.has(U)});if(T&&T.length){for(var I={},j=T.length,F=0;F<j;F++){var B=i[T[F]];r[a].nodes.push(B),I[B.id]=!0}e.edges.forEach(function(U){I[U.source]&&I[U.target]&&r[a].edges.push(U)})}}}}),r},yr=function(n,t,e,r){var i={};n.nodes.forEach(function(s){i[s.id]=s});var a=0;return n.edges.forEach(function(s){var u=i[s.source][e],l=i[s.target][e],h=t.nodes[0][e],v=t.nodes[1][e],k=t.edges[0][r];s[r]===k&&(u===h&&l===v||u===v&&l===h)&&a++}),a},br=function(n,t){var e={},r={};return n.forEach(function(i,a){e[i.id]={idx:a,node:i,degree:0};var s=i[t];r[s]||(r[s]=[]),r[s].push(i)}),{nodeMap:e,nodeLabelMap:r}},Xr=function(n,t,e){var r={},i={};return n.forEach(function(a,s){r[""+W]={idx:s,edge:a};var u=a[t];i[u]||(i[u]=[]),i[u].push(a);var l=e[a.source];l&&l.degree++;var h=e[a.target];h&&h.degree++}),{edgeMap:r,edgeLabelMap:i}},gr=function(n,t,e){var r=t.length,i={};return t.forEach(function(a,s){for(var u=e?0:s+1,l=n[s].id,h=u;h<r;h++)if(s!==h){var v=n[h].id,k=a[h];i[l+"-"+v]=k,e||(i[v+"-"+l]=k)}}),i},xr=function(n,t,e,r,i,a,s){if(e===void 0&&(e=!1),a===void 0&&(a="cluster"),s===void 0&&(s="cluster"),n&&n.nodes){var u=n.nodes.length;if(u){var l=ue(n,e),h=ue(t,e),v=gr(n.nodes,l,e),k=gr(t.nodes,h,e),T=br(n.nodes,a),I=T.nodeMap,j=T.nodeLabelMap,F=br(t.nodes,a),B=F.nodeMap,U=F.nodeLabelMap;Xr(n.edges,s,I);var q=Xr(t.edges,s,B).edgeLabelMap;i||(i=Math.max.apply(Math,Object(b.__spreadArray)(Object(b.__spreadArray)([],h[0]),[2]))),r||(r=i);var $=or(n,l,a,r),ve=or(t,h,a,r),de=function(Sr,jr,_r,un,hr){var qr=Math.ceil(_r/jr),en={},Yr=0;return un.forEach(function(Cr,Tr){for(var Zr=0,Tn=0,tn=Cr.nodeIdxs,bi=Cr.neighborNum-1;Zr<qr;){for(var cn=tn[1+Math.floor(Math.random()*bi)],Vr=0;(en[Tr+"-"+cn]||en[cn+"-"+Tr])&&(cn=Math.floor(Math.random()*jr),!(++Vr>2*jr)););if(Vr<2*jr&&(en[Tr+"-"+cn]={start:Tr,end:cn,distance:hr[Tr][cn]},Zr++,++Yr>=_r))return en;if(++Tn>2*jr)break}Zr<qr&&(qr=(qr+(qr-Zr))/(jr-Tr-1))}),en}(0,u,Math.min(100,u*(u-1)/2),ve,l),me=cr(de,$,n),Te=Qt({graphs:me,nodeLabelProp:a,edgeLabelProp:s,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:e}).slice(0,10),Oe=Te.length,Pe=[];Te.forEach(function(Sr,jr){Pe[jr]={},Object.keys(me).forEach(function(_r){var un=me[_r],hr=yr(un,Sr,a,s);Pe[jr][_r]=hr})});var Ze=function(Sr,jr,_r){for(var un=1/0,hr=0,qr=function(Yr){var Cr=Sr[Yr],Tr=Object.keys(Cr).sort(function(Vr,An){return Cr[Vr]-Cr[An]}),Zr=[];Tr.forEach(function(Vr,An){Zr[An%10]||(Zr[An%10]={graphs:[],totalCount:0,aveCount:0}),Zr[An%10].graphs.push(Vr),Zr[An%10].totalCount+=Cr[Vr]});var Tn=0,tn=[];Zr.forEach(function(Vr){var An=Vr.totalCount/Vr.graphs.length;Vr.aveCount=An,tn.push(An);var Zn=0,En=Vr.length;Vr.graphs.forEach(function(Si,Wo){var xo=Cr[Si];Vr.graphs.forEach(function(ro,wr){Wo!==wr&&(Zn+=Math.abs(xo-Cr[ro]))})}),Tn+=Zn/=En*(En-1)/2}),Tn/=Zr.length;var bi=0;tn.forEach(function(Vr,An){tn.forEach(function(Zn,En){An!==En&&(bi+=Math.abs(Vr-Zn))}),bi/=tn.length*(tn.length-1)/2});var cn=bi-Tn;un<cn&&(un=cn,hr=Yr)},en=0;en<jr;en++)qr(en);return{structure:_r[hr],structureCountMap:Sr[hr]}}(Pe,Oe,Te),nt=Ze.structure,ct=Ze.structureCountMap,st=t.nodes[0],It=st[a],gt=j[It],Pt={},Rt={},Zt={},kt={},Vt={};Object.keys(U).forEach(function(Sr,jr){Vt[Sr]=[];var _r=-1/0,un=U[Sr],hr={};un.forEach(function(Cr){var Tr=k[st.id+"-"+Cr.id];Tr&&Vt[Sr].push(Tr),_r<Tr&&(_r=Tr),hr[st.id+"-"+Cr.id]={start:0,end:B[Cr.id].idx,distance:Tr}}),Vt[Sr]=Vt[Sr].sort(function(Cr,Tr){return Cr-Tr}),Rt=cr(hr,ve,t,Rt);var qr=[];if(Object.keys(hr).forEach(function(Cr){if(Zt[Cr])qr.push(Zt[Cr]);else{var Tr=Rt[Cr];Zt[Cr]=yr(Tr,nt,a,s),qr.push(Zt[Cr])}}),qr=qr.sort(function(Cr,Tr){return Tr-Cr}),kt[st.id+"-"+Sr]=qr,Sr!==It)for(var en=function(Cr){var Tr=gt[Cr],Zr=$[I[Tr.id].idx],Tn=Zr.nodeLabelCountMap[Sr],tn=U[Sr].length;if(!Tn||Tn.count<tn)return gt.splice(Cr,1),"continue";for(var bi=!1,cn=0;cn<tn;cn++)if(Tn.dists[cn]>Vt[Sr][cn]){bi=!0;break}if(bi)return gt.splice(Cr,1),"continue";var Vr={};Zr.neighbors.forEach(function(En){var Si=v[Tr.id+"-"+En.id];Vr[Tr.id+"-"+En.id]={start:I[Tr.id].idx,end:I[En.id].idx,distance:Si}}),me=cr(Vr,$,n,me);var An=[];Object.keys(Vr).forEach(function(En){if(ct[En])An.push(ct[En]);else{var Si=me[En];ct[En]=yr(Si,nt,a,s),An.push(ct[En])}}),An=An.sort(function(En,Si){return Si-En});var Zn=!1;for(cn=0;cn<tn;cn++)if(An[cn]<qr[cn]){Zn=!0;break}return Zn?(gt.splice(Cr,1),"continue"):void 0},Yr=gt.length-1;Yr>=0;Yr--)en(Yr)});var Dt=[];gt.forEach(function(Sr){for(var jr=I[Sr.id].idx,_r=Mr(n.nodes,l[jr],jr,a,i).neighbors,un=_r.length,hr=!1,qr=function(Cr){if(_r.length+1<t.nodes.length)return hr=!0,{value:void 0};var Tr=_r[Cr],Zr=Tr[a];if(!U[Zr]||!U[Zr].length)return _r.splice(Cr,1),"continue";var Tn=Sr.id+"-"+Tr.id;if(!Vt[Zr]||!Vt[Zr].length)return _r.splice(Cr,1),"continue";var tn=v[Tn];if(tn>Vt[Zr][Vt[Zr].length-1])return _r.splice(Cr,1),"continue";var bi=ct[Tn]?ct[Tn]:function(An,Zn,En,Si,Wo,xo,ro,wr,vn,$n,_n){var Pi,po=Zn.id+"-"+En.id;if($n&&$n[po])return $n[po];var xi=_n?_n[po]:void 0;if(!xi){var wo=((Pi={})[po]={start:Si[Zn.id].idx,end:Si[En.id].idx,distance:Wo},Pi);xi=(_n=cr(wo,xo,An,_n))[po]}return yr(xi,ro,wr,vn)}(n,Sr,Tr,I,tn,$,nt,a,s,ct,me),cn=st.id+"-"+Zr;if(bi<kt[cn][kt[cn].length-1])return _r.splice(Cr,1),"continue";var Vr=Pt[Zr];return Vr===void 0&&(Vr=1/0,U[Zr].forEach(function(An){var Zn=B[An.id].degree;Vr>Zn&&(Vr=Zn)}),Pt[Zr]=Vr),I[Tr.id].degree<Vr?(_r.splice(Cr,1),"continue"):void 0},en=un-1;en>=0;en--){var Yr=qr(en);if(rr(Yr)==="object")return Yr.value}hr||Dt.push({nodes:[Sr].concat(_r)})});var qt=K(t,st.id,!1).length,$t={};e?(Object.keys(qt).forEach(function(Sr){var jr=B[Sr].node[a];$t[jr]?$t[jr].push(qt[Sr]):$t[jr]=[qt[Sr]]}),Object.keys($t).forEach(function(Sr){$t[Sr].sort(function(jr,_r){return jr-_r})})):$t=Vt;for(var Gt=function(Sr){var jr=Dt[Sr],_r=jr.nodes[0],un={},hr={};jr.nodes.forEach(function(vn,$n){hr[vn.id]={idx:$n,node:vn,degree:0};var _n=vn[a];un[_n]?un[_n]++:un[_n]=1});var qr=[],en={};n.edges.forEach(function(vn){hr[vn.source]&&hr[vn.target]&&(qr.push(vn),en[vn[s]]?en[vn[s]]++:en[vn[s]]=1,hr[vn.source].degree++,hr[vn.target].degree++)});for(var Yr=Object.keys(q).length,Cr=!1,Tr=0;Tr<Yr;Tr++){var Zr=Object.keys(q)[Tr];if(!en[Zr]||en[Zr]<q[Zr].length){Cr=!0;break}}if(Cr)return Dt.splice(Sr,1),"continue";var Tn=qr.length;if(Tn<t.edges.length)return Dt.splice(Sr,1),"break";var tn=!1,bi=function(vn){var $n=qr[vn],_n=$n[s],Pi=q[_n];if(!Pi||!Pi.length)return en[_n]--,Pi&&en[_n]<Pi.length?(tn=!0,"break"):(qr.splice(vn,1),hr[$n.source].degree--,hr[$n.target].degree--,"continue");var po=hr[$n.source].node[a],xi=hr[$n.target].node[a],wo=!1;return Pi.forEach(function(Ca){var Ta=B[Ca.source].node,_o=B[Ca.target].node;Ta[a]===po&&_o[a]===xi&&(wo=!0),e||Ta[a]!==xi||_o[a]!==po||(wo=!0)}),wo?void 0:(en[_n]--,Pi&&en[_n]<Pi.length?(tn=!0,"break"):(qr.splice(vn,1),hr[$n.source].degree--,hr[$n.target].degree--,"continue"))};for(Tr=Tn-1;Tr>=0&&bi(Tr)!=="break";Tr--);if(tn)return Dt.splice(Sr,1),"continue";jr.edges=qr;var cn=K(jr,jr.nodes[0].id,!1).length;if(Object.keys(cn).reverse().forEach(function(vn){if(vn!==jr.nodes[0].id&&!tn){if(cn[vn]===1/0){var $n=hr[vn].node[a];if(un[$n]--,un[$n]<U[$n].length)return void(tn=!0);var _n=jr.nodes.indexOf(hr[vn].node);return jr.nodes.splice(_n,1),void(hr[vn]=void 0)}var Pi=I[vn].node[a];if(!$t[Pi]||!$t[Pi].length||cn[vn]>$t[Pi][$t[Pi].length-1]){if($n=hr[vn].node[a],un[$n]--,un[$n]<U[$n].length)return void(tn=!0);_n=jr.nodes.indexOf(hr[vn].node),jr.nodes.splice(_n,1),hr[vn]=void 0}}}),tn)return Dt.splice(Sr,1),"continue";for(var Vr=!0,An=0;Vr&&!tn;){if(Vr=!1,hr[_r.id].degree<B[st.id].degree){tn=!0;break}if(un[_r[a]]<U[_r[a]].length){tn=!0;break}for(var Zn=jr.nodes.length-1;Zn>=0;Zn--){var En=jr.nodes[Zn],Si=hr[En.id].degree,Wo=En[a];if(Si<Pt[Wo]){if(un[En[a]]--,un[En[a]]<U[En[a]].length){tn=!0;break}jr.nodes.splice(Zn,1),hr[En.id]=void 0,Vr=!0}}if(tn||!Vr&&An!==0)break;for(var xo=(Tn=qr.length)-1;xo>=0;xo--){var ro=qr[xo];if(!hr[ro.source]||!hr[ro.target]){qr.splice(xo,1);var wr=ro[s];if(en[wr]--,hr[ro.source]&&hr[ro.source].degree--,hr[ro.target]&&hr[ro.target].degree--,q[wr]&&en[wr]<q[wr].length){tn=!0;break}Vr=!0}}An++}return tn||tn||jr.nodes.length<t.nodes.length||qr.length<t.edges.length?(Dt.splice(Sr,1),"continue"):void 0},lr=Dt.length-1;lr>=0&&Gt(lr)!=="break";lr--);var Lr=Dt.length,wn=function(Sr){var jr=Dt[Sr],_r={};jr.edges.forEach(function(qr){var en=qr.source+"-"+qr.target+"-"+qr.label;_r[en]?_r[en]++:_r[en]=1});for(var un=function(qr){var en=Dt[qr],Yr={};en.edges.forEach(function(Tr){var Zr=Tr.source+"-"+Tr.target+"-"+Tr.label;Yr[Zr]?Yr[Zr]++:Yr[Zr]=1});var Cr=!0;Object.keys(Yr).length!==Object.keys(_r).length?Cr=!1:Object.keys(_r).forEach(function(Tr){Yr[Tr]!==_r[Tr]&&(Cr=!1)}),Cr&&Dt.splice(qr,1)},hr=Lr-1;hr>Sr;hr--)un(hr);Lr=Dt.length};for(lr=0;lr<=Lr-1;lr++)wn(lr);return Dt}}},dr=function(){function n(t){t===void 0&&(t=10),this.linkedList=new se,this.maxStep=t}return Object.defineProperty(n.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},n.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},n.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},n.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},n.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},n.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},n}(),Br=Y,Rr={getAdjMatrix:z,breadthFirstSearch:Ie,connectedComponent:te,getDegree:V,getInDegree:ie,getOutDegree:we,detectCycle:Y,detectDirectedCycle:Br,detectAllCycles:ee,detectAllDirectedCycle:J,detectAllUndirectedCycle:oe,depthFirstSearch:ke,dijkstra:K,findAllPath:le,findShortestPath:ne,floydWarshall:ue,labelPropagation:Q,louvain:Se,minimumSpanningTree:Le,pageRank:Ke,getNeighbors:xe,Stack:dr,GADDI:xr},pn=L.a.transform,zr=function(n){return function(t,e){return t[n]-e[n]}},Nr=function(n,t,e){return n>=t&&n<=e},Dr=function(n,t,e,r){var i=e.x-n.x,a=e.y-n.y,s=t.x-n.x,u=t.y-n.y,l=r.x-e.x,h=r.y-e.y,v=s*h-u*l,k=1/v;if(v*v>1e-4*(s*s+u*u)*(l*l+h*h)){var T=(i*h-a*l)*k,I=(i*u-a*s)*k;return Nr(T,0,1)&&Nr(I,0,1)?{x:n.x+T*s,y:n.y+T*u}:null}return null},rn=function(n,t){var e=n.x,r=n.y,i=n.width,a=n.height,s=[],u={x:e+i/2,y:r+a/2};s.push({x:e,y:r}),s.push({x:e+i,y:r}),s.push({x:e+i,y:r+a}),s.push({x:e,y:r+a}),s.push({x:e,y:r});for(var l=null,h=1;h<s.length&&!(l=Dr(s[h-1],s[h],u,t));h++);return l},Ir=function(n,t){var e=n.x,r=n.y,i=n.r,a=t.x-e,s=t.y-r;if(Math.sqrt(a*a+s*s)<i)return null;var u=Math.sign(a),l=Math.sign(s),h=Math.atan(s/a);return{x:e+Math.abs(i*Math.cos(h))*u,y:r+Math.abs(i*Math.sin(h))*l}},On=function(n,t){var e=n.rx,r=n.ry,i=n.x,a=n.y,s=t.x-i,u=t.y-a,l=Math.atan2(u/r,s/e);return l<0&&(l+=2*Math.PI),{x:i+e*Math.cos(l),y:a+r*Math.sin(l)}},In=function(n,t,e){e===void 0&&(e=1);var r=[n.x,n.y,e];return t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]),L.d.transformMat3(r,r,t),{x:r[0],y:r[1]}},Dn=function(n,t,e){e===void 0&&(e=1),t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]);var r=L.b.invert([1,0,0,0,1,0,0,0,1],t);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[n.x,n.y,e];return L.d.transformMat3(i,i,r),{x:i[0],y:i[1]}},Rn=function(n,t,e){var r=n.x-t.x,i=n.y-t.y,a=n.x-e.x,s=n.y-e.y,u=(n.x*n.x-t.x*t.x-t.y*t.y+n.y*n.y)/2,l=(n.x*n.x-e.x*e.x-e.y*e.y+n.y*n.y)/2,h=i*a-r*s;return{x:-(s*u-i*l)/h,y:-(r*l-a*u)/h}},gn=function(n,t){var e=n.x-t.x,r=n.y-t.y;return Math.sqrt(e*e+r*r)},Er=function(n,t){var e=[];return n.forEach(function(r){var i=[];r.forEach(function(a){i.push(a*t)}),e.push(i)}),e},ln=function(n){for(var t=[],e=n.length,r=0;r<e;r+=1){t[r]=[];for(var i=0;i<e;i+=1)r===i?t[r][i]=0:n[r][i]!==0&&n[r][i]?t[r][i]=n[r][i]:t[r][i]=1/0}for(var a=0;a<e;a+=1)for(r=0;r<e;r+=1)for(i=0;i<e;i+=1)t[r][i]>t[r][a]+t[a][i]&&(t[r][i]=t[r][a]+t[a][i]);return t},yn=function(n,t){var e=n.nodes,r=n.edges,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){a[s.id]=u,i.push([])}),r&&r.forEach(function(s){var u=s.source,l=s.target,h=a[u],v=a[l];i[h][v]=1,t||(i[v][h]=1)}),i},mn=function(n,t){n.translate(t.x,t.y)},Qn=function(n,t,e,r){r===void 0&&(r={duration:500});var i=n.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var a=n.getCanvasBBox(),s=t.x-a.minX,u=t.y-a.minY;if(e){var l=s*i[0],h=u*i[4],v=0,k=0,T=0,I=0;n.animate(function(F){return i=pn(i,[["t",(T=l*F)-v,(I=h*F)-k]]),v=T,k=I,{matrix:i}},r)}else{var j=pn(i,[["t",s,u]]);n.setMatrix(j)}},Un=function(n,t){var e=n.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var r=t;Object(p.isArray)(t)||(r=[t,t]),Object(p.isArray)(t)&&t.length===1&&(r=[t[0],t[0]]),e=pn(e,[["s",r[0],r[1]]]),n.setMatrix(e)},ri=function(n,t){var e=n.getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]),e=pn(e,[["r",t]]),n.setMatrix(e)},Ei=function(n,t,e){for(var r=[],i=0;i<n;i++)r[i]=0;return e.forEach(function(a){a.source&&(r[t[a.source]]+=1),a.target&&(r[t[a.target]]+=1)}),r};function ni(n,t,e){return(e[0]-n[0])*(t[1]-n[1])==(t[0]-n[0])*(e[1]-n[1])&&Math.min(n[0],t[0])<=e[0]&&e[0]<=Math.max(n[0],t[0])&&Math.min(n[1],t[1])<=e[1]&&e[1]<=Math.max(n[1],t[1])}var Bn=function(n,t,e){var r=!1,i=n.length;function a(h){return Math.abs(h)<1e-6?0:h<0?-1:1}if(i<=2)return!1;for(var s=0;s<i;s++){var u=n[s],l=n[(s+1)%i];if(ni(u,l,[t,e]))return!0;a(u[1]-e)>0!=a(l[1]-e)>0&&a(t-(e-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(r=!r)}return r},wi=function(n,t){return!(t.minX>n.maxX||t.maxX<n.minX||t.minY>n.maxY||t.maxY<n.minY)},Oi=function(n,t){var e=function(v){var k=v.map(function(I){return I[0]}),T=v.map(function(I){return I[1]});return{minX:Math.min.apply(null,k),maxX:Math.max.apply(null,k),minY:Math.min.apply(null,T),maxY:Math.max.apply(null,T)}},r=function(v){for(var k=[],T=v.length,I=0;I<T-1;I++){var j=v[I],F=v[I+1];k.push({from:{x:j[0],y:j[1]},to:{x:F[0],y:F[1]}})}if(k.length>1){var B=v[0],U=v[T-1];k.push({from:{x:U[0],y:U[1]},to:{x:B[0],y:B[1]}})}return k};if(n.length<2||t.length<2)return!1;var i=e(n),a=e(t);if(!wi(i,a))return!1;var s=!1;if(Object(p.each)(t,function(v){if(Bn(n,v[0],v[1]))return s=!0,!1}),s||(Object(p.each)(n,function(v){if(Bn(t,v[0],v[1]))return s=!0,!1}),s))return!0;var u=r(n),l=r(t),h=!1;return Object(p.each)(l,function(v){if(function(k,T){var I=!1;return Object(p.each)(k,function(j){if(Dr(j.from,j.to,T.from,T.to))return I=!0,!1}),I}(u,v))return h=!0,!1}),h},Wn=function(){function n(t,e,r,i){this.x1=t,this.y1=e,this.x2=r,this.y2=i}return n.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),i=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:r,maxY:i,width:r-t,height:i-e}},n}(),ii=function(n,t){return{top:[n.minX,n.minY,n.maxX,n.minY],left:[n.minX,n.minY,n.minX,n.maxY],bottom:[n.minX,n.maxY,n.maxX,n.maxY],right:[n.maxX,n.minY,n.maxX,n.maxY]}[t]},Jn=function(n,t){var e=(t.x2-t.x1)*(n.y1-t.y1)-(t.y2-t.y1)*(n.x1-t.x1),r=(n.x2-n.x1)*(n.y1-t.y1)-(n.y2-n.y1)*(n.x1-t.x1),i=(t.y2-t.y1)*(n.x2-n.x1)-(t.x2-t.x1)*(n.y2-n.y1);if(i){var a=e/i,s=r/i;if(a>=0&&a<=1&&s>=0&&s<=1)return a}return Number.POSITIVE_INFINITY},hi=function(n,t){for(var e=["top","left","bottom","right"],r=n.getBBox(),i=0,a=[],s=0;s<4;s++){var u=ii(r,e[s]),l=u[0],h=u[1],v=u[2],k=u[3];a[s]=Dr({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:l,y:h},{x:v,y:k}),a[s]&&(i+=1)}return[a,i]},Vn=function(n,t){for(var e=["top","left","bottom","right"],r=n.getBBox(),i=Number.POSITIVE_INFINITY,a=0,s=0;s<4;s++){var u=ii(r,e[s]),l=u[0],h=u[1],v=u[2],k=u[3],T=Jn(t,new Wn(l,h,v,k));(T=Math.abs(T-.5))>=0&&T<=1&&(a+=1,i=T<i?T:i)}return a===0?-1:i},oi=function(n){var t=0,e=0;if(n.length>0){for(var r=0,i=n;r<i.length;r++){var a=i[r];t+=a.x,e+=a.y}t/=n.length,e/=n.length}return{x:t,y:e}},di=function(n,t){return Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)},_i=function(n,t){var e,r=t.x1,i=t.y1,a=t.x2-r,s=t.y2-i,u=n.x-r,l=n.y-i,h=u*a+l*s;e=h<=0||(h=(u=a-u)*a+(l=s-l)*s)<=0?0:h*h/(a*a+s*s);var v=u*u+l*l-e;return v<0&&(v=0),v},Xn=function(n,t,e){return e===void 0&&(e=.001),Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)<Math.pow(e,2)},Yn=function(n,t){var e=n.x<t.x,r=n.x>t.x+t.width,i=n.y>t.y+t.height,a=n.y<t.y;if(!(e||r||i||a))return 0;if(i&&!e&&!r)return Math.pow(t.y+t.height-n.y,2);if(a&&!e&&!r)return Math.pow(n.y-t.y,2);if(e&&!i&&!a)return Math.pow(t.x-n.x,2);if(r&&!i&&!a)return Math.pow(t.x+t.width-n.x,2);var s=Math.min(Math.abs(t.x-n.x),Math.abs(t.x+t.width-n.x)),u=Math.min(Math.abs(t.y-n.y),Math.abs(t.y+t.height-n.y));return s*s+u*u},Mi=function(n,t){var e=n[0],r=n[1],i=n[2],a=n[3],s=t.x,u=t.y,l=[i-e,a-r];if(L.c.exactEquals(l,[0,0]))return NaN;var h=[-l[1],l[0]];L.c.normalize(h,h);var v=[s-e,u-r];return Math.abs(L.c.dot(v,h))},Bi="rgb(253, 253, 253)",Hn="rgb(95, 149, 255)",io="rgb(95, 149, 255)",ci="rgb(247, 250, 255)",li="rgb(95, 149, 255)",oo="rgb(224, 224, 224)",Ki="rgb(95, 149, 255)",Zi="rgb(224, 224, 224)",go="rgb(95, 149, 255)",nr={version:"0.3.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Hn,fill:"rgb(239, 244, 255)"},size:20,color:Hn,linkPoints:{size:8,lineWidth:1,fill:ci,stroke:io}},nodeStateStyles:{active:{fill:ci,stroke:io,lineWidth:2,shadowColor:Hn,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:li,lineWidth:4,shadowColor:li,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:oo,lineAppendWidth:2},color:oo},edgeStateStyles:{active:{stroke:"rgb(95, 149, 255)",lineWidth:1},selected:{stroke:Ki,lineWidth:2,shadowColor:Ki,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"rgb(95, 149, 255)",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Bi,lineWidth:1,stroke:Zi,r:5,width:20,height:10},size:[20,5],color:Zi,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:"rgb(95, 149, 255)",lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:go,lineWidth:2,fill:Bi,shadowColor:go,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:Bi,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:Bi,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]}},We={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ne=Math.PI,He=Math.sin,ft=Math.cos,Ct=He(Ne/8),Ht=ft(Ne/8),vr=function(n,t){var e=n.getBBox(),r={x:e.minX,y:e.minY},i={x:e.maxX,y:e.maxY};if(t){var a=t.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r=In(r,a),i=In(i,a)}var s=r.x,u=r.y,l=i.x,h=i.y;return{x:s,y:u,minX:s,minY:u,maxX:l,maxY:h,width:l-s,height:h-u}},Be=function(n){var t=n.sourceNode||n.targetNode,e=t.get("group").getMatrix();e||(e=[1,0,0,0,1,0,0,0,1]);var r=t.getKeyShape().getBBox(),i=n.loopCfg||{},a=i.dist||2*Math.max(r.width,r.height),s=i.position||nr.defaultLoopPosition,u=[e[6],e[7]],l=[n.startPoint.x,n.startPoint.y],h=[n.endPoint.x,n.endPoint.y],v=r.height/2,k=r.height/2,T=v*Ct,I=v*Ht,j=k*Ct,F=k*Ht;if(l[0]===h[0]&&l[1]===h[1]){switch(s){case"top":l=[u[0]-T,u[1]-I],h=[u[0]+j,u[1]-F];break;case"top-right":v=r.height/2,k=r.width/2,l=[u[0]+(T=v*Ct),u[1]-(I=v*Ht)],h=[u[0]+(F=k*Ht),u[1]-(j=k*Ct)];break;case"right":v=r.width/2,k=r.width/2,l=[u[0]+(I=v*Ht),u[1]-(T=v*Ct)],h=[u[0]+(F=k*Ht),u[1]+(j=k*Ct)];break;case"bottom-right":v=r.width/2,k=r.height/2,l=[u[0]+(I=v*Ht),u[1]+(T=v*Ct)],h=[u[0]+(j=k*Ct),u[1]+(F=k*Ht)];break;case"bottom":v=r.height/2,k=r.height/2,l=[u[0]+(T=v*Ct),u[1]+(I=v*Ht)],h=[u[0]-(j=k*Ct),u[1]+(F=k*Ht)];break;case"bottom-left":v=r.height/2,k=r.width/2,l=[u[0]-(T=v*Ct),u[1]+(I=v*Ht)],h=[u[0]-(F=k*Ht),u[1]+(j=k*Ct)];break;case"left":v=r.width/2,k=r.width/2,l=[u[0]-(I=v*Ht),u[1]+(T=v*Ct)],h=[u[0]-(F=k*Ht),u[1]-(j=k*Ct)];break;case"top-left":v=r.width/2,k=r.height/2,l=[u[0]-(I=v*Ht),u[1]-(T=v*Ct)],h=[u[0]-(j=k*Ct),u[1]-(F=k*Ht)];break;default:v=r.width/2,k=r.width/2,l=[u[0]-(T=v*Ct),u[1]-(I=v*Ht)],h=[u[0]+(j=k*Ct),u[1]-(F=k*Ht)]}if(i.clockwise===!1){var B=[l[0],l[1]];l=[h[0],h[1]],h=[B[0],B[1]]}}var U=[l[0]-u[0],l[1]-u[1]],q=(v+a)/v,$=(k+a)/k;i.clockwise===!1&&(q=(k+a)/k,$=(v+a)/v);var ve=L.c.scale([0,0],U,q),de=[u[0]+ve[0],u[1]+ve[1]],me=[h[0]-u[0],h[1]-u[1]],Te=L.c.scale([0,0],me,$),Oe=[u[0]+Te[0],u[1]+Te[1]];return n.startPoint={x:l[0],y:l[1]},n.endPoint={x:h[0],y:h[1]},n.controlPoints=[{x:de[0],y:de[1]},{x:Oe[0],y:Oe[1]}],n},ut=function(n,t,e,r,i){var a=[],s=n==null?void 0:n.getPoint(t);if(!s)return{x:0,y:0,angle:0};if(t<1e-4)a=n.getStartTangent().reverse();else if(t>.9999)a=n.getEndTangent();else{var u=n==null?void 0:n.getPoint(t+1e-4);a.push([s.x,s.y]),a.push([u.x,u.y])}var l=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(l<0&&(l+=2*Ne),e&&(s.x+=ft(l)*e,s.y+=He(l)*e),r){var h=l-Ne/2;l>.5*Ne&&l<1.5*Ne&&(h-=Ne),s.x+=ft(h)*r,s.y+=He(h)*r}var v={x:s.x,y:s.y,angle:l};return i?(l>.5*Ne&&l<1.5*Ne&&(l-=Ne),Object(b.__assign)({rotate:l},v)):v},bt=function n(t,e){if(e(t)===!1)return!1;if(t&&t.children){for(var r=t.children.length-1;r>=0;r--)if(!n(t.children[r],e))return!1}return!0},Ft=function(n,t){typeof t=="function"&&bt(n,t)},_e=function(n,t){typeof t=="function"&&function e(r,i){if(r&&r.children){for(var a=r.children.length-1;a>=0;a--)if(!e(r.children[a],i))return}return i(r)!==!1}(n,t)},ze=function(n,t){return t*(We[n]||1)},Qe=function(n,t){var e=0,r=new RegExp("[\u4E00-\u9FA5]+");return n.split("").forEach(function(i){r.test(i)?e+=t:e+=ze(i,t)}),[e,t]},lt=function(n,t){var e=[],r={},i={};n.forEach(function(u){i[u.id]=u}),n.forEach(function(u,l){var h=Object(p.clone)(u);h.itemType="combo",h.children=void 0,h.parentId===h.id?(console.warn("The parentId for combo "+h.id+" can not be the same as the combo's id"),delete h.parentId):h.parentId&&!i[h.parentId]&&(console.warn("The parent combo for combo "+h.id+" does not exist!"),delete h.parentId);var v=r[h.id];if(v){if(h.children=v.children,r[h.id]=h,!(v=h).parentId)return void e.push(v);var k=r[v.parentId];if(k)k.children?k.children.push(h):k.children=[h];else{var T={id:v.parentId,children:[v]};r[v.parentId]=T,r[h.id]=h}}else if(Object(p.isString)(u.parentId)){var I=r[u.parentId];if(I)I.children?I.children.push(h):I.children=[h],r[h.id]=h;else{var j={id:u.parentId,children:[h]};r[j.id]=j,r[h.id]=h}}else e.push(h),r[h.id]=h});var a={};(t||[]).forEach(function(u){a[u.id]=u;var l=r[u.comboId];if(l){var h={id:u.id,comboId:u.comboId};l.children?l.children.push(h):l.children=[h],h.itemType="node",r[u.id]=h}});var s=0;return e.forEach(function(u){u.depth=s+10,bt(u,function(l){var h,v=r[l.id].itemType;h=v==="node"?r[l.comboId]:r[l.parentId],l.depth=h&&v==="node"?s+1:s+10,s<l.depth&&(s=l.depth);var k=a[l.id];return k&&(k.depth=l.depth),!0})}),e},vt=function(n,t,e){var r,i=n,a={root:{children:n}},s=!1,u="root";(n||[]).forEach(function(T){if(!s)return T.id===t?(r=T,T.itemType==="combo"?r.parentId=e:r.comboId=e,void(s=!0)):void Ft(T,function(I){return a[I.id]={children:I.children},i=a[I.parentId||I.comboId||"root"].children,!I||!I.removed&&t!==I.id||!i||(u=I.parentId||I.comboId||"root",r=I,I.itemType==="combo"?r.parentId=e:r.comboId=e,s=!0,!1)})});var l=(i=a[u].children)?i.indexOf(r):-1;if(l>-1&&i.splice(l,1),s||(r={id:t,itemType:"node",comboId:e},a[t]={children:void 0}),t){var h=!1;if(e){var v=0;(n||[]).forEach(function(T){h||Ft(T,function(I){return e!==I.id||(h=!0,I.children?I.children.push(r):I.children=[r],v=I.depth,r.itemType==="node"?r.depth=v+2:r.depth=v+1,!1)})})}else e&&h||r.itemType==="node"||n.push(r);var k=r.depth;Ft(r,function(T){return T.itemType==="node"?k+=2:k+=1,T.depth=k,!0})}return n},wt=function(n,t){var e={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return n&&n.length!==0&&(n.forEach(function(r){var i=t.findById(r.id);if(i&&i.isVisible()){i.set("bboxCanvasCache",void 0);var a=i.getCanvasBBox();a.x&&e.minX>a.minX&&(e.minX=a.minX),a.y&&e.minY>a.minY&&(e.minY=a.minY),a.x&&e.maxX<a.maxX&&(e.maxX=a.maxX),a.y&&e.maxY<a.maxY&&(e.maxY=a.maxY)}}),e.x=(e.minX+e.maxX)/2,e.y=(e.minY+e.maxY)/2,e.width=e.maxX-e.minX,e.height=e.maxY-e.minY,e.centerX=(e.minX+e.maxX)/2,e.centerY=(e.minY+e.maxY)/2,Object.keys(e).forEach(function(r){e[r]!==1/0&&e[r]!==-1/0||(e[r]=void 0)})),e},Lt=function(n){var t=Object(p.isNumber)(n.x)||Object(p.isNumber)(n.y)||n.type||n.anchorPoints||n.size;return n.style&&(t=t||Object(p.isNumber)(n.style.r)||Object(p.isNumber)(n.style.width)||Object(p.isNumber)(n.style.height)||Object(p.isNumber)(n.style.rx)||Object(p.isNumber)(n.style.ry)),t},Wt=function(n){var t={};return Object.keys(n).forEach(function(e){var r=n[e];if(Object(p.isObject)(r)){var i={};Object.keys(r).forEach(function(a){var s=r[a];(a!=="img"||Object(p.isString)(s))&&(i[a]=Object(p.clone)(s))}),t[e]=i}else t[e]=Object(p.clone)(r)}),t},er=function(n){if(!n)return console.error("G6 Error Tips: the data must be defined"),!1;var t=n.nodes,e=n.edges,r=n.combos,i=r===void 0?[]:r;if(!t&&!e){var a=!0;return Ft(n,function(k){return!!Object(p.isString)(k.id)||(a=!1,!1)}),a}var s=(t||[]).find(function(k){return!Object(p.isString)(k.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c"+s.id+"%c is not a string.","font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(k){return k.id}),l=i.map(function(k){return k.id}),h=Object(b.__spreadArray)(Object(b.__spreadArray)([],u),l),v=(e||[]).find(function(k){return!h.includes(k.source)||!h.includes(k.target)});return!v||(console.warn("G6 Warning Tips: The source %c"+v.source+"%c or the target %c"+v.target+"%c of the edge do not exist in the nodes or combos.","font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)},tr=function(){function n(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return n.prototype.formatModes=function(){var t=this.modes;Object(p.each)(t,function(e){Object(p.each)(e,function(r,i){Object(p.isString)(r)&&(e[i]={type:r})})})},n.prototype.setBehaviors=function(t){var e,r=this.graph,i=this.modes[t],a=[];Object(p.each)(i||[],function(s){var u=C.getBehavior(s.type||s);u&&(e=new u(s))&&(e.bind(r),a.push(e))}),this.currentBehaves=a},n.mergeBehaviors=function(t,e){return Object(p.each)(e,function(r){t.indexOf(r)<0&&(Object(p.isString)(r)&&(r={type:r}),t.push(r))}),t},n.filterBehaviors=function(t,e){var r=[];return t.forEach(function(i){var a="";a=Object(p.isString)(i)?i:i.type,e.indexOf(a)<0&&r.push(i)}),r},n.prototype.setMode=function(t){var e=this.modes,r=this.graph,i=t;e[i]&&(r.emit("beforemodechange",{mode:t}),Object(p.each)(this.currentBehaves,function(a){a.delegate&&a.delegate.remove(),a.unbind(r)}),this.setBehaviors(i),r.emit("aftermodechange",{mode:t}),this.mode=t)},n.prototype.getMode=function(){return this.mode},n.prototype.manipulateBehaviors=function(t,e,r){var i,a=this;if(i=Object(p.isArray)(t)?t:[t],Object(p.isArray)(e))return Object(p.each)(e,function(u){a.modes[u]?a.modes[u]=r?n.mergeBehaviors(a.modes[u]||[],i):n.filterBehaviors(a.modes[u]||[],i):r&&(a.modes[u]=i)}),this;var s=e;return e||(s=this.mode),this.modes[s]||r&&(this.modes[s]=i),this.modes[s]=r?n.mergeBehaviors(this.modes[s]||[],i):n.filterBehaviors(this.modes[s]||[],i),this.setMode(this.mode),this},n.prototype.updateBehavior=function(t,e,r){Object(p.isString)(t)&&(t={type:t});var i=[];if(r&&r!==this.mode&&r!=="default"){if(!(i=this.modes[r])||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;var a=i.length;for(u=0;u<a;u++){if((l=i[u]).type===t.type||l===t.type)return l===t.type&&(l={type:l}),Object.assign(l,e),i[u]=l,this;u===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(i=this.currentBehaves)||!i.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var s=i.length,u=0;u<s;u++){var l;if((l=i[u]).type===t.type)return l.updateCfg(e),this;u===s-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},n.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},n}(),ar=function(n){function t(e,r){var i=n.call(this,e,r)||this;return i.item=r.item,i.canvasX=r.canvasX,i.canvasY=r.canvasY,i.wheelDelta=r.wheelDelta,i.detail=r.detail,i}return Object(b.__extends)(t,n),t}(o(21).Event),pr=function(n){return n+"-"+Math.random()+Date.now()},Ur=function(n){var t=0,e=0,r=0,i=0;return Object(p.isNumber)(n)?t=e=r=i=n:Object(p.isString)(n)?t=e=r=i=parseInt(n,10):Object(p.isArray)(n)&&(t=n[0],r=Object(p.isNil)(n[1])?n[0]:n[1],i=Object(p.isNil)(n[2])?n[0]:n[2],e=Object(p.isNil)(n[3])?r:n[3]),[t,r,i,e]},Gr=function(n){var t=new ar(n.type,n);return t.clientX=n.clientX,t.clientY=n.clientY,t.x=n.x,t.y=n.y,t.target=n.target,t.currentTarget=n.currentTarget,t.bubbles=!0,t.item=n.item,t},$r=function(n){if(!n)return!1;for(var t=[1,0,0,0,1,0,0,0,1],e=0;e<9;e++)if(n[e]!==t[e])return!0;return!1},Kr=function(n){return Number.isNaN(Number(n))},jn=function(n){for(var t=1/0,e=-1/0,r=1/0,i=-1/0,a=0;a<n.length;a++){var s=n[a].getBBox(),u=s.minX,l=s.minY,h=s.maxX,v=s.maxY;u<t&&(t=u),l<r&&(r=l),h>e&&(e=h),v>i&&(i=v)}return{x:Math.floor(t),y:Math.floor(r),width:Math.ceil(e)-Math.floor(t),height:Math.ceil(i)-Math.floor(r),minX:t,minY:r,maxX:e,maxY:i}},Cn=function(n,t,e,r,i){t===void 0&&(t=15),e===void 0&&(e="quadratic"),r===void 0&&(r=void 0),i===void 0&&(i=void 0);for(var a=n.length,s=2*t,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},h=[],v={},k=0;k<a;k++){var T=n[k],I=T.source,j=T.target,F=I+"-"+j;if(!h[k]){l[F]||(l[F]=[]),h[k]=!0,l[F].push(T);for(var B=0;B<a;B++)if(k!==B){var U=n[B],q=U.source,$=U.target;h[B]||(I===$&&j===q?(l[F].push(U),h[B]=!0,v[q+"|"+$+"|"+(l[F].length-1)]=!0):I===q&&j===$&&(l[F].push(U),h[B]=!0))}}}for(var ve in l)for(var de=l[ve],me=de.length,Te=0;Te<me;Te++){var Oe=de[Te];if(Oe.source!==Oe.target)if(me===1&&r&&Oe.source!==Oe.target)Oe.type=r;else{Oe.type=e;var Pe=(Te%2==0?1:-1)*(v[Oe.source+"|"+Oe.target+"|"+Te]?-1:1);Oe.curveOffset=me%2==1?Pe*Math.ceil(Te/2)*s:Pe*(Math.floor(Te/2)*s+t)}else i&&(Oe.type=i),Oe.loopCfg={position:u[Te%8],dist:20*Math.floor(Te/8)+50}}return n},qn=function(){function n(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return n.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,r=this.graph.get("width"),i=e.get("height");return{x:(r-t[1]-t[3])/2+t[3],y:(i-t[0]-t[2])/2+t[0]}},n.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var r=e.getCanvasBBox();if(r.width!==0&&r.height!==0){var i=this.getViewCenter(),a=r.x+r.width/2,s=r.y+r.height/2;t.translate(i.x-a,i.y-s)}},n.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),r=t.get("width"),i=t.get("height"),a=t.get("group");a.resetMatrix();var s=a.getCanvasBBox();if(s.width!==0&&s.height!==0){var u=this.getViewCenter(),l=s.x+s.width/2,h=s.y+s.height/2;t.translate(u.x-l,u.y-h);var v=(r-e[1]-e[3])/s.width,k=(i-e[0]-e[2])/s.height,T=v;v>k&&(T=k),t.zoom(T,u)}},n.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return Ur(t)},n.prototype.focusPoint=function(t,e,r){var i=this,a=this.getViewCenter(),s=this.getPointByCanvas(a.x,a.y),u=this.graph.get("group").getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),e){var l=(s.x-t.x)*u[0],h=(s.y-t.y)*u[4],v=0,k=0,T=0,I=0;this.graph.get("canvas").animate(function(j){T=l*j,I=h*j,i.graph.translate(T-v,I-k),v=T,k=I},Object(b.__assign)({},r))}else this.graph.translate((s.x-t.x)*u[0],(s.y-t.y)*u[4])},n.prototype.getPointByCanvas=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Dn({x:t,y:e},r)},n.prototype.getPointByClient=function(t,e){var r=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(r.x,r.y)},n.prototype.getClientByPoint=function(t,e){var r=this.graph.get("canvas"),i=this.getCanvasByPoint(t,e),a=r.getClientByPoint(i.x,i.y);return{x:a.x,y:a.y}},n.prototype.getCanvasByPoint=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),In({x:t,y:e},r)},n.prototype.focus=function(t,e,r){if(Object(p.isString)(t)&&(t=this.graph.findById(t)),t){var i=0,a=0;if(t.getType&&t.getType()==="edge"){var s=t.getSource().get("group").getMatrix(),u=t.getTarget().get("group").getMatrix();s&&u?(i=(s[6]+u[6])/2,a=(s[7]+u[7])/2):(s||u)&&(i=s?s[6]:u[6],a=s?s[7]:u[7])}else{var l=t.get("group").getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),i=l[6],a=l[7]}this.focusPoint({x:i,y:a},e,r)}},n.prototype.changeSize=function(t,e){var r=this.graph;if(!Object(p.isNumber)(t)||!Object(p.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:t,height:e}),r.get("canvas").changeSize(t,e),r.get("plugins").forEach(function(i){i.get("gridContainer")&&i.positionInit()})},n.prototype.destroy=function(){this.graph=null,this.destroyed=!1},n}();function Qr(n){return(Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Mn(n){if(typeof n!="string")return n;var t=function(de){if(typeof de!="string")return de;try{return JSON.parse(de.trim())}catch(me){return de.trim()}},e=t(n);if(typeof e!="string")return e;for(var r=function(de){return de[de.length-1]},i=n.trim(),a=[],s=[],u=function(){for(var de=[],me=0;me<arguments.length;me++)de[me]=arguments[me];return de.some(function(Te){return r(s)===Te})},l=null,h=0,v="";h<i.length;){var k=i[h],T=u('"',"'");if(T||k.trim()){var I=i[h-1]==="\\",j=u("}"),F=u("]"),B=u(","),U=r(a);if(T)if(r(s)!==k||I)v+=k;else{s.pop();var q=t(v);U.push(q),l=q,v=""}else if(F&&k===",")v&&(U.push(t(v)),v="");else if(j&&k===":")s.push(","),v&&(U.push(v),v="");else if(B&&k===",")v&&(U.push(t(v)),v=""),s.pop();else if(k==="}"&&(j||B)){v&&(U.push(t(v)),v=""),B&&s.pop();for(var $={},ve=1;ve<U.length;ve+=2)$[U[ve-1]]=U[ve];a.pop(),a.length&&r(a).push($),s.pop(),l=$}else k==="]"&&F?(v&&(U.push(t(v)),v=""),a.pop(),a.length&&r(a).push(U),s.pop(),l=U):k==="{"?(a.push([]),s.push("}")):k==="["?(a.push([]),s.push("]")):k==='"'?s.push('"'):k==="'"?s.push("'"):v+=k;h+=1}else h+=1}return l||v}function ai(n,t){var e;t===void 0&&(t={x:0,y:0});var r=Object(b.__assign)({x:0,y:0,width:0,height:0},t);if(!((e=n.children)===null||e===void 0)&&e.length){var i=n.attrs,a=i===void 0?{}:i,s=a.marginTop,u=Object(b.__assign)({},t);s&&(u.y+=s);for(var l=0;l<n.children.length;l++){n.children[l].attrs.key=(a.key||"root")+" -"+l+" ";var h=ai(n.children[l],u);if(h.bbox){var v=h.bbox;h.attrs.next==="inline"?u.x+=h.bbox.width:u.y+=h.bbox.height,v.width+v.x>r.width&&(r.width=v.width+v.x),v.height+v.y>r.height&&(r.height=v.height+v.y)}}}return n.bbox=function(k,T,I){var j,F,B=k.attrs,U=B===void 0?{}:B,q={x:T.x||0,y:T.y||0,width:I.width||0,height:I.height||0};switch(k.type){case"maker":case"circle":U.r&&(F=2*U.r,j=2*U.r);break;case"text":U.text&&(F=Qe(U.text,U.fontSize||12)[0],j=16,q.y+=j,q.height=j,q.width=F,k.attrs=Object(b.__assign)({fontSize:12,fill:"#000"},U));break;default:U.width&&(F=U.width),U.height&&(j=U.height)}return j>=0&&(q.height=j),F>=0&&(q.width=F),U.marginTop&&(q.y+=U.marginTop),U.marginLeft&&(q.x+=U.marginLeft),q}(n,t,r),n.attrs=Object(b.__assign)(Object(b.__assign)({},n.attrs),n.bbox),n}function Sn(n){var t={},e=function(r){var i=function(u){return function(l){for(var h=u.length,v=[],k=0,T="";k<h;)if(u[k]==="{"&&u[k+1]==="{")v.push(T),T="",k+=2;else if(u[k]==="}"&&u[k+1]==="}"){if(v.length){var I=v.pop();T=Object(p.get)(l,T,I.endsWith("=")?'"{'+T+'}"':T),v.push(I+T)}k+=2,T=""}else T+=u[k],k+=1;return v.push(T),v.map(function(j,F){return v[F-1]&&v[F-1].endsWith("=")?'"{'+j+'}"':j}).join("")}}(typeof n=="function"?n(r):n)(r),a=document.createElement("div");a.innerHTML=i;var s=ai(function u(l,h){var v={},k=l.getAttributeNames&&l.getAttributeNames()||[],T=l.children&&Array.from(l.children).map(function(F){return u(F,h)}),I={},j=l.tagName?l.tagName.toLowerCase():"group";return j==="text"&&(v.text=l.innerText),I.type=j,j==="img"&&(I.type="image"),Array.from(k).forEach(function(F){var B=F.split("-").reduce(function($,ve){return $+ve.charAt(0).toUpperCase()+ve.slice(1)}),U=l.getAttribute(F);try{if(B==="style"||B==="attrs"){var q=Mn(U);v=Object(b.__assign)(Object(b.__assign)({},v),q)}else I[B]=Mn(U)}catch($){if(B==="style")throw $;I[B]=U}}),I.attrs=v,h&&h.style&&I.name&&Qr(h.style[I.name])==="object"&&(I.attrs=Object(b.__assign)(Object(b.__assign)({},I.attrs),h.style[I.name])),h&&h.style&&I.keyshape&&(I.attrs=Object(b.__assign)(Object(b.__assign)({},I.attrs),h.style)),T.length&&(I.children=T),I}(a.children[0],r));return a.remove(),s};return{draw:function(r,i){var a=e(r),s=i;return function u(l){var h=l.attrs,v=h===void 0?{}:h,k=l.bbox,T=l.type,I=l.children,j=Object(b.__rest)(l,["attrs","bbox","type","children"]);if(l.type!=="group"){var F=i.addShape(l.type,Object(b.__assign)({attrs:v,origin:{bbox:k,type:T,children:I}},j));l.keyshape&&(s=F)}l.children&&l.children.forEach(function(B){return u(B)})}(a),t[r.id]=[a],s},update:function(r,i){t[r.id]||(t[r.id]=[]);var a=i.getContainer(),s=a.get("children"),u=e(r),l=function k(T,I){var j,F,B,U,q=(T||{}).type,$=((I==null?void 0:I.attrs)||{}).key;if($&&T&&(T.attrs.key=$),!T&&I)return{action:"delete",val:I,type:q,key:$};if(T&&!I)return{action:"add",val:T,type:q};if(!T&&!I)return{action:"same",type:q};var ve=[];if(((j=T.children)===null||j===void 0?void 0:j.length)>0||((F=I.children)===null||F===void 0?void 0:F.length)>0)for(var de=Math.max((B=T.children)===null||B===void 0?void 0:B.length,(U=I.children)===null||U===void 0?void 0:U.length),me=I.children||[],Te=T.children||[],Oe=0;Oe<de;Oe+=1)ve.push(k(Te[Oe],me[Oe]));var Pe=Object.keys(I.attrs),Ze=Object.keys(T.attrs);return I.type!==T.type?{action:"restructure",nowTarget:T,formerTarget:I,key:$,children:ve}:Pe.filter(function(nt){return nt!=="children"}).some(function(nt){return T.attrs[nt]!==I.attrs[nt]||!Ze.includes(nt)})?{action:"change",val:T,children:ve,type:q,key:$}:{action:"same",children:ve,type:q,key:$}}(u,t[r.id].pop()),h=function k(T){var I;T.type!=="group"&&a.addShape(T.type,{attrs:T.attrs}),!((I=T.children)===null||I===void 0)&&I.length&&T.children.map(function(j){return k(j)})},v=function k(T){var I,j=s.find(function(F){return F.attrs.key===T.attrs.key});j&&a.removeChild(j),!((I=T.children)===null||I===void 0)&&I.length&&T.children.map(function(F){return k(F)})};(function k(T){var I=T.key;if(T.type!=="group"){var j=s.find(function(B){return B.attrs.key===I});switch(T.action){case"change":if(j){var F=T.val.keyshape?i.getOriginStyle():{};j.attr(Object(b.__assign)(Object(b.__assign)({},F),T.val.attrs))}break;case"add":h(T.val);break;case"delete":v(T.val);break;case"restructure":v(T.formerTarget),h(T.nowTarget)}}T.children&&T.children.forEach(function(B){return k(B)})})(l),t[r.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var si={};function Jr(n){return si[n]||(si[n]=Object(p.upperFirst)(n)),si[n]}var Mo={defaultShapeType:"defaultType",className:null,getShape:function(n){return this[n]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(n,t,e){var r=this.getShape(n),i=r.draw(t,e);return r.afterDraw&&r.afterDraw(t,e,i),i},baseUpdate:function(n,t,e,r){var i=this.getShape(n);i.update&&i.update(t,e,r),i.afterUpdate&&i.afterUpdate(t,e)},setState:function(n,t,e,r){this.getShape(n).setState(t,e,r)},shouldUpdate:function(n){return!!this.getShape(n).update},getControlPoints:function(n,t){return this.getShape(n).getControlPoints(t)},getAnchorPoints:function(n,t){return this.getShape(n).getAnchorPoints(t)}},Gi={options:{},draw:function(n,t){return this.drawShape(n,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(n){return n.controlPoints},getAnchorPoints:function(n){var t=this.options.anchorPoints;return n.anchorPoints||t}},$i=function(){function n(){}return n.registerFactory=function(t,e){var r=Jr(t),i=Mo,a=Object(b.__assign)(Object(b.__assign)({},i),e);return n[r]=a,a.className=r,a},n.getFactory=function(t){return n[Jr(t)]},n.registerNode=function(t,e,r){var i,a=n.Node;if(typeof e=="string"||typeof e=="function"){var s=Sn(e);i=Object(b.__assign)(Object(b.__assign)({},a.getShape("single-node")),s)}else if(e.jsx)s=Sn(e.jsx),i=Object(b.__assign)(Object(b.__assign)(Object(b.__assign)({},a.getShape("single-node")),s),e);else{a.getShape(r);var u=r?a.getShape(r):Gi;i=Object(b.__assign)(Object(b.__assign)({},u),e)}return i.type=t,i.itemType="node",a[t]=i,i},n.registerEdge=function(t,e,r){var i=n.Edge,a=r?i.getShape(r):Gi,s=Object(b.__assign)(Object(b.__assign)({},a),e);return s.type=t,s.itemType="edge",i[t]=s,s},n.registerCombo=function(t,e,r){var i=n.Combo,a=r?i.getShape(r):Gi,s=Object(b.__assign)(Object(b.__assign)({},a),e);return s.type=t,s.itemType="combo",i[t]=s,s},n}(),nn=$i;$i.registerFactory("node",{defaultShapeType:"circle"}),$i.registerFactory("edge",{defaultShapeType:"line"}),$i.registerFactory("combo",{defaultShapeType:"circle"});var pi=function(){function n(t){this._cfg={},this.destroyed=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var r=this.get("model"),i=r.id,a=this.get("type");i||(i=pr(a),this.get("model").id=i),this.set("id",i);var s=t.group;s&&(s.set("item",this),s.set("id",i)),this.init(),this.draw();var u=r.shape||r.type||(a==="edge"?"line":"circle"),l=this.get("shapeFactory");if(l&&l[u]){var h=l[u].options;if(h&&h.stateStyles){var v=this.get("styles")||r.stateStyles;v=Object(p.deepMix)({},h.stateStyles,v),this.set("styles",v)}}}return n.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=vr(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},n.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=vr(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},n.prototype.drawInner=function(){var t=this.get("shapeFactory"),e=this.get("group"),r=this.get("model");e.clear();var i=r.visible;if(i===void 0||i||this.changeVisibility(i),t){this.updatePosition(r);var a=this.getShapeCfg(r),s=a.type,u=t.draw(s,a,e);u&&(this.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},n.prototype.setOriginStyle=function(){var t=this.get("group").get("children"),e=this.getKeyShape(),r=this,i=e.get("name");if(this.get("originStyle")){var a=this.getOriginStyle();i&&!a[i]&&(a[i]={});var s=this.getCurrentStatesStyle();Object(p.each)(t,function(l){var h=l.get("name"),v=l.attr();if(h&&h!==i){var k=s[h];a[h]||(a[h]={}),k?Object.keys(v).forEach(function(j){var F=v[j];F!==k[j]&&(a[h][j]=F)}):a[h]=l.get("type")!=="image"?Object(p.clone)(v):r.getShapeStyleByName(h)}else{var T=l.attr(),I={};Object.keys(s).forEach(function(j){var F=s[j];Object(p.isPlainObject)(F)&&j!==i||(I[j]=F)}),Object.keys(T).forEach(function(j){var F=T[j];I[j]!==F&&(i?a[i][j]=F:a[j]=F)})}}),a.path&&delete a.path,a.matrix&&delete a.matrix,a.x&&delete a.x,a.y&&delete a.y,a[i]&&a[i].x&&delete a[i].x,a[i]&&a[i].y&&delete a[i].y,r.set("originStyle",a)}else{var u={};Object(p.each)(t,function(l){var h=l.get("type"),v=l.get("name");if(v&&v!==i)u[v]=h!=="image"?Object(p.clone)(l.attr()):r.getShapeStyleByName(v),u[v]&&h==="text"&&(delete u[v].x,delete u[v].y,delete u[v].matrix);else{var k=r.getShapeStyleByName();if(k.path&&delete k.path,k.matrix&&delete k.matrix,i)if(v)u[i]=k;else{var T=pr("shape");l.set("name",T),u[T]=h!=="image"?Object(p.clone)(l.attr()):r.getShapeStyleByName(v)}else Object.assign(u,k)}}),r.set("originStyle",u)}},n.prototype.restoreStates=function(t,e){var r=this,i=r.get("states");Object(p.each)(i,function(a){t.setState(e,a,!0,r)})},n.prototype.init=function(){var t=nn.getFactory(this.get("type"));this.set("shapeFactory",t)},n.prototype.get=function(t){return this._cfg[t]},n.prototype.set=function(t,e){Object(p.isPlainObject)(t)?this._cfg=Object(b.__assign)(Object(b.__assign)({},this._cfg),t):this._cfg[t]=e},n.prototype.getDefaultCfg=function(){return{}},n.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},n.prototype.beforeDraw=function(){},n.prototype.afterDraw=function(){},n.prototype.afterUpdate=function(){},n.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},n.prototype.getShapeStyleByName=function(t){var e,r=this.get("group");if(e=t?r.find(function(a){return a.get("name")===t}):this.getKeyShape()){var i={};return Object(p.each)(e.attr(),function(a,s){(s!=="img"||Object(p.isString)(a))&&(i[s]=a)}),i}return{}},n.prototype.getShapeCfg=function(t,e){var r=this.get("styles");if(r){var i=t;return i.style=Object(b.__assign)(Object(b.__assign)({},r),t.style),i}return t},n.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},n.prototype.getOriginStyle=function(){return this.get("originStyle")},n.prototype.getCurrentStatesStyle=function(){var t=this,e={},r=t.getStates();return r&&r.length?(Object(p.each)(t.getStates(),function(i){e=Object.assign(e,t.getStateStyle(i))}),e):this.getOriginStyle()},n.prototype.setState=function(t,e){var r=this.get("states"),i=this.get("shapeFactory"),a=t,s=t;Object(p.isString)(e)&&(a=t+":"+e,s=t+":");var u=r;if(Object(p.isBoolean)(e)){var l=r.indexOf(s);if(e){if(l>-1)return;r.push(a)}else l>-1&&r.splice(l,1)}else if(Object(p.isString)(e)){var h=r.filter(function(k){return k.includes(s)});h.length>0&&this.clearStates(h),(u=u.filter(function(k){return!k.includes(s)})).push(a),this.set("states",u)}if(i){var v=this.get("model").type;i.setState(v,t,e,this)}},n.prototype.clearStates=function(t){var e=this,r=e.getStates(),i=e.get("shapeFactory"),a=e.get("model").type;t||(t=r),Object(p.isString)(t)&&(t=[t]);var s=r.filter(function(u){return t.indexOf(u)===-1});e.set("states",s),t.forEach(function(u){i.setState(a,u,!1,e)})},n.prototype.getContainer=function(){return this.get("group")},n.prototype.getKeyShape=function(){return this.get("keyShape")},n.prototype.getModel=function(){return this.get("model")},n.prototype.getType=function(){return this.get("type")},n.prototype.getID=function(){return this.get("id")},n.prototype.isItem=function(){return!0},n.prototype.getStates=function(){return this.get("states")},n.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},n.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},n.prototype.getUpdateType=function(t){},n.prototype.update=function(t,e){e===void 0&&(e=void 0);var r=this.get("model");if(e==="move")this.updatePosition(t);else{var i=r.visible,a=t.visible;i!==a&&a!==void 0&&this.changeVisibility(a);var s={x:r.x,y:r.y};t.x=isNaN(+t.x)?r.x:+t.x,t.y=isNaN(+t.y)?r.y:+t.y;var u=this.get("styles");if(t.stateStyles){var l=t.stateStyles;Object(p.mix)(u,l),delete t.stateStyles}Object.assign(r,t),s.x===t.x&&s.y===t.y||this.updatePosition(t),this.updateShape()}this.afterUpdate(),this.clearCache()},n.prototype.updateShape=function(t){var e=this.get("shapeFactory"),r=this.get("model"),i=r.type;if(e.shouldUpdate(i)&&i===this.get("currentShape")){var a=this.getShapeCfg(r,t);e.baseUpdate(i,a,this,t),t!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(e,i)},n.prototype.updatePosition=function(t){var e=this.get("model"),r=Object(p.isNil)(+t.x)?+e.x:+t.x,i=Object(p.isNil)(+t.y)?+e.y:+t.y,a=this.get("group");if(Object(p.isNil)(r)||Object(p.isNil)(i))return!1;e.x=r,e.y=i;var s=a.getMatrix();return(!s||s[6]!==r||s[7]!==i)&&(a.resetMatrix(),mn(a,{x:r,y:i}),this.clearCache(),!0)},n.prototype.getBBox=function(){var t=this.get("bboxCache");return t||(t=this.calculateBBox(),this.set("bboxCache",t)),t},n.prototype.getCanvasBBox=function(){var t=this.get("bboxCanvasCache");return t||(t=this.calculateCanvasBBox(),this.set("bboxCanvasCache",t)),t},n.prototype.toFront=function(){this.get("group").toFront()},n.prototype.toBack=function(){this.get("group").toBack()},n.prototype.show=function(){this.changeVisibility(!0)},n.prototype.hide=function(){this.changeVisibility(!1)},n.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},n.prototype.isVisible=function(){return this.get("visible")},n.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},n.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},n}(),Qi={source:"start",target:"end"},ki=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return Object(b.__extends)(t,n),t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,r){var i=Qi[e]+"Point",a=e+"Node",s=this.get(a);s&&!s.destroyed&&s.removeEdge(this),Object(p.isPlainObject)(r)?(this.set(i,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(i,null))},t.prototype.getLinkPoint=function(e,r,i){var a=Qi[e]+"Point",s=e+"Node",u=this.get(a);if(!u){var l=this.get(s),h=e+"Anchor",v=this.getPrePoint(e,i),k=r[h];Object(p.isNil)(k)||(u=l.getLinkPointByAnchor(k)),u=u||l.getLinkPoint(v),Object(p.isNil)(u.index)||this.set(e+"AnchorIndex",u.index)}return u},t.prototype.getPrePoint=function(e,r){if(r&&r.length)return r[e==="source"?0:r.length-1];var i=e==="source"?"target":"source";return this.getEndPoint(i)},t.prototype.getEndPoint=function(e){var r=e+"Node",i=Qi[e]+"Point",a=this.get(r);return a?a.get("model"):this.get(i)},t.prototype.getControlPointsByCenter=function(e){var r=this.getEndPoint("source"),i=this.getEndPoint("target"),a=this.get("shapeFactory"),s=e.type;return a.getControlPoints(s,{startPoint:r,endPoint:i})},t.prototype.getEndCenter=function(e){var r=e+"Node",i=Qi[e]+"Point",a=this.get(r);if(a){var s=a.getBBox();return{x:s.centerX,y:s.centerY}}return this.get(i)},t.prototype.init=function(){n.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(e,r){var i=this.get("linkCenter"),a=r==="move"?e:n.prototype.getShapeCfg.call(this,e);if(i)a.startPoint=this.getEndCenter("source"),a.endPoint=this.getEndCenter("target");else{var s=a.controlPoints||this.getControlPointsByCenter(a);a.startPoint=this.getLinkPoint("source",e,s),a.endPoint=this.getLinkPoint("target",e,s)}return a.sourceNode=this.get("sourceNode"),a.targetNode=this.get("targetNode"),a},t.prototype.getModel=function(){var e=this.get("model"),r=this.get("sourceNode"),i=this.get("targetNode");return r?delete e.sourceNode:e.source=this.get("startPoint"),i?delete e.targetNode:e.target=this.get("endPoint"),Object(p.isString)(e.source)||Object(p.isPlainObject)(e.source)||(e.source=e.source.getID()),Object(p.isString)(e.target)||Object(p.isPlainObject)(e.target)||(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,r){r===void 0&&(r=void 0);var i=this.get("model"),a=i.visible,s=e.visible;a!==s&&s!==void 0&&this.changeVisibility(s);var u=this.get("styles");if(e.stateStyles){var l=e.stateStyles;Object(p.mix)(u,l),delete e.stateStyles}Object.assign(i,e),this.updateShape(r),this.afterUpdate(),this.clearCache()},t.prototype.destroy=function(){var e=this.get("sourceNode"),r=this.get("targetNode");e&&!e.destroyed&&e.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),n.prototype.destroy.call(this)},t}(pi),Gn=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return Object(b.__extends)(t,n),t.prototype.getNearestPoint=function(e,r){for(var i=0,a=e[0],s=gn(e[0],r),u=0;u<e.length;u++){var l=e[u],h=gn(l,r);h<s&&(a=l,s=h,i=u)}return a.anchorIndex=i,a},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(r){return r.get("target")===e})},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(r){return r.get("source")===e})},t.prototype.getNeighbors=function(e){var r=this,i=this.get("edges");return e==="target"?i.filter(function(a){return a.getSource()===r}).map(function(a){return a.getTarget()}):e==="source"?i.filter(function(a){return a.getTarget()===r}).map(function(a){return a.getSource()}):i.map(function(a){return a.getSource()===r?a.getTarget():a.getSource()})},t.prototype.getLinkPointByAnchor=function(e){return this.getAnchorPoints()[e]},t.prototype.getLinkPoint=function(e){var r,i,a=this.get("keyShape").get("type"),s=this.get("type"),u=this.getBBox();s==="combo"?(r=u.centerX||(u.maxX+u.minX)/2,i=u.centerY||(u.maxY+u.minY)/2):(r=u.centerX,i=u.centerY);var l,h=this.getAnchorPoints();switch(a){case"circle":l=Ir({x:r,y:i,r:u.width/2},e);break;case"ellipse":l=On({x:r,y:i,rx:u.width/2,ry:u.height/2},e);break;default:l=rn(u,e)}var v=l;return h.length&&(v||(v=e),v=this.getNearestPoint(h,v)),v||(v={x:r,y:i}),v},t.prototype.getAnchorPoints=function(){var e=this.get("anchorPointsCache");if(!e){e=[];var r=this.get("shapeFactory"),i=this.getBBox(),a=this.get("model"),s=this.getShapeCfg(a),u=a.type,l=r.getAnchorPoints(u,s)||[];Object(p.each)(l,function(h,v){var k={x:i.minX+h[0]*i.width,y:i.minY+h[1]*i.height,anchorIndex:v};e.push(k)}),this.set("anchorPointsCache",e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var r=this.getEdges(),i=r.indexOf(e);i>-1&&r.splice(i,1)},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},t.prototype.getUpdateType=function(e){var r,i,a,s,u;if(e){var l=!Object(p.isNil)(e.x),h=!Object(p.isNil)(e.y),v=Object.keys(e);return v.length===1&&(l||h)||v.length===2&&l&&h?"move":Object(p.isNumber)(e.x)||Object(p.isNumber)(e.y)||e.type||e.anchorPoints||e.size||(e==null?void 0:e.style)&&(((r=e==null?void 0:e.style)===null||r===void 0?void 0:r.r)||((i=e==null?void 0:e.style)===null||i===void 0?void 0:i.width)||((a=e==null?void 0:e.style)===null||a===void 0?void 0:a.height)||((s=e==null?void 0:e.style)===null||s===void 0?void 0:s.rx)||((u=e==null?void 0:e.style)===null||u===void 0?void 0:u.ry))?"bbox":"style"}},t}(pi),Fi=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return Object(b.__extends)(t,n),t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var r=this.get("styles"),i=this.get("bbox");if(r&&i){var a=e,s={r:Math.hypot(i.height,i.width)/2||nr.defaultCombo.size[0]/2,width:i.width||nr.defaultCombo.size[0],height:i.height||nr.defaultCombo.size[1]};a.style=Object(b.__assign)(Object(b.__assign)(Object(b.__assign)({},r),e.style),s);var u=e.padding||nr.defaultCombo.padding;return Object(p.isNumber)(u)?(s.r+=u,s.width+=2*u,s.height+=2*u):(s.r+=u[0],s.width+=u[1]+u[3]||2*u[1],s.height+=u[0]+u[2]||2*u[0]),this.set("sizeCache",s),a}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),r=this.get("group"),i=vr(e,r);i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2;var a=this.get("sizeCache"),s=this.get("bboxCache")||{},u=s.x,l=s.x;return a?(a.width=Math.max(a.width,i.width),a.height=Math.max(a.height,i.height),e.get("type")==="circle"?(i.width=2*a.r,i.height=2*a.r):(i.width=a.width,i.height=a.height),i.minX=i.centerX-i.width/2,i.minY=i.centerY-i.height/2,i.maxX=i.centerX+i.width/2,i.maxY=i.centerY+i.height/2):(i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2),i.x=i.minX,i.y=i.minY,i.x===u&&i.y===l||this.set("anchorPointsCache",null),i}},t.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.addChild=function(e){switch(e.getType()){case"node":this.addNode(e);break;case"combo":this.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){return this.get("combos").push(e),!0},t.prototype.addNode=function(e){return this.get("nodes").push(e),!0},t.prototype.removeChild=function(e){switch(e.getType()){case"node":this.removeNode(e);break;case"combo":this.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(e){var r=this.getCombos(),i=r.indexOf(e);return i>-1&&(r.splice(i,1),!0)}},t.prototype.removeNode=function(e){if(e){var r=this.getNodes(),i=r.indexOf(e);return i>-1&&(r.splice(i,1),!0)}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),r=this.get("group");e&&r.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},t}(Gn),Ni=function(){function n(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=Object(p.throttle)(function(r){var i,a=e.graph;if(a&&!a.get("destroyed")){var s=e.edgeToBeUpdateMap;s&&((i=Object.keys(s))===null||i===void 0?void 0:i.length)&&(Object.keys(s).forEach(function(u){var l=s[u].edge;l&&!l.destroyed&&l.refresh(s[u].updateType)}),e.edgeToBeUpdateMap={})}},16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return n.prototype.addItem=function(t,e){var r=this.graph,i=t==="vedge"?"edge":t,a=r.get(i+"Group")||r.get("group"),s=Object(p.upperFirst)(i),u=null,l=r.get(i+Object(p.upperFirst)("stateStyles"))||{},h=r.get("default"+s);e.stateStyles&&(l=e.stateStyles),h&&Object(p.each)(h,function(q,$){Object(p.isObject)(q)&&!Object(p.isArray)(q)?e[$]=Object(p.deepMix)({},q,e[$]):Object(p.isArray)(q)?e[$]=e[$]||Object(p.clone)(h[$]):e[$]=e[$]||h[$]});var v=r.get(i+"Mapper");if(v){var k=v(e);k.stateStyles&&(l=k.stateStyles,delete k.stateStyles),Object(p.each)(k,function(q,$){Object(p.isObject)(q)&&!Object(p.isArray)(q)?e[$]=Object(p.deepMix)({},e[$],q):e[$]=k[$]||e[$]})}if(r.emit("beforeadditem",{type:t,model:e}),t==="edge"||t==="vedge"){var T=void 0,I=void 0;if(T=e.source,I=e.target,T&&Object(p.isString)(T)&&(T=r.findById(T)),I&&Object(p.isString)(I)&&(I=r.findById(I)),!T||!I)return void console.warn("The source or target node of edge "+e.id+" does not exist!");T.getType&&T.getType()==="combo"&&(e.isComboEdge=!0),I.getType&&I.getType()==="combo"&&(e.isComboEdge=!0),u=new ki({model:e,source:T,target:I,styles:l,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(t==="node")u=new Gn({model:e,styles:l,group:a.addGroup()});else if(t==="combo"){var j=e.children,F=wt(j,r);isNaN(F.x)?isNaN(e.x)&&(e.x=100*Math.random()):e.x=F.x,isNaN(F.y)?isNaN(e.y)&&(e.y=100*Math.random()):e.y=F.y;var B=a.addGroup();B.setZIndex(e.depth);var U=(u=new Fi({model:e,styles:l,bbox:e.collapsed?wt([],r):F,group:B})).getModel();(j||[]).forEach(function(q){var $=r.findById(q.id);u.addChild($),q.depth=U.depth+2}),e.collapsed&&setTimeout(function(){r.collapseCombo(u)},0)}if(u)return r.get(t+"s").push(u),r.get("itemMap")[u.get("id")]=u,r.emit("afteradditem",{item:u,model:e}),u},n.prototype.updateItem=function(t,e){var r,i,a=this,s=this.graph;if(Object(p.isString)(t)&&(t=s.findById(t)),t&&!t.destroyed){var u="";t.getType&&(u=t.getType());var l=s.get(u+"Mapper"),h=t.getModel(),v=t.getUpdateType(e);if(l){var k=l(Object(p.deepMix)({},h,e)),T=Object(p.deepMix)({},h,k,e);k.stateStyles&&(t.set("styles",T.stateStyles),delete T.stateStyles),Object(p.each)(T,function($,ve){e[ve]=$})}else Object(p.each)(e,function($,ve){h[ve]&&Object(p.isObject)($)&&!Object(p.isArray)($)&&(e[ve]=Object(b.__assign)(Object(b.__assign)({},h[ve]),e[ve]))});if(s.emit("beforeupdateitem",{item:t,cfg:e}),u==="edge"){if(e.source){var I=e.source;Object(p.isString)(I)&&(I=s.findById(I)),t.setSource(I)}if(e.target){var j=e.target;Object(p.isString)(j)&&(j=s.findById(j)),t.setTarget(j)}t.update(e)}if(u==="node"||u==="combo"){t.update(e,v);var F=t.getEdges(),B=v==="bbox"||v==="move";if(u==="node")v==="move"?Object(p.each)(F,function($){a.edgeToBeUpdateMap[$.getID()]={edge:$,updateType:v},a.throttleRefresh()}):B&&Object(p.each)(F,function($){$.refresh()});else if(B&&u==="combo"){var U=t.get("shapeFactory"),q=h.type||"circle";(h.animate===void 0||e.animate===void 0?(i=(r=U[q])===null||r===void 0?void 0:r.options)===null||i===void 0?void 0:i.animate:h.animate||e.animate)?setTimeout(function(){if(t&&!t.destroyed){var $=t.getKeyShape();$&&!$.destroyed&&Object(p.each)(F,function(ve){ve&&!ve.destroyed&&ve.refresh()})}},201):Object(p.each)(F,function($){$.refresh()})}}s.emit("afterupdateitem",{item:t,cfg:e})}},n.prototype.updateCombo=function(t,e){var r,i,a=this,s=this.graph;if(Object(p.isString)(t)&&(t=s.findById(t)),t&&!t.destroyed){var u=t.getModel(),l=wt(u.collapsed?[]:e,s),h=u.collapsed?wt(e,s):l,v=h.x,k=h.y;t.set("bbox",l),t.update({x:v,y:k});var T=t.get("shapeFactory"),I=u.type||"circle";(u.animate===void 0?(i=(r=T[I])===null||r===void 0?void 0:r.options)===null||i===void 0?void 0:i.animate:u.animate)?setTimeout(function(){if(t&&!t.destroyed){var j=t.getKeyShape();j&&!j.destroyed&&(t.getShapeCfg(u),a.updateComboEdges(t))}},201):this.updateComboEdges(t)}},n.prototype.updateComboEdges=function(t){for(var e=t.getEdges()||[],r=0;r<e.length;r++){var i=e[r];if(i&&!i.destroyed){var a=i.get("shapeFactory"),s=i.getShapeCfg(i.getModel()),u=i.getContainer();u.clear();var l=a.draw(s.type,s,u);i.set("keyShape",l),l.set("isKeyShape",!0),l.set("draggable",!0),i.setOriginStyle()}}},n.prototype.collapseCombo=function(t){var e=this.graph;Object(p.isString)(t)&&(t=e.findById(t));var r=t.getChildren();r.nodes.forEach(function(i){e.hideItem(i)}),r.combos.forEach(function(i){e.hideItem(i)})},n.prototype.expandCombo=function(t){var e=this.graph;Object(p.isString)(t)&&(t=e.findById(t));var r=t.getChildren();r.nodes.forEach(function(i){e.showItem(i)}),r.combos.forEach(function(i){i.getModel().collapsed?i.show():e.showItem(i)})},n.prototype.removeItem=function(t){var e=this,r=this.graph;if(Object(p.isString)(t)&&(t=r.findById(t)),t&&!t.destroyed){var i=Object(p.clone)(t.getModel());r.emit("beforeremoveitem",{item:i});var a="";t.getType&&(a=t.getType());var s=r.get(a+"s"),u=s.indexOf(t);if(u>-1&&s.splice(u,1),a==="edge"){var l=r.get("v"+a+"s"),h=l.indexOf(t);h>-1&&l.splice(h,1)}var v=t.get("id");delete r.get("itemMap")[v];var k=r.get("comboTrees"),T=t.get("id");if(a==="node"){var I=t.getModel().comboId;if(k&&I){var j=k,F=!1;k.forEach(function(de){F||Ft(de,function(me){if(me.id===T&&j){var Te=j.indexOf(me);return j.splice(Te,1),F=!0,!1}return j=me.children,!0})})}for(var B=(ve=t.getEdges()).length-1;B>=0;B--)r.removeItem(ve[B],!1);I&&r.updateCombo(I)}else if(a==="combo"){var U,q=t.getModel().parentId,$=!1;(k||[]).forEach(function(de){$||Ft(de,function(me){return me.id!==T||(U=me,$=!0,!1)})}),U.removed=!0,U&&U.children&&U.children.forEach(function(de){e.removeItem(de.id)});var ve;for(B=(ve=t.getEdges()).length;B>=0;B--)r.removeItem(ve[B],!1);q&&r.updateCombo(q)}t.destroy(),r.emit("afterremoveitem",{item:i})}},n.prototype.setItemState=function(t,e,r){var i=this.graph,a=e;Object(p.isString)(r)&&(a=e+":"+r),t.hasState(a)===r&&r||Object(p.isString)(r)&&t.hasState(a)||(i.emit("beforeitemstatechange",{item:t,state:a,enabled:r}),t.setState(e,r),i.autoPaint(),i.emit("afteritemstatechange",{item:t,state:a,enabled:r}))},n.prototype.priorityState=function(t,e){var r=this.graph,i=t;Object(p.isString)(t)&&(i=r.findById(t)),this.setItemState(i,e,!1),this.setItemState(i,e,!0)},n.prototype.clearItemStates=function(t,e){var r=this.graph;Object(p.isString)(t)&&(t=r.findById(t)),r.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),r.emit("afteritemstatesclear",{item:t,states:e})},n.prototype.refreshItem=function(t){var e=this.graph;Object(p.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},n.prototype.addCombos=function(t,e){var r=this,i=this.graph;(t||[]).forEach(function(s){_e(s,function(u){var l;return e.forEach(function(h){h.id===u.id&&(h.children=u.children,h.depth=u.depth,l=h)}),l&&r.addItem("combo",l),!0})});var a=i.get("comboGroup");a&&a.sort()},n.prototype.changeItemVisibility=function(t,e){var r=this,i=this.graph;if(Object(p.isString)(t)&&(t=i.findById(t)),t){if(i.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()==="node"){var a=t.getEdges();Object(p.each)(a,function(v){(!e||v.get("source").isVisible()&&v.get("target").isVisible())&&r.changeItemVisibility(v,e)})}else if(t.getType&&t.getType()==="combo"){var s=i.get("comboTrees"),u=t.get("id"),l=[],h=!1;(s||[]).forEach(function(v){h||v.children&&v.children.length!==0&&Ft(v,function(k){return k.id!==u||(l=k.children,h=!0,!1)})}),l&&(!e||e&&!t.getModel().collapsed)&&l.forEach(function(v){var k=i.findById(v.id);r.changeItemVisibility(k,e)}),a=t.getEdges(),Object(p.each)(a,function(v){(!e||v.get("source").isVisible()&&v.get("target").isVisible())&&r.changeItemVisibility(v,e)})}return i.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},n.prototype.destroy=function(){this.graph=null,this.destroyed=!0},n}(),fi=null,zi=function(){function n(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return n.checkCache=function(t,e,r){if(r[e]){var i=r[e].indexOf(t);i>=0&&r[e].splice(i,1)}},n.cacheState=function(t,e,r){r[e]||(r[e]=[]),r[e].push(t)},n.prototype.updateState=function(t,e,r){var i=this,a=n.checkCache,s=n.cacheState;if(!t.destroyed){var u=this.cachedStates,l=u.enabled,h=u.disabled;r?(a(t,e,h),s(t,e,l)):(a(t,e,l),s(t,e,h)),fi&&clearTimeout(fi),fi=setTimeout(function(){fi=null,i.updateGraphStates()},16)}},n.prototype.updateStates=function(t,e,r){var i=this;Object(p.isString)(e)?this.updateState(t,e,r):e.forEach(function(a){i.updateState(t,a,r)})},n.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;Object(p.each)(e.disabled,function(r,i){t[i]&&(t[i]=t[i].filter(function(a){return r.indexOf(a)<0&&!r.destroyed}))}),Object(p.each)(e.enabled,function(r,i){if(t[i]){var a={};t[i].forEach(function(s){s.destroyed||(a[s.get("id")]=!0)}),r.forEach(function(s){if(!s.destroyed){var u=s.get("id");a[u]||(a[u]=!0,t[i].push(s))}})}else t[i]=r}),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},n.prototype.destroy=function(){this.graph=null,this.cachedStates=null,fi&&clearTimeout(fi),fi=null,this.destroyed=!0},n}(),Ai=o(37),Ji=function(n,t){return n&&t?n.replace(/\\?\{([^{}]+)\}/g,function(e,r){if(e.charAt(0)==="\\")return e.slice(1);var i=t[r];return i===0&&(i="0"),i||""}):n},ao=function(n){var t=[];if(n.length<2)throw new Error("point length must largn than 2, now it's "+n.length);for(var e=0,r=n;e<r.length;e++){var i=r[e],a=i.x,s=i.y;t.push(a),t.push(s)}var u=Object(Ai.a)(t);return u.unshift(["M",n[0].x,n[0].y]),u},Ui=function(n,t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var i={x:(1-e)*n.x+e*t.x,y:(1-e)*n.y+e*t.y},a=[0,0];L.c.normalize(a,[t.x-n.x,t.y-n.y]),a&&(a[0]||a[1])||(a=[0,0]);var s=[-a[1]*r,a[0]*r];return i.x+=s[0],i.y+=s[1],i},Ci=function(n,t){var e=n.length;if(!e)return"";for(var r="",i=0;i<e;i++){var a=n[i];r+=Ji(i===0?"M{x} {y}":"L{x} {y}",a)}return t&&(r+="Z"),r},_t=function(n){var t=[];return n.forEach(function(e){if(e[0]!=="A")for(var r=1;r<e.length;r+=2)t.push([e[r],e[r+1]]);else{var i=e.length;t.push([e[i-2],e[i-1]])}}),t},$e=function(n){if(n.length<2)throw new Error("point length must largn than 2, now it's "+n.length);var t=n[0],e=n[1],r=n[n.length-1],i=n[n.length-2];n.unshift(r),n.unshift(i),n.push(t),n.push(e);for(var a=[],s=1;s<n.length-2;s+=1){var u=n[s-1].x,l=n[s-1].y,h=n[s].x,v=n[s].y,k=n[s+1].x,T=n[s+1].y,I=h+(k-u)/6,j=v+(T-l)/6,F=k-((s!==n.length-2?n[s+2].x:k)-h)/6,B=T-((s!==n.length-2?n[s+2].y:T)-v)/6;a.push(["C",I,j,F,B,k,T])}return a.unshift(["M",r.x,r.y]),a},St=function(n,t){return L.c.scale([0,0],L.c.normalize([0,0],n),t)},w=function(n,t){var e=[n[1]-t[1],t[0]-n[0]],r=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(r===0)throw new Error("p0 should not be equal to p1");return[e[0]/r,e[1]/r]},R=function(n,t){return[t[0]-n[0],t[1]-n[1]]};function fe(n,t){if(!n||n.length<1)return"";if(n.length===1)return function(l){var h=[l[0][0],l[0][1]-t],v=[l[0][0],l[0][1]+t];return"M "+h+" A "+t+","+t+",0,0,0,"+v+" A "+t+","+t+",0,0,0,"+h}(n);if(n.length===2)return function(l){var h=L.c.scale([0,0],w(l[0],l[1]),t),v=L.c.scale([0,0],h,-1),k=L.c.add([0,0],l[0],h),T=L.c.add([0,0],l[1],h),I=L.c.add([0,0],l[1],v),j=L.c.add([0,0],l[0],v);return"M "+k+" L "+T+" A "+[t,t,"0,0,0",I].join(",")+" L "+j+" A "+[t,t,"0,0,0",k].join(",")}(n);for(var e=new Array(n.length),r=0;r<e.length;++r){var i=r===0?n[n.length-1]:n[r-1],a=n[r],s=L.c.scale([0,0],w(i,a),t);e[r]=[L.c.add([0,0],i,s),L.c.add([0,0],a,s)]}var u="A "+[t,t,"0,0,0,"].join(",");return(e=e.map(function(l,h){var v="";return h===0&&(v="M "+e[e.length-1][1]+" "),v+=u+l[0]+" L "+l[1]})).join(" ")}function Z(n,t){var e,r,i,a=n.length;if(!n||a<1)return"";if(a===1)return r=[(e=n)[0][0],e[0][1]-t],i=[e[0][0],e[0][1]+t],"M "+r+" A "+[t,t,"0,0,0",i].join(",")+" A "+[t,t,"0,0,0",r].join(",");if(a===2)return function(v){var k=R(v[0],v[1]),T=St(k,t),I=L.c.add([0,0],v[0],L.c.scale([0,0],T,-1)),j=L.c.add([0,0],v[1],T),F=1.2*t,B=St(L.c.normalize([0,0],k),F),U=L.c.scale([0,0],B,-1),q=L.c.add([0,0],I,U),$=L.c.add([0,0],j,U),ve=L.c.add([0,0],I,B);return"M "+I+" C "+[q,$,j].join(",")+" S "+[ve,I].join(",")+" Z"}(n);for(var s=n.map(function(v,k){var T=n[(k+1)%a];return{p:v,v:L.c.normalize([0,0],R(v,T))}}),u=0;u<s.length;++u){var l=u>0?u-1:a-1,h=L.c.normalize([0,0],L.c.add([0,0],s[l].v,L.c.scale([0,0],s[u].v,-1)));s[u].p=L.c.add([0,0],s[u].p,L.c.scale([0,0],h,t))}return s.map(function(v){var k=v.p;return{x:k[0],y:k[1]}})}var ae=function(n,t,e){return(n.y-e.y)*(t.x-e.x)-(n.x-e.x)*(t.y-e.y)},pe=function(n){var t=n.map(function(a){return{x:a.getModel().x,y:a.getModel().y}});if(t.sort(function(a,s){return a.x===s.x?a.y-s.y:a.x-s.x}),t.length===1)return t;for(var e=[],r=0;r<t.length;r++){for(;e.length>=2&&ae(e[e.length-2],e[e.length-1],t[r])<=0;)e.pop();e.push(t[r])}var i=[];for(r=t.length-1;r>=0;r--){for(;i.length>=2&&ae(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)},be={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function De(n,t,e){var r=!1,i=function(u,l){return t.cells[u+l*t.width]},a=function(u,l){var h=0;return i(u-1,l-1)>=e&&(h+=1),i(u,l-1)>e&&(h+=2),i(u-1,l)>e&&(h+=4),i(u,l)>e&&(h+=8),h},s=function(u,l){for(var h,v,k=u,T=l,I=0;I<t.width*t.height;I++){if(h=k,v=T,n.findIndex(function(F){return F.x===k&&F.y===T})>-1){if(n[0].x===k&&n[0].y===T)return!0}else n.push({x:k,y:T});var j=a(k,T);switch(j){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:k++;break;case 12:case 14:case 4:k--;break;case 6:h===0&&(v===-1?k-=1:k+=1);break;case 1:case 13:case 5:T--;break;case 9:h===1&&(v===0?T-=1:T+=1);break;case 10:case 8:case 11:T++;break;default:return console.warn("Marching squares invalid state: "+j),!0}}};this.march=function(){for(var u=0;u<t.width&&!r;u+=1)for(var l=0;l<t.height&&!r;l+=1)i(u,l)>e&&a(u,l)!==15&&(r=s(u,l));return r}}var Ue=function(n,t){var e=Number.POSITIVE_INFINITY,r=null;return n.forEach(function(i){var a=Vn(i,t);a>=0&&a<e&&(r=i,e=a)}),r};function Me(n,t,e,r,i){var a=function(s,u,l){var h=null,v=Number.POSITIVE_INFINITY;return u.forEach(function(k){var T={x:s.getModel().x,y:s.getModel().y},I={x:k.getModel().x,y:k.getModel().y},j=di(T,I),F=new Wn(T.x,T.y,I.x,I.y),B=l.reduce(function(U,q){return Vn(q,F)>0?U+1:U},0);j*Math.pow(B+1,2)<v&&(h=k,v=j*Math.pow(B+1,2))}),h}(n,e,t);return a===null?[]:function(s){for(var u=[];s.length>0;){var l=s.pop();if(s.length===0){u.push(l);break}var h=s.pop(),v=new Wn(l.x1,l.y1,h.x2,h.y2);Ue(t,v)?(u.push(l),s.push(h)):s.push(v)}return u}(function(s,u,l,h){var v=[],k=[];k.push(s);for(var T=!0,I=0,j=function(U,q){var $=!1;return q.forEach(function(ve){$||(Xn(U,{x:ve.x1,y:ve.y1})||Xn(U,{x:ve.x2,y:ve.y2}))&&($=!0)}),$},F=function(U,q){for(var $=0,ve=q;$<ve.length;$++){var de=ve[$].getBBox(),me=[[de.x,de.y],[de.x+de.width,de.y],[de.x,de.y+de.height],[de.x+de.width,de.y+de.height]];if(Bn(me,U.x,U.y))return!0}return!1};T&&I<l;){T=!1;for(var B=function(){var U=k.pop(),q=Ue(u,U);if(q){var $=hi(q,U),ve=$[0];if($[1]===2){var de=function(me){for(var Te=h,Oe=Ge(q,Te,ve,me),Pe=j(Oe,k)||j(Oe,v),Ze=F(Oe,u);!Pe&&Ze&&Te>=1;)Oe=Ge(q,Te/=1.5,ve,me),Pe=j(Oe,k)||j(Oe,v),Ze=F(Oe,u);!Oe||Pe||me&&Ze||(k.push(new Wn(U.x1,U.y1,Oe.x,Oe.y)),k.push(new Wn(Oe.x,Oe.y,U.x2,U.y2)),T=!0)};de(!0),T||de(!1)}}T||v.push(U),I+=1};!T&&k.length;)B()}for(;k.length;)v.push(k.pop());return v}(new Wn(n.getModel().x,n.getModel().y,a.getModel().x,a.getModel().y),t,r,i))}var Fe=function(n,t,e){var r=Object.assign(be,e),i=oi(n.map(function(de){return{x:de.getModel().x,y:de.getModel().y}}));n=n.sort(function(de,me){return di({x:de.getModel().x,y:de.getModel().y},i)-di({x:me.getModel().x,y:me.getModel().y},i)});var a=[],s=[];n.forEach(function(de){Me(de,t,a,r.maxRoutingIterations,r.morphBuffer).forEach(function(me){s.push(me)}),a.push(de)});for(var u,l,h,v,k,T=function(de,me,Te){var Oe={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},Pe=[];de.forEach(function(st){Pe.push(st.getBBox())}),me.forEach(function(st){Pe.push(st.getBBox())});for(var Ze=0,nt=Pe;Ze<nt.length;Ze++){var ct=nt[Ze];Oe.minX=(ct.minX<Oe.minX?ct.minX:Oe.minX)-Te,Oe.minY=(ct.minY<Oe.minY?ct.minY:Oe.minY)-Te,Oe.maxX=(ct.maxX>Oe.maxX?ct.maxX:Oe.maxX)+Te,Oe.maxY=(ct.maxY>Oe.maxY?ct.maxY:Oe.maxY)+Te}return Oe.width=Oe.maxX-Oe.minX,Oe.height=Oe.maxY-Oe.minY,Oe.x=Oe.minX,Oe.y=Oe.minY,Oe}(n,s,r.nodeR0),I=(u=T.width,l=T.height,h=r.pixelGroupSize,v=Math.ceil(u/h),k=Math.ceil(l/h),{cells:new Float32Array(Math.max(0,v*k)).fill(0),width:v,height:k}),j=[],F=[],B=0;B<r.maxMarchingIterations;B++)if(Ye(n,t,s,T,I,r),F=[],new De(j=[],I,r.threshold).march()){var U=j.map(function(de){return{x:Math.round(de.x*r.pixelGroupSize+T.minX),y:Math.round(de.y*r.pixelGroupSize+T.minY)}});if(U){var q=U.length;if(r.skip>1)for(q=Math.floor(U.length/r.skip);q<3&&r.skip>1;)r.skip-=1,q=Math.floor(U.length/r.skip);for(var $=0,ve=0;ve<q;ve+=1,$+=r.skip)F.push({x:U[$].x,y:U[$].y})}if(F&&function(){for(var de=0,me=n;de<me.length;de++){var Te=me[de],Oe=F.map(function(Pe){return[Pe.x,Pe.y]});if(!Bn(Oe,Te.getBBox().centerX,Te.getBBox().centerY))return!1}return!0}())return F;if(r.threshold*=.9,B<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(r.nonMemberInfluenceFactor!==0&&t.length>0))break;r.nonMemberInfluenceFactor*=.8}}return F};function Ye(n,t,e,r,i,a){function s(T,I){var j=Math.floor((T-I)/a.pixelGroupSize);return j<0?0:j}function u(T,I){return T*a.pixelGroupSize+I}var l=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),h=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),v=function(T,I){return[Math.min(s(T.minX,I+r.minX),i.width),Math.min(s(T.minY,I+r.minY),i.height),Math.min(s(T.maxX,-I+r.minX),i.width),Math.min(s(T.maxY,-I+r.minY),i.height)]},k=function(T,I){for(var j=T.getBBox(),F=v(j,a.nodeR1),B=F[0],U=F[1],q=F[2],$=F[3],ve=U;ve<$;ve+=1)for(var de=B;de<q;de+=1)if(!(I<0&&i[de+ve*i.width]<=0)){var me=u(de,r.minX),Te=u(ve,r.minY),Oe=Yn({x:me,y:Te},{x:j.minX,y:j.minY,width:j.width,height:j.height});if(Oe<Math.pow(a.nodeR1,2)){var Pe=Math.sqrt(Oe)-a.nodeR1;i.cells[de+ve*i.width]+=I*Pe*Pe}}};a.nodeInfluenceFactor&&n.forEach(function(T){k(T,a.nodeInfluenceFactor/l)}),a.edgeInfluenceFactor&&e.forEach(function(T){(function(I,j){for(var F=I.getBBox(),B=v(F,a.edgeR1),U=B[0],q=B[1],$=B[2],ve=B[3],de=q;de<ve;de+=1)for(var me=U;me<$;me+=1)if(!(j<0&&i.cells[me+de*i.width]<=0)){var Te=u(me,r.minX),Oe=u(de,r.minY),Pe=_i({x:Te,y:Oe},I);if(Pe<Math.pow(a.edgeR1,2)){var Ze=Math.sqrt(Pe)-a.edgeR1;i.cells[me+de*i.width]+=j*Ze*Ze}}})(T,a.edgeInfluenceFactor/h)}),a.negativeNodeInfluenceFactor&&t.forEach(function(T){k(T,a.negativeNodeInfluenceFactor/l)})}function Ge(n,t,e,r){var i=n.getBBox(),a=e[0],s=e[1],u=e[2],l=e[3],h={topLeft:{x:i.minX-t,y:i.minY-t},topRight:{x:i.maxX+t,y:i.minY-t},bottomLeft:{x:i.minX-t,y:i.maxY+t},bottomRight:{x:i.maxX+t,y:i.maxY+t}},v=i.height*i.width;function k(T,I){return i.width*(.5*(T.y-i.minY+(I.y-i.minY)))}if(s)return a?r?h.topLeft:h.bottomRight:u?r?h.bottomLeft:h.topRight:k(s,l)<.5*v?s.y>l.y?r?h.topLeft:h.bottomRight:r?h.topRight:h.bottomLeft:s.y<l.y?r?h.bottomLeft:h.topRight:r?h.bottomRight:h.topLeft;if(l){if(a)return r?h.topRight:h.bottomLeft;if(u)return r?h.bottomRight:h.topLeft}return k(a,u)<.5*v?a.x>u.x?r?h.topLeft:h.bottomRight:r?h.bottomLeft:h.topRight:a.x<u.x?r?h.topRight:h.bottomLeft:r?h.bottomRight:h.topLeft}var Xe=function(){function n(t,e){this.cfg=Object(p.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return Object(p.isString)(r)?t.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return Object(p.isString)(r)?t.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return n.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},n.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},n.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},n.prototype.calcPath=function(t,e){var r,i,a;switch(this.type){case"round-convex":a=fe((r=pe(t)).map(function(s){return[s.x,s.y]}),this.padding),i=Object(Ai.b)(a);break;case"smooth-convex":(r=pe(t)).length===2?(a=fe(r.map(function(s){return[s.x,s.y]}),this.padding),i=Object(Ai.b)(a)):r.length>2&&(a=Z(r.map(function(s){return[s.x,s.y]}),this.padding),i=$e(a));break;case"bubble":i=(r=Fe(t,e,this.cfg.bubbleCfg)).length>=2&&$e(r)}return i},n.prototype.render=function(){this.group.addShape("path",{attrs:Object(b.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},n.prototype.addMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.addNonMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},n.prototype.removeMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},n.prototype.removeNonMember=function(t){if(t){Object(p.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},n.prototype.updateData=function(t,e){var r=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(i){return Object(p.isString)(i)?r.graph.findById(i):i})),e&&(this.nonMembers=e.map(function(i){return Object(p.isString)(i)?r.graph.findById(i):i})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.updateStyle=function(t){this.group.findById(this.id).attr(Object(b.__assign)({},t))},n.prototype.updateCfg=function(t){var e=this;this.cfg=Object(p.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(r){return Object(p.isString)(r)?e.graph.findById(r):r})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return Object(p.isString)(r)?e.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},n.prototype.contain=function(t){var e,r,i=this,a=(e=Object(p.isString)(t)?this.graph.findById(t):t).getKeyShape();if(e.get("type")==="path")r=_t(a.attr("path"));else{var s=a.getCanvasBBox();r=[[s.minX,s.minY],[s.maxX,s.minY],[s.maxX,s.maxY],[s.minX,s.maxY]]}return r=r.map(function(u){var l=i.graph.getPointByCanvas(u[0],u[1]);return[l.x,l.y]}),Oi(r,_t(this.path))},n.prototype.destroy=function(){this.group.remove(),this.cfg=null},n}(),Je=L.a.transform,tt=function(n){function t(e){var r=n.call(this)||this;return r.cfg=Object(p.deepMix)(r.getDefaultCfg(),e),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new dr(r.cfg.maxStep),r.redoStack=new dr(r.cfg.maxStep)),r}return Object(b.__extends)(t,n),t.prototype.init=function(){this.initCanvas();var e=new qn(this),r=new tr(this),i=new Ni(this),a=new zi(this);this.set({viewController:e,modeController:r,itemController:i,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas"),r=this.get("canvas").get("el").id,i=e.addGroup({id:r+"-root",className:nr.rootContainerClassName});if(this.get("groupByTypes")){var a=i.addGroup({id:r+"-edge",className:nr.edgeContainerClassName}),s=i.addGroup({id:r+"-node",className:nr.nodeContainerClassName}),u=i.addGroup({id:r+"-combo",className:nr.comboContainerClassName});u.toBack(),this.set({nodeGroup:s,edgeGroup:a,comboGroup:u})}var l=i.addGroup({id:r+"-delegate",className:nr.delegateContainerClassName});this.set({delegateGroup:l}),this.set("group",i)},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[]}},t.prototype.set=function(e,r){return Object(p.isPlainObject)(e)?this.cfg=Object(b.__assign)(Object(b.__assign)({},this.cfg),e):this.cfg[e]=r,this},t.prototype.get=function(e){var r;return(r=this.cfg)===null||r===void 0?void 0:r[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,r){Object(p.isString)(e)&&(e=this.findById(e));var i=this.get("itemController");r||(r=e.get("states")),i.clearItemStates(e,r),this.get("stateController").updateStates(e,r,!1)},t.prototype.node=function(e){typeof e=="function"&&this.set("nodeMapper",e)},t.prototype.edge=function(e){typeof e=="function"&&this.set("edgeMapper",e)},t.prototype.combo=function(e){typeof e=="function"&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,r){var i,a=this.get(e+"s");return Object(p.each)(a,function(s,u){if(r(s,u))return i=s}),i},t.prototype.findAll=function(e,r){var i=[];return Object(p.each)(this.get(e+"s"),function(a,s){r(a,s)&&i.push(a)}),i},t.prototype.findAllByState=function(e,r){return this.findAll(e,function(i){return i.hasState(r)})},t.prototype.translate=function(e,r){var i=this.get("group"),a=Object(p.clone)(i.getMatrix());a||(a=[1,0,0,0,1,0,0,0,1]),a=Je(a,[["t",e,r]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:i.getMatrix()}),this.autoPaint()},t.prototype.moveTo=function(e,r,i,a){var s=this.get("group");Qn(s,{x:e,y:r},i,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:s.getMatrix()})},t.prototype.fitView=function(e){e&&this.set("fitViewPadding",e),this.get("viewController").fitView(),this.autoPaint()},t.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},t.prototype.addBehaviors=function(e,r){return this.get("modeController").manipulateBehaviors(e,r,!0),this},t.prototype.removeBehaviors=function(e,r){return this.get("modeController").manipulateBehaviors(e,r,!1),this},t.prototype.updateBehavior=function(e,r,i){return this.get("modeController").updateBehavior(e,r,i),this},t.prototype.zoom=function(e,r){var i=this.get("group"),a=Object(p.clone)(i.getMatrix()),s=this.get("minZoom"),u=this.get("maxZoom");a||(a=[1,0,0,0,1,0,0,0,1]),a=Je(a,r?[["t",-r.x,-r.y],["s",e,e],["t",r.x,r.y]]:[["s",e,e]]),s&&a[0]<s||u&&a[0]>u||(i.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint())},t.prototype.zoomTo=function(e,r){var i=e/this.getZoom();this.zoom(i,r)},t.prototype.focusItem=function(e,r,i){var a=this.get("viewController"),s=!1;r?s=!0:r===void 0&&(s=this.get("animate"));var u={};i?u=i:i===void 0&&(u=this.get("animateCfg")),a.focus(e,s,u),this.autoPaint()},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,r){return this.get("viewController").getPointByClient(e,r)},t.prototype.getClientByPoint=function(e,r){return this.get("viewController").getClientByPoint(e,r)},t.prototype.getPointByCanvas=function(e,r){return this.get("viewController").getPointByCanvas(e,r)},t.prototype.getCanvasByPoint=function(e,r){return this.get("viewController").getCanvasByPoint(e,r)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(e,!0);if(r&&this.get("enabledStack")){var a=i.getID(),s={},u={};switch(i.getType()){case"node":s.nodes=[{id:a,visible:!1}],u.nodes=[{id:a,visible:!0}];break;case"edge":s.nodes=[{id:a,visible:!1}],u.edges=[{id:a,visible:!0}];break;case"combo":s.nodes=[{id:a,visible:!1}],u.combos=[{id:a,visible:!0}]}this.pushStack("visible",{before:s,after:u})}},t.prototype.hideItem=function(e,r){r===void 0&&(r=!0);var i=this.get("itemController").changeItemVisibility(e,!1);if(r&&this.get("enabledStack")){var a=i.getID(),s={},u={};switch(i.getType()){case"node":s.nodes=[{id:a,visible:!0}],u.nodes=[{id:a,visible:!1}];break;case"edge":s.nodes=[{id:a,visible:!0}],u.edges=[{id:a,visible:!1}];break;case"combo":s.nodes=[{id:a,visible:!0}],u.combos=[{id:a,visible:!1}]}this.pushStack("visible",{before:s,after:u})}},t.prototype.refreshItem=function(e){this.get("itemController").refreshItem(e)},t.prototype.setAutoPaint=function(e){this.set("autoPaint",e),this.get("canvas").set("autoDraw",e)},t.prototype.remove=function(e,r){r===void 0&&(r=!0),this.removeItem(e,r)},t.prototype.removeItem=function(e,r){r===void 0&&(r=!0);var i=e;if(Object(p.isString)(e)&&(i=this.findById(e)),!i&&Object(p.isString)(e))console.warn("The item to be removed does not exist!");else if(i){var a="";if(i.getType&&(a=i.getType()),r&&this.get("enabledStack")){var s=Object(b.__assign)(Object(b.__assign)({},i.getModel()),{itemType:a}),u={};switch(a){case"node":u.nodes=[s],u.edges=[];for(var l=i.getEdges(),h=l.length-1;h>=0;h--)u.edges.push(Object(b.__assign)(Object(b.__assign)({},l[h].getModel()),{itemType:"edge"}));break;case"edge":u.edges=[s];break;case"combo":u.combos=[s]}this.pushStack("delete",{before:u,after:{}})}if(a==="node"&&i.getModel().comboId&&this.updateComboTree(i),this.get("itemController").removeItem(i),a==="combo"){var v=vt(this.get("comboTrees"));this.set("comboTrees",v)}}},t.prototype.addItem=function(e,r,i,a){i===void 0&&(i=!0),a===void 0&&(a=!0);var s=this.get("comboSorted");this.set("comboSorted",s&&!a);var u=this.get("itemController");if(!function(ve,de){if(ve==="node"||ve==="combo"){if(de.id&&!Object(p.isString)(de.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c"+de.id+"%c is not a string.","font-size: 20px; color: red;",""),!1}else if(!(ve!=="edge"||de.source&&de.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0}(e,r))return!1;if(!r.id||!this.findById(r.id)){var l,h=this.get("comboTrees");if(h||(h=[]),e==="combo"){var v=this.get("itemMap"),k=!1;if(h.forEach(function(ve){k||_e(ve,function(de){if(r.parentId===de.id){k=!0;var me=Object(b.__assign)({id:r.id,depth:de.depth+2},r);de.children?de.children.push(me):de.children=[me],r.depth=me.depth,l=u.addItem(e,r)}var Te=v[de.id];return k&&Te&&Te.getType&&Te.getType()==="combo"&&u.updateCombo(Te,de.children),!0})}),!k){var T=Object(b.__assign)({id:r.id,depth:0},r);r.depth=T.depth,h.push(T),l=u.addItem(e,r)}this.set("comboTrees",h)}else if(e==="node"&&Object(p.isString)(r.comboId)&&h){var I;(I=this.findById(r.comboId))&&I.getType&&I.getType()!=="combo"&&console.warn("'"+r.comboId+"' is not a id of a combo in the graph, the node will be added without combo."),l=u.addItem(e,r);var j=this.get("itemMap"),F=!1,B=!1;(h||[]).forEach(function(ve){B||F||_e(ve,function(de){if(de.id===r.id)return B=!0,!1;if(r.comboId===de.id&&!B){F=!0;var me=Object(p.clone)(r);me.itemType="node",de.children?de.children.push(me):de.children=[me],me.depth=de.depth+1}return F&&j[de.id].getType&&j[de.id].getType()==="combo"&&u.updateCombo(j[de.id],de.children),!0})})}else l=u.addItem(e,r);(e==="node"&&r.comboId||e==="combo"&&r.parentId)&&(I=this.findById(r.comboId||r.parentId))&&I.getType&&I.getType()==="combo"&&I.addChild(l);var U=this.get("combos");if(U&&U.length>0&&this.sortCombos(),this.autoPaint(),i&&this.get("enabledStack")){var q=Object(b.__assign)(Object(b.__assign)({},l.getModel()),{itemType:e}),$={};switch(e){case"node":$.nodes=[q];break;case"edge":$.edges=[q];break;case"combo":$.combos=[q]}this.pushStack("add",{before:{},after:$})}return l}console.warn("This item exists already. Be sure the id %c"+r.id+"%c is unique.","font-size: 20px; color: red;","")},t.prototype.add=function(e,r,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!0),this.addItem(e,r,i,a)},t.prototype.updateItem=function(e,r,i){var a=this;i===void 0&&(i=!0);var s,u=this.get("itemController");s=Object(p.isString)(e)?this.findById(e):e;var l=Object(p.clone)(s.getModel()),h="";s.getType&&(h=s.getType());var v=Object(b.__spreadArray)([],s.getStates());if(h==="combo"&&Object(p.each)(v,function(j){return a.setItemState(s,j,!1)}),u.updateItem(s,r),h==="combo"&&Object(p.each)(v,function(j){return a.setItemState(s,j,!0)}),i&&this.get("enabledStack")){var k={nodes:[],edges:[],combos:[]},T={nodes:[],edges:[],combos:[]},I=Object(b.__assign)({id:l.id},r);switch(h){case"node":k.nodes.push(l),T.nodes.push(I);break;case"edge":k.edges.push(l),T.edges.push(I);break;case"combo":k.combos.push(l),T.combos.push(I)}h==="node"&&k.nodes.push(l),this.pushStack("update",{before:k,after:T})}},t.prototype.update=function(e,r,i){i===void 0&&(i=!0),this.updateItem(e,r,i)},t.prototype.setItemState=function(e,r,i){Object(p.isString)(e)&&(e=this.findById(e)),this.get("itemController").setItemState(e,r,i);var a=this.get("stateController");Object(p.isString)(i)?a.updateState(e,r+":"+i,!0):a.updateState(e,r,i)},t.prototype.priorityState=function(e,r){this.get("itemController").priorityState(e,r)},t.prototype.data=function(e){er(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var i=r.nodes,a=i===void 0?[]:i,s=r.edges,u=s===void 0?[]:s,l=r.combos,h=l===void 0?[]:l;if(this.clear(!0),this.emit("beforerender"),Object(p.each)(a,function(I){e.add("node",I,!1,!1)}),h&&h.length!==0){var v=lt(h,a);this.set("comboTrees",v),e.addCombos(h)}Object(p.each)(u,function(I){e.add("edge",I,!1,!1)});var k=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var T=e.get("layoutController");if(T){if(T.layout(function(){e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",k)}),this.destroyed)return}else e.get("fitView")&&e.fitView(),e.get("fitCenter")&&e.fitCenter(),e.emit("afterrender"),e.set("animate",k);this.get("groupByTypes")||(h&&h.length!==0?this.sortCombos():r.nodes&&r.edges&&r.nodes.length<r.edges.length?this.getNodes().forEach(function(I){I.toFront()}):this.getEdges().forEach(function(I){I.toBack()})),this.get("enabledStack")&&this.pushStack("render")},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,r,i){var a,s=this,u=this.get("itemMap");Object(p.each)(i,function(l){if(a=u[l.id]){if(s.get("animate")&&e==="node"){var h=a.getContainer().getMatrix();h||(h=[1,0,0,0,1,0,0,0,1]),a.set("originAttrs",{x:h[6],y:h[7]})}s.updateItem(a,l,!1)}else a=s.addItem(e,l,!1);a&&r[e+"s"].push(a)})},t.prototype.changeData=function(e,r){r===void 0&&(r=!0);var i=this;if(!er(e))return this;r&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:e}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(j){return i.clearItemStates(j)}),this.getEdges().map(function(j){return i.clearItemStates(j)});var a=this.get("canvas"),s=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(e),i.render());var u=this.get("itemMap"),l={nodes:[],edges:[]},h=e.combos;if(h){var v=lt(h,e.nodes);this.set("comboTrees",v)}else this.set("comboTrees",[]);this.diffItems("node",l,e.nodes),Object(p.each)(u,function(j,F){u[F].getModel().depth=0,j.getType&&j.getType()==="edge"||(j.getType&&j.getType()==="combo"?(delete u[F],j.destroy()):l.nodes.indexOf(j)<0&&(delete u[F],i.remove(j,!1)))});for(var k=this.getCombos(),T=k.length-1;T>=0;T--)k[T].destroyed&&k.splice(T,1);h&&(i.addCombos(h),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,e.edges),Object(p.each)(u,function(j,F){(!j.getType||j.getType()!=="node"&&j.getType()!=="combo")&&l.edges.indexOf(j)<0&&(delete u[F],i.remove(j,!1))}),this.set({nodes:l.nodes,edges:l.edges});var I=this.get("layoutController");return I&&(I.changeData(),i.get("animate")&&!I.getLayoutType()?i.positionsAnimate():i.autoPaint()),setTimeout(function(){a.set("localRefresh",s)},16),this},t.prototype.addCombos=function(e){var r=this.get("comboTrees");this.get("itemController").addCombos(r,e)},t.prototype.createCombo=function(e,r){var i=this;this.set("comboSorted",!1);var a,s="";if(e){if(Object(p.isString)(e))s=e,a={id:e};else{if(!(s=e.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");a=e}var u=r.map(function(h){var v=i.findById(h),k=v.getModel(),T="";v.getType&&(T=v.getType());var I={id:v.getID(),itemType:T};return T==="combo"?(I.parentId=s,k.parentId=s):T==="node"&&(I.comboId=s,k.comboId=s),I});a.children=u,this.addItem("combo",a,!1),this.set("comboSorted",!1);var l=this.get("comboTrees");(l||[]).forEach(function(h){_e(h,function(v){return v.id!==s||(v.itemType="combo",v.children=u,!1)})}),l&&this.sortCombos()}},t.prototype.uncombo=function(e){var r=this,i=e;if(Object(p.isString)(e)&&(i=this.findById(e)),!i||i.getType&&i.getType()!=="combo")console.warn("The item is not a combo!");else{var a=i.getModel().parentId,s=this.get("comboTrees");s||(s=[]);var u,l=this.get("itemMap"),h=i.get("id"),v=[],k=this.get("combos"),T=this.findById(a);if(s.forEach(function(j){u||_e(j,function(F){if(F.id===h){u=F,i.getEdges().forEach(function(U){r.removeItem(U,!1)});var B=k.indexOf(i);k.splice(B,1),delete l[h],i.destroy()}return!a||!u||F.id!==a||(T.removeCombo(i),(B=(v=F.children).indexOf(u))!==-1&&v.splice(B,1),u.children.forEach(function(U){var q=r.findById(U.id),$=q.getModel();q.getType&&q.getType()==="combo"?(U.parentId=a,delete U.comboId,$.parentId=a,delete $.comboId):q.getType&&q.getType()==="node"&&(U.comboId=a,$.comboId=a),T.addChild(q),v.push(U)}),!1)})}),!a&&u){var I=s.indexOf(u);s.splice(I,1),u.children.forEach(function(j){j.parentId=void 0;var F=r.findById(j.id).getModel();delete F.parentId,delete F.comboId,j.itemType!=="node"&&s.push(j)})}}},t.prototype.updateCombos=function(){var e=this,r=this.get("comboTrees"),i=this.get("itemController"),a=this.get("itemMap");(r||[]).forEach(function(s){_e(s,function(u){if(!u)return!0;var l=a[u.id];if(l&&l.getType&&l.getType()==="combo"){var h=Object(b.__spreadArray)([],l.getStates());Object(p.each)(h,function(v){return e.setItemState(l,v,!1)}),i.updateCombo(l,u.children),Object(p.each)(h,function(v){return e.setItemState(l,v,!0)})}return!0})}),this.sortCombos()},t.prototype.updateCombo=function(e){var r,i=this,a=e;if(Object(p.isString)(e)&&(a=this.findById(e)),!a||a.getType&&a.getType()!=="combo")console.warn("The item to be updated is not a combo!");else{r=a.get("id");var s=this.get("comboTrees"),u=this.get("itemController"),l=this.get("itemMap");(s||[]).forEach(function(h){_e(h,function(v){if(!v)return!0;var k=l[v.id];if(r===v.id&&k&&k.getType&&k.getType()==="combo"){var T=Object(b.__spreadArray)([],k.getStates());Object(p.each)(T,function(I){k.getStateStyle(I)&&i.setItemState(k,I,!1)}),u.updateCombo(k,v.children),Object(p.each)(T,function(I){k.getStateStyle(I)&&i.setItemState(k,I,!0)}),r&&(r=v.parentId)}return!0})})}},t.prototype.updateComboTree=function(e,r,i){i===void 0&&(i=!0);var a;this.set("comboSorted",!1);var s,u=(a=Object(p.isString)(e)?this.findById(e):e).getModel(),l=u.comboId||u.parentId,h="";if(a.getType&&(h=a.getType()),r&&h==="combo"){var v,k=this.get("comboTrees"),T=!0;if((k||[]).forEach(function(U){v||Ft(U,function(q){if(!v)return q.id===a.getID()&&(v=q),!0})}),Ft(v,function(U){return U.id!==r||(T=!1,!1)}),!T)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(i&&this.get("enabledStack")){var I={},j={};h==="combo"?(I.combos=[{id:u.id,parentId:u.parentId}],j.combos=[{id:u.id,parentId:r}]):h==="node"&&(I.nodes=[{id:u.id,parentId:u.comboId}],j.nodes=[{id:u.id,parentId:r}]),this.pushStack("updateComboTree",{before:I,after:j})}if(u.parentId||u.comboId){var F=this.findById(u.parentId||u.comboId);F&&F.removeChild(a)}h==="combo"?u.parentId=r:h==="node"&&(u.comboId=r),r&&(s=this.findById(r))&&s.addChild(a),l&&(s=this.findById(l))&&s.removeChild(a);var B=vt(this.get("comboTrees"),u.id,r);this.set("comboTrees",B),this.updateCombos()},t.prototype.save=function(){var e=[],r=[],i=[];return Object(p.each)(this.get("nodes"),function(a){e.push(a.getModel())}),Object(p.each)(this.get("edges"),function(a){r.push(a.getModel())}),Object(p.each)(this.get("combos"),function(a){i.push(a.getModel())}),{nodes:e,edges:r,combos:i}},t.prototype.changeSize=function(e,r){return this.get("viewController").changeSize(e,r),this},t.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var e=this.get("nodes"),r=this.get("edges"),i=this.get("edges");Object(p.each)(e,function(a){a.refresh()}),Object(p.each)(r,function(a){a.refresh()}),Object(p.each)(i,function(a){a.refresh()})}this.emit("aftergraphrefresh"),this.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if(Object(p.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||e.getType()==="combo"))return e.getChildren();console.warn("The combo does not exist!")},t.prototype.positionsAnimate=function(){var e=this;e.emit("beforeanimate");var r=e.get("animateCfg"),i=r.onFrame,a=e.getNodes(),s=a.map(function(u){var l=u.getModel();return{id:l.id,x:l.x,y:l.y}});e.isAnimating()&&e.stopAnimate(),e.get("canvas").animate(function(u){Object(p.each)(s,function(l){var h=e.findById(l.id);if(h&&!h.destroyed){var v=h.get("originAttrs"),k=h.get("model");if(!v){var T=h.getContainer().getMatrix();T||(T=[1,0,0,0,1,0,0,0,1]),v={x:T[6],y:T[7]},h.set("originAttrs",v)}if(i){var I=i(h,u,l,v);h.set("model",Object.assign(k,I))}else k.x=v.x+(l.x-v.x)*u,k.y=v.y+(l.y-v.y)*u}}),e.refreshPositions()},{duration:r.duration,easing:r.easing,callback:function(){Object(p.each)(a,function(u){u.set("originAttrs",null)}),r.callback&&r.callback(),e.emit("afteranimate"),e.animating=!1}})},t.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var e,r=this.get("nodes"),i=this.get("edges"),a=this.get("vedges"),s=this.get("combos"),u={};Object(p.each)(r,function(l){e=l.getModel();var h=l.get("originAttrs");if(!h||e.x!==h.x||e.y!==h.y){var v=l.updatePosition({x:e.x,y:e.y});u[e.id]=v,e.comboId&&(u[e.comboId]=u[e.comboId]||v)}}),s&&s.length!==0&&this.updateCombos(),Object(p.each)(i,function(l){var h=l.getSource().getModel(),v=l.getTarget();if(!Object(p.isPlainObject)(v)){var k=v.getModel();(u[h.id]||u[k.id]||l.getModel().isComboEdge)&&l.refresh()}}),Object(p.each)(a,function(l){l.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},t.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},t.prototype.setMode=function(e){return this.get("modeController").setMode(e),this},t.prototype.clear=function(e){var r;return e===void 0&&(e=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,r,i){var a=this,s=this.get("layoutController");if(Object(p.isString)(e)&&(e={type:e}),r){var u=i;u||(u=r==="begin"?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var l=["force","gForce","fruchterman"];l.includes(e.type)||!e.type&&l.includes(s==null?void 0:s.layoutType)?e.center=[u.x,u.y]:this.once("afterlayout",function(k){var T=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*T[0]+T[6],u.y=u.y*T[0]+T[7];var I=a.getGroup().getCanvasBBox(),j=I.minX,F=I.maxX,B=I.minY,U={x:(j+F)/2,y:(B+I.maxY)/2};r==="begin"&&(U.x=j,U.y=B),a.translate(u.x-U.x,u.y-U.y)})}var h=this.get("layout"),v={};Object.assign(v,h,e),this.set("layout",v),s.isLayoutTypeSame(v)&&v.gpuEnabled===h.gpuEnabled?s.updateLayoutCfg(v):s.changeLayout(v)},t.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},t.prototype.layout=function(){var e=this.get("layoutController"),r=this.get("layout");r&&e&&(r.workerEnabled?e.layout():e.layoutMethod?e.relayout(!0):e.layout())},t.prototype.collapseCombo=function(e){var r=this;if(Object(p.isString)(e)&&(e=this.findById(e)),e){this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel();this.get("itemController").collapseCombo(e),i.collapsed=!0;var a=this.getEdges().concat(this.get("vedges")),s=[],u=[],l=this.get("comboTrees"),h=!1;(l||[]).forEach(function(T){h||Ft(T,function(I){if(h&&I.depth<=i.depth)return!1;if(i.id===I.id&&(h=!0),h){var j=r.findById(I.id);j&&j.getType&&j.getType()==="combo"&&(s=s.concat(j.getNodes()),u=u.concat(j.getCombos()))}return!0})});var v={},k=[];a.forEach(function(T){if(!T.isVisible()||T.getModel().isVEdge){var I=T.getSource(),j=T.getTarget();if((s.includes(I)||u.includes(I))&&!s.includes(j)&&!u.includes(j)||I.getModel().id===i.id){if((q=T.getModel()).isVEdge)return void r.removeItem(T,!1);for(var F=j.getModel();!j.isVisible();){if(!(j=r.findById(F.parentId||F.comboId))||!F.parentId&&!F.comboId)return;F=j.getModel()}var B=F.id;if(v[i.id+"-"+B])return void(v[i.id+"-"+B]+=q.size||1);var U=r.addItem("vedge",{source:i.id,target:B,isVEdge:!0},!1);v[i.id+"-"+B]=q.size||1,k.push(U)}else if(!s.includes(I)&&!u.includes(I)&&(s.includes(j)||u.includes(j))||j.getModel().id===i.id){var q;if((q=T.getModel()).isVEdge)return void r.removeItem(T,!1);for(var $=I.getModel();!I.isVisible();){if(!(I=r.findById($.parentId||$.comboId))||!$.parentId&&!$.comboId)return;$=I.getModel()}var ve=$.id;if(v[ve+"-"+i.id])return void(v[ve+"-"+i.id]+=q.size||1);U=r.addItem("vedge",{target:i.id,source:ve,isVEdge:!0},!1),v[ve+"-"+i.id]=q.size||1,k.push(U)}}}),k.forEach(function(T){var I=T.getModel();r.updateItem(T,{size:v[I.source+"-"+I.target]},!1)}),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})}else console.warn("The combo to be collapsed does not exist!")},t.prototype.expandCombo=function(e){var r=this;if(Object(p.isString)(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo")console.warn("The combo to be collapsed does not exist!");else{this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var i=e.getModel();this.get("itemController").expandCombo(e),i.collapsed=!1;var a=this.getEdges().concat(this.get("vedges")),s=[],u=[],l=this.get("comboTrees"),h=!1;(l||[]).forEach(function(T){h||Ft(T,function(I){if(h&&I.depth<=i.depth)return!1;if(i.id===I.id&&(h=!0),h){var j=r.findById(I.id);j&&j.getType&&j.getType()==="combo"&&(s=s.concat(j.getNodes()),u=u.concat(j.getCombos()))}return!0})});var v={},k={};a.forEach(function(T){if(!T.isVisible()||T.getModel().isVEdge){var I=T.getSource(),j=T.getTarget(),F=I.get("id"),B=j.get("id");if((s.includes(I)||u.includes(I))&&!s.includes(j)&&!u.includes(j)||F===i.id){if(T.getModel().isVEdge)return void r.removeItem(T,!1);for(var U=j.getModel();!j.isVisible();){if(!(j=r.findById(U.comboId||U.parentId))||!U.parentId&&!U.comboId)return;U=j.getModel()}B=U.id;for(var q=I.getModel();!I.isVisible();){if(!(I=r.findById(q.comboId||q.parentId))||!q.parentId&&!q.comboId)return;if(q.comboId===i.id||q.parentId===i.id)break;q=I.getModel()}if(F=q.id,B){if(v[ve=F+"-"+B])return v[ve]+=T.getModel().size||1,void r.updateItem(k[ve],{size:v[ve]},!1);var $=r.addItem("vedge",{source:F,target:B,isVEdge:!0},!1);v[ve]=T.getModel().size||1,k[ve]=$}}else if(!s.includes(I)&&!u.includes(I)&&(s.includes(j)||u.includes(j))||B===i.id){if(T.getModel().isVEdge)return void r.removeItem(T,!1);for(q=I.getModel();!I.isVisible();){if(!(I=r.findById(q.comboId||q.parentId))||!q.parentId&&!q.comboId)return;q=I.getModel()}for(F=q.id,U=j.getModel();!j.isVisible();){if(!(j=r.findById(U.comboId||U.parentId))||!U.parentId&&!U.comboId)return;if(U.comboId===i.id||U.parentId===i.id)break;U=j.getModel()}if(B=U.id,F){var ve;if(v[ve=F+"-"+B])return v[ve]+=T.getModel().size||1,void r.updateItem(k[ve],{size:v[ve]},!1);$=r.addItem("vedge",{target:B,source:F,isVEdge:!0},!1),v[ve]=T.getModel().size||1,k[ve]=$}}else(s.includes(I)||u.includes(I))&&(s.includes(j)||u.includes(j))&&I.isVisible()&&j.isVisible()&&T.show()}}),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})}},t.prototype.collapseExpandCombo=function(e){if(Object(p.isString)(e)&&(e=this.findById(e)),e&&(!e.getType||e.getType()==="combo")){for(var r=e.getModel(),i=this.findById(r.parentId);i;){var a=i.getModel();if(a.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(i=void 0);i=this.findById(a.parentId)}r.collapsed?this.expandCombo(e):this.collapseCombo(e),this.updateCombo(e)}},t.prototype.sortCombos=function(){var e=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var r=[],i={};(this.get("comboTrees")||[]).forEach(function(a){Ft(a,function(s){return r[s.depth]?r[s.depth].push(s.id):r[s.depth]=[s.id],i[s.id]=s.depth,!0})}),(this.getEdges().concat(this.get("vedges"))||[]).forEach(function(a){var s=a.getModel(),u=i[s.source]||0,l=i[s.target]||0,h=Math.max(u,l);r[h]?r[h].push(s.id):r[h]=[s.id]}),r.forEach(function(a){if(a&&a.length)for(var s=a.length-1;s>=0;s--){var u=e.findById(a[s]);u&&u.toFront()}})}},t.prototype.getNeighbors=function(e,r){var i=e;return Object(p.isString)(e)&&(i=this.findById(e)),i.getNeighbors(r)},t.prototype.getNodeDegree=function(e,r,i){r===void 0&&(r=void 0),i===void 0&&(i=!1);var a=e;Object(p.isString)(e)&&(a=this.findById(e));var s=this.get("degrees");s&&!i||(s=V(this.save()),this.set("degrees",s));var u=s[a.getID()],l=0;if(!u)return 0;switch(r){case"in":l=u.inDegree;break;case"out":l=u.outDegree;break;case"all":l=u;break;default:l=u.degree}return l},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},t.prototype.pushStack=function(e,r,i){if(e===void 0&&(e="update"),i===void 0&&(i="undo"),this.get("enabledStack")){var a=r?Object(p.clone)(r):{before:{},after:Object(p.clone)(this.save())};i==="redo"?this.redoStack.push({action:e,data:a}):this.undoStack.push({action:e,data:a}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !")},t.prototype.getAdjMatrix=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix");return i&&e||(i=z(this.save(),r),this.set("adjMatrix",i)),i},t.prototype.getShortestPathMatrix=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=this.get("directed"));var i=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return i&&e||(i=z(this.save(),r),this.set("adjMatrix",i)),a&&e||(a=ue(this.save(),r),this.set("shortestPathMatrix",a)),a},t.prototype.on=function(e,r,i){return n.prototype.on.call(this,e,r,i)},t.prototype.destroy=function(){this.clear(),this.clearStack(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("canvas").destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},t.prototype.createHull=function(e){if(e.members&&!(e.members.length<1)){var r=this.get("hullGroup"),i=this.get("hullMap");if(i||(i={},this.set("hullMap",i)),r&&!r.get("destroyed")||((r=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",r)),i[e.id])return console.warn("Existed hull id."),i[e.id];var a=r.addGroup({id:e.id+"-container"}),s=new Xe(this,Object(b.__assign)(Object(b.__assign)({},e),{group:a}));return i[s.id]=s,s}console.warn("Create hull failed! The members is empty.")},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var r;r=Object(p.isString)(e)?this.getHullById(e):e,delete this.get("hullMap")[r.id],r.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();e&&Object.keys(e).length&&(Object.keys(e).forEach(function(r){e[r].destroy()}),this.set("hullMap",{}))},t}(P.a);function Ve(n){return(Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var it=L.a.transform,pt=["startArrow","endArrow"],Et={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},mt={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:Et,combo:Et},xt={options:{},itemType:"",type:"",getCustomConfig:function(n){return{}},getOptions:function(n,t){return t==="move"||t==="bbox"?{}:Object(p.deepMix)({labelCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:typeof window!="undefined"&&window.getComputedStyle&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(n)||{},n)},draw:function(n,t){var e=this.drawShape(n,t);return e.set("className",this.itemType+"-shape"),n.label&&this.drawLabel(n,t).set("className",this.itemType+"-label"),e},afterDraw:function(n,t,e){},drawShape:function(n,t){return null},drawLabel:function(n,t){var e=this.getOptions(n).labelCfg||{},r=this.getLabelStyle(n,e,t),i=r.rotate;delete r.rotate;var a=t.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape"});if(i){var s=a.getBBox(),u=a.getMatrix();if(u||(u=[1,0,0,0,1,0,0,0,1]),r.rotateCenter)switch(r.rotateCenter){case"center":u=it(u,[["t",-s.width/2,-s.height/2],["r",i],["t",s.width/2,s.height/2]]);break;case"lefttop":u=it(u,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":u=it(u,[["t",-r.x,-r.y-s.height/2],["r",i],["t",r.x,r.y+s.height/2]]);break;default:u=it(u,[["t",-s.width/2,-s.height/2],["r",i],["t",s.width/2,s.height/2]])}else u=it(u,[["t",-r.x,-r.y-s.height/2],["r",i],["t",r.x,r.y+s.height/2]]);a.setMatrix(u)}if(r.background){var l=this.drawLabelBg(n,t,a),h=this.itemType+"-label-bg";l.set("classname",h),a.toFront()}return a},drawLabelBg:function(n,t,e){var r=this.options.labelCfg,i=Object(p.mix)({},r,n.labelCfg),a=this.getLabelBgStyleByPosition(e,n,i,t);return t.addShape("rect",{name:"text-bg-shape",attrs:a})},getLabelStyleByPosition:function(n,t,e){return{text:n.label}},getLabelBgStyleByPosition:function(n,t,e,r){return{}},getLabelStyle:function(n,t,e){var r=this.getLabelStyleByPosition(n,t,e),i=this.itemType+"Label",a=nr[i]?nr[i].style:null;return Object(b.__assign)(Object(b.__assign)(Object(b.__assign)({},a),r),t.style)},getShapeStyle:function(n){return n.style},update:function(n,t,e){this.updateShapeStyle(n,t,e),this.updateLabel(n,t,e)},updateShapeStyle:function(n,t,e){var r=t.getContainer(),i=t.getKeyShape(),a=Object(p.mix)({},i.attr(),n.style),s=function(l){var h,v=a[l];if(Object(p.isPlainObject)(v)){var k=r.find(function(T){return T.get("name")===l});k&&k.attr(v)}else i.attr(((h={})[l]=v,h))};for(var u in a)s(u)},updateLabel:function(n,t,e){var r=t.getContainer(),i=this.getOptions({},e).labelCfg,a=this.itemType+"-label",s=r.find(function(ve){return ve.get("className")===a}),u=this.itemType+"-label-bg",l=r.find(function(ve){return ve.get("classname")===u});if(n.label||n.label==="")if(s){var h={};t.getModel&&(h=t.getModel().labelCfg);var v=Object(p.deepMix)({},i,h,n.labelCfg),k=this.getLabelStyleByPosition(n,v,r),T=n.labelCfg?n.labelCfg.style:void 0,I=v.style&&v.style.background,j=Object(b.__assign)(Object(b.__assign)(Object(b.__assign)({},s.attr()),k),T),F=j.rotate;if(delete j.rotate,F){var B=[1,0,0,0,1,0,0,0,1];B=it(B,[["t",-j.x,-j.y],["r",F],["t",j.x,j.y]]),s.resetMatrix(),s.attr(Object(b.__assign)(Object(b.__assign)({},j),{matrix:B}))}else s.resetMatrix(),s.attr(j);if(l)if(j.background){var U=this.getLabelBgStyleByPosition(s,n,v,r),q=Object(b.__assign)(Object(b.__assign)({},U),I);if(l.resetMatrix(),F){var $=[1,0,0,0,1,0,0,0,1];$=it($,[["t",-q.x,-q.y],["r",F],["t",q.x,q.y]]),q.matrix=$}l.attr(q)}else r.removeChild(l);else j.background&&((l=this.drawLabelBg(n,r,s)).set("classname",u),s.toFront())}else this.drawLabel(n,r).set("className",a)},afterUpdate:function(n,t){},setState:function(n,t,e){var r,i,a=e.get("keyShape");if(a&&!a.destroyed){var s=e.getType(),u=Object(p.isBoolean)(t)?n:n+":"+t,l=this.getStateStyle(u,e),h=e.getStateStyle(u);if(h||l){var v=Object(p.mix)({},h||l),k=e.getContainer(),T={x:1,y:1,cx:1,cy:1};if(s==="combo"&&(T.r=1,T.width=1,T.height=1),t){var I=function(st){var It,gt=v[st];if(Object(p.isPlainObject)(gt)&&!pt.includes(st)){var Pt=k.find(function(Rt){return Rt.get("name")===st});Pt&&Pt.attr(gt)}else a.attr(((It={})[st]=gt,It))};for(var j in v)I(j)}else{var F=Wt(e.getCurrentStatesStyle()),B=e.getModel(),U=Object(p.mix)({},B.style,Wt(e.getOriginStyle())),q=a.get("name"),$=a.attr(),ve={};Object.keys($).forEach(function(st){if(st!=="img"){var It=$[st];It&&Ve(It)==="object"?ve[st]=Object(p.clone)(It):ve[st]=It}});var de={},me=function(st){var It=v[st];if(Object(p.isPlainObject)(It)&&!pt.includes(st)){var gt=k.find(function(Zt){return Zt.get("name")===st});if(gt){var Pt=Wt(gt.attr());Object(p.each)(It,function(Zt,kt){if(st===q&&ve[kt]&&!T[kt]){delete ve[kt];var Vt=U[st][kt]||mt[s][kt];a.attr(kt,Vt)}else if(Pt[kt]||Pt[kt]===0){delete Pt[kt];var Dt=U[st][kt]||mt[s][kt];gt.attr(kt,Dt)}}),de[st]=Pt}}else if(ve[st]&&!T[st]){delete ve[st];var Rt=U[st]||(U[q]?U[q][st]:void 0)||mt[s][st];a.attr(st,Rt)}};for(var Te in v)me(Te);for(var j in q?de[q]=ve:Object(p.mix)(de,ve),F)if(!T[j]){var Oe=F[j];Object(p.isPlainObject)(Oe)&&!pt.includes(j)||(q?(Object(p.mix)(U[q],((i={})[j]=Oe,i)),delete U[j]):Object(p.mix)(U,((r={})[j]=Oe,r)),delete F[j])}var Pe={};Object(p.deepMix)(Pe,U,de,F);var Ze=!1,nt=function(st){var It,gt,Pt=Pe[st];if(Object(p.isPlainObject)(Pt)&&!pt.includes(st)){var Rt=k.find(function(kt){return kt.get("name")===st});Rt&&(Rt.get("type")==="text"&&(delete Pt.x,delete Pt.y,delete Pt.matrix),st===q&&(s==="combo"&&(delete Pt.r,delete Pt.width,delete Pt.height),Ze=!0),Rt.attr(Pt))}else if(!Ze){var Zt=Pt||mt[s][st];s==="combo"?q||a.attr(((It={})[st]=Zt,It)):a.attr(((gt={})[st]=Zt,gt))}};for(var ct in Pe)nt(ct)}}}},getStateStyle:function(n,t){var e=t.getModel(),r=t.getType(),i=this.getOptions(e),a=i.stateStyles,s=i.style,u=s===void 0?{}:s,l=e.stateStyles?e.stateStyles[n]:a&&a[n];return r==="combo"?Object(p.clone)(l):Object(p.mix)({},u,l)},getControlPoints:function(n){return n.controlPoints},getAnchorPoints:function(n){var t,e;return(n==null?void 0:n.anchorPoints)||((t=this.getCustomConfig(n))===null||t===void 0?void 0:t.anchorPoints)||((e=this.options)===null||e===void 0?void 0:e.anchorPoints)}},Ot={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:nr.nodeLabel.offset,getSize:function(n){var t=n.size||this.getOptions({}).size||nr.defaultNode.size;return Object(p.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),Object(p.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(n,t){var e=t.position||this.labelPosition;if(e==="center")return{x:0,y:0,text:n.label};var r=t.offset;Object(p.isNil)(r)&&(r=this.offset);var i,a=this.getSize(n),s=a[0],u=a[1];switch(e){case"top":i={x:0,y:0-u/2-r,textBaseline:"bottom"};break;case"bottom":i={x:0,y:u/2+r,textBaseline:"top"};break;case"left":i={x:0-s/2-r,y:0,textAlign:"right"};break;default:i={x:s/2+r,y:0,textAlign:"left"}}return i.text=n.label,i},getLabelBgStyleByPosition:function(n,t,e,r){if(!n)return{};var i=n.getBBox(),a=e.style&&e.style.background;if(!a)return{};var s,u=Ur(a.padding),l=i.width+u[1]+u[3],h=i.height+u[0]+u[2],v=e.offset;return Object(p.isNil)(v)&&(v=this.offset),s={x:i.minX-u[3],y:i.minY-u[0]},s=Object(b.__assign)(Object(b.__assign)(Object(b.__assign)({},s),a),{width:l,height:h})},drawShape:function(n,t){var e=this.shapeType,r=this.getShapeStyle(n);return t.addShape(e,{attrs:r,draggable:!0,name:"node-shape"})},updateLinkPoints:function(n,t){var e,r=this.getOptions(n).linkPoints,i=t.find(function(me){return me.get("className")==="link-point-left"}),a=t.find(function(me){return me.get("className")==="link-point-right"}),s=t.find(function(me){return me.get("className")==="link-point-top"}),u=t.find(function(me){return me.get("className")==="link-point-bottom"});i&&(e=i.attr()),a&&!e&&(e=a.attr()),s&&!e&&(e=s.attr()),u&&!e&&(e=u.attr()),e||(e=r);var l=Object(p.mix)({},e,n.linkPoints),h=l.fill,v=l.stroke,k=l.lineWidth,T=l.size/2;T||(T=l.r);var I=n.linkPoints?n.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},j=I.left,F=I.right,B=I.top,U=I.bottom,q=this.getSize(n),$=q[0],ve=q[1],de={r:T,fill:h,stroke:v,lineWidth:k};i?j||j===void 0?i.attr(Object(b.__assign)(Object(b.__assign)({},de),{x:-$/2,y:0})):i.remove():j&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},de),{x:-$/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a?(F||F===void 0||a.remove(),a.attr(Object(b.__assign)(Object(b.__assign)({},de),{x:$/2,y:0}))):F&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},de),{x:$/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),s?(B||B===void 0||s.remove(),s.attr(Object(b.__assign)(Object(b.__assign)({},de),{x:0,y:-ve/2}))):B&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},de),{x:0,y:-ve/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u?U||U===void 0?u.attr(Object(b.__assign)(Object(b.__assign)({},de),{x:0,y:ve/2})):u.remove():U&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},de),{x:0,y:ve/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(n,t,e,r){t.get("keyShape").attr(Object(b.__assign)({},e)),this.updateLabel(n,t),r&&this.updateIcon(n,t)},updateIcon:function(n,t){var e=this,r=t.getContainer(),i=this.getOptions(n).icon,a=(n.icon?n.icon:{show:void 0}).show,s=r.find(function(k){return k.get("className")===e.type+"-icon"});if(s)if(a||a===void 0){var u=Object(p.mix)({},s.attr(),i),l=u.width,h=u.height;s.attr(Object(b.__assign)(Object(b.__assign)({},u),{x:-l/2,y:-h/2}))}else s.remove();else if(a){l=i.width,h=i.height,r.addShape("image",{attrs:Object(b.__assign)(Object(b.__assign)({},i),{x:-l/2,y:-h/2}),className:this.type+"-icon",name:this.type+"-icon"});var v=r.find(function(k){return k.get("className")==="node-label"});v&&v.toFront()}}},yt=Object(b.__assign)(Object(b.__assign)({},xt),Ot);nn.registerNode("single-node",yt);var qe={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:nr.defaultEdge.size,style:{x:0,y:0,stroke:nr.defaultEdge.style.stroke,lineAppendWidth:nr.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:nr.edgeLabel.style.fill,fontSize:nr.edgeLabel.style.fontSize}},stateStyles:Object(b.__assign)({},nr.edgeStateStyles)},getPath:function(n){var t=[];return Object(p.each)(n,function(e,r){r===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t},getShapeStyle:function(n){var t=this.options.style,e={stroke:n.color},r=Object(p.mix)({},t,e,n.style),i=n.size||nr.defaultEdge.size,a=(n=this.getPathPoints(n)).startPoint,s=n.endPoint,u=this.getControlPoints(n),l=[a];u&&(l=l.concat(u)),l.push(s);var h=this.getPath(l);return Object(p.mix)({},nr.defaultEdge.style,{stroke:nr.defaultEdge.color,lineWidth:i,path:h},r)},updateShapeStyle:function(n,t,e){var r,i=t.getContainer(),a={stroke:n.color},s=((r=t.getKeyShape)===null||r===void 0?void 0:r.call(t))||i.find(function($){return $.get("className")==="edge-shape"}),u=n.size,l=(n=this.getPathPoints(n)).startPoint,h=n.endPoint,v=this.getControlPoints(n),k=[l];v&&(k=k.concat(v)),k.push(h);var T=s.attr(),I=Object(p.mix)({},a,T,n.style),j=n.sourceNode,F=n.targetNode,B={radius:I.radius};v||(B={source:j,target:F,offset:I.offset,radius:I.radius});var U=this.getPath(k,B),q={};e==="move"?q={path:U}:(T.endArrow&&I.endArrow===!1&&(n.style.endArrow={path:""}),T.startArrow&&I.startArrow===!1&&(n.style.startArrow={path:""}),q=Object(p.mix)(a,T,{lineWidth:u,path:U},n.style)),s&&s.attr(q)},getLabelStyleByPosition:function(n,t,e){var r,i=t.position||this.labelPosition,a={},s=e&&e.find(function(k){return k.get("className")==="edge-shape"});r=i==="start"?0:i==="end"?1:.5;var u,l=t.refX||this.refX,h=t.refY||this.refY;if(n.startPoint.x===n.endPoint.x&&n.startPoint.y===n.endPoint.y)return a.x=n.startPoint.x+l,a.y=n.startPoint.y+h,a.text=n.label,a;u=Object(p.isNil)(t.autoRotate)?this.labelAutoRotate:t.autoRotate;var v=ut(s,r,l,h,u);return a.x=v.x,a.y=v.y,a.rotate=v.rotate,a.textAlign=this._getTextAlign(i,v.angle),a.text=n.label,a},getLabelBgStyleByPosition:function(n,t,e,r){if(!n)return{};var i=n.getBBox(),a=e.style&&e.style.background;if(!a)return{};var s,u=a.padding,l=i.width+u[1]+u[3],h=i.height+u[0]+u[2],v=e.position||this.labelPosition,k=Object(b.__assign)(Object(b.__assign)({},a),{width:l,height:h,x:i.minX-u[2],y:i.minY-u[0],rotate:0});s=Object(p.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate;var T,I=r&&r.find(function(q){return q.get("className")==="edge-shape"});T=v==="start"?0:v==="end"?1:.5;var j=e.refX||this.refX,F=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return k.x=t.startPoint.x+j-l/2,k.y=t.startPoint.y+F-h/2,k;var B=ut(I,T,j-l/2,F+h/2,s),U=B.angle;return U>.5*Math.PI&&U<1.5*Math.PI&&(B=ut(I,T,j+l/2,F+h/2,s)),s&&(k.x=B.x,k.y=B.y),k.rotate=B.rotate,k},_getTextAlign:function(n,t){var e="center";return t?(t%=2*Math.PI,n!=="center"&&(e=t>=0&&t<=Math.PI/2||t>=1.5*Math.PI&&t<2*Math.PI?n:function(r){var i=r;return r==="start"?i="end":r==="end"&&(i="start"),i}(n)),e):n},getControlPoints:function(n){return n.controlPoints},getPathPoints:function(n){return n},drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e})},drawLabel:function(n,t){var e,r=this.options.labelCfg;e=typeof window!="undefined"&&window.getComputedStyle!==void 0&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";var i=Object(p.deepMix)({fontFamily:e},r,n.labelCfg),a=this.getLabelStyle(n,i,t),s=a.rotate;delete a.rotate;var u=t.addShape("text",{attrs:a,name:"text-shape"});if(s&&u.rotateAtStart(s),a.background){var l=this.drawLabelBg(n,t,u),h=this.itemType+"-label-bg";l.set("classname",h),u.toFront()}return u},drawLabelBg:function(n,t,e){var r=this.options.labelCfg,i=Object(p.deepMix)({},r,n.labelCfg),a=this.getLabelStyle(n,i,t).rotate,s=this.getLabelBgStyleByPosition(e,n,i,t);delete s.rotate;var u=t.addShape("rect",{name:"text-bg-shape",attrs:s});return a&&u.rotateAtStart(a),u}},at=Object(b.__assign)(Object(b.__assign)({},xt),qe);nn.registerEdge("single-edge",at),nn.registerEdge("line",{getControlPoints:function(){}},"single-edge"),nn.registerEdge("spline",{getPath:function(n){return ao(n)}},"single-edge"),nn.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(n){var t,e,r=n.startPoint,i=n.endPoint,a=(r.x+i.x)/2,s=(r.y+i.y)/2;if(n.controlPoints!==void 0){if(e=n.controlPoints[0],t=Rn(r,e,i),r.x<=i.x&&r.y>i.y?this.clockwise=t.x>e.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=t.x>e.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=t.y<e.y?0:1:this.clockwise=t.y<e.y?1:0,(e.x-r.x)/(e.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),Object(p.isArray)(n.curveOffset)&&(n.curveOffset=n.curveOffset[0]),n.curveOffset<0?this.clockwise=0:this.clockwise=1;var u={x:i.x-r.x,y:i.y-r.y},l=Math.atan2(u.y,u.x);e={x:n.curveOffset*Math.cos(-Math.PI/2+l)+a,y:n.curveOffset*Math.sin(-Math.PI/2+l)+s},t=Rn(r,e,i)}var h=gn(r,t);return[{x:h,y:h}]},getPath:function(n){var t=[];return t.push(["M",n[0].x,n[0].y]),n.length===2?t.push(["L",n[1].x,n[1].y]):t.push(["A",n[1].x,n[1].y,0,0,this.clockwise,n[2].x,n[2].y]),t}},"single-edge"),nn.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(n){var t=n.controlPoints;if(!t||!t.length){var e=n.startPoint,r=n.endPoint;n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),Object(p.isArray)(this.curveOffset)&&(n.curveOffset=n.curveOffset[0]),Object(p.isArray)(this.curvePosition)&&(n.curvePosition=n.curveOffset[0]),t=[Ui(e,r,n.curvePosition,n.curveOffset)]}return t},getPath:function(n){var t=[];return t.push(["M",n[0].x,n[0].y]),t.push(["Q",n[1].x,n[1].y,n[2].x,n[2].y]),t}},"single-edge"),nn.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(n){var t=n.controlPoints;if(n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),Object(p.isNumber)(n.curveOffset)&&(n.curveOffset=[n.curveOffset,-n.curveOffset]),Object(p.isNumber)(n.curvePosition)&&(n.curvePosition=[n.curvePosition,1-n.curvePosition]),!t||!t.length||t.length<2){var e=n.startPoint,r=n.endPoint;t=[Ui(e,r,n.curvePosition[0],n.curveOffset[0]),Ui(e,r,n.curvePosition[1],n.curveOffset[1])]}return t},getPath:function(n){var t=[];return t.push(["M",n[0].x,n[0].y]),t.push(["C",n[1].x,n[1].y,n[2].x,n[2].y,n[3].x,n[3].y]),t}},"single-edge"),nn.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(n){var t=n.startPoint,e=n.endPoint;n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.minCurveOffset===void 0&&(n.minCurveOffset=this.minCurveOffset),Object(p.isNumber)(n.curveOffset)&&(n.curveOffset=[n.curveOffset,-n.curveOffset]),Object(p.isNumber)(n.minCurveOffset)&&(n.minCurveOffset=[n.minCurveOffset,-n.minCurveOffset]),Object(p.isNumber)(n.curvePosition)&&(n.curvePosition=[n.curvePosition,1-n.curvePosition]);var r=e.y-t.y,i=[0,0];return n.curveOffset?i=n.curveOffset:Math.abs(r)<Math.abs(n.minCurveOffset[0])&&(i=n.minCurveOffset),[{x:t.x,y:t.y+r*this.curvePosition[0]+i[0]},{x:e.x,y:e.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),nn.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(n){var t=n.startPoint,e=n.endPoint;n.curvePosition===void 0&&(n.curvePosition=this.curvePosition),n.curveOffset===void 0&&(n.curveOffset=this.curveOffset),n.minCurveOffset===void 0&&(n.minCurveOffset=this.minCurveOffset),Object(p.isNumber)(n.curveOffset)&&(n.curveOffset=[n.curveOffset,-n.curveOffset]),Object(p.isNumber)(n.minCurveOffset)&&(n.minCurveOffset=[n.minCurveOffset,-n.minCurveOffset]),Object(p.isNumber)(n.curvePosition)&&(n.curvePosition=[n.curvePosition,1-n.curvePosition]);var r=e.x-t.x,i=[0,0];return n.curveOffset?i=n.curveOffset:Math.abs(r)<Math.abs(n.minCurveOffset[0])&&(i=n.minCurveOffset),[{x:t.x+r*this.curvePosition[0]+i[0],y:t.y},{x:e.x-r*this.curvePosition[1]+i[1],y:e.y}]}},"cubic"),nn.registerEdge("loop",{getPathPoints:function(n){return Be(n)},getControlPoints:function(n){return n.controlPoints},afterDraw:function(n){n.controlPoints=void 0},afterUpdate:function(n){n.controlPoints=void 0}},"cubic");var ht={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:nr.comboLabel.refX,refY:nr.comboLabel.refY,options:{style:{stroke:nr.defaultCombo.style.stroke,fill:nr.defaultCombo.style.fill,lineWidth:nr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:nr.comboLabel.style.fill,fontSize:nr.comboLabel.style.fontSize}},stateStyles:Object(b.__assign)({},nr.comboStateStyles)},getSize:function(n){var t=Object(p.clone)(n.size||this.options.size||nr.defaultCombo.size);return Object(p.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),Object(p.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(n,t){var e=t.position||this.labelPosition,r=n.style,i=n.padding||this.options.padding;Object(p.isArray)(i)&&(i=i[0]);var a=t.refX,s=t.refY;Object(p.isNil)(a)&&(a=this.refX),Object(p.isNil)(s)&&(s=this.refY);var u,l=this.getSize(n),h=(Math.max(r.r,l[0]/2)||l[0]/2)+i;switch(e){case"top":u={x:0,y:-h-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:h+s,textBaseline:"bottom",textAlign:"center"};break;case"left":u={x:-h+a,y:0,textAlign:"left"};break;case"center":u={x:0,y:0,text:n.label,textAlign:"center"};break;default:u={x:h+a,y:0,textAlign:"right"}}return u.text=n.label,u},drawShape:function(n,t){var e=this.shapeType,r=this.getShapeStyle(n);return t.addShape(e,{attrs:r,draggable:!0,name:"combo-shape"})},updateShape:function(n,t,e){var r=t.get("keyShape");(n.animate===void 0?this.options.animate:n.animate)&&r.animate?r.animate(e,{duration:200,easing:"easeLinear"}):r.attr(Object(b.__assign)({},e)),this.updateLabel(n,t)}},Mt=Object(b.__assign)(Object(b.__assign)({},xt),ht);nn.registerCombo("single-combo",Mt),nn.registerCombo("circle",{options:{size:[nr.defaultCombo.size[0],nr.defaultCombo.size[0]],padding:nr.defaultCombo.padding[0],animate:!0,style:{stroke:nr.defaultCombo.style.stroke,fill:nr.defaultCombo.style.fill,lineWidth:nr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:nr.comboLabel.style.fill,fontSize:nr.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(b.__assign)({},nr.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(n,t){var e=this.getShapeStyle(n);return delete e.height,delete e.width,t.addShape("circle",{attrs:e,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(n){var t=this.options.style,e=n.padding||this.options.padding;Object(p.isArray)(e)&&(e=e[0]);var r,i={stroke:n.color},a=Object(p.mix)({},t,i,n.style);if(n.fixSize)r=Object(p.isNumber)(n.fixSize)?n.fixSize:n.fixSize[0];else{var s=this.getSize(n);r=!Object(p.isNumber)(a.r)||isNaN(a.r)?s[0]/2||nr.defaultCombo.style.r:Math.max(a.r,s[0]/2)||s[0]/2}a.r=r+e;var u=Object(b.__assign)({x:0,y:0},a);return n.style?n.style.r=r:n.style={r},u},update:function(n,t){var e=this.getSize(n),r=n.padding||this.options.padding;Object(p.isArray)(r)&&(r=r[0]);var i,a=Object(p.clone)(n.style);i=n.fixSize?Object(p.isNumber)(n.fixSize)?n.fixSize:n.fixSize[0]:Math.max(a.r,e[0]/2)||e[0]/2,a.r=i+r;var s=t.get("sizeCache");s&&(s.r=a.r);var u={stroke:n.color},l=t.get("keyShape"),h=Object(p.mix)({},l.attr(),u,a);n.style?n.style.r=i:n.style={r:i},this.updateShape(n,t,h,!0)}},"single-combo"),nn.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:nr.defaultCombo.style.stroke,fill:nr.defaultCombo.style.fill,lineWidth:nr.defaultCombo.style.lineWidth},labelCfg:{style:{fill:nr.comboLabel.style.fill,fontSize:nr.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(b.__assign)({},nr.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("rect",{attrs:e,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(n,t){var e=t.position||this.labelPosition,r=n.style,i=n.padding||this.options.padding;Object(p.isNumber)(i)&&(i=[i,i,i,i]);var a=t.refX,s=t.refY;Object(p.isNil)(a)&&(a=this.refX),Object(p.isNil)(s)&&(s=this.refY);var u,l=r.width/2+i[3],h=r.height/2+i[0];switch(e){case"top":u={x:0-l+a,y:0-h+s,textBaseline:"top",textAlign:"left"};break;case"bottom":u={x:0,y:h+s,textBaseline:"bottom",textAlign:"center"};break;case"left":u={x:0-l+s,y:0,textAlign:"left"};break;case"center":u={x:0,y:0,text:n.label,textAlign:"center"};break;default:u={x:l+a,y:0,textAlign:"right"}}return u.text=n.label,u},getShapeStyle:function(n){var t=this.options.style,e=n.padding||this.options.padding;Object(p.isNumber)(e)&&(e=[e,e,e,e]);var r,i,a={stroke:n.color},s=Object(p.mix)({},t,a,n.style),u=this.getSize(n),l=n.collapsed&&n.fixCollapseSize?n.fixCollapseSize:n.fixSize;l?Object(p.isNumber)(l)?(r=l,i=l):(r=l[0],i=l[1]):(r=!Object(p.isNumber)(s.width)||isNaN(s.width)?u[0]||nr.defaultCombo.style.width:Math.max(s.width,u[0])||u[0],i=!Object(p.isNumber)(s.height)||isNaN(s.height)?u[1]||nr.defaultCombo.style.height:Math.max(s.height,u[1])||u[1]);var h=-r/2-e[3],v=-i/2-e[0];s.width=r+e[1]+e[3],s.height=i+e[0]+e[2];var k=Object(b.__assign)({x:h,y:v},s);return n.style?(n.style.width=r,n.style.height=i):n.style={width:r,height:i},k},update:function(n,t){var e=this.getSize(n),r=n.padding||this.options.padding;Object(p.isNumber)(r)&&(r=[r,r,r,r]);var i,a,s=Object(p.clone)(n.style),u=n.collapsed&&n.fixCollapseSize?n.fixCollapseSize:n.fixSize;u?Object(p.isNumber)(u)?(i=u,a=u):(i=u[0],a=u[1]):(i=Math.max(s.width,e[0])||e[0],a=Math.max(s.height,e[1])||e[1]),s.width=i+r[1]+r[3],s.height=a+r[0]+r[2];var l=t.get("sizeCache");l&&(l.width=s.width,l.height=s.height),s.x=-i/2-r[3],s.y=-a/2-r[0];var h={stroke:n.color},v=t.get("keyShape"),k=Object(p.mix)({},v.attr(),h,s);n.style?(n.style.width=i,n.style.height=a):n.style={width:i,height:a},this.updateShape(n,t,k,!1)},updateShape:function(n,t,e){var r=t.get("keyShape");(n.animate===void 0?this.options.animate:n.animate)&&r.animate?r.animate(e,{duration:200,easing:"easeLinear"}):r.attr(Object(b.__assign)({},e)),this.updateLabel(n,t)}},"single-combo"),nn.registerNode("simple-circle",{options:{size:nr.defaultNode.size,style:{x:0,y:0,stroke:nr.defaultNode.style.stroke,fill:nr.defaultNode.style.fill,lineWidth:nr.defaultNode.style.lineWidth},labelCfg:{style:{fill:nr.nodeLabel.style.fill,fontSize:nr.nodeLabel.style.fontSize}},stateStyles:Object(b.__assign)({},nr.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("circle",{attrs:e,className:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.deepMix)({},t,e),i=this.getSize(n)[0]/2;return Object(b.__assign)({x:0,y:0,r:i},r)},update:function(n,t){var e=this.getSize(n),r={stroke:n.color,r:e[0]/2},i=t.get("keyShape"),a=Object(p.deepMix)({},i.attr(),r,n.style);this.updateShape(n,t,a,!0)}},"single-node"),nn.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:nr.defaultNode.style.stroke,fill:nr.defaultNode.style.fill,lineWidth:nr.defaultNode.style.lineWidth},labelCfg:{style:{fill:nr.nodeLabel.style.fill,fontSize:nr.nodeLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(b.__assign)({},nr.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n);return t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=r.width||i[0],s=r.height||i[1];return Object(b.__assign)({x:-a/2,y:-s/2,width:a,height:s},r)},update:function(n,t){t.getContainer();var e=this.getOptions({}).style,r=this.getSize(n),i=t.get("keyShape");n.size||(r[0]=i.attr("width")||e.width,r[1]=i.attr("height")||e.height);var a={stroke:n.color,x:-r[0]/2,y:-r[1]/2,width:r[0],height:r[1]},s=Object(p.mix)({},e,i.attr(),a);s=Object(p.mix)(s,n.style),this.updateShape(n,t,s,!1)}},"single-node"),nn.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(n,t){var e=this.shapeType,r=this.getShapeStyle(n);delete r.fill;var i=t.addShape(e,{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(n,i),i},drawClip:function(n,t){var e=this.getOptions(n).clipCfg;if(e.show){var r=e.type,i=e.x,a=e.y,s=e.style;if(r==="circle"){var u=e.r;t.setClip({type:"circle",attrs:Object(b.__assign)({r:u,x:i,y:a},s)})}else if(r==="rect"){var l=e.width,h=e.height,v=i-l/2,k=a-h/2;t.setClip({type:"rect",attrs:Object(b.__assign)({x:v,y:k,width:l,height:h},s)})}else if(r==="ellipse"){var T=e.rx,I=e.ry;t.setClip({type:"ellipse",attrs:Object(b.__assign)({x:i,y:a,rx:T,ry:I},s)})}else if(r==="polygon"){var j=e.points;t.setClip({type:"polygon",attrs:Object(b.__assign)({points:j},s)})}else if(r==="path"){var F=e.path;t.setClip({type:"path",attrs:Object(b.__assign)({path:F},s)})}}},getShapeStyle:function(n){var t=this.getOptions(n).style,e=this.getSize(n),r=this.getOptions(n).img,i=e[0],a=e[1];return t&&(i=t.width||e[0],a=t.height||e[1]),Object(b.__assign)({x:-i/2,y:-a/2,width:i,height:a,img:r},t)},updateShapeStyle:function(n,t){var e=t.getContainer(),r=this.itemType+"-shape",i=e.find(function(s){return s.get("className")===r})||t.getKeyShape(),a=this.getShapeStyle(n);i&&i.attr(a)}},"single-node");var zt,Ut={triangle:function(n,t,e){n===void 0&&(n=10),t===void 0&&(t=15),e===void 0&&(e=0);var r=2*e;return"M "+r+",0 L "+(r+t)+",-"+n/2+" L "+(r+t)+","+n/2+" Z"},vee:function(n,t,e){n===void 0&&(n=15),t===void 0&&(t=20),e===void 0&&(e=0);var r=2*e;return"M "+r+",0 L "+(r+t)+",-"+n/2+`
        L `+(r+2*t/3)+",0 L "+(r+t)+","+n/2+" Z"},circle:function(n,t){return n===void 0&&(n=5),t===void 0&&(t=0),"M "+2*t+`, 0
            a `+n+","+n+" 0 1,0 "+2*n+`,0
            a `+n+","+n+" 0 1,0 "+2*-n+",0"},rect:function(n,t,e){n===void 0&&(n=10),t===void 0&&(t=10),e===void 0&&(e=0);var r=2*e;return"M "+r+","+-n/2+` 
        L `+(r+t)+","+-n/2+` 
        L `+(r+t)+","+n/2+` 
        L `+r+","+n/2+" Z"},diamond:function(n,t,e){n===void 0&&(n=15),t===void 0&&(t=15),e===void 0&&(e=0);var r=2*e;return"M "+r+`,0 
        L `+(r+t/2)+","+-n/2+` 
        L `+(r+t)+`,0 
        L `+(r+t/2)+","+n/2+" Z"},triangleRect:function(n,t,e,r,i,a){n===void 0&&(n=15),t===void 0&&(t=15),e===void 0&&(e=15),r===void 0&&(r=3),i===void 0&&(i=5),a===void 0&&(a=0);var s=2*a,u=s+t+i;return"M "+s+",0 L "+(s+t)+",-"+n/2+" L "+(s+t)+","+n/2+` Z
            M `+u+", -"+e/2+`
            L `+(u+r)+" -"+e/2+`
            L `+(u+r)+" "+e/2+`
            L `+u+" "+e/2+`
            Z`}},Xt={collapse:function(n,t,e){return[["M",n-e,t],["a",e,e,0,1,0,2*e,0],["a",e,e,0,1,0,2*-e,0],["M",n-e+4,t],["L",n+e-4,t]]},expand:function(n,t,e){return[["M",n-e,t],["a",e,e,0,1,0,2*e,0],["a",e,e,0,1,0,2*-e,0],["M",n-e+4,t],["L",n-e+2*e-4,t],["M",n-e+e,t-e+4],["L",n,t+e-4]]},upTriangle:function(n,t,e){var r=e*Math.cos(Math.PI/6),i=e*Math.sin(Math.PI/6);return[["M",n-r,t+i],["L",n+r,t+i],["L",n,t-e],["Z"]]},downTriangle:function(n,t,e){var r=e*Math.cos(Math.PI/6),i=e*Math.sin(Math.PI/6);return[["M",n-r,t-i],["L",n+r,t-i],["L",n,t+e],["Z"]]}},fr=nn,Or=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],kr=L.a.transform,mr=Object(b.__assign)(Object(b.__assign)(Object(b.__assign)(Object(b.__assign)(Object(b.__assign)(Object(b.__assign)({},_),M),x),c),O),{transform:kr,mat3:L.b}),sr=function(){function n(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return n.prototype.initLayout=function(){},n.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},n.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var r=t.pipes;return Array.isArray(r)?r.map(function(i){return(i==null?void 0:i.type)||""}):null},n.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t);return Array.isArray(this.layoutType)?this.layoutType.every(function(r,i){return r===e[i]}):(t==null?void 0:t.type)===this.layoutType},n.prototype.refreshLayout=function(){var t=this.graph;t&&(t.get("animate")?t.positionsAnimate():t.refreshPositions())},n.prototype.changeLayout=function(t){this.layoutCfg=t,this.destoryLayoutMethods(),this.layout()},n.prototype.changeData=function(){this.destoryLayoutMethods(),this.layout()},n.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods;t==null||t.forEach(function(e){e.destroy()}),this.layoutMethods=[]},n.prototype.destroyLayout=function(){var t=this.graph;this.destoryLayoutMethods(),t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},n.prototype.setDataFromGraph=function(){for(var t=[],e=[],r=[],i=[],a=[],s=[],u=this.graph.getNodes(),l=this.graph.getEdges(),h=this.graph.getCombos(),v=u.length,k=0;k<v;k++){var T=u[k];if(T&&!T.destroyed){var I=T.getModel();T.isVisible()?t.push(I):e.push(I)}}var j=l.length;for(k=0;k<j;k++){var F=l[k];F&&!F.destroyed&&(I=F.getModel(),F.isVisible()?I.isComboEdge?a.push(I):r.push(I):i.push(I))}var B=h.length;for(k=0;k<B;k++){var U=h[k];U.destroyed||(I=U.getModel(),U.isVisible()?s.push(I):i.push(I))}return{nodes:t,hiddenNodes:e,edges:r,hiddenEdges:i,combos:s,hiddenCombos:[],comboEdges:a}},n.prototype.reLayoutMethod=function(t,e){var r=this;return new Promise(function(i,a){var s=r.graph,u=e==null?void 0:e.type;e.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),i()},t.init(r.data),u==="force"&&(t.ticking=!1,t.forceSimulation.stop()),s.emit("beforesublayout",{type:u}),t.execute(),t.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd()})},n.prototype.relayout=function(t){var e=this,r=this.graph,i=this.layoutMethods,a=this.layoutCfg;if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;this.initPositions(a.center,s)}r.emit("beforelayout");var u=Promise.resolve();i==null||i.forEach(function(l,h){var v=a[h];u=u.then(function(){return e.reLayoutMethod(l,v)})}),u.then(function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()}).catch(function(l){console.warn("relayout failed",l)})},n.prototype.filterLayoutData=function(t,e){var r,i,a=t.nodes,s=t.edges,u=Object(b.__rest)(t,["nodes","edges"]);if(!a)return t;if(r=Object(p.isFunction)(e==null?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0},Object(p.isFunction)(e==null?void 0:e.edgesFilter))i=e.edgesFilter;else{var l=a.reduce(function(h,v){return h[v.id]=!0,h},{});i=function(h){return l[h.source]&&l[h.target]}}return Object(b.__assign)({nodes:a.filter(r),edges:s.filter(i)},u)},n.prototype.getLayoutBBox=function(t){var e=this.graph,r=Object(p.groupBy)(e.getNodes(),function(a){return a.getModel().layoutOrder}),i=Object.values(r).map(function(a){var s=jn(a);return s.size=[s.width,s.height],s});return{groupNodes:Object.values(Object(p.groupBy)(t,"layoutOrder")),layoutNodes:i}},n.prototype.layoutAnimate=function(){},n.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(t[0].x!==void 0&&t[0].x!==null&&!Kr(t[0].x)){for(var e=[0,0],r=t.length,i=0;i<r;i++){var a=t[i];e[0]+=a.x,e[1]+=a.y}for(e[0]/=t.length,e[1]/=t.length,i=0;i<r;i++)(a=t[i]).x-=e[0],a.y-=e[1]}},n.prototype.initPositions=function(t,e){var r=this.graph;if(!e)return!1;var i=e?e.length:0;if(i){var a=.85*r.get("width"),s=.85*r.get("height"),u=Math.ceil(Math.sqrt(i)*(a/s)),l=a/(u-1),h=s/(Math.ceil(i/u)-1);isFinite(l)&&l||(l=0),isFinite(h)&&l||(h=0);for(var v=t[0]-a/2,k=t[1]-s/2,T=!0,I=0;I<i;I++){var j=e[I];Kr(+j.x)&&(T=!1,j.x=I%u*l+v),Kr(+j.y)&&(T=!1,j.y=Math.floor(I/u)*h+k)}return T}},n.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},n}(),an=function(n){this.graph=n,this.destroyed=!1,this.initEvents()};(function(n){n.CLICK="click",n.DBLCLICK="dblclick",n.MOUSEDOWN="mousedown",n.MOUDEUP="mouseup",n.CONTEXTMENU="contextmenu",n.MOUSEENTER="mouseenter",n.MOUSEOUT="mouseout",n.MOUSEOVER="mouseover",n.MOUSEMOVE="mousemove",n.MOUSELEAVE="mouseleave",n.DRAGSTART="dragstart",n.DRAGEND="dragend",n.DRAG="drag",n.DRAGENTER="dragenter",n.DRAGLEAVE="dragleave",n.DRAGOVER="dragover",n.DRAGOUT="dragout",n.DDROP="drop",n.KEYUP="keyup",n.KEYDOWN="keydown",n.WHEEL="wheel",n.FOCUS="focus",n.BLUR="blur",n.TOUCHSTART="touchstart",n.TOUCHMOVE="touchmove",n.TOUCHEND="touchend",n.CANVAS_TOUCHSTART="canvas:touchstart",n.CANVAS_TOUCHMOVE="canvas:touchmove",n.CANVAS_TOUCHEND="canvas:touchend",n.NODE_TOUCHSTART="node:touchstart",n.NODE_TOUCHMOVE="node:touchmove",n.NODE_TOUCHEND="node:touchend",n.COMBO_TOUCHSTART="combo:touchstart",n.COMBO_TOUCHMOVE="combo:touchmove",n.COMBO_TOUCHEND="combo:touchend",n.EDGE_TOUCHSTART="edge:touchstart",n.EDGE_TOUCHMOVE="edge:touchmove",n.EDGE_TOUCHEND="edge:touchend",n.NODE_CONTEXTMENU="node:contextmenu",n.NODE_CLICK="node:click",n.NODE_DBLCLICK="node:dblclick",n.NODE_MOUSEDOWN="node:mousedown",n.NODE_MOUSEUP="node:mouseup",n.NODE_MOUSEENTER="node:mouseenter",n.NODE_MOUSELEAVE="node:mouseleave",n.NODE_MOUSEMOVE="node:mousemove",n.NODE_MOUSEOUT="node:mouseout",n.NODE_MOUSEOVER="node:mouseover",n.NODE_DROP="node:drop",n.NODE_DRAGOVER="node:dragover",n.NODE_DRAGENTER="node:dragenter",n.NODE_DRAGLEAVE="node:dragleave",n.NODE_DRAGSTART="node:dragstart",n.NODE_DRAG="node:drag",n.NODE_DRAGEND="node:dragend",n.NODE_TAP="node:tap",n.NODE_PANSTART="node:panstart",n.NODE_PANMOVE="node:panmove",n.NODE_PANEND="node:panend",n.COMBO_CONTEXTMENU="combo:contextmenu",n.COMBO_CLICK="combo:click",n.COMBO_DBLCLICK="combo:dblclick",n.COMBO_MOUSEDOWN="combo:mousedown",n.COMBO_MOUSEUP="combo:mouseup",n.COMBO_MOUSEENTER="combo:mouseenter",n.COMBO_MOUSELEAVE="combo:mouseleave",n.COMBO_MOUSEMOVE="combo:mousemove",n.COMBO_MOUSEOUT="combo:mouseout",n.COMBO_MOUSEOVER="combo:mouseover",n.COMBO_DROP="combo:drop",n.COMBO_DRAGOVER="combo:dragover",n.COMBO_DRAGENTER="combo:dragenter",n.COMBO_DRAGLEAVE="combo:dragleave",n.COMBO_DRAGSTART="combo:dragstart",n.COMBO_DRAG="combo:drag",n.COMBO_DRAGEND="combo:dragend",n.COMBO_TAP="combo:tap",n.COMBO_PANSTART="combo:panstart",n.COMBO_PANMOVE="combo:panmove",n.COMBO_PANEND="combo:panend",n.EDGE_CONTEXTMENU="edge:contextmenu",n.EDGE_CLICK="edge:click",n.EDGE_DBLCLICK="edge:dblclick",n.EDGE_MOUSEDOWN="edge:mousedown",n.EDGE_MOUSEUP="edge:mouseup",n.EDGE_MOUSEENTER="edge:mouseenter",n.EDGE_MOUSELEAVE="edge:mouseleave",n.EDGE_MOUSEMOVE="edge:mousemove",n.EDGE_MOUSEOUT="edge:mouseout",n.EDGE_MOUSEOVER="edge:mouseover",n.EDGE_DROP="edge:drop",n.EDGE_DRAGOVER="edge:dragover",n.EDGE_DRAGENTER="edge:dragenter",n.EDGE_DRAGLEAVE="edge:dragleave",n.CANVAS_CONTEXTMENU="canvas:contextmenu",n.CANVAS_CLICK="canvas:click",n.CANVAS_DBLCLICK="canvas:dblclick",n.CANVAS_MOUSEDOWN="canvas:mousedown",n.CANVAS_MOUSEUP="canvas:mouseup",n.CANVAS_MOUSEENTER="canvas:mouseenter",n.CANVAS_MOUSELEAVE="canvas:mouseleave",n.CANVAS_MOUSEMOVE="canvas:mousemove",n.CANVAS_MOUSEOUT="canvas:mouseout",n.CANVAS_MOUSEOVER="canvas:mouseover",n.CANVAS_DROP="canvas:drop",n.CANVAS_DRAGENTER="canvas:dragenter",n.CANVAS_DRAGLEAVE="canvas:dragleave",n.CANVAS_DRAGSTART="canvas:dragstart",n.CANVAS_DRAG="canvas:drag",n.CANVAS_DRAGEND="canvas:dragend",n.CANVAS_TAP="canvas:tap",n.CANVAS_PANSTART="canvas:panstart",n.CANVAS_PANMOVE="canvas:panmove",n.CANVAS_PANEND="canvas:panend",n.BEFORERENDER="beforerender",n.AFTERRENDER="afterrender",n.BEFOREADDITEM="beforeadditem",n.AFTERADDITEM="afteradditem",n.BEFOREREMOVEITEM="beforeremoveitem",n.AFTERREMOVEITEM="afterremoveitem",n.BEFOREUPDATEITEM="beforeupdateitem",n.AFTERUPDATEITEM="afterupdateitem",n.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",n.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",n.BEFOREITEMSTATECHANGE="beforeitemstatechange",n.AFTERITEMSTATECHANGE="afteritemstatechange",n.BEFOREITEMREFRESH="beforeitemrefresh",n.AFTERITEMREFRESH="afteritemrefresh",n.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",n.AFTERITEMSTATESCLEAR="afteritemstatesclear",n.BEFOREMODECHANGE="beforemodechange",n.AFTERMODECHANGE="aftermodechange",n.BEFORELAYOUT="beforelayout",n.AFTERLAYOUT="afterlayout",n.BEFORECREATEEDGE="beforecreateedge",n.AFTERCREATEEDGE="aftercreateedge",n.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",n.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",n.BEFOREGRAPHREFRESH="beforegraphrefresh",n.AFTERGRAPHREFRESH="aftergraphrefresh",n.BEFOREANIMATE="beforeanimate",n.AFTERANIMATE="afteranimate",n.BEFOREPAINT="beforepaint",n.AFTERPAINT="afterpaint",n.BEFORECOLLAPSEEXPANDCOMBO="beforecollapseexpandcombo",n.AFTERCOLLAPSEEXPANDCOMBO="aftercollapseexpandcombo",n.GRAPHSTATECHANGE="graphstatechange",n.AFTERACTIVATERELATIONS="afteractivaterelations",n.NODESELECTCHANGE="nodeselectchange",n.TOOLTIPCHANGE="tooltipchange",n.WHEELZOOM="wheelzoom",n.VIEWPORTCHANGE="viewportchange",n.DRAGNODEEND="dragnodeend",n.STACKCHANGE="stackchange",n.TAP="tap",n.PINCHSTART="pinchstart",n.PINCHMOVE="pinchmove",n.PANSTART="panstart",n.PANMOVE="panmove",n.PANEND="panend"})(zt||(zt={}));var sn=fr.registerNode,Ti=fr.registerEdge,Vi=fr.registerCombo,lo=N.registerBehavior,ir=nr,ga=(fr.registerNode,fr.registerEdge,fr.registerCombo,N.registerBehavior,o(270)),Wr=o(44),ko=o(60),Nt=o(2);function so(n,t,e){var r=[0,0,0,0,0,0,0,0,0];return Nt.a.fromTranslation(r,e),Nt.a.multiply(n,r,t)}function vo(n,t,e){var r=[0,0,0,0,0,0,0,0,0];return Nt.a.fromRotation(r,e),Nt.a.multiply(n,r,t)}function uo(n,t,e){var r=[0,0,0,0,0,0,0,0,0];return Nt.a.fromScaling(r,e),Nt.a.multiply(n,r,t)}function Da(n,t){for(var e,r,i,a=n?[].concat(n):[1,0,0,0,1,0,0,0,1],s=0,u=t.length;s<u;s++){var l=t[s];switch(l[0]){case"t":so(a,a,[l[1],l[2]]);break;case"s":uo(a,a,[l[1],l[2]]);break;case"r":vo(a,a,l[1]);break;case"m":e=a,r=a,i=l[1],Nt.a.multiply(e,i,r)}}return a}function Ra(n,t){return n[0]*t[1]-t[0]*n[1]}function Hp(n,t,e){var r=Nt.d.angle(n,t),i=Ra(n,t)>=0;return e?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function qp(n,t,e){return e?(n[0]=t[1],n[1]=-1*t[0]):(n[0]=-1*t[1],n[1]=t[0]),n}var Kp=o(83),La=o.n(Kp),Zp=o(93),ys=o.n(Zp),$p=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function yc(n,t,e){var r;return(r=Math.round(n.h)>=60&&Math.round(n.h)<=240?e?Math.round(n.h)-2*t:Math.round(n.h)+2*t:e?Math.round(n.h)+2*t:Math.round(n.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function mc(n,t,e){return n.h===0&&n.s===0?n.s:((r=e?n.s-.16*t:t===4?n.s+.16:n.s+.05*t)>1&&(r=1),e&&t===5&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function bc(n,t,e){var r;return(r=e?n.v+.05*t:n.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function ms(n){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],r=ys()(n),i=5;i>0;i-=1){var a=r.toHsv(),s=ys()({h:yc(a,i,!0),s:mc(a,i,!0),v:bc(a,i,!0)}).toHexString();e.push(s)}e.push(r.toHexString());for(var u=1;u<=4;u+=1){var l=r.toHsv(),h=ys()({h:yc(l,u),s:mc(l,u),v:bc(l,u)}).toHexString();e.push(h)}return t.theme==="dark"?$p.map(function(v){var k=v.index,T=v.opacity;return ys.a.mix(t.backgroundColor||"#141414",e[k],100*T).toHexString()}):e}var su={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Di={},uu={};Object.keys(su).forEach(function(n){Di[n]=ms(su[n]),Di[n].primary=Di[n][5],uu[n]=ms(su[n],{theme:"dark",backgroundColor:"#141414"}),uu[n].primary=uu[n][5]}),Di.red,Di.volcano,Di.gold,Di.orange,Di.yellow,Di.lime,Di.green,Di.cyan,Di.blue,Di.geekblue,Di.purple,Di.magenta,Di.grey;var Ba,cu,xc,lu,gi=function(n,t,e){var r=La()(n),i=La()(t);return La()([(1-e)*r.red()+e*i.red(),(1-e)*r.green()+e*i.green(),(1-e)*r.blue()+e*i.blue()]).rgb()},fu=function(n,t,e,r){return t===void 0&&(t="#fff"),e===void 0&&(e="default"),r===void 0&&(r="rgb(150, 150, 150)"),e==="default"?function(i,a,s){a===void 0&&(a="#fff"),s===void 0&&(s="rgb(150, 150, 150)");var u=gi(a,i,.05).rgb().toString(),l=gi(a,i,.1).rgb().toString(),h=gi(a,i,.2).rgb().toString(),v=gi(a,i,.4).rgb().toString(),k=gi(a,s,.02).rgb().toString(),T=gi(a,s,.05).rgb().toString(),I=gi(a,s,.1).rgb().toString(),j=gi(a,s,.2).rgb().toString(),F=gi(a,s,.3).rgb().toString(),B=ms(i,{theme:"default",backgroundColor:a}),U=La()(i).hex().toLowerCase(),q=B.indexOf(U),$=i;return q!==-1&&($=B[q+1]),{mainStroke:i,mainFill:l,activeStroke:i,activeFill:u,inactiveStroke:v,inactiveFill:u,selectedStroke:i,selectedFill:a,highlightStroke:$,highlightFill:h,disableStroke:F,disableFill:T,edgeMainStroke:F,edgeActiveStroke:i,edgeInactiveStroke:j,edgeSelectedStroke:i,edgeHighlightStroke:i,edgeDisableStroke:I,comboMainStroke:F,comboMainFill:k,comboActiveStroke:i,comboActiveFill:u,comboInactiveStroke:F,comboInactiveFill:k,comboSelectedStroke:i,comboSelectedFill:k,comboHighlightStroke:$,comboHighlightFill:k,comboDisableStroke:j,comboDisableFill:T}}(n,t,"rgb(150, 150, 150)"):function(i,a,s){a===void 0&&(a="#fff"),s===void 0&&(s="#777");var u=gi(a,i,.2).rgb().toString(),l=gi(a,i,.3).rgb().toString(),h=gi(a,i,.6).rgb().toString(),v=gi(a,i,.8).rgb().toString(),k=gi(a,s,.2).rgb().toString(),T=gi(a,s,.25).rgb().toString(),I=gi(a,s,.3).rgb().toString(),j=gi(a,s,.4).rgb().toString(),F=gi(a,s,.5).rgb().toString(),B=ms(i,{theme:"dark",backgroundColor:a}),U=La()(i).hex().toLowerCase(),q=B.indexOf(U),$=i;return q!==-1&&($=B[q+1]),{mainStroke:v,mainFill:u,activeStroke:i,activeFill:l,inactiveStroke:v,inactiveFill:u,selectedStroke:i,selectedFill:u,highlightStroke:i,highlightFill:h,disableStroke:F,disableFill:T,edgeMainStroke:s,edgeActiveStroke:i,edgeInactiveStroke:s,edgeSelectedStroke:i,edgeHighlightStroke:i,edgeDisableStroke:I,comboMainStroke:j,comboMainFill:T,comboActiveStroke:i,comboActiveFill:k,comboInactiveStroke:j,comboInactiveFill:T,comboSelectedStroke:i,comboSelectedFill:k,comboHighlightStroke:$,comboHighlightFill:T,comboDisableStroke:j,comboDisableFill:k}}(n,t,"#777")},Qp=function(n,t,e,r){t===void 0&&(t="#fff"),e===void 0&&(e="default"),r===void 0&&(r="rgb(150, 150, 150)");var i=[];return n.forEach(function(a){i.push(fu(a,t,e,r))}),i},on=fu("rgb(95, 149, 255)","rgb(255, 255, 255)"),Xo={version:"0.3.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:on.mainStroke,fill:on.mainFill},size:20,color:on.mainStroke,linkPoints:{size:8,lineWidth:1,fill:on.activeFill,stroke:on.activeStroke}},nodeStateStyles:{active:{fill:on.activeFill,stroke:on.activeStroke,lineWidth:2,shadowColor:on.mainStroke,shadowBlur:10},selected:{fill:on.selectedFill,stroke:on.selectedStroke,lineWidth:4,shadowColor:on.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:on.highlightFill,stroke:on.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:on.inactiveFill,stroke:on.inactiveStroke,lineWidth:1},disable:{fill:on.disableFill,stroke:on.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:on.edgeMainStroke,lineAppendWidth:2},color:on.edgeMainStroke},edgeStateStyles:{active:{stroke:on.edgeActiveStroke,lineWidth:1},selected:{stroke:on.edgeSelectedStroke,lineWidth:2,shadowColor:on.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:on.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:on.edgeInactiveStroke,lineWidth:1},disable:{stroke:on.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:on.comboMainFill,lineWidth:1,stroke:on.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:on.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:on.comboActiveStroke,lineWidth:1,fill:on.comboActiveFill},selected:{stroke:on.comboSelectedStroke,lineWidth:2,fill:on.comboSelectedFill,shadowColor:on.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:on.comboHighlightStroke,lineWidth:2,fill:on.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:on.comboInactiveStroke,fill:on.comboInactiveFill,lineWidth:1},disable:{stroke:on.comboDisableStroke,fill:on.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function Ga(n,t,e){if(n){if(typeof n.addEventListener=="function")return n.addEventListener(t,e,!1),{remove:function(){n.removeEventListener(t,e,!1)}};if(typeof n.attachEvent=="function")return n.attachEvent("on"+t,e),{remove:function(){n.detachEvent("on"+t,e)}}}}function ei(n){Ba||(Ba=document.createElement("table"),cu=document.createElement("tr"),xc=/^\s*<(\w+|!)[^>]*>/,lu={tr:document.createElement("tbody"),tbody:Ba,thead:Ba,tfoot:Ba,td:cu,th:cu,"*":document.createElement("div")});var t=xc.test(n)&&RegExp.$1;t&&t in lu||(t="*");var e=lu[t];n=n.replace(/(^\s*)|(\s*$)/g,""),e.innerHTML=""+n;var r=e.childNodes[0];return e.removeChild(r),r}function xn(n,t){if(n)for(var e in t)t.hasOwnProperty(e)&&(n.style[e]=t[e]);return n}var Jp=mr.cloneEvent,eg=mr.isViewportChanged,tg=function(n){function t(e){var r=n.call(this,e)||this;return r.extendEvents=[],r.dragging=!1,r.preItem=null,r.graph=e,r.destroyed=!1,r.initEvents(),r}return Object(b.__extends)(t,n),t.prototype.initEvents=function(){var e=this.graph,r=this.extendEvents,i=r===void 0?[]:r,a=e.get("canvas"),s=a.get("el"),u=Object(p.wrapBehavior)(this,"onCanvasEvents"),l=Object(p.wrapBehavior)(this,"onExtendEvents"),h=Object(p.wrapBehavior)(this,"onWheelEvent");a.off("*").on("*",u),this.canvasHandler=u,i.push(Ga(s,"DOMMouseScroll",h)),i.push(Ga(s,"mousewheel",h)),typeof window!="undefined"&&(i.push(Ga(window,"keydown",l)),i.push(Ga(window,"keyup",l)),i.push(Ga(window,"focus",l)))},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var r=this.graph,i=r.get("canvas"),a=e.target,s=e.type;e.canvasX=e.x,e.canvasY=e.y;var u={x:e.canvasX,y:e.canvasY},l=r.get("group").getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),eg(l)&&(u=r.getPointByClient(e.clientX,e.clientY)),e.x=u.x,e.y=u.y,e.currentTarget=r,a===i)return s!=="mousemove"&&s!=="mouseleave"||this.handleMouseMove(e,"canvas"),e.target=i,e.item=null,r.emit(s,e),void r.emit("canvas:"+s,e);var h=t.getItemRoot(a);if(h){var v=h.get("item");if(!v.destroyed){var k=v.getType();if(e.target=a,e.item=v,e.canvasX===e.x&&e.canvasY===e.y){var T=r.getCanvasByPoint(e.x,e.y);e.canvasX=T.x,e.canvasY=T.y}r.emit(s,e),e.name&&!e.name.includes(":")?r.emit(k+":"+s,e):r.emit(e.name,e),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(e,k)}}else r.emit(s,e)},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){Object(p.isNil)(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,r){var i=this.graph,a=this.preItem,s=i.get("canvas"),u=e.target===s?null:e.item;e=Jp(e),a&&a!==u&&!a.destroyed&&(e.item=a,this.emitCustomEvent(a.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(a.getType(),"dragleave",e)),u&&a!==u&&(e.item=u,this.emitCustomEvent(r,"mouseenter",e),this.dragging&&this.emitCustomEvent(r,"dragenter",e)),this.preItem=u},t.prototype.emitCustomEvent=function(e,r,i){i.type=r,this.graph.emit(e+":"+r,i)},t.prototype.destroy=function(){var e=this.graph,r=this.canvasHandler,i=this.extendEvents;e.get("canvas").off("*",r),Object(p.each)(i,function(a){a.remove()}),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},t}(an);function wc(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var rg,ng,Wi=function(){function n(){(function(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")})(this,n),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}var t,e,r;return t=n,(e=[{key:"layout",value:function(i){return this.init(i),this.execute(!0)}},{key:"init",value:function(i){this.nodes=i.nodes||[],this.edges=i.edges||[],this.combos=i.combos||[]}},{key:"execute",value:function(i){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(i){i&&Object.assign(this,i)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}])&&wc(t.prototype,e),r&&wc(t,r),n}(),Fa=function(n){return typeof n=="string"},ig=/-(\w)/g,Ii=(rg=function(n){return n.replace(ig,function(t,e){return e?e.toUpperCase():""})},ng=Object.create(null),Array.isArray),ur=function(n){return typeof n=="number"},hu=function(n){return Number.isNaN(Number(n))};function du(n){return(du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var Ao=function(n){return n!==null&&du(n)==="object"},og=function n(t){if(t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){var e=[];return t.forEach(function(i){e.push(i)}),e.map(function(i){return n(i)})}if(du(t)==="object"&&t!=={}){var r=Object.assign({},t);return Object.keys(r).forEach(function(i){r[i]=n(r[i])}),r}return t},fn=function(n,t){var e=n[t];return Ao(e)?e.cell:e},za=function(n,t,e){for(var r=[],i=0;i<n;i++)r[i]=0;return e&&e.forEach(function(a){var s=fn(a,"source"),u=fn(a,"target");s&&(r[t[s]]+=1),u&&(r[t[u]]+=1)}),r},_c=function(n){for(var t=[],e=n.length,r=0;r<e;r+=1){t[r]=[];for(var i=0;i<e;i+=1)r===i?t[r][i]=0:n[r][i]!==0&&n[r][i]?t[r][i]=n[r][i]:t[r][i]=1/0}for(var a=0;a<e;a+=1)for(var s=0;s<e;s+=1)for(var u=0;u<e;u+=1)t[s][u]>t[s][a]+t[a][u]&&(t[s][u]=t[s][a]+t[a][u]);return t},Sc=function(n,t){var e=n.nodes,r=n.edges,i=[],a={};if(!e)throw new Error("invalid nodes data!");return e&&e.forEach(function(s,u){a[s.id]=u,i.push([])}),r&&r.forEach(function(s){var u=fn(s,"source"),l=fn(s,"target"),h=a[u],v=a[l];i[h][v]=1,t||(i[v][h]=1)}),i},bs=function(n,t){typeof t=="function"&&function e(r,i){if(r&&r.children){for(var a=r.children.length-1;a>=0;a--)if(!e(r.children[a],i))return}return!!i(r)}(n,t)},Yo=function(n){return typeof n=="function"};function Ec(n){return(Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Oc(n,t){return(Oc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ag(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=pu(n);if(t){var i=pu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return sg(this,e)}}function sg(n,t){return!t||Ec(t)!=="object"&&typeof t!="function"?Mc(n):t}function Mc(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function pu(n){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Ua=new Map,Ri=function(n,t){if(Ua.get(n)&&console.warn("The layout with the name ".concat(n," exists already, it will be overridden")),Ao(t)){var e=function(r){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Oc(s,u)})(a,r);var i=ag(a);function a(s){var u;(function(k,T){if(!(k instanceof T))throw new TypeError("Cannot call a class as a function")})(this,a);var l=Mc(u=i.call(this)),h={},v=l.getDefaultCfg();return Object.assign(h,v,t,s),Object.keys(h).forEach(function(k){var T=h[k];l[k]=T}),u}return a}(Wi);Ua.set(n,e)}else Ua.set(n,t)},ug=function(n){return Ua.has(n)?Ua.get(n):null};function kc(n){return(kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Ac(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Cc(n,t){return(Cc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function cg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=gu(n);if(t){var i=gu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return lg(this,e)}}function lg(n,t){return!t||kc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function gu(n){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var fg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Cc(s,u)})(a,n);var t,e,r,i=cg(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).begin=[0,0],u.preventOverlap=!0,u.preventOverlapPadding=10,u.condense=!1,u.sortBy="degree",u.nodeSize=30,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.row=0,u.col=0,u.cellWidth=0,u.cellHeight=0,u.cellUsed={},u.id2manPos={},u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.edges,h=u.length,v=s.begin;if(h===0)return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l};if(h===1)return u[0].x=v[0],u[0].y=v[1],s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l};var k=[];u.forEach(function(Oe){k.push(Oe)});var T={};if(k.forEach(function(Oe,Pe){T[Oe.id]=Pe}),(s.sortBy==="degree"||!Fa(s.sortBy)||k[0][s.sortBy]===void 0)&&(s.sortBy="degree",hu(u[0].degree))){var I=za(k.length,T,l);k.forEach(function(Oe,Pe){Oe.degree=I[Pe]})}k.sort(function(Oe,Pe){return Pe[s.sortBy]-Oe[s.sortBy]}),s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight);var j=s.rows,F=s.cols!=null?s.cols:s.columns;if(s.cells=h,j!=null&&F!=null?(s.rows=j,s.cols=F):j!=null&&F==null?(s.rows=j,s.cols=Math.ceil(s.cells/s.rows)):j==null&&F!=null?(s.cols=F,s.rows=Math.ceil(s.cells/s.cols)):(s.splits=Math.sqrt(s.cells*s.height/s.width),s.rows=Math.round(s.splits),s.cols=Math.round(s.width/s.height*s.splits)),s.cols*s.rows>s.cells){var B=s.small(),U=s.large();(B-1)*U>=s.cells?s.small(B-1):(U-1)*B>=s.cells&&s.large(U-1)}else for(;s.cols*s.rows<s.cells;){var q=s.small(),$=s.large();($+1)*q>=s.cells?s.large($+1):s.small(q+1)}s.cellWidth=s.width/s.cols,s.cellHeight=s.height/s.rows,s.condense&&(s.cellWidth=0,s.cellHeight=0),s.preventOverlap&&k.forEach(function(Oe){var Pe,Ze;Oe.x&&Oe.y||(Oe.x=0,Oe.y=0),Ii(Oe.size)?(Pe=Oe.size[0],Ze=Oe.size[1]):ur(Oe.size)?(Pe=Oe.size,Ze=Oe.size):Ao(Oe.size)&&(Pe=Oe.size.width,Ze=Oe.size.height),Pe!==void 0&&Ze!==void 0||(Ii(s.nodeSize)?(Pe=s.nodeSize[0],Ze=s.nodeSize[1]):ur(s.nodeSize)?(Pe=s.nodeSize,Ze=s.nodeSize):(Pe=30,Ze=30));var nt=s.preventOverlapPadding,ct=Pe+nt,st=Ze+nt;s.cellWidth=Math.max(s.cellWidth,ct),s.cellHeight=Math.max(s.cellHeight,st)}),s.cellUsed={},s.row=0,s.col=0,s.id2manPos={};for(var ve=0;ve<k.length;ve++){var de=k[ve],me=void 0;if(s.position&&(me=s.position(de)),me&&(me.row!==void 0||me.col!==void 0)){var Te={row:me.row,col:me.col};if(Te.col===void 0)for(Te.col=0;s.used(Te.row,Te.col);)Te.col++;else if(Te.row===void 0)for(Te.row=0;s.used(Te.row,Te.col);)Te.row++;s.id2manPos[de.id]=Te,s.use(Te.row,Te.col)}s.getPos(de)}return s.onLayoutEnd&&s.onLayoutEnd(),{edges:l,nodes:k}}},{key:"small",value:function(s){var u,l=this.rows||5,h=this.cols||5;return s==null?u=Math.min(l,h):Math.min(l,h)===this.rows?this.rows=s:this.cols=s,u}},{key:"large",value:function(s){var u,l=this.rows||5,h=this.cols||5;return s==null?u=Math.max(l,h):Math.max(l,h)===this.rows?this.rows=s:this.cols=s,u}},{key:"used",value:function(s,u){return this.cellUsed["c-".concat(s,"-").concat(u)]||!1}},{key:"use",value:function(s,u){this.cellUsed["c-".concat(s,"-").concat(u)]=!0}},{key:"moveToNextCell",value:function(){var s=this.cols||5;this.col++,this.col>=s&&(this.col=0,this.row++)}},{key:"getPos",value:function(s){var u,l,h=this.begin,v=this.cellWidth,k=this.cellHeight,T=this.id2manPos[s.id];if(T)u=T.col*v+v/2+h[0],l=T.row*k+k/2+h[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();u=this.col*v+v/2+h[0],l=this.row*k+k/2+h[1],this.use(this.row,this.col),this.moveToNextCell()}s.x=u,s.y=l}},{key:"getType",value:function(){return"grid"}}])&&Ac(t.prototype,e),r&&Ac(t,r),a}(Wi);function Tc(n){return(Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Ic(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function jc(n,t){return(jc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function hg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=vu(n);if(t){var i=vu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return dg(this,e)}}function dg(n,t){return!t||Tc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function vu(n){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var pg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&jc(s,u)})(a,n);var t,e,r,i=hg(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.width=300,u.height=300,u.nodes=[],u.edges=[],u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.center;return s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),u&&u.forEach(function(h){h.x=.9*(Math.random()-.5)*s.width+l[0],h.y=.9*(Math.random()-.5)*s.height+l[1]}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:this.edges}}},{key:"getType",value:function(){return"random"}}])&&Ic(t.prototype,e),r&&Ic(t,r),a}(Wi);function Pc(n){return(Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Nc(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dc(n,t){return(Dc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function gg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=yu(n);if(t){var i=yu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return vg(this,e)}}function vg(n,t){return!t||Pc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function yu(n){return(yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var mu=function(n,t){return n?ur(n)?function(e){return n}:n:function(e){return t||1}},yg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Dc(s,u)})(a,n);var t,e,r,i=gg(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.edgeStrength=200,u.nodeStrength=1e3,u.coulombDisScale=.005,u.damping=.9,u.maxSpeed=1e3,u.minMovement=.5,u.interval=.02,u.factor=1,u.linkDistance=1,u.gravity=10,u.preventOverlap=!0,u.tick=function(){},u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var s=this,u=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),u&&u.length!==0){s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var l=s.center;if(u.length===1)return u[0].x=l[0],u[0].y=l[1],void(s.onLayoutEnd&&s.onLayoutEnd());var h={},v={};u.forEach(function(B,U){ur(B.x)||(B.x=Math.random()*s.width),ur(B.y)||(B.y=Math.random()*s.height),h[B.id]=B,v[B.id]=U}),s.nodeMap=h,s.nodeIdxMap=v,s.linkDistance=mu(s.linkDistance,1),s.nodeStrength=mu(s.nodeStrength,1),s.edgeStrength=mu(s.edgeStrength,1);var k,T=s.nodeSize;if(s.preventOverlap){var I,j=s.nodeSpacing;I=ur(j)?function(){return j}:Yo(j)?j:function(){return 0},k=T?Ii(T)?function(B){return(T[0]>T[1]?T[0]:T[1])+I(B)}:function(B){return T+I(B)}:function(B){return B.size?Ii(B.size)?(B.size[0]>B.size[1]?B.size[0]:B.size[1])+I(B):Ao(B.size)?(B.size.width>B.size.height?B.size.width:B.size.height)+I(B):B.size+I(B):10+I(B)}}s.nodeSize=k;var F=s.edges;s.degrees=za(u.length,s.nodeIdxMap,F),s.getMass||(s.getMass=function(B){return s.degrees[s.nodeIdxMap[B.id]]||1}),s.run()}else s.onLayoutEnd&&s.onLayoutEnd()}},{key:"run",value:function(){var s=this,u=s.nodes,l=s.edges,h=s.maxIteration;if(typeof window!="undefined"){var v=0;this.timeInterval=window.setInterval(function(){var k=[],T=[];if(u){u.forEach(function(B,U){k[2*U]=0,k[2*U+1]=0,T[2*U]=0,T[2*U+1]=0}),s.calRepulsive(k,u),l&&s.calAttractive(k,l),s.calGravity(k,u);var I=Math.max(.02,s.interval-.002*v);s.updateVelocity(k,T,I,u);var j=[];u.forEach(function(B){j.push({x:B.x,y:B.y})}),s.updatePosition(T,I,u),s.tick&&s.tick();var F=0;u.forEach(function(B,U){var q=B.x-j[U].x,$=B.y-j[U].y;F+=Math.sqrt(q*q+$*$)}),(F/=u.length)<s.minMovement&&(window.clearInterval(s.timeInterval),s.onLayoutEnd&&s.onLayoutEnd()),++v>=h&&(s.onLayoutEnd&&s.onLayoutEnd(),window.clearInterval(s.timeInterval))}},0)}}},{key:"calRepulsive",value:function(s,u){var l=this.getMass,h=this.nodeStrength,v=this.factor,k=this.coulombDisScale,T=this.preventOverlap,I=this.nodeSize;u.forEach(function(j,F){var B=l?l(j):1;u.forEach(function(U,q){if(!(F>=q)){var $=j.x-U.x,ve=j.y-U.y,de=Math.sqrt($*$+ve*ve)+.01,me=(de+.1)*k,Te=$/de,Oe=ve/de,Pe=(h(j)+h(U))/2*v/(me*me),Ze=l?l(U):1;if(s[2*F]+=Te*Pe,s[2*F+1]+=Oe*Pe,s[2*q]-=Te*Pe,s[2*q+1]-=Oe*Pe,T&&de<(I(j)+I(U))/2){var nt=(h(j)+h(U))/2/(de*de);s[2*F]+=Te*nt/B,s[2*F+1]+=Oe*nt/B,s[2*q]-=Te*nt/Ze,s[2*q+1]-=Oe*nt/Ze}}})})}},{key:"calAttractive",value:function(s,u){var l=this.nodeMap,h=this.nodeIdxMap,v=this.linkDistance,k=this.edgeStrength,T=this.getMass;u.forEach(function(I,j){var F=fn(I,"source"),B=fn(I,"target"),U=l[F],q=l[B],$=q.x-U.x,ve=q.y-U.y,de=Math.sqrt($*$+ve*ve)+.01,me=$/de,Te=ve/de,Oe=((v(I)||1)-de)*k(I),Pe=h[F],Ze=h[B],nt=T?T(U):1,ct=T?T(q):1;s[2*Pe]-=me*Oe/nt,s[2*Pe+1]-=Te*Oe/nt,s[2*Ze]+=me*Oe/ct,s[2*Ze+1]+=Te*Oe/ct})}},{key:"calGravity",value:function(s,u){for(var l=this.center,h=this.gravity,v=this.degrees,k=u.length,T=0;T<k;T++){var I=u[T],j=I.x-l[0],F=I.y-l[1],B=h;if(this.getCenter){var U=this.getCenter(I,v[T]);U&&ur(U[0])&&ur(U[1])&&ur(U[2])&&(j=I.x-U[0],F=I.y-U[1],B=U[2])}B&&(s[2*T]-=B*j,s[2*T+1]-=B*F)}}},{key:"updateVelocity",value:function(s,u,l,h){var v=this,k=l*v.damping;h.forEach(function(T,I){var j=s[2*I]*k||.01,F=s[2*I+1]*k||.01,B=Math.sqrt(j*j+F*F);if(B>v.maxSpeed){var U=v.maxSpeed/B;j*=U,F*=U}u[2*I]=j,u[2*I+1]=F})}},{key:"updatePosition",value:function(s,u,l){l.forEach(function(h,v){if(ur(h.fx)&&ur(h.fy))return h.x=h.fx,void(h.y=h.fy);var k=s[2*v]*u,T=s[2*v+1]*u;h.x+=k,h.y+=T})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}])&&Nc(t.prototype,e),r&&Nc(t,r),a}(Wi);function Rc(n,t,e,r){if(isNaN(t)||isNaN(e))return n;var i,a,s,u,l,h,v,k,T,I=n._root,j={data:r},F=n._x0,B=n._y0,U=n._x1,q=n._y1;if(!I)return n._root=j,n;for(;I.length;)if((h=t>=(a=(F+U)/2))?F=a:U=a,(v=e>=(s=(B+q)/2))?B=s:q=s,i=I,!(I=I[k=v<<1|h]))return i[k]=j,n;if(u=+n._x.call(null,I.data),l=+n._y.call(null,I.data),t===u&&e===l)return j.next=I,i?i[k]=j:n._root=j,n;do i=i?i[k]=new Array(4):n._root=new Array(4),(h=t>=(a=(F+U)/2))?F=a:U=a,(v=e>=(s=(B+q)/2))?B=s:q=s;while((k=v<<1|h)==(T=(l>=s)<<1|u>=a));return i[T]=I,i[k]=j,n}var Xi=function(n,t,e,r,i){this.node=n,this.x0=t,this.y0=e,this.x1=r,this.y1=i};function mg(n){return n[0]}function bg(n){return n[1]}function bu(n,t,e){var r=new xu(t==null?mg:t,e==null?bg:e,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function xu(n,t,e,r,i,a){this._x=n,this._y=t,this._x0=e,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Lc(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}var Yi=bu.prototype=xu.prototype;Yi.copy=function(){var n,t,e=new xu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=Lc(r),e;for(n=[{source:r,target:e._root=new Array(4)}];r=n.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?n.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=Lc(t));return e},Yi.add=function(n){var t=+this._x.call(null,n),e=+this._y.call(null,n);return Rc(this.cover(t,e),t,e,n)},Yi.addAll=function(n){var t,e,r,i,a=n.length,s=new Array(a),u=new Array(a),l=1/0,h=1/0,v=-1/0,k=-1/0;for(e=0;e<a;++e)isNaN(r=+this._x.call(null,t=n[e]))||isNaN(i=+this._y.call(null,t))||(s[e]=r,u[e]=i,r<l&&(l=r),r>v&&(v=r),i<h&&(h=i),i>k&&(k=i));if(l>v||h>k)return this;for(this.cover(l,h).cover(v,k),e=0;e<a;++e)Rc(this,s[e],u[e],n[e]);return this},Yi.cover=function(n,t){if(isNaN(n=+n)||isNaN(t=+t))return this;var e=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(e))i=(e=Math.floor(n))+1,a=(r=Math.floor(t))+1;else{for(var s,u,l=i-e||1,h=this._root;e>n||n>=i||r>t||t>=a;)switch(u=(t<r)<<1|n<e,(s=new Array(4))[u]=h,h=s,l*=2,u){case 0:i=e+l,a=r+l;break;case 1:e=i-l,a=r+l;break;case 2:i=e+l,r=a-l;break;case 3:e=i-l,r=a-l}this._root&&this._root.length&&(this._root=h)}return this._x0=e,this._y0=r,this._x1=i,this._y1=a,this},Yi.data=function(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n},Yi.extent=function(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Yi.find=function(n,t,e){var r,i,a,s,u,l,h,v=this._x0,k=this._y0,T=this._x1,I=this._y1,j=[],F=this._root;for(F&&j.push(new Xi(F,v,k,T,I)),e==null?e=1/0:(v=n-e,k=t-e,T=n+e,I=t+e,e*=e);l=j.pop();)if(!(!(F=l.node)||(i=l.x0)>T||(a=l.y0)>I||(s=l.x1)<v||(u=l.y1)<k))if(F.length){var B=(i+s)/2,U=(a+u)/2;j.push(new Xi(F[3],B,U,s,u),new Xi(F[2],i,U,B,u),new Xi(F[1],B,a,s,U),new Xi(F[0],i,a,B,U)),(h=(t>=U)<<1|n>=B)&&(l=j[j.length-1],j[j.length-1]=j[j.length-1-h],j[j.length-1-h]=l)}else{var q=n-+this._x.call(null,F.data),$=t-+this._y.call(null,F.data),ve=q*q+$*$;if(ve<e){var de=Math.sqrt(e=ve);v=n-de,k=t-de,T=n+de,I=t+de,r=F.data}}return r},Yi.remove=function(n){if(isNaN(a=+this._x.call(null,n))||isNaN(s=+this._y.call(null,n)))return this;var t,e,r,i,a,s,u,l,h,v,k,T,I=this._root,j=this._x0,F=this._y0,B=this._x1,U=this._y1;if(!I)return this;if(I.length)for(;;){if((h=a>=(u=(j+B)/2))?j=u:B=u,(v=s>=(l=(F+U)/2))?F=l:U=l,t=I,!(I=I[k=v<<1|h]))return this;if(!I.length)break;(t[k+1&3]||t[k+2&3]||t[k+3&3])&&(e=t,T=k)}for(;I.data!==n;)if(r=I,!(I=I.next))return this;return(i=I.next)&&delete I.next,r?(i?r.next=i:delete r.next,this):t?(i?t[k]=i:delete t[k],(I=t[0]||t[1]||t[2]||t[3])&&I===(t[3]||t[2]||t[1]||t[0])&&!I.length&&(e?e[T]=I:this._root=I),this):(this._root=i,this)},Yi.removeAll=function(n){for(var t=0,e=n.length;t<e;++t)this.remove(n[t]);return this},Yi.root=function(){return this._root},Yi.size=function(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n},Yi.visit=function(n){var t,e,r,i,a,s,u=[],l=this._root;for(l&&u.push(new Xi(l,this._x0,this._y0,this._x1,this._y1));t=u.pop();)if(!n(l=t.node,r=t.x0,i=t.y0,a=t.x1,s=t.y1)&&l.length){var h=(r+a)/2,v=(i+s)/2;(e=l[3])&&u.push(new Xi(e,h,v,a,s)),(e=l[2])&&u.push(new Xi(e,r,v,h,s)),(e=l[1])&&u.push(new Xi(e,h,i,a,v)),(e=l[0])&&u.push(new Xi(e,r,i,h,v))}return this},Yi.visitAfter=function(n){var t,e=[],r=[];for(this._root&&e.push(new Xi(this._root,this._x0,this._y0,this._x1,this._y1));t=e.pop();){var i=t.node;if(i.length){var a,s=t.x0,u=t.y0,l=t.x1,h=t.y1,v=(s+l)/2,k=(u+h)/2;(a=i[0])&&e.push(new Xi(a,s,u,v,k)),(a=i[1])&&e.push(new Xi(a,v,u,l,k)),(a=i[2])&&e.push(new Xi(a,s,k,v,h)),(a=i[3])&&e.push(new Xi(a,v,k,l,h))}r.push(t)}for(;t=r.pop();)n(t.node,t.x0,t.y0,t.x1,t.y1);return this},Yi.x=function(n){return arguments.length?(this._x=n,this):this._x},Yi.y=function(n){return arguments.length?(this._y=n,this):this._y};var Hi=function(n){return function(){return n}},Ho=function(n){return 1e-6*(n()-.5)},xg={value:function(){}};function Bc(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new xs(r)}function xs(n){this._=n}function wg(n,t){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}function _g(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function Gc(n,t,e){for(var r=0,i=n.length;r<i;++r)if(n[r].name===t){n[r]=xg,n=n.slice(0,r).concat(n.slice(r+1));break}return e!=null&&n.push({name:t,value:e}),n}xs.prototype=Bc.prototype={constructor:xs,on:function(n,t){var e,r=this._,i=wg(n+"",r),a=-1,s=i.length;if(!(arguments.length<2)){if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(e=(n=i[a]).type)r[e]=Gc(r[e],n.name,t);else if(t==null)for(e in r)r[e]=Gc(r[e],n.name,null);return this}for(;++a<s;)if((e=(n=i[a]).type)&&(e=_g(r[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new xs(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),a=0;a<e;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(a=0,e=(r=this._[n]).length;a<e;++a)r[a].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,a=r.length;i<a;++i)r[i].value.apply(t,e)}};var Sg=Bc;function wu(n){return(wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var ws,Va,va=0,Wa=0,Xa=0,_s=0,aa=0,Ss=0,Ya=(typeof performance=="undefined"?"undefined":wu(performance))==="object"&&performance.now?performance:Date,Fc=(typeof window=="undefined"?"undefined":wu(window))==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function zc(){return aa||(Fc(Eg),aa=Ya.now()+Ss)}function Eg(){aa=0}function _u(){this._call=this._time=this._next=null}function Uc(n,t,e){var r=new _u;return r.restart(n,t,e),r}function Vc(){aa=(_s=Ya.now())+Ss,va=Wa=0;try{(function(){zc(),++va;for(var n,t=ws;t;)(n=aa-t._time)>=0&&t._call.call(null,n),t=t._next;--va})()}finally{va=0,function(){for(var n,t,e=ws,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:ws=t);Va=n,Su(r)}(),aa=0}}function Og(){var n=Ya.now(),t=n-_s;t>1e3&&(Ss-=t,_s=n)}function Su(n){va||(Wa&&(Wa=clearTimeout(Wa)),n-aa>24?(n<1/0&&(Wa=setTimeout(Vc,n-Ya.now()-Ss)),Xa&&(Xa=clearInterval(Xa))):(Xa||(_s=Ya.now(),Xa=setInterval(Og,1e3)),va=1,Fc(Vc)))}_u.prototype=Uc.prototype={constructor:_u,restart:function(n,t,e){if(typeof n!="function")throw new TypeError("callback is not a function");e=(e==null?zc():+e)+(t==null?0:+t),this._next||Va===this||(Va?Va._next=this:ws=this,Va=this),this._call=n,this._time=e,Su()},stop:function(){this._call&&(this._call=null,this._time=1/0,Su())}};function Mg(n){return n.x}function kg(n){return n.y}var Ag=Math.PI*(3-Math.sqrt(5)),Wc=function(n){var t,e,r=1,i=.001,a=1-Math.pow(i,1/300),s=0,u=.6,l=new Map,h=Uc(T),v=Sg("tick","end"),k=(e=1,function(){return(e=(1664525*e+1013904223)%4294967296)/4294967296});function T(){I(),v.call("tick",t),r<i&&(h.stop(),v.call("end",t))}function I(B){var U,q,$=n.length;B===void 0&&(B=1);for(var ve=0;ve<B;++ve)for(r+=(s-r)*a,l.forEach(function(de){de(r)}),U=0;U<$;++U)(q=n[U]).fx==null?q.x+=q.vx*=u:(q.x=q.fx,q.vx=0),q.fy==null?q.y+=q.vy*=u:(q.y=q.fy,q.vy=0);return t}function j(){for(var B,U=0,q=n.length;U<q;++U){if((B=n[U]).index=U,B.fx!=null&&(B.x=B.fx),B.fy!=null&&(B.y=B.fy),isNaN(B.x)||isNaN(B.y)){var $=10*Math.sqrt(.5+U),ve=U*Ag;B.x=$*Math.cos(ve),B.y=$*Math.sin(ve)}(isNaN(B.vx)||isNaN(B.vy))&&(B.vx=B.vy=0)}}function F(B){return B.initialize&&B.initialize(n,k),B}return n==null&&(n=[]),j(),t={tick:I,restart:function(){return h.restart(T),t},stop:function(){return h.stop(),t},nodes:function(B){return arguments.length?(n=B,j(),l.forEach(F),t):n},alpha:function(B){return arguments.length?(r=+B,t):r},alphaMin:function(B){return arguments.length?(i=+B,t):i},alphaDecay:function(B){return arguments.length?(a=+B,t):+a},alphaTarget:function(B){return arguments.length?(s=+B,t):s},velocityDecay:function(B){return arguments.length?(u=1-B,t):1-u},randomSource:function(B){return arguments.length?(k=B,l.forEach(F),t):k},force:function(B,U){return arguments.length>1?(U==null?l.delete(B):l.set(B,F(U)),t):l.get(B)},find:function(B,U,q){var $,ve,de,me,Te,Oe=0,Pe=n.length;for(q==null?q=1/0:q*=q,Oe=0;Oe<Pe;++Oe)(de=($=B-(me=n[Oe]).x)*$+(ve=U-me.y)*ve)<q&&(Te=me,q=de);return Te},on:function(B,U){return arguments.length>1?(v.on(B,U),t):v.on(B)}}},Xc=function(){var n,t,e,r,i,a=Hi(-30),s=1,u=1/0,l=.81;function h(I){var j,F=n.length,B=bu(n,Mg,kg).visitAfter(k);for(r=I,j=0;j<F;++j)t=n[j],B.visit(T)}function v(){if(n){var I,j,F=n.length;for(i=new Array(F),I=0;I<F;++I)j=n[I],i[j.index]=+a(j,I,n)}}function k(I){var j,F,B,U,q,$=0,ve=0;if(I.length){for(B=U=q=0;q<4;++q)(j=I[q])&&(F=Math.abs(j.value))&&($+=j.value,ve+=F,B+=F*j.x,U+=F*j.y);I.x=B/ve,I.y=U/ve}else{(j=I).x=j.data.x,j.y=j.data.y;do $+=i[j.data.index];while(j=j.next)}I.value=$}function T(I,j,F,B){if(!I.value)return!0;var U=I.x-t.x,q=I.y-t.y,$=B-j,ve=U*U+q*q;if($*$/l<ve)return ve<u&&(U===0&&(ve+=(U=Ho(e))*U),q===0&&(ve+=(q=Ho(e))*q),ve<s&&(ve=Math.sqrt(s*ve)),t.vx+=U*I.value*r/ve,t.vy+=q*I.value*r/ve),!0;if(!(I.length||ve>=u)){(I.data!==t||I.next)&&(U===0&&(ve+=(U=Ho(e))*U),q===0&&(ve+=(q=Ho(e))*q),ve<s&&(ve=Math.sqrt(s*ve)));do I.data!==t&&($=i[I.data.index]*r/ve,t.vx+=U*$,t.vy+=q*$);while(I=I.next)}}return h.initialize=function(I,j){n=I,e=j,v()},h.strength=function(I){return arguments.length?(a=typeof I=="function"?I:Hi(+I),v(),h):a},h.distanceMin=function(I){return arguments.length?(s=I*I,h):Math.sqrt(s)},h.distanceMax=function(I){return arguments.length?(u=I*I,h):Math.sqrt(u)},h.theta=function(I){return arguments.length?(l=I*I,h):Math.sqrt(l)},h};function Eu(n){return(Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Cg(n){return n.index}function Yc(n,t){var e=n.get(t);if(!e)throw new Error("node not found: "+t);return e}var Ou=function(n){var t,e,r,i,a,s,u=Cg,l=function(F){return 1/Math.min(i[F.source.index],i[F.target.index])},h=Hi(30),v=1;function k(F){for(var B=0,U=n.length;B<v;++B)for(var q,$,ve,de,me,Te,Oe,Pe=0;Pe<U;++Pe)$=(q=n[Pe]).source,de=(ve=q.target).x+ve.vx-$.x-$.vx||Ho(s),me=ve.y+ve.vy-$.y-$.vy||Ho(s),de*=Te=((Te=Math.sqrt(de*de+me*me))-e[Pe])/Te*F*t[Pe],me*=Te,ve.vx-=de*(Oe=a[Pe]),ve.vy-=me*Oe,$.vx+=de*(Oe=1-Oe),$.vy+=me*Oe}function T(){if(r){var F,B,U=r.length,q=n.length,$=new Map(r.map(function(ve,de){return[u(ve,de,r),ve]}));for(F=0,i=new Array(U);F<q;++F)(B=n[F]).index=F,Eu(B.source)!=="object"&&(B.source=Yc($,B.source)),Eu(B.target)!=="object"&&(B.target=Yc($,B.target)),i[B.source.index]=(i[B.source.index]||0)+1,i[B.target.index]=(i[B.target.index]||0)+1;for(F=0,a=new Array(q);F<q;++F)B=n[F],a[F]=i[B.source.index]/(i[B.source.index]+i[B.target.index]);t=new Array(q),I(),e=new Array(q),j()}}function I(){if(r)for(var F=0,B=n.length;F<B;++F)t[F]=+l(n[F],F,n)}function j(){if(r)for(var F=0,B=n.length;F<B;++F)e[F]=+h(n[F],F,n)}return n==null&&(n=[]),k.initialize=function(F,B){r=F,s=B,T()},k.links=function(F){return arguments.length?(n=F,T(),k):n},k.id=function(F){return arguments.length?(u=F,k):u},k.iterations=function(F){return arguments.length?(v=+F,k):v},k.strength=function(F){return arguments.length?(l=typeof F=="function"?F:Hi(+F),I(),k):l},k.distance=function(F){return arguments.length?(h=typeof F=="function"?F:Hi(+F),j(),k):h},k};function Tg(n){return n.x+n.vx}function Ig(n){return n.y+n.vy}var Hc=function(n){var t,e,r,i=1,a=1;function s(){for(var h,v,k,T,I,j,F,B=t.length,U=0;U<a;++U)for(v=bu(t,Tg,Ig).visitAfter(u),h=0;h<B;++h)k=t[h],j=e[k.index],F=j*j,T=k.x+k.vx,I=k.y+k.vy,v.visit(q);function q($,ve,de,me,Te){var Oe=$.data,Pe=$.r,Ze=j+Pe;if(!Oe)return ve>T+Ze||me<T-Ze||de>I+Ze||Te<I-Ze;if(Oe.index>k.index){var nt=T-Oe.x-Oe.vx,ct=I-Oe.y-Oe.vy,st=nt*nt+ct*ct;st<Ze*Ze&&(nt===0&&(st+=(nt=Ho(r))*nt),ct===0&&(st+=(ct=Ho(r))*ct),st=(Ze-(st=Math.sqrt(st)))/st*i,k.vx+=(nt*=st)*(Ze=(Pe*=Pe)/(F+Pe)),k.vy+=(ct*=st)*Ze,Oe.vx-=nt*(Ze=1-Ze),Oe.vy-=ct*Ze)}}}function u(h){if(h.data)return h.r=e[h.data.index];for(var v=h.r=0;v<4;++v)h[v]&&h[v].r>h.r&&(h.r=h[v].r)}function l(){if(t){var h,v,k=t.length;for(e=new Array(k),h=0;h<k;++h)v=t[h],e[v.index]=+n(v,h,t)}}return typeof n!="function"&&(n=Hi(n==null?1:+n)),s.initialize=function(h,v){t=h,r=v,l()},s.iterations=function(h){return arguments.length?(a=+h,s):a},s.strength=function(h){return arguments.length?(i=+h,s):i},s.radius=function(h){return arguments.length?(n=typeof h=="function"?h:Hi(+h),l(),s):n},s};function jg(n,t){return function(e){if(Array.isArray(e))return e}(n)||function(e,r){var i=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,s,u=[],l=!0,h=!1;try{for(i=i.call(e);!(l=(a=i.next()).done)&&(u.push(a.value),!r||u.length!==r);l=!0);}catch(v){h=!0,s=v}finally{try{l||i.return==null||i.return()}finally{if(h)throw s}}return u}}(n,t)||function(e,r){if(!!e){if(typeof e=="string")return qc(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qc(e,r)}}(n,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qc(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function Pg(){function n(me){return function(){return me}}var t,e=function(me){return me.cluster},r=n(1),i=n(-1),a=n(100),s=n(.1),u=[0,0],l=[],h={},v=[],k=100,T=100,I={none:{x:0,y:0}},j=[],F="force",B=!0,U=.1;function q(me){if(!B)return q;t.tick(),ve();for(var Te,Oe=0,Pe=l.length,Ze=me*U;Oe<Pe;++Oe)(Te=l[Oe]).vx+=(I[e(Te)].x-Te.x)*Ze,Te.vy+=(I[e(Te)].y-Te.y)*Ze}function $(){l&&function(){if(!(!l||!l.length)){if(e(l[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var me=(Oe=[],Pe=[],Ze={},nt=[],Te=function(ct){var st={};return ct.forEach(function(It){var gt=e(It);st[gt]||(st[gt]={count:0,sumforceNodeSize:0})}),ct.forEach(function(It){var gt=e(It),Pt=r(It),Rt=st[gt];Rt.count=Rt.count+1,Rt.sumforceNodeSize=Rt.sumforceNodeSize+Math.PI*(Pt*Pt)*1.3,st[gt]=Rt}),st}(l),nt=function(ct){var st={},It=[];return ct.forEach(function(gt){var Pt=function(Zt){var kt=fn(Zt,"source"),Vt=fn(Zt,"target"),Dt=e(h[kt]),qt=e(h[Vt]);return Dt<=qt?"".concat(Dt,"~").concat(qt):"".concat(qt,"~").concat(Dt)}(gt),Rt=0;st[Pt]!==void 0&&(Rt=st[Pt]),Rt+=1,st[Pt]=Rt}),Object.entries(st).forEach(function(gt){var Pt=jg(gt,2),Rt=Pt[0],Zt=Pt[1],kt=Rt.split("~")[0],Vt=Rt.split("~")[1];kt!==void 0&&Vt!==void 0&&It.push({source:kt,target:Vt,count:Zt})}),It}(v),Object.keys(Te).forEach(function(ct,st){var It=Te[ct];Oe.push({id:ct,size:It.count,r:Math.sqrt(It.sumforceNodeSize/Math.PI)}),Ze[ct]=st}),nt.forEach(function(ct){var st=fn(ct,"source"),It=fn(ct,"target"),gt=Ze[st],Pt=Ze[It];gt!==void 0&&Pt!==void 0&&Pe.push({source:gt,target:Pt,count:ct.count})}),{nodes:Oe,links:Pe}),Te,Oe,Pe,Ze,nt;t=Wc(me.nodes).force("x",function(ct){var st,It,gt,Pt=Hi(.1);function Rt(kt){for(var Vt,Dt=0,qt=st.length;Dt<qt;++Dt)(Vt=st[Dt]).vx+=(gt[Dt]-Vt.x)*It[Dt]*kt}function Zt(){if(st){var kt,Vt=st.length;for(It=new Array(Vt),gt=new Array(Vt),kt=0;kt<Vt;++kt)It[kt]=isNaN(gt[kt]=+ct(st[kt],kt,st))?0:+Pt(st[kt],kt,st)}}return typeof ct!="function"&&(ct=Hi(ct==null?0:+ct)),Rt.initialize=function(kt){st=kt,Zt()},Rt.strength=function(kt){return arguments.length?(Pt=typeof kt=="function"?kt:Hi(+kt),Zt(),Rt):Pt},Rt.x=function(kt){return arguments.length?(ct=typeof kt=="function"?kt:Hi(+kt),Zt(),Rt):ct},Rt}(k).strength(.1)).force("y",function(ct){var st,It,gt,Pt=Hi(.1);function Rt(kt){for(var Vt,Dt=0,qt=st.length;Dt<qt;++Dt)(Vt=st[Dt]).vy+=(gt[Dt]-Vt.y)*It[Dt]*kt}function Zt(){if(st){var kt,Vt=st.length;for(It=new Array(Vt),gt=new Array(Vt),kt=0;kt<Vt;++kt)It[kt]=isNaN(gt[kt]=+ct(st[kt],kt,st))?0:+Pt(st[kt],kt,st)}}return typeof ct!="function"&&(ct=Hi(ct==null?0:+ct)),Rt.initialize=function(kt){st=kt,Zt()},Rt.strength=function(kt){return arguments.length?(Pt=typeof kt=="function"?kt:Hi(+kt),Zt(),Rt):Pt},Rt.y=function(kt){return arguments.length?(ct=typeof kt=="function"?kt:Hi(+kt),Zt(),Rt):ct},Rt}(T).strength(.1)).force("collide",Hc(function(ct){return ct.r}).iterations(4)).force("charge",Xc().strength(i)).force("links",Ou(me.nodes.length?me.links:[]).distance(a).strength(s)),j=t.nodes(),ve()}}()}function ve(){return I={none:{x:0,y:0}},j.forEach(function(me){I[me.id]={x:me.x-u[0],y:me.y-u[1]}}),I}function de(me){h={},me.forEach(function(Te){h[Te.id]=Te})}return q.initialize=function(me){l=me,$()},q.template=function(me){return arguments.length?(F=me,$(),q):F},q.groupBy=function(me){return arguments.length?typeof me=="string"?(e=function(Te){return Te[me]},q):(e=me,q):e},q.enableGrouping=function(me){return arguments.length?(B=me,q):B},q.strength=function(me){return arguments.length?(U=me,q):U},q.centerX=function(me){return arguments.length?(k=me,q):k},q.centerY=function(me){return arguments.length?(T=me,q):T},q.nodes=function(me){return arguments.length?(de(me||[]),l=me||[],q):l},q.links=function(me){return arguments.length?(v=me||[],$(),q):v},q.forceNodeSize=function(me){return arguments.length?(r=typeof me=="function"?me:n(+me),$(),q):r},q.nodeSize=q.forceNodeSize,q.forceCharge=function(me){return arguments.length?(i=typeof me=="function"?me:n(+me),$(),q):i},q.forceLinkDistance=function(me){return arguments.length?(a=typeof me=="function"?me:n(+me),$(),q):a},q.forceLinkStrength=function(me){return arguments.length?(s=typeof me=="function"?me:n(+me),$(),q):s},q.offset=function(me){return arguments.length?(u=me,q):u},q.getFocis=ve,q}var Ng="LAYOUT_TICK",Kc="GPU_LAYOUT_END";function Zc(n){return(Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function $c(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Qc(n,t){return(Qc=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Dg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Mu(n);if(t){var i=Mu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Rg(this,e)}}function Rg(n,t){return!t||Zc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Mu(n){return(Mu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Lg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Qc(s,u)})(a,n);var t,e,r,i=Dg(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.nodeStrength=null,u.edgeStrength=null,u.preventOverlap=!1,u.clusterNodeStrength=null,u.clusterEdgeStrength=null,u.clusterEdgeDistance=null,u.clusterNodeSize=null,u.clusterFociStrength=null,u.linkDistance=50,u.alphaDecay=.028,u.alphaMin=.001,u.alpha=.3,u.collideStrength=1,u.workerEnabled=!1,u.tick=function(){},u.onLayoutEnd=function(){},u.ticking=void 0,s&&u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(s){this.nodes=s.nodes||[];var u=s.edges||[];this.edges=u.map(function(l){var h={},v=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(l).forEach(function(k){v.indexOf(k)>-1||(h[k]=l[k])}),h}),this.ticking=!1}},{key:"execute",value:function(s){var u=this,l=u.nodes,h=u.edges;if(!u.ticking){var v=u.forceSimulation,k=u.alphaMin,T=u.alphaDecay,I=u.alpha;if(v){if(s){if(u.clustering&&u.clusterForce&&(u.clusterForce.nodes(l),u.clusterForce.links(h)),v.nodes(l),h&&u.edgeForce)u.edgeForce.links(h);else if(h&&!u.edgeForce){var j=Ou().id(function(ve){return ve.id}).links(h);u.edgeStrength&&j.strength(u.edgeStrength),u.linkDistance&&j.distance(u.linkDistance),u.edgeForce=j,v.force("link",j)}}u.preventOverlap&&u.overlapProcess(v),v.alpha(I).restart(),this.ticking=!0}else try{var F=Xc();if(u.nodeStrength&&F.strength(u.nodeStrength),v=Wc().nodes(l),u.clustering){var B=Pg();B.centerX(u.center[0]).centerY(u.center[1]).template("force").strength(u.clusterFociStrength),h&&B.links(h),l&&B.nodes(l),B.forceLinkDistance(u.clusterEdgeDistance).forceLinkStrength(u.clusterEdgeStrength).forceCharge(u.clusterNodeStrength).forceNodeSize(u.clusterNodeSize),u.clusterForce=B,v.force("group",B)}if(v.force("center",function(ve,de){var me,Te=1;function Oe(){var Pe,Ze,nt=me.length,ct=0,st=0;for(Pe=0;Pe<nt;++Pe)ct+=(Ze=me[Pe]).x,st+=Ze.y;for(ct=(ct/nt-ve)*Te,st=(st/nt-de)*Te,Pe=0;Pe<nt;++Pe)(Ze=me[Pe]).x-=ct,Ze.y-=st}return ve==null&&(ve=0),de==null&&(de=0),Oe.initialize=function(Pe){me=Pe},Oe.x=function(Pe){return arguments.length?(ve=+Pe,Oe):ve},Oe.y=function(Pe){return arguments.length?(de=+Pe,Oe):de},Oe.strength=function(Pe){return arguments.length?(Te=+Pe,Oe):Te},Oe}(u.center[0],u.center[1])).force("charge",F).alpha(I).alphaDecay(T).alphaMin(k),u.preventOverlap&&u.overlapProcess(v),h){var U=Ou().id(function(ve){return ve.id}).links(h);u.edgeStrength&&U.strength(u.edgeStrength),u.linkDistance&&U.distance(u.linkDistance),u.edgeForce=U,v.force("link",U)}if(u.workerEnabled&&!Bg()&&(u.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),u.workerEnabled){v.stop();for(var q=function(ve){var de=ve.alphaMin(),me=ve.alphaTarget(),Te=ve.alpha(),Oe=Math.log((de-me)/(Te-me))/Math.log(1-ve.alphaDecay());return Math.ceil(Oe)}(v),$=1;$<=q;$++)v.tick(),postMessage({nodes:l,currentTick:$,totalTicks:q,type:Ng},void 0);u.ticking=!1}else v.on("tick",function(){u.tick()}).on("end",function(){u.ticking=!1,u.onLayoutEnd&&u.onLayoutEnd()}),u.ticking=!0;u.forceSimulation=v,u.ticking=!0}catch(ve){u.ticking=!1,console.warn(ve)}}}},{key:"overlapProcess",value:function(s){var u,l,h=this.nodeSize,v=this.nodeSpacing,k=this.collideStrength;if(l=ur(v)?function(){return v}:Yo(v)?v:function(){return 0},h)if(Yo(h))u=function(j){return h(j)+l(j)};else if(Ii(h)){var T=(h[0]>h[1]?h[0]:h[1])/2;u=function(j){return T+l(j)}}else if(ur(h)){var I=h/2;u=function(j){return I+l(j)}}else u=function(){return 10};else u=function(j){return j.size?Ii(j.size)?(j.size[0]>j.size[1]?j.size[0]:j.size[1])/2+l(j):Ao(j.size)?(j.size.width>j.size.height?j.size.width:j.size.height)/2+l(j):j.size/2+l(j):10+l(j)};s.force("collisionForce",Hc(u).strength(k))}},{key:"updateCfg",value:function(s){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,s)}},{key:"destroy",value:function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0}}])&&$c(t.prototype,e),r&&$c(t,r),a}(Wi);function Bg(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function Jc(n){return(Jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function el(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function tl(n,t){return(tl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Gg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=ku(n);if(t){var i=ku(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Fg(this,e)}}function Fg(n,t){return!t||Jc(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function ku(n){return(ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function zg(n,t,e,r){n.forEach(function(i,a){n[a].children=[],n[a].parent=[]}),r?t.forEach(function(i){var a=fn(i,"source"),s=fn(i,"target"),u=0;a&&(u=e[a]);var l=0;s&&(l=e[s]);var h=n[u].children,v=n[l].parent;h.push(n[l].id),v.push(n[u].id)}):t.forEach(function(i){var a=fn(i,"source"),s=fn(i,"target"),u=0;a&&(u=e[a]);var l=0;s&&(l=e[s]);var h=n[u].children,v=n[l].children;h.push(n[l].id),v.push(n[u].id)})}function Ug(n,t,e){for(var r=e.length,i=0;i<r;i++){var a=fn(e[i],"source"),s=fn(e[i],"target");if(n.id===a&&t.id===s||t.id===a&&n.id===s)return!0}return!1}function Vg(n,t){var e=n.degree,r=t.degree;return e<r?-1:e>r?1:0}var Wg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&tl(s,u)})(a,n);var t,e,r,i=Gg(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).radius=null,u.startRadius=null,u.endRadius=null,u.startAngle=0,u.endAngle=2*Math.PI,u.clockwise=!0,u.divisions=1,u.ordering=null,u.angleRatio=1,u.nodes=[],u.edges=[],u.nodeMap={},u.degrees=[],u.width=300,u.height=300,u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var s=this.nodes,u=this.edges,l=s.length;if(l!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var h=this.center;if(l===1)return s[0].x=h[0],s[0].y=h[1],void(this.onLayoutEnd&&this.onLayoutEnd());var v=this.radius,k=this.startRadius,T=this.endRadius,I=this.divisions,j=this.startAngle,F=this.endAngle,B=(F-j)/l,U={};s.forEach(function(nt,ct){U[nt.id]=ct}),this.nodeMap=U;var q=za(s.length,U,u);this.degrees=q,v||k||T?!k&&T?k=T:k&&!T&&(T=k):v=this.height>this.width?this.width/2:this.height/2;var $=B*this.angleRatio,ve=this.ordering,de=[];de=ve==="topology"?this.topologyOrdering():ve==="topology-directed"?this.topologyOrdering(!0):ve==="degree"?this.degreeOrdering():s;for(var me=this.clockwise,Te=Math.ceil(l/I),Oe=0;Oe<l;++Oe){var Pe=v;Pe||k===null||T===null||(Pe=k+Oe*(T-k)/(l-1)),Pe||(Pe=10+100*Oe/(l-1));var Ze=j+Oe%Te*$+2*Math.PI/I*Math.floor(Oe/Te);me||(Ze=F-Oe%Te*$-2*Math.PI/I*Math.floor(Oe/Te)),de[Oe].x=h[0]+Math.cos(Ze)*Pe,de[Oe].y=h[1]+Math.sin(Ze)*Pe,de[Oe].weight=q[Oe]}return this.onLayoutEnd&&this.onLayoutEnd(),{nodes:de,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"topologyOrdering",value:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],u=this,l=u.degrees,h=u.edges,v=u.nodes,k=og(v),T=u.nodeMap,I=[k[0]],j=[v[0]],F=[],B=v.length;F[0]=!0,zg(k,h,T,s);var U=0;return k.forEach(function(q,$){if($!==0)if($!==B-1&&l[$]===l[$+1]&&!Ug(I[U],q,h)||F[$]){for(var ve=I[U].children,de=!1,me=0;me<ve.length;me++){var Te=T[ve[me]];if(l[Te]===l[$]&&!F[Te]){I.push(k[Te]),j.push(v[T[k[Te].id]]),F[Te]=!0,de=!0;break}}for(var Oe=0;!de&&(F[Oe]||(I.push(k[Oe]),j.push(v[T[k[Oe].id]]),F[Oe]=!0,de=!0),++Oe!==B););}else I.push(q),j.push(v[T[q.id]]),F[$]=!0,U++}),j}},{key:"degreeOrdering",value:function(){var s=this.nodes,u=[],l=this.degrees;return s.forEach(function(h,v){h.degree=l[v],u.push(h)}),u.sort(Vg),u}},{key:"getType",value:function(){return"circular"}}])&&el(t.prototype,e),r&&el(t,r),a}(Wi),Xg=o(163),rl=o.n(Xg);function nl(n){return(nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function il(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ol(n,t){return(ol=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Yg(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Au(n);if(t){var i=Au(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Hg(this,e)}}function Hg(n,t){return!t||nl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Au(n){return(Au=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var qg=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&ol(s,u)})(a,n);var t,e,r,i=Yg(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).rankdir="TB",u.nodesep=50,u.ranksep=50,u.controlPoints=!1,u.sortByCombo=!1,u.nodes=[],u.edges=[],u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var s=this,u=this,l=u.nodes,h=u.nodeSize,v=u.rankdir,k=u.combos;if(l){var T,I=u.edges||[],j=new rl.a.graphlib.Graph({multigraph:!0,compound:!0});T=h?Ii(h)?function(){return h}:function(){return[h,h]}:function($){return $.size?Ii($.size)?$.size:Ao($.size)?[$.size.width||40,$.size.height||40]:[$.size,$.size]:[40,40]};var F=Es(u.nodesepFunc,u.nodesep,50),B=Es(u.ranksepFunc,u.ranksep,50);v!=="LR"&&v!=="RL"||(F=Es(u.ranksepFunc,u.ranksep,50),B=Es(u.nodesepFunc,u.nodesep,50)),j.setDefaultEdgeLabel(function(){return{}}),j.setGraph(u);var U,q={};return l.filter(function($){return $.layout!==!1}).forEach(function($){var ve=T($),de=B($),me=F($),Te=ve[0]+2*me,Oe=ve[1]+2*de;j.setNode($.id,{width:Te,height:Oe}),s.sortByCombo&&$.comboId&&(q[$.comboId]||(q[$.comboId]=!0,j.setNode($.comboId,{})),j.setParent($.id,$.comboId))}),this.sortByCombo&&k&&k.forEach(function($){$.parentId&&(q[$.parentId]||(q[$.parentId]=!0,j.setNode($.parentId,{})),j.setParent($.id,$.parentId))}),I.forEach(function($){var ve=fn($,"source"),de=fn($,"target");j.setEdge(ve,de,{weight:$.weight||1})}),rl.a.layout(j),j.nodes().forEach(function($){U=j.node($);var ve=l.findIndex(function(de){return de.id===$});l[ve]&&(l[ve].x=U.x,l[ve].y=U.y)}),j.edges().forEach(function($){U=j.edge($);var ve=I.findIndex(function(de){var me=fn(de,"source"),Te=fn(de,"target");return me===$.v&&Te===$.w});u.controlPoints&&I[ve].type!=="loop"&&(I[ve].controlPoints=U.points.slice(1,U.points.length-1))}),u.onLayoutEnd&&u.onLayoutEnd(),{nodes:l,edges:I}}}},{key:"getType",value:function(){return"dagre"}}])&&il(t.prototype,e),r&&il(t,r),a}(Wi);function Es(n,t,e){return n||(ur(t)?function(){return t}:function(){return e})}var Kg=Object.prototype.toString;function Os(n){return Kg.call(n).endsWith("Array]")}var Zg=function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Os(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,r=e===void 0?0:e,i=t.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[r],u=r+1;u<a;u++)n[u]>s&&(s=n[u]);return s},$g=function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Os(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var e=t.fromIndex,r=e===void 0?0:e,i=t.toIndex,a=i===void 0?n.length:i;if(r<0||r>=n.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>n.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[r],u=r+1;u<a;u++)n[u]<s&&(s=n[u]);return s},al=function(n){var t,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Os(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");if(e.output!==void 0){if(!Os(e.output))throw new TypeError("output option must be an array if specified");t=e.output}else t=new Array(n.length);var r=$g(n),i=Zg(n);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,s=a===void 0?e.autoMinMax?r:0:a,u=e.max,l=u===void 0?e.autoMinMax?i:1:u;if(s>=l)throw new RangeError("min option must be smaller than max option");for(var h=(l-s)/(i-r),v=0;v<n.length;v++)t[v]=(n[v]-r)*h+s;return t},Ms=" ".repeat(2),sl=" ".repeat(4);function ul(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.maxRows,r=e===void 0?15:e,i=t.maxColumns,a=i===void 0?10:i,s=t.maxNumSize,u=s===void 0?8:s;return"".concat(n.constructor.name,` {
`).concat(Ms,`[
`).concat(sl).concat(Qg(n,r,a,u),`
`).concat(Ms,`]
`).concat(Ms,"rows: ").concat(n.rows,`
`).concat(Ms,"columns: ").concat(n.columns,`
}`)}function Qg(n,t,e,r){for(var i=n.rows,a=n.columns,s=Math.min(i,t),u=Math.min(a,e),l=[],h=0;h<s;h++){for(var v=[],k=0;k<u;k++)v.push(Jg(n.get(h,k),r));l.push("".concat(v.join(" ")))}return u!==a&&(l[l.length-1]+=" ... ".concat(a-e," more columns")),s!==i&&l.push("... ".concat(i-t," more rows")),l.join(`
`.concat(sl))}function Jg(n,t){var e=String(n);if(e.length<=t)return e.padEnd(t," ");var r=n.toPrecision(t-2);if(r.length<=t)return r;var i=n.toExponential(t-2),a=i.indexOf("e"),s=i.slice(a);return i.slice(0,t-s.length)+s}function Cu(n){return(Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function yo(n,t,e){var r=e?n.rows:n.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function mo(n,t,e){var r=e?n.columns:n.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function ya(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function ma(n,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function ev(n,t){if(Cu(t)!=="object")throw new TypeError("unexpected type for row indices");if(t.some(function(e){return e<0||e>=n.rows}))throw new RangeError("row indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function tv(n,t){if(Cu(t)!=="object")throw new TypeError("unexpected type for column indices");if(t.some(function(e){return e<0||e>=n.columns}))throw new RangeError("column indices are out of range");return Array.isArray(t)||(t=Array.from(t)),t}function cl(n,t,e,r,i){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(As("startRow",t),As("endRow",e),As("startColumn",r),As("endColumn",i),t>e||r>i||t<0||t>=n.rows||e<0||e>=n.rows||r<0||r>=n.columns||i<0||i>=n.columns)throw new RangeError("Submatrix indices are out of range")}function ks(n){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=[],r=0;r<n;r++)e.push(t);return e}function As(n,t){if(typeof t!="number")throw new TypeError("".concat(n," must be a number"))}function ba(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function rv(n,t,e){for(var r=n.rows,i=n.columns,a=[],s=0;s<r;s++){for(var u=0,l=0,h=0,v=0;v<i;v++)u+=h=n.get(s,v)-e[s],l+=h*h;t?a.push((l-u*u/i)/(i-1)):a.push((l-u*u/i)/i)}return a}function nv(n,t,e){for(var r=n.rows,i=n.columns,a=[],s=0;s<i;s++){for(var u=0,l=0,h=0,v=0;v<r;v++)u+=h=n.get(v,s)-e[s],l+=h*h;t?a.push((l-u*u/r)/(r-1)):a.push((l-u*u/r)/r)}return a}function iv(n,t,e){for(var r=n.rows,i=n.columns,a=r*i,s=0,u=0,l=0,h=0;h<r;h++)for(var v=0;v<i;v++)s+=l=n.get(h,v)-e,u+=l*l;return t?(u-s*s/a)/(a-1):(u-s*s/a)/a}function ov(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)-t[e])}function av(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)-t[r])}function sv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)-t)}function uv(n){for(var t=[],e=0;e<n.rows;e++){for(var r=0,i=0;i<n.columns;i++)r+=Math.pow(n.get(e,i),2)/(n.columns-1);t.push(Math.sqrt(r))}return t}function cv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)/t[e])}function lv(n){for(var t=[],e=0;e<n.columns;e++){for(var r=0,i=0;i<n.rows;i++)r+=Math.pow(n.get(i,e),2)/(n.rows-1);t.push(Math.sqrt(r))}return t}function fv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)/t[r])}function hv(n){for(var t=n.size-1,e=0,r=0;r<n.columns;r++)for(var i=0;i<n.rows;i++)e+=Math.pow(n.get(i,r),2)/t;return Math.sqrt(e)}function dv(n,t){for(var e=0;e<n.rows;e++)for(var r=0;r<n.columns;r++)n.set(e,r,n.get(e,r)/t)}function ll(n,t){return(ll=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function pv(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Tu(n);if(t){var i=Tu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return fl(this,e)}}function fl(n,t){return!t||eo(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Tu(n){return(Tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function eo(n){return(eo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function hl(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function dl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function pl(n,t,e){return t&&dl(n.prototype,t),e&&dl(n,e),n}var vi=function(){function n(){hl(this,n)}return pl(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if(typeof t!="function")throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.call(this,e,r);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.push(this.get(e,r));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,r=-1,i=!0,a=!1;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>r?(a=!0,r=e):(i=!1,a=!0);t++}return i}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,r=-1,i=!0,a=!1;t<this.rows&&i;){for(e=0,a=!1;e<this.columns&&a===!1;)this.get(t,e)===0?e++:this.get(t,e)===1&&e>r?(a=!0,r=e):(i=!1,a=!0);for(var s=e+1;s<this.rows;s++)this.get(t,s)!==0&&(i=!1);t++}return i}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,r=0;e<t.rows&&r<t.columns;){for(var i=e,a=e;a<t.rows;a++)t.get(a,r)>t.get(i,r)&&(i=a);if(t.get(i,r)===0)r++;else{t.swapRows(e,i);for(var s=t.get(e,r),u=r;u<t.columns;u++)t.set(e,u,t.get(e,u)/s);for(var l=e+1;l<t.rows;l++){var h=t.get(l,r)/t.get(e,r);t.set(l,r,0);for(var v=r+1;v<t.columns;v++)t.set(l,v,t.get(l,v)-t.get(e,v)*h)}e++,r++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,r=t.rows,i=r-1;i>=0;)if(t.maxRow(i)===0)i--;else{for(var a=0,s=!1;a<r&&s===!1;)t.get(i,a)===1?s=!0:a++;for(var u=0;u<i;u++)for(var l=t.get(u,a),h=a;h<e;h++){var v=t.get(u,h)-l*t.get(i,h);t.set(u,h,v)}i--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(eo(t)!=="object")throw new TypeError("options must be an object");var e=t.rows,r=e===void 0?1:e,i=t.columns,a=i===void 0?1:i;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var s=new Fr(this.rows*r,this.columns*a),u=0;u<r;u++)for(var l=0;l<a;l++)s.setSubMatrix(this,this.rows*u,this.columns*l);return s}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){yo(this,t);for(var e=[],r=0;r<this.columns;r++)e.push(this.get(t,r));return e}},{key:"getRowVector",value:function(t){return Fr.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){yo(this,t),e=ya(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}},{key:"swapRows",value:function(t,e){yo(this,t),yo(this,e);for(var r=0;r<this.columns;r++){var i=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,i)}return this}},{key:"getColumn",value:function(t){mo(this,t);for(var e=[],r=0;r<this.rows;r++)e.push(this.get(r,t));return e}},{key:"getColumnVector",value:function(t){return Fr.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){mo(this,t),e=ma(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}},{key:"swapColumns",value:function(t,e){mo(this,t),mo(this,e);for(var r=0;r<this.rows;r++){var i=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,i)}return this}},{key:"addRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}},{key:"subRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}},{key:"mulRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}},{key:"divRowVector",value:function(t){t=ya(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}},{key:"addColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=ma(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}},{key:"mulRow",value:function(t,e){yo(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}},{key:"mulColumn",value:function(t,e){mo(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}},{key:"maxIndex",value:function(){ba(this);for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.get(r,i)>t&&(t=this.get(r,i),e[0]=r,e[1]=i);return e}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}},{key:"minIndex",value:function(){ba(this);for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)this.get(r,i)<t&&(t=this.get(r,i),e[0]=r,e[1]=i);return e}},{key:"maxRow",value:function(t){if(yo(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}},{key:"maxRowIndex",value:function(t){yo(this,t),ba(this);for(var e=this.get(t,0),r=[t,0],i=1;i<this.columns;i++)this.get(t,i)>e&&(e=this.get(t,i),r[1]=i);return r}},{key:"minRow",value:function(t){if(yo(this,t),this.isEmpty())return NaN;for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}},{key:"minRowIndex",value:function(t){yo(this,t),ba(this);for(var e=this.get(t,0),r=[t,0],i=1;i<this.columns;i++)this.get(t,i)<e&&(e=this.get(t,i),r[1]=i);return r}},{key:"maxColumn",value:function(t){if(mo(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}},{key:"maxColumnIndex",value:function(t){mo(this,t),ba(this);for(var e=this.get(0,t),r=[0,t],i=1;i<this.rows;i++)this.get(i,t)>e&&(e=this.get(i,t),r[0]=i);return r}},{key:"minColumn",value:function(t){if(mo(this,t),this.isEmpty())return NaN;for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}},{key:"minColumnIndex",value:function(t){mo(this,t),ba(this);for(var e=this.get(0,t),r=[0,t],i=1;i<this.rows;i++)this.get(i,t)<e&&(e=this.get(i,t),r[0]=i);return r}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],r=0;r<t;r++)e.push(this.get(r,r));return e}},{key:"norm",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",e=0;if(t==="max")return this.max();if(t==="frobenius"){for(var r=0;r<this.rows;r++)for(var i=0;i<this.columns;i++)e+=this.get(r,i)*this.get(r,i);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}},{key:"dot",value:function(t){n.isMatrix(t)&&(t=t.to1DArray());var e=this.to1DArray();if(e.length!==t.length)throw new RangeError("vectors do not have the same size");for(var r=0,i=0;i<e.length;i++)r+=e[i]*t[i];return r}},{key:"mmul",value:function(t){t=Fr.checkMatrix(t);for(var e=this.rows,r=this.columns,i=t.columns,a=new Fr(e,i),s=new Float64Array(r),u=0;u<i;u++){for(var l=0;l<r;l++)s[l]=t.get(l,u);for(var h=0;h<e;h++){for(var v=0,k=0;k<r;k++)v+=this.get(h,k)*s[k];a.set(h,u,v)}}return a}},{key:"strassen2x2",value:function(t){t=Fr.checkMatrix(t);var e=new Fr(2,2),r=this.get(0,0),i=t.get(0,0),a=this.get(0,1),s=t.get(0,1),u=this.get(1,0),l=t.get(1,0),h=this.get(1,1),v=t.get(1,1),k=(r+h)*(i+v),T=(u+h)*i,I=r*(s-v),j=h*(l-i),F=(r+a)*v,B=k+j-F+(a-h)*(l+v),U=I+F,q=T+j,$=k-T+I+(u-r)*(i+s);return e.set(0,0,B),e.set(0,1,U),e.set(1,0,q),e.set(1,1,$),e}},{key:"strassen3x3",value:function(t){t=Fr.checkMatrix(t);var e=new Fr(3,3),r=this.get(0,0),i=this.get(0,1),a=this.get(0,2),s=this.get(1,0),u=this.get(1,1),l=this.get(1,2),h=this.get(2,0),v=this.get(2,1),k=this.get(2,2),T=t.get(0,0),I=t.get(0,1),j=t.get(0,2),F=t.get(1,0),B=t.get(1,1),U=t.get(1,2),q=t.get(2,0),$=t.get(2,1),ve=t.get(2,2),de=(r-s)*(-I+B),me=(-r+s+u)*(T-I+B),Te=(s+u)*(-T+I),Oe=r*T,Pe=(-r+h+v)*(T-j+U),Ze=(-r+h)*(j-U),nt=(h+v)*(-T+j),ct=(-a+v+k)*(B+q-$),st=(a-k)*(B-$),It=a*q,gt=(v+k)*(-q+$),Pt=(-a+u+l)*(U+q-ve),Rt=(a-l)*(U-ve),Zt=(u+l)*(-q+ve),kt=Oe+It+i*F,Vt=(r+i+a-s-u-v-k)*B+me+Te+Oe+ct+It+gt,Dt=Oe+Pe+nt+(r+i+a-u-l-h-v)*U+It+Pt+Zt,qt=de+u*(-T+I+F-B-U-q+ve)+me+Oe+It+Pt+Rt,$t=de+me+Te+Oe+l*$,Gt=It+Pt+Rt+Zt+s*j,lr=Oe+Pe+Ze+v*(-T+j+F-B-U-q+$)+ct+st+It,Lr=ct+st+It+gt+h*I,wn=Oe+Pe+Ze+nt+k*ve;return e.set(0,0,kt),e.set(0,1,Vt),e.set(0,2,Dt),e.set(1,0,qt),e.set(1,1,$t),e.set(1,2,Gt),e.set(2,0,lr),e.set(2,1,Lr),e.set(2,2,wn),e}},{key:"mmulStrassen",value:function(t){t=Fr.checkMatrix(t);var e=this.clone(),r=e.rows,i=e.columns,a=t.rows,s=t.columns;function u(v,k,T){var I=v.rows,j=v.columns;if(I===k&&j===T)return v;var F=n.zeros(k,T);return F=F.setSubMatrix(v,0,0)}i!==a&&console.warn("Multiplying ".concat(r," x ").concat(i," and ").concat(a," x ").concat(s," matrix: dimensions do not match."));var l=Math.max(r,a),h=Math.max(i,s);return function v(k,T,I,j){if(I<=512||j<=512)return k.mmul(T);I%2==1&&j%2==1?(k=u(k,I+1,j+1),T=u(T,I+1,j+1)):I%2==1?(k=u(k,I+1,j),T=u(T,I+1,j)):j%2==1&&(k=u(k,I,j+1),T=u(T,I,j+1));var F=parseInt(k.rows/2,10),B=parseInt(k.columns/2,10),U=k.subMatrix(0,F-1,0,B-1),q=T.subMatrix(0,F-1,0,B-1),$=k.subMatrix(0,F-1,B,k.columns-1),ve=T.subMatrix(0,F-1,B,T.columns-1),de=k.subMatrix(F,k.rows-1,0,B-1),me=T.subMatrix(F,T.rows-1,0,B-1),Te=k.subMatrix(F,k.rows-1,B,k.columns-1),Oe=T.subMatrix(F,T.rows-1,B,T.columns-1),Pe=v(n.add(U,Te),n.add(q,Oe),F,B),Ze=v(n.add(de,Te),q,F,B),nt=v(U,n.sub(ve,Oe),F,B),ct=v(Te,n.sub(me,q),F,B),st=v(n.add(U,$),Oe,F,B),It=v(n.sub(de,U),n.add(q,ve),F,B),gt=v(n.sub($,Te),n.add(me,Oe),F,B),Pt=n.add(Pe,ct);Pt.sub(st),Pt.add(gt);var Rt=n.add(nt,st),Zt=n.add(Ze,ct),kt=n.sub(Pe,Ze);kt.add(nt),kt.add(It);var Vt=n.zeros(2*Pt.rows,2*Pt.columns);return(Vt=(Vt=(Vt=(Vt=Vt.setSubMatrix(Pt,0,0)).setSubMatrix(Rt,Pt.rows,0)).setSubMatrix(Zt,0,Pt.columns)).setSubMatrix(kt,Pt.rows,Pt.columns)).subMatrix(0,I-1,0,j-1)}(e=u(e,l,h),t=u(t,l,h),l,h)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(eo(t)!=="object")throw new TypeError("options must be an object");var e=t.min,r=e===void 0?0:e,i=t.max,a=i===void 0?1:i;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(r>=a)throw new RangeError("min must be smaller than max");for(var s=new Fr(this.rows,this.columns),u=0;u<this.rows;u++){var l=this.getRow(u);l.length>0&&al(l,{min:r,max:a,output:l}),s.setRow(u,l)}return s}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(eo(t)!=="object")throw new TypeError("options must be an object");var e=t.min,r=e===void 0?0:e,i=t.max,a=i===void 0?1:i;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(r>=a)throw new RangeError("min must be smaller than max");for(var s=new Fr(this.rows,this.columns),u=0;u<this.columns;u++){var l=this.getColumn(u);l.length&&al(l,{min:r,max:a,output:l}),s.setColumn(u,l)}return s}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var r=0;r<t;r++){var i=this.get(e,r),a=this.get(e,this.columns-1-r);this.set(e,r,a),this.set(e,this.columns-1-r,i)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var r=0;r<t;r++){var i=this.get(r,e),a=this.get(this.rows-1-r,e);this.set(r,e,a),this.set(this.rows-1-r,e,i)}return this}},{key:"kroneckerProduct",value:function(t){t=Fr.checkMatrix(t);for(var e=this.rows,r=this.columns,i=t.rows,a=t.columns,s=new Fr(e*i,r*a),u=0;u<e;u++)for(var l=0;l<r;l++)for(var h=0;h<i;h++)for(var v=0;v<a;v++)s.set(i*u+h,a*l+v,this.get(u,l)*t.get(h,v));return s}},{key:"kroneckerSum",value:function(t){if(t=Fr.checkMatrix(t),!this.isSquare()||!t.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var e=this.rows,r=t.rows,i=this.kroneckerProduct(Fr.eye(r,r)),a=Fr.eye(e,e).kroneckerProduct(t);return i.add(a)}},{key:"transpose",value:function(){for(var t=new Fr(this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gl,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gl,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,r,i){cl(this,t,e,r,i);for(var a=new Fr(e-t+1,i-r+1),s=t;s<=e;s++)for(var u=r;u<=i;u++)a.set(s-t,u-r,this.get(s,u));return a}},{key:"subMatrixRow",value:function(t,e,r){if(e===void 0&&(e=0),r===void 0&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var i=new Fr(t.length,r-e+1),a=0;a<t.length;a++)for(var s=e;s<=r;s++){if(t[a]<0||t[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[a]));i.set(a,s-e,this.get(t[a],s))}return i}},{key:"subMatrixColumn",value:function(t,e,r){if(e===void 0&&(e=0),r===void 0&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var i=new Fr(r-e+1,t.length),a=0;a<t.length;a++)for(var s=e;s<=r;s++){if(t[a]<0||t[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[a]));i.set(s-e,a,this.get(s,t[a]))}return i}},{key:"setSubMatrix",value:function(t,e,r){if((t=Fr.checkMatrix(t)).isEmpty())return this;cl(this,e,e+t.rows-1,r,r+t.columns-1);for(var i=0;i<t.rows;i++)for(var a=0;a<t.columns;a++)this.set(e+i,r+a,t.get(i,a));return this}},{key:"selection",value:function(t,e){for(var r=function(h,v,k){return{row:ev(h,v),column:tv(h,k)}}(this,t,e),i=new Fr(t.length,e.length),a=0;a<r.row.length;a++)for(var s=r.row[a],u=0;u<r.column.length;u++){var l=r.column[u];i.set(a,u,this.get(s,l))}return i}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}},{key:"clone",value:function(){for(var t=new Fr(this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(e){for(var r=ks(e.rows),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[i]+=e.get(i,a);return r}(this);case"column":return function(e){for(var r=ks(e.columns),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[a]+=e.get(i,a);return r}(this);case void 0:return function(e){for(var r=0,i=0;i<e.rows;i++)for(var a=0;a<e.columns;a++)r+=e.get(i,a);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(e){for(var r=ks(e.rows,1),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[i]*=e.get(i,a);return r}(this);case"column":return function(e){for(var r=ks(e.columns,1),i=0;i<e.rows;++i)for(var a=0;a<e.columns;++a)r[a]*=e.get(i,a);return r}(this);case void 0:return function(e){for(var r=1,i=0;i<e.rows;i++)for(var a=0;a<e.columns;a++)r*=e.get(i,a);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var r=0;r<this.rows;r++)e[r]/=this.columns;return e;case"column":for(var i=0;i<this.columns;i++)e[i]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(eo(t)==="object"&&(e=t,t=void 0),eo(e)!=="object")throw new TypeError("options must be an object");var r=e,i=r.unbiased,a=i===void 0||i,s=r.mean,u=s===void 0?this.mean(t):s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(u))throw new TypeError("mean must be an array");return rv(this,a,u);case"column":if(!Array.isArray(u))throw new TypeError("mean must be an array");return nv(this,a,u);case void 0:if(typeof u!="number")throw new TypeError("mean must be a number");return iv(this,a,u);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){eo(t)==="object"&&(e=t,t=void 0);var r=this.variance(t,e);if(t===void 0)return Math.sqrt(r);for(var i=0;i<r.length;i++)r[i]=Math.sqrt(r[i]);return r}},{key:"center",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(eo(t)==="object"&&(e=t,t=void 0),eo(e)!=="object")throw new TypeError("options must be an object");var r=e,i=r.center,a=i===void 0?this.mean(t):i;switch(t){case"row":if(!Array.isArray(a))throw new TypeError("center must be an array");return ov(this,a),this;case"column":if(!Array.isArray(a))throw new TypeError("center must be an array");return av(this,a),this;case void 0:if(typeof a!="number")throw new TypeError("center must be a number");return sv(this,a),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(eo(t)==="object"&&(e=t,t=void 0),eo(e)!=="object")throw new TypeError("options must be an object");var r=e.scale;switch(t){case"row":if(r===void 0)r=uv(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return cv(this,r),this;case"column":if(r===void 0)r=lv(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return fv(this,r),this;case void 0:if(r===void 0)r=hv(this);else if(typeof r!="number")throw new TypeError("scale must be a number");return dv(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return ul(this,t)}}],[{key:"from1DArray",value:function(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");for(var i=new Fr(t,e),a=0;a<t;a++)for(var s=0;s<e;s++)i.set(a,s,r[a*e+s]);return i}},{key:"rowVector",value:function(t){for(var e=new Fr(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}},{key:"columnVector",value:function(t){for(var e=new Fr(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}},{key:"zeros",value:function(t,e){return new Fr(t,e)}},{key:"ones",value:function(t,e){return new Fr(t,e).fill(1)}},{key:"rand",value:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(eo(r)!=="object")throw new TypeError("options must be an object");for(var i=r.random,a=i===void 0?Math.random:i,s=new Fr(t,e),u=0;u<t;u++)for(var l=0;l<e;l++)s.set(u,l,a());return s}},{key:"randInt",value:function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(eo(r)!=="object")throw new TypeError("options must be an object");var i=r.min,a=i===void 0?0:i,s=r.max,u=s===void 0?1e3:s,l=r.random,h=l===void 0?Math.random:l;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(a>=u)throw new RangeError("min must be smaller than max");for(var v=u-a,k=new Fr(t,e),T=0;T<t;T++)for(var I=0;I<e;I++){var j=a+Math.round(h()*v);k.set(T,I,j)}return k}},{key:"eye",value:function(t,e,r){e===void 0&&(e=t),r===void 0&&(r=1);for(var i=Math.min(t,e),a=this.zeros(t,e),s=0;s<i;s++)a.set(s,s,r);return a}},{key:"diag",value:function(t,e,r){var i=t.length;e===void 0&&(e=i),r===void 0&&(r=e);for(var a=Math.min(i,e,r),s=this.zeros(e,r),u=0;u<a;u++)s.set(u,u,t[u]);return s}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,i=t.columns,a=new Fr(r,i),s=0;s<r;s++)for(var u=0;u<i;u++)a.set(s,u,Math.min(t.get(s,u),e.get(s,u)));return a}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,i=t.columns,a=new this(r,i),s=0;s<r;s++)for(var u=0;u<i;u++)a.set(s,u,Math.max(t.get(s,u),e.get(s,u)));return a}},{key:"checkMatrix",value:function(t){return n.isMatrix(t)?t:new Fr(t)}},{key:"isMatrix",value:function(t){return t!=null&&t.klass==="Matrix"}}]),n}();function gl(n,t){return n-t}vi.prototype.klass="Matrix",typeof Symbol!="undefined"&&(vi.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return ul(this)}),vi.random=vi.rand,vi.randomInt=vi.randInt,vi.diagonal=vi.diag,vi.prototype.diagonal=vi.prototype.diag,vi.identity=vi.eye,vi.prototype.negate=vi.prototype.neg,vi.prototype.tensorProduct=vi.prototype.kroneckerProduct;var Bt,Pr,Fr=function(n){(function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),i&&ll(r,i)})(e,n);var t=pv(e);function e(r,i){var a;if(hl(this,e),a=t.call(this),e.isMatrix(r))return fl(a,r.clone());if(Number.isInteger(r)&&r>=0){if(a.data=[],!(Number.isInteger(i)&&i>=0))throw new TypeError("nColumns must be a positive integer");for(var s=0;s<r;s++)a.data.push(new Float64Array(i))}else{if(!Array.isArray(r))throw new TypeError("First argument must be a positive number or an array");var u=r;if(typeof(i=(r=u.length)?u[0].length:0)!="number")throw new TypeError("Data must be a 2D array with at least one element");a.data=[];for(var l=0;l<r;l++){if(u[l].length!==i)throw new RangeError("Inconsistent array dimensions");a.data.push(Float64Array.from(u[l]))}}return a.rows=r,a.columns=i,a}return pl(e,[{key:"set",value:function(r,i,a){return this.data[r][i]=a,this}},{key:"get",value:function(r,i){return this.data[r][i]}},{key:"removeRow",value:function(r){return yo(this,r),this.data.splice(r,1),this.rows-=1,this}},{key:"addRow",value:function(r,i){return i===void 0&&(i=r,r=this.rows),yo(this,r,!0),i=Float64Array.from(ya(this,i)),this.data.splice(r,0,i),this.rows+=1,this}},{key:"removeColumn",value:function(r){mo(this,r);for(var i=0;i<this.rows;i++){for(var a=new Float64Array(this.columns-1),s=0;s<r;s++)a[s]=this.data[i][s];for(var u=r+1;u<this.columns;u++)a[u-1]=this.data[i][u];this.data[i]=a}return this.columns-=1,this}},{key:"addColumn",value:function(r,i){i===void 0&&(i=r,r=this.columns),mo(this,r,!0),i=ma(this,i);for(var a=0;a<this.rows;a++){for(var s=new Float64Array(this.columns+1),u=0;u<r;u++)s[u]=this.data[a][u];for(s[u++]=i[a];u<this.columns+1;u++)s[u]=this.data[a][u-1];this.data[a]=s}return this.columns+=1,this}}]),e}(vi);function vl(n){return(vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function yl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ml(n,t){return(ml=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function gv(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Iu(n);if(t){var i=Iu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return vv(this,e)}}function vv(n,t){return!t||vl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Iu(n){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}Pr=Fr,(Bt=vi).prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},Bt.prototype.addS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)+n);return this},Bt.prototype.addM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)+n.get(t,e));return this},Bt.add=function(n,t){return new Pr(n).add(t)},Bt.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},Bt.prototype.subS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)-n);return this},Bt.prototype.subM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)-n.get(t,e));return this},Bt.sub=function(n,t){return new Pr(n).sub(t)},Bt.prototype.subtract=Bt.prototype.sub,Bt.prototype.subtractS=Bt.prototype.subS,Bt.prototype.subtractM=Bt.prototype.subM,Bt.subtract=Bt.sub,Bt.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},Bt.prototype.mulS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*n);return this},Bt.prototype.mulM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)*n.get(t,e));return this},Bt.mul=function(n,t){return new Pr(n).mul(t)},Bt.prototype.multiply=Bt.prototype.mul,Bt.prototype.multiplyS=Bt.prototype.mulS,Bt.prototype.multiplyM=Bt.prototype.mulM,Bt.multiply=Bt.mul,Bt.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},Bt.prototype.divS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)/n);return this},Bt.prototype.divM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)/n.get(t,e));return this},Bt.div=function(n,t){return new Pr(n).div(t)},Bt.prototype.divide=Bt.prototype.div,Bt.prototype.divideS=Bt.prototype.divS,Bt.prototype.divideM=Bt.prototype.divM,Bt.divide=Bt.div,Bt.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},Bt.prototype.modS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)%n);return this},Bt.prototype.modM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)%n.get(t,e));return this},Bt.mod=function(n,t){return new Pr(n).mod(t)},Bt.prototype.modulus=Bt.prototype.mod,Bt.prototype.modulusS=Bt.prototype.modS,Bt.prototype.modulusM=Bt.prototype.modM,Bt.modulus=Bt.mod,Bt.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},Bt.prototype.andS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)&n);return this},Bt.prototype.andM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)&n.get(t,e));return this},Bt.and=function(n,t){return new Pr(n).and(t)},Bt.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},Bt.prototype.orS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)|n);return this},Bt.prototype.orM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)|n.get(t,e));return this},Bt.or=function(n,t){return new Pr(n).or(t)},Bt.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},Bt.prototype.xorS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)^n);return this},Bt.prototype.xorM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)^n.get(t,e));return this},Bt.xor=function(n,t){return new Pr(n).xor(t)},Bt.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},Bt.prototype.leftShiftS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)<<n);return this},Bt.prototype.leftShiftM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)<<n.get(t,e));return this},Bt.leftShift=function(n,t){return new Pr(n).leftShift(t)},Bt.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},Bt.prototype.signPropagatingRightShiftS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>n);return this},Bt.prototype.signPropagatingRightShiftM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>n.get(t,e));return this},Bt.signPropagatingRightShift=function(n,t){return new Pr(n).signPropagatingRightShift(t)},Bt.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},Bt.prototype.rightShiftS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>>n);return this},Bt.prototype.rightShiftM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,this.get(t,e)>>>n.get(t,e));return this},Bt.rightShift=function(n,t){return new Pr(n).rightShift(t)},Bt.prototype.zeroFillRightShift=Bt.prototype.rightShift,Bt.prototype.zeroFillRightShiftS=Bt.prototype.rightShiftS,Bt.prototype.zeroFillRightShiftM=Bt.prototype.rightShiftM,Bt.zeroFillRightShift=Bt.rightShift,Bt.prototype.not=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,~this.get(n,t));return this},Bt.not=function(n){return new Pr(n).not()},Bt.prototype.abs=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.abs(this.get(n,t)));return this},Bt.abs=function(n){return new Pr(n).abs()},Bt.prototype.acos=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.acos(this.get(n,t)));return this},Bt.acos=function(n){return new Pr(n).acos()},Bt.prototype.acosh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.acosh(this.get(n,t)));return this},Bt.acosh=function(n){return new Pr(n).acosh()},Bt.prototype.asin=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.asin(this.get(n,t)));return this},Bt.asin=function(n){return new Pr(n).asin()},Bt.prototype.asinh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.asinh(this.get(n,t)));return this},Bt.asinh=function(n){return new Pr(n).asinh()},Bt.prototype.atan=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.atan(this.get(n,t)));return this},Bt.atan=function(n){return new Pr(n).atan()},Bt.prototype.atanh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.atanh(this.get(n,t)));return this},Bt.atanh=function(n){return new Pr(n).atanh()},Bt.prototype.cbrt=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.cbrt(this.get(n,t)));return this},Bt.cbrt=function(n){return new Pr(n).cbrt()},Bt.prototype.ceil=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.ceil(this.get(n,t)));return this},Bt.ceil=function(n){return new Pr(n).ceil()},Bt.prototype.clz32=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.clz32(this.get(n,t)));return this},Bt.clz32=function(n){return new Pr(n).clz32()},Bt.prototype.cos=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.cos(this.get(n,t)));return this},Bt.cos=function(n){return new Pr(n).cos()},Bt.prototype.cosh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.cosh(this.get(n,t)));return this},Bt.cosh=function(n){return new Pr(n).cosh()},Bt.prototype.exp=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.exp(this.get(n,t)));return this},Bt.exp=function(n){return new Pr(n).exp()},Bt.prototype.expm1=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.expm1(this.get(n,t)));return this},Bt.expm1=function(n){return new Pr(n).expm1()},Bt.prototype.floor=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.floor(this.get(n,t)));return this},Bt.floor=function(n){return new Pr(n).floor()},Bt.prototype.fround=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.fround(this.get(n,t)));return this},Bt.fround=function(n){return new Pr(n).fround()},Bt.prototype.log=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log(this.get(n,t)));return this},Bt.log=function(n){return new Pr(n).log()},Bt.prototype.log1p=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log1p(this.get(n,t)));return this},Bt.log1p=function(n){return new Pr(n).log1p()},Bt.prototype.log10=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log10(this.get(n,t)));return this},Bt.log10=function(n){return new Pr(n).log10()},Bt.prototype.log2=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.log2(this.get(n,t)));return this},Bt.log2=function(n){return new Pr(n).log2()},Bt.prototype.round=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.round(this.get(n,t)));return this},Bt.round=function(n){return new Pr(n).round()},Bt.prototype.sign=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sign(this.get(n,t)));return this},Bt.sign=function(n){return new Pr(n).sign()},Bt.prototype.sin=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sin(this.get(n,t)));return this},Bt.sin=function(n){return new Pr(n).sin()},Bt.prototype.sinh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sinh(this.get(n,t)));return this},Bt.sinh=function(n){return new Pr(n).sinh()},Bt.prototype.sqrt=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.sqrt(this.get(n,t)));return this},Bt.sqrt=function(n){return new Pr(n).sqrt()},Bt.prototype.tan=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.tan(this.get(n,t)));return this},Bt.tan=function(n){return new Pr(n).tan()},Bt.prototype.tanh=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.tanh(this.get(n,t)));return this},Bt.tanh=function(n){return new Pr(n).tanh()},Bt.prototype.trunc=function(){for(var n=0;n<this.rows;n++)for(var t=0;t<this.columns;t++)this.set(n,t,Math.trunc(this.get(n,t)));return this},Bt.trunc=function(n){return new Pr(n).trunc()},Bt.pow=function(n,t){return new Pr(n).pow(t)},Bt.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},Bt.prototype.powS=function(n){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.pow(this.get(t,e),n));return this},Bt.prototype.powM=function(n){if(n=Pr.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.pow(this.get(t,e),n.get(t,e)));return this};var yv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&ml(s,u)})(a,n);var t,e,r,i=gv(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).data=s,u.rows=s.length,u.columns=s[0].length,u}return t=a,(e=[{key:"set",value:function(s,u,l){return this.data[s][u]=l,this}},{key:"get",value:function(s,u){return this.data[s][u]}}])&&yl(t.prototype,e),r&&yl(t,r),a}(vi);function xa(n,t){var e=0;return Math.abs(n)>Math.abs(t)?(e=t/n,Math.abs(n)*Math.sqrt(1+e*e)):t!==0?(e=n/t,Math.abs(t)*Math.sqrt(1+e*e)):0}function mv(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function bl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var xl=function(){function n(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(mv(this,n),(i=yv.checkMatrix(i)).isEmpty())throw new Error("Matrix must be non-empty");var s,u=i.rows,l=i.columns,h=a.computeLeftSingularVectors,v=h===void 0||h,k=a.computeRightSingularVectors,T=k===void 0||k,I=a.autoTranspose,j=I!==void 0&&I,F=Boolean(v),B=Boolean(T),U=!1;if(u<l)if(j){u=(s=i.transpose()).rows,l=s.columns,U=!0;var q=F;F=B,B=q}else s=i.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=i.clone();for(var $=Math.min(u,l),ve=Math.min(u+1,l),de=new Float64Array(ve),me=new Fr(u,$),Te=new Fr(l,l),Oe=new Float64Array(l),Pe=new Float64Array(u),Ze=new Float64Array(ve),nt=0;nt<ve;nt++)Ze[nt]=nt;for(var ct=Math.min(u-1,l),st=Math.max(0,Math.min(l-2,u)),It=Math.max(ct,st),gt=0;gt<It;gt++){if(gt<ct){de[gt]=0;for(var Pt=gt;Pt<u;Pt++)de[gt]=xa(de[gt],s.get(Pt,gt));if(de[gt]!==0){s.get(gt,gt)<0&&(de[gt]=-de[gt]);for(var Rt=gt;Rt<u;Rt++)s.set(Rt,gt,s.get(Rt,gt)/de[gt]);s.set(gt,gt,s.get(gt,gt)+1)}de[gt]=-de[gt]}for(var Zt=gt+1;Zt<l;Zt++){if(gt<ct&&de[gt]!==0){for(var kt=0,Vt=gt;Vt<u;Vt++)kt+=s.get(Vt,gt)*s.get(Vt,Zt);kt=-kt/s.get(gt,gt);for(var Dt=gt;Dt<u;Dt++)s.set(Dt,Zt,s.get(Dt,Zt)+kt*s.get(Dt,gt))}Oe[Zt]=s.get(gt,Zt)}if(F&&gt<ct)for(var qt=gt;qt<u;qt++)me.set(qt,gt,s.get(qt,gt));if(gt<st){Oe[gt]=0;for(var $t=gt+1;$t<l;$t++)Oe[gt]=xa(Oe[gt],Oe[$t]);if(Oe[gt]!==0){Oe[gt+1]<0&&(Oe[gt]=0-Oe[gt]);for(var Gt=gt+1;Gt<l;Gt++)Oe[Gt]/=Oe[gt];Oe[gt+1]+=1}if(Oe[gt]=-Oe[gt],gt+1<u&&Oe[gt]!==0){for(var lr=gt+1;lr<u;lr++)Pe[lr]=0;for(var Lr=gt+1;Lr<u;Lr++)for(var wn=gt+1;wn<l;wn++)Pe[Lr]+=Oe[wn]*s.get(Lr,wn);for(var Sr=gt+1;Sr<l;Sr++)for(var jr=-Oe[Sr]/Oe[gt+1],_r=gt+1;_r<u;_r++)s.set(_r,Sr,s.get(_r,Sr)+jr*Pe[_r])}if(B)for(var un=gt+1;un<l;un++)Te.set(un,gt,Oe[un])}}var hr=Math.min(l,u+1);if(ct<l&&(de[ct]=s.get(ct,ct)),u<hr&&(de[hr-1]=0),st+1<hr&&(Oe[st]=s.get(st,hr-1)),Oe[hr-1]=0,F){for(var qr=ct;qr<$;qr++){for(var en=0;en<u;en++)me.set(en,qr,0);me.set(qr,qr,1)}for(var Yr=ct-1;Yr>=0;Yr--)if(de[Yr]!==0){for(var Cr=Yr+1;Cr<$;Cr++){for(var Tr=0,Zr=Yr;Zr<u;Zr++)Tr+=me.get(Zr,Yr)*me.get(Zr,Cr);Tr=-Tr/me.get(Yr,Yr);for(var Tn=Yr;Tn<u;Tn++)me.set(Tn,Cr,me.get(Tn,Cr)+Tr*me.get(Tn,Yr))}for(var tn=Yr;tn<u;tn++)me.set(tn,Yr,-me.get(tn,Yr));me.set(Yr,Yr,1+me.get(Yr,Yr));for(var bi=0;bi<Yr-1;bi++)me.set(bi,Yr,0)}else{for(var cn=0;cn<u;cn++)me.set(cn,Yr,0);me.set(Yr,Yr,1)}}if(B)for(var Vr=l-1;Vr>=0;Vr--){if(Vr<st&&Oe[Vr]!==0)for(var An=Vr+1;An<l;An++){for(var Zn=0,En=Vr+1;En<l;En++)Zn+=Te.get(En,Vr)*Te.get(En,An);Zn=-Zn/Te.get(Vr+1,Vr);for(var Si=Vr+1;Si<l;Si++)Te.set(Si,An,Te.get(Si,An)+Zn*Te.get(Si,Vr))}for(var Wo=0;Wo<l;Wo++)Te.set(Wo,Vr,0);Te.set(Vr,Vr,1)}for(var xo=hr-1,ro=Number.EPSILON;hr>0;){var wr=void 0,vn=void 0;for(wr=hr-2;wr>=-1&&wr!==-1;wr--){var $n=Number.MIN_VALUE+ro*Math.abs(de[wr]+Math.abs(de[wr+1]));if(Math.abs(Oe[wr])<=$n||Number.isNaN(Oe[wr])){Oe[wr]=0;break}}if(wr===hr-2)vn=4;else{var _n=void 0;for(_n=hr-1;_n>=wr&&_n!==wr;_n--){var Pi=(_n!==hr?Math.abs(Oe[_n]):0)+(_n!==wr+1?Math.abs(Oe[_n-1]):0);if(Math.abs(de[_n])<=ro*Pi){de[_n]=0;break}}_n===wr?vn=3:_n===hr-1?vn=1:(vn=2,wr=_n)}switch(wr++,vn){case 1:var po=Oe[hr-2];Oe[hr-2]=0;for(var xi=hr-2;xi>=wr;xi--){var wo=xa(de[xi],po),Ca=de[xi]/wo,Ta=po/wo;if(de[xi]=wo,xi!==wr&&(po=-Ta*Oe[xi-1],Oe[xi-1]=Ca*Oe[xi-1]),B)for(var _o=0;_o<l;_o++)wo=Ca*Te.get(_o,xi)+Ta*Te.get(_o,hr-1),Te.set(_o,hr-1,-Ta*Te.get(_o,xi)+Ca*Te.get(_o,hr-1)),Te.set(_o,xi,wo)}break;case 2:var hc=Oe[wr-1];Oe[wr-1]=0;for(var So=wr;So<hr;So++){var ps=xa(de[So],hc),dc=de[So]/ps,pc=hc/ps;if(de[So]=ps,hc=-pc*Oe[So],Oe[So]=dc*Oe[So],F)for(var na=0;na<u;na++)ps=dc*me.get(na,So)+pc*me.get(na,wr-1),me.set(na,wr-1,-pc*me.get(na,So)+dc*me.get(na,wr-1)),me.set(na,So,ps)}break;case 3:var gs=Math.max(Math.abs(de[hr-1]),Math.abs(de[hr-2]),Math.abs(Oe[hr-2]),Math.abs(de[wr]),Math.abs(Oe[wr])),Ia=de[hr-1]/gs,Yp=de[hr-2]/gs,iu=Oe[hr-2]/gs,gc=de[wr]/gs,Kb=Oe[wr]/gs,da=((Yp+Ia)*(Yp-Ia)+iu*iu)/2,ou=Ia*iu*(Ia*iu),vc=0;da===0&&ou===0||(vc=ou/(da+(vc=da<0?0-Math.sqrt(da*da+ou):Math.sqrt(da*da+ou))));for(var pa=(gc+Ia)*(gc-Ia)+vc,ja=gc*Kb,bn=wr;bn<hr-1;bn++){var no=xa(pa,ja);no===0&&(no=Number.MIN_VALUE);var Eo=pa/no,Oo=ja/no;if(bn!==wr&&(Oe[bn-1]=no),pa=Eo*de[bn]+Oo*Oe[bn],Oe[bn]=Eo*Oe[bn]-Oo*de[bn],ja=Oo*de[bn+1],de[bn+1]=Eo*de[bn+1],B)for(var ia=0;ia<l;ia++)no=Eo*Te.get(ia,bn)+Oo*Te.get(ia,bn+1),Te.set(ia,bn+1,-Oo*Te.get(ia,bn)+Eo*Te.get(ia,bn+1)),Te.set(ia,bn,no);if((no=xa(pa,ja))===0&&(no=Number.MIN_VALUE),Eo=pa/no,Oo=ja/no,de[bn]=no,pa=Eo*Oe[bn]+Oo*de[bn+1],de[bn+1]=-Oo*Oe[bn]+Eo*de[bn+1],ja=Oo*Oe[bn+1],Oe[bn+1]=Eo*Oe[bn+1],F&&bn<u-1)for(var oa=0;oa<u;oa++)no=Eo*me.get(oa,bn)+Oo*me.get(oa,bn+1),me.set(oa,bn+1,-Oo*me.get(oa,bn)+Eo*me.get(oa,bn+1)),me.set(oa,bn,no)}Oe[hr-2]=pa;break;case 4:if(de[wr]<=0&&(de[wr]=de[wr]<0?-de[wr]:0,B))for(var au=0;au<=xo;au++)Te.set(au,wr,-Te.get(au,wr));for(;wr<xo&&!(de[wr]>=de[wr+1]);){var vs=de[wr];if(de[wr]=de[wr+1],de[wr+1]=vs,B&&wr<l-1)for(var Pa=0;Pa<l;Pa++)vs=Te.get(Pa,wr+1),Te.set(Pa,wr+1,Te.get(Pa,wr)),Te.set(Pa,wr,vs);if(F&&wr<u-1)for(var Na=0;Na<u;Na++)vs=me.get(Na,wr+1),me.set(Na,wr+1,me.get(Na,wr)),me.set(Na,wr,vs);wr++}hr--}}if(U){var Zb=Te;Te=me,me=Zb}this.m=u,this.n=l,this.s=de,this.U=me,this.V=Te}var t,e,r;return t=n,(e=[{key:"solve",value:function(i){for(var a=i,s=this.threshold,u=this.s.length,l=Fr.zeros(u,u),h=0;h<u;h++)Math.abs(this.s[h])<=s?l.set(h,h,0):l.set(h,h,1/this.s[h]);for(var v=this.U,k=this.rightSingularVectors,T=k.mmul(l),I=k.rows,j=v.rows,F=Fr.zeros(I,j),B=0;B<I;B++)for(var U=0;U<j;U++){for(var q=0,$=0;$<u;$++)q+=T.get(B,$)*v.get(U,$);F.set(B,U,q)}return F.mmul(a)}},{key:"solveForDiagonal",value:function(i){return this.solve(Fr.diag(i))}},{key:"inverse",value:function(){for(var i=this.V,a=this.threshold,s=i.rows,u=i.columns,l=new Fr(s,this.s.length),h=0;h<s;h++)for(var v=0;v<u;v++)Math.abs(this.s[v])>a&&l.set(h,v,i.get(h,v)/this.s[v]);for(var k=this.U,T=k.rows,I=k.columns,j=new Fr(s,T),F=0;F<s;F++)for(var B=0;B<T;B++){for(var U=0,q=0;q<I;q++)U+=l.get(F,q)*k.get(B,q);j.set(F,B,U)}return j}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var i=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,a=0,s=this.s,u=0,l=s.length;u<l;u++)s[u]>i&&a++;return a}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Fr.diag(this.s)}}])&&bl(t.prototype,e),r&&bl(t,r),n}();function wl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var bv=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.distances=i.distances,this.dimension=i.dimension||2,this.linkDistance=i.linkDistance}var t,e,r;return t=n,(e=[{key:"layout",value:function(){var i=this.dimension,a=this.distances,s=this.linkDistance;try{var u=Fr.mul(Fr.pow(a,2),-.5),l=u.mean("row"),h=u.mean("column"),v=u.mean();u.add(v).subRowVector(l).subColumnVector(h);var k=new xl(u),T=Fr.sqrt(k.diagonalMatrix).diagonal();return k.leftSingularVectors.toJSON().map(function(U){return Fr.mul([U],[T]).toJSON()[0].splice(0,i)})}catch(U){for(var I=[],j=0;j<a.length;j++){var F=Math.random()*s,B=Math.random()*s;I.push([F,B])}return I}}}])&&wl(t.prototype,e),r&&wl(t,r),n}();function _l(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var xv=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.disp=[],this.positions=i.positions,this.adjMatrix=i.adjMatrix,this.focusID=i.focusID,this.radii=i.radii,this.iterations=i.iterations||10,this.height=i.height||10,this.width=i.width||10,this.speed=i.speed||100,this.gravity=i.gravity||10,this.nodeSizeFunc=i.nodeSizeFunc,this.k=i.k||5,this.strictRadial=i.strictRadial,this.nodes=i.nodes}var t,e,r;return t=n,(e=[{key:"layout",value:function(){var i=this.positions,a=[],s=this.iterations,u=this.width/10;this.maxDisplace=u,this.disp=a;for(var l=0;l<s;l++)i.forEach(function(h,v){a[v]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return i}},{key:"getRepulsion",value:function(){var i=this,a=i.positions,s=i.nodes,u=i.disp,l=i.k,h=i.radii||[];a.forEach(function(v,k){u[k]={x:0,y:0},a.forEach(function(T,I){if(k!==I&&h[k]===h[I]){var j=v[0]-T[0],F=v[1]-T[1],B=Math.sqrt(j*j+F*F);if(B===0){B=1;var U=k>I?1:-1;j=.01*U,F=.01*U}if(B<i.nodeSizeFunc(s[k])/2+i.nodeSizeFunc(s[I])/2){var q=l*l/B;u[k].x+=j/B*q,u[k].y+=F/B*q}}})})}},{key:"updatePositions",value:function(){var i=this.positions,a=this.disp,s=this.speed,u=this.strictRadial,l=this.focusID,h=this.maxDisplace||this.width/10;u&&a.forEach(function(k,T){var I=i[T][0]-i[l][0],j=i[T][1]-i[l][1],F=Math.sqrt(I*I+j*j),B=j/F,U=-I/F,q=Math.sqrt(k.x*k.x+k.y*k.y),$=Math.acos((B*k.x+U*k.y)/q);$>Math.PI/2&&($-=Math.PI/2,B*=-1,U*=-1);var ve=Math.cos($)*q;k.x=B*ve,k.y=U*ve});var v=this.radii;i.forEach(function(k,T){if(T!==l){var I=Math.sqrt(a[T].x*a[T].x+a[T].y*a[T].y);if(I>0&&T!==l){var j=Math.min(h*(s/800),I);if(k[0]+=a[T].x/I*j,k[1]+=a[T].y/I*j,u){var F=k[0]-i[l][0],B=k[1]-i[l][1],U=Math.sqrt(F*F+B*B);F=F/U*v[T],B=B/U*v[T],k[0]=i[l][0]+F,k[1]=i[l][1]+B}}}})}}])&&_l(t.prototype,e),r&&_l(t,r),n}();function Sl(n){return(Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function wv(n){return function(t){if(Array.isArray(t))return ju(t)}(n)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(n)||function(t,e){if(!!t){if(typeof t=="string")return ju(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ju(t,e)}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ju(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function El(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Ol(n,t){return(Ol=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function _v(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Pu(n);if(t){var i=Pu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Sv(this,e)}}function Sv(n,t){return!t||Sl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Pu(n){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}function Ml(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}var Ev=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Ol(s,u)})(a,n);var t,e,r,i=_v(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.focusNode=null,u.unitRadius=null,u.linkDistance=50,u.preventOverlap=!1,u.strictRadial=!0,u.maxPreventOverlapIteration=200,u.sortStrength=10,u.nodes=[],u.edges=[],u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.edges||[];if(u&&u.length!==0){s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var h=s.center;if(u.length===1)return u[0].x=h[0],u[0].y=h[1],void(s.onLayoutEnd&&s.onLayoutEnd());var v=s.linkDistance,k=null;if(Fa(s.focusNode)){for(var T=!1,I=0;I<u.length;I++)u[I].id===s.focusNode&&(k=u[I],s.focusNode=k,T=!0,I=u.length);T||(k=null)}else k=s.focusNode;k||(k=u[0],s.focusNode=k);var j,F,B,U=(j=u,F=k.id,B=-1,j.forEach(function(Gt,lr){Gt.id===F&&(B=lr)}),B);s.focusIndex=U;var q=Sc({nodes:u,edges:l},!1),$=_c(q),ve=s.maxToFocus($,U);s.handleInfinity($,U,ve+1),s.distances=$;var de=$[U],me=s.width||500,Te=s.height||500,Oe=me-h[0]>h[0]?h[0]:me-h[0],Pe=Te-h[1]>h[1]?h[1]:Te-h[1];Oe===0&&(Oe=me/2),Pe===0&&(Pe=Te/2);var Ze=Pe>Oe?Oe:Pe,nt=Math.max.apply(Math,wv(de)),ct=[];de.forEach(function(Gt,lr){s.unitRadius||(s.unitRadius=Ze/nt),ct[lr]=Gt*s.unitRadius}),s.radii=ct;var st=s.eIdealDisMatrix();s.eIdealDistances=st;var It=function(Gt){for(var lr=Gt.length,Lr=Gt[0].length,wn=[],Sr=0;Sr<lr;Sr++){for(var jr=[],_r=0;_r<Lr;_r++)Gt[Sr][_r]!==0?jr.push(1/(Gt[Sr][_r]*Gt[Sr][_r])):jr.push(0);wn.push(jr)}return wn}(st);s.weights=It;var gt=new bv({linkDistance:v,distances:st}).layout();gt.forEach(function(Gt){hu(Gt[0])&&(Gt[0]=Math.random()*v),hu(Gt[1])&&(Gt[1]=Math.random()*v)}),s.positions=gt,gt.forEach(function(Gt,lr){u[lr].x=Gt[0]+h[0],u[lr].y=Gt[1]+h[1]}),gt.forEach(function(Gt){Gt[0]-=gt[U][0],Gt[1]-=gt[U][1]}),s.run();var Pt,Rt=s.preventOverlap,Zt=s.nodeSize,kt=s.strictRadial;if(Rt){var Vt,Dt=s.nodeSpacing;Vt=ur(Dt)?function(){return Dt}:Yo(Dt)?Dt:function(){return 0},Pt=Zt?Ii(Zt)?function(Gt){return(Zt[0]>Zt[1]?Zt[0]:Zt[1])+Vt(Gt)}:function(Gt){return Zt+Vt(Gt)}:function(Gt){return Gt.size?Ii(Gt.size)?(Gt.size[0]>Gt.size[1]?Gt.size[0]:Gt.size[1])+Vt(Gt):Ao(Gt.size)?(Gt.size.width>Gt.size.height?Gt.size.width:Gt.size.height)+Vt(Gt):Gt.size+Vt(Gt):10+Vt(Gt)};var qt={nodes:u,nodeSizeFunc:Pt,adjMatrix:q,positions:gt,radii:ct,height:Te,width:me,strictRadial:kt,focusID:U,iterations:s.maxPreventOverlapIteration||200,k:gt.length/4.5},$t=new xv(qt);gt=$t.layout()}return gt.forEach(function(Gt,lr){u[lr].x=Gt[0]+h[0],u[lr].y=Gt[1]+h[1]}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l}}s.onLayoutEnd&&s.onLayoutEnd()}},{key:"run",value:function(){for(var s=this.maxIteration,u=this.positions||[],l=this.weights||[],h=this.eIdealDistances||[],v=this.radii||[],k=0;k<=s;k++){var T=k/s;this.oneIteration(T,u,v,h,l)}}},{key:"oneIteration",value:function(s,u,l,h,v){var k=1-s,T=this.focusIndex;u.forEach(function(I,j){var F=Ml(I,[0,0]),B=F===0?0:1/F;if(j!==T){var U=0,q=0,$=0;u.forEach(function(de,me){if(j!==me){var Te=Ml(I,de),Oe=Te===0?0:1/Te,Pe=h[me][j];$+=v[j][me],U+=v[j][me]*(de[0]+Pe*(I[0]-de[0])*Oe),q+=v[j][me]*(de[1]+Pe*(I[1]-de[1])*Oe)}});var ve=l[j]===0?0:1/l[j];$*=k,$+=s*ve*ve,U*=k,U+=s*ve*I[0]*B,I[0]=U/$,q*=k,q+=s*ve*I[1]*B,I[1]=q/$}})}},{key:"eIdealDisMatrix",value:function(){var s=this,u=s.nodes;if(!u)return[];var l=s.distances,h=s.linkDistance,v=s.radii||[],k=s.unitRadius||50,T=[];return l&&l.forEach(function(I,j){var F=[];I.forEach(function(B,U){if(j===U)F.push(0);else if(v[j]===v[U])if(s.sortBy==="data")F.push(B*(Math.abs(j-U)*s.sortStrength)/(v[j]/k));else if(s.sortBy){var q=u[j][s.sortBy]||0,$=u[U][s.sortBy]||0;Fa(q)&&(q=q.charCodeAt(0)),Fa($)&&($=$.charCodeAt(0)),F.push(B*(Math.abs(q-$)*s.sortStrength)/(v[j]/k))}else F.push(B*h/(v[j]/k));else{var ve=(h+k)/2;F.push(B*ve)}}),T.push(F)}),T}},{key:"handleInfinity",value:function(s,u,l){for(var h=s.length,v=0;v<h;v++)if(s[u][v]===1/0){s[u][v]=l,s[v][u]=l;for(var k=0;k<h;k++)s[v][k]!==1/0&&s[u][k]===1/0&&(s[u][k]=l+s[v][k],s[k][u]=l+s[v][k])}for(var T=0;T<h;T++)if(T!==u){for(var I=0;I<h;I++)if(s[T][I]===1/0){var j=Math.abs(s[u][T]-s[u][I]);j=j===0?1:j,s[T][I]=j}}}},{key:"maxToFocus",value:function(s,u){for(var l=0,h=0;h<s[u].length;h++)s[u][h]!==1/0&&(l=s[u][h]>l?s[u][h]:l);return l}},{key:"getType",value:function(){return"radial"}}])&&El(t.prototype,e),r&&El(t,r),a}(Wi);function kl(n){return(kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Al(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Cl(n,t){return(Cl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Ov(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Nu(n);if(t){var i=Nu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Mv(this,e)}}function Mv(n,t){return!t||kl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Nu(n){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var kv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Cl(s,u)})(a,n);var t,e,r,i=Ov(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).nodeSize=30,u.minNodeSpacing=10,u.preventOverlap=!1,u.equidistant=!1,u.startAngle=1.5*Math.PI,u.clockwise=!0,u.sortBy="degree",u.nodes=[],u.edges=[],u.width=300,u.height=300,u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var s=this,u=s.nodes,l=s.edges,h=u.length;if(h!==0){s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var v=s.center;if(h===1)return u[0].x=v[0],u[0].y=v[1],void(s.onLayoutEnd&&s.onLayoutEnd());var k,T=[];k=Ii(s.nodeSize)?Math.max(s.nodeSize[0],s.nodeSize[1]):s.nodeSize,u.forEach(function(Ze){T.push(Ze);var nt=k;Ii(Ze.size)?nt=Math.max(Ze.size[0],Ze.size[1]):ur(Ze.size)?nt=Ze.size:Ao(Ze.size)&&(nt=Math.max(Ze.size.width,Ze.size.height)),k=Math.max(k,nt)}),s.clockwise=s.counterclockwise!==void 0?!s.counterclockwise:s.clockwise;var I={},j={};if(T.forEach(function(Ze,nt){I[Ze.id]=Ze,j[Ze.id]=nt}),!(s.sortBy!=="degree"&&Fa(s.sortBy)&&T[0][s.sortBy]!==void 0||(s.sortBy="degree",ur(u[0].degree)))){var F=za(u.length,j,l);T.forEach(function(Ze,nt){Ze.degree=F[nt]})}T.sort(function(Ze,nt){return nt[s.sortBy]-Ze[s.sortBy]}),s.maxValueNode=T[0],s.maxLevelDiff=s.maxLevelDiff||s.maxValueNode[s.sortBy]/4;var B=[[]],U=B[0];T.forEach(function(Ze){if(U.length>0){var nt=Math.abs(U[0][s.sortBy]-Ze[s.sortBy]);s.maxLevelDiff&&nt>=s.maxLevelDiff&&(U=[],B.push(U))}U.push(Ze)});var q=k+s.minNodeSpacing;if(!s.preventOverlap){var $=B.length>0&&B[0].length>1,ve=(Math.min(s.width,s.height)/2-q)/(B.length+($?1:0));q=Math.min(q,ve)}var de=0;if(B.forEach(function(Ze){var nt=s.sweep;nt===void 0&&(nt=2*Math.PI-2*Math.PI/Ze.length);var ct=Ze.dTheta=nt/Math.max(1,Ze.length-1);if(Ze.length>1&&s.preventOverlap){var st=Math.cos(ct)-Math.cos(0),It=Math.sin(ct)-Math.sin(0),gt=Math.sqrt(q*q/(st*st+It*It));de=Math.max(gt,de)}Ze.r=de,de+=q}),s.equidistant){for(var me=0,Te=0,Oe=0;Oe<B.length;Oe++){var Pe=B[Oe].r-Te;me=Math.max(me,Pe)}Te=0,B.forEach(function(Ze,nt){nt===0&&(Te=Ze.r),Ze.r=Te,Te+=me})}return B.forEach(function(Ze){var nt=Ze.dTheta,ct=Ze.r;Ze.forEach(function(st,It){var gt=s.startAngle+(s.clockwise?1:-1)*nt*It;st.x=v[0]+ct*Math.cos(gt),st.y=v[1]+ct*Math.sin(gt)})}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:u,edges:l}}s.onLayoutEnd&&s.onLayoutEnd()}},{key:"getType",value:function(){return"concentric"}}])&&Al(t.prototype,e),r&&Al(t,r),a}(Wi);function Tl(n){return(Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Il(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function jl(n,t){return(jl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Av(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Du(n);if(t){var i=Du(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Cv(this,e)}}function Cv(n,t){return!t||Tl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Du(n){return(Du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Tv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&jl(s,u)})(a,n);var t,e,r,i=Av(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.linkDistance=50,u.nodes=[],u.edges=[],u.onLayoutEnd=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var s=this.nodes,u=this.edges,l=u===void 0?[]:u,h=this.center;if(s&&s.length!==0){if(s.length===1)return s[0].x=h[0],s[0].y=h[1],void(this.onLayoutEnd&&this.onLayoutEnd());var v=this.linkDistance,k=Sc({nodes:s,edges:l},!1),T=_c(k);this.handleInfinity(T);var I,j,F=(I=v,j=[],T.forEach(function(U){var q=[];U.forEach(function($){q.push($*I)}),j.push(q)}),j);this.scaledDistances=F;var B=this.runMDS();return this.positions=B,B.forEach(function(U,q){s[q].x=U[0]+h[0],s[q].y=U[1]+h[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:s,edges:l}}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"runMDS",value:function(){var s=this.scaledDistances,u=Fr.mul(Fr.pow(s,2),-.5),l=u.mean("row"),h=u.mean("column"),v=u.mean();u.add(v).subRowVector(l).subColumnVector(h);var k=new xl(u),T=Fr.sqrt(k.diagonalMatrix).diagonal();return k.leftSingularVectors.toJSON().map(function(I){return Fr.mul([I],[T]).toJSON()[0].splice(0,2)})}},{key:"handleInfinity",value:function(s){var u=-999999;s.forEach(function(l){l.forEach(function(h){h!==1/0&&u<h&&(u=h)})}),s.forEach(function(l,h){l.forEach(function(v,k){v===1/0&&(s[h][k]=u)})})}},{key:"getType",value:function(){return"mds"}}])&&Il(t.prototype,e),r&&Il(t,r),a}(Wi);function Pl(n){return(Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function Nl(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Dl(n,t){return(Dl=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function Iv(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Ru(n);if(t){var i=Ru(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return jv(this,e)}}function jv(n,t){return!t||Pl(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Ru(n){return(Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Pv=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Dl(s,u)})(a,n);var t,e,r,i=Iv(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.gravity=10,u.speed=5,u.clustering=!1,u.clusterGravity=10,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.onLayoutEnd=function(){},u.tick=function(){},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var s=this,u=this.nodes;if(this.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(this.timeInterval),u&&u.length!==0){this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var l=this.center;if(u.length===1)return u[0].x=l[0],u[0].y=l[1],void(this.onLayoutEnd&&this.onLayoutEnd());var h={},v={};return u.forEach(function(k,T){ur(k.x)||(k.x=Math.random()*s.width),ur(k.y)||(k.y=Math.random()*s.height),h[k.id]=k,v[k.id]=T}),this.nodeMap=h,this.nodeIdxMap=v,this.run()}this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var s=this,u=s.nodes;if(u){var l=s.edges,h=s.maxIteration,v=s.center,k=s.height*s.width,T=Math.sqrt(k)/10,I=k/(u.length+1),j=Math.sqrt(I),F=s.gravity,B=s.speed,U=s.clustering,q={};if(U)for(var $ in u.forEach(function(de){if(q[de.cluster]===void 0){var me={name:de.cluster,cx:0,cy:0,count:0};q[de.cluster]=me}var Te=q[de.cluster];ur(de.x)&&(Te.cx+=de.x),ur(de.y)&&(Te.cy+=de.y),Te.count++}),q)q[$].cx/=q[$].count,q[$].cy/=q[$].count;if(typeof window!="undefined"){var ve=0;return this.timeInterval=window.setInterval(function(){if(u){var de=[];if(u.forEach(function(Pe,Ze){de[Ze]={x:0,y:0}}),s.applyCalculate(u,l,de,j,I),U){var me=s.clusterGravity||F;for(var Te in u.forEach(function(Pe,Ze){if(ur(Pe.x)&&ur(Pe.y)){var nt=q[Pe.cluster],ct=Math.sqrt((Pe.x-nt.cx)*(Pe.x-nt.cx)+(Pe.y-nt.cy)*(Pe.y-nt.cy)),st=j*me;de[Ze].x-=st*(Pe.x-nt.cx)/ct,de[Ze].y-=st*(Pe.y-nt.cy)/ct}}),q)q[Te].cx=0,q[Te].cy=0,q[Te].count=0;for(var Oe in u.forEach(function(Pe){var Ze=q[Pe.cluster];ur(Pe.x)&&(Ze.cx+=Pe.x),ur(Pe.y)&&(Ze.cy+=Pe.y),Ze.count++}),q)q[Oe].cx/=q[Oe].count,q[Oe].cy/=q[Oe].count}u.forEach(function(Pe,Ze){if(ur(Pe.x)&&ur(Pe.y)){var nt=.01*j*F;de[Ze].x-=nt*(Pe.x-v[0]),de[Ze].y-=nt*(Pe.y-v[1])}}),u.forEach(function(Pe,Ze){if(ur(Pe.fx)&&ur(Pe.fy))return Pe.x=Pe.fx,void(Pe.y=Pe.fy);if(ur(Pe.x)&&ur(Pe.y)){var nt=Math.sqrt(de[Ze].x*de[Ze].x+de[Ze].y*de[Ze].y);if(nt>0){var ct=Math.min(T*(B/800),nt);Pe.x+=de[Ze].x/nt*ct,Pe.y+=de[Ze].y/nt*ct}}}),s.tick&&s.tick(),++ve>=h&&(s.onLayoutEnd&&s.onLayoutEnd(),window.clearInterval(s.timeInterval))}},0),{nodes:u,edges:l}}}}},{key:"applyCalculate",value:function(s,u,l,h,v){this.calRepulsive(s,l,v),u&&this.calAttractive(u,l,h)}},{key:"calRepulsive",value:function(s,u,l){s.forEach(function(h,v){u[v]={x:0,y:0},s.forEach(function(k,T){if(v!==T&&ur(h.x)&&ur(k.x)&&ur(h.y)&&ur(k.y)){var I=h.x-k.x,j=h.y-k.y,F=I*I+j*j;if(F===0){F=1;var B=v>T?1:-1;I=.01*B,j=.01*B}var U=l/F;u[v].x+=I*U,u[v].y+=j*U}})})}},{key:"calAttractive",value:function(s,u,l){var h=this;s.forEach(function(v){var k=fn(v,"source"),T=fn(v,"target");if(k&&T){var I=h.nodeIdxMap[k],j=h.nodeIdxMap[T];if(I!==j){var F=h.nodeMap[k],B=h.nodeMap[T];if(ur(B.x)&&ur(F.x)&&ur(B.y)&&ur(F.y)){var U=B.x-F.x,q=B.y-F.y,$=Math.sqrt(U*U+q*q),ve=$*$/l;u[j].x-=U/$*ve,u[j].y-=q/$*ve,u[I].x+=U/$*ve,u[I].y+=q/$*ve}}}})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0}},{key:"getType",value:function(){return"fruchterman"}}])&&Nl(t.prototype,e),r&&Nl(t,r),a}(Wi),Nv=o(10),Pn=o.n(Nv),Dv=o(6),hn=o.n(Dv),Rv=o(7),dn=o.n(Rv),Lv=o(11),Nn=o.n(Lv),rt=(o(29),o(3)),Ar=o(5);function Lu(n){return typeof n=="number"}function Bo(n){return n===void 0?0:n>360||n<-360?n%360:n}function sa(n,t,e){return Lu(n)?Nt.e.fromValues(n,t,e):n.length===3?Nt.e.clone(n):Nt.e.fromValues(n[0],n[1],n[2])}var Rl,Ll,Bl,Bu,Gl,Fl,zl,kn,Cs,ua,Ul=function(){function n(t,e){hn()(this,n),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=t,this.matrix=Nt.b.clone(e.matrix),this.right=Nt.e.clone(e.right),this.up=Nt.e.clone(e.up),this.forward=Nt.e.clone(e.forward),this.position=Nt.e.clone(e.position),this.focalPoint=Nt.e.clone(e.focalPoint),this.distanceVector=Nt.e.clone(e.distanceVector),this.azimuth=e.azimuth,this.elevation=e.elevation,this.roll=e.roll,this.relAzimuth=e.relAzimuth,this.relElevation=e.relElevation,this.relRoll=e.relRoll,this.dollyingStep=e.dollyingStep,this.distance=e.distance}return dn()(n,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(t){t.matrix=Nt.b.copy(t.matrix,this.matrix),t.right=Nt.e.copy(t.right,this.right),t.up=Nt.e.copy(t.up,this.up),t.forward=Nt.e.copy(t.forward,this.forward),t.position=Nt.e.copy(t.position,this.position),t.focalPoint=Nt.e.copy(t.focalPoint,this.focalPoint),t.distanceVector=Nt.e.copy(t.distanceVector,this.distanceVector),t.azimuth=this.azimuth,t.elevation=this.elevation,t.roll=this.roll,t.relAzimuth=this.relAzimuth,t.relElevation=this.relElevation,t.relRoll=this.relRoll,t.dollyingStep=this.dollyingStep,t.distance=this.distance}}]),n}();(function(n){n.ORBITING="ORBITING",n.EXPLORING="EXPLORING",n.TRACKING="TRACKING"})(kn||(kn={})),function(n){n.DEFAULT="DEFAULT",n.ROTATIONAL="ROTATIONAL",n.TRANSLATIONAL="TRANSLATIONAL",n.CINEMATIC="CINEMATIC"}(Cs||(Cs={})),function(n){n.ORTHOGRAPHIC="ORTHOGRAPHIC",n.PERSPECTIVE="PERSPECTIVE"}(ua||(ua={}));var Vl,Wl,Xl,Gu,Yl,Ha,Hl,Go=Math.PI/180,wa=180/Math.PI,ql=(Rl=Object(Ar.injectable)(),Ll=Object(Ar.inject)(rt.IDENTIFIER.InteractorService),Rl((zl=Fl=function(){function n(){hn()(this,n),this.matrix=Nt.b.create(),this.right=Nt.e.fromValues(1,0,0),this.up=Nt.e.fromValues(0,1,0),this.forward=Nt.e.fromValues(0,0,1),this.position=Nt.e.fromValues(0,0,1),this.focalPoint=Nt.e.fromValues(0,0,0),this.distanceVector=Nt.e.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.rotateWorld=!1,Pn()(this,"interactor",Gl,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Nt.b.create(),this.view=void 0,this.following=void 0,this.type=kn.EXPLORING,this.trackingMode=Cs.DEFAULT,this.projectionMode=ua.PERSPECTIVE,this.frustum=new rt.Frustum,this.landmarks=[],this.landmarkAnimationID=void 0}return dn()(n,[{key:"clone",value:function(){var t=new n;return t.setType(this.type,void 0),t.interactor=this.interactor,t}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(t,e){return this.type=t,this.type===kn.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===kn.TRACKING&&e!==void 0&&this.setTrackingMode(e),this}},{key:"setProjectionMode",value:function(t){return this.projectionMode=t,this}},{key:"setTrackingMode",value:function(t){if(this.type!==kn.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this}},{key:"setWorldRotation",value:function(t){this.rotateWorld=t,this._getAngles()}},{key:"getViewTransform",value:function(){return Nt.b.invert(Nt.b.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(t){return this.matrix=t,this._update(),this}},{key:"setAspect",value:function(t){return this.setPerspective(this.near,this.far,this.fov,t),this}},{key:"setViewOffset",value:function(t,e,r,i,a,s){return this.aspect=t/e,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.projectionMode===ua.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===ua.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(t,e,r,i){return this.projectionMode=ua.PERSPECTIVE,this.fov=r,this.near=t,this.far=e,this.aspect=i,Nt.b.perspective(this.perspective,this.fov*Go,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(t,e,r,i,a,s){this.projectionMode=ua.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=r,this.bottom=i,this.near=a,this.far=s;var u=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),h=(this.rright+this.left)/2,v=(this.top+this.bottom)/2,k=h-u,T=h+u,I=v+l,j=v-l;if(this.view!==void 0&&this.view.enabled){var F=(this.rright-this.left)/this.view.fullWidth/this.zoom,B=(this.top-this.bottom)/this.view.fullHeight/this.zoom;T=(k+=F*this.view.offsetX)+F*this.view.width,j=(I-=B*this.view.offsetY)-B*this.view.height}return Nt.b.ortho(this.perspective,k,T,I,j,a,s),this}},{key:"setPosition",value:function(t,e,r){return this._setPosition(t,e,r),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(t,e,r){var i=Nt.e.fromValues(0,1,0);if(this.focalPoint=sa(t,e,r),this.trackingMode===Cs.CINEMATIC){var a=Nt.e.subtract(Nt.e.create(),this.focalPoint,this.position);t=a[0],e=a[1],r=a[2];var s=Nt.e.length(a),u=Math.asin(e/s)*wa,l=90+Math.atan2(r,t)*wa,h=Nt.b.create();Nt.b.rotateY(h,h,l*Go),Nt.b.rotateX(h,h,u*Go),i=Nt.e.transformMat4(Nt.e.create(),[0,1,0],h)}return Nt.b.invert(this.matrix,Nt.b.lookAt(Nt.b.create(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(t){if(!(this.distance===t||t<0)){this.distance=t,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var e=Nt.e.create();t=this.distance;var r=this.forward,i=this.focalPoint;return e[0]=t*r[0]+i[0],e[1]=t*r[1]+i[1],e[2]=t*r[2]+i[2],this._setPosition(e),this}}},{key:"setMaxDistance",value:function(t){return this.maxDistance=t,this}},{key:"setMinDistance",value:function(t){return this.minDistance=t,this}},{key:"changeAzimuth",value:function(t){return this.setAzimuth(this.azimuth+t),this}},{key:"changeElevation",value:function(t){return this.setElevation(this.elevation+t),this}},{key:"changeRoll",value:function(t){return this.setRoll(this.roll+t),this}},{key:"setAzimuth",value:function(t){return this.azimuth=Bo(t),this.computeMatrix(),this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(t){return this.elevation=Bo(t),this.computeMatrix(),this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(t){return this.roll=Bo(t),this.computeMatrix(),this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(t,e,r){if(this.type===kn.EXPLORING){t=Bo(t),e=Bo(e),r=Bo(r);var i=Nt.c.setAxisAngle(Nt.c.create(),[1,0,0],(this.rotateWorld?1:-1)*e*Go),a=Nt.c.setAxisAngle(Nt.c.create(),[0,1,0],(this.rotateWorld?1:-1)*t*Go),s=Nt.c.setAxisAngle(Nt.c.create(),[0,0,1],r*Go),u=Nt.c.multiply(Nt.c.create(),a,i);u=Nt.c.multiply(Nt.c.create(),u,s);var l=Nt.b.fromQuat(Nt.b.create(),u);Nt.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),Nt.b.multiply(this.matrix,this.matrix,l),Nt.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+e)>90)return;this.relElevation=Bo(e),this.relAzimuth=Bo(t),this.relRoll=Bo(r),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getPosition():this.type===kn.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(t,e){var r=sa(t,e,0),i=Nt.e.clone(this.position);return Nt.e.add(i,i,Nt.e.scale(Nt.e.create(),this.right,r[0])),Nt.e.add(i,i,Nt.e.scale(Nt.e.create(),this.up,r[1])),this._setPosition(i),this}},{key:"dolly",value:function(t){var e=this.forward,r=Nt.e.clone(this.position),i=this.dollyingStep,a=this.distance+t*this.dollyingStep;return i=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,r[0]+=i*e[0],r[1]+=i*e[1],r[2]+=i*e[2],this._setPosition(r),this.type===kn.ORBITING||this.type===kn.EXPLORING?this._getDistance():this.type===kn.TRACKING&&Nt.e.add(this.focalPoint,r,this.distanceVector),this}},{key:"createLandmark",value:function(t,e){var r=this.clone();r.setPosition(e.position),r.setFocalPoint(e.focalPoint),e.roll!==void 0&&r.setRoll(e.roll);var i=new Ul(t,r);return this.landmarks.push(i),i}},{key:"setLandmark",value:function(t){var e=new Ul(t,this);return this.landmarks.push(e),this}},{key:"gotoLandmark",value:function(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,i=this.landmarks.find(function(v){return v.name===t});if(i){if(r===0)return void i.retrieve(this);this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var a,s=i.getPosition(),u=i.getFocalPoint(),l=i.getRoll(),h=function v(k){a===void 0&&(a=k);var T,I=k-a,j=(1-Math.cos(I/r*Math.PI))/2,F=Nt.e.create(),B=Nt.e.create();if(Nt.e.lerp(F,e.focalPoint,u,j),Nt.e.lerp(B,e.position,s,j),T=e.roll*(1-j)+l*j,e.setFocalPoint(F),e.setPosition(B),e.setRoll(T),e.computeMatrix(),!(Nt.e.dist(F,u)+Nt.e.dist(B,s)>.01))return e.setFocalPoint(F),e.setPosition(B),e.setRoll(T),e.computeMatrix(),void e.interactor.connect();I<r&&(e.landmarkAnimationID=window.requestAnimationFrame(v))};window.requestAnimationFrame(h)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var t,e,r=Nt.c.setAxisAngle(Nt.c.create(),[0,0,1],this.roll*Go);Nt.b.identity(this.matrix),t=Nt.c.setAxisAngle(Nt.c.create(),[1,0,0],(this.rotateWorld&&this.type!==kn.TRACKING||this.type===kn.TRACKING?1:-1)*this.elevation*Go),e=Nt.c.setAxisAngle(Nt.c.create(),[0,1,0],(this.rotateWorld&&this.type!==kn.TRACKING||this.type===kn.TRACKING?1:-1)*this.azimuth*Go);var i=Nt.c.multiply(Nt.c.create(),e,t);i=Nt.c.multiply(Nt.c.create(),i,r);var a=Nt.b.fromQuat(Nt.b.create(),i);this.type===kn.ORBITING||this.type===kn.EXPLORING?(Nt.b.translate(this.matrix,this.matrix,this.focalPoint),Nt.b.multiply(this.matrix,this.matrix,a),Nt.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===kn.TRACKING&&(Nt.b.translate(this.matrix,this.matrix,this.position),Nt.b.multiply(this.matrix,this.matrix,a))}},{key:"_setPosition",value:function(t,e,r){this.position=sa(t,e,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1}},{key:"_getAxes",value:function(){Nt.e.copy(this.right,sa(Nt.f.transformMat4(Nt.f.create(),[1,0,0,0],this.matrix))),Nt.e.copy(this.up,sa(Nt.f.transformMat4(Nt.f.create(),[0,1,0,0],this.matrix))),Nt.e.copy(this.forward,sa(Nt.f.transformMat4(Nt.f.create(),[0,0,1,0],this.matrix))),Nt.e.normalize(this.right,this.right),Nt.e.normalize(this.up,this.up),Nt.e.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var t=this.distanceVector[0],e=this.distanceVector[1],r=this.distanceVector[2],i=Nt.e.length(this.distanceVector);if(i===0)return this.elevation=0,void(this.azimuth=0);this.type===kn.TRACKING||this.rotateWorld?(this.elevation=Math.asin(e/i)*wa,this.azimuth=Math.atan2(-t,-r)*wa):(this.elevation=-Math.asin(e/i)*wa,this.azimuth=-Math.atan2(-t,-r)*wa)}},{key:"_getPosition",value:function(){Nt.e.copy(this.position,sa(Nt.f.transformMat4(Nt.f.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Nt.e.transformMat3(this.distanceVector,[0,0,-this.distance],Nt.a.fromMat4(Nt.a.create(),this.matrix)),Nt.e.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Nt.e.subtract(Nt.e.create(),this.focalPoint,this.position),this.distance=Nt.e.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),n}(),Fl.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},Bu=zl,Gl=Nn()(Bu.prototype,"interactor",[Ll],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bl=Bu))||Bl),qo=(Vl=Object(Ar.injectable)(),Wl=Object(Ar.inject)(rt.IDENTIFIER.GeometryComponentManager),Vl((Hl=Ha=function(){function n(){hn()(this,n),this.config=void 0,Pn()(this,"geometry",Yl,this),this.entity=void 0,this.component=void 0}return dn()(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.component=this.geometry.create(t),this.component.entity=t,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),Ha.BOX="box",Ha.SPHERE="sphere",Ha.PLANE="plane",Ha.MERGED="merged",Gu=Hl,Yl=Nn()(Gu.prototype,"geometry",[Wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xl=Gu))||Xl),Bv=o(9),Hr=o.n(Bv),Gv=o(14),ti=o.n(Gv),Fv=o(4),Yt=o.n(Fv),Jt=o(8);function Kl(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var zv={}.toString,Uv=function(n,t){return zv.call(n)==="[object "+t+"]"},Vv=o(41),qa=o.n(Vv),Fn={};Fn["[object Float32Array]"]=Fn["[object Float64Array]"]=Fn["[object Int8Array]"]=Fn["[object Int16Array]"]=Fn["[object Int32Array]"]=Fn["[object Uint8Array]"]=Fn["[object Uint8ClampedArray]"]=Fn["[object Uint16Array]"]=Fn["[object Uint32Array]"]=!0,Fn["[object Arguments]"]=Fn["[object Array]"]=Fn["[object ArrayBuffer]"]=Fn["[object Boolean]"]=Fn["[object DataView]"]=Fn["[object Date]"]=Fn["[object Error]"]=Fn["[object Function]"]=Fn["[object Map]"]=Fn["[object Number]"]=Fn["[object Object]"]=Fn["[object RegExp]"]=Fn["[object Set]"]=Fn["[object String]"]=Fn["[object WeakMap]"]=!1;var Wv=Object.prototype.toString,Zl,$l,Ql,Jl,Ts,ef,tf,rf=function(n){return function(t){return!!t&&qa()(t)==="object"}(n)&&function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991}(n.length)&&!!Fn[Wv.call(n)]};function nf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function of(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?nf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):nf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var af,sf,uf,Fu,cf,lf,ff,hf,df,pf,gf,vf,yf,mf,_a,bf,xf,wf,_f,Is,Sf,Fo,Ka,zo,fo,Za,Ko,$a,js,Co,ca,ji,To,Io,Ps,Ef=(Zl=Object(Ar.injectable)(),$l=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Ql=Object(Ar.inject)(rt.IDENTIFIER.ConfigService),Zl((Ts=function(){function n(){hn()(this,n),Pn()(this,"engine",ef,this),Pn()(this,"configService",tf,this),this.entity=Object(rt.createEntity)(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var t,e,r;return dn()(n,[{key:"init",value:function(){var i=this.configService.get(),a=i.canvas,s=i.engineOptions;this.initPromise=this.engine.init(of({canvas:a||Kl(),swapChainFormat:Jt.TextureFormat.BGRA8Unorm,antialiasing:!1},s))}},{key:"setBundle",value:function(i){this.compiledBundle=JSON.parse(JSON.stringify(i))}},{key:"setDispatch",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=i),this}},{key:"setMaxIteration",value:function(i){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=i),this}},{key:"setBinding",value:function(i,a){var s,u=this;if(typeof i=="string"){var l=Lu(a)||rf(a)||(s=a,Array.isArray?Array.isArray(s):Uv(s,"Array"));if(this.compiledBundle&&this.compiledBundle.context){var h=this.compiledBundle.context.defines.find(function(k){return k.name===i});if(h)return h.value=a,this;var v=this.compiledBundle.context.uniforms.find(function(k){return k.name===i});v&&(l?(v.data=a,v.isReferer=!1,v.storageClass===rt.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(i,a):this.model&&this.model.updateBuffer(i,a)):(v.isReferer=!0,v.data=a))}}else Object.keys(i).forEach(function(k){u.setBinding(k,i[k])});return this}},{key:"execute",value:(r=ti()(Hr.a.mark(function i(){var a,s,u=this,l=arguments;return Hr.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(a=l.length>0&&l[0]!==void 0?l[0]:1,!this.dirty){h.next=6;break}return this.compiledBundle.context&&(a>1?this.compiledBundle.context.maxIteration=a:this.compiledBundle.context.maxIteration++),h.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(v){return v.isReferer}).forEach(function(v){var k=v.data,T=v.name;u.model.confirmInput(k.model,T)}),s=0;s<a;s++)this.model.run();return this.engine.endFrame(),h.abrupt("return",this);case 12:case"end":return h.stop()}},i,this)})),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(e=ti()(Hr.a.mark(function i(){return Hr.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",this.model.readData());case 1:case"end":return a.stop()}},i,this)})),function(){return e.apply(this,arguments)})},{key:"compile",value:(t=ti()(Hr.a.mark(function i(){var a,s,u;return Hr.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.initPromise;case 2:return a=of({},this.compiledBundle.context),s=this.engine.supportWebGPU?this.engine.useWGSL?rt.Target.WGSL:rt.Target.GLSL450:rt.Target.GLSL100,u=this.compiledBundle.shaders[s],a.defines.filter(function(h){return h.runtime}).forEach(function(h){var v="".concat(rt.DefineValuePlaceholder).concat(h.name);u=u.replace(v,"".concat(h.value))}),a.shader=u,a.uniforms.forEach(function(h){if(!h.data&&h.storageClass===rt.STORAGE_CLASS.StorageBuffer){var v=1;h.type===rt.AST_TOKEN_TYPES.FloatArray?v=1:h.type===rt.AST_TOKEN_TYPES.Vector4FloatArray&&(v=4),h.data=new Float32Array(a.output.length*v).fill(0)}}),this.compiledBundle.context=a,l.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=l.sent;case 12:case"end":return l.stop()}},i,this)})),function(){return t.apply(this,arguments)})}]),n}(),ef=Nn()(Ts.prototype,"engine",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tf=Nn()(Ts.prototype,"configService",[Ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jl=Ts))||Jl),Of=(af=Object(Ar.injectable)(),sf=Object(Ar.inject)(rt.IDENTIFIER.MaterialComponentManager),af((ff=lf=function(){function n(){hn()(this,n),this.config=void 0,Pn()(this,"material",cf,this),this.entity=void 0,this.component=void 0}return dn()(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t,e){this.entity=t,this.component=this.material.create(t),this.component.entity=t,this.component.type=e,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),n}(),lf.BASIC="basic",Fu=ff,cf=Nn()(Fu.prototype,"material",[sf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uf=Fu))||uf),Zo=(hf=Object(Ar.injectable)(),df=Object(Ar.inject)(rt.IDENTIFIER.MeshComponentManager),pf=Object(Ar.inject)(rt.IDENTIFIER.CullableComponentManager),gf=Object(Ar.inject)(rt.IDENTIFIER.TransformComponentManager),vf=Object(Ar.inject)(rt.IDENTIFIER.Systems),yf=Object(Ar.named)(rt.IDENTIFIER.SceneGraphSystem),hf((Sf=Is=function(){function n(){hn()(this,n),this.attributes={},this.config=void 0,Pn()(this,"mesh",bf,this),Pn()(this,"cullable",xf,this),Pn()(this,"transform",wf,this),Pn()(this,"sceneGraphSystem",_f,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return dn()(n,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(t){this.config=t}},{key:"setEntity",value:function(t){this.entity=t,this.cullable.create(t),this.meshComponent=this.mesh.create(t),this.transformComponent=this.transform.create(t),this.onEntityCreated()}},{key:"setMaterial",value:function(t){return this.meshComponent.material=t,this}},{key:"setGeometry",value:function(t){return this.meshComponent.geometry=t,this}},{key:"setAttributes",value:function(t){var e=this;Object.keys(t).forEach(function(r){t[r]!==void 0&&t[r]!==e.attributes[r]&&(e.onAttributeChanged({name:r,data:t[r]}),e.attributes[r]=t[r])})}},{key:"setVisible",value:function(t){var e=this;return this.meshComponent.visible=t,this.meshComponent.children.forEach(function(r){var i=e.mesh.getComponentByEntity(r);i&&(i.visible=t)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(t){return this.sceneGraphSystem.attach(this.entity,t.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(t){var e=t.name,r=t.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(e),r)}},{key:"convertAttributeName2UniformName",value:function(t){return t}}]),n}(),Is.POINT="point",Is.LINE="line",Is.GRID="grid",_a=Sf,bf=Nn()(_a.prototype,"mesh",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xf=Nn()(_a.prototype,"cullable",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wf=Nn()(_a.prototype,"transform",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_f=Nn()(_a.prototype,"sceneGraphSystem",[vf,yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mf=_a))||mf),Xv=o(272),Yv=o.n(Xv),Hv=function(){function n(t,e){hn()(this,n),this.attribute=void 0,this.buffer=void 0;var r=e.buffer,i=e.offset,a=e.stride,s=e.normalized,u=e.size,l=e.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:a||0,normalized:s||!1,divisor:l||0},u&&(this.attribute.size=u)}return dn()(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),qv=(Fo={},Yt()(Fo,rt.gl.POINTS,"points"),Yt()(Fo,rt.gl.LINES,"lines"),Yt()(Fo,rt.gl.LINE_LOOP,"line loop"),Yt()(Fo,rt.gl.LINE_STRIP,"line strip"),Yt()(Fo,rt.gl.TRIANGLES,"triangles"),Yt()(Fo,rt.gl.TRIANGLE_FAN,"triangle fan"),Yt()(Fo,rt.gl.TRIANGLE_STRIP,"triangle strip"),Fo),Mf=(Ka={},Yt()(Ka,rt.gl.STATIC_DRAW,"static"),Yt()(Ka,rt.gl.DYNAMIC_DRAW,"dynamic"),Yt()(Ka,rt.gl.STREAM_DRAW,"stream"),Ka),zu=(zo={},Yt()(zo,rt.gl.BYTE,"int8"),Yt()(zo,rt.gl.UNSIGNED_INT,"int16"),Yt()(zo,rt.gl.INT,"int32"),Yt()(zo,rt.gl.UNSIGNED_BYTE,"uint8"),Yt()(zo,rt.gl.UNSIGNED_SHORT,"uint16"),Yt()(zo,rt.gl.UNSIGNED_INT,"uint32"),Yt()(zo,rt.gl.FLOAT,"float"),zo),Kv=(fo={},Yt()(fo,rt.gl.ALPHA,"alpha"),Yt()(fo,rt.gl.LUMINANCE,"luminance"),Yt()(fo,rt.gl.LUMINANCE_ALPHA,"luminance alpha"),Yt()(fo,rt.gl.RGB,"rgb"),Yt()(fo,rt.gl.RGBA,"rgba"),Yt()(fo,rt.gl.RGBA4,"rgba4"),Yt()(fo,rt.gl.RGB5_A1,"rgb5 a1"),Yt()(fo,rt.gl.RGB565,"rgb565"),Yt()(fo,rt.gl.DEPTH_COMPONENT,"depth"),Yt()(fo,rt.gl.DEPTH_STENCIL,"depth stencil"),fo),Zv=(Za={},Yt()(Za,rt.gl.DONT_CARE,"dont care"),Yt()(Za,rt.gl.NICEST,"nice"),Yt()(Za,rt.gl.FASTEST,"fast"),Za),kf=(Ko={},Yt()(Ko,rt.gl.NEAREST,"nearest"),Yt()(Ko,rt.gl.LINEAR,"linear"),Yt()(Ko,rt.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),Yt()(Ko,rt.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Yt()(Ko,rt.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Yt()(Ko,rt.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ko),Af=($a={},Yt()($a,rt.gl.REPEAT,"repeat"),Yt()($a,rt.gl.CLAMP_TO_EDGE,"clamp"),Yt()($a,rt.gl.MIRRORED_REPEAT,"mirror"),$a),$v=(js={},Yt()(js,rt.gl.NONE,"none"),Yt()(js,rt.gl.BROWSER_DEFAULT_WEBGL,"browser"),js),Qv=(Co={},Yt()(Co,rt.gl.NEVER,"never"),Yt()(Co,rt.gl.ALWAYS,"always"),Yt()(Co,rt.gl.LESS,"less"),Yt()(Co,rt.gl.LEQUAL,"lequal"),Yt()(Co,rt.gl.GREATER,"greater"),Yt()(Co,rt.gl.GEQUAL,"gequal"),Yt()(Co,rt.gl.EQUAL,"equal"),Yt()(Co,rt.gl.NOTEQUAL,"notequal"),Co),Cf=(ca={},Yt()(ca,rt.gl.FUNC_ADD,"add"),Yt()(ca,rt.gl.MIN_EXT,"min"),Yt()(ca,rt.gl.MAX_EXT,"max"),Yt()(ca,rt.gl.FUNC_SUBTRACT,"subtract"),Yt()(ca,rt.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),ca),Ns=(ji={},Yt()(ji,rt.gl.ZERO,"zero"),Yt()(ji,rt.gl.ONE,"one"),Yt()(ji,rt.gl.SRC_COLOR,"src color"),Yt()(ji,rt.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),Yt()(ji,rt.gl.SRC_ALPHA,"src alpha"),Yt()(ji,rt.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Yt()(ji,rt.gl.DST_COLOR,"dst color"),Yt()(ji,rt.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),Yt()(ji,rt.gl.DST_ALPHA,"dst alpha"),Yt()(ji,rt.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Yt()(ji,rt.gl.CONSTANT_COLOR,"constant color"),Yt()(ji,rt.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Yt()(ji,rt.gl.CONSTANT_ALPHA,"constant alpha"),Yt()(ji,rt.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Yt()(ji,rt.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),ji),Jv=(To={},Yt()(To,rt.gl.NEVER,"never"),Yt()(To,rt.gl.ALWAYS,"always"),Yt()(To,rt.gl.LESS,"less"),Yt()(To,rt.gl.LEQUAL,"lequal"),Yt()(To,rt.gl.GREATER,"greater"),Yt()(To,rt.gl.GEQUAL,"gequal"),Yt()(To,rt.gl.EQUAL,"equal"),Yt()(To,rt.gl.NOTEQUAL,"notequal"),To),Sa=(Io={},Yt()(Io,rt.gl.ZERO,"zero"),Yt()(Io,rt.gl.KEEP,"keep"),Yt()(Io,rt.gl.REPLACE,"replace"),Yt()(Io,rt.gl.INVERT,"invert"),Yt()(Io,rt.gl.INCR,"increment"),Yt()(Io,rt.gl.DECR,"decrement"),Yt()(Io,rt.gl.INCR_WRAP,"increment wrap"),Yt()(Io,rt.gl.DECR_WRAP,"decrement wrap"),Io),e0=(Ps={},Yt()(Ps,rt.gl.FRONT,"front"),Yt()(Ps,rt.gl.BACK,"back"),Ps),t0=function(){function n(t,e){hn()(this,n),this.buffer=void 0;var r=e.data,i=e.usage,a=e.type;this.buffer=t.buffer({data:r,usage:Mf[i||rt.gl.STATIC_DRAW],type:zu[a||rt.gl.UNSIGNED_BYTE]})}return dn()(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data,r=t.offset;this.buffer.subdata(e,r)}}]),n}(),r0=o(27),ui=o.n(r0),zn={};zn["[object Float32Array]"]=zn["[object Float64Array]"]=zn["[object Int8Array]"]=zn["[object Int16Array]"]=zn["[object Int32Array]"]=zn["[object Uint8Array]"]=zn["[object Uint8ClampedArray]"]=zn["[object Uint16Array]"]=zn["[object Uint32Array]"]=!0,zn["[object Arguments]"]=zn["[object Array]"]=zn["[object ArrayBuffer]"]=zn["[object Boolean]"]=zn["[object DataView]"]=zn["[object Date]"]=zn["[object Error]"]=zn["[object Function]"]=zn["[object Map]"]=zn["[object Number]"]=zn["[object Object]"]=zn["[object RegExp]"]=zn["[object Set]"]=zn["[object String]"]=zn["[object WeakMap]"]=!1;var n0=Object.prototype.toString,Uu=function(n){return function(t){return!!t&&qa()(t)==="object"}(n)&&function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991}(n.length)&&!!zn[n0.call(n)]};function Tf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function If(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Tf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Tf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var jf=0,i0=function(){function n(e,r){var i=this;hn()(this,n),this.reGl=e,this.context=r,this.entity=Object(rt.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var a={};this.context.uniforms.forEach(function(v){var k=v.name,T=v.type,I=v.data,j=v.isReferer,F=v.storageClass;if(F===rt.STORAGE_CLASS.StorageBuffer){if(j)i.textureCache[k]={data:void 0},a["".concat(k,"Size")]=function(){return I.compiledBundle.context.output.textureSize};else{i.textureCache[k]=i.calcDataTexture(k,T,I);var B=i.textureCache[k],U=B.textureWidth,q=B.isOutput;a["".concat(k,"Size")]=[U,U],q&&(i.outputTextureName=k,i.context.needPingpong&&(i.outputTextureName="".concat(k,"Output"),i.textureCache[i.outputTextureName]=i.calcDataTexture(k,T,I)))}a[k]=function(){return i.textureCache[k].texture}}else if(F===rt.STORAGE_CLASS.Uniform){if(I&&(Array.isArray(I)||Uu(I))&&I.length>16)throw new Error("invalid data type ".concat(T));a[k]=function(){return v.data}}});var s=this.getOuputDataTexture(),u=s.textureWidth,l=s.texelCount;a.u_OutputTextureSize=[u,u],a.u_OutputTexelCount=l,this.context.output.textureSize=[u,u];var h={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:a,vert:`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(h)}var t;return dn()(n,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){e.computeCommand()})}},{key:"readData",value:(t=ti()(Hr.a.mark(function e(){var r,i,a,s,u,l,h,v,k=this;return Hr.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){r=k.reGl.read()}),!r){T.next=6;break}if(i=this.getOuputDataTexture(),a=i.originalDataLength,s=i.elementsPerTexel,u=i.typedArrayConstructor,l=u===void 0?Float32Array:u,h=[],s!==4)for(v=0;v<r.length;v+=4)s===1?h.push(r[v]):s===2?h.push(r[v],r[v+1]):h.push(r[v],r[v+1],r[v+2]);else h=r;return T.abrupt("return",new l(h.slice(0,a)));case 6:return T.abrupt("return",new Float32Array);case 7:case"end":return T.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"confirmInput",value:function(e,r){var i;this.entity===e.entity?(this.dynamicPingpong=!0,i=this):i=e,this.textureCache[r].id=i.getOuputDataTexture().id,this.textureCache[r].texture=i.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,r){var i=this.context.uniforms.find(function(l){return l.name===e});if(i){var a=this.calcDataTexture(e,i.type,r),s=a.texture,u=a.data;this.textureCache[e].data=u,this.textureCache[e].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var r=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=r}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var r=e.data,i=e.textureWidth;return If(If({},e),{},{id:jf++,texture:this.reGl.texture({width:i,height:i,data:r,type:"float"})})}},{key:"calcDataTexture",value:function(e,r,i){var a=1;r===rt.AST_TOKEN_TYPES.Vector4FloatArray&&(a=4);for(var s=[],u=0;u<i.length;u+=a)a===1?s.push(i[u],0,0,0):a===2?s.push(i[u],i[u+1],0,0):a===3?s.push(i[u],i[u+1],i[u+2],0):a===4&&s.push(i[u],i[u+1],i[u+2],i[u+3]);var l=i.length,h=Math.ceil(l/a),v=Math.ceil(Math.sqrt(h)),k=v*v;h<k&&s.push.apply(s,ui()(new Array(4*(k-h)).fill(0)));var T=this.reGl.texture({width:v,height:v,data:s,type:"float"});return{id:jf++,data:s,originalDataLength:l,typedArrayConstructor:Uu(i)?i.constructor:void 0,textureWidth:v,texture:T,texelCount:h,elementsPerTexel:a,isOutput:e===this.context.output.name}}}]),n}(),o0=function(){function n(t,e){hn()(this,n),this.elements=void 0;var r=e.data,i=e.usage,a=e.type,s=e.count;this.elements=t.elements({data:r,usage:Mf[i||rt.gl.STATIC_DRAW],type:zu[a||rt.gl.UNSIGNED_BYTE],count:s})}return dn()(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),a0=function(){function n(t,e){hn()(this,n),this.framebuffer=void 0;var r=e.width,i=e.height,a=e.color,s=e.colors,u=(e.depth,e.stencil,{width:r,height:i});Array.isArray(s)&&(u.colors=s.map(function(l){return l.get()})),a&&typeof a!="boolean"&&(u.color=a.get()),this.framebuffer=t.framebuffer(u)}return dn()(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,r=t.height;this.framebuffer.resize(e,r)}}]),n}();function Qa(n){var t={};return Object.keys(n).forEach(function(e){(function r(i,a,s,u){if(a===null||typeof a=="number"||typeof a=="boolean"||Array.isArray(a)&&typeof a[0]=="number"||Uu(a)||a===""||a.resize!==void 0)return void(s["".concat(u&&u+".").concat(i)]=a);l=a,h=qa()(l),l==null||h!=="object"&&h!=="function"||Object.keys(a).forEach(function(v){r(v,a[v],s,"".concat(u&&u+".").concat(i))});var l,h;Array.isArray(a)&&a.forEach(function(v,k){Object.keys(v).forEach(function(T){r(T,v[T],s,"".concat(u&&u+".").concat(i,"[").concat(k,"]"))})})})(e,n[e],t,"")}),t}function Pf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Ea(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Pf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Pf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var Nf,Ds,s0=function(){function n(t,e){hn()(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=e.vs,i=e.fs,a=e.defines,s=e.attributes,u=e.uniforms,l=e.primitive,h=e.count,v=e.elements,k=e.depth,T=e.blend,I=e.stencil,j=e.cull,F=e.instances,B=e.scissor,U=e.viewport,q={};u&&(this.uniforms=Qa(u),Object.keys(u).forEach(function(me){q[me]=t.prop(me)}));var $={};Object.keys(s).forEach(function(me){$[me]=s[me].get()});var ve=a&&this.generateDefines(a)||"",de={attributes:$,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(ve,`
`).concat(i),uniforms:q,vert:`
`.concat(ve,`
`).concat(r),primitive:qv[l===void 0?rt.gl.TRIANGLES:l]};F&&(de.instances=F),h&&(de.count=h),v&&(de.elements=v.get()),B&&(de.scissor=B),U&&(de.viewport=U),this.initDepthDrawParams({depth:k},de),this.initBlendDrawParams({blend:T},de),this.initStencilDrawParams({stencil:I},de),this.initCullDrawParams({cull:j},de),this.drawCommand=t(de)}return dn()(n,[{key:"addUniforms",value:function(t){this.uniforms=Ea(Ea({},this.uniforms),Qa(t))}},{key:"draw",value:function(t){var e=Ea(Ea({},this.uniforms),Qa(t.uniforms||{})),r={};Object.keys(e).forEach(function(i){var a=qa()(e[i]);a==="boolean"||a==="number"||Array.isArray(e[i])||e[i].BYTES_PER_ELEMENT?r[i]=e[i]:a==="string"||(r[i]=e[i].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){var r=t.depth;r&&(e.depth={enable:r.enable===void 0||!!r.enable,mask:r.mask===void 0||!!r.mask,func:Qv[r.func||rt.gl.LESS],range:r.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var r=t.blend;if(r){var i=r.enable,a=r.func,s=r.equation,u=r.color,l=u===void 0?[0,0,0,0]:u;e.blend={enable:!!i,func:{srcRGB:Ns[a&&a.srcRGB||rt.gl.SRC_ALPHA],srcAlpha:Ns[a&&a.srcAlpha||rt.gl.SRC_ALPHA],dstRGB:Ns[a&&a.dstRGB||rt.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:Ns[a&&a.dstAlpha||rt.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Cf[s&&s.rgb||rt.gl.FUNC_ADD],alpha:Cf[s&&s.alpha||rt.gl.FUNC_ADD]},color:l}}}},{key:"initStencilDrawParams",value:function(t,e){var r=t.stencil;if(r){var i=r.enable,a=r.mask,s=a===void 0?-1:a,u=r.func,l=u===void 0?{cmp:rt.gl.ALWAYS,ref:0,mask:-1}:u,h=r.opFront,v=h===void 0?{fail:rt.gl.KEEP,zfail:rt.gl.KEEP,zpass:rt.gl.KEEP}:h,k=r.opBack,T=k===void 0?{fail:rt.gl.KEEP,zfail:rt.gl.KEEP,zpass:rt.gl.KEEP}:k;e.stencil={enable:!!i,mask:s,func:Ea(Ea({},l),{},{cmp:Jv[l.cmp]}),opFront:{fail:Sa[v.fail],zfail:Sa[v.zfail],zpass:Sa[v.zpass]},opBack:{fail:Sa[T.fail],zfail:Sa[T.zfail],zpass:Sa[T.zpass]}}}}},{key:"initCullDrawParams",value:function(t,e){var r=t.cull;if(r){var i=r.enable,a=r.face,s=a===void 0?rt.gl.BACK:a;e.cull={enable:!!i,face:e0[s]}}}},{key:"generateDefines",value:function(t){return Object.keys(t).map(function(e){return"#define ".concat(e," ").concat(Number(t[e]))}).join(`
`)}}]),n}(),u0=function(){function n(t,e){hn()(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var r=e.data,i=e.type,a=i===void 0?rt.gl.UNSIGNED_BYTE:i,s=e.width,u=e.height,l=e.flipY,h=l!==void 0&&l,v=e.format,k=v===void 0?rt.gl.RGBA:v,T=e.mipmap,I=T!==void 0&&T,j=e.wrapS,F=j===void 0?rt.gl.CLAMP_TO_EDGE:j,B=e.wrapT,U=B===void 0?rt.gl.CLAMP_TO_EDGE:B,q=e.aniso,$=q===void 0?0:q,ve=e.alignment,de=ve===void 0?1:ve,me=e.premultiplyAlpha,Te=me!==void 0&&me,Oe=e.mag,Pe=Oe===void 0?rt.gl.NEAREST:Oe,Ze=e.min,nt=Ze===void 0?rt.gl.NEAREST:Ze,ct=e.colorSpace,st=ct===void 0?rt.gl.BROWSER_DEFAULT_WEBGL:ct;this.width=s,this.height=u;var It={width:s,height:u,type:zu[a],format:Kv[k],wrapS:Af[F],wrapT:Af[U],mag:kf[Pe],min:kf[nt],alignment:de,flipY:h,colorSpace:$v[st],premultiplyAlpha:Te,aniso:$};r&&(It.data=r),typeof I=="number"?It.mipmap=Zv[I]:typeof I=="boolean"&&(It.mipmap=I),this.texture=t.texture(It)}return dn()(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,r=t.height;this.texture.resize(e,r),this.width=e,this.height=r}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),c0=Object(Ar.injectable)()(Nf=function(){function n(){var e=this;hn()(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=ti()(Hr.a.mark(function i(a){return Hr.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!a.uniforms){s.next=3;break}return s.next=3,Promise.all(Object.keys(a.uniforms).map(function(){var u=ti()(Hr.a.mark(function l(h){var v;return Hr.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!a.uniforms[h]||a.uniforms[h].load===void 0){k.next=5;break}return k.next=3,a.uniforms[h].load();case 3:v=k.sent,a.uniforms[h]=v;case 5:case"end":return k.stop()}},l)}));return function(l){return u.apply(this,arguments)}}()));case 3:return s.abrupt("return",new s0(e.gl,a));case 4:case"end":return s.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new Hv(e.gl,r)},this.createBuffer=function(r){return new t0(e.gl,r)},this.createElements=function(r){return new o0(e.gl,r)},this.createTexture2D=function(r){return new u0(e.gl,r)},this.createFramebuffer=function(r){return new a0(e.gl,r)},this.useFramebuffer=function(r,i){e.gl({framebuffer:r?r.get():null})(i)},this.createComputeModel=function(){var r=ti()(Hr.a.mark(function i(a){return Hr.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new i0(e.gl,a));case 1:case"end":return s.stop()}},i)}));return function(i){return r.apply(this,arguments)}}(),this.clear=function(r){var i=r.color,a=r.depth,s=r.stencil,u=r.framebuffer,l=u===void 0?null:u,h={color:i,depth:a,stencil:s};h.framebuffer=l===null?l:l.get(),e.gl.clear(h)},this.setScissor=function(r){e.gl&&e.gl._gl&&(r.enable&&r.box?(e.gl._gl.enable(rt.gl.SCISSOR_TEST),e.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):e.gl._gl.disable(rt.gl.SCISSOR_TEST),e.gl._refresh())},this.viewport=function(r){var i=r.x,a=r.y,s=r.width,u=r.height;e.gl&&e.gl._gl&&(e.gl._gl.viewport(i,a,s,u),e.gl._refresh())},this.readPixels=function(r){var i=r.framebuffer,a={x:r.x,y:r.y,width:r.width,height:r.height};return i&&(a.framebuffer=i.get()),e.gl.read(a)},this.getCanvas=function(){return e.$canvas},this.getGLContext=function(){return e.gl._gl},this.destroy=function(){e.gl&&(e.gl.destroy(),e.inited=!1)}}var t;return dn()(n,[{key:"init",value:(t=ti()(Hr.a.mark(function e(r){return Hr.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.inited){i.next=2;break}return i.abrupt("return");case 2:return this.$canvas=r.canvas,i.next=5,new Promise(function(a,s){Yv()({canvas:r.canvas,attributes:{alpha:!0,antialias:r.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(u,l){!u&&l||s(u),a(l)}})});case 5:this.gl=i.sent,this.inited=!0;case 7:case"end":return i.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}())||Nf;function l0(n,t,e,r){if(typeof window!="undefined"){var i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",n),r&&(a.id=r),a.onload=function(){t&&t()},a.onerror=function(s){e&&e("Unable to load script '".concat(n,"'"),s)},i.appendChild(a)}}function f0(n,t){return new Promise(function(e,r){l0(n,function(){e()},function(i,a){r(a)})})}var h0=function(){return Df.apply(this,arguments)};function Df(){return(Df=ti()(Hr.a.mark(function n(){return Hr.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ds){t.next=2;break}return t.abrupt("return",Ds);case 2:return t.next=4,f0("https://preview.babylonjs.com/glslang/glslang.js");case 4:return Ds=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),t.abrupt("return",Ds);case 6:case"end":return t.stop()}},n)}))).apply(this,arguments)}var d0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.attribute=void 0,this.buffer=void 0;var r=e,i=r.buffer,a=r.offset,s=r.stride,u=r.normalized,l=r.size,h=r.divisor,v=r.arrayStride,k=r.attributes,T=r.stepMode;this.buffer=i,this.attribute={buffer:i.get(),offset:a||0,stride:s||0,normalized:u||!1,divisor:h||0,arrayStride:v||0,attributes:k,stepMode:T||"vertex"},l&&(this.attribute.size=l)}return dn()(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Oa=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.buffer=void 0;var r=e,i=r.data,a=r.usage;r.type,this.buffer=this.createBuffer(i instanceof Array?new Float32Array(i):i,a||Jt.BufferUsage.Vertex|Jt.BufferUsage.CopyDst)}return dn()(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,r=t.offset;this.setSubData(this.buffer,r,e instanceof Array?new Float32Array(e):e)}},{key:"createBuffer",value:function(t,e){var r=t.byteLength%4,i={size:t.byteLength+r,usage:e},a=this.engine.device.createBuffer(i);return this.setSubData(a,0,t),a}},{key:"setSubData",value:function(t,e,r){(rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).writeBuffer(t,e,r)}}]),n}(),Uo,jo,la,qi,Ma,Rs,Ja,p0=function(){function n(i,a){hn()(this,n),this.engine=i,this.context=a,this.entity=Object(rt.createEntity)(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}var t,e,r;return dn()(n,[{key:"init",value:(r=ti()(Hr.a.mark(function i(){var a,s,u,l,h,v,k,T=this;return Hr.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:a=I.sent,s=a.computeStage,u=this.context.uniforms.filter(function(j){return j.storageClass===rt.STORAGE_CLASS.StorageBuffer}),l=this.context.uniforms.filter(function(j){return j.storageClass===rt.STORAGE_CLASS.Uniform}),h=l.length?1:0,this.bindGroupEntries=[],h&&(v=0,k=[],l.forEach(function(j){if(typeof j.data=="number")T.uniformGPUBufferLayout.push({name:j.name,offset:v}),v+=4,k.push(j.data);else{var F,B=((F=j.data)===null||F===void 0?void 0:F.length)||1;B===3&&(B=4,j.data.push(0));var U=v/4%4;if(U>0){var q=4-U;if(B>1&&B<=q)B===2&&(q===3&&(v+=4,k.push(0)),k.push.apply(k,ui()(j.data)),T.uniformGPUBufferLayout.push({name:j.name,offset:v}));else{for(var $=0;$<q;$++)v+=4,k.push(0);k.push.apply(k,ui()(j.data)),T.uniformGPUBufferLayout.push({name:j.name,offset:v})}}v+=4*B}}),this.uniformBuffer=new Oa(this.engine,{data:k instanceof Array?new Float32Array(k):k,usage:Jt.BufferUsage.Uniform|Jt.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),u.forEach(function(j){var F;j.data!==null&&(j.type!==rt.AST_TOKEN_TYPES.Vector4FloatArray&&j.type!==rt.AST_TOKEN_TYPES.FloatArray||(j.name===T.context.output.name?(F=new Oa(T.engine,{data:isFinite(Number(j.data))?[j.data]:j.data,usage:Jt.BufferUsage.Storage|Jt.BufferUsage.CopyDst|Jt.BufferUsage.CopySrc}),T.outputBuffer=F,T.context.output={name:j.name,length:isFinite(Number(j.data))?1:j.data.length,typedArrayConstructor:Float32Array,gpuBuffer:F.get()}):j.isReferer?j.data.model&&j.data.model.outputBuffer&&(F=j.data.model.outputBuffer):F=new Oa(T.engine,{data:isFinite(Number(j.data))?[j.data]:j.data,usage:Jt.BufferUsage.Storage|Jt.BufferUsage.CopyDst|Jt.BufferUsage.CopySrc}),T.vertexBuffers[j.name]=F,T.bindGroupEntries.push({binding:h,resource:{name:j.name,refer:F?void 0:j.data,buffer:F?F.get():void 0}}),h++))}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:s}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return I.stop()}},i,this)})),function(){return r.apply(this,arguments)})},{key:"destroy",value:function(){var i=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(a){return i.vertexBuffers[a].destroy()})}},{key:"readData",value:(e=ti()(Hr.a.mark(function i(){var a,s,u,l,h,v,k,T,I;return Hr.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(a=this.context.output)){j.next=16;break}if(s=a.length,u=a.typedArrayConstructor,!(l=a.gpuBuffer)){j.next=16;break}return h=s*u.BYTES_PER_ELEMENT,v=this.engine.device.createBuffer({size:h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(k=this.engine.device.createCommandEncoder()).copyBufferToBuffer(l,0,v,0,h),(rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([k.finish()]),j.next=12,v.mapAsync(Jt.MapMode.Read);case 12:return T=v.getMappedRange(),I=new u(T.slice(0)),v.unmap(),j.abrupt("return",I);case 16:return j.abrupt("return",new Float32Array);case 17:case"end":return j.stop()}},i,this)})),function(){return e.apply(this,arguments)})},{key:"run",value:function(){var i;this.engine.currentComputePass&&(this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(i=this.engine.currentComputePass).dispatch.apply(i,ui()(this.context.dispatch)))}},{key:"updateBuffer",value:function(i,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.vertexBuffers[i];u&&u.subData({data:a,offset:s})}},{key:"updateUniform",value:function(i,a){var s=this.uniformGPUBufferLayout.find(function(u){return u.name===i});s&&this.uniformBuffer.subData({data:Number.isFinite(a)?new Float32Array([a]):new Float32Array(a),offset:s.offset})}},{key:"confirmInput",value:function(i,a){var s=this.vertexBuffers[a],u=i.outputBuffer;if(s&&u&&s!==u){var l=this.engine.device.createCommandEncoder(),h=i.context.output,v=h.length*h.typedArrayConstructor.BYTES_PER_ELEMENT;l.copyBufferToBuffer(u.get(),0,s.get(),0,v),(rt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue).submit([l.finish()])}}},{key:"compileShaderToSpirV",value:function(i,a,s){return this.compileRawShaderToSpirV(s+i,a)}},{key:"compileRawShaderToSpirV",value:function(i,a){return this.engine.glslang.compileGLSL(i,a)}},{key:"compileComputePipelineStageDescriptor",value:(t=ti()(Hr.a.mark(function i(a){var s;return Hr.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=a,this.engine.options.useWGSL){u.next=6;break}return u.next=5,this.compileShaderToSpirV(a,"compute",`#version 450
`);case 5:s=u.sent;case 6:return u.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:s,isWHLSL:rt.isSafari}),entryPoint:"main"}});case 7:case"end":return u.stop()}},i,this)})),function(i){return t.apply(this,arguments)})}]),n}(),g0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.indexCount=void 0,this.buffer=void 0;var r=e,i=r.data,a=(r.usage,r.type,r.count);this.indexCount=a||0,this.buffer=new Oa(t,{data:i instanceof Array?new Uint16Array(i):i,usage:Jt.BufferUsage.Index|Jt.BufferUsage.CopyDst})}return dn()(n,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),v0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var r=e,i=(r.width,r.height,r.color),a=(r.colors,r.depth);r.stencil,i&&(this.colorTexture=i),a&&(this.depthTexture=a)}return dn()(n,[{key:"get",value:function(){var t,e;return{color:(t=this.colorTexture)===null||t===void 0?void 0:t.get(),depth:(e=this.depthTexture)===null||e===void 0?void 0:e.get()}}},{key:"destroy",value:function(){var t,e;(t=this.colorTexture)===null||t===void 0||t.destroy(),(e=this.depthTexture)===null||e===void 0||e.destroy()}},{key:"resize",value:function(t){var e,r,i=t.width,a=t.height;i===this.width&&a===this.height||((e=this.colorTexture)===null||e===void 0||e.resize({width:i,height:a}),(r=this.depthTexture)===null||r===void 0||r.resize({width:i,height:a})),this.width=i,this.height=a}}]),n}(),y0=(Uo={},Yt()(Uo,rt.gl.POINTS,Jt.PrimitiveTopology.PointList),Yt()(Uo,rt.gl.LINES,Jt.PrimitiveTopology.LineList),Yt()(Uo,rt.gl.LINE_LOOP,Jt.PrimitiveTopology.LineList),Yt()(Uo,rt.gl.LINE_STRIP,Jt.PrimitiveTopology.LineStrip),Yt()(Uo,rt.gl.TRIANGLES,Jt.PrimitiveTopology.TriangleList),Yt()(Uo,rt.gl.TRIANGLE_FAN,Jt.PrimitiveTopology.TriangleList),Yt()(Uo,rt.gl.TRIANGLE_STRIP,Jt.PrimitiveTopology.TriangleStrip),Uo),m0=(jo={},Yt()(jo,rt.gl.NEVER,Jt.CompareFunction.Never),Yt()(jo,rt.gl.ALWAYS,Jt.CompareFunction.Always),Yt()(jo,rt.gl.LESS,Jt.CompareFunction.Less),Yt()(jo,rt.gl.LEQUAL,Jt.CompareFunction.LessEqual),Yt()(jo,rt.gl.GREATER,Jt.CompareFunction.Greater),Yt()(jo,rt.gl.GEQUAL,Jt.CompareFunction.GreaterEqual),Yt()(jo,rt.gl.EQUAL,Jt.CompareFunction.Equal),Yt()(jo,rt.gl.NOTEQUAL,Jt.CompareFunction.NotEqual),jo),Rf=(la={},Yt()(la,rt.gl.FUNC_ADD,Jt.BlendOperation.Add),Yt()(la,rt.gl.MIN_EXT,Jt.BlendOperation.Min),Yt()(la,rt.gl.MAX_EXT,Jt.BlendOperation.Max),Yt()(la,rt.gl.FUNC_SUBTRACT,Jt.BlendOperation.Subtract),Yt()(la,rt.gl.FUNC_REVERSE_SUBTRACT,Jt.BlendOperation.ReverseSubtract),la),Ls=(qi={},Yt()(qi,rt.gl.ZERO,Jt.BlendFactor.Zero),Yt()(qi,rt.gl.ONE,Jt.BlendFactor.One),Yt()(qi,rt.gl.SRC_COLOR,Jt.BlendFactor.SrcColor),Yt()(qi,rt.gl.ONE_MINUS_SRC_COLOR,Jt.BlendFactor.OneMinusSrcColor),Yt()(qi,rt.gl.SRC_ALPHA,Jt.BlendFactor.SrcAlpha),Yt()(qi,rt.gl.ONE_MINUS_SRC_ALPHA,Jt.BlendFactor.OneMinusSrcAlpha),Yt()(qi,rt.gl.DST_COLOR,Jt.BlendFactor.DstColor),Yt()(qi,rt.gl.ONE_MINUS_DST_COLOR,Jt.BlendFactor.OneMinusDstColor),Yt()(qi,rt.gl.DST_ALPHA,Jt.BlendFactor.DstAlpha),Yt()(qi,rt.gl.ONE_MINUS_DST_ALPHA,Jt.BlendFactor.OneMinusDstAlpha),Yt()(qi,rt.gl.CONSTANT_COLOR,Jt.BlendFactor.BlendColor),Yt()(qi,rt.gl.ONE_MINUS_CONSTANT_COLOR,Jt.BlendFactor.OneMinusBlendColor),Yt()(qi,rt.gl.SRC_ALPHA_SATURATE,Jt.BlendFactor.SrcAlphaSaturated),qi),b0=(Ma={},Yt()(Ma,rt.gl.ALPHA,"r8unorm"),Yt()(Ma,rt.gl.RGBA,"rgba8unorm"),Yt()(Ma,rt.gl.DEPTH_COMPONENT,"depth32float"),Yt()(Ma,rt.gl.DEPTH_STENCIL,"depth24plus-stencil8"),Ma),Lf=(Rs={},Yt()(Rs,rt.gl.NEAREST,"nearest"),Yt()(Rs,rt.gl.LINEAR,"linear"),Rs),Vu=(Ja={},Yt()(Ja,rt.gl.REPEAT,"repeat"),Yt()(Ja,rt.gl.CLAMP_TO_EDGE,"clamp-to-edge"),Yt()(Ja,rt.gl.MIRRORED_REPEAT,"mirror-repeat"),Ja);function x0(n){var t=n.cull;return t&&t.enable?t.face?t.face===rt.gl.FRONT?Jt.CullMode.Front:Jt.CullMode.Back:void 0:Jt.CullMode.None}function w0(n){var t=n.depth,e=(n.stencil,{compare:Jt.CompareFunction.Always,depthFailOp:Jt.StencilOperation.Keep,failOp:Jt.StencilOperation.Keep,passOp:Jt.StencilOperation.Keep});return{depthWriteEnabled:t&&t.enable,depthCompare:m0[(t==null?void 0:t.func)||rt.gl.ALWAYS],format:Jt.TextureFormat.Depth24PlusStencil8,stencilFront:e,stencilBack:e,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function _0(n,t){var e=n.blend;return[{format:t,alphaBlend:{srcFactor:Ls[e&&e.func&&e.func.srcAlpha||rt.gl.ONE],dstFactor:Ls[e&&e.func&&e.func.dstAlpha||rt.gl.ZERO],operation:Rf[e&&e.equation&&e.equation.alpha||rt.gl.FUNC_ADD]},colorBlend:{srcFactor:Ls[e&&e.func&&e.func.srcRGB||rt.gl.ONE],dstFactor:Ls[e&&e.func&&e.func.dstRGB||rt.gl.ZERO],operation:Rf[e&&e.equation&&e.equation.rgb||rt.gl.FUNC_ADD]},writeMask:Jt.ColorWrite.All}]}function Bf(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function ka(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Bf(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Bf(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function S0(n){for(var t=0,e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var a=0,s=r;a<s.length;a++){var u=s[a];t+=u.length}for(var l=new n(t),h=0,v=0,k=r;v<k.length;v++){var T=k[v];l.set(T,h),h+=T.length}return l}var Gf,Ff,E0=function(){function n(r,i){hn()(this,n),this.engine=r,this.options=i,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}var t,e;return dn()(n,[{key:"init",value:(e=ti()(Hr.a.mark(function r(){var i,a,s,u,l,h,v,k,T,I,j,F,B,U,q,$,ve=this;return Hr.a.wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return i=this.options,a=i.vs,s=i.fs,u=i.attributes,l=i.uniforms,h=i.primitive,i.count,v=i.elements,k=i.depth,T=i.blend,I=i.stencil,j=i.cull,i.instances,de.next=3,this.compilePipelineStageDescriptor(a,s,null);case 3:F=de.sent,B=F.vertexStage,U=F.fragmentStage,l&&this.buildUniformBindGroup(l),v&&(this.indexBuffer=v.get(),this.indexCount=v.indexCount),q={vertexBuffers:Object.keys(u).map(function(me,Te){var Oe=u[me],Pe=Oe.get(),Ze=Pe.arrayStride,nt=Pe.stepMode,ct=Pe.attributes;return ve.attributeCache[me]=Oe,{arrayStride:Ze,stepMode:nt,attributes:ct}})},$={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:y0[h||rt.gl.TRIANGLES],rasterizationState:ka(ka({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:x0({cull:j})}),depthStencilState:w0({depth:k,stencil:I}),colorStates:_0({blend:T},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:B,fragmentStage:U,vertexState:q},this.renderPipeline=this.engine.device.createRenderPipeline($);case 11:case"end":return de.stop()}},r,this)})),function(){return e.apply(this,arguments)})},{key:"addUniforms",value:function(r){this.uniforms=ka(ka({},this.uniforms),Qa(r))}},{key:"draw",value:function(r){var i=this,a=this.engine.getCurrentRenderPass(),s=ka(ka({},this.uniforms),Qa(r.uniforms||{})),u=[];Object.keys(s).forEach(function(l){var h=qa()(s[l]);if(h==="boolean"||h==="number"||Array.isArray(s[l])||s[l].BYTES_PER_ELEMENT){var v,k=(v=i.uniformGPUBufferLayout.find(function(q){return q.name===l}))===null||v===void 0?void 0:v.offset;k!==null&&i.uniformBuffer.subData({data:s[l],offset:k})}else{var T,I=(T=i.uniformGPUBufferLayout.find(function(q){return q.name===l}))===null||T===void 0?void 0:T.offset;if(I!==null){var j=s[l].get(),F=j.color||j,B=F.texture,U=F.sampler;U&&(u.push({binding:I,resource:U}),I++),u.push({binding:I,resource:B.createView()})}}}),this.uniformBuffer&&(u[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:u}),this.renderPipeline&&a.setPipeline(this.renderPipeline),a.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&a.setIndexBuffer(this.indexBuffer.get(),Jt.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(l,h){a.setVertexBuffer(0+h,i.attributeCache[l].get().buffer,0)}),this.indexBuffer?a.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):a.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:(t=ti()(Hr.a.mark(function r(i,a,s){var u,l,h;return Hr.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(u=`#version 450
`,l=i,h=a,this.engine.options.useWGSL){v.next=10;break}return v.next=6,this.compileShaderToSpirV(i,"vertex",u);case 6:return l=v.sent,v.next=9,this.compileShaderToSpirV(a,"fragment",u);case 9:h=v.sent;case 10:return v.abrupt("return",this.createPipelineStageDescriptor(l,h));case 11:case"end":return v.stop()}},r,this)})),function(r,i,a){return t.apply(this,arguments)})},{key:"compileShaderToSpirV",value:function(r,i,a){return this.compileRawShaderToSpirV(a+r,i)}},{key:"compileRawShaderToSpirV",value:function(r,i){return this.engine.glslang.compileGLSL(r,i)}},{key:"createPipelineStageDescriptor",value:function(r,i){return{vertexStage:{module:this.engine.device.createShaderModule({code:r,isWHLSL:rt.isSafari}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:i,isWHLSL:rt.isSafari}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Jt.FrontFace.CCW,cullMode:Jt.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(r){var i=this,a=0,s=S0.apply(void 0,[Float32Array].concat(ui()(Object.keys(r).map(function(h){return r[h]?(i.uniformGPUBufferLayout.push({name:h,offset:a}),a+=4*(r[h].length||1),r[h]):[]})))),u=[],l=!1;s.length&&(l=!0,u.push({binding:0,visibility:Jt.ShaderStage.Fragment|Jt.ShaderStage.Vertex,type:Jt.BindingType.UniformBuffer})),Object.keys(r).filter(function(h){return r[h]===null}).forEach(function(h,v){i.uniformGPUBufferLayout.push({name:h,offset:2*v+(l?1:0)}),u.push({binding:2*v+(l?1:0),visibility:Jt.ShaderStage.Fragment,type:Jt.BindingType.Sampler},{binding:2*v+(l?1:0)+1,visibility:Jt.ShaderStage.Fragment,type:Jt.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:u}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),l&&(this.uniformBuffer=new Oa(this.engine,{data:s instanceof Array?new Float32Array(s):s,usage:Jt.BufferUsage.Uniform|Jt.BufferUsage.CopyDst}))}}]),n}(),O0=function(){function n(t,e){hn()(this,n),this.engine=t,this.options=e,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return dn()(n,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(t){var e=t.width,r=t.height;e===this.width&&r===this.height||(this.destroy(),this.createTexture()),this.width=e,this.height=r}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var t=this.options,e=(t.data,t.type),r=(e===void 0&&rt.gl.UNSIGNED_BYTE,t.width),i=t.height,a=(t.flipY,t.format),s=a===void 0?rt.gl.RGBA:a,u=(t.mipmap,t.wrapS),l=u===void 0?rt.gl.CLAMP_TO_EDGE:u,h=t.wrapT,v=h===void 0?rt.gl.CLAMP_TO_EDGE:h,k=t.aniso,T=k===void 0?0:k,I=(t.alignment,t.premultiplyAlpha,t.mag),j=I===void 0?rt.gl.NEAREST:I,F=t.min,B=F===void 0?rt.gl.NEAREST:F,U=t.colorSpace,q=(U===void 0&&rt.gl.BROWSER_DEFAULT_WEBGL,t.usage);this.width=r,this.height=i,this.texture=this.engine.device.createTexture({size:[r,i,1],mipLevelCount:1,sampleCount:1,dimension:Jt.TextureDimension.E2d,format:b0[s],usage:q||Jt.TextureUsage.Sampled|Jt.TextureUsage.CopyDst}),(!q||q&Jt.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:Vu[l],addressModeV:Vu[v],addressModeW:Vu[l],magFilter:Lf[j],minFilter:Lf[B],maxAnisotropy:T}))}}]),n}(),M0=Object(Ar.injectable)()(Gf=function(){function n(){var r=this;hn()(this,n),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:1/0,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(i){i.framebuffer;var a=i.color,s=i.depth,u=i.stencil;r.options.supportCompute&&r.startComputePass(),r.currentRenderTarget?(r.currentRenderPass&&r.endRenderTargetRenderPass(),r.startRenderTargetRenderPass(r.currentRenderTarget,a||null,!!s,!!u)):(r.mainColorAttachments[0].loadValue=a||Jt.LoadOp.Load,r.mainDepthAttachment.depthLoadValue=s||Jt.LoadOp.Load,r.mainDepthAttachment.stencilLoadValue=u?r.clearStencilValue:Jt.LoadOp.Load,r.mainRenderPass&&r.endMainRenderPass(),r.startMainRenderPass())},this.createModel=function(){var i=ti()(Hr.a.mark(function a(s){var u;return Hr.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=new E0(r,s),l.next=3,u.init();case 3:return l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),this.createAttribute=function(i){return new d0(r,i)},this.createBuffer=function(i){return new Oa(r,i)},this.createElements=function(i){return new g0(r,i)},this.createTexture2D=function(i){return new O0(r,i)},this.createFramebuffer=function(i){return new v0(r,i)},this.useFramebuffer=function(i,a){r.currentRenderTarget&&r.unbindFramebuffer(r.currentRenderTarget),r.currentRenderTarget=i,r.currentRenderTargetViewDescriptor={dimension:Jt.TextureViewDimension.E2d,arrayLayerCount:1,aspect:Jt.TextureAspect.All},r.currentRenderPass=null,a()},this.createComputeModel=function(){var i=ti()(Hr.a.mark(function a(s){var u;return Hr.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u=new p0(r,s),l.next=3,u.init();case 3:return l.abrupt("return",u);case 4:case"end":return l.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),this.getCanvas=function(){return r.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(i){var a=i.x,s=i.y,u=i.width,l=i.height;r.currentRenderPass?r.transientViewport.x!==1/0?r.getCurrentRenderPass().setViewport(r.transientViewport.x,r.transientViewport.y,r.transientViewport.width,r.transientViewport.height,0,1):(a!==r.cachedViewport.x||s!==r.cachedViewport.y||u!==r.cachedViewport.width||l!==r.cachedViewport.height)&&(r.cachedViewport={x:a,y:s,width:u,height:l},r.getCurrentRenderPass().setViewport(a,s,u,l,0,1)):r.transientViewport={x:a,y:s,width:u,height:l}},this.readPixels=function(i){throw new Error("Method not implemented.")}}var t,e;return dn()(n,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:(e=ti()(Hr.a.mark(function r(i){return Hr.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.canvas=i.canvas,this.options=i,this.useWGSL=!!i.useWGSL,this.mainPassSampleCount=i.antialiasing?this.defaultSampleCount:1,a.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return a.stop()}},r,this)})),function(r){return e.apply(this,arguments)})},{key:"setScissor",value:function(r){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(r){return r.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),rt.isSafari?this.device.getQueue().submit(this.commandBuffers.filter(function(r){return r})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(r){return r}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:(t=ti()(Hr.a.mark(function r(){var i,a;return Hr.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h0();case 2:return this.glslang=s.sent,s.next=5,(i=navigator)===null||i===void 0||(a=i.gpu)===null||a===void 0?void 0:a.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},r,this)})),function(){return t.apply(this,arguments)})},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(rt.isSafari?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Jt.TextureUsage.OutputAttachment|Jt.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var r={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Jt.TextureDimension.E2d,format:Jt.TextureFormat.BGRA8Unorm,usage:Jt.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(r),this.mainColorAttachments=[{attachment:rt.isSafari?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Jt.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Jt.StoreOp.Store}];var i={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Jt.TextureDimension.E2d,format:rt.isSafari?"depth32float-stencil8":Jt.TextureFormat.Depth24PlusStencil8,usage:Jt.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(i),this.mainDepthAttachment={attachment:rt.isSafari?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Jt.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Jt.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=rt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(r,i,a){var s,u,l,h=arguments.length>3&&arguments[3]!==void 0&&arguments[3],v=(s=r.get().color)===null||s===void 0?void 0:s.texture;v&&(l=v.createView(this.currentRenderTargetViewDescriptor));var k,T=(u=r.get().depth)===null||u===void 0?void 0:u.texture;T&&(k=T.createView());var I=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:l,loadValue:i!==null?i:Jt.LoadOp.Load,storeOp:Jt.StoreOp.Store}],depthStencilAttachment:T&&k?{attachment:k,depthLoadValue:a?this.clearDepthValue:Jt.LoadOp.Load,depthStoreOp:Jt.StoreOp.Store,stencilLoadValue:h?this.clearStencilValue:Jt.LoadOp.Load,stencilStoreOp:Jt.StoreOp.Store}:void 0});this.currentRenderPass=I,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(r){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=1/0,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),n}())||Gf,k0=o(59),A0=o.n(k0),C0=o(23),$o=o.n(C0),T0=o(24),Qo=o.n(T0),I0=o(18),Li=o.n(I0);function j0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var zf,P0=Object(Ar.injectable)()(Ff=function(n){$o()(e,n);var t=j0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){var r=this.config,i=r.widthSegments,a=i===void 0?1:i,s=r.heightSegments,u=s===void 0?1:s,l=r.depthSegments,h=l===void 0?1:l,v=r.halfExtents,k=v===void 0?Nt.e.fromValues(.5,.5,.5):v,T=a,I=u,j=h,F=A0()(k,3),B=F[0],U=F[1],q=F[2],$=[Nt.e.fromValues(-B,-U,q),Nt.e.fromValues(B,-U,q),Nt.e.fromValues(B,U,q),Nt.e.fromValues(-B,U,q),Nt.e.fromValues(B,-U,-q),Nt.e.fromValues(-B,-U,-q),Nt.e.fromValues(-B,U,-q),Nt.e.fromValues(B,U,-q)],ve=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],de=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],me=1,Te=2,Oe=3,Pe=4,Ze=5,nt=[],ct=[],st=[],It=[],gt=[],Pt=0,Rt=function(Vt,Dt,qt){var $t,Gt,lr,Lr;for(lr=0;lr<=Dt;lr++)for(Lr=0;Lr<=qt;Lr++){var wn=Nt.e.create(),Sr=Nt.e.create(),jr=Nt.e.create(),_r=Nt.e.create();Nt.e.lerp(wn,$[ve[Vt][0]],$[ve[Vt][1]],lr/Dt),Nt.e.lerp(Sr,$[ve[Vt][0]],$[ve[Vt][2]],Lr/qt),Nt.e.sub(jr,Sr,$[ve[Vt][0]]),Nt.e.add(_r,wn,jr),$t=lr/Dt,Gt=Lr/qt,nt.push(_r[0],_r[1],_r[2]),ct.push(de[Vt][0],de[Vt][1],de[Vt][2]),st.push($t,Gt),$t=.875*($t/=3)+4/64,Gt=.875*(Gt/=3)+4/64,$t+=Vt%3/3,Gt+=Math.floor(Vt/3)/3,It.push($t,Gt),lr<Dt&&Lr<qt&&(gt.push(Pt+qt+1,Pt+1,Pt),gt.push(Pt+qt+1,Pt+qt+2,Pt+1)),Pt++}};Rt(0,T,I),Rt(me,T,I),Rt(Te,T,j),Rt(Oe,T,j),Rt(Pe,j,I),Rt(Ze,j,I);var Zt=Object(rt.generateAABBFromVertices)(nt),kt=this.getComponent();kt.indices=Uint32Array.from(gt),kt.aabb=Zt,kt.vertexCount=Pt,kt.attributes=[{dirty:!0,name:"position",data:Float32Array.from(nt),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(ct),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(st),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(qo))||Ff;function N0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Uf,D0=Object(Ar.injectable)()(zf=function(n){$o()(e,n);var t=N0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){var r=this.config.geometries,i=r===void 0?[]:r,a=this.getComponent();a.aabb=new rt.AABB;var s=[],u=[],l=0;i.forEach(function(h){var v=h.aabb,k=h.indices,T=h.vertexCount,I=h.attributes;a.aabb.add(v),a.vertexCount+=T,k&&u.push.apply(u,ui()(k.map(function(j){return j+l}))),l+=T,I.forEach(function(j,F){s[F]?j.data&&(Lu(j.data)?s[F].push(j.data):rf(j.data)?s[F].data=function(B,U){if(!B&&!U)throw new Error("Please specify valid arguments for parameters a and b.");if(!U||U.length===0)return B;if(!B||B.length===0)return U;if(Object.prototype.toString.call(B)!==Object.prototype.toString.call(U))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var q=new B.constructor(B.length+U.length);return q.set(B),q.set(U,B.length),q}(s[F].data,j.data):s[F].data=s[F].data.concat(j.data)):(s[F]=j,s[F].dirty=!0)})}),a.attributes=s,a.indices=Uint32Array.from(u),a.dirty=!0}}]),e}(qo))||zf;function R0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Vf,L0=Object(Ar.injectable)()(Uf=function(n){$o()(e,n);var t=R0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){for(var r=this.config,i=r.halfExtents,a=i===void 0?[.5,.5]:i,s=r.widthSegments,u=s===void 0?5:s,l=r.lengthSegments,h=l===void 0?5:l,v=[],k=[],T=[],I=[],j=0,F=0;F<=u;F++)for(var B=0;B<=h;B++){var U=-a[0]+2*a[0]*F/u,q=-(-a[1]+2*a[1]*B/h),$=F/u,ve=B/h;v.push(U,0,q),k.push(0,1,0),T.push($,ve),F<u&&B<h&&(I.push(j+h+1,j+1,j),I.push(j+h+1,j+h+2,j+1)),j++}var de=Object(rt.generateAABBFromVertices)(v),me=this.getComponent();me.indices=Uint32Array.from(I),me.aabb=de,me.vertexCount=j,me.attributes=[{dirty:!0,name:"position",data:Float32Array.from(v),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(k),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(T),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(qo))||Uf;function B0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Wf,Xf,Yf,Hf,Bs,qf,Kf,G0=Object(Ar.injectable)()(Vf=function(n){$o()(e,n);var t=B0(e);function e(){return hn()(this,e),t.apply(this,arguments)}return dn()(e,[{key:"onEntityCreated",value:function(){for(var r=this.config,i=r.radius,a=i===void 0?.5:i,s=r.latitudeBands,u=s===void 0?16:s,l=r.longitudeBands,h=l===void 0?16:l,v=[],k=[],T=[],I=[],j=0;j<=u;j++)for(var F=j*Math.PI/u,B=Math.sin(F),U=Math.cos(F),q=0;q<=h;q++){var $=2*q*Math.PI/h-Math.PI/2,ve=Math.sin($),de=Math.cos($)*B,me=U,Te=ve*B,Oe=1-q/h,Pe=1-j/u;v.push(de*a,me*a,Te*a),k.push(de,me,Te),T.push(Oe,Pe)}for(var Ze=0;Ze<u;++Ze)for(var nt=0;nt<h;++nt){var ct=Ze*(h+1)+nt,st=ct+h+1;I.push(ct+1,st,ct),I.push(ct+1,st+1,st)}var It=Object(rt.generateAABBFromVertices)(v),gt=this.getComponent();gt.indices=Uint32Array.from(I),gt.aabb=It,gt.vertexCount=v.length/3,gt.attributes=[{dirty:!0,name:"position",data:Float32Array.from(v),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(k),arrayStride:12,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(T),arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),e}(qo))||Vf,F0=o(22),bo=o.n(F0);function z0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var Zf,$f,Qf,Jf,eh,th,rh,es,nh,ih,oh,U0=(Wf=Object(Ar.injectable)(),Xf=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Yf=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),Wf((Bs=function(n){$o()(e,n);var t=z0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"engine",qf,bo()(r)),Pn()(r,"shaderModuleService",Kf,bo()(r)),r}return dn()(e,[{key:"onEntityCreated",value:function(){var r=this.getComponent(),i=this.engine.supportWebGPU?`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`:`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,a=this.engine.supportWebGPU?`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`:`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`;this.shaderModuleService.registerModule("material-basic",{vs:i,fs:a});var s=this.shaderModuleService.getModule("material-basic"),u=s.vs,l=s.fs,h=s.uniforms;r.vertexShaderGLSL=u,r.fragmentShaderGLSL=l,r.setUniform(h),this.config.map&&(r.setDefines({USE_UV:1,USE_MAP:1}),r.setUniform({map:this.config.map,uvTransform:Nt.a.create()}))}}]),e}(Of),qf=Nn()(Bs.prototype,"engine",[Xf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kf=Nn()(Bs.prototype,"shaderModuleService",[Yf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hf=Bs))||Hf);function V0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var W0=(Zf=Object(Ar.injectable)(),$f=Object(Ar.inject)(rt.IDENTIFIER.Systems),Qf=Object(Ar.named)(rt.IDENTIFIER.MaterialSystem),Jf=Object(Ar.inject)(rt.IDENTIFIER.Systems),eh=Object(Ar.named)(rt.IDENTIFIER.GeometrySystem),th=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),Zf((es=function(n){$o()(e,n);var t=V0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"materialSystem",nh,bo()(r)),Pn()(r,"geometrySystem",ih,bo()(r)),Pn()(r,"shaderModuleService",oh,bo()(r)),r}return dn()(e,[{key:"onAttributeChanged",value:function(r){var i=r.name,a=r.data,s=this.getMeshComponent();s&&s.material&&(i==="gridColor"?(s.material.setUniform("u_GridColor",a),s.material.setUniform("u_GridColor2",a)):i==="gridSize"&&(s.material.setUniform("u_GridSize",a),s.material.setUniform("u_GridSize2",a)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,fs:`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`});var r=this.shaderModuleService.getModule("grid"),i=r.vs,a=r.fs,s=r.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:i,fragmentShader:a});this.setMaterial(u);var l=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(l),u.setCull({enable:!1,face:rt.gl.BACK}).setDepth({enable:!0,func:rt.gl.LESS}),u.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),l.setIndex([0,3,2,2,1,0]),l.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),e}(Zo),nh=Nn()(es.prototype,"materialSystem",[$f,Qf],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ih=Nn()(es.prototype,"geometrySystem",[Jf,eh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oh=Nn()(es.prototype,"shaderModuleService",[th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rh=es))||rh),Gs=o(94),fa=o(61);function Fs(n,t,e,r,i){ts(t,r,-i),ts(t,r,i),n.push(e),n.push(e)}function ts(n,t,e){n.push([[t[0],t[1]],e])}var ah,sh,uh,ch,lh,fh,hh,rs,dh,ph,gh;function X0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var vh,yh,mh,bh,xh,wh,_h,ns,Sh,Eh,Oh,Y0=(ah=Object(Ar.injectable)(),sh=Object(Ar.inject)(rt.IDENTIFIER.Systems),uh=Object(Ar.named)(rt.IDENTIFIER.MaterialSystem),ch=Object(Ar.inject)(rt.IDENTIFIER.Systems),lh=Object(Ar.named)(rt.IDENTIFIER.GeometrySystem),fh=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),ah((rs=function(n){$o()(e,n);var t=X0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"materialSystem",dh,bo()(r)),Pn()(r,"geometrySystem",ph,bo()(r)),Pn()(r,"shaderModuleService",gh,bo()(r)),r.vertexCount=void 0,r}return dn()(e,[{key:"onAttributeChanged",value:function(r){var i=r.name,a=r.data,s=this.getMeshComponent();if(s&&s.material)switch(i){case"dashArray":s.material.setUniform("u_dash_array",a);break;case"dashOffset":s.material.setUniform("u_dash_offset",a);break;case"dashRatio":s.material.setUniform("u_dash_ratio",a);break;case"thickness":s.material.setUniform("u_thickness",a);break;case"color":var u=new Array(this.vertexCount).fill(void 0).map(function(){return a}).reduce(function(l,h){return[].concat(ui()(l),ui()(h))},[]);s.geometry.setAttribute("a_color",Float32Array.from(u),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]})}}},{key:"onEntityCreated",value:function(){var r=this;this.shaderModuleService.registerModule("line",{vs:`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,fs:`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`});var i=this.shaderModuleService.getModule("line"),a=i.vs,s=i.fs,u=i.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:s}),h=function($,ve,de){var me=[0,0],Te=[0,0],Oe=[0,0],Pe=[0,0],Ze=-1,nt=!1,ct=null,st=Object(Gs.create)(),It=de||0,gt=[],Pt=[],Rt=[],Zt=[0,0];ve&&($=$.slice()).push($[0]);for(var kt=$.length,Vt=1;Vt<kt;Vt++){var Dt=It,qt=$[Vt-1],$t=$[Vt],Gt=Vt<$.length-1?$[Vt+1]:null;if(Zt.push(Vt/kt,Vt/kt),Object(fa.direction)(me,$t,qt),ct||(ct=[0,0],Object(fa.normal)(ct,me)),nt||(nt=!0,Fs(Pt,gt,qt,ct,1)),Rt.push([Dt+0,Dt+1,Dt+2]),Gt){Object(fa.direction)(Te,Gt,$t);var lr=Object(fa.computeMiter)(Oe,Pe,me,Te,1),Lr=Object(Gs.dot)(Oe,ct)<0?-1:1,wn=lr>3;if(!isFinite(lr)){Object(fa.normal)(ct,me),Fs(Pt,gt,$t,ct,1),Rt.push(Ze===1?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),It+=2,Ze=Lr;continue}wn?(lr=3,Zt.push(Vt/kt),ts(gt,ct,-Lr),Pt.push($t),ts(gt,Pe,lr*Lr),Pt.push($t),Rt.push(Ze!==-Lr?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),Rt.push([Dt+2,Dt+3,Dt+4]),Object(fa.normal)(st,Te),Object(Gs.copy)(ct,st),ts(gt,ct,-Lr),Pt.push($t),It+=3):(Fs(Pt,gt,$t,Pe,lr),Rt.push(Ze===1?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),Lr=-1,Object(Gs.copy)(ct,Pe),It+=2),Ze=Lr}else Object(fa.normal)(ct,me),Fs(Pt,gt,$t,ct,1),Rt.push(Ze===1?[Dt,Dt+2,Dt+3]:[Dt+2,Dt+1,Dt+3]),It+=2}return{normals:gt,attrIndex:Rt,attrPos:Pt,attrCounters:Zt}}(this.config.points,!1),v=h.normals,k=h.attrIndex,T=h.attrPos,I=h.attrCounters,j=T.length;this.vertexCount=j;var F=this.geometrySystem.createBufferGeometry({vertexCount:j});this.setMaterial(l),this.setGeometry(F),l.setCull({enable:!1,face:rt.gl.BACK}).setUniform(u),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var B=[],U=[];v.forEach(function($){var ve=$[0],de=$[1];B.push([ve[0],ve[1]]),U.push(de)}),F.setIndex(k.reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[])),F.setAttribute("a_pos",Float32Array.from(T.reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var q=new Array(j).fill(void 0).map(function(){return ui()(r.config.color)}).reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[]);F.setAttribute("a_color",Float32Array.from(q),{arrayStride:16,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),F.setAttribute("a_line_miter",Float32Array.from(U),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),F.setAttribute("a_line_normal",Float32Array.from(B.reduce(function($,ve){return[].concat(ui()($),ui()(ve))},[])),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),F.setAttribute("a_counters",Float32Array.from(I),{arrayStride:4,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),e}(Zo),dh=Nn()(rs.prototype,"materialSystem",[sh,uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ph=Nn()(rs.prototype,"geometrySystem",[ch,lh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gh=Nn()(rs.prototype,"shaderModuleService",[fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hh=rs))||hh);function Mh(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function H0(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Li()(n);if(t){var i=Li()(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return Qo()(this,e)}}var kh,Ah,Ch,Th,Ih,is,jh,Ph,Nh,q0=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],K0=(vh=Object(Ar.injectable)(),yh=Object(Ar.inject)(rt.IDENTIFIER.Systems),mh=Object(Ar.named)(rt.IDENTIFIER.MaterialSystem),bh=Object(Ar.inject)(rt.IDENTIFIER.Systems),xh=Object(Ar.named)(rt.IDENTIFIER.GeometrySystem),wh=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),vh((ns=function(n){$o()(e,n);var t=H0(e);function e(){var r;hn()(this,e);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),Pn()(r,"materialSystem",Sh,bo()(r)),Pn()(r,"geometrySystem",Eh,bo()(r)),Pn()(r,"shaderModuleService",Oh,bo()(r)),r}return dn()(e,[{key:"onAttributeChanged",value:function(r){var i=r.name,a=r.data,s=this.getMeshComponent();s&&s.material&&(i==="strokeWidth"?s.material.setUniform("u_stroke_width",a):i==="strokeColor"?s.material.setUniform("u_stroke_color",a):i==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",a):i==="opacity"?s.material.setUniform("u_opacity",a):i==="blur"&&s.material.setUniform("u_blur",a))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,fs:`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`});var r=this.shaderModuleService.getModule("grid"),i=r.vs,a=r.fs,s=r.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:i,fragmentShader:a,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:rt.gl.SRC_ALPHA,dstRGB:rt.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});u.setUniform(function(v){for(var k=1;k<arguments.length;k++){var T=arguments[k]!=null?arguments[k]:{};k%2?Mh(Object(T),!0).forEach(function(I){Yt()(v,I,T[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(T)):Mh(Object(T)).forEach(function(I){Object.defineProperty(v,I,Object.getOwnPropertyDescriptor(T,I))})}return v}({u_device_pixel_ratio:window.devicePixelRatio},s));var l=this.buildAttributes(),h=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:l.instancedOffsets.length/2,vertexCount:6});h.setIndex([0,2,1,0,3,2]),h.setAttribute("position",Float32Array.from(l.positions),{arrayStride:8,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),h.setAttribute("offset",Float32Array.from(l.instancedOffsets),{arrayStride:8,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),h.setAttribute("color",Float32Array.from(l.instancedColors),{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),h.setAttribute("size",Float32Array.from(l.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),h.setAttribute("shape",Float32Array.from(l.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),h.setAttribute("a_PickingColor",Float32Array.from(l.instancedPickingColors),{arrayStride:12,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(u),this.setGeometry(h)}},{key:"buildAttribute",value:function(r,i,a){var s,u,l,h,v;(s=i.instancedPickingColors).push.apply(s,ui()([(v=r.id||a)+1&255,v+1>>8&255,v+1>>8>>8&255])),i.instancedShapes.push(q0.indexOf(r.shape||"circle")),(u=i.instancedColors).push.apply(u,ui()(r.color||[1,0,0,1])),(l=i.instancedOffsets).push.apply(l,ui()(r.position||[0,0])),(h=i.instancedSizes).push.apply(h,ui()(r.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var r=this,i={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(a,s){r.buildAttribute(a,i,s)}):this.buildAttribute(this.config,i,0),i}}]),e}(Zo),Sh=Nn()(ns.prototype,"materialSystem",[yh,mh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eh=Nn()(ns.prototype,"geometrySystem",[bh,xh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oh=Nn()(ns.prototype,"shaderModuleService",[wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_h=ns))||_h);function Dh(n,t){var e;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(e=function(l,h){if(!!l){if(typeof l=="string")return Rh(l,h);var v=Object.prototype.toString.call(l).slice(8,-1);if(v==="Object"&&l.constructor&&(v=l.constructor.name),v==="Map"||v==="Set")return Array.from(l);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return Rh(l,h)}}(n))||t&&n&&typeof n.length=="number"){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,u=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var l=e.next();return s=l.done,l},e:function(l){u=!0,a=l},f:function(){try{s||e.return==null||e.return()}finally{if(u)throw a}}}}function Rh(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var Lh,Bh,Gh,Fh,zh,Uh,zs,Vh,Wh,Xh=(kh=Object(Ar.injectable)(),Ah=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Ch=Object(Ar.inject)(rt.IDENTIFIER.ShaderModuleService),Th=Object(Ar.inject)(rt.IDENTIFIER.ConfigService),kh((is=function(){function n(){hn()(this,n),this.container=void 0,Pn()(this,"engine",jh,this),Pn()(this,"shaderModule",Ph,this),Pn()(this,"configService",Nh,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}var t,e;return dn()(n,[{key:"init",value:(e=ti()(Hr.a.mark(function r(){var i,a,s,u,l;return Hr.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`}),this.shaderModule.registerModule("uv.vert.main",{vs:`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`}),this.shaderModule.registerModule("uv.frag.declaration",{fs:`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`}),this.shaderModule.registerModule("map.frag.declaration",{fs:`#ifdef USE_MAP
  uniform sampler2D map;
#endif`}),this.shaderModule.registerModule("map.frag.main",{fs:`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`}),i=this.container.getAll(rt.IDENTIFIER.Systems),!(a=this.configService.get()).canvas){h.next=30;break}return h.next=11,this.engine.init({canvas:a.canvas,swapChainFormat:Jt.TextureFormat.BGRA8Unorm,antialiasing:!1});case 11:s=Dh(i),h.prev=12,s.s();case 14:if((u=s.n()).done){h.next=21;break}if(!(l=u.value).initialize){h.next=19;break}return h.next=19,l.initialize();case 19:h.next=14;break;case 21:h.next=26;break;case 23:h.prev=23,h.t0=h.catch(12),s.e(h.t0);case 26:return h.prev=26,s.f(),h.finish(26);case 29:this.inited=!0;case 30:case"end":return h.stop()}},r,this,[[12,23,26,29]])})),function(){return e.apply(this,arguments)})},{key:"render",value:(t=ti()(Hr.a.mark(function r(){var i,a,s,u,l,h,v,k=arguments;return Hr.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.inited&&!this.rendering){T.next=2;break}return T.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(I){I()}),this.rendering=!0,this.engine.beginFrame(),i=this.container.getAll(rt.IDENTIFIER.Systems),a=k.length,s=new Array(a),u=0;u<a;u++)s[u]=k[u];l=Dh(i),T.prev=8,l.s();case 10:if((h=l.n()).done){T.next=17;break}if(!(v=h.value).execute){T.next=15;break}return T.next=15,v.execute(s);case 15:T.next=10;break;case 17:T.next=22;break;case 19:T.prev=19,T.t0=T.catch(8),l.e(T.t0);case 22:return T.prev=22,l.f(),T.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return T.stop()}},r,this,[[8,19,22,25]])})),function(){return t.apply(this,arguments)})},{key:"clear",value:function(r){var i=this;return this.inited?this.engine.clear(r):this.pendings.unshift(function(){i.engine.clear(r),i.pendings.shift()}),this}},{key:"setSize",value:function(r){var i=r.width,a=r.height,s=this.engine.getCanvas();return this.size={width:i,height:a},s.width=i,s.height=a,this}},{key:"getSize",value:function(){return this.size}}]),n}(),jh=Nn()(is.prototype,"engine",[Ah],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ph=Nn()(is.prototype,"shaderModule",[Ch],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nh=Nn()(is.prototype,"configService",[Th],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ih=is))||Ih),Yh=Object(Ar.injectable)()(Lh=function(){function n(){hn()(this,n),this.entities=[]}return dn()(n,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(t){return this.addEntity(t.getEntity()),this}},{key:"removeRenderable",value:function(t){return this.removeEntity(t.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(t){return this.entities.indexOf(t)===-1&&this.entities.push(t),this}},{key:"removeEntity",value:function(t){var e=this.entities.indexOf(t);return this.entities.splice(e,1),this}}]),n}())||Lh,Hh=Object(Ar.injectable)()(Bh=function(){function n(){hn()(this,n),this.cache={}}return dn()(n,[{key:"get",value:function(t){return this.cache[t]}},{key:"set",value:function(t,e){this.cache[t]=e}}]),n}())||Bh;function qh(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Kh(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qh(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):qh(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var Zh,$h,Qh,Jh,Wu,ed,td,rd,nd,Xu,id,od=(Gh=Object(Ar.injectable)(),Fh=Object(Ar.inject)(Hh),zh=Object(Ar.inject)(rt.IDENTIFIER.RenderEngine),Gh((zs=function(){function n(){hn()(this,n),Pn()(this,"textureCache",Vh,this),Pn()(this,"engine",Wh,this),this.config=void 0,this.loaded=!1,this.texture=void 0}var t;return dn()(n,[{key:"setConfig",value:function(e){this.config=e}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:(t=ti()(Hr.a.mark(function e(){var r=this;return Hr.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.config.url){i.next=4;break}return i.abrupt("return",new Promise(function(a,s){var u=r.textureCache.get(r.config.url);if(u)a(u);else{var l=new Image;l.crossOrigin="Anonymous",l.src=r.config.url,l.onload=function(){var h=r.engine.createTexture2D(Kh(Kh({},r.config),{},{data:l,width:l.width,height:l.height,flipY:!0}));r.textureCache.set(r.config.url,h),r.texture=h,r.loaded=!0,a(h)},l.onerror=function(){s()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),i.abrupt("return",this.texture);case 7:case"end":return i.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),n}(),Vh=Nn()(zs.prototype,"textureCache",[Fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wh=Nn()(zs.prototype,"engine",[zh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uh=zs))||Uh),ad=(Zh=Object(Ar.injectable)(),$h=Object(Ar.inject)(rt.IDENTIFIER.Systems),Qh=Object(Ar.named)(rt.IDENTIFIER.RendererSystem),Zh((Wu=function(){function n(){hn()(this,n),Pn()(this,"rendererSystem",ed,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return dn()(n,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(t){return this.camera=t,this}},{key:"setScene",value:function(t){return this.scene=t,this}},{key:"setViewport",value:function(t){return this.viewport=t,this}},{key:"setClearColor",value:function(t){return this.clearColor=t,this}},{key:"pick",value:function(t){return this.rendererSystem.pick(t,this)}}]),n}(),ed=Nn()(Wu.prototype,"rendererSystem",[$h,Qh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jh=Wu))||Jh);function sd(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Z0(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?sd(Object(e),!0).forEach(function(r){Yt()(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):sd(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}var Us=(td=Object(Ar.injectable)(),rd=Object(Ar.inject)(rt.IDENTIFIER.ConfigService),td((Xu=function(){function n(){hn()(this,n),Pn()(this,"configService",id,this),this.container=void 0}var t;return dn()(n,[{key:"getEngine",value:(t=ti()(Hr.a.mark(function e(){var r,i,a,s;return Hr.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return r=this.container.get(rt.IDENTIFIER.RenderEngine),i=this.configService.get(),a=i.canvas,s=i.engineOptions,u.next=4,r.init(Z0({canvas:a||Kl(),swapChainFormat:Jt.TextureFormat.BGRA8Unorm,antialiasing:!1},s));case 4:return u.abrupt("return",r);case 5:case"end":return u.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getTransformComponent",value:function(e){return this.container.get(rt.IDENTIFIER.TransformComponentManager).getComponentByEntity(e)}},{key:"getMeshComponent",value:function(e){return this.container.get(rt.IDENTIFIER.MeshComponentManager).getComponentByEntity(e)}},{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setContainer",value:function(e){this.container=e}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Object(rt.createEntity)()}},{key:"createScene",value:function(){return this.container.get(Yh)}},{key:"createCamera",value:function(){return this.container.get(ql)}},{key:"createView",value:function(){return this.container.get(ad)}},{key:"createRenderable",value:function(e,r){var i=e?this.container.getNamed(rt.IDENTIFIER.Renderable,e):this.container.get(Zo),a=Object(rt.createEntity)();return i.setConfig(r||{}),i.setEntity(a),i}},{key:"createGeometry",value:function(e,r){var i=this.container.getNamed(rt.IDENTIFIER.Geometry,e),a=Object(rt.createEntity)();return i.setConfig(r||{}),i.setEntity(a),i.getComponent()}},{key:"createMaterial",value:function(e,r){var i=this.container.getNamed(rt.IDENTIFIER.Material,e),a=Object(rt.createEntity)();return i.setConfig(r||{}),i.setEntity(a,e),i.getComponent()}},{key:"createTexture2D",value:function(e){var r=this.container.get(od);return r.setConfig(e),r}},{key:"createBufferGeometry",value:function(e){return this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.GeometrySystem).createBufferGeometry(e)}},{key:"createInstancedBufferGeometry",value:function(e){return this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.GeometrySystem).createInstancedBufferGeometry(e)}},{key:"createShaderMaterial",value:function(e){return this.container.getNamed(rt.IDENTIFIER.Systems,rt.IDENTIFIER.MaterialSystem).createShaderMaterial(e)}},{key:"createKernel",value:function(e){var r=this.container.get(Ef);return typeof e=="string"?r.setBundle(JSON.parse(e)):r.setBundle(e),r.init(),r}},{key:"createRenderer",value:function(){var e=this.container.get(Xh);return e.container=this.container,e.init(),e}},{key:"destroy",value:function(){this.container.getAll(rt.IDENTIFIER.Systems).forEach(function(e){e.tearDown&&e.tearDown()}),this.container.get(rt.IDENTIFIER.RenderEngine).destroy(),this.container.get(rt.IDENTIFIER.InteractorService).destroy()}}],[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=Object(rt.createWorldContainer)(),i=navigator.gpu?M0:c0;r.isBound(rt.IDENTIFIER.RenderEngine)||r.bind(rt.IDENTIFIER.RenderEngine).to(i).inSingletonScope(),r.bind(Xh).toSelf(),r.bind(Ef).toSelf(),r.bind(Zo).toSelf(),r.bind(ad).toSelf(),r.bind(ql).toSelf(),r.bind(Yh).toSelf(),r.bind(n).toSelf(),r.bind(Hh).toSelf(),r.bind(od).toSelf(),r.bind(rt.IDENTIFIER.Geometry).to(P0).whenTargetNamed(qo.BOX),r.bind(rt.IDENTIFIER.Geometry).to(G0).whenTargetNamed(qo.SPHERE),r.bind(rt.IDENTIFIER.Geometry).to(L0).whenTargetNamed(qo.PLANE),r.bind(rt.IDENTIFIER.Geometry).to(D0).whenTargetNamed(qo.MERGED),r.bind(rt.IDENTIFIER.Material).to(U0).whenTargetNamed(Of.BASIC),r.bind(rt.IDENTIFIER.Renderable).to(K0).whenTargetNamed(Zo.POINT),r.bind(rt.IDENTIFIER.Renderable).to(Y0).whenTargetNamed(Zo.LINE),r.bind(rt.IDENTIFIER.Renderable).to(W0).whenTargetNamed(Zo.GRID);var a=r.get(n);return a.setContainer(r),a.setConfig(e),a}}]),n}(),id=Nn()(Xu.prototype,"configService",[rd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nd=Xu))||nd),Aa=function(n,t){return n?ur(n)?function(){return n}:n:function(){return t||1}},$0=function(n,t){var e=[],r=[],i={},a=0;for(a=0;a<n.length;a++){var s=n[a];i[s.id]=a,e.push(s.x),e.push(s.y),e.push(0),e.push(0),r.push([])}for(a=0;a<t.length;a++){var u=t[a],l=fn(u,"source"),h=fn(u,"target");r[i[l]].push(i[h]),r[i[h]].push(i[l])}var v=0;for(a=0;a<n.length;a++){var k=e.length,T=r[a],I=T.length;e[4*a+2]=k,e[4*a+3]=T.length,v=Math.max(v,T.length);for(var j=0;j<I;++j){var F=T[j];e.push(+F)}}for(;e.length%4!=0;)e.push(0);return{maxEdgePerVetex:v,array:new Float32Array(e)}},Q0=function(n,t,e,r){var i=[],a=[],s={},u=0;for(u=0;u<n.length;u++){var l=n[u];s[l.id]=u,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(u=0;u<t.length;u++){var h=t[u],v=fn(h,"source"),k=fn(h,"target");a[s[v]].push(s[k]),a[s[v]].push(e(h)),a[s[v]].push(r(h)),a[s[v]].push(0),a[s[k]].push(s[v]),a[s[k]].push(e(h)),a[s[k]].push(r(h)),a[s[k]].push(0)}var T=0;for(u=0;u<n.length;u++){var I=i.length,j=a[u],F=j.length;i[4*u+2]=I+1048576*F/4,i[4*u+3]=0,T=Math.max(T,F/4);for(var B=0;B<F;++B){var U=j[B];i.push(+U)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:T,array:new Float32Array(i)}},J0=function(n,t){var e=[],r=n.length,i={};return t.forEach(function(a){n.forEach(function(s,u){if(i[a[s]]===void 0&&(i[a[s]]=Object.keys(i).length),e.push(i[a[s]]),u===r-1)for(;e.length%4!=0;)e.push(0)})}),{array:new Float32Array(e),count:Object.keys(i).length}},ud=function(n){for(var t=[],e=n.length,r=n[0].length,i=function(s){n.forEach(function(u,l){if(t.push(u[s]),l===e-1)for(;t.length%4!=0;)t.push(0)})},a=0;a<r;a++)i(a);return new Float32Array(t)};function cd(n){return(cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function ld(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function fd(n,t){return(fd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ey(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Yu(n);if(t){var i=Yu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return ty(this,e)}}function ty(n,t){return!t||cd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Yu(n){return(Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var Vs=function(n,t,e,r){return new(e||(e=Promise))(function(i,a){function s(h){try{l(r.next(h))}catch(v){a(v)}}function u(h){try{l(r.throw(h))}catch(v){a(v)}}function l(h){var v;h.done?i(h.value):(v=h.value,v instanceof e?v:new e(function(k){k(v)})).then(s,u)}l((r=r.apply(n,t||[])).next())})},ry=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&fd(s,u)})(a,n);var t,e,r,i=ey(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.gravity=10,u.speed=1,u.clustering=!1,u.clusterField="cluster",u.clusterGravity=10,u.workerEnabled=!1,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return Vs(this,void 0,void 0,regeneratorRuntime.mark(function s(){var u,l,h,v,k,T=this;return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if((l=(u=this).nodes)&&l.length!==0){I.next=5;break}return u.onLayoutEnd&&u.onLayoutEnd(),I.abrupt("return");case 5:if(u.width||typeof window=="undefined"||(u.width=window.innerWidth),u.height||typeof window=="undefined"||(u.height=window.innerHeight),u.center||(u.center=[u.width/2,u.height/2]),h=u.center,l.length!==1){I.next=14;break}return l[0].x=h[0],l[0].y=h[1],u.onLayoutEnd&&u.onLayoutEnd(),I.abrupt("return");case 14:return v={},k={},l.forEach(function(j,F){ur(j.x)||(j.x=Math.random()*T.width),ur(j.y)||(j.y=Math.random()*T.height),v[j.id]=j,k[j.id]=F}),u.nodeMap=v,u.nodeIdxMap=k,I.next=21,u.run();case 21:case"end":return I.stop()}},s,this)}))}},{key:"executeWithWorker",value:function(s,u){return Vs(this,void 0,void 0,regeneratorRuntime.mark(function l(){var h,v,k,T,I,j=this;return regeneratorRuntime.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(v=(h=this).nodes,k=h.center,v&&v.length!==0){F.next=5;break}return F.abrupt("return");case 5:if(v.length!==1){F.next=9;break}return v[0].x=k[0],v[0].y=k[1],F.abrupt("return");case 9:return T={},I={},v.forEach(function(B,U){ur(B.x)||(B.x=Math.random()*j.width),ur(B.y)||(B.y=Math.random()*j.height),T[B.id]=B,I[B.id]=U}),h.nodeMap=T,h.nodeIdxMap=I,F.next=16,h.run(s,u);case 16:case"end":return F.stop()}},l,this)}))}},{key:"run",value:function(s,u){return Vs(this,void 0,void 0,regeneratorRuntime.mark(function l(){var h,v,k,T,I,j,F,B,U,q,$,ve,de,me,Te,Oe,Pe,Ze,nt,ct,st,It,gt,Pt,Rt,Zt,kt=this;return regeneratorRuntime.wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:for(v=(h=this).nodes,k=h.edges,T=h.maxIteration,I=h.center,j=h.height*h.width,F=Math.sqrt(j)/10,B=j/(v.length+1),U=Math.sqrt(B),q=h.speed,$=h.clustering,ve=J0([h.clusterField],v),de=ve.array,me=ve.count,v.forEach(function(Dt,qt){var $t=0,Gt=0;ur(Dt.fx)&&ur(Dt.fy)&&($t=Dt.fx||.001,Gt=Dt.fy||.001),de[4*qt+1]=$t,de[4*qt+2]=Gt}),Te=v.length,Oe=$0(v,k),Pe=Oe.maxEdgePerVetex,Ze=Oe.array,nt=h.workerEnabled,ct=nt?Us.create({canvas:s,engineOptions:{supportCompute:!0}}):Us.create({engineOptions:{supportCompute:!0}}),st=h.onLayoutEnd,It=[],gt=0;gt<me;gt++)It.push(0,0,0,0);return Pt=ct.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([Te,1,1]).setBinding({u_Data:Ze,u_K:U,u_K2:B,u_Gravity:h.gravity,u_ClusterGravity:h.clusterGravity||h.gravity||1,u_Speed:q,u_MaxDisplace:F,u_Clustering:$?1:0,u_Center:I,u_AttributeArray:de,u_ClusterCenters:It,MAX_EDGE_PER_VERTEX:Pe,VERTEX_COUNT:Te}),$&&(Rt=ct.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([me,1,1]).setBinding({u_Data:Ze,u_NodeAttributes:de,u_ClusterCenters:It,VERTEX_COUNT:Te,CLUSTER_COUNT:me})),Zt=function(){return Vs(kt,void 0,void 0,regeneratorRuntime.mark(function Dt(){var qt,$t;return regeneratorRuntime.wrap(function(Gt){for(;;)switch(Gt.prev=Gt.next){case 0:qt=0;case 1:if(!(qt<T)){Gt.next=13;break}return Gt.next=4,Pt.execute();case 4:if(!$){Gt.next=9;break}return Rt.setBinding({u_Data:Pt}),Gt.next=8,Rt.execute();case 8:Pt.setBinding({u_ClusterCenters:Rt});case 9:Pt.setBinding({u_MaxDisplace:F*=.99});case 10:qt++,Gt.next=1;break;case 13:return Gt.next=15,Pt.getOutput();case 15:$t=Gt.sent,s?u.postMessage({type:Kc,vertexEdgeData:$t}):v.forEach(function(lr,Lr){var wn=$t[4*Lr],Sr=$t[4*Lr+1];lr.x=wn,lr.y=Sr}),st&&st();case 18:case"end":return Gt.stop()}},Dt)}))},Vt.next=25,Zt();case 25:case"end":return Vt.stop()}},l,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}])&&ld(t.prototype,e),r&&ld(t,r),a}(Wi);function hd(n){return(hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function dd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function pd(n,t){return(pd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ny(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Hu(n);if(t){var i=Hu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return iy(this,e)}}function iy(n,t){return!t||hd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Hu(n){return(Hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var qu=function(n,t,e,r){return new(e||(e=Promise))(function(i,a){function s(h){try{l(r.next(h))}catch(v){a(v)}}function u(h){try{l(r.throw(h))}catch(v){a(v)}}function l(h){var v;h.done?i(h.value):(v=h.value,v instanceof e?v:new e(function(k){k(v)})).then(s,u)}l((r=r.apply(n,t||[])).next())})},oy=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&pd(s,u)})(a,n);var t,e,r,i=ny(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).maxIteration=1e3,u.edgeStrength=200,u.nodeStrength=1e3,u.coulombDisScale=.005,u.damping=.9,u.maxSpeed=1e3,u.minMovement=.5,u.interval=.02,u.factor=1,u.linkDistance=1,u.gravity=10,u.workerEnabled=!1,u.nodes=[],u.edges=[],u.width=300,u.height=300,u.nodeMap={},u.nodeIdxMap={},u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return qu(this,void 0,void 0,regeneratorRuntime.mark(function s(){var u,l,h,v,k;return regeneratorRuntime.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if((l=(u=this).nodes)&&l.length!==0){T.next=5;break}return u.onLayoutEnd&&u.onLayoutEnd(),T.abrupt("return");case 5:if(u.width||typeof window=="undefined"||(u.width=window.innerWidth),u.height||typeof window=="undefined"||(u.height=window.innerHeight),u.center||(u.center=[u.width/2,u.height/2]),h=u.center,l.length!==1){T.next=14;break}return l[0].x=h[0],l[0].y=h[1],u.onLayoutEnd&&u.onLayoutEnd(),T.abrupt("return");case 14:return v={},k={},l.forEach(function(I,j){ur(I.x)||(I.x=Math.random()*u.width),ur(I.y)||(I.y=Math.random()*u.height),v[I.id]=I,k[I.id]=j}),u.nodeMap=v,u.nodeIdxMap=k,u.nodeStrength=Aa(u.nodeStrength,1),u.edgeStrength=Aa(u.edgeStrength,1),T.next=23,u.run();case 23:case"end":return T.stop()}},s,this)}))}},{key:"executeWithWorker",value:function(s,u){var l=this,h=l.nodes,v=l.center;if(h&&h.length!==0){if(h.length===1)return h[0].x=v[0],void(h[0].y=v[1]);var k={},T={};h.forEach(function(I,j){ur(I.x)||(I.x=Math.random()*l.width),ur(I.y)||(I.y=Math.random()*l.height),k[I.id]=I,T[I.id]=j}),l.nodeMap=k,l.nodeIdxMap=T,l.nodeStrength=Aa(l.nodeStrength,1),l.edgeStrength=Aa(l.edgeStrength,1),l.run(s,u)}}},{key:"run",value:function(s,u){return qu(this,void 0,void 0,regeneratorRuntime.mark(function l(){var h,v,k,T,I,j,F,B,U,q,$,ve,de,me,Te,Oe,Pe,Ze,nt,ct,st,It,gt,Pt,Rt,Zt,kt,Vt=this;return regeneratorRuntime.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:for(v=(h=this).nodes,k=h.edges,T=h.maxIteration,h.width||typeof window=="undefined"||(h.width=window.innerWidth),h.height||typeof window=="undefined"||(h.height=window.innerHeight),I=v.length,h.linkDistance=Aa(h.linkDistance),h.edgeStrength=Aa(h.edgeStrength),j=Q0(v,k,h.linkDistance,h.edgeStrength),F=j.maxEdgePerVetex,B=j.array,h.degrees=za(v.length,h.nodeIdxMap,k),U=[],q=[],$=[],ve=[],de=[],me=[],Te=[],h.getMass||(h.getMass=function(qt){return h.degrees[h.nodeIdxMap[qt.id]]||1}),Oe=h.gravity,Pe=h.center,v.forEach(function(qt,$t){U.push(h.getMass(qt)),q.push(h.nodeStrength(qt)),h.degrees[$t]||(h.degrees[$t]=0);var Gt=[Pe[0],Pe[1],Oe];if(h.getCenter){var lr=h.getCenter(qt,h.degrees[$t]);lr&&ur(lr[0])&&ur(lr[1])&&ur(lr[2])&&(Gt=lr)}$.push(Gt[0]),ve.push(Gt[1]),de.push(Gt[2]),ur(qt.fx)&&ur(qt.fy)?(me.push(qt.fx||.001),Te.push(qt.fy||.001)):(me.push(0),Te.push(0))}),Ze=ud([U,h.degrees,q,me]),nt=ud([$,ve,de,Te]),ct=h.workerEnabled,st=ct?Us.create({canvas:s,engineOptions:{supportCompute:!0}}):Us.create({engineOptions:{supportCompute:!0}}),It=h.onLayoutEnd,gt=[],B.forEach(function(qt){gt.push(qt)}),Pt=0;Pt<4;Pt++)gt.push(0);return Rt=st.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([I,1,1]).setBinding({u_Data:B,u_damping:h.damping,u_maxSpeed:h.maxSpeed,u_minMovement:h.minMovement,u_coulombDisScale:h.coulombDisScale,u_factor:h.factor,u_NodeAttributeArray1:Ze,u_NodeAttributeArray2:nt,MAX_EDGE_PER_VERTEX:F,VERTEX_COUNT:I,u_AveMovement:gt,u_interval:h.interval}),Zt=st.createKernel('{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}').setDispatch([1,1,1]).setBinding({u_Data:B,VERTEX_COUNT:I,u_AveMovement:[0,0,0,0]}),kt=function(){return qu(Vt,void 0,void 0,regeneratorRuntime.mark(function qt(){var $t,Gt,lr;return regeneratorRuntime.wrap(function(Lr){for(;;)switch(Lr.prev=Lr.next){case 0:$t=0;case 1:if(!($t<T)){Lr.next=12;break}return Lr.next=4,Rt.execute();case 4:return Zt.setBinding({u_Data:Rt}),Lr.next=7,Zt.execute();case 7:Gt=Math.max(.02,h.interval-.002*$t),Rt.setBinding({u_interval:Gt,u_AveMovement:Zt});case 9:$t++,Lr.next=1;break;case 12:return Lr.next=14,Rt.getOutput();case 14:lr=Lr.sent,s?u.postMessage({type:Kc,vertexEdgeData:lr}):v.forEach(function(wn,Sr){var jr=lr[4*Sr],_r=lr[4*Sr+1];wn.x=jr,wn.y=_r}),It&&It();case 17:case"end":return Lr.stop()}},qt)}))},Dt.next=35,kt();case 35:case"end":return Dt.stop()}},l,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}])&&dd(t.prototype,e),r&&dd(t,r),a}(Wi);function gd(n){return(gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function vd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function yd(n,t){return(yd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function ay(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Ku(n);if(t){var i=Ku(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return sy(this,e)}}function sy(n,t){return!t||gd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Ku(n){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var uy=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&yd(s,u)})(a,n);var t,e,r,i=ay(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.maxIteration=100,u.gravity=10,u.comboGravity=10,u.linkDistance=10,u.alpha=1,u.alphaMin=.001,u.alphaDecay=1-Math.pow(u.alphaMin,1/300),u.alphaTarget=0,u.velocityDecay=.6,u.edgeStrength=.6,u.nodeStrength=30,u.preventOverlap=!1,u.preventNodeOverlap=!1,u.preventComboOverlap=!1,u.collideStrength=void 0,u.nodeCollideStrength=.5,u.comboCollideStrength=.5,u.comboSpacing=20,u.comboPadding=10,u.optimizeRangeFactor=1,u.onTick=function(){},u.onLayoutEnd=function(){},u.depthAttractiveForceScale=1,u.depthRepulsiveForceScale=2,u.nodes=[],u.edges=[],u.combos=[],u.comboTrees=[],u.width=300,u.height=300,u.bias=[],u.nodeMap={},u.oriComboMap={},u.indexMap={},u.comboMap={},u.previousLayouted=!1,u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var s=this.nodes,u=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},s&&s.length!==0){if(s.length===1)return s[0].x=u[0],s[0].y=u[1],void(this.onLayoutEnd&&this.onLayoutEnd());this.initVals(),this.run(),this.onLayoutEnd&&this.onLayoutEnd()}else this.onLayoutEnd&&this.onLayoutEnd()}},{key:"run",value:function(){var s=this,u=s.nodes,l=s.previousLayouted?s.maxIteration/5:s.maxIteration;s.width||typeof window=="undefined"||(s.width=window.innerWidth),s.height||typeof window=="undefined"||(s.height=window.innerHeight);var h=s.center,v=s.velocityDecay,k=s.comboMap;s.previousLayouted||s.initPos(k);for(var T=function(B){var U=[];u.forEach(function(q,$){U[$]={x:0,y:0}}),s.applyCalculate(U),s.applyComboCenterForce(U),u.forEach(function(q,$){ur(q.x)&&ur(q.y)&&(q.x+=U[$].x*v,q.y+=U[$].y*v)}),s.alpha+=(s.alphaTarget-s.alpha)*s.alphaDecay,s.onTick()},I=0;I<l;I++)T();var j=[0,0];u.forEach(function(B){ur(B.x)&&ur(B.y)&&(j[0]+=B.x,j[1]+=B.y)}),j[0]/=u.length,j[1]/=u.length;var F=[h[0]-j[0],h[1]-j[1]];u.forEach(function(B,U){ur(B.x)&&ur(B.y)&&(B.x+=F[0],B.y+=F[1])}),s.combos.forEach(function(B){var U=k[B.id];U&&U.empty&&(B.x=U.cx||B.x,B.y=U.cy||B.y)}),s.previousLayouted=!0}},{key:"initVals",value:function(){var s=this.edges,u=this.nodes,l=this.combos,h={},v={},k={};u.forEach(function(qt,$t){v[qt.id]=qt,k[qt.id]=$t}),this.nodeMap=v,this.indexMap=k;var T={};l.forEach(function(qt){T[qt.id]=qt}),this.oriComboMap=T,this.comboMap=this.getComboMap();var I=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||I,this.preventNodeOverlap=this.preventNodeOverlap||I;var j=this.collideStrength;j&&(this.comboCollideStrength=j,this.nodeCollideStrength=j),this.comboCollideStrength=this.comboCollideStrength?this.comboCollideStrength:0,this.nodeCollideStrength=this.nodeCollideStrength?this.nodeCollideStrength:0;for(var F=0;F<s.length;++F){var B=fn(s[F],"source"),U=fn(s[F],"target");h[B]?h[B]++:h[B]=1,h[U]?h[U]++:h[U]=1}for(var q=[],$=0;$<s.length;++$){var ve=fn(s[$],"source"),de=fn(s[$],"target");q[$]=h[ve]/(h[ve]+h[de])}this.bias=q;var me,Te,Oe=this.nodeSize,Pe=this.nodeSpacing;if(Te=ur(Pe)?function(){return Pe}:Yo(Pe)?Pe:function(){return 0},this.nodeSpacing=Te,Oe)if(Yo(Oe))me=function(qt){return Oe(qt)};else if(Ii(Oe)){var Ze=(Oe[0]>Oe[1]?Oe[0]:Oe[1])/2;me=function(qt){return Ze}}else{var nt=Oe/2;me=function(qt){return nt}}else me=function(qt){return qt.size?Ii(qt.size)?(qt.size[0]>qt.size[1]?qt.size[0]:qt.size[1])/2:Ao(qt.size)?(qt.size.width>qt.size.height?qt.size.width:qt.size.height)/2:qt.size/2:10};this.nodeSize=me;var ct,st=this.comboSpacing;ct=ur(st)?function(){return st}:Yo(st)?st:function(){return 0},this.comboSpacing=ct;var It,gt=this.comboPadding;It=ur(gt)?function(){return gt}:Ii(gt)?function(){return Math.max.apply(null,gt)}:Yo(gt)?gt:function(){return 0},this.comboPadding=It;var Pt,Rt=this.linkDistance;Rt||(Rt=10),Pt=ur(Rt)?function(qt){return Rt}:Rt,this.linkDistance=Pt;var Zt,kt=this.edgeStrength;kt||(kt=1),Zt=ur(kt)?function(qt){return kt}:kt,this.edgeStrength=Zt;var Vt,Dt=this.nodeStrength;Dt||(Dt=30),Vt=ur(Dt)?function(qt){return Dt}:Dt,this.nodeStrength=Vt}},{key:"initPos",value:function(s){this.nodes.forEach(function(u,l){var h=u.comboId,v=s[h];h&&v?(u.x=v.cx+100/(l+1),u.y=v.cy+100/(l+1)):(u.x=100/(l+1),u.y=100/(l+1))})}},{key:"getComboMap",value:function(){var s=this,u=s.nodeMap,l=s.indexMap,h=s.comboTrees,v=s.oriComboMap,k={};return(h||[]).forEach(function(T){var I=[];bs(T,function(j){if(j.itemType==="node"||!v[j.id])return!0;if(k[j.id]===void 0){var F={id:j.id,name:j.id,cx:0,cy:0,count:0,depth:s.oriComboMap[j.id].depth||0,children:[]};k[j.id]=F}var B=j.children;B&&B.forEach(function(me){if(!k[me.id]&&!u[me.id])return!0;I.push(me)});var U=k[j.id];if(U.cx=0,U.cy=0,I.length===0){U.empty=!0;var q=v[j.id],$=Object.keys(u).length,ve="".concat(j.id,"-visual-child-").concat($),de={id:ve,x:q.x,y:q.y,depth:U.depth+1,itemType:"node"};s.nodes.push(de),u[ve]=de,l[ve]=$,U.cx=q.x,U.cy=q.y,I.push(de)}return I.forEach(function(me){if(U.count++,me.itemType!=="node"){var Te=k[me.id];return ur(Te.cx)&&(U.cx+=Te.cx),void(ur(Te.cy)&&(U.cy+=Te.cy))}var Oe=u[me.id];Oe&&(ur(Oe.x)&&(U.cx+=Oe.x),ur(Oe.y)&&(U.cy+=Oe.y))}),U.cx/=U.count,U.cy/=U.count,U.children=I,!0})}),k}},{key:"applyComboCenterForce",value:function(s){var u=this.gravity,l=this.comboGravity||u,h=this.alpha,v=this.comboTrees,k=this.indexMap,T=this.nodeMap,I=this.comboMap;(v||[]).forEach(function(j){bs(j,function(F){if(F.itemType==="node"||!I[F.id])return!0;var B=I[F.id],U=(B.depth+1)/10*.5,q=B.cx,$=B.cy;return B.cx=0,B.cy=0,B.children.forEach(function(ve){if(ve.itemType!=="node"){var de=I[ve.id];return de&&ur(de.cx)&&(B.cx+=de.cx),void(de&&ur(de.cy)&&(B.cy+=de.cy))}var me=T[ve.id],Te=me.x-q||.005,Oe=me.y-$||.005,Pe=Math.sqrt(Te*Te+Oe*Oe),Ze=k[me.id],nt=l*h/Pe*U;s[Ze].x-=Te*nt,s[Ze].y-=Oe*nt,ur(me.x)&&(B.cx+=me.x),ur(me.y)&&(B.cy+=me.y)}),B.cx/=B.count,B.cy/=B.count,!0})})}},{key:"applyCalculate",value:function(s){var u=this.comboMap,l=this.nodes,h={};l.forEach(function(v,k){l.forEach(function(T,I){if(!(k<I)){var j=v.x-T.x||.005,F=v.y-T.y||.005,B=j*j+F*F,U=Math.sqrt(B);B<1&&(B=U),h["".concat(v.id,"-").concat(T.id)]={vx:j,vy:F,vl2:B,vl:U},h["".concat(T.id,"-").concat(v.id)]={vl2:B,vl:U,vx:-j,vy:-F}}})}),this.updateComboSizes(u),this.calRepulsive(s,h),this.calAttractive(s,h),this.preventComboOverlap&&this.comboNonOverlapping(s,u)}},{key:"updateComboSizes",value:function(s){var u=this,l=u.comboTrees,h=u.nodeMap,v=u.nodeSize,k=u.comboSpacing,T=u.comboPadding;(l||[]).forEach(function(I){var j=[];bs(I,function(F){if(F.itemType==="node")return!0;var B=s[F.id];if(!B)return!1;var U=F.children;U&&U.forEach(function(ve){(s[ve.id]||h[ve.id])&&j.push(ve)}),B.minX=1/0,B.minY=1/0,B.maxX=-1/0,B.maxY=-1/0,j.forEach(function(ve){if(ve.itemType!=="node")return!0;var de=h[ve.id];if(!de)return!0;var me=v(de),Te=de.x-me,Oe=de.y-me,Pe=de.x+me,Ze=de.y+me;B.minX>Te&&(B.minX=Te),B.minY>Oe&&(B.minY=Oe),B.maxX<Pe&&(B.maxX=Pe),B.maxY<Ze&&(B.maxY=Ze)});var q=u.oriComboMap[F.id].size||10;Ii(q)&&(q=q[0]);var $=Math.max(B.maxX-B.minX,B.maxY-B.minY,q);return B.r=$/2+k(B)/2+T(B),!0})})}},{key:"comboNonOverlapping",value:function(s,u){var l=this.comboTree,h=this.comboCollideStrength,v=this.indexMap,k=this.nodeMap;bs(l,function(T){if(!u[T.id]&&!k[T.id]&&T.id!=="comboTreeRoot")return!1;var I=T.children;return I&&I.length>1&&I.forEach(function(j,F){if(j.itemType==="node")return!1;var B=u[j.id];B&&I.forEach(function(U,q){if(F<=q||U.itemType==="node")return!1;var $=u[U.id];if(!$)return!1;var ve=B.cx-$.cx||.005,de=B.cy-$.cy||.005,me=ve*ve+de*de,Te=B.r||1,Oe=$.r||1,Pe=Te+Oe,Ze=Oe*Oe,nt=Te*Te;if(me<Pe*Pe){var ct=j.children;if(!ct||ct.length===0)return!1;var st=U.children;if(!st||st.length===0)return!1;var It=Math.sqrt(me),gt=(Pe-It)/It*h,Pt=ve*gt,Rt=de*gt,Zt=Ze/(nt+Ze),kt=1-Zt;ct.forEach(function(Vt){if(Vt.itemType!=="node")return!1;if(k[Vt.id]){var Dt=v[Vt.id];st.forEach(function(qt){if(qt.itemType!=="node"||!k[qt.id])return!1;var $t=v[qt.id];s[Dt].x+=Pt*Zt,s[Dt].y+=Rt*Zt,s[$t].x-=Pt*kt,s[$t].y-=Rt*kt})}})}})}),!0})}},{key:"calRepulsive",value:function(s,u){var l=this,h=l.nodes,v=l.width*l.optimizeRangeFactor,k=l.nodeStrength,T=l.alpha,I=l.nodeCollideStrength,j=l.preventNodeOverlap,F=l.nodeSize,B=l.nodeSpacing,U=l.depthRepulsiveForceScale,q=l.center;h.forEach(function($,ve){if($.x&&$.y){if(q){var de=l.gravity,me=$.x-q[0]||.005,Te=$.y-q[1]||.005,Oe=Math.sqrt(me*me+Te*Te);s[ve].x-=me*de*T/Oe,s[ve].y-=Te*de*T/Oe}h.forEach(function(Pe,Ze){if(ve!==Ze&&Pe.x&&Pe.y){var nt=u["".concat($.id,"-").concat(Pe.id)],ct=nt.vl2,st=nt.vl;if(!(st>v)){var It=u["".concat($.id,"-").concat(Pe.id)],gt=It.vx,Pt=It.vy,Rt=Math.log(Math.abs(Pe.depth-$.depth)/10)+1||1;Rt=Rt<1?1:Rt,Pe.comboId!==$.comboId&&(Rt+=1);var Zt=Rt?Math.pow(U,Rt):1,kt=k(Pe)*T/ct*Zt;if(s[ve].x+=gt*kt,s[ve].y+=Pt*kt,ve<Ze&&j){var Vt=F($)+B($)||1,Dt=F(Pe)+B(Pe)||1,qt=Vt+Dt;if(ct<qt*qt){var $t=(qt-st)/st*I,Gt=Dt*Dt,lr=Gt/(Vt*Vt+Gt),Lr=gt*$t,wn=Pt*$t;s[ve].x+=Lr*lr,s[ve].y+=wn*lr,lr=1-lr,s[Ze].x-=Lr*lr,s[Ze].y-=wn*lr}}}}})}})}},{key:"calAttractive",value:function(s,u){var l=this,h=l.edges,v=l.linkDistance,k=l.alpha,T=l.edgeStrength,I=l.bias,j=l.depthAttractiveForceScale;h.forEach(function(F,B){var U=fn(F,"source"),q=fn(F,"target");if(U&&q&&U!==q){var $=l.indexMap[U],ve=l.indexMap[q],de=l.nodeMap[U],me=l.nodeMap[q];if(de&&me){var Te=de.depth===me.depth?0:Math.log(Math.abs(de.depth-me.depth)/10);de.comboId===me.comboId&&(Te/=2);var Oe=Te?Math.pow(j,Te):1;if(de.comboId!==me.comboId&&Oe===1?Oe=j/2:de.comboId===me.comboId&&(Oe=2),ur(me.x)&&ur(de.x)&&ur(me.y)&&ur(de.y)){var Pe=u["".concat(q,"-").concat(U)],Ze=Pe.vl,nt=Pe.vx,ct=Pe.vy,st=(Ze-v(F))/Ze*k*T(F)*Oe,It=nt*st,gt=ct*st,Pt=I[B];s[ve].x-=It*Pt,s[ve].y-=gt*Pt,s[$].x+=It*(1-Pt),s[$].y+=gt*(1-Pt)}}}})}},{key:"getType",value:function(){return"comboForce"}}])&&vd(t.prototype,e),r&&vd(t,r),a}(Wi);function md(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var cy=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.id=i.id||0,this.rx=i.rx,this.ry=i.ry,this.fx=0,this.fy=0,this.mass=i.mass,this.degree=i.degree,this.g=i.g||0}var t,e,r;return t=n,(e=[{key:"distanceTo",value:function(i){var a=this.rx-i.rx,s=this.ry-i.ry;return Math.hypot(a,s)}},{key:"setPos",value:function(i,a){this.rx=i,this.ry=a}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(i){var a=i.rx-this.rx,s=i.ry-this.ry,u=Math.hypot(a,s);u=u<1e-4?1e-4:u;var l=this.g*(this.degree+1)*(i.degree+1)/u;this.fx+=l*a/u,this.fy+=l*s/u}},{key:"in",value:function(i){return i.contains(this.rx,this.ry)}},{key:"add",value:function(i){var a=this.mass+i.mass;return new n({rx:(this.rx*this.mass+i.rx*i.mass)/a,ry:(this.ry*this.mass+i.ry*i.mass)/a,mass:a,degree:this.degree+i.degree})}}])&&md(t.prototype,e),r&&md(t,r),n}();function bd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var ly=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.xmid=i.xmid,this.ymid=i.ymid,this.length=i.length,this.massCenter=i.massCenter||[0,0],this.mass=i.mass||1}var t,e,r;return t=n,(e=[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(i,a){var s=this.length/2;return i<=this.xmid+s&&i>=this.xmid-s&&a<=this.ymid+s&&a>=this.ymid-s}},{key:"NW",value:function(){var i=new n({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2});return i}},{key:"NE",value:function(){var i=new n({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2});return i}},{key:"SW",value:function(){var i=new n({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2});return i}},{key:"SE",value:function(){var i=new n({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2});return i}}])&&bd(t.prototype,e),r&&bd(t,r),n}();function xd(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var fy=function(){function n(i){(function(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,n),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,i!=null&&(this.quad=i)}var t,e,r;return t=n,(e=[{key:"insert",value:function(i){this.body!=null?this._isExternal()?(this.quad&&(this.NW=new n(this.quad.NW()),this.NE=new n(this.quad.NE()),this.SW=new n(this.quad.SW()),this.SE=new n(this.quad.SE())),this._putBody(this.body),this._putBody(i),this.body=this.body.add(i)):(this.body=this.body.add(i),this._putBody(i)):this.body=i}},{key:"_putBody",value:function(i){this.quad&&(i.in(this.quad.NW())&&this.NW?this.NW.insert(i):i.in(this.quad.NE())&&this.NE?this.NE.insert(i):i.in(this.quad.SW())&&this.SW?this.SW.insert(i):i.in(this.quad.SE())&&this.SE&&this.SE.insert(i))}},{key:"_isExternal",value:function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}},{key:"updateForce",value:function(i){this.body!=null&&i!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(i)<this.theta?i.addForce(this.body):(this.NW&&this.NW.updateForce(i),this.NE&&this.NE.updateForce(i),this.SW&&this.SW.updateForce(i),this.SE&&this.SE.updateForce(i)))}}])&&xd(t.prototype,e),r&&xd(t,r),n}();function wd(n){return(wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function _d(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Sd(n,t){return(Sd=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(n,t)}function hy(n){var t=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,r=Zu(n);if(t){var i=Zu(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return dy(this,e)}}function dy(n,t){return!t||wd(t)!=="object"&&typeof t!="function"?function(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n):t}function Zu(n){return(Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(n)}var py=function(n){(function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),u&&Sd(s,u)})(a,n);var t,e,r,i=hy(a);function a(s){var u;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),(u=i.call(this)).center=[0,0],u.width=300,u.height=300,u.nodes=[],u.edges=[],u.kr=5,u.kg=1,u.mode="normal",u.preventOverlap=!1,u.dissuadeHubs=!1,u.barnesHut=void 0,u.maxIteration=0,u.ks=.1,u.ksmax=10,u.tao=.1,u.onLayoutEnd=function(){},u.prune=void 0,u.updateCfg(s),u}return t=a,(e=[{key:"getDefaultCfg",value:function(){return{}}},{key:"execute",value:function(){var s=this.nodes,u=this.onLayoutEnd,l=this.prune,h=this.maxIteration;this.width||typeof window=="undefined"||(this.width=window.innerWidth),this.height||typeof window=="undefined"||(this.height=window.innerHeight);for(var v=[],k=s.length,T=0;T<k;T+=1){var I=s[T],j=10,F=10;ur(I.size)&&(j=I.size,F=I.size),Ii(I.size)?(isNaN(I.size[0])||(j=I.size[0]),isNaN(I.size[1])||(F=I.size[1])):Ao(I.size)&&(j=I.size.width,F=I.size.height),this.getWidth&&!isNaN(this.getWidth(I))&&(F=this.getWidth(I)),this.getHeight&&!isNaN(this.getHeight(I))&&(j=this.getHeight(I));var B=Math.max(j,F);v.push(B)}this.barnesHut===void 0&&k>250&&(this.barnesHut=!0),this.prune===void 0&&k>100&&(this.prune=!0),this.maxIteration!==0||this.prune?this.maxIteration===0&&l&&(h=100,k<=200&&k>100?h=500:k>200&&(h=950),this.maxIteration=h):(h=250,k<=200&&k>100?h=1e3:k>200&&(h=1200),this.maxIteration=h),this.kr||(this.kr=50,k>100&&k<=500?this.kr=20:k>500&&(this.kr=1)),this.kg||(this.kg=20,k>100&&k<=500?this.kg=10:k>500&&(this.kg=1)),this.nodes=this.updateNodesByForces(v),u()}},{key:"updateNodesByForces",value:function(s){for(var u=this.edges,l=this.maxIteration,h=this.nodes,v=u.filter(function(ct){return fn(ct,"source")!==fn(ct,"target")}),k=h.length,T=v.length,I=[],j={},F={},B=[],U=0;U<k;U+=1)j[h[U].id]=U,I[U]=0,(h[U].x===void 0||isNaN(h[U].x))&&(h[U].x=1e3*Math.random()),(h[U].y===void 0||isNaN(h[U].y))&&(h[U].y=1e3*Math.random()),B.push({x:h[U].x,y:h[U].y});for(var q=0;q<T;q+=1){for(var $=void 0,ve=void 0,de=0,me=0,Te=0;Te<k;Te+=1){var Oe=fn(v[q],"source"),Pe=fn(v[q],"target");h[Te].id===Oe?($=h[Te],de=Te):h[Te].id===Pe&&(ve=h[Te],me=Te),F[q]={sourceIdx:de,targetIdx:me}}$&&(I[j[$.id]]+=1),ve&&(I[j[ve.id]]+=1)}var Ze=l;if(h=this.iterate(Ze,j,F,T,I,s),this.prune){for(var nt=0;nt<T;nt+=1)I[F[nt].sourceIdx]<=1?(h[F[nt].sourceIdx].x=h[F[nt].targetIdx].x,h[F[nt].sourceIdx].y=h[F[nt].targetIdx].y):I[F[nt].targetIdx]<=1&&(h[F[nt].targetIdx].x=h[F[nt].sourceIdx].x,h[F[nt].targetIdx].y=h[F[nt].sourceIdx].y);this.prune=!1,this.barnesHut=!1,Ze=100,h=this.iterate(Ze,j,F,T,I,s)}return h}},{key:"iterate",value:function(s,u,l,h,v,k){for(var T=this.nodes,I=this.kr,j=this.preventOverlap,F=this.barnesHut,B=T.length,U=0,q=s,$=[],ve=[],de=[],me=0;me<B;me+=1)if($[2*me]=0,$[2*me+1]=0,F){var Te={id:me,rx:T[me].x,ry:T[me].y,mass:1,g:I,degree:v[me]};de[me]=new cy(Te)}for(;q>0;){for(var Oe=0;Oe<B;Oe+=1)ve[2*Oe]=$[2*Oe],ve[2*Oe+1]=$[2*Oe+1],$[2*Oe]=0,$[2*Oe+1]=0;$=this.getAttrForces(q,50,h,u,l,v,k,$),$=F&&(j&&q>50||!j)?this.getOptRepGraForces($,de,v):this.getRepGraForces(q,50,$,100,k,v);var Pe=this.updatePos($,ve,U,v);T=Pe.nodes,U=Pe.sg,q--,this.tick&&this.tick()}return T}},{key:"getAttrForces",value:function(s,u,l,h,v,k,T,I){for(var j=this.nodes,F=this.preventOverlap,B=this.dissuadeHubs,U=this.mode,q=this.prune,$=0;$<l;$+=1){var ve=j[v[$].sourceIdx],de=v[$].sourceIdx,me=j[v[$].targetIdx],Te=v[$].targetIdx;if(!q||!(k[de]<=1||k[Te]<=1)){var Oe=[me.x-ve.x,me.y-ve.y],Pe=Math.hypot(Oe[0],Oe[1]);Pe=Pe<1e-4?1e-4:Pe,Oe[0]=Oe[0]/Pe,Oe[1]=Oe[1]/Pe,F&&s<u&&(Pe=Pe-T[de]-T[Te]);var Ze=Pe,nt=Ze;U==="linlog"&&(nt=Ze=Math.log(1+Pe)),B&&(Ze=Pe/k[de],nt=Pe/k[Te]),F&&s<u&&Pe<=0?(Ze=0,nt=0):F&&s<u&&Pe>0&&(Ze=Pe,nt=Pe),I[2*h[ve.id]]+=Ze*Oe[0],I[2*h[me.id]]-=nt*Oe[0],I[2*h[ve.id]+1]+=Ze*Oe[1],I[2*h[me.id]+1]-=nt*Oe[1]}}return I}},{key:"getRepGraForces",value:function(s,u,l,h,v,k){for(var T=this.nodes,I=this.preventOverlap,j=this.kr,F=this.kg,B=this.center,U=this.prune,q=T.length,$=0;$<q;$+=1){for(var ve=$+1;ve<q;ve+=1)if(!U||!(k[$]<=1||k[ve]<=1)){var de=[T[ve].x-T[$].x,T[ve].y-T[$].y],me=Math.hypot(de[0],de[1]);me=me<1e-4?1e-4:me,de[0]=de[0]/me,de[1]=de[1]/me,I&&s<u&&(me=me-v[$]-v[ve]);var Te=j*(k[$]+1)*(k[ve]+1)/me;I&&s<u&&me<0?Te=h*(k[$]+1)*(k[ve]+1):I&&s<u&&me===0?Te=0:I&&s<u&&me>0&&(Te=j*(k[$]+1)*(k[ve]+1)/me),l[2*$]-=Te*de[0],l[2*ve]+=Te*de[0],l[2*$+1]-=Te*de[1],l[2*ve+1]+=Te*de[1]}var Oe=[T[$].x-B[0],T[$].y-B[1]],Pe=Math.hypot(Oe[0],Oe[1]);Oe[0]=Oe[0]/Pe,Oe[1]=Oe[1]/Pe;var Ze=F*(k[$]+1);l[2*$]-=Ze*Oe[0],l[2*$+1]-=Ze*Oe[1]}return l}},{key:"getOptRepGraForces",value:function(s,u,l){for(var h=this.nodes,v=this.kg,k=this.center,T=this.prune,I=h.length,j=9e10,F=-9e10,B=9e10,U=-9e10,q=0;q<I;q+=1)T&&l[q]<=1||(u[q].setPos(h[q].x,h[q].y),h[q].x>=F&&(F=h[q].x),h[q].x<=j&&(j=h[q].x),h[q].y>=U&&(U=h[q].y),h[q].y<=B&&(B=h[q].y));for(var $=Math.max(F-j,U-B),ve=new ly({xmid:(F+j)/2,ymid:(U+B)/2,length:$,massCenter:k,mass:I}),de=new fy(ve),me=0;me<I;me+=1)T&&l[me]<=1||u[me].in(ve)&&de.insert(u[me]);for(var Te=0;Te<I;Te+=1)if(!(T&&l[Te]<=1)){u[Te].resetForce(),de.updateForce(u[Te]),s[2*Te]-=u[Te].fx,s[2*Te+1]-=u[Te].fy;var Oe=[h[Te].x-k[0],h[Te].y-k[1]],Pe=Math.hypot(Oe[0],Oe[1]);Pe=Pe<1e-4?1e-4:Pe,Oe[0]=Oe[0]/Pe,Oe[1]=Oe[1]/Pe;var Ze=v*(l[Te]+1);s[2*Te]-=Ze*Oe[0],s[2*Te+1]-=Ze*Oe[1]}return s}},{key:"updatePos",value:function(s,u,l,h){for(var v=this.nodes,k=this.ks,T=this.tao,I=this.prune,j=this.ksmax,F=v.length,B=[],U=[],q=0,$=0,ve=0;ve<F;ve+=1)if(!(I&&h[ve]<=1)){var de=[s[2*ve]-u[2*ve],s[2*ve+1]-u[2*ve+1]],me=Math.hypot(de[0],de[1]),Te=[s[2*ve]+u[2*ve],s[2*ve+1]+u[2*ve+1]],Oe=Math.hypot(Te[0],Te[1]);B[ve]=me,U[ve]=Oe/2,q+=(h[ve]+1)*B[ve],$+=(h[ve]+1)*U[ve]}var Pe=l;l=T*$/q,Pe!==0&&(l=l>1.5*Pe?1.5*Pe:l);for(var Ze=0;Ze<F;Ze+=1)if(!(I&&h[Ze]<=1)){var nt=k*l/(1+l*Math.sqrt(B[Ze])),ct=Math.hypot(s[2*Ze],s[2*Ze+1]),st=j/(ct=ct<1e-4?1e-4:ct),It=(nt=nt>st?st:nt)*s[2*Ze],gt=nt*s[2*Ze+1];v[Ze].x+=It,v[Ze].y+=gt}return{nodes:v,sg:l}}}])&&_d(t.prototype,e),r&&_d(t,r),a}(Wi),Ws=new Proxy({},{get:function(n,t){return ug(t)},set:function(n,t,e){return Ri(t,e),!0}}),gy=o(82),Xs=o.n(gy),Ed=mr.traverseTree,vy=function(n,t){return n?Object(p.isNumber)(n)?function(e){return n}:n:function(e){return t||1}},yy=function(n,t){var e=[],r=[],i={},a=0;for(a=0;a<n.length;a++){var s=n[a];i[s.id]=a,e.push(s.x),e.push(s.y),e.push(0),e.push(0),r.push([])}for(a=0;a<t.length;a++){var u=t[a];r[i[u.source]].push(i[u.target]),r[i[u.target]].push(i[u.source])}var l=0;for(a=0;a<n.length;a++){var h=e.length,v=r[a],k=v.length;e[4*a+2]=h,e[4*a+3]=v.length,l=Math.max(l,v.length);for(var T=0;T<k;++T){var I=v[T];e.push(+I)}}for(;e.length%4!=0;)e.push(0);return{array:new Float32Array(e),maxEdgePerVetex:l}},my=function(n,t,e){var r=[],i=[],a={},s=0;for(s=0;s<n.length;s++){var u=n[s];a[u.id]=s,r.push(u.x),r.push(u.y),r.push(0),r.push(0),i.push([])}for(s=0;s<t.length;s++){var l=t[s];i[a[l.source]].push(a[l.target]),i[a[l.source]].push(e(l)),i[a[l.target]].push(a[l.source]),i[a[l.target]].push(e(l))}var h=0;for(s=0;s<n.length;s++){var v=r.length,k=i[s],T=k.length;r[4*s+2]=v,r[4*s+3]=T/2,h=Math.max(h,T/2);for(var I=0;I<T;++I){var j=k[I];r.push(+j)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:h}},by=function(n,t,e,r){var i=[],a=[],s={},u=0;for(u=0;u<n.length;u++){var l=n[u];s[l.id]=u,i.push(l.x),i.push(l.y),i.push(0),i.push(0),a.push([])}for(u=0;u<t.length;u++){var h=t[u];a[s[h.source]].push(s[h.target]),a[s[h.source]].push(e(h)),a[s[h.source]].push(r(h)),a[s[h.source]].push(0),a[s[h.target]].push(s[h.source]),a[s[h.target]].push(e(h)),a[s[h.target]].push(r(h)),a[s[h.target]].push(0)}var v=0;for(u=0;u<n.length;u++){var k=i.length,T=a[u],I=T.length;i[4*u+2]=k+1048576*I/4,i[4*u+3]=0,v=Math.max(v,I/4);for(var j=0;j<I;++j){var F=T[j];i.push(+F)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:v}},xy=function(n,t){var e=[],r=n.length,i={};return t.forEach(function(a){n.forEach(function(s,u){if(i[a[s]]===void 0&&(i[a[s]]=Object.keys(i).length),e.push(i[a[s]]),u===r-1)for(;e.length%4!=0;)e.push(0)})}),{array:new Float32Array(e),count:Object.keys(i).length}},wy=function(n){for(var t=[],e=n.length,r=n[0].length,i=function(s){n.forEach(function(u,l){if(t.push(u[s]),l===e-1)for(;t.length%4!=0;)t.push(0)})},a=0;a<r;a++)i(a);return new Float32Array(t)},_y=function(n,t){var e={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",a="y";t&&["V","TB","BT"].indexOf(t)>=0&&(a="x",i="y");var s=0;Ed(n,function(h){return s++,h.x>r.x&&(r.x=h.x),h.x<e.x&&(e.x=h.x),h.y>r.y&&(r.y=h.y),h.y<e.y&&(e.y=h.y),!0});var u=2*Math.PI/s,l=r[a]-e[a];return l===0||Ed(n,function(h){var v=(h[a]-e[a])/l*(2*Math.PI-u)+u,k=Math.abs(i==="x"?h.x-n.x:h.y-n.y);return h.x=k*Math.cos(v),h.y=k*Math.sin(v),!0}),n},Od=function n(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){var e=(t=t||{}).parent!==void 0?t.parent:document.body,r=t.id!==void 0?t.id:"oldie",i=n().getWebGLErrorMessage();i.id=r,e.appendChild(i)}}},Po=Object(b.__assign)(Object(b.__assign)(Object(b.__assign)(Object(b.__assign)({},mr),g),d),y),Sy=Po.radialLayout,Md=function(){function n(t){this.type=t.type,this.radial=t.radial,this.config=t}return n.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(r){var i=Xs.a[e.type](r,e.config);return Sy(i),i}:this.layoutMethod=function(r){return Xs.a[e.type](r,e.config)}},n.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},n.prototype.layout=function(t){return this.init(t),this.execute()},n}();Ri("grid",fg),Ri("random",pg),Ri("force",Lg),Ri("circular",Wg),Ri("dagre",qg),Ri("radial",Ev),Ri("concentric",kv),Ri("mds",Tv),Ri("fruchterman",Pv),Ri("fruchterman-gpu",ry),Ri("gForce",yg),Ri("gForce-gpu",oy),Ri("comboForce",uy),Ri("forceAtlas2",py);var kd=function(n,t){t.isCustomLayout=!0,Ri(n,t)},Ey=function(n,t){var e=n.toString(),r=new Blob(["importScripts('"+t+"');("+e+")()"],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))},Oy=function(n){return n===void 0&&(n="https://unpkg.com/@antv/layout@latest/dist/layout.min.js"),new Ey(function(){var t="LAYOUT_RUN",e="LAYOUT_END",r="LAYOUT_ERROR",i="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(a){(function(s){var u=s.data.type;return u===t||u===i})(a)&&function(s){var u=this;switch(s.data.type){case t:var l,h=s.data,v=h.nodes,k=h.edges,T=h.layoutCfg,I=(q=T===void 0?{}:T).type;if(!(j=layout.getLayoutByName(I))){this.postMessage({type:r,message:"layout "+I+" not found"});break}q.onLayoutEnd=function(){u.postMessage({type:e,nodes:v}),l==null||l.destroy()},(l=new j(q)).init({nodes:v,edges:k}),l.execute();break;case i:var j,F=s.data,B=F.nodes,U=(k=F.edges,F.layoutCfg),q=U===void 0?{}:U,$=F.canvas;if(I=q.type,!(j=layout.getLayoutByName(I))){this.postMessage({type:r,message:"layout "+I+" not found"});break}if(I.split("-")[1]!=="gpu"){this.postMessage({type:r,message:"layout "+I+" does not support GPU"});break}var ve=new j(q);ve.init({nodes:B,edges:k}),ve.executeWithWorker($,this)}}(a)}},n)},My="LAYOUT_RUN",ky="LAYOUT_END",Ay="LAYOUT_ERROR",Cy="LAYOUT_TICK",Ty="GPU_LAYOUT_RUN",Iy="GPU_LAYOUT_END";function Ad(n){return(Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}var jy=function(n){return setTimeout(n,16)},Py=function(n){return clearTimeout(n)},Cd=function(n){return(typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||jy)(n)},Td=function(n){return(typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Py)(n)},Id=["fruchterman","gForce"],Ny=["force","grid","circular"],Dy=function(n){function t(e){var r=n.call(this,e)||this;return r.graph=e,r.layoutCfg=e.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return Object(b.__extends)(t,n),t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker||(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=Oy(this.layoutCfg.workerScriptURL)),this.worker},t.prototype.stopWorker=function(){var e=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,e.requestId&&(Td(e.requestId),e.requestId=null),e.requestId2&&(Td(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,r){var i=this;return new Promise(function(a,s){return Object(b.__awaiter)(i,void 0,void 0,function(){var u,l,h,v,k,T,I;return Object(b.__generator)(this,function(j){switch(j.label){case 0:u=this.graph,l=e.type,e.onLayoutEnd=function(){u.emit("aftersublayout",{type:l}),a()},l&&this.isGPU&&(this.hasGPUVersion(l)?l+="-gpu":console.warn("The '"+l+"' layout does not support GPU calculation for now, it will run in CPU.")),l==="force"||l==="g6force"||l==="gForce"?(h=e.onTick,T=function(){h&&h(),u.refreshPositions()},e.tick=T):e.type==="comboForce"&&(e.comboTrees=u.get("comboTrees"));try{v=new Ws[l](e)}catch(F){console.warn("The layout method: '"+l+"' does not exist! Please specify it first."),s()}return v.enableTick&&(k=e.onTick,T=function(){k&&k(),u.refreshPositions()},v.tick=T),function(F,B){var U;!(!((U=F==null?void 0:F.nodes)===null||U===void 0)&&U.length)||F.nodes.forEach(function(q){q.layoutOrder=B})}(I=this.filterLayoutData(this.data,e),r),v.init(I),u.emit("beforesublayout",{type:l}),[4,v.execute()];case 1:return j.sent(),v.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),this.layoutMethods[r]=v,[2]}})})})},t.prototype.updateLayoutMethod=function(e,r){var i=this;return new Promise(function(a,s){return Object(b.__awaiter)(i,void 0,void 0,function(){var u,l,h;return Object(b.__generator)(this,function(v){switch(v.label){case 0:return u=this.graph,l=r==null?void 0:r.type,r.onLayoutEnd=function(){u.emit("aftersublayout",{type:l}),a()},h=this.filterLayoutData(this.data,r),e.init(h),e.updateCfg(r),u.emit("beforesublayout",{type:l}),[4,e.execute()];case 1:return v.sent(),e.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},t.prototype.layout=function(e){var r=this,i=this.graph;this.data=this.setDataFromGraph();var a=this.data,s=a.nodes,u=a.hiddenNodes;if(!s)return!1;var l=i.get("width"),h=i.get("height"),v={};Object.assign(v,{width:l,height:h,center:[l/2,h/2]},this.layoutCfg),this.layoutCfg=v,this.destoryLayoutMethods(),i.emit("beforelayout"),this.initPositions(v.center,s),this.initPositions(v.center,u);var k=v.type;k&&k.split("-")[1]==="gpu"&&(k=k.split("-")[0],v.gpuEnabled=!0);var T=!1;v.gpuEnabled&&(T=!0,Od().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),T=!1)),this.isGPU=T;var I=v.onLayoutEnd,j=v.layoutEndFormatted,F=v.adjust;if(j||(v.layoutEndFormatted=!0,v.onAllLayoutEnd=function(){return Object(b.__awaiter)(r,void 0,void 0,function(){return Object(b.__generator)(this,function(U){switch(U.label){case 0:return I&&I(),this.refreshLayout(),F&&v.pipes?[4,this.adjustPipesBox(this.data,F)]:[3,2];case 1:U.sent(),this.refreshLayout(),U.label=2;case 2:return i.emit("afterlayout"),[2]}})})}),this.stopWorker(),v.workerEnabled&&this.layoutWithWorker(this.data))return!0;var B=Promise.resolve();return v.type?B=B.then(function(){return Object(b.__awaiter)(r,void 0,void 0,function(){return Object(b.__generator)(this,function(U){switch(U.label){case 0:return[4,this.execLayoutMethod(v,0)];case 1:return[2,U.sent()]}})})}):v.pipes&&v.pipes.forEach(function(U,q){B=B.then(function(){return Object(b.__awaiter)(r,void 0,void 0,function(){return Object(b.__generator)(this,function($){switch($.label){case 0:return[4,this.execLayoutMethod(U,q)];case 1:return[2,$.sent()]}})})})}),B.then(function(){v.onAllLayoutEnd&&v.onAllLayoutEnd(),e&&e()}).catch(function(U){console.warn("graph layout failed,",U)}),!1},t.prototype.layoutWithWorker=function(e){var r=this,i=this.layoutCfg,a=this.graph,s=this.getWorker(),u=this.workerData;if(!s)return!1;u.requestId=null,u.requestId2=null,u.currentTick=null,u.currentTickData=null,a.emit("beforelayout");var l=Promise.resolve();if(i.type)l=l.then(function(){return r.runWebworker(s,e,i)});else if(i.pipes)for(var h=function(T){l=l.then(function(){return r.runWebworker(s,e,T)})},v=0,k=i.pipes;v<k.length;v++)h(k[v]);return l.then(function(){i.onAllLayoutEnd&&i.onAllLayoutEnd()}).catch(function(T){console.error("layout failed",T)}),!0},t.prototype.runWebworker=function(e,r,i){var a=this,s=this.isGPU,u=this.filterLayoutData(r,i),l=u.nodes,h=u.edges,v=document.createElement("canvas"),k=s&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in v,T=function(j,F){var B={};return j&&Ad(j)==="object"?(Object.keys(j).forEach(function(U){j.hasOwnProperty(U)&&F(j[U])&&(B[U]=j[U])}),B):j}(i,function(j){return typeof j!="function"});if(k){var I=v.transferControlToOffscreen();T.type=T.type+"-gpu",e.postMessage({type:Ty,nodes:l,edges:h,layoutCfg:T,canvas:I},[I])}else e.postMessage({type:My,nodes:l,edges:h,layoutCfg:T});return new Promise(function(j,F){e.onmessage=function(B){a.handleWorkerMessage(j,F,B,u,i)}})},t.prototype.handleWorkerMessage=function(e,r,i,a,s){var u=this.graph,l=this.workerData,h=i.data,v=h.type,k=function(){s.onTick&&s.onTick()};switch(v){case Cy:l.currentTick=h.currentTick,l.currentTickData=h,l.requestId||(l.requestId=Cd(function(){$u(a,h),u.refreshPositions(),k(),h.currentTick===h.totalTicks?e():l.currentTick===h.totalTicks&&(l.requestId2=Cd(function(){$u(a,l.currentTickData),u.refreshPositions(),l.requestId2=null,k(),e()})),l.requestId=null}));break;case ky:l.currentTick==null&&($u(a,h),e());break;case Iy:l.currentTick==null&&(function(T,I){for(var j=T.nodes,F=I.vertexEdgeData,B=j.length,U=0;U<B;U++){var q=j[U],$=F[4*U],ve=F[4*U+1];q.x=$,q.y=ve}}(a,h),e());break;case Ay:console.warn("Web-Worker layout error!",h.message),r();break;default:r()}},t.prototype.updateLayoutCfg=function(e){var r=this,i=this.graph,a=this.layoutMethods,s=Object(p.mix)({},this.layoutCfg,e);if(this.layoutCfg=s,a==null?void 0:a.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!e.workerEnabled||!this.layoutWithWorker(this.data)){i.emit("beforelayout");var u=Promise.resolve();a.length===1?u=u.then(function(){return Object(b.__awaiter)(r,void 0,void 0,function(){return Object(b.__generator)(this,function(l){switch(l.label){case 0:return[4,this.updateLayoutMethod(a[0],s)];case 1:return[2,l.sent()]}})})}):a==null||a.forEach(function(l,h){var v=s.pipes[h];u=u.then(function(){return Object(b.__awaiter)(r,void 0,void 0,function(){return Object(b.__generator)(this,function(k){switch(k.label){case 0:return[4,this.updateLayoutMethod(l,v)];case 1:return[2,k.sent()]}})})})}),u.then(function(){s.onAllLayoutEnd&&s.onAllLayoutEnd()}).catch(function(l){console.warn("layout failed",l)})}}else this.layout()},t.prototype.adjustPipesBox=function(e,r){var i=this;return new Promise(function(a){var s=e.nodes;s!=null&&s.length||a(),Ny.includes(r)||(console.warn("The adjust type "+r+" is not supported yet, please assign it with 'force', 'grid', or 'circular'."),a());var u={center:i.layoutCfg.center,nodeSize:function(T){return Math.max(T.height,T.width)},preventOverlap:!0,onLayoutEnd:function(){}},l=i.getLayoutBBox(s),h=l.groupNodes,v=l.layoutNodes,k=Object(p.clone)(v);u.onLayoutEnd=function(){v==null||v.forEach(function(T,I){var j,F,B,U=T.x-((j=k[I])===null||j===void 0?void 0:j.x),q=T.y-((F=k[I])===null||F===void 0?void 0:F.y);(B=h[I])===null||B===void 0||B.forEach(function($){$.x+=U,$.y+=q})}),a()},new Ws[r](u).layout({nodes:v})})},t.prototype.hasGPUVersion=function(e){for(var r=Id.length,i=0;i<r;i++)if(Id[i]===e)return!0;return!1},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(sr);function $u(n,t){for(var e=n.nodes,r=t.nodes,i=e.length,a=0;a<i;a++){var s=e[a];s.x=r[a].x,s.y=r[a].y}}var Qu,jd=S.transform,Ju=function(n){function t(e){var r=n.call(this,e)||this,i=r.get("defaultNode");return i||r.set("defaultNode",{type:"circle"}),i.type||(i.type="circle",r.set("defaultNode",i)),r.destroyed=!1,r}return Object(b.__extends)(t,n),t.prototype.initLayoutController=function(){var e=new Dy(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new tg(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if(typeof e=="string"&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var r,i=e.clientWidth,a=e.clientHeight,s=this.get("width")||i,u=this.get("height")||a;if(this.get("width")||this.get("height")||(this.set("width",i),this.set("height",a)),this.get("renderer")==="svg")r=new ko.Canvas({container:e,width:s,height:u});else{var l={container:e,width:s,height:u},h=this.get("pixelRatio");h&&(l.pixelRatio=h),r=new Wr.Canvas(l)}this.set("canvas",r)},t.prototype.initPlugins=function(){var e=this;Object(p.each)(e.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(e)})},t.prototype.downloadImageWatermark=function(e,r,i,a){return Object(b.__awaiter)(this,void 0,void 0,function(){var s,u,l;return Object(b.__generator)(this,function(h){switch(h.label){case 0:return s=e.style.backgroundImage,u=s.slice(5,s.length-2),(l=new Image).src=u,[4,new Promise(function(v){l.onload=function(){var k=r.createPattern(l,"repeat");r.rect(0,0,i,a),r.fillStyle=k,r.fill(),v("")}})];case 1:return h.sent(),[2]}})})},t.prototype.asyncToDataUrl=function(e,r,i,a,s,u){var l=this,h=document.querySelector(".g6-graph-watermarker"),v=this.get("canvas"),k=v.getRenderer(),T=u||v.get("el"),I="";e||(e="image/png"),setTimeout(function(){return Object(b.__awaiter)(l,void 0,void 0,function(){var j,F,B,U,q,$,ve,de,me,Te;return Object(b.__generator)(this,function(Oe){switch(Oe.label){case 0:return k!=="svg"?[3,1]:(j=T.cloneNode(!0),F=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(B=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",F)).replaceChild(j,B.documentElement),U=new XMLSerializer().serializeToString(B),I="data:image/svg+xml;charset=utf8,"+encodeURIComponent(U),[3,4]);case 1:return q=void 0,$=T.getContext("2d"),ve=a||this.get("width"),de=s||this.get("height"),me=void 0,h?[4,this.downloadImageWatermark(h,$,ve,de)]:[3,3];case 2:Oe.sent(),Oe.label=3;case 3:r&&(Te=typeof window!="undefined"?window.devicePixelRatio:1,q=$.getImageData(0,0,ve*Te,de*Te),me=$.globalCompositeOperation,$.globalCompositeOperation="destination-over",$.fillStyle=r,$.fillRect(0,0,ve,de)),I=T.toDataURL(e),r&&($.clearRect(0,0,ve,de),$.putImageData(q,0,0),$.globalCompositeOperation=me),Oe.label=4;case 4:return i&&i(I),[2]}})})},16)},t.prototype.toDataURL=function(e,r){var i=this.get("canvas"),a=i.getRenderer(),s=i.get("el");e||(e="image/png");var u="";if(a==="svg"){var l=s.cloneNode(!0),h=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),v=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",h);v.replaceChild(l,v.documentElement);var k=new XMLSerializer().serializeToString(v);u="data:image/svg+xml;charset=utf8,"+encodeURIComponent(k)}else{var T=void 0,I=s.getContext("2d"),j=this.get("width"),F=this.get("height"),B=void 0;if(r){var U=typeof window!="undefined"?window.devicePixelRatio:1;T=I.getImageData(0,0,j*U,F*U),B=I.globalCompositeOperation,I.globalCompositeOperation="destination-over",I.fillStyle=r,I.fillRect(0,0,j,F)}u=s.toDataURL(e),r&&(I.clearRect(0,0,j,F),I.putImageData(T,0,0),I.globalCompositeOperation=B)}return u},t.prototype.toFullDataURL=function(e,r,i){var a=this.get("group").getCanvasBBox(),s=a.height,u=a.width,l=this.get("renderer"),h=ei('<id="virtual-image"></div>'),v=i?i.backgroundColor:void 0,k=i?i.padding:void 0;k?Object(p.isNumber)(k)&&(k=[k,k,k,k]):k=[0,0,0,0];var T=s+k[0]+k[2],I=u+k[1]+k[3],j={container:h,height:T,width:I,quickHit:!0},F=l==="svg"?new ko.Canvas(j):new Wr.Canvas(j),B=this.get("group").clone(),U=Object(p.clone)(B.getMatrix());U||(U=[1,0,0,0,1,0,0,0,1]);var q=(a.maxX+a.minX)/2,$=(a.maxY+a.minY)/2;U=jd(U,[["t",-q,-$],["t",u/2+k[3],s/2+k[0]]]),B.resetMatrix(),B.setMatrix(U),F.add(B);var ve=F.get("el"),de="";r||(r="image/png"),setTimeout(function(){if(l==="svg"){var me=ve.cloneNode(!0),Te=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Oe=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Te);Oe.replaceChild(me,Oe.documentElement);var Pe=new XMLSerializer().serializeToString(Oe);de="data:image/svg+xml;charset=utf8,"+encodeURIComponent(Pe)}else{var Ze=void 0,nt=ve.getContext("2d"),ct=void 0;if(v){var st=typeof window!="undefined"?window.devicePixelRatio:1;Ze=nt.getImageData(0,0,I*st,T*st),ct=nt.globalCompositeOperation,nt.globalCompositeOperation="destination-over",nt.fillStyle=v,nt.fillRect(0,0,I,T)}de=ve.toDataURL(r),v&&(nt.clearRect(0,0,I,T),nt.putImageData(Ze,0,0),nt.globalCompositeOperation=ct)}e&&e(de)},16)},t.prototype.downloadFullImage=function(e,r,i){var a=this,s=this.get("group").getCanvasBBox(),u=s.height,l=s.width,h=this.get("renderer"),v=ei('<id="virtual-image"></div>'),k=document.querySelector(".g6-graph-watermarker"),T=i?i.backgroundColor:void 0,I=i?i.padding:void 0;I?Object(p.isNumber)(I)&&(I=[I,I,I,I]):I=[0,0,0,0];var j=u+I[0]+I[2],F=l+I[1]+I[3];if(k){var B=this.get("graphWaterMarker").cfg||{},U=B.width,q=B.height;j=Math.ceil(j/q)*q,F=Math.ceil(F/U)*U}var $={container:v,height:j,width:F},ve=h==="svg"?new ko.Canvas($):new Wr.Canvas($),de=this.get("group").clone(),me=Object(p.clone)(de.getMatrix());me||(me=[1,0,0,0,1,0,0,0,1]);var Te=(s.maxX+s.minX)/2,Oe=(s.maxY+s.minY)/2;me=jd(me,[["t",-Te,-Oe],["t",l/2+I[3],u/2+I[0]]]),de.resetMatrix(),de.setMatrix(me),ve.add(de);var Pe=ve.get("el");r||(r="image/png"),this.asyncToDataUrl(r,T,function(Ze){var nt=document.createElement("a"),ct=(e||"graph")+(h==="svg"?".svg":"."+r.split("/")[1]);a.dataURLToImage(Ze,h,nt,ct);var st=document.createEvent("MouseEvents");st.initEvent("click",!1,!1),nt.dispatchEvent(st)},F,j,Pe)},t.prototype.downloadImage=function(e,r,i){var a=this;this.isAnimating()&&this.stopAnimate();var s=this.get("canvas").getRenderer();r||(r="image/png");var u=(e||"graph")+(s==="svg"?".svg":r.split("/")[1]),l=document.createElement("a");this.asyncToDataUrl(r,i,function(h){a.dataURLToImage(h,s,l,u);var v=document.createEvent("MouseEvents");v.initEvent("click",!1,!1),l.dispatchEvent(v)})},t.prototype.dataURLToImage=function(e,r,i,a){if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var s=e.split(","),u="";if(s&&s.length>0){var l=s[0].match(/:(.*?);/);l&&l.length>=2&&(u=l[1])}for(var h=atob(s[1]),v=h.length,k=new Uint8Array(v);v--;)k[v]=h.charCodeAt(v);var T=new Blob([k],{type:u});window.navigator.msSaveBlob?window.navigator.msSaveBlob(T,a):i.addEventListener("click",function(){i.download=a,i.href=window.URL.createObjectURL(T)})}else i.addEventListener("click",function(){i.download=a,i.href=e})},t.prototype.addPlugin=function(e){e.destroyed||(this.get("plugins").push(e),e.initPlugin(this))},t.prototype.removePlugin=function(e){var r=this.get("plugins"),i=r.indexOf(e);i>=0&&(e.destroyPlugin(),r.splice(i,1))},t.prototype.setImageWaterMarker=function(e,r){e===void 0&&(e=Xo.waterMarkerImage);var i=this.get("container");Object(p.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),s=Object(p.deepMix)({},Xo.imageWaterMarkerConfig,r),u=s.width,l=s.height,h=s.compatible,v=s.image;if(!a){var k={container:i,width:u,height:l,capture:!1},T=this.get("pixelRatio");T&&(k.pixelRatio=T),a=new Wr.Canvas(k),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var I=a.get("context"),j=v.rotate,F=v.x,B=v.y;I.rotate(-j*Math.PI/180);var U=new Image;U.crossOrigin="anonymous",U.src=e,U.onload=function(){if(I.drawImage(U,F,B,v.width,v.height),I.rotate(j*Math.PI/180),h)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var q=document.querySelector(".g6-graph-watermarker");q||((q=document.createElement("div")).className="g6-graph-watermarker"),q.className="g6-graph-watermarker",a.destroyed||(q.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",i.appendChild(q))}}},t.prototype.setTextWaterMarker=function(e,r){var i=this.get("container");Object(p.isString)(i)&&(i=document.getElementById(i)),i.style.position||(i.style.position="relative");var a=this.get("graphWaterMarker"),s=Object(p.deepMix)({},Xo.textWaterMarkerConfig,r),u=s.width,l=s.height,h=s.compatible,v=s.text;if(!a){var k={container:i,width:u,height:l,capture:!1},T=this.get("pixelRatio");T&&(k.pixelRatio=T),a=new Wr.Canvas(k),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var I=a.get("context"),j=v.rotate,F=v.fill,B=v.fontFamily,U=v.fontSize,q=v.baseline,$=v.x,ve=v.y,de=v.lineHeight;I.rotate(-j*Math.PI/180),I.font=U+"px "+B,I.fillStyle=F,I.textBaseline=q;for(var me=e.length-1;me>=0;me--)I.fillText(e[me],$,ve+me*de);if(I.rotate(j*Math.PI/180),h)i.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var Te=document.querySelector(".g6-graph-watermarker");Te||((Te=document.createElement("div")).className="g6-graph-watermarker"),Te.style.cssText="background-image: url("+a.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",i.appendChild(Te)}},t.prototype.destroy=function(){var e,r,i,a;Object(p.each)(this.get("plugins"),function(v){v.destroyPlugin()});var s=this.get("tooltips");if(s)for(var u=0;u<s.length;u++){var l=s[u];if(l){var h=l.parentElement;h&&h.removeChild(l)}}(e=this.get("eventController"))===null||e===void 0||e.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(i=this.get("graphWaterMarker"))===null||i===void 0||i.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),n.prototype.destroy.call(this)},t}(tt),Ry=Po.radialLayout,Ly=Po.traverseTree,Pd=function(n){function t(e){var r=n.call(this,e)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return Object(b.__extends)(t,n),t.prototype.getLayout=function(){var e=this.get("layout");return e?typeof e=="function"?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="TB"),e.radial?function(r){var i=Xs.a[e.type](r,e);return Ry(i),i}:function(r){return Xs.a[e.type](r,e)}):null},t.indexOfChild=function(e,r){var i=-1;return Object(p.each)(e,function(a,s){if(r===a.id)return i=s,!1}),i},t.prototype.getDefaultCfg=function(){var e=n.prototype.getDefaultCfg.call(this);return e.animate=!0,e},t.prototype.innerAddChild=function(e,r,i){var a=this,s=e.data;s&&(s.x=e.x,s.y=e.y,s.depth=e.depth);var u=a.addItem("node",s,!1);if(r){if(u.set("parent",r),i){var l=r.get("originAttrs");if(l)u.set("originAttrs",l);else{var h=r.getModel();u.set("originAttrs",{x:h.x,y:h.y})}}var v=r.get("children");v?v.push(u):r.set("children",[u]),a.addItem("edge",{source:r.get("id"),target:u.get("id"),id:r.get("id")+":"+u.get("id")},!1)}return Object(p.each)(e.children||[],function(k){a.innerAddChild(k,u,i)}),a.emit("afteraddchild",{item:u,parent:r}),u},t.prototype.innerUpdateChild=function(e,r,i){var a=this,s=a.findById(e.id);if(s){Object(p.each)(e.children||[],function(I){a.innerUpdateChild(I,s,i)});var u,l,h=s.get("children");if(h&&h.length>0)for(var v=h.length-1;v>=0;v--){var k=h[v].getModel();t.indexOfChild(e.children||[],k.id)===-1&&(a.innerRemoveChild(k.id,{x:e.x,y:e.y},i),h.splice(v,1))}s.get("originAttrs")&&(u=s.get("originAttrs").x,l=s.get("originAttrs").y);var T=s.getModel();i&&s.set("originAttrs",{x:T.x,y:T.y}),s.set("model",e.data),u===e.x&&l===e.y||s.updatePosition({x:e.x,y:e.y})}else a.innerAddChild(e,r,i)},t.prototype.innerRemoveChild=function(e,r,i){var a=this,s=a.findById(e);if(s)if(Object(p.each)(s.get("children"),function(l){a.innerRemoveChild(l.getModel().id,r,i)}),i){var u=s.getModel();s.set("to",r),s.set("originAttrs",{x:u.x,y:u.y}),a.get("removeList").push(s)}else a.removeItem(s,!1)},t.prototype.changeData=function(e){var r=this;this.getNodes().map(function(i){return r.clearItemStates(i)}),this.getEdges().map(function(i){return r.clearItemStates(i)}),e?(r.data(e),r.render()):r.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(e)},t.prototype.updateLayout=function(e){e?(this.set("layout",e),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},t.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(e)},t.prototype.layout=function(e){var r=this.get("data"),i=this.get("layoutMethod"),a=i?i(r,this.get("layout")):r,s=this.get("animate");this.emit("beforerefreshlayout",{data:r,layoutData:a}),this.emit("beforelayout"),this.innerUpdateChild(a,void 0,s),e&&this.get("viewController").fitView(),s?this.layoutAnimate(a):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:r,layoutData:a}),this.emit("afterlayout")},t.prototype.addChild=function(e,r){this.emit("beforeaddchild",{model:e,parent:r}),Object(p.isString)(r)||(r=r.get("id"));var i=this.findDataById(r);i&&(i.children||(i.children=[]),i.children.push(e),this.changeData())},t.prototype.updateChildren=function(e,r){r&&this.findById(r)?(this.findDataById(r).children=e,this.changeData()):console.warn("Update children failed! There is no node with id '"+r+"'")},t.prototype.updateChild=function(e,r){if(r&&this.findById(r)){var i=this.findDataById(r),a=this.findById(e.id);if(i.children||(i.children=[]),a){var s=t.indexOfChild(i.children,e.id);i.children[s]=e}else i.children.push(e);this.changeData()}else this.changeData(e)},t.prototype.removeChild=function(e){var r=this.findById(e);if(r){var i=r.get("parent");if(i&&!i.destroyed){var a=this.findDataById(i.get("id")),s=a&&a.children||[],u=r.getModel(),l=t.indexOfChild(s,u.id);s.splice(l,1)}this.changeData()}},t.prototype.findDataById=function(e,r){var i=this;if(r||(r=i.get("data")),e===r.id)return r;var a=null;return Object(p.each)(r.children||[],function(s){return s.id===e?(a=s,!1):!(a=i.findDataById(e,s))&&void 0}),a},t.prototype.layoutAnimate=function(e,r){var i=this,a=this.get("animateCfg");i.emit("beforeanimate",{data:e}),i.getEdges().forEach(function(s){var u=s.get("model");u.sourceAnchor||(u.sourceAnchor=s.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(s){Ly(e,function(u){var l=i.findById(u.id);if(l){var h=l.get("originAttrs"),v=l.get("model");if(h||(h={x:v.x,y:v.y},l.set("originAttrs",h)),r){var k=r(l,s,h,e);l.set("model",Object.assign(v,k))}else v.x=h.x+(u.x-h.x)*s,v.y=h.y+(u.y-h.y)*s}return!0}),Object(p.each)(i.get("removeList"),function(u){var l=u.getModel(),h=u.get("originAttrs"),v=u.get("to");l.x=h.x+(v.x-h.x)*s,l.y=h.y+(v.y-h.y)*s}),i.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){Object(p.each)(i.getNodes(),function(s){s.set("originAttrs",null)}),Object(p.each)(i.get("removeList"),function(s){i.removeItem(s)}),i.set("removeList",[]),a.callback&&a.callback(),i.emit("afteranimate",{data:e})},delay:a.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(){var e=this.get("data");if(!e||!Object(p.isObject)(e)||!Object.keys(e).length)throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t}(Ju),co=function(){function n(t){this._cfgs=Object(p.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return n.prototype.getDefaultCfgs=function(){return{}},n.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var r=e.getEvents(),i={};Object(p.each)(r,function(a,s){var u=Object(p.wrapBehavior)(e,a);i[s]=u,t.on(s,u)}),this._events=i,this.init()},n.prototype.getEvents=function(){return{}},n.prototype.get=function(t){return this._cfgs[t]},n.prototype.set=function(t,e){this._cfgs[t]=e},n.prototype.destroy=function(){},n.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;Object(p.each)(e,function(r,i){t.off(i,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},n}(),By=(Qu=function(n,t){return(Qu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])})(n,t)},function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}Qu(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),Nd="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Gy=function(n){function t(e){return n.call(this,e)||this}return By(t,n),t.prototype.getDefaultCfgs=function(){return{img:Nd,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),r=e.get("container"),i=e.get("canvas").get("el"),a=this.get("img")||Nd,s=ei(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),u=ei(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `+a+`;
        user-select: none
        '></div>`);this.set("container",s),this.set("gridContainer",u),this.positionInit(),s.appendChild(u),r.insertBefore(s,i)},t.prototype.positionInit=function(){var e=this.get("graph"),r=e.get("minZoom"),i=e.get("width"),a=e.get("height");xn(this.get("container"),{width:i+"px",height:a+"px"});var s=80*i/r,u=80*a/r;xn(this.get("gridContainer"),{width:s+"px",height:u+"px",left:"-"+s/2+"px",top:"-"+u/2+"px"})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var r=this.get("gridContainer"),i=e.matrix;i||(i=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow");xn(r,{transform:"matrix("+i[0]+", "+i[1]+", "+i[3]+", "+i[4]+", "+(a?i[6]:"0")+", "+(a?i[7]:"0")+")"})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph").get("container"),r=this.get("container");e.removeChild(r)},t}(co),Fy=o(80),ec=o.n(Fy),zy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ec()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var Uy=function(n){function t(e){return n.call(this,e)||this}return zy(t,n),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=ei("<div class="+(this.get("className")||"g6-component-contextmenu")+"></div>");xn(e,{top:"0px",position:"absolute",visibility:"hidden"});var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.appendChild(e),this.set("menu",e)},t.prototype.onMenuShow=function(e){var r=this;e.preventDefault(),e.stopPropagation();var i=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&i.indexOf(e.item.getType())===-1)return void r.onMenuHide()}else if(i.indexOf("canvas")===-1)return void r.onMenuHide();if(this.get("shouldBegin")(e)){var a=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),l=s(e,u);Object(p.isString)(l)?a.innerHTML=l:a.innerHTML=l.outerHTML,this.removeMenuEventListener();var h=this.get("handleMenuClick");if(h){var v=function(me){h(me.target,e.item,u)};this.set("handleMenuClickWrapper",v),a.addEventListener("click",v)}var k=u.get("width"),T=u.get("height"),I=a.getBoundingClientRect(),j=this.get("offsetX")||0,F=this.get("offsetY")||0,B=u.getContainer().offsetTop,U=u.getContainer().offsetLeft,q=e.canvasX+U+j,$=e.canvasY+B+F;q+I.width>k&&(q=e.canvasX-I.width-j+U),$+I.height>T&&($=e.canvasY-I.height-F+B),xn(a,{top:$+"px",left:q+"px",visibility:"visible"});var ve=this.get("trigger")==="click",de=function(me){ve?ve=!1:r.onMenuHide()};document.body.addEventListener("click",de),this.set("handler",de)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),r=this.get("handler");e&&(this.get("menu").removeEventListener("click",e),this.set("handleMenuClickWrapper",null)),r&&document.body.removeEventListener("click",r)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&xn(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}},t}(co),Vy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Dd=function(){return(Dd=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Rd=Math.max,Wy=S.transform,Xy=function(n){function t(e){var r=n.call(this,e)||this;return r.handleUpdateCanvas=Object(p.debounce)(function(i){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return Vy(t,n),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,r=this._cfgs,i=r.size,a=r.graph;if(!this.destroyed){var s=this.get("canvas").get("container"),u=ei(`
      <div
        class=`+r.viewportClassName+`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff'
        draggable=true>
      </div>`),l=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,h=0,v=0,k=!1,T=0,I=0,j=0,F=0,B=0,U=0;u.addEventListener("dragstart",function(q){var $,ve;if(q.dataTransfer){var de=new Image;de.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(ve=($=q.dataTransfer).setDragImage)===null||ve===void 0||ve.call($,de,0,0);try{q.dataTransfer.setData("text/html","view-port-minimap")}catch(Te){q.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,q.target===u){var me=u.style;T=parseInt(me.left,10),I=parseInt(me.top,10),j=parseInt(me.width,10),F=parseInt(me.height,10),j>i[0]||F>i[1]||(U=a.getZoom(),B=e.get("ratio"),k=!0,h=q.clientX,v=q.clientY)}},!1),u.addEventListener(l?"dragover":"drag",function(q){if(k&&!Object(p.isNil)(q.clientX)&&!Object(p.isNil)(q.clientY)){var $=h-q.clientX,ve=v-q.clientY;(T-$<0||T-$+j>=i[0])&&($=0),(I-ve<0||I-ve+F>=i[1])&&(ve=0),xn(u,{left:(T-=$)+"px",top:(I-=ve)+"px"}),a.translate($*U/B,ve*U/B),h=q.clientX,v=q.clientY}},!1),u.addEventListener("dragend",function(){k=!1,r.refresh=!0},!1),this.set("viewport",u),s.appendChild(u)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),r=(this.get("dx"),this.get("dy"),this.get("totaldx")),i=this.get("totaldy"),a=this.get("graph"),s=this.get("size"),u=a.get("width"),l=a.get("height"),h=a.getPointByCanvas(0,0),v=a.getPointByCanvas(u,l),k=this.get("viewport");k||this.initViewport();var T=(v.x-h.x)*e,I=(v.y-h.y)*e,j=h.x*e+r,F=h.y*e+i,B=j+T,U=F+I;j<0&&(T+=j,j=0),B>s[0]&&(T-=B-s[0]),F<0&&(I+=F,F=0),U>s[1]&&(I-=U-s[1]),this.set("ratio",e),xn(k,{left:j+"px",top:F+"px",width:T+"px",height:I+"px"})}},t.prototype.updateGraphShapes=function(){var e=this._cfgs.graph,r=this.get("canvas"),i=e.get("group");if(!i.destroyed){var a=i.clone();a.resetMatrix(),r.clear(),r.add(a),e.get("renderer")==="svg"&&this.updateVisible(a)}},t.prototype.updateVisible=function(e){var r=this;if(e.isGroup()||e.get("visible")){var i=e.get("children");if(!i||!i.length)return;i.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}else e.hide()},t.prototype.updateKeyShapes=function(){var e=this,r=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();Object(p.each)(r.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),Object(p.each)(r.getNodes(),function(l){e.updateOneNodeKeyShape(l,a)});var s=r.getCombos();if(s&&s.length){var u=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){Object(p.each)(s,function(l){e.updateOneComboKeyShape(l,u)}),u.sort(),u.toBack(),e.updateCanvas()},250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,r){var i=this.get("itemMap")||{},a=i[e.get("id")],s=e.getBBox(),u=e.get("keyShape").clone(),l=u.attr(),h={x:s.centerX,y:s.centerY};a?h=Object.assign(l,h):(a=u,r.add(a));var v=a.get("type");v!=="rect"&&v!=="image"||(h.x=s.minX,h.y=s.minY),a.attr(h),e.isVisible()?a.show():a.hide(),a.exist=!0;var k=e.getModel().depth;isNaN(k)||a.set("zIndex",k),i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateOneNodeKeyShape=function(e,r){var i=this.get("itemMap")||{},a=i[e.get("id")],s=e.getBBox(),u=e.get("keyShape").clone(),l=u.attr(),h={x:s.centerX,y:s.centerY};a?h=Object.assign(l,h):(a=u,r.add(a));var v=a.get("type");v!=="rect"&&v!=="image"||(h.x=s.minX,h.y=s.minY),a.attr(h),e.isVisible()?a.show():a.hide(),a.exist=!0;var k=e.getModel().depth;isNaN(k)||a.set("zIndex",k),i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateDelegateShapes=function(){var e=this,r=this._cfgs.graph,i=this.get("canvas"),a=i.get("children")[0]||i.addGroup();Object(p.each)(r.getEdges(),function(l){e.updateOneEdgeKeyShape(l,a)}),Object(p.each)(r.getNodes(),function(l){e.updateOneNodeDelegateShape(l,a)});var s=r.getCombos();if(s&&s.length){var u=a.find(function(l){return l.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){Object(p.each)(s,function(l){e.updateOneComboKeyShape(l,u)}),u.sort(),u.toBack(),e.updateCanvas()},250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},r=Object.keys(e);if(r&&r.length!==0)for(var i=r.length-1;i>=0;i--){var a=e[r[i]],s=a.exist;a.exist=!1,s||(a.remove(),delete e[r[i]])}},t.prototype.updateOneEdgeKeyShape=function(e,r){var i=this.get("itemMap")||{},a=i[e.get("id")];if(a){var s=e.get("keyShape").attr("path");a.attr("path",s)}else a=e.get("keyShape").clone(),r.add(a);e.isVisible()?a.show():a.hide(),a.exist=!0,i[e.get("id")]=a,this.set("itemMap",i)},t.prototype.updateOneNodeDelegateShape=function(e,r){var i=this.get("delegateStyle"),a=this.get("itemMap")||{},s=a[e.get("id")],u=e.getBBox();if(s){var l={x:u.minX,y:u.minY,width:u.width,height:u.height};s.attr(l)}else s=r.addShape("rect",{attrs:Dd({x:u.minX,y:u.minY,width:u.width,height:u.height},i),name:"minimap-node-shape"});e.isVisible()?s.show():s.hide(),s.exist=!0,a[e.get("id")]=s,this.set("itemMap",a)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this.get("graph"),r=this.get("size"),i=this.get("className"),a=this.get("container"),s=ei("<div class='"+i+"' style='width: "+r[0]+"px; height: "+r[1]+"px; overflow: hidden'></div>");Object(p.isString)(a)&&(a=document.getElementById(a)),a?a.appendChild(s):e.get("container").appendChild(s),this.set("container",s);var u,l=ei('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(l),l.addEventListener("dragenter",function(h){h.preventDefault()}),l.addEventListener("dragover",function(h){h.preventDefault()}),u=e.get("renderer")==="svg"?new ko.Canvas({container:l,width:r[0],height:r[1]}):new Wr.Canvas({container:l,width:r[0],height:r[1]}),this.set("canvas",u),this.updateCanvas()},t.prototype.updateCanvas=function(){if(this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var r=this.get("size"),i=this.get("canvas"),a=this.get("type"),s=this.get("padding");if(!i.destroyed){switch(a){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var u=i.get("children")[0];if(u){u.resetMatrix();var l=u.getCanvasBBox(),h=e.get("canvas").getCanvasBBox(),v=e.getZoom()||1,k=h.width/v,T=h.height/v;Number.isFinite(l.width)&&(k=Rd(l.width,k),T=Rd(l.height,T)),k+=2*s,T+=2*s;var I=Math.min(r[0]/k,r[1]/T),j=[1,0,0,0,1,0,0,0,1],F=0,B=0;Number.isFinite(l.minX)&&(F=-l.minX),Number.isFinite(l.minY)&&(B=-l.minY);var U=(r[0]-(k-2*s)*I)/2,q=(r[1]-(T-2*s)*I)/2;j=Wy(j,[["t",F,B],["s",I,I],["t",U,q]]),u.setMatrix(j),this.set("ratio",I),this.set("totaldx",U+F*I),this.set("totaldy",q+B*I),this.set("dx",U),this.set("dy",q),this.updateViewport()}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){this.get("canvas").destroy();var e=this.get("container");e.parentNode.removeChild(e)},t}(co),Yy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function No(n,t,e){var r=n.x-t.x,i=n.y-t.y;return!e||Math.abs(r)>e||Math.abs(i)>e?Math.sqrt(r*r+i*i):e}function Ld(n,t){var e=(t.source.y-t.target.y)/(t.source.x-t.target.x),r=(e*e*t.source.x+e*(n.y-t.source.y)+n.x)/(e*e+1);return{x:r,y:e*(r-t.source.x)+t.source.y}}var Hy=function(n){function t(e){return n.call(this,e)||this}return Yy(t,n),t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),r=this.get("onTick");this.set("tick",function(){r&&r(),e.refreshPositions()})},t.prototype.bundling=function(e){var r=this;if(r.set("data",e),!r.isTicking()){var i=e.edges||[],a=e.nodes||[],s={},u=!1;if(a.forEach(function($){$.x!==null&&!$.y!==null&&$.x!==void 0&&!$.y!==void 0||(u=!0),s[$.id]=$}),u)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",s);var l=r.get("divisions"),h=r.get("divRate"),v=r.divideEdges(l);r.set("edgePoints",v);var k=r.getEdgeBundles();r.set("edgeBundles",k);for(var T=r.get("cycles"),I=r.get("iterations"),j=r.get("iterRate"),F=r.get("lambda"),B=0;B<T;B++){for(var U=function($){var ve=[];i.forEach(function(de,me){if(de.source!==de.target){var Te=s[de.source],Oe=s[de.target];ve[me]=r.getEdgeForces({source:Te,target:Oe},me,l,F);for(var Pe=0;Pe<l+1;Pe++)v[me][Pe].x+=ve[me][Pe].x,v[me][Pe].y+=ve[me][Pe].y}})},q=0;q<I;q++)U();F/=2,l*=h,I*=j,v=r.divideEdges(l),r.set("edgePoints",v)}i.forEach(function($,ve){$.source!==$.target&&($.type="polyline",$.controlPoints=v[ve].slice(1,v[ve].length-1))}),r.get("graph").refresh()}},t.prototype.updateBundling=function(e){var r=this,i=e.data;if(i&&r.set("data",i),r.get("ticking")&&r.set("ticking",!1),Object.keys(e).forEach(function(s){r.set(s,e[s])}),e.onTick){var a=this.get("graph");r.set("tick",function(){e.onTick(),a.refresh()})}r.bundling(i)},t.prototype.divideEdges=function(e){var r=this,i=r.get("data").edges,a=r.get("nodeIdMap"),s=r.get("edgePoints");return s&&s!==void 0||(s=[]),i.forEach(function(u,l){s[l]&&s[l]!==void 0||(s[l]=[]);var h=a[u.source],v=a[u.target];if(e===1)s[l].push({x:h.x,y:h.y}),s[l].push({x:.5*(h.x+v.x),y:.5*(h.y+v.y)}),s[l].push({x:v.x,y:v.y});else{var k=(s[l]&&s[l]!==[]?r.getEdgeLength(s[l]):No({x:h.x,y:h.y},{x:v.x,y:v.y}))/(e+1),T=k,I=[{x:h.x,y:h.y}];s[l].forEach(function(j,F){if(F!==0){for(var B=No(j,s[l][F-1]);B>T;){var U=T/B,q={x:s[l][F-1].x,y:s[l][F-1].y};q.x+=U*(j.x-s[l][F-1].x),q.y+=U*(j.y-s[l][F-1].y),I.push(q),B-=T,T=k}T-=B}}),I.push({x:v.x,y:v.y}),s[l]=I}}),s},t.prototype.getEdgeLength=function(e){var r=0;return e.forEach(function(i,a){a!==0&&(r+=No(i,e[a-1]))}),r},t.prototype.getEdgeBundles=function(){var e=this,r=e.get("data").edges||[],i=e.get("bundleThreshold"),a=e.get("nodeIdMap"),s=e.get("edgeBundles");return s||(s=[]),r.forEach(function(u,l){s[l]&&s[l]!==void 0||(s[l]=[])}),r.forEach(function(u,l){var h=a[u.source],v=a[u.target];r.forEach(function(k,T){if(!(T<=l)){var I=a[k.source],j=a[k.target];e.getBundleScore({source:h,target:v},{source:I,target:j})>=i&&(s[l].push(T),s[T].push(l))}})}),s},t.prototype.getBundleScore=function(e,r){return e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,e.length=No({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),r.length=No({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y}),this.getAngleScore(e,r)*this.getScaleScore(e,r)*this.getPositionScore(e,r)*this.getVisibilityScore(e,r)},t.prototype.getAngleScore=function(e,r){return function(i,a){return i.x*a.x+i.y*a.y}({x:e.vx,y:e.vy},{x:r.vx,y:r.vy})/(e.length*r.length)},t.prototype.getScaleScore=function(e,r){var i=(e.length+r.length)/2;return 2/(i/Math.min(e.length,r.length)+Math.max(e.length,r.length)/i)},t.prototype.getPositionScore=function(e,r){var i=(e.length+r.length)/2;return i/(i+No({x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},{x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2}))},t.prototype.getVisibilityScore=function(e,r){var i=this.getEdgeVisibility(e,r),a=this.getEdgeVisibility(r,e);return i<a?i:a},t.prototype.getEdgeVisibility=function(e,r){var i=Ld(r.source,e),a=Ld(r.target,e),s={x:(i.x+a.x)/2,y:(i.y+a.y)/2},u={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*No(s,u)/No(i,a))},t.prototype.getEdgeForces=function(e,r,i,a){for(var s=this.get("edgePoints"),u=this.get("K")/(No(e.source,e.target)*(i+1)),l=[{x:0,y:0}],h=1;h<i;h++){var v={x:0,y:0},k=this.getSpringForce({pre:s[r][h-1],cur:s[r][h],next:s[r][h+1]},u),T=this.getElectrostaticForce(h,r);v.x=a*(k.x+T.x),v.y=a*(k.y+T.y),l.push(v)}return l.push({x:0,y:0}),l},t.prototype.getSpringForce=function(e,r){var i=e.pre.x+e.next.x-2*e.cur.x,a=e.pre.y+e.next.y-2*e.cur.y;return{x:i*=r,y:a*=r}},t.prototype.getElectrostaticForce=function(e,r){var i=this.get("eps"),a=this.get("edgeBundles"),s=this.get("edgePoints"),u=a[r],l={x:0,y:0};return u.forEach(function(h){var v={x:s[h][e].x-s[r][e].x,y:s[h][e].y-s[r][e].y};if(Math.abs(v.x)>i||Math.abs(v.y)>i){var k=1/No(s[h][e],s[r][e]);l.x+=v.x*k,l.y+=v.y*k}}),l},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),n.prototype.destroy.call(this)},t}(co),qy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bd=function(){return(Bd=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Gd={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Ky=function(n){function t(e){return n.call(this,e)||this}return qy(t,n),t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(p.clone)(Gd),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"}}return e},t.prototype.init=function(){var e=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",e*e);var r=this.get("d");this.set("molecularParam",(r+1)*e)},t.prototype.createDelegate=function(e){var r=this,i=this,a=i.get("delegate");a&&!a.destroyed||(i.magnify(e),(a=i.get("delegate")).on("dragstart",function(s){i.set("delegateCenterDiff",{x:a.attr("x")-s.x,y:a.attr("y")-s.y})}),a.on("drag",function(s){i.magnify(s)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(s){r.scaleDByWheel(s)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(s){i.scaleRByWheel(s)}))},t.prototype.scaleRByWheel=function(e){if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var r,i=this.get("graph"),a=this.get("delegate"),s=(a?{x:a.attr("x"),y:a.attr("y")}:void 0)||i.getPointByClient(e.clientX,e.clientY);r=e.originalEvent.wheelDelta<0?.95:1/.95;var u=this.get("maxR"),l=this.get("minR"),h=this.get("r");(h>(u||i.get("height"))&&r>1||h<(l||.05*i.get("height"))&&r<1)&&(r=1),h*=r,this.set("r",h),this.set("r2",h*h);var v=this.get("d");this.set("molecularParam",(v+1)*h),this.set("delegateCenterDiff",void 0),this.magnify(e,s)}},t.prototype.scaleRByDrag=function(e){if(e){var r,i=this.get("dragPrePos"),a=this.get("graph"),s=a.getPointByClient(e.clientX,e.clientY);r=e.x-i.x<0?.95:1/.95;var u=this.get("maxR"),l=this.get("minR"),h=this.get("r");(h>(u||a.get("height"))&&r>1||h<(l||.05*a.get("height"))&&r<1)&&(r=1),h*=r,this.set("r",h),this.set("r2",h*h);var v=this.get("d");this.set("molecularParam",(v+1)*h),this.magnify(e,s),this.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){if(e||e.originalEvent){e.preventDefault&&e.preventDefault();var r=0;r=e.originalEvent.wheelDelta<0?-.1:.1;var i=this.get("d")+r,a=this.get("maxD"),s=this.get("minD");if(i<a&&i>s){this.set("d",i);var u=this.get("r");this.set("molecularParam",(i+1)*u);var l=this.get("delegate"),h=l?{x:l.attr("x"),y:l.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(e,h)}}},t.prototype.scaleDByDrag=function(e){var r=this.get("dragPrePos"),i=e.x-r.x>0?.1:-.1,a=this.get("d")+i,s=this.get("maxD"),u=this.get("minD");if(a<s&&a>u){this.set("d",a);var l=this.get("r");this.set("molecularParam",(a+1)*l),this.magnify(e)}this.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,r){this.restoreCache();var i=this.get("graph"),a=this.get("cachedMagnifiedModels"),s=this.get("cachedOriginPositions"),u=this.get("showLabel"),l=this.get("r"),h=this.get("r2"),v=this.get("d"),k=this.get("molecularParam"),T=i.getNodes(),I=T.length,j=r?{x:r.x,y:r.y}:{x:e.x,y:e.y};!this.get("dragging")||this.get("trigger")!=="mousemove"&&this.get("trigger")!=="click"||(j=this.get("cacheCenter"));var F=this.get("delegateCenterDiff");F&&(j.x+=F.x,j.y+=F.y),this.updateDelegate(j,l);for(var B=0;B<I;B++){var U=T[B].getModel(),q=U.x,$=U.y;if(!isNaN(q)&&!isNaN($)){var ve=(q-j.x)*(q-j.x)+($-j.y)*($-j.y);if(!isNaN(ve)&&ve<h&&ve!==0){var de=Math.sqrt(ve),me=k*de/(v*de+l),Te=(q-j.x)/de,Oe=($-j.y)/de;if(U.x=Te*me+j.x,U.y=Oe*me+j.y,s[U.id]||(s[U.id]={x:q,y:$,texts:[]}),a.push(U),u&&2*de<l)for(var Pe=T[B].getContainer().getChildren(),Ze=Pe.length,nt=0;nt<Ze;nt++){var ct=Pe[nt];ct.get("type")==="text"&&(s[U.id].texts.push({visible:ct.get("visible"),shape:ct}),ct.set("visible",!0))}}}}i.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this.get("cachedMagnifiedModels"),r=this.get("cachedOriginPositions"),i=e.length,a=0;a<i;a++){var s=e[a],u=r[s.id];s.x=u.x,s.y=u.y;for(var l=u.texts.length,h=0;h<l;h++){var v=u.texts[h];v.shape.set("visible",v.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var r=e.r,i=e.d,a=e.trigger,s=e.minD,u=e.maxD,l=e.minR,h=e.maxR,v=e.scaleDBy,k=e.scaleRBy;isNaN(e.r)||(this.set("r",r),this.set("r2",r*r)),isNaN(i)||this.set("d",i),isNaN(u)||this.set("maxD",u),isNaN(s)||this.set("minD",s),isNaN(h)||this.set("maxR",h),isNaN(l)||this.set("minR",l);var T,I=this.get("d"),j=this.get("r");this.set("molecularParam",(I+1)*j),a!=="mousemove"&&a!=="click"&&a!=="drag"||this.set("trigger",a),(v==="drag"||v==="wheel"||v==="unset")&&(this.set("scaleDBy",v),this.get("delegate").remove(),this.get("delegate").destroy(),(T=this.get("dPercentText"))&&(T.remove(),T.destroy())),k!=="drag"&&k!=="wheel"&&k!=="unset"||(this.set("scaleRBy",k),this.get("delegate").remove(),this.get("delegate").destroy(),(T=this.get("dPercentText"))&&(T.remove(),T.destroy()))},t.prototype.updateDelegate=function(e,r){var i=this,a=this,s=a.get("graph"),u=a.get("delegate");if(!u||u.destroyed){var l=s.get("group"),h=a.get("delegateStyle")||Gd;u=l.addShape("circle",{attrs:Bd({r:r/1.5,x:e.x,y:e.y},h),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?u.on("mousewheel",function(I){a.scaleRByWheel(I)}):this.get("scaleRBy")==="drag"&&(u.on("dragstart",function(I){a.set("dragging",!0),a.set("cacheCenter",{x:I.x,y:I.y}),a.set("dragPrePos",{x:I.x,y:I.y})}),u.on("drag",function(I){a.scaleRByDrag(I)}),u.on("dragend",function(I){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?u.on("mousewheel",function(I){i.scaleDByWheel(I)}):this.get("scaleDBy")==="drag"&&(u.on("dragstart",function(I){a.set("dragging",!0),a.set("cacheCenter",{x:I.x,y:I.y}),a.set("dragPrePos",{x:I.x,y:I.y})}),u.on("drag",function(I){i.scaleDByDrag(I)}),u.on("dragend",function(I){a.set("dragging",!1)})))}else u.attr({x:e.x,y:e.y,r:r/1.5});if(a.get("showDPercent")){var v=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),k=a.get("dPercentText"),T=e.y+r/1.5+16;!k||k.destroyed?(k=s.get("group").addShape("text",{attrs:{text:v+"%",x:e.x,y:T,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",k)):k.attr({text:v+"%",x:e.x,y:T})}a.set("delegate",u)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var i=this.get("dPercentText");i&&!i.destroyed&&(i.remove(),i.destroy())},t.prototype.destroy=function(){this.clear()},t}(co),Zy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ec()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var $y=function(n){function t(e){return n.call(this,e)||this}return Zy(t,n),t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},t.prototype.init=function(){var e=this,r=this.get("graph"),i=this.get("getContent")(r),a=i;Object(p.isString)(i)&&(a=ei(i));var s=this.get("className");a.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),Object(p.isString)(u)&&(u=document.getElementById(u)),u.appendChild(a),this.set("toolBar",a);var l=this.get("handleClick");a.addEventListener("click",function(v){var k=function(I){if(!I)return[];if(I.composedPath)return I.composedPath();for(var j=[],F=I.target;F;){if(j.push(F),F.tagName==="HTML")return j.push(document,window),j;F=F.parentElement}return j}(v).filter(function(I){return I.nodeName==="LI"});if(k.length!==0){var T=k[0].getAttribute("code");T&&(l?l(T,r):e.handleDefaultOperator(T,r))}});var h=this.get("position");h&&xn(a,{top:h.y+"px",left:h.x+"px"}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),i=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),s=document.querySelector('.g6-component-toolbar li[code="redo"] svg');r&&i&&a&&s&&e.on("stackchange",function(u){var l=u.undoStack,h=u.redoStack,v=l.length,k=h.length;v===1?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style")),k===0?(a.setAttribute("style","cursor: not-allowed"),s.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),s.removeAttribute("style"))})},t.prototype.undo=function(){var e=this.get("graph"),r=e.getUndoStack();if(r&&r.length!==1){var i=r.pop();if(i){var a=i.action;e.pushStack(a,Object(p.clone)(i.data),"redo");var s=i.data.before;if(a==="add"&&(s=i.data.after),!s)return;switch(a){case"visible":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){var v=e.findById(h.id);h.visible?e.showItem(v,!1):e.hideItem(v,!1)})});break;case"render":case"update":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){e.updateItem(h.id,h,!1)})});break;case"changedata":e.changeData(s,!1);break;case"delete":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){var v=h.itemType;delete h.itemType,e.addItem(v,h,!1)})});break;case"add":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){e.removeItem(h.id,!1)})});break;case"updateComboTree":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){e.updateComboTree(h.id,h.parentId,!1)})})}}}},t.prototype.redo=function(){var e=this.get("graph"),r=e.getRedoStack();if(r&&r.length!==0){var i=r.pop();if(i){var a=i.action,s=i.data.after;if(e.pushStack(a,Object(p.clone)(i.data)),a==="delete"&&(s=i.data.before),!s)return;switch(a){case"visible":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){var v=e.findById(h.id);h.visible?e.showItem(v,!1):e.hideItem(v,!1)})});break;case"render":case"update":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){e.updateItem(h.id,h,!1)})});break;case"changedata":e.changeData(s,!1);break;case"delete":s.edges&&s.edges.forEach(function(u){e.removeItem(u.id,!1)}),s.nodes&&s.nodes.forEach(function(u){e.removeItem(u.id,!1)}),s.combos&&s.combos.forEach(function(u){e.removeItem(u.id,!1)});break;case"add":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){var v=h.itemType;delete h.itemType,e.addItem(v,h,!1)})});break;case"updateComboTree":Object.keys(s).forEach(function(u){var l=s[u];l&&l.forEach(function(h){e.updateComboTree(h.id,h.parentId,!1)})})}}}},t.prototype.handleDefaultOperator=function(e,r){var i=r.getZoom();switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":var a=1/(1-.05*this.get("zoomSensitivity"));if(a*i>(this.get("maxZoom")||r.get("maxZoom")))return;r.zoomTo(i*a);break;case"zoomIn":var s=1-.05*this.get("zoomSensitivity");if(s*i<(this.get("minZoom")||r.get("minZoom")))return;r.zoomTo(i*s);break;case"realZoom":r.zoomTo(1);break;case"autoZoom":r.fitView([20,20])}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}var i=this.get("handleClick");i&&e.removeEventListener("click",i)},t}(co),Qy=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ec()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Jy=function(n){function t(e){return n.call(this,e)||this}return Qy(t,n),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`+e.item.getType()+`</h4>
          <span class='tooltip-id'>ID\uFF1A`+e.item.getID()+`</span>
        `},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,r=ei("<div class="+(e.get("className")||"g6-component-tooltip")+"></div>"),i=e.get("container");i||(i=e.get("graph").get("container")),Object(p.isString)(i)&&(i=document.getElementById(i)),xn(r,{position:"absolute",visibility:"hidden",display:"none"}),i.appendChild(r),e.get("trigger")!=="click"&&(r.addEventListener("mouseenter",function(a){xn(r,{visibility:"visible",display:"unset"})}),r.addEventListener("mouseleave",function(a){e.hideTooltip()})),e.set("tooltip",r)},t.prototype.onClick=function(e){var r=this.get("itemTypes");if(!e.item||!e.item.getType||r.indexOf(e.item.getType())!==-1){var i=e.item,a=this.get("graph");this.currentTarget===i?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var r=this.get("itemTypes");if(!e.item||!e.item.getType||r.indexOf(e.item.getType())!==-1){var i=e.item,a=this.get("graph");this.currentTarget=i,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var r=this.get("itemTypes");e.item&&e.item.getType&&r.indexOf(e.item.getType())===-1||this.currentTarget&&e.item===this.currentTarget&&this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.showTooltip=function(e){if(e.item){var r=this.get("itemTypes");if(!e.item.getType||r.indexOf(e.item.getType())!==-1){var i=this.get("tooltip"),a=this.get("getContent")(e);Object(p.isString)(a)?i.innerHTML=a:i.innerHTML=a.outerHTML,this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&xn(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var r=this.get("shouldBegin"),i=this.get("tooltip");if(r(e)){var a=this.get("graph"),s=a.get("width"),u=a.get("height"),l=this.get("offsetX")||0,h=this.get("offsetY")||0,v=a.getPointByClient(e.clientX,e.clientY),k=this.get("fixToNode"),T=e.item;if(T.getType&&T.getType()==="node"&&k&&Object(p.isArray)(k)&&k.length>=2){var I=T.getBBox();v={x:I.minX+I.width*k[0],y:I.minY+I.height*k[1]}}var j=a.getCanvasByPoint(v.x,v.y),F=j.x,B=j.y,U=a.getContainer(),q={x:F+U.offsetLeft+l,y:B+U.offsetTop+h};xn(i,{visibility:"visible",display:"unset"});var $=i.getBoundingClientRect();F+$.width+l>s&&(q.x-=$.width+l),B+$.height+h>u&&(q.y-=$.height+h),xn(i,{left:q.x+"px",top:q.y+"px"})}else xn(i,{visibility:"hidden",display:"none"})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var r=this.get("container");r||(r=this.get("graph").get("container")),Object(p.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}},t}(co),Fd={};function Do(n,t){Fd[n]=t}var tc=function(){function n(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return n.prototype.translate=function(t){return t},n.prototype.change=function(t){Object(p.assign)(this.__cfg__,t),this.init()},n.prototype.clone=function(){return this.constructor(this.__cfg__)},n.prototype.getTicks=function(){var t=this;return Object(p.map)(this.ticks,function(e,r){return Object(p.isObject)(e)?e:{text:t.getText(e,r),tickValue:e,value:t.scale(e)}})},n.prototype.getText=function(t,e){var r=this.formatter,i=r?r(t,e):t;return Object(p.isNil)(i)||!Object(p.isFunction)(i.toString)?"":i.toString()},n.prototype.getConfig=function(t){return this.__cfg__[t]},n.prototype.init=function(){Object(p.assign)(this,this.__cfg__),this.setDomain(),Object(p.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},n.prototype.initCfg=function(){},n.prototype.setDomain=function(){},n.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(Object(p.isString)(t)){var r=Fd[t];if(!r)throw new Error("There is no method to to calculate ticks!");e=r(this)}else Object(p.isFunction)(t)&&(e=t(this));return e},n.prototype.rangeMin=function(){return this.range[0]},n.prototype.rangeMax=function(){return this.range[1]},n.prototype.calcPercent=function(t,e,r){return Object(p.isNumber)(t)?(t-e)/(r-e):NaN},n.prototype.calcValue=function(t,e,r){return e+t*(r-e)},n}(),os=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return Object(b.__extends)(t,n),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var r=this.translateIndexMap.get(e);return r===void 0&&(r=Object(p.isNumber)(e)?e:NaN),r},t.prototype.scale=function(e){var r=this.translate(e),i=this.calcPercent(r,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var r=this.max-this.min,i=this.calcPercent(e,this.rangeMin(),this.rangeMax()),a=Math.round(r*i)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},t.prototype.getText=function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=e;return Object(p.isNumber)(e)&&!this.values.includes(e)&&(a=this.values[a]),n.prototype.getText.apply(this,Object(b.__spreadArrays)([a],r))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(Object(p.isNil)(this.getConfig("min"))&&(this.min=0),Object(p.isNil)(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(tc),zd=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,as="[^\\s]+",Ud=/\[([^]*?)\]/gm;function Vd(n,t){for(var e=[],r=0,i=n.length;r<i;r++)e.push(n[r].substr(0,t));return e}var Wd=function(n){return function(t,e){var r=e[n].map(function(i){return i.toLowerCase()}).indexOf(t.toLowerCase());return r>-1?r:null}};function Jo(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var r=0,i=t;r<i.length;r++){var a=i[r];for(var s in a)n[s]=a[s]}return n}var Xd=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Yd=["January","February","March","April","May","June","July","August","September","October","November","December"],em=Vd(Yd,3),rc={dayNamesShort:Vd(Xd,3),dayNames:Xd,monthNamesShort:em,monthNames:Yd,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][n%10>3?0:(n-n%10!=10?1:0)*n%10]}},Ys=Jo({},rc),Hd=function(n){return Ys=Jo(Ys,n)},qd=function(n){return n.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},to=function(n,t){for(t===void 0&&(t=2),n=String(n);n.length<t;)n="0"+n;return n},tm={D:function(n){return String(n.getDate())},DD:function(n){return to(n.getDate())},Do:function(n,t){return t.DoFn(n.getDate())},d:function(n){return String(n.getDay())},dd:function(n){return to(n.getDay())},ddd:function(n,t){return t.dayNamesShort[n.getDay()]},dddd:function(n,t){return t.dayNames[n.getDay()]},M:function(n){return String(n.getMonth()+1)},MM:function(n){return to(n.getMonth()+1)},MMM:function(n,t){return t.monthNamesShort[n.getMonth()]},MMMM:function(n,t){return t.monthNames[n.getMonth()]},YY:function(n){return to(String(n.getFullYear()),4).substr(2)},YYYY:function(n){return to(n.getFullYear(),4)},h:function(n){return String(n.getHours()%12||12)},hh:function(n){return to(n.getHours()%12||12)},H:function(n){return String(n.getHours())},HH:function(n){return to(n.getHours())},m:function(n){return String(n.getMinutes())},mm:function(n){return to(n.getMinutes())},s:function(n){return String(n.getSeconds())},ss:function(n){return to(n.getSeconds())},S:function(n){return String(Math.round(n.getMilliseconds()/100))},SS:function(n){return to(Math.round(n.getMilliseconds()/10),2)},SSS:function(n){return to(n.getMilliseconds(),3)},a:function(n,t){return n.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(n,t){return n.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(n){var t=n.getTimezoneOffset();return(t>0?"-":"+")+to(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(n){var t=n.getTimezoneOffset();return(t>0?"-":"+")+to(Math.floor(Math.abs(t)/60),2)+":"+to(Math.abs(t)%60,2)}},Kd=function(n){return+n-1},Zd=[null,"[1-9]\\d?"],$d=[null,as],Qd=["isPm",as,function(n,t){var e=n.toLowerCase();return e===t.amPm[0]?0:e===t.amPm[1]?1:null}],Jd=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(n){var t=(n+"").match(/([+-]|\d\d)/gi);if(t){var e=60*+t[1]+parseInt(t[2],10);return t[0]==="+"?e:-e}return 0}],rm={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+as,function(n){return parseInt(n,10)}],M:["month","[1-9]\\d?",Kd],MM:["month","\\d\\d",Kd],YY:["year","\\d\\d",function(n){var t=+(""+new Date().getFullYear()).substr(0,2);return+(""+(+n>68?t-1:t)+n)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(n){return 100*+n}],SS:["millisecond","\\d\\d",function(n){return 10*+n}],SSS:["millisecond","\\d{3}"],d:Zd,dd:Zd,ddd:$d,dddd:$d,MMM:["month",as,Wd("monthNamesShort")],MMMM:["month",as,Wd("monthNames")],a:Qd,A:Qd,ZZ:Jd,Z:Jd},Hs={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ep=function(n){return Jo(Hs,n)},tp=function(n,t,e){if(t===void 0&&(t=Hs.default),e===void 0&&(e={}),typeof n=="number"&&(n=new Date(n)),Object.prototype.toString.call(n)!=="[object Date]"||isNaN(n.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=Hs[t]||t).replace(Ud,function(a,s){return r.push(s),"@@@"});var i=Jo(Jo({},Ys),e);return(t=t.replace(zd,function(a){return tm[a](n,i)})).replace(/@@@/g,function(){return r.shift()})};function rp(n,t,e){if(e===void 0&&(e={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=Hs[t]||t,n.length>1e3)return null;var r={year:new Date().getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],a=[],s=t.replace(Ud,function($,ve){return a.push(qd(ve)),"@@@"}),u={},l={};s=qd(s).replace(zd,function($){var ve=rm[$],de=ve[0],me=ve[1],Te=ve[3];if(u[de])throw new Error("Invalid format. "+de+" specified twice in format");return u[de]=!0,Te&&(l[Te]=!0),i.push(ve),"("+me+")"}),Object.keys(l).forEach(function($){if(!u[$])throw new Error("Invalid format. "+$+" is required in specified format")}),s=s.replace(/@@@/g,function(){return a.shift()});var h=n.match(new RegExp(s,"i"));if(!h)return null;for(var v=Jo(Jo({},Ys),e),k=1;k<h.length;k++){var T=i[k-1],I=T[0],j=T[2],F=j?j(h[k],v):+h[k];if(F==null)return null;r[I]=F}r.isPm===1&&r.hour!=null&&+r.hour!=12?r.hour=+r.hour+12:r.isPm===0&&+r.hour==12&&(r.hour=0);for(var B=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond),U=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],q=(k=0,U.length);k<q;k++)if(u[U[k][0]]&&r[U[k][0]]!==B[U[k][1]]())return null;return r.timezoneOffset==null?B:new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond))}var np={format:tp,parse:rp,defaultI18n:rc,setGlobalDateI18n:Hd,setGlobalDateMasks:ep};function ip(n,t){return(E.format||np.format)(n,t)}function qs(n){return Object(p.isString)(n)&&(n=n.indexOf("T")>0?new Date(n).getTime():new Date(n.replace(/-/gi,"/")).getTime()),Object(p.isDate)(n)&&(n=n.getTime()),n}var ha=36e5,ea=24*ha,ss=31*ea,us=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",ha],["HH",6*ha],["HH",12*ha],["YYYY-MM-DD",ea],["YYYY-MM-DD",4*ea],["YYYY-WW",7*ea],["YYYY-MM",ss],["YYYY-MM",4*ss],["YYYY-MM",6*ss],["YYYY",380*ea]];function nm(n,t,e){var r,i=(r=function(s){return s[1]},function(s,u,l,h){for(var v=Object(p.isNil)(l)?0:l,k=Object(p.isNil)(h)?s.length:h;v<k;){var T=v+k>>>1;r(s[T])>u?k=T:v=T+1}return v})(us,(t-n)/e)-1,a=us[i];return i<0?a=us[0]:i>=us.length&&(a=Object(p.last)(us)),a}var im=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="timeCat",e}return Object(b.__extends)(t,n),t.prototype.translate=function(e){e=qs(e);var r=this.values.indexOf(e);return r===-1&&(r=Object(p.isNumber)(e)&&e<this.values.length?e:NaN),r},t.prototype.getText=function(e,r){var i=this.translate(e);if(i>-1){var a=this.values[i],s=this.formatter;return a=s?s(a,r):ip(a,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var e=this.values;Object(p.each)(e,function(r,i){e[i]=qs(r)}),e.sort(function(r,i){return r-i}),n.prototype.setDomain.call(this)},t}(os),Ks=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.isContinuous=!0,e}return Object(b.__extends)(t,n),t.prototype.scale=function(e){if(Object(p.isNil)(e))return NaN;var r=this.rangeMin(),i=this.rangeMax();return this.max===this.min?r:r+this.getScalePercent(e)*(i-r)},t.prototype.init=function(){n.prototype.init.call(this);var e=this.ticks,r=Object(p.head)(e),i=Object(p.last)(e);r<this.min&&(this.min=r),i>this.max&&(this.max=i),Object(p.isNil)(this.minLimit)||(this.min=r),Object(p.isNil)(this.maxLimit)||(this.max=i)},t.prototype.setDomain=function(){var e=Object(p.getRange)(this.values),r=e.min,i=e.max;Object(p.isNil)(this.min)&&(this.min=r),Object(p.isNil)(this.max)&&(this.max=i),this.min>this.max&&(this.min=r,this.max=i)},t.prototype.calculateTicks=function(){var e=this,r=n.prototype.calculateTicks.call(this);return this.nice||(r=Object(p.filter)(r,function(i){return i>=e.min&&i<=e.max})),r},t.prototype.getScalePercent=function(e){var r=this.max,i=this.min;return(e-i)/(r-i)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(tc),cs=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return Object(b.__extends)(t,n),t.prototype.invert=function(e){var r=this.getInvertPercent(e);return this.min+r*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(Ks);function ta(n,t){var e=Math.E;return t>=0?Math.pow(e,Math.log(t)/n):-1*Math.pow(e,Math.log(-t)/n)}function ho(n,t){return n===1?1:Math.log(t)/Math.log(n)}function op(n,t,e){Object(p.isNil)(e)&&(e=Math.max.apply(null,n));var r=e;return Object(p.each)(n,function(i){i>0&&i<r&&(r=i)}),r===e&&(r=e/t),r>1&&(r=1),r}var om=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="log",e}return Object(b.__extends)(t,n),t.prototype.invert=function(e){var r,i=this.base,a=ho(i,this.max),s=this.rangeMin(),u=this.rangeMax()-s,l=this.positiveMin;if(l){if(e===0)return 0;var h=1/(a-(r=ho(i,l/i)))*u;if(e<h)return e/h*l}else r=ho(i,this.min);var v=(e-s)/u*(a-r)+r;return Math.pow(i,v)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){n.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=op(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var r=this.max,i=this.min;if(r===i||e<=0)return 0;var a=this.base,s=this.positiveMin;return s&&(i=1*s/a),e<s?e/s/(ho(a,r)-ho(a,i)):(ho(a,e)-ho(a,i))/(ho(a,r)-ho(a,i))},t}(Ks),am=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="pow",e}return Object(b.__extends)(t,n),t.prototype.invert=function(e){var r=this.getInvertPercent(e),i=this.exponent,a=ta(i,this.max),s=ta(i,this.min),u=r*(a-s)+s,l=u>=0?1:-1;return Math.pow(u,i)*l},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var r=this.max,i=this.min;if(r===i)return 0;var a=this.exponent;return(ta(a,e)-ta(a,i))/(ta(a,r)-ta(a,i))},t}(Ks),sm=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="time",e}return Object(b.__extends)(t,n),t.prototype.getText=function(e,r){var i=this.translate(e),a=this.formatter;return a?a(i,r):ip(i,this.mask)},t.prototype.scale=function(e){var r=e;return(Object(p.isString)(r)||Object(p.isDate)(r))&&(r=this.translate(r)),n.prototype.scale.call(this,r)},t.prototype.translate=function(e){return qs(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,r=this.getConfig("min"),i=this.getConfig("max");if(Object(p.isNil)(r)&&Object(p.isNumber)(r)||(this.min=this.translate(this.min)),Object(p.isNil)(i)&&Object(p.isNumber)(i)||(this.max=this.translate(this.max)),e&&e.length){var a=[],s=1/0,u=s,l=0;Object(p.each)(e,function(h){var v=qs(h);if(isNaN(v))throw new TypeError("Invalid Time: "+h+" in time scale!");s>v?(u=s,s=v):u>v&&(u=v),l<v&&(l=v),a.push(v)}),e.length>1&&(this.minTickInterval=u-s),Object(p.isNil)(r)&&(this.min=s),Object(p.isNil)(i)&&(this.max=l)}},t}(cs),ap=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="quantize",e}return Object(b.__extends)(t,n),t.prototype.invert=function(e){var r=this.ticks,i=r.length,a=this.getInvertPercent(e),s=Math.floor(a*(i-1));if(s>=i-1)return Object(p.last)(r);if(s<0)return Object(p.head)(r);var u=r[s],l=s/(i-1);return u+(a-l)/((s+1)/(i-1)-l)*(r[s+1]-u)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var e=n.prototype.calculateTicks.call(this);return this.nice||(Object(p.last)(e)!==this.max&&e.push(this.max),Object(p.head)(e)!==this.min&&e.unshift(this.min)),e},t.prototype.getScalePercent=function(e){var r=this.ticks;if(e<Object(p.head)(r))return 0;if(e>Object(p.last)(r))return 1;var i=0;return Object(p.each)(r,function(a,s){if(!(e>=a))return!1;i=s}),i/(r.length-1)},t}(Ks),um=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="quantile",e}return Object(b.__extends)(t,n),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(ap),sp={};function Ro(n,t){if(function(e){return sp[e]}(n))throw new Error("type '"+n+"' existed.");sp[n]=t}var cm=function(n){function t(){var e=n!==null&&n.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return Object(b.__extends)(t,n),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&Object(p.isNumber)(e)?e:this.range[0]},t.prototype.invert=function(e){var r=this.range;return e<r[0]||e>r[1]?NaN:this.values[0]},t}(tc),lm=[1,5,2,2.5,4,3],up=100*Number.EPSILON;function fm(n,t,e,r,i,a){var s=Object(p.size)(t),u=Object(p.indexOf)(t,n),l=0,h=function(v,k){return(v%k+k)%k}(r,a);return(h<up||a-h<up)&&r<=0&&i>=0&&(l=1),1-u/(s-1)-e+l}function hm(n,t,e){var r=Object(p.size)(t);return 1-Object(p.indexOf)(t,n)/(r-1)-e+1}function dm(n,t,e,r,i,a){var s=(n-1)/(a-i),u=(t-1)/(Math.max(a,r)-Math.min(e,i));return 2-Math.max(s/u,u/s)}function pm(n,t){return n>=t?2-(n-1)/(t-1):1}function gm(n,t,e,r){var i=t-n;return 1-.5*(Math.pow(t-r,2)+Math.pow(n-e,2))/Math.pow(.1*i,2)}function vm(n,t,e){var r=t-n;if(e>r){var i=(e-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function cp(n,t,e,r,i,a){if(e===void 0&&(e=5),r===void 0&&(r=!0),i===void 0&&(i=lm),a===void 0&&(a=[.25,.2,.5,.05]),Number.isNaN(n)||Number.isNaN(t)||typeof n!="number"||typeof t!="number"||!e)return{min:0,max:0,ticks:[]};if(t-n<1e-15||e===1)return{min:n,max:t,ticks:[n]};for(var s={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var l=0;l<i.length;l+=1){var h=i[l],v=hm(h,i,u);if(a[0]*v+a[1]+a[2]+a[3]<s.score){u=1/0;break}for(var k=2;k<1/0;){var T=pm(k,e);if(a[0]*v+a[1]+a[2]*T+a[3]<s.score)break;for(var I=(t-n)/(k+1)/u/h,j=Math.ceil(Math.log10(I));j<1/0;){var F=u*h*Math.pow(10,j),B=vm(n,t,F*(k-1));if(a[0]*v+a[1]*B+a[2]*T+a[3]<s.score)break;var U=Math.floor(t/F)*u-(k-1)*u,q=Math.ceil(n/F)*u;if(U<=q)for(var $=q-U,ve=0;ve<=$;ve+=1){var de=(U+ve)*(F/u),me=de+F*(k-1),Te=F,Oe=fm(h,i,u,de,me,Te),Pe=gm(n,t,de,me),Ze=dm(k,e,n,t,de,me),nt=a[0]*Oe+a[1]*Pe+a[2]*Ze+1*a[3];nt>s.score&&(!r||de<=n&&me>=t)&&(s.lmin=de,s.lmax=me,s.lstep=Te,s.score=nt)}j+=1}k+=1}}u+=1}var ct,st=s.lmax,It=s.lmin,gt=s.lstep,Pt=Math.floor((st-It)/gt)+1,Rt=new Array(Pt);for(l=0;l<Pt;l++)Rt[l]=(ct=It+l*gt)<1e-15?ct:parseFloat(ct.toFixed(15));return{min:Math.min(n,Object(p.head)(Rt)),max:Math.max(t,Object(p.last)(Rt)),ticks:Rt}}function lp(n){var t=n.values,e=n.tickInterval,r=n.tickCount,i=t;if(Object(p.isNumber)(e))return Object(p.filter)(i,function(l,h){return h%e==0});var a=n.min,s=n.max;if(Object(p.isNil)(a)&&(a=0),Object(p.isNil)(s)&&(s=t.length-1),Object(p.isNumber)(r)&&r<s-a){var u=cp(a,s,r,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(p.filter)(u,function(l){return l>=a&&l<=s}).map(function(l){return t[l]})}return t.slice(a,s+1)}var fp=Math.sqrt(50),hp=Math.sqrt(10),dp=Math.sqrt(2),ym=function(){function n(){this._domain=[0,1]}return n.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},n.prototype.nice=function(t){var e,r;t===void 0&&(t=5);var i,a=this._domain.slice(),s=0,u=this._domain.length-1,l=this._domain[s],h=this._domain[u];return h<l&&(l=(e=[h,l])[0],h=e[1],s=(r=[u,s])[0],u=r[1]),(i=Zs(l,h,t))>0?i=Zs(l=Math.floor(l/i)*i,h=Math.ceil(h/i)*i,t):i<0&&(i=Zs(l=Math.ceil(l*i)/i,h=Math.floor(h*i)/i,t)),i>0?(a[s]=Math.floor(l/i)*i,a[u]=Math.ceil(h/i)*i,this.domain(a)):i<0&&(a[s]=Math.ceil(l*i)/i,a[u]=Math.floor(h*i)/i,this.domain(a)),this},n.prototype.ticks=function(t){return t===void 0&&(t=5),function(e,r,i){var a,s,u,l,h=-1;if(i=+i,(e=+e)==(r=+r)&&i>0)return[e];if((a=r<e)&&(s=e,e=r,r=s),(l=Zs(e,r,i))===0||!isFinite(l))return[];if(l>0)for(e=Math.ceil(e/l),r=Math.floor(r/l),u=new Array(s=Math.ceil(r-e+1));++h<s;)u[h]=(e+h)*l;else for(e=Math.floor(e*l),r=Math.ceil(r*l),u=new Array(s=Math.ceil(e-r+1));++h<s;)u[h]=(e-h)/l;return a&&u.reverse(),u}(this._domain[0],this._domain[this._domain.length-1],t||5)},n}();function Zs(n,t,e){var r=(t-n)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=fp?10:a>=hp?5:a>=dp?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=fp?10:a>=hp?5:a>=dp?2:1)}function pp(n,t,e){return(e==="ceil"?Math.ceil(n/t):e==="floor"?Math.floor(n/t):Math.round(n/t))*t}function nc(n,t,e){var r=pp(n,e,"floor"),i=pp(t,e,"ceil");r=Object(p.fixedBase)(r,e),i=Object(p.fixedBase)(i,e);for(var a=[],s=r;s<=i;s+=e){var u=Object(p.fixedBase)(s,e);a.push(u)}return{min:r,max:i,ticks:a}}function ic(n,t,e){var r,i=n.minLimit,a=n.maxLimit,s=n.min,u=n.max,l=n.tickCount,h=l===void 0?5:l,v=Object(p.isNil)(i)?Object(p.isNil)(t)?s:t:i,k=Object(p.isNil)(a)?Object(p.isNil)(e)?u:e:a;if(v>k&&(k=(r=[v,k])[0],v=r[1]),h<=2)return[v,k];for(var T=(k-v)/(h-1),I=[],j=0;j<h;j++)I.push(v+T*j);return I}function mm(n){return n<1e-15?n:parseFloat(n.toFixed(15))}function gp(n,t,e){if(e===void 0&&(e=5),n===t)return{max:t,min:n,ticks:[n]};var r=(t-n)/e,i=Math.pow(10,Math.floor(Math.log10(r))),a=i;2*i-r<1.5*(r-a)&&5*i-r<2.75*(r-(a=2*i))&&10*i-r<1.5*(r-(a=5*i))&&(a=10*i);for(var s=Math.ceil(t/a),u=Math.floor(n/a),l=Math.max(s*a,t),h=Math.min(u*a,n),v=Math.floor((l-h)/a)+1,k=new Array(v),T=0;T<v;T++)k[T]=mm(h+T*a);return{min:h,max:l,ticks:k}}function bm(n,t){var e=n.length*t;return t===1?n[n.length-1]:t===0?n[0]:e%1!=0?n[Math.ceil(e)-1]:n.length%2==0?(n[e-1]+n[e])/2:n[e]}function $s(n){return new Date(n).getFullYear()}function xm(n){return new Date(n,0,1).getTime()}function oc(n){return new Date(n).getMonth()}function wm(n,t){return new Date(n,t,1).getTime()}Do("cat",lp),Do("time-cat",function(n){var t=lp(n),e=Object(p.last)(n.values);return e!==Object(p.last)(t)&&t.push(e),t}),Do("wilkinson-extended",function(n){var t=n.min,e=n.max,r=n.tickCount,i=n.nice,a=n.tickInterval,s=n.minLimit,u=n.maxLimit,l=cp(t,e,r,i).ticks;return Object(p.isNil)(s)&&Object(p.isNil)(u)?a?nc(t,e,a).ticks:l:ic(n,Object(p.head)(l),Object(p.last)(l))}),Do("r-pretty",function(n){var t=n.min,e=n.max,r=n.tickCount,i=n.tickInterval,a=n.minLimit,s=n.maxLimit,u=gp(t,e,r).ticks;return Object(p.isNil)(a)&&Object(p.isNil)(s)?i?nc(t,e,i).ticks:u:ic(n,Object(p.head)(u),Object(p.last)(u))}),Do("time",function(n){var t=n.min,e=n.max,r=n.minTickInterval,i=n.tickInterval,a=n.tickCount;if(i)a=Math.ceil((e-t)/i);else{var s=(e-t)/(i=nm(t,e,a)[1])/a;s>1&&(i*=Math.ceil(s)),r&&i<r&&(i=r)}for(var u=[],l=t;l<e+i;l+=i)u.push(l);return u}),Do("time-pretty",function(n){var t=n.min,e=n.max,r=n.minTickInterval,i=n.tickCount,a=n.tickInterval,s=[];a||(a=(e-t)/i,r&&a<r&&(a=r));var u=$s(t);if(a>31536e6)for(var l=$s(e),h=Math.ceil(a/31536e6),v=u;v<=l+h;v+=h)s.push(xm(v));else if(a>ss){var k=Math.ceil(a/ss),T=oc(t),I=function(st,It){var gt=$s(st),Pt=$s(It),Rt=oc(st);return 12*(Pt-gt)+(oc(It)-Rt)%12}(t,e);for(v=0;v<=I+k;v+=k)s.push(wm(u,v+T))}else if(a>ea){var j=($=new Date(t)).getFullYear(),F=$.getMonth(),B=$.getDate(),U=Math.ceil(a/ea),q=function(st,It){return Math.ceil((It-st)/ea)}(t,e);for(v=0;v<q+U;v+=U)s.push(new Date(j,F,B+v).getTime())}else if(a>ha){j=($=new Date(t)).getFullYear(),F=$.getMonth(),U=$.getDate();var $,ve=$.getHours(),de=Math.ceil(a/ha),me=function(st,It){return Math.ceil((It-st)/ha)}(t,e);for(v=0;v<=me+de;v+=de)s.push(new Date(j,F,U,ve+v).getTime())}else if(a>6e4){var Te=function(st,It){return Math.ceil((It-st)/6e4)}(t,e),Oe=Math.ceil(a/6e4);for(v=0;v<=Te+Oe;v+=Oe)s.push(t+6e4*v)}else{var Pe=a;Pe<1e3&&(Pe=1e3);var Ze=1e3*Math.floor(t/1e3),nt=Math.ceil((e-t)/1e3),ct=Math.ceil(Pe/1e3);for(v=0;v<nt+ct;v+=ct)s.push(Ze+1e3*v)}return s.length>=512&&console.warn("Notice: current ticks length("+s.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),s}),Do("log",function(n){var t,e=n.base,r=n.tickCount,i=n.min,a=n.max,s=n.values,u=ho(e,a);if(i>0)t=Math.floor(ho(e,i));else{var l=op(s,e,a);t=Math.floor(ho(e,l))}for(var h=u-t,v=Math.ceil(h/r),k=[],T=t;T<u+v;T+=v)k.push(Math.pow(e,T));return i<=0&&k.unshift(0),k}),Do("pow",function(n){var t=n.exponent,e=n.tickCount,r=Math.ceil(ta(t,n.max));return gp(Math.floor(ta(t,n.min)),r,e).ticks.map(function(i){var a=i>=0?1:-1;return Math.pow(i,t)*a})}),Do("quantile",function(n){var t=n.tickCount,e=n.values;if(!e||!e.length)return[];for(var r=e.slice().sort(function(u,l){return u-l}),i=[],a=0;a<t;a++){var s=a/(t-1);i.push(bm(r,s))}return i}),Do("d3-linear",function(n){var t=n.min,e=n.max,r=n.tickInterval,i=n.minLimit,a=n.maxLimit,s=function(u){var l=u.min,h=u.max,v=u.nice,k=u.tickCount,T=new ym;return T.domain([l,h]),v&&T.nice(k),T.ticks(k)}(n);return Object(p.isNil)(i)&&Object(p.isNil)(a)?r?nc(t,e,r).ticks:s:ic(n,Object(p.head)(s),Object(p.last)(s))}),Ro("cat",os),Ro("category",os),Ro("identity",cm),Ro("linear",cs),Ro("log",om),Ro("pow",am),Ro("time",sm),Ro("timeCat",im),Ro("quantize",ap),Ro("quantile",um);var _m=function(n,t){for(var e=0,r=t.length,i=n.length;e<r;e++,i++)n[i]=t[e];return n};function vp(n){return function(t){return Object(p.map)(t,function(e,r){return[r===0?"M":"L",e[0],e[1]]})}(n)}function Sm(n,t,e,r){r===void 0&&(r=!0);var i=new cs({values:n}),a=new os({values:Object(p.map)(n,function(u,l){return l})}),s=Object(p.map)(n,function(u,l){return[a.scale(l)*t,e-i.scale(u)*e]});return r?function(u){if(u.length<=2)return vp(u);var l=[];Object(p.each)(u,function(I){Object(p.isEqual)(I,l.slice(l.length-2))||l.push(I[0],I[1])});var h=Ai.a(l,!1),v=Object(p.head)(u),k=v[0],T=v[1];return h.unshift(["M",k,T]),h}(s):vp(s)}function Em(n,t,e,r){r===void 0&&(r=5);for(var i=new cs({values:n}),a=new os({values:Object(p.map)(n,function(k,T){return T})}),s=Object(p.map)(n,function(k,T){return[a.scale(T)*t,e-i.scale(k)*e]}),u=[],l=0;l<s.length;l++){var h=s[l],v=Mm({x:h[0],y:h[1],y0:e,size:r});u.push.apply(u,v)}return function(k,T){T===void 0&&(T=!0);var I=[],j=k[0];I.push(["M",j.x,j.y]);for(var F=1,B=k.length;F<B;F++)I.push(["L",k[F].x,k[F].y]);return T&&(I.push(["L",j.x,j.y]),I.push(["z"])),I}(u)}function Om(n,t,e,r){var i=_m([],n),a=function(s,u){var l=new cs({values:s}),h=Math.max(0,l.min);return u-l.scale(h)*u}(r,e);return i.push(["L",t,a]),i.push(["L",0,a]),i.push(["Z"]),i}function Mm(n){var t,e,r,i,a=n.x,s=n.y,u=n.y0,l=n.size;Object(p.isArray)(s)?(t=s[0],e=s[1]):(t=u,e=s),Object(p.isArray)(a)?(r=a[0],i=a[1]):(r=a-l/2,i=a+l/2);var h=[{x:r,y:t},{x:r,y:e}];return h.push({x:i,y:e},{x:i,y:t}),h}var Qs=function(){return(Qs=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},km={stroke:"#C5C5C5",strokeOpacity:.85},Am={fill:"#CACED4",opacity:.85},Cm=function(){function n(t){var e=t.x,r=e===void 0?0:e,i=t.y,a=i===void 0?0:i,s=t.width,u=s===void 0?200:s,l=t.height,h=l===void 0?26:l,v=t.smooth,k=v===void 0||v,T=t.isArea,I=T!==void 0&&T,j=t.data,F=j===void 0?[]:j,B=t.lineStyle,U=t.areaStyle,q=t.group,$=t.interval,ve=$===void 0?null:$;this.group=q,this.x=r,this.y=a,this.width=u,this.height=h,this.data=F,this.smooth=k,this.isArea=I,this.lineStyle=Object.assign({},km,B),this.areaStyle=Object.assign({},Am,U),this.intervalConfig=ve,this.renderLine()}return n.prototype.renderLine=function(){var t=this,e=t.x,r=t.y,i=t.width,a=t.height,s=(t.barWidth,t.data),u=t.smooth,l=t.isArea,h=t.lineStyle,v=t.areaStyle,k=this.group.addGroup({name:"trend-group"});if(s){var T=Sm(s,i,a,u);if(k.addShape("path",{attrs:Qs({path:T},h)}),l){var I=Om(T,i,a,s);k.addShape("path",{attrs:Qs({path:I},v)})}}this.intervalConfig&&k.addShape("path",{attrs:Qs({path:Em(this.intervalConfig.data,i,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style)}),k.move(e,r)},n.prototype.destory=function(){this.group.destroy()},n}(),ls=function(){return(ls=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Tm={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Im={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},yp=function(){function n(t){var e=t.group,r=t.name,i=t.type,a=t.x,s=a===void 0?0:a,u=t.y,l=u===void 0?0:u,h=t.width,v=h===void 0?2:h,k=t.height,T=k===void 0?24:k,I=t.style,j=I===void 0?{}:I;this.group=e,this.name=r,this.handleType=i,this.x=s,this.y=l,this.width=v,this.height=T,i==="trend"?this.style=ls(ls({},Tm),j):i==="simple"&&(this.style=ls(ls({},Im),j)),this.renderHandle()}return n.prototype.setX=function(t){this.setXY(t,void 0)},n.prototype.setY=function(t){this.setXY(void 0,t)},n.prototype.setXY=function(t,e){Object(p.isNumber)(t)&&(this.x=t),Object(p.isNumber)(e)&&(this.y=e),this.updateXY()},n.prototype.renderHandle=function(){var t=this.width,e=this.height,r=this.style,i=this.name,a=r.fill,s=r.stroke,u=r.radius,l=r.opacity,h=r.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:a,stroke:s,radius:u,opacity:l,cursor:h},name:i+"-handler"}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:h},name:i+"-handler"}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:h},name:i+"-handler"})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:a,stroke:s,radius:u,opacity:l,cursor:h,lineWidth:2},name:i+"-handler"})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},n.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var r=t.style.highLightFill;t.topCircle.attr("fill",r)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var r=t.style.fill;t.topCircle.attr("fill",r)})},n.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",function(){var r=t.style.highLightFill;t.verticalLine.attr("fill",r),t.topCircle.attr("fill",r),t.bottomCircle.attr("fill",r)}),this.handleGroup.on(e+"-handler:mouseleave",function(){var r=t.style.fill;t.verticalLine.attr("fill",r),t.topCircle.attr("fill",r),t.bottomCircle.attr("fill",r)})},n.prototype.show=function(){this.handleGroup.show()},n.prototype.hide=function(){this.handleGroup.hide()},n.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},n}(),mp=function(){return(mp=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},jm=function(){function n(t){this.config=Object(p.deepMix)({},t),this.init()}return n.prototype.update=function(t){this.config=Object(p.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},n.prototype.init=function(){this.initElement(),this.renderMarker()},n.prototype.initElement=function(){var t=this.config,e=t.group,r=t.style,i=r.scale,a=i===void 0?1:i,s=r.offsetX,u=s===void 0?0:s,l=r.offsetY,h=l===void 0?0:l,v=this.config.x+u,k=this.config.y+h,T=e.addGroup({name:"playPauseBtn"});this.startMarkerGroup=T.addGroup({name:"playPauseBtn"}),this.circle=e.addShape("circle",{attrs:mp({x:v,y:k,r:this.config.r*a},r),name:"playPauseBtn"}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(v,k,a),fill:r.stroke||"#aaa"}}),this.pauseMarkerGroup=T.addGroup({name:"playPauseBtn"});var I=.25*this.config.r*a,j=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:v-.375*this.config.r*a,y:k-j/2,width:I,height:j,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:v+1/8*this.config.r*a,y:k-j/2,width:I,height:j,fill:r.stroke||"#aaa",lineWidth:0}})},n.prototype.updateElement=function(){var t=this.config.style,e=t.scale,r=e===void 0?1:e,i=t.offsetX,a=i===void 0?0:i,s=t.offsetY,u=s===void 0?0:s,l=this.config.x+a,h=this.config.y+u;this.circle.attr("x",l),this.circle.attr("y",h),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(l,h,r));var v=.25*this.config.r*r,k=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",l-.375*this.config.r*r),this.pauseLeftMarker.attr("y",h-k/2),this.pauseLeftMarker.attr("width",v),this.pauseLeftMarker.attr("height",k),this.pauseRightMarker.attr("x",l+1/8*this.config.r*r),this.pauseRightMarker.attr("y",h-k/2),this.pauseRightMarker.attr("width",v),this.pauseRightMarker.attr("height",k)},n.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},n.prototype.getStartMarkerPath=function(t,e,r){var i=.5*this.config.r*Math.sqrt(3)*r;return[["M",t-i/Math.sqrt(3)/2,e-i/2],["L",t+i/Math.sqrt(3),e],["L",t-i/Math.sqrt(3)/2,e+i/2]]},n}(),yi=function(){return(yi=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},fs=S.transform,Pm={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Nm={fill:"#fff"},Dm={fill:"green"},bp={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},xp={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Rm={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:bp,timeTypeControllerStyle:xp},wp=function(){function n(t){this.controllerCfg=Object(p.deepMix)({},Rm,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return n.prototype.init=function(){this.renderPlayButton()},n.prototype.getNextMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t+r,e],["L",t,e+r],["Z",t,e-r],["M",t,e],["L",t-r,e-r],["L",t-r,e+r],["Z"]]},n.prototype.getPreMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t-r,e],["L",t,e+r],["L",t,e-r],["M",t,e],["L",t+r,e-r],["L",t+r,e+r],["Z"]]},n.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,r=t.height,i=t.x,a=t.y,s=t.hideTimeTypeController,u=t.fill,l=u===void 0?"#aaa":u,h=t.stroke,v=h===void 0?"green":h,k=yi(yi({},Pm),t.playBtnStyle||{}),T=yi(yi({},Nm),t.preBtnStyle||{}),I=yi(yi({},Dm),t.nextBtnStyle||{}),j=r/2-5,F=a+10,B=this.controllerGroup.addShape("rect",{attrs:{x:i,y:F,width:e,height:r,stroke:v,fill:l},name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:F,r:j}):this.playButton=new jm({group:this.controllerGroup,x:e/2,y:F+j+5,r:j,isPlay:this.isPlay,style:k});var U=T.offsetX||0,q=T.offsetY||0,$=(T.scale||1)*j;this.controllerGroup.addShape("path",{attrs:yi({path:this.getPreMarkerPath(e/2-5*j+U,F+j+5+q,.5*$)},T),name:"preStepBtn"});var ve=I.offsetX||0,de=I.offsetY||0,me=(I.scale||1)*j;this.controllerGroup.addShape("path",{attrs:yi({path:this.getNextMarkerPath(e/2+5*j+ve,F+j+5+de,.5*me)},I),name:"nextStepBtn"}),B.toBack(),this.renderSpeedBtn(),s||this.renderToggleTime(),this.bindEvent();var Te=this.controllerCfg.scale,Oe=Te===void 0?1:Te,Pe=this.controllerGroup.getCanvasBBox(),Ze=(Pe.maxX+Pe.minX)/2,nt=(Pe.maxY+Pe.minY)/2,ct=fs([1,0,0,0,1,0,0,0,1],[["t",-Ze,-nt],["s",Oe,Oe],["t",Ze,nt]]);this.controllerGroup.setMatrix(ct)},n.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,r=t.width,i=t.hideTimeTypeController,a=yi(yi({},bp),this.controllerCfg.speedControllerStyle||{}),s=a.scroller,u=s===void 0?{}:s,l=a.text,h=l===void 0?{}:l,v=a.pointer,k=v===void 0?{}:v,T=a.scale,I=T===void 0?1:T,j=a.offsetX,F=j===void 0?0:j,B=a.offsetY,U=B===void 0?0:B,q=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=q;var $=[],ve=5;this.speedAxisY=[19,22,26,32,39];for(var de=0;de<5;de++){var me=e+this.speedAxisY[de],Te=r-(i?50:110);q.addShape("line",{attrs:yi({x1:Te,x2:Te+15,y1:me,y2:me},u),speed:ve,name:"speed-rect"}),this.speedAxisY[de]=me,$.push(ve),ve-=1}this.speedText=q.addShape("text",{attrs:yi({x:r-(i?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},h)}),this.speedPoint=q.addShape("path",{attrs:yi({path:this.getPointerPath(r-(i?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},k)});var Oe=this.speedGroup.getCanvasBBox(),Pe=(Oe.maxX+Oe.minX)/2,Ze=(Oe.maxY+Oe.minY)/2,nt=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];nt=fs(nt,[["t",-Pe,-Ze],["s",I,I],["t",Pe+F*I,Ze+U*I]]),this.speedGroup.setMatrix(nt)},n.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},n.prototype.renderToggleTime=function(){var t,e=this.controllerCfg.width,r=yi(yi({},xp),this.controllerCfg.timeTypeControllerStyle||{}),i=r.scale,a=i===void 0?1:i,s=r.offsetX,u=s===void 0?0:s,l=r.offsetY,h=l===void 0?0:l,v=r.box,k=v===void 0?{}:v,T=r.check,I=T===void 0?{}:T,j=r.text,F=j===void 0?{}:j;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:yi({x:e-50,y:this.speedAxisY[0]+3.5},k),isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:yi({path:[["M",e-50+3,this.speedAxisY[1]+6],["L",e-50+7,this.speedAxisY[1]+10],["L",e-50+12,this.speedAxisY[1]+4]]},I),capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:yi({text:((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:e-50+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},F)});var B=this.toggleGroup.getCanvasBBox(),U=(B.maxX+B.minX)/2,q=(B.maxY+B.minY)/2,$=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];$=fs($,[["t",-U,-q],["s",a,a],["t",U+u*a,q+h*a]]),this.toggleGroup.setMatrix($)},n.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",function(e){var r=e.target.attr("y1"),i=t.speedPoint.attr("matrix"),a=t.speedAxisY.indexOf(i[7]||0),s=t.speedAxisY.indexOf(r),u=t.speedAxisY[s]-t.speedAxisY[a];i=fs(i,[["t",0,u]]),t.speedPoint.setMatrix(i),t.currentSpeed=t.speedAxisY.length-s,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})}),this.speedGroup.on("mousewheel",function(e){e.preventDefault();var r=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],i=r[7],a=t.speedAxisY.indexOf(i);if(a===-1){var s=1/0;t.speedAxisY.forEach(function(l,h){var v=Math.abs(l-i);s>v&&(s=v,a=h)})}a=e.originalEvent.deltaY>0?Math.max(0,a-1):Math.min(t.speedAxisY.length-1,a+1);var u=t.speedAxisY[a]-i;r=fs(r,[["t",0,u]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-a,t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(e){var r,i,a=e.target.get("isChecked");a?(t.checkedIcon.hide(),t.checkedText.attr("text",((i=t.controllerCfg)===null||i===void 0?void 0:i.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text",((r=t.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),t.currentType="single"),e.target.set("isChecked",!a),t.group.emit("timebarConfigChanged",{type:t.currentType,speed:t.currentSpeed})})},n.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},n}(),Ln=function(){return(Ln=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Lm={fill:"#416180",opacity:.05},Bm={fill:"#416180",opacity:.15,radius:5},Gm={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Fm={width:2,height:24},zm={textBaseline:"middle",fill:"#000",opacity:.45},Um={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Vm={lineWidth:1,stroke:"#ccc"},Wm=function(){function n(t){var e=this;this.prevX=0,this.onMouseDown=function(Dt){return function(qt){e.currentHandler=Dt;var $t=qt.originalEvent;$t.stopPropagation(),$t.preventDefault(),e.prevX=Object(p.get)($t,"touches.0.pageX",$t.pageX);var Gt=e.canvas.get("container");Gt.addEventListener("mousemove",e.onMouseMove),Gt.addEventListener("mouseup",e.onMouseUp),Gt.addEventListener("mouseleave",e.onMouseUp),Gt.addEventListener("touchmove",e.onMouseMove),Gt.addEventListener("touchend",e.onMouseUp),Gt.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(Dt){Dt.stopPropagation(),Dt.preventDefault();var qt=Object(p.get)(Dt,"touches.0.pageX",Dt.pageX),$t=qt-e.prevX,Gt=e.adjustOffsetRange($t/e.width);e.updateStartEnd(Gt),e.updateUI(),e.prevX=qt},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var Dt=e.canvas.get("container");Dt&&(Dt.removeEventListener("mousemove",e.onMouseMove),Dt.removeEventListener("mouseup",e.onMouseUp),Dt.removeEventListener("mouseleave",e.onMouseUp),Dt.removeEventListener("touchmove",e.onMouseMove),Dt.removeEventListener("touchend",e.onMouseUp),Dt.removeEventListener("touchcancel",e.onMouseUp))};var r=t.x,i=r===void 0?0:r,a=t.y,s=a===void 0?0:a,u=t.width,l=u===void 0?100:u,h=t.height,v=t.padding,k=v===void 0?10:v,T=t.trendCfg,I=t.controllerCfg,j=I===void 0?{speed:1}:I,F=t.backgroundStyle,B=F===void 0?{}:F,U=t.foregroundStyle,q=U===void 0?{}:U,$=t.handlerStyle,ve=$===void 0?{}:$,de=t.textStyle,me=de===void 0?{}:de,Te=t.start,Oe=Te===void 0?0:Te,Pe=t.end,Ze=Pe===void 0?1:Pe,nt=t.minText,ct=nt===void 0?"":nt,st=t.maxText,It=st===void 0?"":st,gt=t.group,Pt=t.graph,Rt=t.canvas,Zt=t.tick,kt=Zt===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Dt){return Dt},ticks:[]}:Zt,Vt=t.type;this.graph=Pt,this.canvas=Rt,this.group=gt,this.timeBarType=Vt,this.x=i,this.y=s,this.width=l,this.height=h,this.padding=k,this.ticks=kt.ticks,this.trendCfg=T,this.controllerCfg=j,this.currentSpeed=j.speed||1,this.tickLabelFormatter=kt.tickLabelFormatter,Vt==="trend"?this.backgroundStyle=Ln(Ln({},Lm),B):Vt==="simple"&&(this.backgroundStyle=Ln(Ln({},Bm),B)),this.foregroundStyle=Ln(Ln({},Gm),q),this.handlerStyle=Ln(Ln({},Fm),ve),this.textStyle=Ln(Ln({},zm),me),this.tickLabelStyle=Ln(Ln({},Um),kt.tickLabelStyle),this.tickLineStyle=Ln(Ln({},Vm),kt.tickLineStyle),this.currentMode="range",this.start=Oe,this.end=Ze,this.minText=ct,this.maxText=It,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return n.prototype.update=function(t){var e=t.x,r=t.y,i=t.width,a=t.height,s=t.minText,u=t.maxText,l=t.start,h=t.end;this.start=Math.min(1,Math.max(l,0)),this.end=Math.min(1,Math.max(h,0)),Object(p.assign)(this,{x:e,y:r,width:i,height:a,minText:s,maxText:u}),this.updateUI()},n.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},n.prototype.renderSlider=function(){var t=this,e=this.width,r=this.height,i=this.timeBarType;if(i==="trend"&&Object(p.size)(Object(p.get)(this.trendCfg,"data"))){var a=new Cm(Ln(Ln({x:this.x,y:this.y,width:e,height:r},this.trendCfg),{group:this.group}));this.trendComponent=a}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Ln({x:0,y:0,width:e,height:r},this.backgroundStyle)});var u=this.group.addGroup();i==="trend"?(this.minTextShape=u.addShape("text",{attrs:Ln({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=u.addShape("text",{attrs:Ln({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})):(this.minTextShape=u.addShape("text",{attrs:Ln({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1}),this.maxTextShape=u.addShape("text",{attrs:Ln({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif"},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Ln({x:0,y:this.y,height:r},this.foregroundStyle)}),this.foregroundShape.on("mousedown",function(F){F.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(F){F.target.attr("cursor",t.foregroundStyle.cursor||"grab")});var l=Object(p.get)(this.handlerStyle,"width",2),h=Object(p.get)(this.handlerStyle,"height",24),v=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new yp({name:"minHandlerShape",group:v,type:i,x:this.x,y:this.y,width:l,height:h,style:this.handlerStyle});var k=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new yp({name:"maxHandlerShape",group:k,type:i,x:this.x,y:this.y,width:l,height:h,style:this.handlerStyle});var T=this.ticks,I=e/(T.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(F){F.destroy()});var j=-1/0;this.textList=T.map(function(F,B){var U;t.tickPosList.push(t.x+B*I),t.tickLabelFormatter?(U=t.tickLabelFormatter(F),!Object(p.isString)(U)&&U&&(U=F.date)):U=F.date;var q=t.group.addShape("text",{attrs:Ln({x:t.x+B*I,y:t.y+r+5,text:U,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle)}),$=t.group.addShape("line",{attrs:Ln({x1:t.x+B*I,y1:t.y+r+2,x2:t.x+B*I,y2:t.y+r+6},t.tickLineStyle)});$.toBack();var ve=q.getBBox();return ve.minX>j?(q.show(),$.show(),j=ve.minX+ve.width+10):(q.hide(),$.hide()),q}),this.controllerBtnGroup=new wp(Ln({group:this.group,x:this.x,y:this.y+r+25,width:e,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents()},n.prototype.bindEvents=function(){var t=this,e=this.group.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()}),this.group.on("nextStepBtn:click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()}),this.group.on("preStepBtn:click",function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()}),this.group.on("timebarConfigChanged",function(i){var a=i.type,s=i.speed;t.currentSpeed=s,t.currentMode=a,a==="single"?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):a==="range"&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())})},n.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},n.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,r=1-this.start;return Math.min(r,Math.max(e,t));case this.maxHandlerShape:return e=0-this.end,r=1-this.end,Math.min(r,Math.max(e,t));case this.foregroundShape:return e=0-this.start,r=1-this.end,Math.min(r,Math.max(e,t));default:return 0}},n.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date}},n.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",r-e);var i=Object(p.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var a=this.dodgeText([e,r]),s=a[0],u=a[1];this.minHandlerShape.setX(e-i/2),Object(p.each)(s,function(l,h){return t.minTextShape.attr(h,l)}),this.maxHandlerShape.setX(r-i/2),Object(p.each)(u,function(l,h){return t.maxTextShape.attr(h,l)}),this.currentMode==="range"?this.graph.emit("valuechange",{value:[this.start,this.end].sort()}):this.currentMode==="single"&&this.graph.emit("valuechange",{value:[this.end,this.end]})},n.prototype.dodgeText=function(t){var e,r,i=Object(p.get)(this.handlerStyle,"width",2),a=this.minTextShape,s=this.maxTextShape,u=t[0],l=t[1],h=!1;u>l&&(u=(e=[l,u])[0],l=e[1],a=(r=[s,a])[0],s=r[1],h=!0);var v=a.getBBox(),k=s.getBBox(),T=null,I=null;return this.timeBarType==="trend"?(T=u-v.width<this.x+2?{x:u+i/2+2,textAlign:"left"}:{x:u-i/2-2,textAlign:"right"},I=l+k.width>this.x+this.width?{x:l-i/2-2,textAlign:"right"}:{x:l+i/2+2,textAlign:"left"}):this.timeBarType==="simple"&&(T=v.width>u-2?{x:u+i/2+2,textAlign:"center"}:{x:u-i/2-2,textAlign:"center"},I=k.width>this.width-l-2?{x:l-i/2-2,textAlign:"center"}:{x:l+i/2+2,textAlign:"center"}),h?[I,T]:[T,I]},n.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t,r=e.ticks,i=e.width,a=t.currentSpeed,s=i/r.length/(1e3*(10-a)/60),u=t.adjustOffsetRange(s/t.width);t.updateStartEnd(u),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())}):void 0},n.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},n.prototype.destory=function(){this.graph.off("valuechange");var t=this.group,e=t.find(function(i){return i.get("name")==="minHandlerShape"});e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var r=t.find(function(i){return i.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),t.destroy(),this.trendComponent&&this.trendComponent.destory()},n}(),Xm=function(){function n(t){var e=t.x,r=e===void 0?0:e,i=t.y,a=i===void 0?0:i,s=t.container,u=t.text,l=t.padding,h=l===void 0?[4,4,4,4]:l,v=t.className,k=v===void 0?"g6-component-timebar-tooltip":v,T=t.backgroundColor,I=T===void 0?"#000":T,j=t.textColor,F=j===void 0?"#fff":j,B=t.opacity,U=B===void 0?.8:B,q=t.fontSize,$=q===void 0?12:q;this.container=s,this.className=k,this.backgroundColor=I,this.textColor=F,this.x=r,this.y=a,this.text=u,this.padding=h,this.opacity=U,this.fontSize=$,this.render()}return n.prototype.render=function(){var t=this.className,e=(this.x,this.y,this.backgroundColor),r=this.textColor,i=this.text,a=this.padding,s=this.opacity,u=this.fontSize,l=this.container,h=ei("<div class='"+t+`' style="position: absolute; width: fit-content; height: fit-content; opacity: `+s+'"></div>');Object(p.isString)(l)&&(l=document.getElementById(l)),l.appendChild(h),this.parentHeight=l.offsetHeight,this.parentWidth=l.offsetWidth,xn(h,{visibility:"hidden",top:0,left:0});var v=ei(`
      <div style='position: absolute; white-space:nowrap; background-color: `+e+"; font-size: "+u+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+r+"; padding: "+a[0]+"px "+a[1]+"px "+a[2]+"px "+a[3]+"px'></div>");v.innerHTML=i,h.appendChild(v),this.backgroundDOM=v;var k=ei("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+e+"'></div>");h.appendChild(k),this.arrowDOM=k,this.container=h},n.prototype.show=function(t){var e=t.text,r=t.x;t.y,t.clientX,t.clientY,this.backgroundDOM.innerHTML=e;var i=this.backgroundDOM.offsetWidth,a=this.backgroundDOM.offsetHeight,s=this.arrowDOM.offsetWidth,u=this.arrowDOM.offsetHeight;xn(this.container,{top:-a-u+"px",left:r+"px",visibility:"visible"}),xn(this.backgroundDOM,{marginLeft:-i/2+"px"}),xn(this.arrowDOM,{marginLeft:-s/2+"px",top:a+"px"});var l=r-i/2,h=r+i/2;l<0?xn(this.backgroundDOM,{marginLeft:-i/2-l+"px"}):h>this.parentWidth&&xn(this.backgroundDOM,{marginLeft:-i/2-h+this.parentWidth+12+"px"})},n.prototype.hide=function(){xn(this.container,{top:0,left:0,visibility:"hidden"})},n}(),_p=function(){return(_p=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Ym={fill:"#5B8FF9"},Hm={fill:"#e6e8e9"},qm=function(){function n(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,r=t.canvas,i=t.group,a=t.width,s=t.height,u=t.padding,l=t.data,h=t.start,v=t.end,k=t.x,T=k===void 0?0:k,I=t.y,j=I===void 0?0:I,F=t.tickLabelFormatter,B=t.selectedTickStyle,U=B===void 0?Ym:B,q=t.unselectedTickStyle,$=q===void 0?Hm:q,ve=t.tooltipBackgroundColor,de=t.tooltipFomatter;this.graph=e,this.group=i,this.sliceGroup=i.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=s,this.padding=u,this.data=l,this.start=h,this.end=v,this.tickLabelFormatter=F,this.selectedTickStyle=U,this.unselectedTickStyle=$,this.x=T,this.y=j,this.tooltipBackgroundColor=ve,this.tooltipFomatter=de,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return n.prototype.renderSlices=function(){var t=this,e=this,r=e.width,i=e.height,a=e.padding,s=e.data,u=e.start,l=e.end,h=e.tickLabelFormatter,v=e.selectedTickStyle,k=e.unselectedTickStyle,T=r-2*a,I=i-(3*a+4+10)-2*a,j=s.length,F=(T-2*(j-1))/j;this.tickWidth=F;var B=this.sliceGroup,U=[],q=[],$=Math.round(j*u),ve=Math.round(j*l);this.startTickRectId=$,this.endTickRectId=ve,s.forEach(function(me,Te){var Oe=Te>=$&&Te<=ve?v:k,Pe=B.addShape("rect",{attrs:_p({x:a+Te*(F+2),y:a,width:F,height:I},Oe),draggable:!0,name:"tick-rect-"+Te}),Ze=B.addShape("rect",{attrs:{x:a+Te*F+2*(2*Te-1)/2,y:a,width:Te===0||Te===j-1?F+1:F+2,height:I,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+Te});Ze.toFront();var nt,ct=Pe.getBBox(),st=(ct.minX+ct.maxX)/2;if(U.push({rect:Pe,pickRect:Ze,value:me.date,x:st,y:ct.minY}),h?(nt=h(me),!Object(p.isString)(nt)&&nt&&(nt=me.date)):Te%Math.round(j/10)==0&&(nt=me.date),nt){q.push(nt);var It=ct.maxY+2*a;B.addShape("line",{attrs:{stroke:"#BFBFBF",x1:st,y1:It,x2:st,y2:It+4}});var gt=It+4+a,Pt=B.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:st,y:gt,textAlign:"center",text:nt,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},capture:!1}),Rt=Pt.getBBox();Rt.maxX>r?Pt.attr("textAlign","right"):Rt.minX<0&&Pt.attr("textAlign","left")}}),this.tickRects=U;var de=this.group;this.currentSpeed=1,this.controllerBtnGroup=new wp({group:de,x:this.x,y:this.y+i+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"})},n.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",function(h){var v=h.target;if(v.get("type")==="rect"&&v.get("name")){var k=parseInt(v.get("name").split("-")[2],10);if(!isNaN(k)){var T=t.tickRects,I=t.unselectedTickStyle;T.forEach(function(B){B.rect.attr(I)});var j=t.selectedTickStyle;T[k].rect.attr(j),t.startTickRectId=k,t.endTickRectId=k;var F=k/T.length;t.graph.emit("valuechange",{value:[F,F]})}}}),e.on("dragstart",function(h){var v=t.tickRects,k=t.unselectedTickStyle;v.forEach(function(B){B.rect.attr(k)});var T=h.target,I=parseInt(T.get("name").split("-")[2],10),j=t.selectedTickStyle;v[I].rect.attr(j),t.startTickRectId=I;var F=I/v.length;t.graph.emit("valuechange",{value:[F,F]}),t.dragging=!0}),e.on("dragover",function(h){if(t.dragging&&h.target.get("type")==="rect"){for(var v=parseInt(h.target.get("name").split("-")[2],10),k=t.startTickRectId,T=t.tickRects,I=t.selectedTickStyle,j=t.unselectedTickStyle,F=0;F<T.length;F++){var B=F>=k&&F<=v?I:j;T[F].rect.attr(B)}var U=T.length;t.endTickRectId=v;var q=k/U,$=v/U;t.graph.emit("valuechange",{value:[q,$]})}}),e.on("drop",function(h){if(t.dragging&&(t.dragging=!1,h.target.get("type")==="rect")){var v=t.startTickRectId,k=parseInt(h.target.get("name").split("-")[2],10);if(!(k<v)){var T=t.selectedTickStyle,I=t.tickRects;I[k].rect.attr(T),t.endTickRectId=k;var j=I.length,F=v/j,B=k/j;t.graph.emit("valuechange",{value:[F,B]})}}});var r=this.tooltipBackgroundColor,i=this.tooltipFomatter,a=this.canvas,s=new Xm({container:a.get("container"),backgroundColor:r}),u=this.tickRects;u.forEach(function(h){var v=h.pickRect;v.on("mouseenter",function(k){var T=k.target;if(T.get("type")==="rect"){var I=parseInt(T.get("name").split("-")[2],10),j=a.getClientByPoint(u[I].x,u[I].y);s.show({x:u[I].x,y:u[I].y,clientX:j.x,clientY:j.y,text:i?i(u[I].value):u[I].value})}}),v.on("mouseleave",function(k){s.hide()})});var l=this.group;l.on("playPauseBtn:click",function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),l.on("nextStepBtn:click",function(){t.updateStartEnd(1)}),l.on("preStepBtn:click",function(){t.updateStartEnd(-1)}),l.on("timebarConfigChanged",function(h){h.type;var v=h.speed;t.currentSpeed=v})},n.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timebarendplay",null))},n.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}):void 0},n.prototype.updateStartEnd=function(t){var e=this.tickRects,r=e.length,i=this.unselectedTickStyle,a=this.selectedTickStyle,s=this.endTickRectId;if(t>0?this.endTickRectId++:(e[this.endTickRectId].rect.attr(i),this.endTickRectId--),s!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var u=this.startTickRectId;u<=this.endTickRectId-1;u++)e[u].rect.attr(i);this.startTickRectId=this.endTickRectId}if(e[this.endTickRectId]){e[this.endTickRectId].rect.attr(a);var l=this.startTickRectId/r,h=this.endTickRectId/r;this.graph.emit("valuechange",{value:[l,h]})}},n.prototype.destory=function(){this.graph.off("valuechange");var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach(function(e){var r=e.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),this.sliceGroup.destroy()},n}(),Km=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ra=function(){return(ra=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},Zm=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]])}return e},$m=function(n){function t(e){return n.call(this,e)||this}return Km(t,n),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1}},t.prototype.initContainer=function(){var e,r,i=this.get("graph"),a=this._cfgs,s=a.width,u=a.height,l=this.get("className")||"g6-component-timebar",h=this.get("container"),v=this.get("graph").get("container");h?(Object(p.isString)(h)&&(h=document.getElementById(h)),e=h):xn(e=ei("<div class='"+l+"'></div>"),{position:"relative"}),v.appendChild(e),this.set("timeBarContainer",e),r=i.get("renderer")==="SVG"?new ko.Canvas({container:e,width:s,height:u}):new Wr.Canvas({container:e,width:s,height:u}),this.set("canvas",r)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent();var r=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",r)},t.prototype.renderTrend=function(){var e=this._cfgs,r=e.width,i=e.x,a=e.y,s=e.padding,u=e.type,l=e.trend,h=e.slider,v=e.controllerCfg,k=e.textStyle,T=e.tick,I=e.backgroundStyle,j=e.foregroundStyle,F=l.data,B=Zm(l,["data"]),U=r-2*s,q=u==="trend"?26:4,$=this.get("graph"),ve=this.get("timeBarGroup"),de=this.get("canvas"),me=null;u==="trend"||u==="simple"?me=new Wm(ra(ra({graph:$,canvas:de,group:ve,type:u,x:i+s,y:u==="trend"?a+s:a+s+15,width:U,height:q,padding:s,backgroundStyle:I,foregroundStyle:j,trendCfg:ra(ra({},B),{data:F.map(function(Te){return Te.value})})},h),{tick:{ticks:F,tickLabelFormatter:T.tickLabelFormatter,tickLabelStyle:T.tickLabelStyle,tickLineStyle:T.tickLineStyle},handlerStyle:ra(ra({},h.handlerStyle),{height:h.height||q}),controllerCfg:v,textStyle:k})):u==="tick"&&(me=new qm(ra({graph:$,canvas:de,group:ve,x:i+s,y:a+s},T))),this.set("timebar",me)},t.prototype.filterData=function(e){var r,i=e.value,a=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?a=this._cfgs.trend.data:s==="tick"&&(a=this._cfgs.tick.data),a&&a.length!==0){var u=this.get("rangeChange"),l=this.get("graph"),h=Math.round(a.length*i[0]),v=Math.round(a.length*i[1]);v=v>=a.length?a.length-1:v,h=h>=a.length?a.length-1:h;var k=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,T=k?k(a[h]):a[h].date,I=k?k(a[v]):a[v].date;if(s!=="tick"&&this.get("timebar").setText(T,I),u)u(l,T,I);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=l.get("data"));var j=this.cacheGraphData.nodes.filter(function(U){return U.date>=a[h].date&&U.date<=a[v].date}),F=j.map(function(U){return U.id}),B=[];this.cacheGraphData.edges&&(B=this.cacheGraphData.edges.filter(function(U){return F.includes(U.source)&&F.includes(U.target)}),this.get("filterEdge")&&(B=B.filter(function(U){return U.date>=a[h].date&&U.date<=a[v].date}))),l.changeData({nodes:j,edges:B})}}else console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E")},t.prototype.initEvent=function(){var e=this,r=0,i=0,a=this._cfgs.type;a&&a!=="trend"&&a!=="simple"?a==="tick"&&(r=this._cfgs.tick.start,i=this._cfgs.tick.end):(r=this._cfgs.slider.start,i=this._cfgs.slider.end);var s=this.get("graph");s.on("afterrender",function(u){e.filterData({value:[r,i]})}),s.on("valuechange",Object(p.throttle)(function(u){e.filterData(u)},200,{trailing:!0,leading:!0}))},t.prototype.destroy=function(){var e=this.get("timebar");e&&e.destory&&e.destory(),n.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var i=this.get("container");i||(i=this.get("graph").get("container")),Object(p.isString)(i)&&(i=document.getElementById(i)),i.removeChild(r)}},t}(co),Qm=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jm=mr.applyMatrix,eb=function(n){function t(e){return n.call(this,e)||this}return Qm(t,n),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,r=this._cfgs,i=r.graph;if(!this.destroyed){var a=this.get("container");Object(p.isString)(a)&&(a=document.getElementById(a));var s=ei("<div class="+r.viewportClassName+`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff'>
      </div>`),u=0,l=0,h=!1,v=0,k=0,T=0,I=0,j=0,F=0;a.addEventListener("mousedown",function(B){if(r.refresh=!1,B.target===s){var U=s.style;T=parseInt(U.width,10),I=parseInt(U.height,10);var q=e.get("width"),$=e.get("height");T>q||I>$||(F=i.getZoom(),j=e.get("ratio"),h=!0,u=B.clientX,l=B.clientY)}},!1),a.addEventListener("mousemove",function(B){if(h&&!Object(p.isNil)(B.clientX)&&!Object(p.isNil)(B.clientY)){var U=e.get("width"),q=e.get("height"),$=s.style;v=parseInt($.left,10),k=parseInt($.top,10),T=parseInt($.width,10),I=parseInt($.height,10);var ve=u-B.clientX,de=l-B.clientY;v-ve<0?ve=v:v-ve+T>=U&&(ve=0),k-de<0?de=k:k-de+I>=q&&(de=0),xn(s,{left:(v-=ve)+"px",top:(k-=de)+"px"}),i.translate(ve*F/j,de*F/j),u=B.clientX,l=B.clientY}},!1),a.addEventListener("mouseleave",function(){h=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){h=!1,r.refresh=!0},!1),this.set("viewport",s),a.appendChild(s)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),r=this.get("width"),i=this.get("height"),a=this.get("graph"),s=a.get("width"),u=s/a.get("height"),l=a.getGroup(),h=l.getCanvasBBox(),v=[(h.minX+h.maxX)/2,(h.minY+h.maxY)/2],k=[h.maxX-h.minX,h.maxY-h.minY],T={centerX:v[0],centerY:v[1],width:0,height:0,minX:0,minY:0};h[0]/h[1]>u?(T.width=k[0],T.height=T.width/u):(T.height=k[1],T.width=T.height*u),T.minX=v[0]-T.width/2,T.minY=v[1]-T.height/2;var I=l.getMatrix();I||(I=[1,0,0,0,1,0,0,0,1]);var j=Nt.a.invert([1,0,0,0,1,0,0,0,1],I),F=Jm({x:T.minX,y:T.minY},j),B=a.getCanvasByPoint(F.x,F.y),U=this.get("viewport");U||this.initViewport();var q=s/T.width,$=q*r,ve=q*i,de=r*-B.x/T.width,me=i*-B.y/T.height,Te=de+$,Oe=me+ve;de<0&&($+=de,de=0),Te>r&&($-=Te-r),me<0&&(ve+=me,me=0),Oe>i&&(ve-=Oe-i),this.set("ratio",e),xn(U,{left:de+"px",top:me+"px",width:$+"px",height:ve+"px"})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this.get("graph"),r=e.get("width"),i=e.get("height")/r,a=this.get("className"),s=this.get("container"),u=this.get("width"),l=this.get("height");u||l||(u=200),u?(l=i*u,this.set("height",l)):(u=1/i*l,this.set("width",u));var h=ei("<div class='"+a+"' style='width: "+u+"px; height: "+l+"px; overflow: hidden; position: relative;'></div>");Object(p.isString)(s)&&(s=document.getElementById(s)),s?s.appendChild(h):e.get("container").appendChild(h),this.set("container",h);var v=ei('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');h.appendChild(v);var k=ei('<span style="display: table-cell; vertical-align: middle; "></span>');v.appendChild(k),this.set("containerDOM",v),this.set("containerSpan",k);var T=ei('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block; user-select: none;" draggable="false" />');this.set("imgDOM",T),this.updateImgSize(),k.appendChild(T),this.updateCanvas()},t.prototype.updateImgSize=function(){var e=this.get("imgDOM"),r=this.get("width"),i=this.get("height");e.onload=function(){var a=function(s,u){var l,h;if(s.naturalWidth)l=s.naturalWidth,h=s.naturalHeight;else{var v=new Image;v.src=s.src,v.onload=function(){u&&u(v.width,v.height)}}return[l,h]}(e);a[0]>a[1]?e.width=r:e.height=i}},t.prototype.updateCanvas=function(){if(this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var r=this.get("width")/e.get("canvas").getCanvasBBox().width;this.set("ratio",r),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){this.get("imgDOM").remove(),this.set("graphImg",e);var r=ei('<img alt="" src="'+e+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",r),r.src=e,this.updateImgSize(),this.get("containerSpan").appendChild(r),this.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(co),tb=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sp=function(){return(Sp=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},rb=mr.distance,Ep={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},nb=function(n){function t(e){return n.call(this,e)||this}return tb(t,n),t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(p.clone)(Ep),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"}}return e},t.prototype.init=function(){var e=this.get("showLabel"),r=e==="node"||e==="both",i=e==="edge"||e==="both";this.set("showNodeLabel",r),this.set("showEdgeLabel",i),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},t.prototype.createDelegate=function(e){var r=this,i=r.get("delegate");i&&!i.destroyed||(r.filter(e),(i=r.get("delegate")).on("dragstart",function(a){}),i.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(a){r.scaleRByWheel(a)}))},t.prototype.scaleRByWheel=function(e){if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var r,i=this.get("graph"),a=this.get("delegate");a&&{x:a.attr("x"),y:a.attr("y")}||i.getPointByClient(e.clientX,e.clientY),r=e.originalEvent.wheelDelta<0?.95:1/.95;var s=this.get("maxR"),u=this.get("minR"),l=this.get("r");(l>(s||i.get("height"))&&r>1||l<(u||.05*i.get("height"))&&r<1)&&(r=1),l*=r,this.set("r",l),this.filter(e)}},t.prototype.filter=function(e){var r=this.get("graph"),i=r.getNodes(),a={},s=this.get("r"),u=this.get("type"),l={x:e.x,y:e.y};this.updateDelegate(l,s);var h=this.get("shouldShow"),v=this.get("vShapes");v&&v.forEach(function(B){B.remove(),B.destroy()}),v=[],i.forEach(function(B){var U=B.getModel(),q=U.x,$=U.y;rb({x:q,y:$},l)<s&&(a[U.id]=B)});var k=r.getEdges(),T=[];k.forEach(function(B){var U=B.getModel(),q=U.source,$=U.target;h(U)&&(u==="only-source"||u==="one"?a[q]&&!a[$]&&T.push(B):u==="only-target"||u==="one"?a[$]&&!a[q]&&T.push(B):u==="both"&&a[q]&&a[$]&&T.push(B))});var I=this.get("showNodeLabel"),j=this.get("showEdgelabel"),F=r.get("group");T.forEach(function(B){B.get("group").get("children").forEach(function(U){var q=U.get("type"),$=F.addShape(q,{attrs:U.attr()});v.push($),I&&q==="text"&&$.set("visible",!0)})}),Object.keys(a).forEach(function(B){var U=a[B].get("group").clone();if(F.add(U),v.push(U),j)for(var q=U.get("children"),$=0;$<q.length;$++){var ve=q[$];ve.get("type")==="text"&&ve.set("visible",!0)}}),this.set("vShapes",v)},t.prototype.updateParams=function(e){var r=e.r,i=e.trigger,a=e.minR,s=e.maxR,u=e.scaleRBy,l=e.showLabel,h=e.shouldShow;if(isNaN(e.r)||this.set("r",r),isNaN(s)||this.set("maxR",s),isNaN(a)||this.set("minR",a),i!=="mousemove"&&i!=="click"||this.set("trigger",i),u==="wheel"||u==="unset"){this.set("scaleRBy",u),this.get("delegate").remove(),this.get("delegate").destroy();var v=this.get("dPercentText");v&&(v.remove(),v.destroy())}l!=="node"&&l!=="both"||this.set("showNodeLabel",!0),l!=="edge"&&l!=="both"||this.set("showEdgeLabel",!0),h&&this.set("shouldShow",h)},t.prototype.updateDelegate=function(e,r){var i=this,a=i.get("graph"),s=i.get("delegate");if(!s||s.destroyed){var u=a.get("group"),l=i.get("delegateStyle")||Ep;s=u.addShape("circle",{attrs:Sp({r,x:e.x,y:e.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&s.on("mousewheel",function(h){i.scaleRByWheel(h)})}else s.attr({x:e.x,y:e.y,r});i.set("delegate",s)},t.prototype.clear=function(){var e=this.get("vShapes");e&&e.forEach(function(i){i.remove(),i.destroy()}),e=[],this.set("vShapes",e);var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy())},t.prototype.destroy=function(){this.clear()},t}(co),ib=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),ob=mr.pointLineDistance,ab={stroke:"#FA8C16",lineWidth:1},sb=function(n){function t(e){return n.call(this,e)||this}return ib(t,n),t.prototype.getDefaultCfgs=function(){return{line:ab,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var r=e.item,i=(r.get("delegateShape")||r).getBBox(),a=r.getModel(),s=a.x-i.x,u=a.y-i.y;this.show({x:i.minX+s,y:i.minY+u},{width:i.width,height:i.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,r=e.horizontalLines,i=e.verticalLines,a=e.itemAlignType;this.get("graph").getNodes().forEach(function(s){var u=s.getBBox(),l=s.get("id");a===!0||a==="horizontal"?(r[l+"tltr"]=[u.minX,u.minY,u.maxX,u.minY,s],r[l+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,s],r[l+"blbr"]=[u.minX,u.maxY,u.maxX,u.maxY,s]):a==="center"&&(r[l+"lcrc"]=[u.minX,u.centerY,u.maxX,u.centerY,s]),a===!0||a==="vertical"?(i[l+"tlbl"]=[u.minX,u.minY,u.minX,u.maxY,s],i[l+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,s],i[l+"trbr"]=[u.maxX,u.minY,u.maxX,u.maxY,s]):a==="center"&&(i[l+"tcbc"]=[u.centerX,u.minY,u.centerX,u.maxY,s])})},t.prototype.show=function(e,r){var i=Object(p.mix)({},e);return this.itemAlign(e,r,i),e},t.prototype.itemAlign=function(e,r,i){var a=this,s=this._cfgs,u=s.horizontalLines,l=s.verticalLines,h=s.tolerance,v={x:i.x+r.width/2,y:i.y},k={x:i.x+r.width/2,y:i.y+r.height/2},T={x:i.x+r.width/2,y:i.y+r.height},I={x:i.x,y:i.y+r.height/2},j={x:i.x+r.width,y:i.y+r.height/2},F=[],B=[],U=null;if(this.clearAlignLine(),Object(p.each)(u,function($){$[4].isVisible&&(F.push(a.getLineDisObject($,v)),F.push(a.getLineDisObject($,k)),F.push(a.getLineDisObject($,T)))}),Object(p.each)(l,function($){$[4].isVisible&&(B.push(a.getLineDisObject($,I)),B.push(a.getLineDisObject($,k)),B.push(a.getLineDisObject($,j)))}),F.sort(function($,ve){return $.dis-ve.dis}),B.sort(function($,ve){return $.dis-ve.dis}),F.length!==0&&F[0].dis<h){e.y=F[0].line[1]-F[0].point.y+i.y,U={type:"item",horizontals:[F[0]]};for(var q=1;q<3;q++)F[0].dis===F[q].dis&&U.horizontals.push(F[q])}if(B.length!==0&&B[0].dis<h)for(e.x=B[0].line[0]-B[0].point.x+i.x,U?U.verticals=[B[0]]:U={type:"item",verticals:[B[0]]},q=1;q<3;q++)B[0].dis===B[q].dis&&U.verticals.push(B[q]);U&&(U.bbox=r,this.addAlignLine(U))},t.prototype.addAlignLine=function(e){var r=e.bbox,i=e.type,a=e.horizontals,s=e.verticals,u=this._cfgs,l=u.line,h=u.alignLines,v=this.get("graph").get("group");i==="item"&&(a&&Object(p.each)(a,function(k){var T,I,j=k.line,F=k.point,B=(j[0]+j[2])/2;F.x<B?(T=F.x-r.width/2,I=Math.max(j[0],j[2])):(T=F.x+r.width/2,I=Math.min(j[0],j[2]));var U=Object(p.mix)({x1:T,y1:j[1],x2:I,y2:j[1]},l),q=v.addShape("line",{attrs:U,capture:!1});h.push(q)}),s&&Object(p.each)(s,function(k){var T,I,j=k.line,F=k.point,B=(j[1]+j[3])/2;F.y<B?(T=F.y-r.height/2,I=Math.max(j[1],j[3])):(T=F.y+r.height/2,I=Math.min(j[1],j[3]));var U=Object(p.mix)({x1:j[0],y1:T,x2:j[0],y2:I},l),q=v.addShape("line",{attrs:U,capture:!1});h.push(q)}))},t.prototype.getLineDisObject=function(e,r){return{line:e,point:r,dis:ob(e,r)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;Object(p.each)(e,function(r){r.remove()}),e.length=0},t.prototype.destory=function(){var e=this._cfgs,r=e.horizontalLines,i=e.verticalLines;this.get("graph").getNodes().forEach(function(a){var s=a.get("id");delete r[s+"tltr"],delete r[s+"lcrc"],delete r[s+"blbr"],delete i[s+"tlbl"],delete i[s+"tcbc"],delete i[s+"trbr"]}),this.clearAlignLine()},t}(co),ub=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])})(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kn=function(){return(Kn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},cb=["click","mouseenter"],mi={PluginBase:co,Menu:Uy,Grid:Gy,Minimap:Xy,Bundling:Hy,ToolBar:$y,Tooltip:Jy,Fisheye:Ky,TimeBar:$m,ImageMinimap:eb,EdgeFilterLens:nb,SnapLine:sb,Legend:function(n){function t(e){return n.call(this,e)||this}return ub(t,n),t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{};e.multiple&&e.trigger==="mouseenter"&&this.set("multiple",!1);var r=this.get("align");if(!r){var i=this.get("position").split("-");i.includes("left")&&(r="left"),r=i.includes("right")?"right":"center",this.set("align",r)}var a=this.get("graph").get("container"),s=ei(`<div class='g6-legend-container' style="position: absolute;"></div>`);a.appendChild(s),this.set("container",s);var u=this.render();xn(s,this.getContainerPos(u)),this.bindEvents()},t.prototype.getContainerPos=function(e){e===void 0&&(e=[0,0]);var r=this.get("graph"),i=this.get("offsetX"),a=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),l={top:0,right:1,bottom:2,left:3},h={left:(r.getWidth()-e[0])/2+0,top:(r.getHeight()-e[1])/2+0};return u.forEach(function(v){var k=s[l[v]],T=v;switch(v){case"top":case"left":k+=0;break;case"bottom":k=r.getHeight()-e[1]-k+0,T="top";break;default:k=r.getWidth()-e[0]-k+0,T="left"}h[T]=k}),h.top+=a+r.getContainer().offsetTop,h.left+=i+r.getContainer().offsetLeft,Object.keys(h).forEach(function(v){h[v]=h[v]+"px"}),h},t.prototype.bindEvents=function(){var e=this,r=e.get("filter");if(r&&r.enable){var i=r.trigger||"click";cb.includes(i)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),i="click");var a=e.get("legendCanvas");i==="mouseenter"?(a.on("node-container:mouseenter",function(s){return e.filterData(s)}),a.on("node-container:mouseleave",function(s){e.clearFilter(),e.clearActiveLegend()})):(a.on("node-container:click",function(s){return e.filterData(s)}),a.on("click",function(s){s.target&&s.target.isCanvas&&s.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())}))}},t.prototype.changeData=function(e){this.set("data",e);var r=this.render();xn(this.get("container"),this.getContainerPos(r))},t.prototype.activateLegend=function(e){var r=this.get("filter");r!=null&&r.multiple||this.clearActiveLegend();var i=e.get("parent");i.get("active")?(i.set("active",!1),this.findLegendItemsByState("active").length&&i.set("inactive",!0)):(i.set("inactive",!1),i.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(v){v.set("inactive",!0)}):this.clearActiveLegend();var a=(r==null?void 0:r.lengedStateStyles)||{},s=(a==null?void 0:a.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(v){var k=v.get("children"),T=k[0],I=k[1];T.attr(Kn(Kn({},T.get("oriAttrs")),s)),I.attr(Kn(Kn({},I.get("oriAttrs")),u))});var l=(a==null?void 0:a.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},h=l["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(v){var k=v.get("children"),T=k[0],I=k[1];T.attr(Kn(Kn({},T.get("oriAttrs")),l)),I.attr(Kn(Kn({},I.get("oriAttrs")),h))})},t.prototype.findLegendItemsByState=function(e,r,i){r===void 0&&(r="all"),i===void 0&&(i=!0);var a=this.get("legendCanvas").find(function(l){return l.get("name")==="root"}),s=a.find(function(l){return l.get("name")==="node-group"}),u=a.find(function(l){return l.get("name")==="edge-group"});return r==="node"?s.get("children").filter(function(l){return!!l.get(e)===i}):r==="edge"?u.get("children").filter(function(l){return!!l.get(e)===i}):s.get("children").filter(function(l){return!!l.get(e)===i}).concat(u.get("children").filter(function(l){return!!l.get(e)===i}))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas").find(function(r){return r.get("name")==="root"});[e.find(function(r){return r.get("name")==="node-group"}),e.find(function(r){return r.get("name")==="edge-group"})].forEach(function(r){r.get("children").forEach(function(i){i.set("active",!1),i.set("inactive",!1);var a=i.get("children"),s=a[0],u=a[1];s.attr(s.get("oriAttrs")),u.attr(u.get("oriAttrs"))})})},t.prototype.filterData=function(e){var r=this.get("filter"),i=r==null?void 0:r.filterFunctions;if(r&&i){var a=this.get("legendCanvas"),s=this.get("graph"),u=r.graphActiveState||"active",l=r.graphInactiveState||"inactive",h=r.multiple;this.clearFilter(),h||this.clearActiveLegend(),this.activateLegend(e.target);var v=a.find(function(U){return U.get("name")==="root"}),k=v.find(function(U){return U.get("name")==="node-group"}),T=v.find(function(U){return U.get("name")==="edge-group"}),I=k.get("children").filter(function(U){return U.get("active")}),j=T.get("children").filter(function(U){return U.get("active")}),F=0,B=["getNodes","getEdges"];B.forEach(function(U){s[U]().forEach(function(q){var $=!1;(U==="getNodes"?I:j).forEach(function(ve){var de=i[ve.get("id")];$=$||de(q.getModel())}),$?(s.setItemState(q,l,!1),s.setItemState(q,u,!0),F++):(s.setItemState(q,u,!1),s.setItemState(q,l,!0))})}),F||B.forEach(function(U){s[U]().forEach(function(q){s.clearItemStates(q,[l])})})}},t.prototype.clearFilter=function(){var e=this.get("graph"),r=this.get("filter");if(r){var i=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";e.getNodes().forEach(function(s){e.clearItemStates(s,[i,a])}),e.getEdges().forEach(function(s){e.clearItemStates(s,[i,a])})}},t.prototype.render=function(){var e=this;this.processData();var r=this.get("legendCanvas");if(!r){var i=(r=new Wr.Canvas({container:this.get("container"),width:200,height:200})).addGroup({name:"root"});i.addGroup({name:"node-group"}),i.addGroup({name:"edge-group"}),this.set("legendCanvas",r)}var a=r.find(function(gt){return gt.get("name")==="root"}),s=a.find(function(gt){return gt.get("name")==="node-group"}),u=a.find(function(gt){return gt.get("name")==="edge-group"}),l=this.get("itemsData"),h=[s,u];["nodes","edges"].forEach(function(gt,Pt){l[gt].forEach(function(Rt){var Zt,kt,Vt=h[Pt].addGroup({id:Rt.id,name:"node-container"}),Dt=Rt.type,qt=e.getShapeSize(Rt),$t=qt.width,Gt=qt.height,lr=qt.r,Lr=e.getStyle(gt.substr(0,4),Rt);switch(Rt.type){case"circle":kt={r:lr,x:0,y:0};break;case"rect":kt={width:$t,height:Gt,x:-$t/2,y:-Gt/2};break;case"ellipse":kt={r1:$t,r2:Gt,x:0,y:0};break;case"line":kt={x1:-$t/2,y1:0,x2:$t/2,y2:0},Dt="line";break;case"quadratic":kt={path:[["M",-$t/2,0],["Q",0,$t/2,$t/2,0]]},Dt="path";break;case"cubic":kt={path:[["M",-$t/2,0],["C",-$t/6,$t/2,$t/6,-$t/2,$t/2,0]]},Dt="path";break;default:kt={r:lr,x:0,y:0}}var wn=Vt.addShape(Dt,{attrs:Kn(Kn({},kt),Lr),name:Rt.type+"-node-keyShape",oriAttrs:Kn({opacity:1},Lr)});if(Rt.label){var Sr=wn.getBBox(),jr=((Zt=Rt.labelCfg)===null||Zt===void 0?void 0:Zt.style)||{},_r=Kn({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},jr);Vt.addShape("text",{attrs:Kn({x:Sr.maxX+4,y:0,text:Rt.label},_r),className:"legend-label",name:Rt.type+"-node-text",oriAttrs:_r})}})});var v,k=this.get("padding"),T=a.find(function(gt){return gt.get("name")==="title-container"}),I={height:0,maxY:0,width:0};if(this.get("title")){T||(T=a.addGroup({name:"title-container"}));var j={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:k[0]},F=this.get("titleConfig")||{},B=Object.assign(j,F.style||{});v=T.addShape("text",{attrs:Kn({text:this.get("title")},B)}),I=T.getCanvasBBox(),T.setMatrix([1,0,0,0,1,0,F.offsetX,F.offsetY,1])}this.layoutItems();var U=a.getCanvasBBox(),q=s.getCanvasBBox(),$=q.minX<0?Math.abs(q.minX)+k[3]:k[3],ve=I.maxY<q.minY?Math.abs(I.maxY-q.minY)+k[0]:I.maxY+k[0],de=[1,0,0,0,1,0,$,ve,1];s.setMatrix(de);var me=[(U=a.getCanvasBBox()).minX+U.width+k[1],U.minY+U.height+k[2]];if(v){F=Kn({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),I=T.getCanvasBBox();var Te=T.getMatrix()||[1,0,0,0,1,0,0,0,1];F.position==="center"?Te[6]=me[0]/2+F.offsetX:F.position==="right"?(Te[6]=me[0]-k[3]+F.offsetX,v.attr({textAlign:"right"})):(Te[6]=k[3]+F.offsetX,v.attr({textAlign:"left"})),T.setMatrix(Te),I=T.getCanvasBBox(),de=[1,0,0,0,1,0,$=q.minX<0?Math.abs(q.minX)+k[3]:k[3],ve=q.minY<I.maxY?Math.abs(I.maxY-q.minY)+k[0]:I.maxY+k[0],1],s.setMatrix(de);var Oe=[1,0,0,0,1,0,$,ve,1];this.get("layout")==="vertical"?Oe[6]+=q.maxX+this.get("horiSep"):Oe[7]+=q.maxY+this.get("vertiSep"),u.setMatrix(Oe)}else{q=s.getCanvasBBox();var Pe=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?Pe[6]+=de[6]+q.maxX+this.get("horiSep"):Pe[7]+=de[7]+q.maxY+this.get("vertiSep"),u.setMatrix(Pe)}U=a.getCanvasBBox(),q=s.getCanvasBBox(),de=s.getMatrix()||[1,0,0,0,1,0,0,0,1];var Ze=u.getMatrix()||[1,0,0,0,1,0,0,0,1],nt=u.getCanvasBBox();me=[Math.max(q.width+de[6],nt.width+Ze[6])+k[1],Math.max(q.height+de[7],nt.height+Ze[7])+k[2]],r.changeSize(me[0],me[1]);var ct=this.get("containerStyle"),st=a.getMatrix()||[1,0,0,0,1,0,0,0,1],It=mr.invertMatrix({x:0,y:0},st);return a.addShape("rect",{attrs:Kn({x:It.x+(ct.lineWidth||1),y:It.y+(ct.lineWidth||1),width:me[0]-2*(ct.lineWidth||1),height:me[1]-2*(ct.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},ct),name:"legend-back-rect",capture:!1}).toBack(),me},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),r=this.get("horiSep"),i=this.get("vertiSep"),a=this.get("layout"),s=this.get("align"),u=[0,0],l=e.find(function($){return $.get("name")==="root"}),h=l.find(function($){return $.get("name")==="node-group"}),v=l.find(function($){return $.get("name")==="edge-group"}),k={min:0,max:-1/0},T=-1/0;h.get("children").forEach(function($,ve){ve===0&&(k.min=u[0]);var de=$.get("children")[0],me=$.getCanvasBBox(),Te=de.getBBox(),Oe=Te.width,Pe=Te.height,Ze=0,nt=0,ct=0;a==="vertical"?(nt=u[1],ct=u[0]+Oe/2,u[0]=ct+me.height+i,Ze=me.maxX+nt+Oe/2):(nt=u[0]+Oe/2,ct=u[1],u[0]=nt+me.width+r,Ze=me.maxY+ct+Pe/2),u[0]>k.max&&(k.max=u[0]),Ze>T&&(T=Ze),$.setMatrix([1,0,0,0,1,0,nt,ct,1])});var I=k.max-k.min,j={min:0,max:-1/0},F=h.getCanvasBBox();u[0]=0,u[1]=a==="vertical"?F.maxX+r:F.maxY+i,v.get("children").forEach(function($,ve){ve===0&&(j.min=u[0]);var de=$.get("children")[0],me=$.getCanvasBBox(),Te=de.getBBox(),Oe=Te.width,Pe=Te.height,Ze=0,nt=0;a==="vertical"?(Ze=u[1],nt=u[0],u[0]=nt+me.height+i,$.setMatrix([1,0,0,0,1,0,0,nt+Pe/2,1])):(Ze=u[0],nt=u[1],u[0]=Ze+me.width+r,$.setMatrix([1,0,0,0,1,0,Ze+Oe/2,0,1])),u[0]>j.max&&(j.max=u[0])});var B=j.max-j.min;if(s&&s!==""&&s!=="left"){var U=I-B,q=s==="center"?Math.abs(U)/2:Math.abs(U);(U<0?h:v).get("children").forEach(function($){var ve=$.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?ve[7]+=q:ve[6]+=q,$.setMatrix(ve)})}},t.prototype.processData=function(){var e=this.get("data"),r={nodes:[],edges:[]};e.nodes&&(e.nodes.sort(function(i,a){return i.order-a.order}),e.nodes.forEach(function(i){var a,s,u,l,h,v=i.size||[((a=i.style)===null||a===void 0?void 0:a.width)||((s=i.style)===null||s===void 0?void 0:s.r)||8,((u=i.style)===null||u===void 0?void 0:u.height)||((l=i.style)===null||l===void 0?void 0:l.r)||8],k=((h=i.labelCfg)===null||h===void 0?void 0:h.style)||{};r.nodes.push({id:i.id||Object(p.uniqueId)(),type:i.type||"circle",style:Kn({},i.style),order:i.order,label:i.label,itemType:"node",size:v,labelCfg:{position:"right",style:Kn({fontFamily:"Arial"},k)}})})),e.edges&&(e.edges.sort(function(i,a){return i.order-a.order}),e.edges.forEach(function(i){var a,s,u=i.type||"line";i.type==="cubic-horizontal"&&(u="cubic");var l=((a=i.labelCfg)===null||a===void 0?void 0:a.style)||{},h=i.size||[((s=i.style)===null||s===void 0?void 0:s.width)||8,1];r.edges.push({id:i.id||Object(p.uniqueId)(),type:u,size:h,style:Kn({lineWidth:Object(p.isArray)(h)?h[1]:1},i.style),order:i.order,label:i.label,itemType:"edge",labelCfg:{position:"right",style:Kn({fontFamily:"Arial"},l)}})})),this.set("itemsData",r)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var r=this.get(e);if(Object(p.isNumber)(r))this.set(e,[r,r,r,r]);else if(Object(p.isArray)(r))switch(r.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(e,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(e,[r[0],r[1],r[2],r[1]])}return this.get(e)},t.prototype.getShapeSize=function(e){var r,i,a;return e.size&&(Object(p.isArray)(e.size)?(r=e.size[0],i=e.size[1]||e.size[0],a=e.size[0]/2):Object(p.isNumber)(e.size)&&(r=e.size,i=e.size,a=e.size/2)),e.style&&(e.style.width&&(r=e.style.width),e.style.height&&(i=e.style.height),e.style.r&&(a=e.style.r)),a||(a=5),r||(r=a),i||(i=a),{width:r,height:i,r:a}},t.prototype.getStyle=function(e,r){return Kn(Kn({},e==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),r.style||{})},t.prototype.destroy=function(){var e=this.get("graph").get("container"),r=this.get("container");e.removeChild(r)},t}(co)};sn("circle",{options:{size:ir.defaultNode.size,style:{x:0,y:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ir.defaultNode.linkPoints.size,lineWidth:ir.defaultNode.linkPoints.lineWidth,fill:ir.defaultNode.linkPoints.fill,stroke:ir.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(b.__assign)({},ir.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=Object(p.deepMix)({},r,n.icon),s=t.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0}),u=a.width,l=a.height,h=a.show,v=a.text;return h&&(v?t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(b.__assign)({x:-u/2,y:-l/2},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),s},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,h=r.r,v=Object(b.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n)[0]/2;a&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:-k,y:0,r:l/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:k,y:0,r:l/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:-k,r:l/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:k,r:l/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.deepMix)({},t,e),i=this.getSize(n)[0]/2;return Object(b.__assign)({x:0,y:0,r:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getSize(n),i={stroke:n.color,r:r[0]/2},a=t.get("keyShape"),s=Object(p.deepMix)({},a.attr(),i,n.style);this.updateShape(n,t,s,!0),this.updateLinkPoints(n,e)}},"single-node"),sn("rect",{options:{size:[100,30],style:{radius:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ir.defaultNode.linkPoints.size,lineWidth:ir.defaultNode.linkPoints.lineWidth,fill:ir.defaultNode.linkPoints.fill,stroke:ir.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(b.__assign)({},ir.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n),r=t.addShape("rect",{attrs:e,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(n,t),r},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,h=r.r,v=Object(b.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0],I=k[1];a&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:-T/2,y:0,r:l/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:T/2,y:0,r:l/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:-I/2,r:l/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:I/2,r:l/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=r.width||i[0],s=r.height||i[1];return Object(b.__assign)({x:-a/2,y:-s/2,width:a,height:s},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getSize(n),a=t.get("keyShape");n.size||(i[0]=a.attr("width")||r.width,i[1]=a.attr("height")||r.height);var s={stroke:n.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},u=Object(p.mix)({},r,a.attr(),s);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!1),this.updateLinkPoints(n,e)}},"single-node"),sn("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ir.defaultNode.linkPoints.size,lineWidth:ir.defaultNode.linkPoints.lineWidth,fill:ir.defaultNode.linkPoints.fill,stroke:ir.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(b.__assign)({},ir.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),s=r.width,u=r.height,l=r.show,h=r.text;return l&&(h?t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(b.__assign)({x:-s/2,y:-u/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),a},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,h=r.r,v=Object(b.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0]/2,I=k[1]/2;a&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:-T,y:0,r:l/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:T,y:0,r:l/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:-I,r:l/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:I,r:l/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=i[0]/2,s=i[1]/2;return Object(b.__assign)({x:0,y:0,rx:a,ry:s},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getSize(n),a={stroke:n.color,rx:i[0]/2,ry:i[1]/2},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)}},"single-node"),sn("diamond",{options:{size:[80,80],style:{stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ir.defaultNode.linkPoints.size,lineWidth:ir.defaultNode.linkPoints.lineWidth,fill:ir.defaultNode.linkPoints.fill,stroke:ir.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(b.__assign)({},ir.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=t.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=r.width,u=r.height,l=r.show,h=r.text;return l&&(h?t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(b.__assign)({x:-s/2,y:-u/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),a},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,h=r.r,v=Object(b.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0],I=k[1];a&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:-T/2,y:0,r:l/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:T/2,y:0,r:l/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:-I/2,r:l/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:I/2,r:l/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(n){var t=this.getSize(n),e=t[0],r=t[1];return[["M",0,-r/2],["L",e/2,0],["L",0,r/2],["L",-e/2,0],["Z"]]},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getPath(n);return Object(b.__assign)({path:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(n),a={stroke:n.color,path:i},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)}},"single-node"),sn("triangle",{options:{size:40,direction:"up",style:{stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ir.defaultNode.linkPoints.size,lineWidth:ir.defaultNode.linkPoints.lineWidth,fill:ir.defaultNode.linkPoints.fill,stroke:ir.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(b.__assign)({},ir.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(n,t){var e=this.getOptions(n),r=e.icon,i=r===void 0?{}:r,a=e.direction,s=this.getShapeStyle(n),u=n.direction||a,l=t.addShape("path",{attrs:s,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),h=i.width,v=i.height,k=i.show,T=i.offset,I=i.text;if(k)if(I)t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});else{var j=-h/2,F=-v/2;u!=="up"&&u!=="down"||(F+=T),u!=="left"&&u!=="right"||(j+=T),t.addShape("image",{attrs:Object(b.__assign)({x:j,y:F},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(n,t),l},drawLinkPoints:function(n,t){var e=this.getOptions(n),r=e.linkPoints,i=r===void 0?{}:r,a=e.direction,s=n.direction||a,u=i.top,l=i.left,h=i.right,v=i.bottom,k=i.size,T=i.r,I=Object(b.__rest)(i,["top","left","right","bottom","size","r"]),j=this.getSize(n)[0];if(l){var F=null,B=j*Math.sin(1/3*Math.PI),U=j*Math.sin(1/3*Math.PI);s==="up"?F=[-U,B]:s==="down"?F=[-U,-B]:s==="left"&&(F=[-U,U-B]),F&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},I),{x:F[0],y:F[1],r:k/2||T||5}),className:"link-point-left",name:"link-point-left"})}if(h){var q=null;B=j*Math.sin(1/3*Math.PI),U=j*Math.sin(1/3*Math.PI),s==="up"?q=[U,B]:s==="down"?q=[U,-B]:s==="right"&&(q=[U,U-B]),q&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},I),{x:q[0],y:q[1],r:k/2||T||5}),className:"link-point-right",name:"link-point-right"})}if(u){var $=null;B=j*Math.sin(1/3*Math.PI),U=j*Math.sin(1/3*Math.PI),s==="up"?$=[U-B,-B]:s==="left"?$=[U,-B]:s==="right"&&($=[-U,-B]),$&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},I),{x:$[0],y:$[1],r:k/2||T||5}),className:"link-point-top",name:"link-point-top"})}if(v){var ve=null;B=j*Math.sin(1/3*Math.PI),U=j*Math.sin(1/3*Math.PI),s==="down"?ve=[-U+B,B]:s==="left"?ve=[U,B]:s==="right"&&(ve=[-U,B]),ve&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},I),{x:ve[0],y:ve[1],r:k/2||T||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(n){var t=this.getOptions(n).direction,e=n.direction||t,r=this.getSize(n)[0],i=r*Math.sin(1/3*Math.PI),a=r*Math.sin(1/3*Math.PI),s=[["M",-a,i],["L",0,-i],["L",a,i],["Z"]];return e==="down"?s=[["M",-a,-i],["L",a,-i],["L",0,i],["Z"]]:e==="left"?s=[["M",-a,a-i],["L",a,-a],["L",a,a],["Z"]]:e==="right"&&(s=[["M",a,a-i],["L",-a,a],["L",-a,-a],["Z"]]),s},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getPath(n);return Object(b.__assign)({path:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(n),a={stroke:n.color,path:i},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)},updateLinkPoints:function(n,t){var e=this.getOptions({}),r=e.linkPoints,i=e.direction,a=n.direction||i,s=t.find(function(It){return It.get("className")==="link-point-left"}),u=t.find(function(It){return It.get("className")==="link-point-right"}),l=t.find(function(It){return It.get("className")==="link-point-top"}),h=t.find(function(It){return It.get("className")==="link-point-bottom"}),v=r,k=s||u||l||h;k&&(v=k.attr());var T=Object(p.mix)({},v,n.linkPoints),I=T.fill,j=T.stroke,F=T.lineWidth,B=T.size/2;B||(B=T.r);var U=n.linkPoints?n.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},q=U.left,$=U.right,ve=U.top,de=U.bottom,me=this.getSize(n)[0],Te={r:B,fill:I,stroke:j,lineWidth:F},Oe=null,Pe=me*Math.sin(1/3*Math.PI),Ze=me*Math.sin(1/3*Math.PI);a==="up"?Oe=[-Ze,Pe]:a==="down"?Oe=[-Ze,-Pe]:a==="left"&&(Oe=[-Ze,Ze-Pe]),Oe&&(s?q||q===void 0?s.attr(Object(b.__assign)(Object(b.__assign)({},Te),{x:Oe[0],y:Oe[1]})):s.remove():q&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},Te),{x:Oe[0],y:Oe[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var nt=null;a==="up"?nt=[Ze,Pe]:a==="down"?nt=[Ze,-Pe]:a==="right"&&(nt=[Ze,Ze-Pe]),nt&&(u?$||$===void 0?u.attr(Object(b.__assign)(Object(b.__assign)({},Te),{x:nt[0],y:nt[1]})):u.remove():$&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},Te),{x:nt[0],y:nt[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var ct=null;a==="up"?ct=[Ze-Pe,-Pe]:a==="left"?ct=[Ze,-Pe]:a==="right"&&(ct=[-Ze,-Pe]),ct&&(l?ve||ve===void 0?l.attr(Object(b.__assign)(Object(b.__assign)({},Te),{x:ct[0],y:ct[1]})):l.remove():ve&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},Te),{x:ct[0],y:ct[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var st=null;a==="down"?st=[-Ze+Pe,Pe]:a==="left"?st=[Ze,Pe]:a==="right"&&(st=[-Ze,Pe]),st&&(h?de||de===void 0?h.attr(Object(b.__assign)(Object(b.__assign)({},Te),{x:st[0],y:st[1]})):h.remove():de&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},Te),{x:st[0],y:st[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),sn("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:ir.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(n,t){var e=this.getOptions(n).preRect,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=this.getSize(n),s=a[0],u=a[1],l=t.addShape("rect",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),h=r.show,v=Object(b.__rest)(r,["show"]);return h&&t.addShape("rect",{attrs:Object(b.__assign)({x:-s/2,y:-u/2,height:u},v),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(n,t),this.drawStateIcon(n,t),this.drawLinkPoints(n,t),l},drawLogoIcon:function(n,t){var e=this.getOptions(n).logoIcon,r=e===void 0?{}:e,i=this.getSize(n)[0];if(r.show){var a=r.width,s=r.height,u=r.x,l=r.y,h=r.offset,v=r.text,k=Object(b.__rest)(r,["width","height","x","y","offset","text"]);v?t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},k),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:Object(b.__assign)(Object(b.__assign)({},k),{x:u||-i/2+a+h,y:l||-s/2,width:a,height:s}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(n,t){var e=this.getOptions(n).stateIcon,r=e===void 0?{}:e,i=this.getSize(n)[0];if(r.show){var a=r.width,s=r.height,u=r.x,l=r.y,h=r.offset,v=r.text,k=Object(b.__rest)(r,["width","height","x","y","offset","text"]);v?t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},k),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:Object(b.__assign)(Object(b.__assign)({},k),{x:u||i/2-a+h,y:l||-s/2,width:a,height:s}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.bottom,l=r.size,h=r.r,v=Object(b.__rest)(r,["top","left","right","bottom","size","r"]),k=this.getSize(n),T=k[0],I=k[1];a&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:-T/2,y:0,r:l/2||h||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),s&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:T/2,y:0,r:l/2||h||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:-I/2,r:l/2||h||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),u&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},v),{x:0,y:I/2,r:l/2||h||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(n,t){var e=this.getOptions(n),r=e.labelCfg,i=r===void 0?{}:r,a=e.logoIcon,s=a===void 0?{}:a,u=e.descriptionCfg,l=u===void 0?{}:u,h=this.getSize(n)[0],v=null,k=s.show,T=s.width,I=-h/2+i.offset;k&&(I=-h/2+T+i.offset);var j=i.style,F=l.style,B=l.paddingTop;return Object(p.isString)(n.description)?(v=t.addShape("text",{attrs:Object(b.__assign)(Object(b.__assign)({},j),{x:I,y:-5,text:n.label}),className:"text-shape",name:"text-shape",draggable:!0}),t.addShape("text",{attrs:Object(b.__assign)(Object(b.__assign)({},F),{x:I,y:17+(B||0),text:n.description}),className:"rect-description",name:"rect-description",draggable:!0})):v=t.addShape("text",{attrs:Object(b.__assign)(Object(b.__assign)({},j),{x:I,y:7,text:n.label}),className:"text-shape",name:"text-shape",draggable:!0}),v},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getSize(n),a=r.width||i[0],s=r.height||i[1];return Object(b.__assign)({x:-a/2,y:-s/2,width:a,height:s},r)},update:function(n,t){var e=this.getOptions(n),r=e.style,i=r===void 0?{}:r,a=e.labelCfg,s=a===void 0?{}:a,u=e.descriptionCfg,l=u===void 0?{}:u,h=this.getSize(n),v=h[0],k=h[1];t.get("keyShape").attr(Object(b.__assign)(Object(b.__assign)({},i),{x:-v/2,y:-k/2,width:v,height:k}));var T=t.getContainer(),I=T.find(function(Gt){return Gt.get("className")==="rect-logo-icon"}),j=I?I.attr():{},F=Object(p.mix)({},j,n.logoIcon),B=F.width;B===void 0&&(B=this.options.logoIcon.width);var U=n.logoIcon?n.logoIcon.show:void 0,q=s.offset,$=-v/2+B+q;U||U===void 0||($=-v/2+q);var ve=T.find(function(Gt){return Gt.get("className")==="node-label"}),de=T.find(function(Gt){return Gt.get("className")==="rect-description"});if(n.label)if(ve){var me=n.labelCfg?n.labelCfg.style:{},Te=Object(p.mix)({},ve.attr(),me);n.label&&(Te.text=n.label),Te.x=$,Object(p.isString)(n.description)&&(Te.y=-5),de&&(de.resetMatrix(),de.attr({x:$})),ve.resetMatrix(),ve.attr(Te)}else T.addShape("text",{attrs:Object(b.__assign)(Object(b.__assign)({},s.style),{x:$,y:n.description?-5:7,text:n.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(p.isString)(n.description)){var Oe=l.paddingTop;if(de){me=n.descriptionCfg?n.descriptionCfg.style:{};var Pe=Object(p.mix)({},de.attr(),me);Object(p.isString)(n.description)&&(Pe.text=n.description),Pe.x=$,de.resetMatrix(),de.attr(Object(b.__assign)(Object(b.__assign)({},Pe),{y:17+(Oe||0)}))}else T.addShape("text",{attrs:Object(b.__assign)(Object(b.__assign)({},l.style),{x:$,y:17+(Oe||0),text:n.description}),className:"rect-description",name:"rect-description",draggable:!0})}var Ze=T.find(function(Gt){return Gt.get("className")==="pre-rect"});if(Ze){var nt=Object(p.mix)({},Ze.attr(),n.preRect);Ze.attr(Object(b.__assign)(Object(b.__assign)({},nt),{x:-v/2,y:-k/2,height:k}))}if(I)if(U||U===void 0){var ct=F.width,st=F.height,It=F.x,gt=F.y,Pt=F.offset,Rt=Object(b.__rest)(F,["width","height","x","y","offset"]);I.attr(Object(b.__assign)(Object(b.__assign)({},Rt),{x:It||-v/2+ct+Pt,y:gt||-st/2,width:ct,height:st}))}else I.remove();else U&&this.drawLogoIcon(n,T);var Zt=T.find(function(Gt){return Gt.get("className")==="rect-state-icon"}),kt=Zt?Zt.attr():{},Vt=Object(p.mix)({},kt,n.stateIcon);if(Zt){Vt.show||Vt.show===void 0||Zt.remove();var Dt=Vt.width,qt=(st=Vt.height,It=Vt.x,gt=Vt.y,Vt.offset),$t=Object(b.__rest)(Vt,["width","height","x","y","offset"]);Zt.attr(Object(b.__assign)(Object(b.__assign)({},$t),{x:It||v/2-Dt+qt,y:gt||-st/2,width:Dt,height:st}))}else Vt.show&&this.drawStateIcon(n,T);this.updateLinkPoints(n,T)}},"single-node"),sn("star",{options:{size:60,style:{stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ir.defaultNode.linkPoints.size,lineWidth:ir.defaultNode.linkPoints.lineWidth,fill:ir.defaultNode.linkPoints.fill,stroke:ir.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(b.__assign)({},ir.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=t.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),s=r.width,u=r.height,l=r.show,h=r.text;return l&&(h?t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(b.__assign)({x:-s/2,y:-u/2},r),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})),this.drawLinkPoints(n,t),a},drawLinkPoints:function(n,t){var e=this.getOptions(n).linkPoints,r=e===void 0?{}:e,i=r.top,a=r.left,s=r.right,u=r.leftBottom,l=r.rightBottom,h=r.size,v=r.r,k=Object(b.__rest)(r,["top","left","right","leftBottom","rightBottom","size","r"]),T=this.getSize(n)[0];if(s){var I=Math.cos(.1*Math.PI)*T,j=Math.sin(.1*Math.PI)*T;t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},k),{x:I,y:-j,r:h/2||v||5}),className:"link-point-right",name:"link-point-right"})}i&&(I=Math.cos(.5*Math.PI)*T,j=Math.sin(.5*Math.PI)*T,t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},k),{x:I,y:-j,r:h/2||v||5}),className:"link-point-top",name:"link-point-top"})),a&&(I=Math.cos(.9*Math.PI)*T,j=Math.sin(.9*Math.PI)*T,t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},k),{x:I,y:-j,r:h/2||v||5}),className:"link-point-left",name:"link-point-left"})),u&&(I=Math.cos(1.3*Math.PI)*T,j=Math.sin(1.3*Math.PI)*T,t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},k),{x:I,y:-j,r:h/2||v||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),l&&(I=Math.cos(1.7*Math.PI)*T,j=Math.sin(1.7*Math.PI)*T,t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},k),{x:I,y:-j,r:h/2||v||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(n){for(var t=this.getSize(n)[0],e=3*t/8,r=n.innerR||e,i=[],a=0;a<5;a++){var s=Math.cos((18+72*a)/180*Math.PI)*t,u=Math.sin((18+72*a)/180*Math.PI)*t,l=Math.cos((54+72*a)/180*Math.PI)*r,h=Math.sin((54+72*a)/180*Math.PI)*r;a===0?i.push(["M",s,-u]):i.push(["L",s,-u]),i.push(["L",l,-h])}return i.push(["Z"]),i},getShapeStyle:function(n){var t=this.getOptions(n).style,e={stroke:n.color},r=Object(p.mix)({},t,e),i=this.getPath(n);return Object(b.__assign)({path:i},r)},update:function(n,t){var e=t.getContainer(),r=this.getOptions({}).style,i=this.getPath(n),a={stroke:n.color,path:i},s=t.get("keyShape"),u=Object(p.mix)({},r,s.attr(),a);u=Object(p.mix)(u,n.style),this.updateShape(n,t,u,!0),this.updateLinkPoints(n,e)},updateLinkPoints:function(n,t){var e=this.getOptions({}).linkPoints,r=t.find(function(Pe){return Pe.get("className")==="link-point-left"}),i=t.find(function(Pe){return Pe.get("className")==="link-point-right"}),a=t.find(function(Pe){return Pe.get("className")==="link-point-top"}),s=t.find(function(Pe){return Pe.get("className")==="link-point-left-bottom"}),u=t.find(function(Pe){return Pe.get("className")==="link-point-right-bottom"}),l=e,h=r||i||a||s||u;h&&(l=h.attr());var v=Object(p.mix)({},l,n.linkPoints),k=v.fill,T=v.stroke,I=v.lineWidth,j=v.size/2;j||(j=v.r);var F=n.linkPoints?n.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},B=F.left,U=F.right,q=F.top,$=F.leftBottom,ve=F.rightBottom,de=this.getSize(n)[0],me={r:j,fill:k,stroke:T,lineWidth:I},Te=Math.cos(.1*Math.PI)*de,Oe=Math.sin(.1*Math.PI)*de;i?U||U===void 0?i.attr(Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe})):i.remove():U&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),Te=Math.cos(.5*Math.PI)*de,Oe=Math.sin(.5*Math.PI)*de,a?q||q===void 0?a.attr(Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe})):a.remove():q&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),Te=Math.cos(.9*Math.PI)*de,Oe=Math.sin(.9*Math.PI)*de,r?B||B===void 0?r.attr(Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe})):r.remove():B&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),Te=Math.cos(1.3*Math.PI)*de,Oe=Math.sin(1.3*Math.PI)*de,s?$||$===void 0?s.attr(Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe})):s.remove():$&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),Te=Math.cos(1.7*Math.PI)*de,Oe=Math.sin(1.7*Math.PI)*de,u?ve||ve===void 0?u.attr(Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe})):s.remove():ve&&t.addShape("circle",{attrs:Object(b.__assign)(Object(b.__assign)({},me),{x:Te,y:-Oe}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node");var hs=mr.defaultSubjectColors;sn("donut",{options:{size:ir.defaultNode.size,style:{x:0,y:0,stroke:ir.defaultNode.style.stroke,fill:ir.defaultNode.style.fill,lineWidth:ir.defaultNode.style.lineWidth},labelCfg:{style:{fill:ir.nodeLabel.style.fill,fontSize:ir.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:ir.defaultNode.linkPoints.size,lineWidth:ir.defaultNode.linkPoints.lineWidth,fill:ir.defaultNode.linkPoints.fill,stroke:ir.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(b.__assign)({},ir.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(n,t){var e=this.getOptions(n).icon,r=e===void 0?{}:e,i=this.getShapeStyle(n),a=Object(p.deepMix)({},r,n.icon),s=t.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0,name:this.type+"-keyShape"}),u=a.width,l=a.height,h=a.show,v=a.text;h&&(v?t.addShape("text",{attrs:Object(b.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}):t.addShape("image",{attrs:Object(b.__assign)({x:-u/2,y:-l/2},a),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}));var k=s.attr("r"),T=.6*k,I=(k+T)/2,j=n,F=j.donutAttrs,B=F===void 0?{}:F,U=j.donutColorMap,q=U===void 0?{}:U,$=Object.keys(B).length;if(B&&$>1){var ve=[],de=0;if(Object.keys(B).forEach(function(Pe){var Ze=B[Pe]||0;Object(p.isNumber)(Ze)&&(ve.push({key:Pe,value:Ze,color:q[Pe]}),de+=Ze)}),de){var me=k-T;if($===1)return void t.addShape("circle",{attrs:{r:I,x:0,y:0,stroke:ve[0].color||hs[0],lineWidth:me},name:"fan-shape-0"});var Te=[I,0],Oe=0;ve.forEach(function(Pe,Ze){var nt=Pe.value/de;if(!(nt<.001))if(nt>.999&&(nt=1),nt!==1){Pe.percent=nt,Pe.angle=nt*Math.PI*2,Pe.beginAgnle=Oe,Oe+=Pe.angle,Pe.endAngle=Oe,Pe.arcBegin=Te,Pe.arcEnd=[I*Math.cos(Pe.endAngle),-I*Math.sin(Pe.endAngle)];var ct=Pe.angle>Math.PI?1:0,st=[["M",Pe.arcBegin[0],Pe.arcBegin[1]],["A",I,I,0,ct,0,Pe.arcEnd[0],Pe.arcEnd[1]],["L",Pe.arcEnd[0],Pe.arcEnd[1]]];t.addShape("path",{attrs:{path:st,lineWidth:me,stroke:Pe.color||hs[Ze%hs.length]},name:"fan-shape-"+Ze}),Te=Pe.arcEnd}else t.addShape("circle",{attrs:{r:I,x:0,y:0,stroke:Pe.color||hs[Ze%hs.length],lineWidth:me},name:"fan-shape-"+Ze})})}}return this.drawLinkPoints(n,t),s},update:void 0},"circle");var Js=function(n){var t=n.x,e=n.y;return{x:t,y:e,centerX:t,centerY:e,minX:t,minY:e,maxX:t,maxY:e,height:0,width:0}},ac=function(n){for(var t=[],e={},r=n.length-1;r>=0;r--){var i=n[r];i.id=i.x+"|||"+i.y,e[i.id]=i,t.push(i)}return t},Op=function(n){return ac(n)},eu=function(n,t){return n.width||n.height?{centerX:n.centerX,centerY:n.centerY,minX:n.minX-t,minY:n.minY-t,maxX:n.maxX+t,maxY:n.maxY+t,height:n.height+2*t,width:n.width+2*t}:n},sc=function(n,t,e){var r=function(s,u){var l=Math.abs(s.x-u.centerX),h=Math.abs(s.y-u.centerY);return l===0&&h===0?0:l/u.width>h/u.height}(t,n);if(r===0){var i=n.centerX,a=n.centerY;return e.y<t.y?a=n.minY:e.x>t.x?i=n.maxX:e.x<t.x?i=n.minX:e.x===t.x&&(a=n.maxY),{x:i,y:a}}return r?{x:t.x>n.centerX?n.maxX:n.minX,y:t.y}:{x:t.x,y:t.y>n.centerY?n.maxY:n.minY}},Mp=function(n,t){var e=Math.min(n.minX,t.minX),r=Math.min(n.minY,t.minY),i=Math.max(n.maxX,t.maxX),a=Math.max(n.maxY,t.maxY);return{centerX:(e+i)/2,centerY:(r+a)/2,minX:e,minY:r,maxX:i,maxY:a,height:a-r,width:i-e}},uc=function(n){return[{x:n.minX,y:n.minY},{x:n.maxX,y:n.minY},{x:n.maxX,y:n.maxY},{x:n.minX,y:n.maxY}]},tu=function(n,t){var e=n.x,r=n.y;return e<t.minX||e>t.maxX||r<t.minY||r>t.maxY},ds=function(n,t){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)},kp=function(n,t,e,r,i){return ds(n,t)+ds(n,e)+function(a,s){var u=0;return s.forEach(function(l){l&&(a.x===l.x&&(u+=-2),a.y===l.y&&(u+=-2))}),u}(n,[t,e,r,i])},lb=function n(t,e,r,i,a){a===void 0&&(a=0),t.unshift(e[i]),r[i]&&r[i]!==i&&a<=100&&n(t,e,r,r[i],a+1)},ru=function(n,t,e,r){var i=e.x-n.x,a=e.y-n.y,s=r.x-n.x,u=r.y-n.y,l=e.x-t.x,h=e.y-t.y,v=r.x-t.x,k=r.y-t.y;return(i*u-a*s)*(l*k-h*v)<=0&&(i*h-a*l)*(s*k-u*v)<=0},cc=function(n,t,e){if(e.width||e.height){var r=uc(e),i=r[0],a=r[1],s=r[2],u=r[3];return ru(n,t,i,a)||ru(n,t,i,u)||ru(n,t,a,s)||ru(n,t,s,u)}return!1},fb=function(n,t,e,r){var i=[];return n.forEach(function(a){if(a!==t&&(a.x===t.x||a.y===t.y)){if(cc(a,t,e)||cc(a,t,r))return;i.push(a)}}),ac(i)},Ap=function(n,t){var e=[],r=n[0];return e.push("M"+r.x+" "+r.y),n.forEach(function(i,a){var s=n[a+1],u=n[a+2];if(s&&u)if(function(k,T,I){return!(k.x===T.x&&T.x===I.x||k.y===T.y&&T.y===I.y)}(i,s,u)){var l=function(k,T,I,j){var F=ds(k,T),B=ds(I,T);return F<j&&(j=F),B<j&&(j=B),[{x:T.x-j/F*(T.x-k.x),y:T.y-j/F*(T.y-k.y)},{x:T.x-j/B*(T.x-I.x),y:T.y-j/B*(T.y-I.y)}]}(i,s,u,t),h=l[0],v=l[1];e.push("L"+h.x+" "+h.y),e.push("Q"+s.x+" "+s.y+" "+v.x+" "+v.y),e.push("L"+v.x+" "+v.y)}else e.push("L"+s.x+" "+s.y);else s&&e.push("L"+s.x+" "+s.y)}),e.join("")},Cp=function(n,t,e,r,i){var a,s;if(e&&e.getType()?e.getType()==="combo"?((a=e.getKeyShape().getCanvasBBox()||Js(n)).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2):a=e.getBBox():a=Js(n),r&&r.getType())if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var l=r.getModel(),h=l.x,v=l.y;(s={x:h,y:v,width:u.width,height:u.height,minX:u.minX+h,maxX:u.maxX+h,minY:u.minY+v,maxY:u.maxY+v}).centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Js(t)}else s=r&&r.getBBox();else s=Js(t);var k=eu(a,i),T=eu(s,i),I=sc(k,n,t),j=sc(T,t,n),F=function(de){de===void 0&&(de=[]);var me=[],Te=[];de.forEach(function(ct){me.push(ct.x),Te.push(ct.y)});var Oe=Math.min.apply(Math,me),Pe=Math.max.apply(Math,me),Ze=Math.min.apply(Math,Te),nt=Math.max.apply(Math,Te);return{centerX:(Oe+Pe)/2,centerY:(Ze+nt)/2,maxX:Pe,maxY:nt,minX:Oe,minY:Ze,height:nt-Ze,width:Pe-Oe}}([I,j]),B=Mp(k,F),U=Mp(T,F),q=[];q=q.concat(uc(B)).concat(uc(U));var $={x:(n.x+t.x)/2,y:(n.y+t.y)/2};[F,B,U].forEach(function(de){q=q.concat(function(me,Te){return function(Oe,Pe){return Pe<Oe.minX||Pe>Oe.maxX?[]:[{x:Pe,y:Oe.minY},{x:Pe,y:Oe.maxY}]}(me,Te.x).concat(function(Oe,Pe){return Pe<Oe.minY||Pe>Oe.maxY?[]:[{x:Oe.minX,y:Pe},{x:Oe.maxX,y:Pe}]}(me,Te.y))}(de,$).filter(function(me){return tu(me,k)&&tu(me,T)}))}),[{x:I.x,y:j.y},{x:j.x,y:I.y}].forEach(function(de){tu(de,k)&&tu(de,T)&&q.push(de)}),q.unshift(I),q.push(j);var ve=function(de,me,Te,Oe,Pe,Ze,nt){var ct=[],st=[me],It={},gt={},Pt={};gt[me.id]=0,Pt[me.id]=kp(me,Te,me);var Rt,Zt,kt,Vt,Dt,qt={};for(de.forEach(function(Gt){qt[Gt.id]=Gt});st.length;){if(Rt=void 0,Zt=1/0,st.forEach(function(Gt){Pt[Gt.id]<=Zt&&(Zt=Pt[Gt.id],Rt=Gt)}),Rt===Te){var $t=[];return lb($t,qt,It,Te.id),$t}Vt=Rt,Dt=void 0,(Dt=(kt=st).indexOf(Vt))>-1&&kt.splice(Dt,1),ct.push(Rt),fb(de,Rt,Oe,Pe).forEach(function(Gt){if(ct.indexOf(Gt)===-1){st.indexOf(Gt)===-1&&st.push(Gt);var lr=Pt[Rt.id]+ds(Rt,Gt);gt[Gt.id]&&lr>=gt[Gt.id]||(It[Gt.id]=Rt.id,gt[Gt.id]=lr,Pt[Gt.id]=gt[Gt.id]+kp(Gt,Te,me,Ze,nt))}})}return[me,Te]}(q=ac(q),I,j,a,s,n,t);return ve.unshift(n),ve.push(t),Op(ve)},hb={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(n,t){return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)},fallbackRoute:function(n,t,e,r,i){return Op(Cp(n,t,e,r,i.offset))}},Vo=function(n,t){var e=Math.round(Math.abs(n/t));return e<0?0:(n<0?-1:1)*e},lc=function(n,t){var e=t.x-n.x,r=t.y-n.y;return e||r?Math.atan2(r,e):0},Tp=function(n,t){var e=Math.abs(n-t);return e>Math.PI?2*Math.PI-e:e},Ip=function(n,t,e){for(var r=1/0,i=0,a=t.length;i<a;i++){var s=e(n,t[i]);s<r&&(r=s)}return r},jp=function(n,t,e,r,i){var a=[];if(!e)return[n];var s=i.directions,u=i.offset,l=e.getBBox(),h=t.x>l.minX&&t.x<l.maxX&&t.y>l.minY&&t.y<l.maxY,v=eu(l,u);for(var k in v)v[k]=Vo(v[k],i.gridSize);if(h){for(var T=0,I=s;T<I.length;T++){var j=I[T],F=[[{x:v.minX,y:v.minY},{x:v.maxX,y:v.minY}],[{x:v.minX,y:v.minY},{x:v.minX,y:v.maxY}],[{x:v.maxX,y:v.minY},{x:v.maxX,y:v.maxY}],[{x:v.minX,y:v.maxY},{x:v.maxX,y:v.maxY}]];for(k=0;k<4;k++){var B=F[k],U=mr.getLineIntersect(n,{x:n.x+j.stepX*v.width,y:n.y+j.stepY*v.height},B[0],B[1]);U&&!cc(n,U,l)&&(U.id=U.x+"|||"+U.y,a.push(U))}}return a}var q=sc(v,n,r);return q.id=q.x+"|||"+q.y,[q]},fc=function(n,t,e,r){var i=lc(n,t);if(!e[n.id]){var a=lc(r,n);return Tp(a,i)}var s=lc({x:e[n.id].x,y:e[n.id].y},n);return Tp(s,i)},db=function(n,t,e,r,i,a,s){var u=[r],l=n.id,h=n.x,v=n.y,k={x:h,y:v,id:l};for(fc(k,a,t,e)&&u.unshift({x:a.x===r.x?r.x:k.x*s,y:a.y===r.y?r.y:k.y*s});t[l]&&t[l].id!==l;){var T={x:h,y:v,id:l},I=t[l].id,j=t[l].x,F=t[l].y,B={x:j,y:F,id:I};fc(B,T,t,e)&&u.unshift({x:B.x===T.x?u[0].x:B.x*s,y:B.y===T.y?u[0].y:B.y*s}),l=I,h=j,v=F}var U=h,q=v;return u[0].x=U===e.x?i.x:u[0].x,u[0].y=q===e.y?i.y:u[0].y,u.unshift(i),u},pb=function(n,t,e,r,i){if(isNaN(n.x)||isNaN(t.x))return[];var a=Object(p.deepMix)(hb,i);a.obstacles=a.obstacles||[];var s=a.gridSize,u=function(ct,st,It){var gt={};return ct.forEach(function(Pt){if(Pt)for(var Rt=eu(Pt.getBBox(),It),Zt=Vo(Rt.minX,st);Zt<=Vo(Rt.maxX,st);Zt+=1)for(var kt=Vo(Rt.minY,st);kt<=Vo(Rt.maxY,st);kt+=1)gt[Zt+"|||"+kt]=!0}),gt}(a.obstacles.concat([e,r]),s,a.offset),l={x:Vo(n.x,s),y:Vo(n.y,s)},h={x:Vo(t.x,s),y:Vo(t.y,s)};n.id=l.x+"|||"+l.y,t.id=h.x+"|||"+h.y;var v=jp(l,n,e,h,a),k=jp(h,t,r,l,a);v.forEach(function(ct){delete u[ct.id]}),k.forEach(function(ct){delete u[ct.id]});for(var T={},I={},j={},F={},B={},U=0;U<v.length;U++){var q=v[U];T[q.id]=q,F[q.id]=0,B[q.id]=Ip(q,k,a.distFunc)}for(var $,ve,de,me,Te,Oe,Pe,Ze=a.maximumLoops,nt=a.penalties;Object.keys(T).length>0&&Ze>0&&($=void 0,ve=1/0,Object.keys(T).forEach(function(ct){var st=T[ct].id;B[st]<=ve&&(ve=B[st],$=T[st])}),$);){if(k.findIndex(function(ct){return ct.x===$.x&&ct.y===$.y})>-1)return db($,j,l,t,n,h,s);for(delete T[$.id],I[$.id]=!0,U=0;U<a.directions.length;U++)de=a.directions[U],I[(me={x:$.x+de.stepX,y:$.y+de.stepY,id:Math.round($.x)+de.stepX+"|||"+(Math.round($.y)+de.stepY)}).id]||(Pe=fc($,me,j,l))>a.maxAllowedDirectionChange||u[me.id]||(T[me.id]||(T[me.id]=me),Te=a.distFunc($,me)+(isNaN(nt[Pe])?s:nt[Pe]),Oe=F[$.id]+Te,F[me.id]&&Oe>=F[me.id]||(j[me.id]=$,F[me.id]=Oe,B[me.id]=Oe+Ip(me,k,a.distFunc)));Ze-=1}return a.fallbackRoute(n,t,e,r,a)};Ti("polyline",{options:{color:ir.defaultEdge.color,size:ir.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:ir.defaultEdge.style.stroke,lineAppendWidth:ir.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:ir.edgeLabel.style.fill,fontSize:ir.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:Object(b.__assign)({},ir.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(n,t){var e=this.getShapeStyle(n);return e.radius===0&&delete e.radius,t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:e})},getShapeStyle:function(n){var t=this.options.style,e={stroke:n.color},r=Object(p.mix)({},t,e,n.style);n=this.getPathPoints(n),this.radius=r.radius,this.offset=r.offset;var i=n.startPoint,a=n.endPoint,s=this.getControlPoints(n),u=[i];s&&(u=u.concat(s)),u.push(a);var l=n.sourceNode,h=n.targetNode,v=r.radius,k=this.options.routeCfg,T=Object(p.mix)({},k,n.routeCfg);T.offset=r.offset;var I=this.getPath(u,l,h,v,T);return(Object(p.isArray)(I)&&I.length<=1||Object(p.isString)(I)&&I.indexOf("L")===-1)&&(I="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(a.x)||isNaN(a.y))&&(I="M0 0, L0 0"),Object(p.mix)({},ir.defaultEdge.style,r,{lineWidth:n.size,path:I})},updateShapeStyle:function(n,t){var e=t.getContainer();if(t.isVisible()){var r={stroke:n.color},i=e.find(function($){return $.get("className")==="edge-shape"})||t.getKeyShape(),a=n.size,s=(n=this.getPathPoints(n)).startPoint,u=n.endPoint,l=this.getControlPoints(n),h=[s];l&&(h=h.concat(l)),h.push(u);var v=i.attr(),k=Object(p.mix)({},r,v,n.style),T=n.sourceNode,I=n.targetNode,j=k.radius,F=this.options.routeCfg,B=Object(p.mix)({},F,n.routeCfg);B.offset=k.offset;var U=this.getPath(h,T,I,j,B);(Object(p.isArray)(U)&&U.length<=1||Object(p.isString)(U)&&U.indexOf("L")===-1)&&(U="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(U="M0 0, L0 0"),v.endArrow&&k.endArrow===!1&&(n.style.endArrow={path:""}),v.startArrow&&k.startArrow===!1&&(n.style.startArrow={path:""});var q=Object(p.mix)(r,i.attr(),{lineWidth:a,path:U},n.style);i&&i.attr(q)}},getPath:function(n,t,e,r,i){var a=i.offset,s=i.simple;if(!a||n.length>2){if(r)return Ap(n,r);var u=[];return Object(p.each)(n,function(h,v){v===0?u.push(["M",h.x,h.y]):u.push(["L",h.x,h.y])}),u}var l=s?Cp(n[n.length-1],n[0],e,t,a):pb(n[0],n[n.length-1],t,e,i);return l&&l.length?r?Ap(l,r):mr.pointsToPolygon(l):"M0 0, L0 0"}},"single-edge");var Pp=Po.cloneEvent,Np=Po.isNaN,Dp=Math.abs,gb=["shift","ctrl","alt","control"],vb={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(n){var t=this.origin,e=+n.clientX,r=+n.clientY;if(!Np(e)&&!Np(r)){var i=e-t.x,a=r-t.y;this.get("direction")==="x"?a=0:this.get("direction")==="y"&&(i=0),this.origin={x:e,y:r};var s=this.graph.get("width"),u=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),h=this.scalableRange,v=this.scalableRange;h<1&&h>-1&&(h*=s,v*=u),(l.minX<=s+h&&l.minX+i>s+h||l.maxX+h>=0&&l.maxX+h+i<0)&&(i=0),(l.minY<=u+v&&l.minY+a>u+v||l.maxY+v>=0&&l.maxY+v+a<0)&&(a=0),this.graph.translate(i,a)}},onTouchStart:function(n){var t=n.originalEvent.touches,e=t[0],r=t[1];e&&r||(n.preventDefault(),this.onMouseDown(n))},onMouseDown:function(n){var t=n.originalEvent;if((!t||n.name===zt.TOUCHSTART||t.button===0)&&(n.name===zt.TOUCHSTART||typeof window=="undefined"||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin.call(this,n)&&!this.keydown){var e=n.target,r=e&&e.isCanvas&&e.isCanvas();if((this.allowDragOnItem||r)&&(this.origin={x:n.clientX,y:n.clientY},this.dragging=!1,this.enableOptimize)){for(var i=this.graph,a=i.getEdges(),s=0,u=a.length;s<u;s++){var l=a[s].get("group").get("children");l&&l.forEach(function(F){F.set("ori-visibility",F.get("ori-visibility")||F.get("visible")),F.hide()})}for(var h=i.getNodes(),v=0,k=h.length;v<k;v++)for(var T=0,I=h[v].getContainer().get("children");T<I.length;T++){var j=I[T];j.get("isKeyShape")||(j.set("ori-visibility",j.get("ori-visibility")||j.get("visible")),j.hide())}}}},onTouchMove:function(n){var t=n.originalEvent.touches,e=t[0],r=t[1];e&&r?this.onMouseUp(n):(n.preventDefault(),this.onMouseMove(n))},onMouseMove:function(n){var t=this.graph;if(!this.keydown){var e=n.target,r=e&&e.isCanvas&&e.isCanvas();if((this.allowDragOnItem||r)&&(n=Pp(n),this.origin)){if(this.dragging)n.type="drag",t.emit("canvas:drag",n);else{if(Dp(this.origin.x-n.clientX)+Dp(this.origin.y-n.clientY)<10)return;this.shouldBegin.call(this,n)&&(n.type="dragstart",t.emit("canvas:dragstart",n),this.dragging=!0)}this.shouldUpdate.call(this,n)&&this.updateViewport(n)}}},onMouseUp:function(n){var t,e,r=this.graph;if(!this.keydown){var i=r.getZoom(),a=r.get("modeController"),s=(e=(t=a==null?void 0:a.modes[a.mode])===null||t===void 0?void 0:t.filter(function(q){return q.type==="zoom-canvas"}))===null||e===void 0?void 0:e[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=r.getEdges(),h=0,v=l.length;h<v;h++){var k=l[h].get("group").get("children");k&&k.forEach(function(q){q.get("ori-visibility")&&q.show()})}if(i>u)for(var T=r.getNodes(),I=0,j=T.length;I<j;I++)for(var F=0,B=T[I].getContainer().get("children");F<B.length;F++){var U=B[F];U.get("isKeyShape")||U.get("ori-visibility")&&U.show()}}this.dragging?(n=Pp(n),this.shouldEnd.call(this,n)&&this.updateViewport(n),n.type="dragend",r.emit("canvas:dragend",n),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(n){var t=n.key;t&&(gb.indexOf(t.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},yb={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas","node:touchstart":"onTouchStart","node:touchmove":"onTouchMove","node:touchend":"onDragEnd"}},validationCombo:function(n){return!(!this.origin||!n||n.destroyed)&&n.getType()==="combo"},onTouchStart:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return;n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.onDragStart(n)},onTouchMove:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return void this.onDragEnd(n);n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.onDrag(n)},onDragStart:function(n){var t=this;if(this.shouldBegin.call(this,n)){var e=n.item;if(e&&!e.destroyed&&!e.hasLocked()){e.getContainer().set("capture",!1);var r=n.target;if(r&&r.get("isAnchorPoint"))return;var i=this.graph;this.targets=[],this.targetCombo=null;var a=i.findAllByState("node",this.selectedState),s=e.get("id");a.filter(function(l){var h=l.get("id");return s===h}).length===0?this.targets.push(e):a.length>1?a.forEach(function(l){l.hasLocked()||t.targets.push(l)}):this.targets.push(e);var u=[];this.targets.forEach(function(l){u.push(Object(p.clone)(l.getModel()))}),this.set("beforeDragNodes",u),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(l){l.getEdges().forEach(function(h){h.isVisible()&&(t.hidenEdge[h.getID()]=!0,h.hide())})}),this.origin={x:n.x,y:n.y},this.point={},this.originPoint={}}}},onDrag:function(n){var t=this;this.origin&&this.shouldUpdate(this,n)&&(this.get("enableDelegate")?this.updateDelegate(n):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:n,updateEdge:this.get("updateEdge")}):this.targets.map(function(e){t.update(e,n)}))},onDragEnd:function(n){var t=this;if(this.origin&&this.shouldEnd.call(this,n)){var e=n.item;e&&e.getContainer().set("capture",!0),this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(n),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(a){a.getEdges().forEach(function(s){t.hidenEdge[s.getID()]&&s.show(),s.refresh()})}),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(a){i.before.nodes.push({id:a.id,x:a.x,y:a.y})}),this.targets.forEach(function(a){var s=a.getModel();i.after.nodes.push({id:s.id,x:s.x,y:s.y})}),r.pushStack("update",Object(p.clone)(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(n){var t=n.item;if(this.validationCombo(t)){this.updatePositions(n);var e=this.graph;if(this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)e.updateCombos();else{var r=t.getModel();this.targets.map(function(i){i.getModel().comboId!==r.id&&e.updateComboTree(i,r.id)}),e.updateCombo(t)}e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(n){var t=this.graph;this.targets&&this.targets.length!==0&&(this.updatePositions(n),this.onlyChangeComboSize?t.updateCombos():this.targets.map(function(e){e.getModel().comboId&&t.updateComboTree(e)}))},onDropNode:function(n){if(this.targets&&this.targets.length!==0){var t=n.item;this.updatePositions(n);var e=this.graph,r=t.getModel().comboId;if(this.onlyChangeComboSize)e.updateCombos();else if(r){var i=e.findById(r);this.comboActiveState&&e.setItemState(i,this.comboActiveState,!1),this.targets.map(function(a){var s=a.getModel();r!==s.comboId&&e.updateComboTree(a,r)}),e.updateCombo(i)}else this.targets.map(function(a){a.getModel().comboId&&e.updateComboTree(a)});e.emit("dragnodeend",{items:this.targets,targetItem:t})}},onDragEnter:function(n){var t=n.item;if(this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(n){var t=n.item;if(this.validationCombo(t)){var e=this.graph;this.comboActiveState&&e.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(n){var t=this;this.targets&&this.targets.length!==0&&this.get("enableDelegate")&&(this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:n,updateEdge:this.get("updateEdge"),updateFunc:this.update}):this.targets.map(function(e){return t.update(e,n)}))},update:function(n,t){var e=this.origin,r=n.get("model"),i=n.get("id");this.point[i]||(this.point[i]={x:r.x||0,y:r.y||0});var a={x:t.x-e.x+this.point[i].x,y:t.y-e.y+this.point[i].y};this.get("updateEdge")?this.graph.updateItem(n,a,!1):n.updatePosition(a)},debounceUpdate:Object(p.debounce)(function(n){var t=n.targets,e=n.graph,r=n.point,i=n.origin,a=n.evt,s=n.updateEdge;n.updateFunc,t.map(function(u){var l=u.get("model"),h=u.get("id");r[h]||(r[h]={x:l.x||0,y:l.y||0});var v={x:a.x-i.x+r[h].x,y:a.y-i.y+r[h].y};s?e.updateItem(u,v,!1):u.updatePosition(v)})},50,!0),updateDelegate:function(n){var t=this.graph;if(this.delegateRect){var e=n.x-this.origin.x+this.originPoint.minX,r=n.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:e,y:r})}else{var i=t.get("group"),a=Object(p.deepMix)({},Xo.delegateStyle,this.delegateStyle),s=this.calculationGroupPosition(n),u=s.x,l=s.y,h=s.width,v=s.height,k=s.minX,T=s.minY;this.originPoint={x:u,y:l,width:h,height:v,minX:k,minY:T},this.delegateRect=i.addShape("rect",{attrs:Object(b.__assign)({width:h,height:v,x:u,y:l},a),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(n){var t=this.targets;t.length===0&&t.push(n.item);for(var e=1/0,r=-1/0,i=1/0,a=-1/0,s=0;s<t.length;s++){var u=t[s].getBBox(),l=u.minX,h=u.minY,v=u.maxX,k=u.maxY;l<e&&(e=l),h<i&&(i=h),v>r&&(r=v),k>a&&(a=k)}return{x:Math.floor(e),y:Math.floor(i),width:Math.ceil(r)-Math.floor(e),height:Math.ceil(a)-Math.floor(i),minX:e,minY:i}}},mb={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return;n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.setAllItemStates(n)},clearOnTouchStart:function(n){try{var t=n.originalEvent.touches,e=t[0],r=t[1];if(e&&r)return;n.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.clearActiveState(n)},setAllItemStates:function(n){var t=n.item,e=this.graph;if(this.item=t,this.shouldUpdate(n.item,{event:n,action:"activate"})){for(var r=this.activeState,i=this.inactiveState,a=e.getNodes(),s=e.getCombos(),u=e.getEdges(),l=e.get("vedges"),h=a.length,v=s.length,k=u.length,T=l.length,I=0;I<h;I++){var j=a[I],F=j.hasState("selected");this.resetSelected&&F&&e.setItemState(j,"selected",!1),e.setItemState(j,r,!1),i&&e.setItemState(j,i,!0)}for(I=0;I<v;I++){var B=s[I];F=B.hasState("selected"),this.resetSelected&&F&&e.setItemState(B,"selected",!1),e.setItemState(B,r,!1),i&&e.setItemState(B,i,!0)}for(I=0;I<k;I++){var U=u[I];e.setItemState(U,r,!1),i&&e.setItemState(U,i,!0)}for(I=0;I<T;I++){var q=l[I];e.setItemState(q,r,!1),i&&e.setItemState(q,i,!0)}i&&e.setItemState(t,i,!1),e.setItemState(t,r,!0);var $=t.getEdges(),ve=$.length;for(I=0;I<ve;I++){var de=void 0;de=(U=$[I]).getSource()===t?U.getTarget():U.getSource(),i&&e.setItemState(de,i,!1),e.setItemState(de,r,!0),e.setItemState(U,i,!1),e.setItemState(U,r,!0),U.toFront()}e.emit("afteractivaterelations",{item:n.item,action:"activate"})}},clearActiveState:function(n){var t=this.get("graph");if(this.shouldUpdate(n.item,{event:n,action:"deactivate"})){var e=this.activeState,r=this.inactiveState,i=t.get("autoPaint");t.setAutoPaint(!1);for(var a=t.getNodes()||[],s=t.getCombos()||[],u=t.getEdges()||[],l=t.get("vedges")||[],h=a.length,v=s.length,k=u.length,T=l.length,I=0;I<h;I++){var j=a[I];t.clearItemStates(j,[e,r])}for(I=0;I<v;I++){var F=s[I];t.clearItemStates(F,[e,r])}for(I=0;I<k;I++){var B=u[I];t.clearItemStates(B,[e,r,"deactivate"])}for(I=0;I<T;I++){var U=l[I];t.clearItemStates(U,[e,r,"deactivate"])}t.paint(),t.setAutoPaint(i),t.emit("afteractivaterelations",{item:n.item||this.get("item"),action:"deactivate"})}}},nu=Math.min,Rp=Math.max,Lp=Math.abs,bb=["drag","shift","ctrl","alt","control"],xb={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return bb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(n){var t=n.item,e=this.brush;t||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),e||(e=this.createBrush()),this.originPoint={x:n.canvasX,y:n.canvasY},e.attr({width:0,height:0}),e.show(),this.dragging=!0)},onMouseMove:function(n){this.dragging&&(this.trigger==="drag"||this.keydown)&&this.updateBrush(n)},onMouseUp:function(n){this.graph,(this.brush||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(n),this.dragging=!1)},clearStates:function(){var n=this.graph,t=this.selectedState,e=n.findAllByState("node",t),r=n.findAllByState("edge",t);e.forEach(function(i){return n.setItemState(i,t,!1)}),r.forEach(function(i){return n.setItemState(i,t,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(n){var t=this,e=this.graph,r=this.originPoint,i=this.shouldUpdate,a=this.selectedState,s={x:n.x,y:n.y},u=e.getPointByCanvas(r.x,r.y),l=nu(s.x,u.x),h=Rp(s.x,u.x),v=nu(s.y,u.y),k=Rp(s.y,u.y),T=[],I=[];e.getNodes().forEach(function(F){if(F.isVisible()){var B=F.getBBox();if(B.centerX>=l&&B.centerX<=h&&B.centerY>=v&&B.centerY<=k&&i(F,"select")){T.push(F);var U=F.getModel();I.push(U.id),e.setItemState(F,a,!0)}}});var j=[];this.includeEdges&&T.forEach(function(F){F.getOutEdges().forEach(function(B){if(B.isVisible()){var U=B.getModel(),q=U.source,$=U.target;I.includes(q)&&I.includes($)&&i(B,"select")&&(j.push(B),e.setItemState(B,t.selectedState,!0))}})}),this.selectedEdges=j,this.selectedNodes=T,this.onSelect&&this.onSelect(T,j),e.emit("nodeselectchange",{selectedItems:{nodes:T,edges:j},select:!0})},createBrush:function(){var n=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=n,this.delegate=n,n},updateBrush:function(n){var t=this.originPoint;this.brush.attr({width:Lp(n.canvasX-t.x),height:Lp(n.canvasY-t.y),x:nu(n.canvasX,t.x),y:nu(n.canvasY,t.y)})},onKeyDown:function(n){var t=n.key;if(t){var e=this.trigger.toLowerCase(),r=t.toLowerCase();this.keydown=r===e||r==="control"&&e==="ctrl"||r==="ctrl"&&e==="control"}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},wb=["shift","ctrl","alt","control"],_b={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return wb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(n){var t=this,e=n.item;if(e&&!e.destroyed){e.getType();var r=t.graph,i=t.keydown,a=t.multiple,s=t.shouldUpdate;if(t.shouldBegin.call(t,n)){if(!i||!a){var u=r.findAllByState("node",t.selectedState).concat(r.findAllByState("combo",t.selectedState));Object(p.each)(u,function(v){v!==e&&r.setItemState(v,t.selectedState,!1)})}if(e.hasState(t.selectedState)){s.call(t,n)&&r.setItemState(e,t.selectedState,!1);var l=r.findAllByState("node",t.selectedState),h=r.findAllByState("combo",t.selectedState);r.emit("nodeselectchange",{target:e,selectedItems:{nodes:l,combos:h},select:!1})}else s.call(t,n)&&r.setItemState(e,t.selectedState,!0),l=r.findAllByState("node",t.selectedState),h=r.findAllByState("combo",t.selectedState),r.emit("nodeselectchange",{target:e,selectedItems:{nodes:l,combos:h},select:!0})}}},onCanvasClick:function(){var n=this,t=this.graph,e=t.findAllByState("node",this.selectedState);Object(p.each)(e,function(i){t.setItemState(i,n.selectedState,!1)});var r=t.findAllByState("combo",this.selectedState);Object(p.each)(r,function(i){t.setItemState(i,n.selectedState,!1)}),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(n){var t=n.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()||t.toLowerCase()==="control"?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},Sb=S.transform,Eb={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var n=this.fixSelectedItems;return n.fixState||(n.fixState="selected"),n.fixAll&&(n.fixLineWidth=!0,n.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(n){var t=n.originalEvent.touches,e=t[0],r=t[1];n.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin.call(this,n)||(this.startPoint={pageX:e.pageX,pageY:e.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(n){if(this.moveable){n.preventDefault();var t=n.originalEvent.touches,e=t[0],r=t[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(h,v){return Math.hypot(v.x-h.x,v.y-h.y)},a=i({x:e.pageX,y:e.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*a;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom");if(!(s>(this.get("maxZoom")||this.graph.get("maxZoom"))||s<u)){var l=this.graph.get("canvas").getPointByClient(n.clientX,n.clientY);this.graph.zoomTo(s,{x:l.x,y:l.y}),this.graph.emit("wheelzoom",n)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(n){var t=this,e=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin.call(this,n))&&this.shouldUpdate.call(this,n)){n.preventDefault();var i,a=e.get("canvas").getPointByClient(n.clientX,n.clientY),s=this.get("sensitivity"),u=e.getZoom();i=u*(n.wheelDelta<0?1-.05*s:1/(1-.05*s));var l=this.get("minZoom")||e.get("minZoom");if(!(i>(this.get("maxZoom")||e.get("maxZoom"))||i<l)){if(this.get("enableOptimize")){var h=this.get("optimizeZoom"),v=this.get("optimized"),k=e.getNodes(),T=e.getEdges(),I=k.length,j=T.length;if(!v){for(var F=0;F<I;F++)if(!(Pe=k[F]).destroyed)for(var B=(un=Pe.get("group").get("children")).length,U=0;U<B;U++)(kt=un[U]).destoryed||kt.get("isKeyShape")||(kt.set("ori-visibility",kt.get("ori-visibility")||kt.get("visible")),kt.hide());for(var q=0;q<j;q++)for(B=(un=(_r=T[q]).get("group").get("children")).length,U=0;U<B;U++)(kt=un[U]).set("ori-visibility",kt.get("ori-visibility")||kt.get("visible")),kt.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var $=setTimeout(function(){var hr=e.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var qr=0;qr<I;qr++){var en=k[qr],Yr=(Tn=en.get("group").get("children")).length;if(hr<h)(Tr=(tn=en.getKeyShape()).get("ori-visibility"))&&tn.show();else for(var Cr=0;Cr<Yr;Cr++){var Tr=(cn=Tn[Cr]).get("ori-visibility");!cn.get("visible")&&Tr&&Tr&&cn.show()}}for(var Zr=0;Zr<j;Zr++){var Tn,tn,bi=T[Zr];if(Yr=(Tn=bi.get("group").get("children")).length,hr<h)(Tr=(tn=bi.getKeyShape()).get("ori-visibility"))&&tn.show();else for(Cr=0;Cr<Yr;Cr++){var cn;(cn=Tn[Cr]).get("visible")||(Tr=cn.get("ori-visibility"))&&cn.show()}}}},100);this.set("timeout",$)}if(u<=1){var ve=void 0,de=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){ve=e.findAllByState("node",r.fixState),de=e.findAllByState("edge",r.fixState);for(var me=u/i,Te=ve.length,Oe=0;Oe<Te;Oe++){var Pe,Ze=(Pe=ve[Oe]).getContainer(),nt=Pe.getModel(),ct=Pe.getOriginStyle(),st=Pe.getStateStyle(r.fixState),It=Pe.get("shapeFactory").getShape(nt.type).getStateStyle(r.fixState,Pe)[r.fixState];if(r.fixAll){if(i<=1){var gt=Object(p.clone)(Ze.getMatrix());gt||(gt=[1,0,0,0,1,0,0,0,1]);var Pt=Pe.getModel(),Rt=Pt.x,Zt=Pt.y;gt=Sb(gt,[["t",-Rt,-Zt],["s",me,me],["t",Rt,Zt]]),Ze.setMatrix(gt)}}else for(B=(un=Ze.get("children")).length,U=0;U<B;U++){var kt=un[U],Vt=void 0,Dt=void 0;if(r.fixLabel&&kt.get("type")==="text"){Vt=kt.attr("fontSize")||12;var qt=st[kt.get("name")],$t=It[kt.get("name")],Gt=qt?qt.fontSize:12,lr=$t?$t.fontSize:12,Lr=Gt||lr||12;if(i<=1&&kt.attr("fontSize",Lr/i),Dt)break}if(r.fixLineWidth&&kt.get("isKeyShape")){Dt=kt.attr("lineWidth")||0;var wn=st.lineWidth||It.lineWidth||ct.lineWidth||0;if(i<=1&&kt.attr("lineWidth",wn/i),Vt)break}}}for(var Sr=de.length,jr=0;jr<Sr;jr++){var _r,un=(Ze=(_r=de[jr]).getContainer()).get("children");for(nt=_r.getModel(),st=_r.getStateStyle(r.fixState),It=_r.get("shapeFactory").getShape(nt.type).getStateStyle(r.fixState,_r)[r.fixState],B=un.length,U=0;U<B&&(kt=un[U],Vt=void 0,Dt=void 0,!((r.fixLabel||r.fixAll)&&kt.get("type")==="text"&&(Vt=kt.attr("fontSize")||12,qt=st[kt.get("name")],$t=It[kt.get("name")],Gt=qt?qt.fontSize:12,lr=$t?$t.fontSize:12,Lr=Gt||lr||12,i<=1&&kt.attr("fontSize",Lr/i),Dt)||(r.fixLineWidth||r.fixAll)&&kt.get("isKeyShape")&&(Dt=kt.attr("lineWidth")||0,wn=st.lineWidth||It.lineWidth||1,i<=1&&kt.attr("lineWidth",wn/i),Vt)));U++);}}}e.zoomTo(i,{x:a.x,y:a.y}),e.emit("wheelzoom",n)}}}},Bp={onMouseEnter:function(n){var t=n.item;this.currentTarget=t,this.showTooltip(n),this.graph.emit("tooltipchange",{item:n.item,action:"show"})},onMouseMove:function(n){this.shouldUpdate(n)?this.currentTarget&&n.item===this.currentTarget&&this.updatePosition(n):this.hideTooltip()},onMouseLeave:function(n){this.shouldEnd(n)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(n){var t=this.container;if(n.item&&!n.item.destroyed){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var e=this.formatText(n.item.get("model"),n);t.innerHTML=e,xn(this.container,{visibility:"visible"}),this.updatePosition(n)}},hideTooltip:function(){xn(this.container,{visibility:"hidden"})},updatePosition:function(n){var t=this.get("shouldBegin"),e=this.width,r=this.height,i=this.container,a=this.graph;if(t(n)){var s=a.getPointByClient(n.clientX,n.clientY),u=a.getCanvasByPoint(s.x,s.y),l=u.x,h=u.y,v=i.getBoundingClientRect();l>e/2?l-=v.width:l+=this.offset,h>r/2?h-=v.height:h+=this.offset;var k=l+"px",T=h+"px";xn(this.container,{left:k,top:T,visibility:"visible"})}else xn(i,{visibility:"hidden"})},createTooltip:function(n){var t=n.get("el");t.style.position="relative";var e=ei('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return t.parentNode.appendChild(e),xn(e,{position:"absolute",visibility:"visible"}),this.width=n.get("width"),this.height=n.get("height"),this.container=e,this.graph.get("tooltips").push(e),e}},Ob=Object(b.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(n){return n.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Bp),Mb=Object(b.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(n){return"source: "+n.source+" target: "+n.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Bp),kb=["click","dblclick"],Ab={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var n,t;return kb.includes(this.trigger)?t=this.trigger:(t="click",console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(n={})["node:"+t]="onNodeClick",n.touchstart="onNodeClick",n},onNodeClick:function(n){var t=n.item;if(t){var e=this.graph.findDataById(t.get("id"));if(e){var r=e.children;if(r&&r.length!==0){var i=!e.collapsed;this.shouldBegin(n,i)&&(e.collapsed=i,t.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:n.item,collapsed:i}),this.shouldUpdate(n,i)&&(this.onChange(t,i),this.graph.layout()))}}}}},Cb=Po.calculationItemsBBox,Tb={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(n){var t=n.item;return!(!t||t.destroyed)&&!!this.shouldUpdate(this,n)&&t.getType()==="combo"},onDragStart:function(n){var t=this,e=this.graph,r=n.item;if(this.validationCombo(n)){this.targets=[];var i=e.findAllByState("combo",this.selectedState),a=r.get("id");i.filter(function(s){var u=s.get("id");return a===u}).length===0?this.targets.push(r):this.targets=i,this.activeState&&this.targets.map(function(s){var u=s.getModel();if(u.parentId){var l=e.findById(u.parentId);l&&e.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.origin={x:n.x,y:n.y},this.currentItemChildCombos=[],function s(u,l){if(l(u)!==!1&&u){var h=u.get("combos");if(h.length===0)return!1;Object(p.each)(h,function(v){s(v,l)})}}(r,function(s){if(s.destroyed)return!1;var u=s.getModel();return t.currentItemChildCombos.push(u.id),!0})}},onDrag:function(n){var t=this;if(this.origin&&this.validationCombo(n))if(this.enableDelegate)this.updateDelegate(n);else{if(this.activeState){var e=this.graph,r=n.item,i=r.getModel(),a=e.getCombos(),s=r.getBBox(),u=s.centerX,l=s.centerY,h=s.width;a.filter(function(v){var k=v.getModel();return i.parentId,k.id!==i.id&&!t.currentItemChildCombos.includes(k.id)}).map(function(v){var k=v.getBBox(),T=k.centerX,I=k.centerY,j=k.width,F=u-T,B=l-I,U=2*Math.sqrt(F*F+B*B);h+j-U>.8*h?e.setItemState(v,t.activeState,!0):e.setItemState(v,t.activeState,!1)})}Object(p.each)(this.targets,function(v){t.updateCombo(v,n)})}},updatePositions:function(n){var t=this;this.enableDelegate&&Object(p.each)(this.targets,function(e){t.updateCombo(e,n)})},onDrop:function(n){var t=this,e=n.item;if(e&&this.targets&&!e.destroyed){this.updatePositions(n);var r=this.graph,i=e.getModel();this.targets.map(function(a){a.getModel().parentId!==i.id?(t.activeState&&r.setItemState(e,t.activeState,!1),t.onlyChangeComboSize?r.updateCombo(a):r.updateComboTree(a,i.id)):r.updateCombo(e)}),this.end(e,n),this.endComparison=!0}},onNodeDrop:function(n){var t=this;if(this.targets&&this.targets.length!==0){this.updatePositions(n);var e,r=this.graph,i=n.item.getModel().comboId;if(i){if(this.activeState){var a=r.findById(i);r.setItemState(a,this.activeState,!1)}this.targets.map(function(s){t.onlyChangeComboSize?r.updateCombo(s):i!==s.getID()&&(e=r.findById(i),i!==s.getModel().parentId&&r.updateComboTree(s,i))})}else this.targets.map(function(s){t.onlyChangeComboSize?r.updateCombo(s):s.getModel().comboId&&r.updateComboTree(s)});this.endComparison=!0,this.end(e,n)}},onDragEnter:function(n){if(this.origin&&this.validationCombo(n)){var t=n.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!0)}},onDragLeave:function(n){if(this.origin&&this.validationCombo(n)){var t=n.item,e=this.graph;this.activeState&&e.setItemState(t,this.activeState,!1)}},onDragEnd:function(n){if(this.targets&&this.targets.length!==0){var t=n.item;this.updatePositions(n);var e=this.getParentCombo(t.getModel().parentId),r=this.graph;e&&this.activeState&&r.setItemState(e,this.activeState,!1),this.end(void 0,n)}},end:function(n,t){var e=this;if(this.origin){var r=this.graph;this.delegateShape&&(r.get("delegateGroup").clear(),this.delegateShape=null),n&&this.activeState&&r.setItemState(n,this.activeState,!1),n||this.targets.map(function(i){e.onlyChangeComboSize?r.updateCombo(i):r.updateComboTree(i)}),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(n,t){var e=this;if(t(n)!==!1&&n){var r=n.get("combos");Object(p.each)(r,function(a){e.traverse(a,t)});var i=n.get("nodes");Object(p.each)(i,function(a){e.traverse(a,t)})}},updateCombo:function(n,t){var e=this;this.traverse(n,function(r){return!r.destroyed&&(e.updateSignleItem(r,t),!0)})},updateSignleItem:function(n,t){var e=this.origin,r=this.graph,i=n.getModel(),a=n.get("id");this.point[a]||(this.point[a]={x:i.x,y:i.y});var s=t.x-e.x+this.point[a].x,u=t.y-e.y+this.point[a].y;r.updateItem(n,{x:s,y:u})},getParentCombo:function(n){var t=this.graph;if(n){var e=t.findById(n);if(e)return e}},updateDelegate:function(n){var t=this.graph;if(this.delegateShape){var e=n.x-this.origin.x+this.originPoint.minX,r=n.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:e,y:r})}else{var i=t.get("delegateGroup"),a=null,s=(a=this.targets.length>1?Cb(this.targets):this.targets[0].getBBox()).x,u=a.y,l=a.width,h=a.height,v=a.minX,k=a.minY;this.originPoint={x:s,y:u,width:l,height:h,minX:v,minY:k};var T=Object(b.__assign)(Object(b.__assign)({},Xo.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:Object(b.__assign)({width:a.width,height:a.height,x:a.x,y:a.y},T),name:"combo-delegate-shape"}),this.delegate=this.delegateShape}}},Ib=["click","dblclick"],jb={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var n,t;return Ib.includes(this.trigger)?t=this.trigger:(t="dblclick",console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),(n={})["combo:"+t]="onComboClick",n},onComboClick:function(n){var t=n.item,e=this.graph,r=this.relayout;if(t&&!t.destroyed&&t.getType()==="combo"){var i=t.getModel().id;i&&(e.collapseExpandCombo(i),r&&e.get("layout")?e.layout():e.refreshPositions())}}},Pb=Po.isPolygonsIntersect,Nb=Po.pathToPoints,Db=["drag","shift","ctrl","alt","control"],Rb=["click","drag"],Lb=["shift","ctrl","control","alt","meta",void 0],Bb=["shift","ctrl","alt","control"],Gb=["shift","ctrl","alt","control"],Fb={"drag-canvas":vb,"zoom-canvas":Eb,"drag-node":yb,"activate-relations":mb,"brush-select":xb,"click-select":_b,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return Db.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(n){var t=this.lasso;n.item||(this.trigger==="drag"||this.keydown)&&(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:n.x,y:n.y},this.points.push(this.originPoint),t.show())},onDragMove:function(n){this.dragging&&(this.trigger==="drag"||this.keydown)&&(this.points.push({x:n.x,y:n.y}),this.updateLasso(n))},onDragEnd:function(n){(this.lasso||this.dragging)&&(this.trigger==="drag"||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var n=this.points,t=[];return n.length&&(n.forEach(function(e,r){r===0?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])}),t.push(["L",n[0].x,n[0].y])),t},clearStates:function(){var n=this.graph,t=this.selectedState,e=n.findAllByState("node",t),r=n.findAllByState("edge",t);e.forEach(function(i){return n.setItemState(i,t,!1)}),r.forEach(function(i){return n.setItemState(i,t,!1)}),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var n=this,t=this.graph,e=this.shouldUpdate,r=this.points.map(function(l){return[t.getCanvasByPoint(l.x,l.y).x,t.getCanvasByPoint(l.x,l.y).y]}),i=this.selectedState,a=[],s=[];t.getNodes().forEach(function(l){if(l.isVisible()&&function(v,k){var T,I=v.getKeyShape();if(v.get("type")==="path")T=Nb(I.attr("path"));else{var j=I.getCanvasBBox();T=[[j.minX,j.minY],[j.maxX,j.minY],[j.maxX,j.maxY],[j.minX,j.maxY]]}return Pb(k,T)}(l,r)&&e(l,"select")){a.push(l);var h=l.getModel();s.push(h.id),t.setItemState(l,i,!0)}});var u=[];this.includeEdges&&a.forEach(function(l){l.getOutEdges().forEach(function(h){if(h.isVisible()){var v=h.getModel(),k=v.source,T=v.target;s.includes(k)&&s.includes(T)&&e(h,"select")&&(u.push(h),t.setItemState(h,n.selectedState,!0))}})}),this.selectedEdges=u,this.selectedNodes=a,this.onSelect&&this.onSelect(a,u),t.emit("nodeselectchange",{selectedItems:{nodes:a,edges:u},select:!0})},createLasso:function(){var n=this.graph.get("delegateGroup").addShape("path",{attrs:Object(b.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=n,this.delegate=n,this.points=[],n},updateLasso:function(n){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(n){var t=n.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:Ob,"edge-tooltip":Mb,"collapse-expand":Ab,"drag-combo":Tb,"collapse-expand-combo":jb,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var n;return Rb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),this.key&&Lb.indexOf(this.key.toLowerCase())===-1&&(this.trigger=void 0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined")),this.trigger==="drag"?n={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:this.trigger==="click"&&(n={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(n.keydown="onKeyDown",n.keyup="onKeyUp"),n},onDragEnd:function(n){if(!this.key||this.keydown){var t=n.item;t&&t.getID()!==this.source&&t.getType()==="node"||this.cancelCreating({item:this.edge,x:n.x,y:n.y})}},onClick:function(n){if(!this.key||this.keydown){var t=n.item,e=this.graph,r=t.getModel(),i=this.getEdgeConfig;if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,n))return;var a=void 0;a=i&&Object(p.isFunction)(i)?i({source:this.source,target:r.id}):this.edgeConfig;var s=Object(b.__assign)({target:r.id},a);if(this.source===r.id&&(s.type="loop"),e.emit("beforecreateedge",{}),e.updateItem(this.edge,s,!1),e.get("enabledStack")){var u=Object(b.__assign)(Object(b.__assign)({},this.edge.getModel()),{itemType:"edge"}),l={};l.edges=[u],e.pushStack("add",{before:{},after:l})}e.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,n))return;a=void 0,a=i&&Object(p.isFunction)(i)?i({source:r.id,target:r.id}):this.edgeConfig,this.edge=e.addItem("edge",Object(b.__assign)({source:r.id,target:r.id},a),!1),this.source=r.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(n){if(!this.key||this.keydown){var t={x:n.x,y:n.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t},!1):this.addingEdge=!1}},cancelCreating:function(n){if(!this.key||this.keydown){var t=this.graph,e=n.item;if(this.addingEdge&&n.target&&n.target.isCanvas&&n.target.isCanvas())return t.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);this.addingEdge&&this.edge===e&&(t.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1)}},onKeyDown:function(n){var t=n.key;t&&(t.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return Bb.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '"+this.trigger+"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(n){var t=n.key;if(t){var e=this.trigger.toLowerCase(),r=t.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===e||r==="control"&&e==="ctrl"||r==="ctrl"&&e==="control");var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '"+this.functionName+"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D"),{};if(!this.triggerKeydown||this.combinedKey){var a=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===a||r==="control"&&a==="ctrl"||r==="ctrl"&&a==="control")&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0}},getEvents:function(){return this.zoomKey&&Gb.indexOf(this.zoomKey)!==-1||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(n){var t=this,e=this.graph,r=n[this.zoomKey+"Key"];if(this.zoomKey==="control"&&(r=n.ctrlKey),r){var i=e.get("canvas").getPointByClient(n.clientX,n.clientY),a=e.getZoom();n.wheelDelta>0?a+=.05*a:a-=.05*a,e.zoomTo(a,{x:i.x,y:i.y})}else{var s=n.deltaX||n.movementX,u=n.deltaY||n.movementY;!u&&navigator.userAgent.indexOf("Firefox")>-1&&(u=125*-n.wheelDelta/3);var l=this.graph.get("width"),h=this.graph.get("height"),v=this.graph.get("canvas").getCanvasBBox(),k=this.scalableRange,T=this.scalableRange;k<1&&k>-1&&(k*=l,T*=h);var I=v.minX,j=v.maxX,F=v.minY,B=v.maxY;s>0?j<-k?s=0:j-s<-k&&(s=j+k):s<0&&(I>l+k?s=0:I-s>l+k&&(s=I-(l+k))),u>0?B<-T?u=0:B-u<-T&&(u=B+T):u<0&&(F>h+T?u=0:F-u>h+T&&(u=F-(h+T))),this.get("direction")==="x"?u=0:this.get("direction")==="y"&&(s=0),e.translate(-s,-u)}if(n.preventDefault(),this.get("enableOptimize")){var U=this.get("optimizeZoom"),q=this.get("optimized"),$=e.getNodes(),ve=e.getEdges(),de=$.length,me=ve.length;if(!q){for(var Te=0;Te<de;Te++){var Oe=$[Te];if(!Oe.destroyed)for(var Pe=(ct=Oe.get("group").get("children")).length,Ze=0;Ze<Pe;Ze++)(st=ct[Ze]).destoryed||st.get("isKeyShape")||(st.set("ori-visibility",st.get("ori-visibility")||st.get("visible")),st.hide())}for(var nt=0;nt<me;nt++){var ct;for(Pe=(ct=ve[nt].get("group").get("children")).length,Ze=0;Ze<Pe;Ze++){var st;(st=ct[Ze]).set("ori-visibility",st.get("ori-visibility")||st.get("visible")),st.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var It=setTimeout(function(){var gt=e.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var Pt=0;Pt<de;Pt++){var Rt=$[Pt],Zt=(qt=Rt.get("group").get("children")).length;if(gt<U)(Vt=($t=Rt.getKeyShape()).get("ori-visibility"))&&$t.show();else for(var kt=0;kt<Zt;kt++){var Vt=(lr=qt[kt]).get("ori-visibility");!lr.get("visible")&&Vt&&Vt&&lr.show()}}for(var Dt=0;Dt<me;Dt++){var qt,$t,Gt=ve[Dt];if(Zt=(qt=Gt.get("group").get("children")).length,gt<U)(Vt=($t=Gt.getKeyShape()).get("ori-visibility"))&&$t.show();else for(kt=0;kt<Zt;kt++){var lr;(lr=qt[kt]).get("visible")||(Vt=lr.get("ori-visibility"))&&lr.show()}}}},100);this.set("timeout",It)}}}};Object(p.each)(Fb,function(n,t){lo(t,n)});var Gp=Object(b.__assign)(Object(b.__assign)({},f),ga),zb=mi.Grid,Ub=mi.Minimap,Vb=mi.Bundling,Wb=mi.Menu,Fp=mi.Fisheye,Xb=mi.ToolBar,Yb=mi.Tooltip,zp=mi.TimeBar,Up=mi.ImageMinimap,Vp=mi.EdgeFilterLens,Wp=mi.SnapLine,Hb=mi.Legend,Xp={version:Xo.version,Graph:Ju,TreeGraph:Pd,Util:Po,Layout:Ws,TreeLayout:Md,registerLayout:kd,Global:Xo,registerBehavior:lo,registerCombo:Vi,registerEdge:Ti,registerNode:sn,Minimap:mi.Minimap,Grid:mi.Grid,Bundling:mi.Bundling,Menu:mi.Menu,ToolBar:mi.ToolBar,Tooltip:mi.Tooltip,Legend:mi.Legend,TimeBar:zp,SnapLine:Wp,Fisheye:Fp,ImageMinimap:Up,EdgeFilterLens:Vp,Algorithm:Gp,Arrow:Ut,Marker:Xt,Shape:fr};Xp.version="4.3.5",m.default=Xp;var qb="4.3.5"}]).default})},86026:function(Lo,D,m){Lo=m.nmd(Lo),ace.define("ace/ext/spellcheck",["require","exports","module","ace/lib/event","ace/editor","ace/config"],function(o,f,c){"use strict";var M=o("../lib/event");f.contextMenuHandler=function(x){var O=x.target,S=O.textInput.getElement();if(!!O.selection.isEmpty()){var g=O.getCursorPosition(),d=O.session.getWordRange(g.row,g.column),y=O.session.getTextRange(d);if(O.session.tokenRe.lastIndex=0,!!O.session.tokenRe.test(y)){var E="",b=y+" "+E;S.value=b,S.setSelectionRange(y.length,y.length+1),S.setSelectionRange(0,0),S.setSelectionRange(0,y.length);var p=!1;M.addListener(S,"keydown",function A(){M.removeListener(S,"keydown",A),p=!0}),O.textInput.setInputHandler(function(A){if(A==b)return"";if(A.lastIndexOf(b,0)===0)return A.slice(b.length);if(A.substr(S.selectionEnd)==b)return A.slice(0,-b.length);if(A.slice(-2)==E){var C=A.slice(0,-2);if(C.slice(-1)==" ")return p?C.substring(0,S.selectionEnd):(C=C.slice(0,-1),O.session.replace(d,C),"")}return A})}}};var _=o("../editor").Editor;o("../config").defineOptions(_.prototype,"editor",{spellcheck:{set:function(x){var O=this.textInput.getElement();O.spellcheck=!!x,x?this.on("nativecontextmenu",f.contextMenuHandler):this.removeListener("nativecontextmenu",f.contextMenuHandler)},value:!0}})}),function(){ace.require(["ace/ext/spellcheck"],function(o){Lo&&(Lo.exports=o)})}()},16747:function(Lo,D,m){"use strict";m.d(D,{K:function(){return se},Z:function(){return ge}});var o=m(7421),f=m.n(o),c=m(41724),M=m(48658),_=m(4098),x=m(64830),O=m(52396),g=te=>{let{children:H}=te;return H};function d(te){return te!=null}var E=te=>{let{itemPrefixCls:H,component:V,span:ie,className:we,style:ke,labelStyle:oe,contentStyle:J,bordered:ee,label:Y,content:K,colon:G}=te;const ne=V;return ee?M.createElement(ne,{className:f()({[`${H}-item-label`]:d(Y),[`${H}-item-content`]:d(K)},we),style:ke,colSpan:ie},d(Y)&&M.createElement("span",{style:oe},Y),d(K)&&M.createElement("span",{style:J},K)):M.createElement(ne,{className:f()(`${H}-item`,we),style:ke,colSpan:ie},M.createElement("div",{className:`${H}-item-container`},(Y||Y===0)&&M.createElement("span",{className:f()(`${H}-item-label`,{[`${H}-item-no-colon`]:!G}),style:oe},Y),(K||K===0)&&M.createElement("span",{className:f()(`${H}-item-content`),style:J},K)))};function b(te,H,V){let{colon:ie,prefixCls:we,bordered:ke}=H,{component:oe,type:J,showLabel:ee,showContent:Y,labelStyle:K,contentStyle:G}=V;return te.map((ne,le)=>{let{props:{label:ue,children:Q,prefixCls:he=we,className:Se,style:je,labelStyle:Ae,contentStyle:Ce,span:Re=1},key:Ee}=ne;return typeof oe=="string"?M.createElement(E,{key:`${J}-${Ee||le}`,className:Se,style:je,labelStyle:Object.assign(Object.assign({},K),Ae),contentStyle:Object.assign(Object.assign({},G),Ce),span:Re,colon:ie,component:oe,itemPrefixCls:he,bordered:ke,label:ee?ue:null,content:Y?Q:null}):[M.createElement(E,{key:`label-${Ee||le}`,className:Se,style:Object.assign(Object.assign(Object.assign({},K),je),Ae),span:1,colon:ie,component:oe[0],itemPrefixCls:he,bordered:ke,label:ue}),M.createElement(E,{key:`content-${Ee||le}`,className:Se,style:Object.assign(Object.assign(Object.assign({},G),je),Ce),span:Re*2-1,component:oe[1],itemPrefixCls:he,bordered:ke,content:Q})]})}var A=te=>{const H=M.useContext(se),{prefixCls:V,vertical:ie,row:we,index:ke,bordered:oe}=te;return ie?M.createElement(M.Fragment,null,M.createElement("tr",{key:`label-${ke}`,className:`${V}-row`},b(we,te,Object.assign({component:"th",type:"label",showLabel:!0},H))),M.createElement("tr",{key:`content-${ke}`,className:`${V}-row`},b(we,te,Object.assign({component:"td",type:"content",showContent:!0},H)))):M.createElement("tr",{key:ke,className:`${V}-row`},b(we,te,Object.assign({component:oe?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},H)))},C=m(53699),N=m(80444),P=m(2843);const L=te=>{const{componentCls:H,descriptionsSmallPadding:V,descriptionsDefaultPadding:ie,descriptionsMiddlePadding:we,descriptionsBg:ke}=te;return{[`&${H}-bordered`]:{[`${H}-view`]:{border:`${te.lineWidth}px ${te.lineType} ${te.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"}},[`${H}-item-label, ${H}-item-content`]:{padding:ie,borderInlineEnd:`${te.lineWidth}px ${te.lineType} ${te.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`${H}-item-label`]:{color:te.colorTextSecondary,backgroundColor:ke,"&::after":{display:"none"}},[`${H}-row`]:{borderBottom:`${te.lineWidth}px ${te.lineType} ${te.colorSplit}`,"&:last-child":{borderBottom:"none"}},[`&${H}-middle`]:{[`${H}-item-label, ${H}-item-content`]:{padding:we}},[`&${H}-small`]:{[`${H}-item-label, ${H}-item-content`]:{padding:V}}}}},z=te=>{const{componentCls:H,descriptionsExtraColor:V,descriptionItemPaddingBottom:ie,descriptionsItemLabelColonMarginRight:we,descriptionsItemLabelColonMarginLeft:ke,descriptionsTitleMarginBottom:oe}=te;return{[H]:Object.assign(Object.assign(Object.assign({},(0,P.Wf)(te)),L(te)),{["&-rtl"]:{direction:"rtl"},[`${H}-header`]:{display:"flex",alignItems:"center",marginBottom:oe},[`${H}-title`]:Object.assign(Object.assign({},P.vS),{flex:"auto",color:te.colorText,fontWeight:te.fontWeightStrong,fontSize:te.fontSizeLG,lineHeight:te.lineHeightLG}),[`${H}-extra`]:{marginInlineStart:"auto",color:V,fontSize:te.fontSize},[`${H}-view`]:{width:"100%",borderRadius:te.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${H}-row`]:{"> th, > td":{paddingBottom:ie},"&:last-child":{borderBottom:"none"}},[`${H}-item-label`]:{color:te.colorTextTertiary,fontWeight:"normal",fontSize:te.fontSize,lineHeight:te.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${ke}px ${we}px`},[`&${H}-item-no-colon::after`]:{content:'""'}},[`${H}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${H}-item-content`]:{display:"table-cell",flex:1,color:te.colorText,fontSize:te.fontSize,lineHeight:te.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${H}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${H}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${H}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${H}-row`]:{"> th, > td":{paddingBottom:te.paddingSM}}},"&-small":{[`${H}-row`]:{"> th, > td":{paddingBottom:te.paddingXS}}}})}};var X=(0,C.Z)("Descriptions",te=>{const H=te.colorFillAlter,V=te.fontSizeSM*te.lineHeightSM,ie=te.colorText,we=`${te.paddingXS}px ${te.padding}px`,ke=`${te.padding}px ${te.paddingLG}px`,oe=`${te.paddingSM}px ${te.paddingLG}px`,J=te.padding,ee=te.marginXS,Y=te.marginXXS/2,K=(0,N.TS)(te,{descriptionsBg:H,descriptionsTitleMarginBottom:V,descriptionsExtraColor:ie,descriptionItemPaddingBottom:J,descriptionsSmallPadding:we,descriptionsDefaultPadding:ke,descriptionsMiddlePadding:oe,descriptionsItemLabelColonMarginRight:ee,descriptionsItemLabelColonMarginLeft:Y});return[z(K)]}),re=function(te,H){var V={};for(var ie in te)Object.prototype.hasOwnProperty.call(te,ie)&&H.indexOf(ie)<0&&(V[ie]=te[ie]);if(te!=null&&typeof Object.getOwnPropertySymbols=="function")for(var we=0,ie=Object.getOwnPropertySymbols(te);we<ie.length;we++)H.indexOf(ie[we])<0&&Object.prototype.propertyIsEnumerable.call(te,ie[we])&&(V[ie[we]]=te[ie[we]]);return V};const se=M.createContext({}),ce={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function xe(te,H){if(typeof te=="number")return te;if(typeof te=="object")for(let V=0;V<O.c.length;V++){const ie=O.c[V];if(H[ie]&&te[ie]!==void 0)return te[ie]||ce[ie]}return 3}function ye(te,H,V){let ie=te;return(V===void 0||V>H)&&(ie=(0,x.Tm)(te,{span:H})),ie}function W(te,H){const V=(0,c.Z)(te).filter(oe=>oe),ie=[];let we=[],ke=H;return V.forEach((oe,J)=>{var ee;const Y=(ee=oe.props)===null||ee===void 0?void 0:ee.span,K=Y||1;if(J===V.length-1){we.push(ye(oe,ke,Y)),ie.push(we);return}K<ke?(ke-=K,we.push(oe)):(we.push(ye(oe,ke,K)),ie.push(we),ke=H,we=[])}),ie}function Ie(te){var{prefixCls:H,title:V,extra:ie,column:we=ce,colon:ke=!0,bordered:oe,layout:J,children:ee,className:Y,rootClassName:K,style:G,size:ne,labelStyle:le,contentStyle:ue}=te,Q=re(te,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle"]);const{getPrefixCls:he,direction:Se}=M.useContext(_.E_),je=he("descriptions",H),[Ae,Ce]=M.useState({}),Re=xe(we,Ae),[Ee,Le]=X(je),Ke=(0,O.Z)();M.useEffect(()=>{const dt=Ke.subscribe(At=>{typeof we=="object"&&Ce(At)});return()=>{Ke.unsubscribe(dt)}},[]);const et=W(ee,Re),ot=M.useMemo(()=>({labelStyle:le,contentStyle:ue}),[le,ue]);return Ee(M.createElement(se.Provider,{value:ot},M.createElement("div",Object.assign({className:f()(je,{[`${je}-${ne}`]:ne&&ne!=="default",[`${je}-bordered`]:!!oe,[`${je}-rtl`]:Se==="rtl"},Y,K,Le),style:G},Q),(V||ie)&&M.createElement("div",{className:`${je}-header`},V&&M.createElement("div",{className:`${je}-title`},V),ie&&M.createElement("div",{className:`${je}-extra`},ie)),M.createElement("div",{className:`${je}-view`},M.createElement("table",null,M.createElement("tbody",null,et.map((dt,At)=>M.createElement(A,{key:At,index:At,colon:ke,prefixCls:je,vertical:J==="vertical",bordered:oe,row:dt}))))))))}Ie.Item=g;var ge=Ie}}]);
