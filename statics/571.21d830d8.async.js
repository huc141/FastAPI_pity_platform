"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[571],{88315:function(le,T,t){t.d(T,{Z:function(){return m}});var F=t(51175),j=t.n(F),L=t(13167),S=t.n(L),J=t(61261),P=t.n(J),A=t(84701),I=t.n(A),X=t(48658),oe=t(1194),u=t.n(oe),E=t(44761),B=t(1668),de=t.n(B),w=t(86026),fe=t.n(w),ue=t(14832),pe=t.n(ue),$=t(47732),e=t.n($),q=t(93251),m=function(ee){P()(U,ee);var ce=I()(U);function U(){return j()(this,U),ce.apply(this,arguments)}return S()(U,[{key:"componentDidMount",value:function(){var i=this;this.props.setEditor(this.refs),(0,B.addCompleter)({getCompletions:function(Q,d,p,O,he){he(null,(i.props.tables||[]).map(function(_){return{name:_,value:_}}))}})}},{key:"render",value:function(){var i=this.props,Y=i.value,Q=i.onChange,d=i.height,p=i.readOnly,O=i.theme;return(0,q.jsx)(E.ZP,{ref:"aceEditor",mode:"json",theme:O||"material-one-dark",fontSize:14,showGutter:!0,showPrintMargin:!1,onChange:Q,value:Y,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:d||300},setOptions:{readOnly:p||!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4,useWorker:!0}})}}]),U}(X.Component)},18853:function(le,T,t){t.d(T,{B:function(){return L}});var F=t(9791),j="//at.alicdn.com/t/font_915840_2b8lahxt5xv.js",L=(0,F.Z)({scriptUrl:j})},52538:function(le,T,t){var F=t(84325),j=t(13309),L=t(93251);T.Z=function(S){var J=S.desc,P=S.height,A=P===void 0?180:P,I=S.image,X=I===void 0?j.Z:I;return(0,L.jsx)(F.Z,{image:X,imageStyle:{height:A},description:J||"\u6682\u65E0\u6570\u636E"})}},10571:function(le,T,t){t.d(T,{Z:function(){return he}});var F=t(14660),j=t.n(F),L=t(21464),S=t.n(L),J=t(92105),P=t.n(J),A=t(65777),I=t(49776),X=t(50930),oe=t(81386),u=t(16747),E=t(86061),B=t(48658),de=t(20077),w=t(95615),fe=t(68508),ue=t.n(fe),pe=t(7279),$=t.n(pe),e=t(93251),q=60,m={nameFontSize:12,childCountWidth:22,countMarginLeft:0,itemPadding:16,nameMarginLeft:4,rootPadding:18},ee=function(_){var a=_.data,y=_.graph,_e=_.setGraph,ae=_.container_id,k=ae===void 0?"container":ae;return(0,B.useEffect)(function(){if(a!==null){$().registerNode("treeNode",{draw:function(c,g){var x=c.id,v=c.label,z=c.collapsed,H=c.selected,b=c.children,ne=c.depth,D=ne===0,re=b&&b.length!==0,Z=m.childCountWidth,xe=m.countMarginLeft,V=m.itemPadding,me=m.selectedIconWidth,ie=m.nameMarginLeft,R=m.rootPadding,f=0,N=28,s=0,n=-N/2,r=g.addShape("text",{attrs:{text:v,x:s*2,y:n,textAlign:"left",textBaseline:"top",fontFamily:"PingFangSC-Regular"},cursor:"pointer",name:"name-text-shape"}),h=r.getBBox().width;f=h+V+ie,f=f<q?q:f,!D&&re&&(f+=xe,f+=Z);var o={x:s,y:n,width:f,height:N,radius:4};D&&H&&(o.fill="#e8f7ff",o.stroke="#e8f7ff");var G=g.addShape("rect",{attrs:o,name:"root-key-shape-rect-shape"});D||g.addShape("path",{attrs:{path:[["M",s-1,0],["L",f,0]],stroke:"#AAB7C4",lineWidth:1},name:"node-path-shape"});var l=s-10,ve=-N+15;D&&g.addShape("rect",{attrs:{x:l,y:ve,width:f+12,height:N,radius:14,fill:"#e8f7ff",cursor:"pointer"},name:"main-shape"});var M="rgba(0, 0, 0, .65)";if(H&&(M="#40A8FF"),D?g.addShape("text",{attrs:{text:v,x:l+R,y:1,textAlign:"left",textBaseline:"middle",fill:M,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"root-text-shape"}):g.addShape("text",{attrs:{text:v,x:H?l+6+ie:l+6,y:n-5,textAlign:"start",textBaseline:"top",fill:M,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"not-root-text-shape"}),re&&!D){var je=12,Ee=f-Z,ye=-je/2;g.addShape("rect",{attrs:{width:Z,height:12,stroke:z?"#1890ff":"#5CDBD3",fill:z?"#fff":"#E6FFFB",x:Ee,y:ye,radius:6,cursor:"pointer"},name:"child-count-rect-shape"}),g.addShape("text",{attrs:{text:"".concat(b==null?void 0:b.length),fill:"rgba(0, 0, 0, .65)",x:Ee+Z/2,y:ye+12,fontSize:10,width:Z,textAlign:"center",cursor:"pointer"},name:"child-count-text-shape"})}return G}}),$().registerEdge("smooth",{draw:function(c,g){var x=c.startPoint,v=c.endPoint,z=Math.abs(v.x-x.x),H=[["M",x.x,x.y],["C",x.x+z/4,x.y,v.x-z/2,v.y,v.x,v.y]],b=g.addShape("path",{attrs:{stroke:"#AAB7C4",path:H},name:"smooth-path-shape"});return b}});var C=document.getElementById(k),se=C.scrollWidth,ge=C.scrollHeight||400;if(y==null){var K=new($()).TreeGraph({container:k,width:se,height:ge,modes:{default:[{type:"collapse-expand"},"drag-canvas","zoom-canvas"]},defaultNode:{type:"treeNode",anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"smooth"},layout:{type:"compactBox",direction:"LR",getId:function(c){return c.id},getHeight:function(){return 16},getWidth:function(c){var g=$().Util.getTextSize(c.label,m.nameFontSize)[0],x=m.itemPadding+m.nameMarginLeft+g+m.rootPadding+m.childCountWidth;return x},getVGap:function(){return 15},getHGap:function(){return 30}}});_e(ue()({},k,K)),K.data(a),K.render(),K.fitView()}else y.changeData(a),y.render(),y.fitView();typeof window!="undefined"&&(window.onresize=function(){!y||y.get("destroyed")||!C||!C.scrollWidth||!C.scrollHeight||y.changeSize(C.scrollWidth,C.scrollHeight)})}},[a]),(0,e.jsx)("div",{})},ce=t(23652),U=t(89148),te=t(52538),i=t(18853),Y=t(88315),Q=t(94519),d=A.Z.TabPane,p={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},O=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],he=function(_){var a=_.response,y=_.caseName,_e=_.width,ae=_.modal,k=_.setModal,C=_.single,se=C===void 0?!0:C,ge=(0,B.useState)(null),K=P()(ge,2),W=K[0],c=K[1],g=(0,B.useState)([]),x=P()(g,2),v=x[0],z=x[1],H=(0,B.useState)({}),b=P()(H,2),ne=b[0],D=b[1],re=(0,B.useState)(null),Z=P()(re,2),xe=Z[0],V=Z[1],me=function(){var s=S()(j()().mark(function n(){var r,h,o,G,l=arguments;return j()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return r=l.length>0&&l[0]!==void 0?l[0]:a.case_id,h=l.length>1&&l[1]!==void 0?l[1]:!0,M.next=4,(0,ce.T4)({case_id:r});case 4:o=M.sent,U.Z.response(o)&&(h?c(o.data):(G=Object.keys(a).map(function(je){return o.data}),z(G)));case 6:case"end":return M.stop()}},n)}));return function(){return s.apply(this,arguments)}}(),ie=function(){var s=S()(j()().mark(function n(){var r,h,o;return j()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!se){l.next=6;break}if(a.case_id===void 0){l.next=4;break}return l.next=4,me();case 4:l.next=16;break;case 6:r=0,h=Object.keys(a);case 7:if(!(r<h.length)){l.next=16;break}if(o=h[r],a[o].case_id===void 0){l.next=12;break}return l.next=12,me(a[o].case_id,!1);case 12:return l.abrupt("return");case 13:r++,l.next=7;break;case 16:case"end":return l.stop()}},n)}));return function(){return s.apply(this,arguments)}}();(0,B.useEffect)(function(){ie()},[a]);var R=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a;if(r[n]===null||r[n]===void 0||r[n]==="{}")return[];var h=JSON.parse(r[n]);return Object.keys(h).map(function(o){return{key:o,value:h[o]}})},f=[{title:"\u65AD\u8A00\u4FE1\u606F",key:"msg",dataIndex:"msg"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(n){return(0,e.jsx)(I.Z,{status:n?"success":"error",text:n?"\u901A\u8FC7":"\u672A\u901A\u8FC7"})}}],N=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a;if(n.asserts===void 0||!n.asserts)return[];var r=JSON.parse(n.asserts),h=[];return Object.keys(r).forEach(function(o){typeof r[o].msg=="string"?h.push({status:r[o].status,msg:r[o].msg}):r[o].msg.forEach(function(G){h.push({status:r[o].status,msg:G})})}),h};return(0,e.jsx)(X.Z,{title:(0,e.jsxs)("span",{children:["[",(0,e.jsx)("strong",{children:y}),"] \u6267\u884C\u8BE6\u60C5"]}),width:_e||1e3,open:ae,placement:"right",onClose:function(){return k(!1)},children:(0,e.jsx)(oe.Z,{gutter:[8,8],children:se?(0,e.jsxs)(A.Z,{style:{width:"100%",minHeight:460},tabPosition:"left",children:[(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,e.jsxs)(u.Z,{column:2,bordered:!0,size:"middle",children:[(0,e.jsx)(u.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,e.jsx)(I.Z,{status:a.status?"success":"error",text:a.status?"\u6210\u529F":"\u5931\u8D25"})}),(0,e.jsx)(u.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:a.request_method}),(0,e.jsx)(u.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,e.jsxs)("span",{style:{color:p[a.status_code]?p[a.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[a.status_code," ",p[a.status_code]?p[a.status_code].text:""]})}),(0,e.jsx)(u.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,e.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,e.jsx)("span",{style:{color:"#67C23A"},children:a.cost})})}),(0,e.jsx)(u.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:a.url}),(0,e.jsx)(u.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:a.request_data?(0,e.jsx)(de.Z,{language:"json",style:w.BV,children:a.request_data}):(0,e.jsx)(te.Z,{height:120})})]})},"1"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,e.jsx)(E.Z,{columns:f,dataSource:N(),size:"small",pagination:!1})},"3"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,e.jsx)(Q.Z,{language:"html",setEditor:V,readOnly:!0,value:a.logs,height:"80vh"})},"2"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-header"}),"Request Headers"]}),children:(0,e.jsx)(E.Z,{columns:O,dataSource:R("request_headers"),size:"small",pagination:!1})},"5"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,e.jsx)(E.Z,{columns:O,dataSource:R("cookies"),size:"small",pagination:!1})},"6"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-header"}),"Response Headers"]}),children:(0,e.jsx)(E.Z,{columns:O,dataSource:R("response_headers"),size:"small",pagination:!1})},"7"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-xiangying"}),"Response"]}),children:(0,e.jsx)(Y.Z,{readOnly:!0,setEditor:V,value:a.response?a.response:"",height:"80vh"})},"4"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,e.jsx)("div",{id:"container",children:(0,e.jsx)(ee,{data:W,graph:ne.container,setGraph:D})})},"8")]}):(0,e.jsx)(A.Z,{style:{width:"100%",minHeight:460},children:Object.keys(a).map(function(s,n){var r;return(0,e.jsx)(d,{tab:s,children:(0,e.jsxs)(A.Z,{style:{width:"100%"},tabPosition:"left",children:[(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,e.jsxs)(u.Z,{column:2,bordered:!0,size:"middle",children:[(0,e.jsx)(u.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,e.jsx)(I.Z,{status:a[s].status?"success":"error",text:a[s].status?"\u6210\u529F":"\u5931\u8D25"})}),(0,e.jsx)(u.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:a[s].request_method}),(0,e.jsx)(u.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,e.jsxs)("span",{style:{color:p[a[s].status_code]?p[a[s].status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[a[s].status_code," ",p[a[s].status_code]?p[a[s].status_code].text:""]})}),(0,e.jsx)(u.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,e.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,e.jsx)("span",{style:{color:"#67C23A"},children:a[s].cost})})}),(0,e.jsx)(u.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:a[s].url}),(0,e.jsx)(u.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:a[s].request_data?(0,e.jsx)(de.Z,{language:"json",style:w.BV,children:a[s].request_data}):(0,e.jsx)(te.Z,{height:120})})]})},"1"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,e.jsx)(E.Z,{columns:f,dataSource:N(a[s]),size:"small",pagination:!1})},"3"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,e.jsx)(Q.Z,{language:"html",setEditor:V,readOnly:!0,value:(r=a[s])===null||r===void 0?void 0:r.logs,height:"80vh"})},"2"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-header"}),"Request Headers"]}),children:(0,e.jsx)(E.Z,{columns:O,dataSource:R("request_headers",a[s]),size:"small",pagination:!1})},"5"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,e.jsx)(E.Z,{columns:O,dataSource:R("cookies",a[s]),size:"small",pagination:!1})},"6"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-header"}),"Response Headers"]}),children:(0,e.jsx)(E.Z,{columns:O,dataSource:R("response_headers",a[s]),size:"small",pagination:!1})},"7"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-xiangying"}),"Response"]}),children:(0,e.jsx)(Y.Z,{setEditor:V,readOnly:!0,value:a[s].response?a[s].response:"",height:"80vh"})},"4"),(0,e.jsx)(d,{tab:(0,e.jsxs)("span",{children:[(0,e.jsx)(i.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,e.jsx)("div",{id:"container_".concat(n),children:(0,e.jsx)(ee,{data:v[n],graph:ne["container_".concat(n)],setGraph:D,container_id:"container_".concat(n)})})},"8")]})},n.toString())})})})})}}}]);
