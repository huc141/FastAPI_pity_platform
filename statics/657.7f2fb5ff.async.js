"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[657],{13982:function(Dt,Be,e){var ge=e(1619),u=e.n(ge),de=e(12087),y=e(22666),I=e(32224),k=e(92363),je=e(49776),s=e(48728),K=e(93251),f=y.Z.Option,R=I.Z.TextArea,j=[{label:"${response}",value:"${response}"},{label:"${status_code}",value:"${status_code}"}];Be.Z={CaseAsserts:[{name:"name",label:"\u9A8C\u8BC1\u70B9",required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",type:"input",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",component:null,span:24},{name:"assert_type",label:"\u6821\u9A8C\u65B9\u5F0F",required:!0,component:(0,K.jsx)(y.Z,{placeholder:"\u9009\u62E9\u6821\u9A8C\u65B9\u5F0F\uFF0C\u652F\u6301JSON\u6DF1\u5C42\u6B21\u5224\u65AD",children:Object.keys(de.Z.ASSERT_TYPE).map(function(A){return(0,K.jsx)(f,{value:A,children:de.Z.ASSERT_TYPE[A]},A)})}),type:"select",span:24},{name:"expected",label:"\u9884\u671F\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C",component:(0,K.jsx)(k.Z,{options:[],children:(0,K.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24},{name:"actually",label:"\u5B9E\u9645\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C",component:(0,K.jsx)(k.Z,{options:j,children:(0,K.jsx)(R,{placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24}],CaseDetail:[{name:"name",label:"\u573A\u666F\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",component:null,span:8},{name:"priority",label:"\u4F18\u5148\u7EA7",required:!0,component:(0,K.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7",children:de.Z.PRIORITY.map(function(A){return(0,K.jsx)(f,{value:A,children:A},A)})}),type:"select",span:8},{name:"status",label:"\u72B6\u6001",required:!0,component:(0,K.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u5F53\u524D\u573A\u666F\u72B6\u6001",children:Object.keys(de.Z.CASE_STATUS).map(function(A){return(0,K.jsx)(f,{value:A,children:(0,K.jsx)(je.Z,u()({},de.Z.CASE_BADGE[A]))},A)})}),type:"select",span:8},{name:"request_type",label:"\u8BF7\u6C42\u7C7B\u578B",required:!0,component:(0,K.jsx)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u534F\u8BAE",children:Object.keys(s.XN).map(function(A){return(0,K.jsx)(f,{value:A,disabled:A!=="1",children:s.XN[A]},A)})}),type:"select",span:8},{name:"tag",label:"\u573A\u666F\u6807\u7B7E",required:!1,component:(0,K.jsx)(y.Z,{mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u6807\u7B7E"}),type:"select",span:8},{name:"case_type",label:"\u573A\u666F\u7C7B\u578B",required:!0,component:(0,K.jsxs)(y.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F\u7C7B\u578B",children:[(0,K.jsx)(f,{value:0,children:"\u666E\u901A\u573A\u666F"}),(0,K.jsx)(f,{value:1,children:"\u524D\u7F6E\u573A\u666F"}),(0,K.jsx)(f,{value:2,children:"\u6570\u636E\u5DE5\u5382"})]}),type:"select",span:8}],Environment:[{name:"name",label:"\u73AF\u5883\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",component:null,span:24},{name:"remarks",label:"\u5907\u6CE8",required:!1,message:"\u8BF7\u8F93\u5165\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",component:(0,K.jsx)(I.Z.TextArea,{maxLength:200}),span:24}]}},88315:function(Dt,Be,e){e.d(Be,{Z:function(){return J}});var ge=e(51175),u=e.n(ge),de=e(13167),y=e.n(de),I=e(61261),k=e.n(I),je=e(84701),s=e.n(je),K=e(48658),f=e(1194),R=e.n(f),j=e(44761),A=e(1668),g=e.n(A),o=e(86026),Re=e.n(o),L=e(14832),G=e.n(L),oe=e(47732),a=e.n(oe),n=e(93251),J=function(M){k()(C,M);var rt=s()(C);function C(){return u()(this,C),rt.apply(this,arguments)}return y()(C,[{key:"componentDidMount",value:function(){var t=this;this.props.setEditor(this.refs),(0,A.addCompleter)({getCompletions:function(Se,Z,Te,fe,Le){Le(null,(t.props.tables||[]).map(function(ye){return{name:ye,value:ye}}))}})}},{key:"render",value:function(){var t=this.props,Ce=t.value,Se=t.onChange,Z=t.height,Te=t.readOnly,fe=t.theme;return(0,n.jsx)(j.ZP,{ref:"aceEditor",mode:"json",theme:fe||"material-one-dark",fontSize:14,showGutter:!0,showPrintMargin:!1,onChange:Se,value:Ce,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:Z||300},setOptions:{readOnly:Te||!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4,useWorker:!0}})}}]),C}(K.Component)},48728:function(Dt,Be,e){e.d(Be,{e5:function(){return A},mi:function(){return j},dh:function(){return R},XN:function(){return K}});var ge=e(21892),u=e(1619),de=e.n(u),y=e(18853),I=e(93251),k=function(g){var o=g.icon,Re=g.text,L=g.font,G=L===void 0?13:L,oe=g.style,a=g.onClick,n=g.back,J=n===void 0?!0:n;return J?(0,I.jsxs)("span",{onClick:a,style:de()({},oe),children:[(0,I.jsx)(y.B,{type:o,style:{fontSize:G}})," ",Re]}):(0,I.jsxs)("span",{onClick:a,style:de()({},oe),children:[Re," ",(0,I.jsx)(y.B,{style:{fontSize:G},type:o})]})},je=e(48658),s=e(33228),K={1:(0,I.jsxs)("span",{children:[(0,I.jsx)(ge.Z,{theme:"outline",size:"14",fill:"#7ed321"})," HTTP"]}),2:(0,I.jsx)(k,{font:14,icon:"icon-GRPC",text:"GRPC"}),3:(0,I.jsx)(k,{font:14,icon:"icon-a-dubbo1",text:"Dubbo"})},f={1:(0,I.jsx)(s.Z,{color:"success",children:"HTTP"}),2:(0,I.jsx)(s.Z,{color:"orange",children:"GRPC"}),3:(0,I.jsx)(s.Z,{color:"blue",children:"DUBBO"})},R={GET:(0,I.jsx)(s.Z,{color:"success",children:"GET"}),POST:(0,I.jsx)(s.Z,{color:"blue",children:"POST"}),PUT:(0,I.jsx)(s.Z,{color:"cyan",children:"PUT"}),DELETE:(0,I.jsx)(s.Z,{color:"error",children:"DELETE"})},j={0:(0,I.jsx)(s.Z,{children:"\u666E\u901A"}),1:(0,I.jsx)(s.Z,{color:"blue",children:"\u6D4B\u8BD5\u8BA1\u5212"}),2:(0,I.jsx)(s.Z,{color:"success",children:"CI"}),3:(0,I.jsx)(s.Z,{children:"\u5176\u4ED6"})},A={0:(0,I.jsx)(s.Z,{color:"success",style:{marginLeft:8},children:"\u666E\u901A"}),1:(0,I.jsx)(s.Z,{color:"blue",style:{marginLeft:8},children:"\u524D\u7F6E"}),2:(0,I.jsx)(s.Z,{color:"warning",style:{marginLeft:8},children:"\u6570\u636E\u5DE5\u5382"})}},52538:function(Dt,Be,e){var ge=e(84325),u=e(13309),de=e(93251);Be.Z=function(y){var I=y.desc,k=y.height,je=k===void 0?180:k,s=y.image,K=s===void 0?u.Z:s;return(0,de.jsx)(ge.Z,{image:K,imageStyle:{height:je},description:I||"\u6682\u65E0\u6570\u636E"})}},71245:function(Dt,Be,e){var ge=e(24984),u=e(84325),de=e(93251);Be.Z=function(y){var I=y.desc,k=y.height,je=k===void 0?180:k;return(0,de.jsx)(u.Z,{image:ge.Z,imageStyle:{height:je},description:I||"\u6682\u65E0\u6570\u636E"})}},20970:function(Dt,Be,e){var ge=e(1619),u=e.n(ge),de=e(92105),y=e.n(de),I=e(48658),k=e(64216),je=e(63368),s=e(70214),K=e(21577),f=e(93251),R=k.Z.Item,j=function(g){var o=g.title,Re=g.width,L=g.left,G=g.right,oe=g.formName,a=g.record,n=g.onFinish,J=g.loading,M=g.fields,rt=g.open,C=g.onCancel,Ne=g.offset,t=Ne===void 0?0:Ne,Ce=g.children,Se=g.Footer,Z=g.onTest,Te=k.Z.useForm(),fe=y()(Te,1),Le=fe[0],ye=function(){Le.validateFields().then(function(le){n(le)})};(0,I.useEffect)(function(){Le.resetFields(),Le.setFieldsValue(a)},[a]);var c={labelCol:{span:L},wrapperCol:{span:G}};return(0,f.jsxs)(je.Z,{style:{marginTop:t},confirmLoading:J,footer:Se!==void 0?(0,f.jsx)(Se,{onOk:ye,onCancel:C,onTest:function(){Le.validateFields().then(function(le){Z(le)})}}):void 0,title:o,width:Re,open:rt,onOk:ye,onCancel:C,children:[Ce||null,(0,f.jsx)(k.Z,u()(u()({form:Le},c),{},{name:oe,initialValues:a,onFinish:n,children:M.map(function(E,le){return(0,f.jsx)(s.Z,{span:E.span||24,children:(0,f.jsx)(R,{label:E.label,colon:E.colon||!0,initialValue:E.initialValue,rules:[{required:E.required,message:E.message}],name:E.name,valuePropName:E.valuePropName||"value",children:(0,K.Z)(E.type,E.placeholder,E.component)})},le)})}))]})};Be.Z=j},21577:function(Dt,Be,e){var ge=e(32224),u=e(82511),de=e(48658),y=e(93251),I=ge.Z.TextArea,k=function(s,K){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return f||(s==="input"?(0,y.jsx)(ge.Z,{placeholder:K}):s==="textarea"?(0,y.jsx)(I,{placeholder:K}):s==="switch"?(0,y.jsx)(u.Z,{}):null)};Be.Z=k},78030:function(Dt,Be,e){e.d(Be,{Z:function(){return ye}});var ge=e(48658),u=e(22666),de=e(32224),y=e(81386),I=e(70214),k=e(14660),je=e.n(k),s=e(53272),K=e.n(s),f=e(21464),R=e.n(f),j=e(92105),A=e.n(j),g=e(1619),o=e.n(g),Re=e(57445),L=e.n(Re),G=e(64216),oe=e(35019),a=e(13864),n=e(18415),J=e(60020),M=e(70940),rt=e(86061),C=e(51270),Ne=e(12087),t=e(93251),Ce=["editing","dataIndex","title","type","setType","record","index","key","children"],Se=u.Z.Option,Z=function(E){var le=E.editing,r=E.dataIndex,re=E.title,pe=E.type,ie=E.setType,Ve=E.record,we=E.index,_e=E.key,T=E.children,_=L()(E,Ce);return(0,t.jsx)("td",o()(o()({},_),{},{children:le?(0,t.jsx)(G.Z.Item,{name:r,style:{margin:0},initialValue:Ve.dataIndex,rules:[{required:!0,message:"Please Input ".concat(re,"!")}],children:(0,t.jsx)(de.Z,{placeholder:"please input ".concat(re)})}):T}))},Te=function(E){var le=E.data,r=E.setData,re=E.ossFileList,pe=G.Z.useForm(),ie=A()(pe,1),Ve=ie[0],we=(0,ge.useState)(""),_e=A()(we,2),T=_e[0],_=_e[1],He=(0,ge.useState)("FILE"),Je=A()(He,2),be=Je[0],qe=Je[1],et=(0,ge.useState)(null),Ye=A()(et,2),$e=Ye[0],Et=Ye[1],ut=function(N){return N.key===T},vt=function(N){Ve.setFieldsValue(o()({},N)),_(N.key)},jt=function(){_("")},Zt=function(){var S=R()(je()().mark(function N(b){var ee,Y,ht,ce,Ft;return je()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.prev=0,Ae.next=3,Ve.validateFields();case 3:if(ee=Ae.sent,!(be==="FILE"&&!$e)){Ae.next=7;break}return oe.ZP.info("\u8BF7\u9009\u62E9\u6587\u4EF6"),Ae.abrupt("return");case 7:if(Y=K()(le),ht=Y.findIndex(function(D){return b===D.key}),!(ht>-1)){Ae.next=20;break}if(ce=Y[ht],Ft=Y.findIndex(function(D){return ee.key===D.key}),!(Ft>-1)){Ae.next=15;break}return oe.ZP.info("\u8BE5key\u5DF2\u5B58\u5728"),Ae.abrupt("return");case 15:Y.splice(ht,1,o()(o()(o()({},ce),ee),{},{type:be,value:$e})),r(Y),_(""),Ae.next=23;break;case 20:Y.push(o()(o()({},ee),{},{type:be,value:$e})),r(Y),_("");case 23:Ae.next=28;break;case 25:Ae.prev=25,Ae.t0=Ae.catch(0),console.log("Validate Failed:",Ae.t0);case 28:case"end":return Ae.stop()}},N,null,[[0,25]])}));return function(b){return S.apply(this,arguments)}}(),Bt=function(N){var b=K()(le);b.splice(b.findIndex(function(ee){return N===ee.key}),1),r(b)},dt=[{title:"KEY",dataIndex:"key",width:"30%",editable:!0},{title:"TYPE",dataIndex:"type",type:"select",width:"10%",render:function(N,b){return b.key===T?(0,t.jsxs)(u.Z,{style:{width:"100%"},value:be,onChange:function(Y){qe(Y)},children:[(0,t.jsx)(Se,{value:"FILE",children:"FILE"}),(0,t.jsx)(Se,{value:"TEXT",children:"TEXT"})]}):b.type}},{title:"VALUE",dataIndex:"value",width:"40%",render:function(N,b){return b.key===T?be==="FILE"?(0,t.jsx)(u.Z,{style:{width:"100%"},placeholder:"please select oss file",showSearch:!0,value:$e,onChange:function(Y){return Et(Y)},children:re.map(function(ee){return(0,t.jsx)(Se,{value:ee.file_path,children:ee.file_path},ee.file_path)})}):(0,t.jsx)(de.Z,{placeholder:"please input VALUE",value:$e,onChange:function(Y){Et(Y.target.value)}}):be==="FILE"?(0,t.jsx)("a",{href:"".concat(Ne.Z.URL,"/oss/download?filepath=").concat(b.value),children:b.value}):b.value}},{title:"OPERATION",dataIndex:"operation",render:function(N,b){var ee=ut(b);return ee?(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{onClick:function(){return Zt(b.key)},style:{marginRight:8},children:"Save"}),(0,t.jsx)(a.Z,{title:"Sure to cancel?",onConfirm:jt,children:(0,t.jsx)("a",{children:"Cancel"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z.Link,{disabled:T!=="",onClick:function(){return vt(b)},children:"Edit"}),(0,t.jsx)(J.Z,{type:"vertical"}),(0,t.jsx)(n.Z.Link,{disabled:T!=="",onClick:function(){return Bt(b.key)},children:"Remove"})]})}}],tt=function(){var N=[].concat(K()(le),[{key:"",type:"TEXT",value:null}]);r(N),qe("FILE")},xt=dt.map(function(S){return S.editable?o()(o()({},S),{},{onCell:function(b,ee){return{record:b,index:ee,type:be,setType:qe,dataIndex:S.dataIndex,title:S.title,editing:ut(b)}}}):S});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z,{style:{marginBottom:12},children:(0,t.jsx)(I.Z,{span:6,children:(0,t.jsx)(M.ZP,{type:"primary",onClick:tt,icon:(0,t.jsx)(C.Z,{}),children:"Add"})})}),(0,t.jsx)(G.Z,{form:Ve,component:!1,children:(0,t.jsx)(rt.Z,{components:{body:{cell:Z}},dataSource:le,columns:xt,rowClassName:"editable-row",pagination:{onChange:jt}})})]})},fe=Te,Le=u.Z.Option,ye=function(c){var E=c.ossFileList,le=c.dataSource,r=c.setDataSource,re=[{title:"KEY",dataIndex:"key",render:function(){return(0,t.jsx)(de.Z,{})}},{title:"VALUE",dataIndex:"value",render:function(){return(0,t.jsx)(u.Z,{children:E.map(function(ie){return(0,t.jsx)(Le,{value:ie.key,children:ie.key},ie.key)})})}}];return(0,t.jsx)(y.Z,{gutter:8,style:{marginTop:16},children:(0,t.jsx)(I.Z,{span:24,children:(0,t.jsx)(fe,{bordered:!0,columns:re,data:le,setData:r,ossFileList:E})})})}},23036:function(Dt,Be,e){var ge=e(68508),u=e.n(ge),de=e(14660),y=e.n(de),I=e(21464),k=e.n(I),je=e(27287),s=e.n(je),K=e(92105),f=e.n(K),R=e(48658),j=e(22666),A=e(65777),g=e(58385),o=e(34245),Re=e(81386),L=e(70214),G=e(78890),oe=e(64216),a=e(40097),n=e(32224),J=e(70940),M=e(473),rt=e(28067),C=e(86061),Ne=e(91801),t=e(36334),Ce=e(67355),Se=e(86782),Z=e(48982),Te=e(10918),fe=e(89148),Le=e(69726),ye=e(78030),c=e(9350),E=e(88315),le=e(18853),r=e(93251),re=j.Z.Option,pe=A.Z.TabPane,ie={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},Ve=function(T){return T&&T.response?(0,r.jsx)("div",{style:{marginRight:16},children:(0,r.jsxs)("span",{children:["Status:",(0,r.jsxs)("span",{style:{color:ie[T.status_code]?ie[T.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[T.status_code," ",ie[T.status_code]?ie[T.status_code].text:""]}),(0,r.jsxs)("span",{style:{marginLeft:8,marginRight:8},children:["Time: ",(0,r.jsx)("span",{style:{color:"#67C23A"},children:T.cost})]})]})}):null},we=function(T){var _=T.form,He=T.gconfig,Je=T.dispatch,be=T.body,qe=T.setBody,et=T.headers,Ye=T.setHeaders,$e=T.formData,Et=T.setFormData,ut=T.caseInfo,vt=T.bodyType,jt=T.setBodyType,Zt=T.save,Bt=Zt===void 0?null:Zt,dt=(0,R.useState)("JSON"),tt=f()(dt,2),xt=tt[0],S=tt[1],N=(0,R.useState)("GET"),b=f()(N,2),ee=b[0],Y=b[1],ht=(0,R.useState)([]),ce=f()(ht,2),Ft=ce[0],Ue=ce[1],Ae=(0,R.useState)(function(){return Ft.map(function(d){return d.id})}),D=f()(Ae,2),l=D[0],P=D[1],ae=(0,R.useState)(function(){return et.map(function(d){return d.id})}),ve=f()(ae,2),nt=ve[0],ze=ve[1],O=(0,R.useState)(!1),i=f()(O,2),m=i[0],V=i[1],$=(0,R.useState)({}),F=f()($,2),p=F[0],Ee=F[1],ue=(0,R.useState)(""),Q=f()(ue,2),at=Q[0],me=Q[1],We=(0,R.useState)(null),X=f()(We,2),U=X[0],te=X[1],Ie=(0,R.useState)(!1),Qe=f()(Ie,2),Xe=Qe[0],Ke=Qe[1],q=He.ossFileList,xe=He.envMap,ke=He.addressList,ot=function(){if(be){var h=JSON.parse(be);s()(h)==="object"&&h[0]!==void 0&&Et(h)}};(0,R.useEffect)(function(){ut&&Y(ut.request_method)},[ut.request_method]),(0,R.useEffect)(function(){if(vt===2){Je({type:"gconfig/listOssFile"});try{ot()}catch(d){}}},[vt]),(0,R.useEffect)(function(){Je({type:"gconfig/fetchAddress"})},[]);var Pe=function(){var d=k()(y()().mark(function h(){return y()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:me(_.getFieldValue("url")),yt(_.getFieldValue("url"));case 2:case"end":return ne.stop()}},h)}));return function(){return d.apply(this,arguments)}}();(0,R.useEffect)(function(){Pe()},[be]);var Oe=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],gt=function(h){if(!p[h])return[];var v=JSON.parse(p[h]);return Object.keys(v).map(function(ne){return{key:ne,value:v[ne]}})},lt=function(h){var v=_.getFieldValue("url"),ne;v===void 0?ne="":ne=v.split("?")[0],h.forEach(function(De,mt){De.key&&(mt===0?ne="".concat(ne,"?").concat(De.key,"=").concat(De.value||""):ne="".concat(ne,"&").concat(De.key,"=").concat(De.value||""))}),_.setFieldsValue({url:ne})},yt=function(h){if(!!h){var v=h.split("?");if(v.length<2)Ue([]);else{var ne=v[1].split("&"),De=[],mt=[];ne.forEach(function(it,At){var Ot=it.split("="),Pt=f()(Ot,2),It=Pt[0],Ut=Pt[1],Mt=Date.now();mt.push(Mt+At+10),De.push({key:It,value:Ut,id:Mt+At+10,description:""})}),Ue(De),P(mt)}}},Ze=function(h){S(h)},Ct=function(){var h={};return et.forEach(function(v){v.key!==""&&(h[v.key]=v.value)}),h},Tt=function(){var d=k()(y()().mark(function h(){var v,ne,De;return y()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(v=_.getFieldValue("url"),v!==""){it.next=4;break}return g.Z.error({message:"\u8BF7\u6C42Url\u4E0D\u80FD\u4E3A\u7A7A"}),it.abrupt("return");case 4:return V(!0),ne={method:ee||"GET",url:v,body:be,body_type:vt,headers:Ct()},vt===0&&(ne.body=null),it.next=9,(0,Te.c3)(ne);case 9:De=it.sent,V(!1),fe.Z.response(De,!0)&&Ee(De.data);case 12:case"end":return it.stop()}},h)}));return function(){return d.apply(this,arguments)}}(),St=function(h,v){if(h==="params"){var ne=Ft.filter(function(mt){return mt.id!==v});Ue(ne),lt(ne)}else{var De=et.filter(function(mt){return mt.id!==v});Ye(De)}},ft=(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("Text")},children:"Text"})},"Text"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("JavaScript")},children:"JavaScript"})},"JavaScript"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("JSON")},children:"JSON"})},"JSON"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("HTML")},children:"HTML"})},"HTML"),(0,r.jsx)(o.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){Ze("XML")},children:"XML"})},"XML")]}),he=function(h){return[{title:"KEY",key:"key",dataIndex:"key"},{title:"VALUE",key:"value",dataIndex:"value"},{title:"DESCRIPTION",key:"description",dataIndex:"description"},{title:"\u64CD\u4F5C",valueType:"option",render:function(ne,De){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ne.Z,{style:{cursor:"pointer"},onClick:function(){P([De.id])}}),(0,r.jsx)(t.Z,{style:{cursor:"pointer",marginLeft:8},onClick:function(){St(h,De.id)},twoToneColor:"#eb2f96"})]})}}]},Ge=function(h){return h===0?(0,r.jsx)("div",{style:{height:"20vh",lineHeight:"20vh",textAlign:"center"},children:"This request does not have a body"}):h===2?(0,r.jsx)(ye.Z,{ossFileList:q,dataSource:$e,setDataSource:Et}):(0,r.jsx)(Re.Z,{style:{marginTop:12},children:(0,r.jsx)(L.Z,{span:24,children:(0,r.jsx)(G.Z,{bodyStyle:{padding:0},children:(0,r.jsx)(E.Z,{value:be,onChange:function(ne){return qe(ne)},height:"20vh",setEditor:te})})})})},se=function(){var h={};return ke.forEach(function(v){h[v.name]===void 0?h[v.name]=u()({},v.env,v.gateway):h[v.name][v.env]=v.gateway}),h},w=se(),H=(0,r.jsx)(oe.Z.Item,{name:"base_path",noStyle:!0,children:(0,r.jsxs)(j.Z,{style:{width:130},placeholder:"\u9009\u62E9BasePath",showSearch:!0,allowClear:!0,optionLabelProp:"label",filterOption:function(h,v){return v.children.length>1?!1:v.children.props.children.indexOf(h.toLowerCase())>=0},children:[(0,r.jsxs)(re,{value:null,label:"\u65E0",children:["\u65E0",(0,r.jsx)("a",{style:{float:"right",fontSize:12},href:"/#/config/address",children:"\u53BB\u914D\u7F6E"})]}),Object.keys(w).map(function(d){return(0,r.jsx)(re,{value:d,label:d,children:(0,r.jsx)(a.Z,{title:(0,r.jsx)("div",{children:Object.keys(w[d]).map(function(h){return(0,r.jsxs)("p",{children:[xe[h],": ",w[d][h]]})})}),children:d})},d)})]})});return(0,r.jsxs)(oe.Z,{form:_,children:[(0,r.jsxs)(Re.Z,{gutter:[8,8],children:[(0,r.jsx)(L.Z,{span:20,children:(0,r.jsxs)(oe.Z,{layout:"inline",form:_,children:[(0,r.jsx)(L.Z,{span:8,children:(0,r.jsx)(oe.Z.Item,{colon:!1,name:"request_method",label:"\u8BF7\u6C42\u65B9\u5F0F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"}],initialValue:ee,children:(0,r.jsxs)(j.Z,{placeholder:"\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F",onChange:function(h){return Y(h)},style:{width:120,textAlign:"left"},children:[(0,r.jsx)(re,{value:"GET",children:"GET"},"GET"),(0,r.jsx)(re,{value:"POST",children:"POST"},"POST"),(0,r.jsx)(re,{value:"PUT",children:"PUT"},"PUT"),(0,r.jsx)(re,{value:"DELETE",children:"DELETE"},"DELETE")]})})}),(0,r.jsx)(L.Z,{span:16,children:(0,r.jsx)(oe.Z.Item,{name:"url",colon:!1,label:(0,r.jsxs)(a.Z,{title:"\u70B9\u51FB\u53EF\u5C55\u5F00\u5168\u5C40\u53D8\u91CF\u63D0\u793A",children:["\u8BF7\u6C42\u5730\u5740",(0,r.jsx)(Ce.Z,{style:{marginLeft:4},onClick:function(){return Ke(!0)}})]}),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42url"}],children:(0,r.jsx)(n.Z,{addonBefore:H,style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u8981\u8BF7\u6C42\u7684url",onChange:function(h){yt(h.target.value),_.setFieldsValue({url:h.target.value}),me(h.target.value)}})})})]})}),(0,r.jsx)(L.Z,{span:4,children:(0,r.jsx)("div",{style:{float:"right"},children:Bt?null:(0,r.jsxs)(J.ZP,{onClick:Tt,loading:m,type:"primary",children:[(0,r.jsx)(le.B,{type:"icon-fasong1"}),"Send"," "]})})})]}),(0,r.jsx)(Re.Z,{style:{marginTop:8},children:(0,r.jsxs)(A.Z,{defaultActiveKey:"1",style:{width:"100%"},children:[(0,r.jsx)(pe,{tab:"Params",children:(0,r.jsx)(Z.Z,{columns:he("params"),title:"Query Params",dataSource:Ft,setDataSource:Ue,extra:lt,editableKeys:l,setEditableRowKeys:P})},"1"),(0,r.jsx)(pe,{tab:"Headers",children:(0,r.jsx)(Z.Z,{columns:he("headers"),title:"Headers",dataSource:et,setDataSource:Ye,editableKeys:nt,setEditableRowKeys:ze})},"2"),(0,r.jsxs)(pe,{tab:"Body",children:[(0,r.jsxs)(Re.Z,{children:[(0,r.jsxs)(M.ZP.Group,{defaultValue:0,value:vt,onChange:function(h){jt(h.target.value),h.target.value==="form-data"&&Je({type:"gconfig/listOssFile"})},children:[(0,r.jsx)(M.ZP,{value:0,children:"none"}),(0,r.jsx)(M.ZP,{value:2,children:"form-data"}),(0,r.jsx)(M.ZP,{value:3,children:"x-www-form-urlencoded"}),(0,r.jsx)(M.ZP,{value:1,children:"raw"}),(0,r.jsx)(M.ZP,{value:4,children:"binary"}),(0,r.jsx)(M.ZP,{value:5,children:"GraphQL"})]}),vt===1?(0,r.jsx)(rt.Z,{style:{marginLeft:8},overlay:ft,trigger:["click"],children:(0,r.jsxs)("a",{onClick:function(h){return h.preventDefault()},children:[xt," ",(0,r.jsx)(Se.Z,{})]})}):null]}),Ge(vt)]},"3")]})}),(0,r.jsx)(Re.Z,{gutter:[8,8],children:Object.keys(p).length===0?null:(0,r.jsxs)(A.Z,{style:{width:"100%"},tabBarExtraContent:Ve(p),children:[(0,r.jsx)(pe,{tab:"Body",children:(0,r.jsx)(E.Z,{value:p.response,readOnly:!0,height:"30vh",setEditor:te})},"1"),(0,r.jsx)(pe,{tab:"Cookie",children:(0,r.jsx)(C.Z,{columns:Oe,dataSource:gt("cookies"),size:"small",pagination:!1})},"2"),(0,r.jsx)(pe,{tab:"Headers",children:(0,r.jsx)(C.Z,{columns:Oe,dataSource:gt("response_headers"),size:"small",pagination:!1})},"3")]})})]})};Be.Z=(0,c.connect)(function(_e){var T=_e.gconfig;return{gconfig:T}})(we)},48982:function(Dt,Be,e){var ge=e(48658),u=e(59848),de=e(93251);Be.Z=function(y){var I=y.columns,k=y.dataSource,je=y.title,s=y.setDataSource,K=y.editableKeys,f=y.setEditableRowKeys,R=y.extra;return(0,ge.useEffect)(function(){f(k.map(function(j){return j.id}))},[k]),(0,de.jsx)(u.Z,{headerTitle:je,columns:I,rowKey:"id",value:k,onChange:s,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{id:Date.now()}}},editable:{type:"multiple",editableKeys:K,actionRender:function(A,g,o){return[o.delete]},onValuesChange:function(A,g){R&&R(g),s(g)},onChange:f}})}},11518:function(Dt,Be,e){e.d(Be,{Z:function(){return n}});var ge=e(53272),u=e.n(ge),de=e(57445),y=e.n(de),I=e(14660),k=e.n(I),je=e(21464),s=e.n(je),K=e(1619),f=e.n(K),R=e(86061),j=e(29883),A=e(34293),g=e(66571),o=e(93251),Re=["className","style"],L=(0,j.JV)(function(){return(0,o.jsx)(A.Z,{style:{cursor:"grab",color:"#999"}})}),G=[{title:"\u6392\u5E8F",dataIndex:"sort",width:65,className:"drag-visible",render:function(){return(0,o.jsx)(L,{})}}],oe=(0,j.gU)(function(J){return(0,o.jsx)("tr",f()({},J))}),a=(0,j.hv)(function(J){return(0,o.jsx)("tbody",f()({},J))}),n=function(J){var M=J.dataSource,rt=J.columns,C=J.setDataSource,Ne=J.dragCallback,t=J.loading,Ce=function(){var Te=s()(k()().mark(function fe(Le){var ye,c,E,le;return k()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(ye=Le.oldIndex,c=Le.newIndex,ye===c){re.next=11;break}if(E=(0,g.q)([].concat(M),ye,c).filter(function(pe){return!!pe}),!Ne){re.next=10;break}return re.next=6,Ne(E);case 6:le=re.sent,(le||le===void 0)&&C(E),re.next=11;break;case 10:C(E);case 11:case"end":return re.stop()}},fe)}));return function(Le){return Te.apply(this,arguments)}}(),Se=function(fe){return(0,o.jsx)(a,f()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:Ce},fe))},Z=function(fe){var Le=fe.className,ye=fe.style,c=y()(fe,Re),E=M.findIndex(function(le){return le.index===c["data-row-key"]});return(0,o.jsx)(oe,f()({index:E},c))};return(0,o.jsx)(R.Z,{pagination:!1,dataSource:M,loading:t,columns:[].concat(G,u()(rt)),rowKey:"index",components:{body:{wrapper:Se,row:Z}}})}},14649:function(Dt,Be,e){e.d(Be,{Z:function(){return Ae}});var ge=e(14660),u=e.n(ge),de=e(68508),y=e.n(de),I=e(53272),k=e.n(I),je=e(1619),s=e.n(je),K=e(21464),f=e.n(K),R=e(92105),j=e.n(R),A=e(73957),g=e(81386),o=e(70214),Re=e(50930),L=e(70940),G=e(9350),oe=e(18853),a=e(48658),n=e(22666),J=e(40097),M=e(82511),rt=e(86067),C=e(64216),Ne=e(21577),t=e(93251),Ce=C.Z.Item,Se=function(D){var l=D.left,P=D.right,ae=D.formName,ve=D.record,nt=D.onFinish,ze=D.fields,O=D.pForm,i=O;if(O===void 0){var m=C.Z.useForm(),V=j()(m,1),$=V[0];i=$}var F={labelCol:{span:l},wrapperCol:{span:P}};return(0,a.useEffect)(function(){i.setFieldsValue(ve)},[ve]),(0,t.jsx)(C.Z,s()(s()({form:i},F),{},{name:ae,initialValues:ve,onFinish:nt,children:(0,t.jsx)(g.Z,{gutter:8,children:ze.map(function(p){return(0,t.jsx)(o.Z,{span:p.span||24,children:(0,t.jsx)(Ce,s()(s()({label:p.label,colon:p.colon||!0,rules:[{required:p.required,message:p.message}],name:p.name,valuePropName:p.valuePropName||"value"},p.layout||F),{},{children:(0,Ne.Z)(p.type,p.placeholder,p.component)}))})})})}))},Z=e(12087),Te=e(88315),fe=n.Z.Option,Le=function(D){var l=D.data,P=D.form,ae=D.dispatch,ve=D.testcaseData,nt=D.constructorType,ze=(0,a.useState)(null),O=j()(ze,2),i=O[0],m=O[1];(0,a.useEffect)(function(){ae({type:"construct/getTestCaseListTree"})},[]);var V=[{name:"name",label:"\u540D\u79F0",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6B65\u9AA4\u540D\u79F0",initialValue:l.name,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"constructor_case_id",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,initialValue:l.constructor_case_id,placeholder:"\u8BF7\u9009\u62E9\u6D4B\u8BD5\u573A\u666F",component:(0,t.jsx)(n.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F",children:ve.map(function($){return(0,t.jsx)(fe,{value:$.id,children:$.name},$.id)})}),span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"value",label:"\u8FD4\u56DE\u503C",placeholder:"\u8BF7\u586B\u5199\u8FD4\u56DE\u53D8\u91CF\u540D\u79F0\uFF0C\u4E0D\u9700\u8981\u53EF\u4E0D\u586B",required:!1,type:"input",initialValue:l.value,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"public",label:(0,t.jsx)(J.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB",(0,t.jsx)(rt.Z,{})]})}),required:!0,component:(0,t.jsx)(M.Z,{}),valuePropName:"checked",initialValue:l.public,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"enable",label:"\u542F\u7528",required:!0,component:(0,t.jsx)(M.Z,{}),valuePropName:"checked",initialValue:l.enable,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"params",label:"\u52A8\u6001\u53C2\u6570",required:!1,component:(0,t.jsx)(Te.Z,{height:150,setEditor:m})}];return(0,t.jsx)(Se,{fields:V,left:4,right:20,record:l,pForm:P})},ye=e(5545),c=n.Z.Option,E=function(l){var P=l.construct,ae=l.dispatch,ve=l.suffix,nt=ve===void 0?!0:ve,ze=P.constructorData,O=P.searchConstructor,i=P.constructorType,m=function(F){ae({type:"construct/save",payload:F})},V=function(){ae({type:"construct/getConstructorTree",payload:{constructor_type:i,suffix:nt}})};return(0,a.useEffect)(function(){V()},[i]),(0,t.jsx)(g.Z,{style:{marginTop:24},children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({label:"\u6570\u636E\u7C7B\u578B",name:"type"},Z.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(n.Z,{disabled:!0,defaultValue:i,children:Object.keys(Z.Z.CONSTRUCTOR_TYPE).map(function($){return(0,t.jsx)(c,{value:parseInt($,10),children:Z.Z.CONSTRUCTOR_TYPE[$]},$)})})}))}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({label:"\u590D\u5236\u6784\u9020\u6761\u4EF6"},Z.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(ye.Z,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:O,filterTreeNode:function(F,p){return p.title.toLowerCase().indexOf(F.toLowerCase())>-1},dropdownStyle:{maxHeight:600,overflow:"auto"},treeData:ze,placeholder:"\u901A\u8FC7\u641C\u7D22\u6784\u9020\u6761\u4EF6\uFF0C\u53EF\u4EE5\u5FEB\u901F\u590D\u5236\u53C2\u6570\u54E6\uFF01",treeDefaultExpandAll:!0,onChange:function(F){m({searchConstructor:F}),ae(F!==void 0?{type:"construct/getConstructorData",payload:{id:F.split("_")[1]}}:{type:"construct/save",payload:{testCaseConstructorData:{type:i,public:!0,enable:!0}}})}})}))})]})})})},le=(0,G.connect)(function(D){var l=D.loading,P=D.construct;return{loading:l,construct:P}})(E),r=function(l){var P=l.caseId,ae=l.construct,ve=l.dispatch,nt=l.form,ze=l.onFinish,O=l.suffix,i=ae.testcaseData,m=ae.testCaseConstructorData,V=ae.constructorType;return(0,t.jsx)(g.Z,{style:{marginTop:24},gutter:[8,8],children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(le,{suffix:O}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsx)(Le,{data:m,dispatch:ve,testcaseData:i,constructorType:V,form:nt})})})]})})},re=(0,G.connect)(function(D){var l=D.construct,P=D.loading;return{construct:l,loading:P}})(r),pe=e(74562),ie=e(34245),Ve=e(32224),we=e(50068),_e=e(54817),T=e(67355),_=function(){return(0,t.jsx)(J.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB ",(0,t.jsx)(T.Z,{})]})})},He=n.Z.Option,Je=function(l){var P=l.form,ae=l.dispatch,ve=l.construct,nt=l.gconfig,ze=l.suffix,O=(0,a.useState)("1"),i=j()(O,2),m=i[0],V=i[1],$=(0,a.useState)(null),F=j()($,2),p=F[0],Ee=F[1],ue=ve.testCaseConstructorData,Q=ve.constructorType,at=nt.dbConfigData,me=function(){var U=at.map(function(te){return te.name});return Array.from(new Set(U))},We=function(U){V(U.key)};return(0,a.useEffect)(function(){ae({type:"gconfig/fetchDbConfig"})},[]),(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(ue)},[ue]),(0,t.jsx)(g.Z,{gutter:8,style:{marginTop:24},children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:3,children:(0,t.jsxs)(ie.Z,{onClick:We,style:{width:128},defaultSelectedKeys:["1"],defaultOpenKeys:["1"],mode:"inline",children:[(0,t.jsx)(ie.Z.Item,{children:"\u7F16\u8F91SQL"},"1"),(0,t.jsx)(ie.Z.Item,{children:"\u8C03\u8BD5SQL"},"2")]})}),m!=="1"?(0,t.jsx)(o.Z,{span:21,children:(0,t.jsx)(we.Z,{leftHeight:420,cardHeight:130,tableHeight:272,editorHeight:130,imageHeight:60})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(o.Z,{span:21,children:[(0,t.jsx)(le,{suffix:ze}),(0,t.jsxs)(C.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"}],initialValue:ue.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u6570\u636E\u5E93",name:"database",initialValue:ue.database,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010\u6570\u636E\u5E93\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u4F1A\u6839\u636E\u73AF\u5883\u81EA\u52A8\u5BFB\u627E\u5BF9\u5E94\u7684\u6570\u636E\u5E93",children:me().map(function(X){return(0,t.jsx)(He,{value:X,children:X},X)})})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:ue.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:ue.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(J.Z,{title:"\u5207\u6362\u5DE6\u4FA7\u83DC\u5355\u53EF\u8FDB\u5165SQL\u7F16\u8F91\u5668",children:["SQL\u8BED\u53E5 ",(0,t.jsx)(T.Z,{})]}),name:"sql",rules:[{required:!0,message:"\u8BF7\u586B\u5199SQL\u8BED\u53E5"}],initialValue:ue.sql,children:(0,t.jsx)(_e.Z,{language:"mysql",height:150,setEditor:Ee})}))]}))]})})]})})})},be=(0,G.connect)(function(D){var l=D.construct,P=D.gconfig,ae=D.loading;return{construct:l,gconfig:P,loading:ae}})(Je),qe=e(10040),et=e(65777),Ye=e(35019),$e=e(58385),Et=e(94519),ut=e(48868),vt=et.Z.TabPane,jt=n.Z.Option,Zt=function(l){var P=l.form,ae=l.dispatch,ve=l.construct,nt=l.gconfig,ze=l.suffix,O=(0,a.useState)(null),i=j()(O,2),m=i[0],V=i[1],$=(0,a.useState)(null),F=j()($,2),p=F[0],Ee=F[1],ue=ve.testCaseConstructorData,Q=ve.constructorType,at=nt.redisConfig,me=nt.envMap;(0,a.useEffect)(function(){ae({type:"gconfig/fetchRedisConfig"})},[]),(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(ue)},[ue]);var We=function(){var X=f()(u()().mark(function U(te){var Ie;return u()().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(!(!p||!te)){Xe.next=3;break}return Ye.ZP.info("\u8BF7\u9009\u62E9redis\u6216\u5B8C\u5584Redis\u547D\u4EE4"),Xe.abrupt("return");case 3:return Xe.next=5,ae({type:"gconfig/onlineRedisCommand",payload:{id:p,command:te}});case 5:Ie=Xe.sent,$e.Z.success({message:"\u6267\u884C\u5B8C\u6210",description:Ie});case 7:case"end":return Xe.stop()}},U)}));return function(te){return X.apply(this,arguments)}}();return(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(le,{suffix:ze}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsxs)(C.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"}],initialValue:ue.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:(0,t.jsxs)(J.Z,{title:"\u6D4B\u8BD5\u7684\u65F6\u5019\u53EF\u4EE5\u9009\u4E2D\u5BF9\u5E94\u73AF\u5883\u7684redis\uFF0C\u5426\u5219\u53EF\u4EE5\u968F\u4FBF\u9009\u4E00\u4E2A\u540D\u79F0\u7B26\u5408\u7684redis",children:["Redis ",(0,t.jsx)(T.Z,{})]}),name:"redis",initialValue:ue.redis,rules:[{required:!0,message:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010Redis\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0",onSelect:function(U,te){Ee(te.key)},children:at.map(function(X){return(0,t.jsxs)(jt,{value:X.name,children:[X.name,"(",me[X.env],")"]},X.id)})})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:ue.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:6,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:ue.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(J.Z,{title:"\u70B9\u51FB\u53EF\u6267\u884CRedis\u547D\u4EE4",children:["Redis\u547D\u4EE4",(0,t.jsx)(ut.Z,{twoToneColor:"#67C23A",onClick:f()(u()().mark(function X(){return u()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,We(P.getFieldValue("command"));case 2:case"end":return te.stop()}},X)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1,rules:[{required:!0,message:"\u8BF7\u586B\u5199redis\u6267\u884C\u8BED\u53E5"}],initialValue:ue.command,children:(0,t.jsx)(Et.Z,{language:"text",height:150,setEditor:V})}))]}))})})]})})},Bt=(0,G.connect)(function(D){var l=D.construct,P=D.gconfig,ae=D.loading;return{construct:l,gconfig:P,loading:ae}})(Zt),dt=e(1194),tt=e(69310);function xt(D){return(0,t.jsx)(Et.Z,s()(s()({},D),{},{langugae:"python"}))}var S=function(l){var P=l.form,ae=l.dispatch,ve=l.construct,nt=l.suffix,ze=(0,a.useState)(null),O=j()(ze,2),i=O[0],m=O[1],V=ve.testCaseConstructorData;(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(V)},[V]);var $=function(){var F=f()(u()().mark(function p(){var Ee,ue,Q;return u()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(Ee=P.getFieldValue("command"),ue=P.getFieldValue("value"),Ee){me.next=5;break}return Ye.ZP.info("\u811A\u672C\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),me.abrupt("return");case 5:return me.next=7,ae({type:"testcase/onlinePyScript",payload:{value:ue,command:Ee}});case 7:Q=me.sent,$e.Z.success({message:"\u6267\u884C\u5B8C\u6210",description:Q});case 9:case"end":return me.stop()}},p)}));return function(){return F.apply(this,arguments)}}();return(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(le,{suffix:nt}),(0,t.jsxs)(C.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"}],initialValue:V.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:V.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:V.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(C.Z.Item,s()(s()({label:(0,t.jsxs)(J.Z,{title:"\u70B9\u51FB\u53EF\u6D4B\u8BD5Python\u811A\u672C",children:["Python\u811A\u672C",(0,t.jsx)(ut.Z,{twoToneColor:"#67C23A",onClick:f()(u()().mark(function F(){return u()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,$(P.getFieldValue("command"));case 2:case"end":return Ee.stop()}},F)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1},Z.Z.SQL_LAYOUT),{},{initialValue:V.command,rules:[{required:!0,message:"\u8BF7\u8F93\u5165python\u4EE3\u7801"}],children:(0,t.jsx)(xt,{language:"python",height:180,setEditor:m})}))]}))]})})},N=(0,G.connect)(function(D){var l=D.construct,P=D.loading;return{construct:l,loading:P}})(S),b=e(78890),ee=e(23036),Y=function(l){var P=l.form,ae=l.dispatch,ve=l.construct,nt=l.suffix,ze=l.headers,O=l.setHeaders,i=l.body,m=l.setBody,V=l.bodyType,$=l.setBodyType,F=ve.testCaseConstructorData;return(0,a.useEffect)(function(){P.resetFields(),P.setFieldsValue(F),F.body_type&&$(F.body_type),F.headers&&O(F.headers||[]),m(F.body)},[F]),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsxs)(o.Z,{span:24,children:[(0,t.jsx)(le,{suffix:nt}),(0,t.jsxs)(C.Z,s()(s()({},Z.Z.SUB_LAYOUT),{},{form:P,children:[(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"}],initialValue:F.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"})})}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(g.Z,{gutter:8,children:[(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(_,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:F.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsx)(C.Z.Item,s()(s()({},Z.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:F.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(g.Z,{gutter:8,children:(0,t.jsx)(o.Z,{span:24,children:(0,t.jsx)(b.Z,{bordered:!0,children:(0,t.jsx)(ee.Z,{bodyType:V,setBodyType:$,form:P,caseInfo:{},body:i,setBody:m,headers:ze,setHeaders:O,save:!1})})})})]}))]})})},ht=(0,G.connect)(function(D){var l=D.construct,P=D.loading;return{construct:l,loading:P}})(Y),ce=e(22070),Ft=A.Z.Step,Ue=function(l){var P=l.modal,ae=l.form,ve=l.setModal,nt=l.caseId,ze=l.dispatch,O=l.construct,i=l.testcase,m=l.width,V=l.fetchData,$=l.record,F=l.suffix,p=F===void 0?!1:F,Ee=l.createMode,ue=Ee===void 0?!1:Ee,Q=O.currentStep,at=O.totalStep,me=O.constructorType,We=O.testCaseConstructorData,X=i.preConstructor,U=i.postConstructor,te=(0,a.useState)([]),Ie=j()(te,2),Qe=Ie[0],Xe=Ie[1],Ke=(0,a.useState)(""),q=j()(Ke,2),xe=q[0],ke=q[1],ot=(0,a.useState)(0),Pe=j()(ot,2),Oe=Pe[0],gt=Pe[1],lt=function(he){ze({type:"construct/save",payload:he})},yt=function(he){switch(We.type){case 0:return JSON.stringify({constructor_case_id:he.constructor_case_id,params:he.params});case 1:return JSON.stringify({database:he.database,sql:he.sql});case 2:return JSON.stringify({redis:he.redis,command:he.command});case 3:return JSON.stringify({command:he.command});case 4:return JSON.stringify({body:xe,headers:ce.Z.translateHeaders(Qe),base_path:he.base_path,url:he.url,request_method:he.request_method,body_type:Oe})}},Ze=function(){var ft=f()(u()().mark(function he(){var Ge,se,w,H,d;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,ae.validateFields();case 2:if(Ge=v.sent,se={value:Ge.value,type:We.type,name:Ge.name,constructor_json:yt(Ge),enable:Ge.enable,case_id:nt,public:Ge.public},ue){v.next=17;break}if(!$.id){v.next=11;break}return v.next=8,ze({type:"construct/update",payload:s()(s()({},se),{},{id:$.id,suffix:p})});case 8:w=v.sent,v.next=14;break;case 11:return v.next=13,ze({type:"construct/insert",payload:s()(s()({},se),{},{suffix:p})});case 13:w=v.sent;case 14:w&&V(),v.next=20;break;case 17:d=k()(p?U:X),$.tempIndex===void 0?d.push(s()(s()({},se),{},{suffix:p,index:d.length})):d.splice($.tempIndex,1,s()(s()({},se),{},{suffix:p})),ze({type:"testcase/save",payload:(H={},y()(H,p?"postConstructor":"preConstructor",d),y()(H,"constructorModal",!1),H)});case 20:case"end":return v.stop()}},he)}));return function(){return ft.apply(this,arguments)}}(),Ct=function(he){lt({constructorType:he,testCaseConstructorData:{type:he,public:!0,enable:!0},currentStep:Q+1})},Tt=function(){if(Q===0)return(0,t.jsxs)(g.Z,{gutter:[12,12],style:{marginTop:36},children:[(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(oe.B,{type:"icon-yongliliebiao",style:{fontSize:32}}),title:"\u6D4B\u8BD5\u573A\u666F",description:"\u6D4B\u8BD5\u573A\u666F\u53EF\u4EE5\u590D\u7528, \u5E76\u4F20\u9012\u7528\u4F8B\u7684\u6570\u636E\u7ED9\u4E0B\u4E00\u4E2A\u573A\u666F",onClick:function(){return Ct(0)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(oe.B,{type:"icon-mysql11",style:{fontSize:32}}),title:"SQL\u8BED\u53E5",description:"\u901A\u8FC7\u6267\u884CSQL\u8BED\u53E5\uFF0C\u53EF\u4EE5\u9020\u51FA/\u6062\u590D\u7528\u4F8B\u573A\u666F\u9700\u8981\u7684\u6570\u636E",onClick:function(){return Ct(1)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(oe.B,{type:"icon-redis2",style:{fontSize:32}}),title:"Redis\u64CD\u4F5C",description:"\u901A\u8FC7\u64CD\u4F5CRedis\uFF0C\u53EF\u4EE5\u83B7\u53D6\u6216\u8005\u6821\u9A8C\u7F13\u5B58\u4E2D\u7684\u6570\u636E",onClick:function(){return Ct(2)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(oe.B,{type:"icon-python",style:{fontSize:32}}),title:"Python\u65B9\u6CD5",description:"\u9700\u8981\u81EA\u5B9A\u4E49\u9020\u6570\u65B9\u6CD5\u7684\uFF0C\u53EF\u4EE5\u4F7F\u7528Python\u7F16\u5199\u5BF9\u5E94\u7684\u6838\u5FC3\u65B9\u6CD5",onClick:function(){return Ct(3)}})}),(0,t.jsx)(o.Z,{span:8,children:(0,t.jsx)(qe.Z,{avatar:(0,t.jsx)(oe.B,{type:"icon-qingqiu",style:{fontSize:32}}),title:"HTTP\u8BF7\u6C42",description:"\u4F9D\u8D56\u4E8E\u7B2C\u4E09\u65B9\u7684\u63A5\u53E3\uFF0C\u63A8\u8350\u4F7F\u7528HTTP\u8BF7\u6C42\uFF0C\u5982\u901A\u8FC7\u767E\u5EA6api\u8BC6\u522B\u5BF9\u5E94\u56FE\u7247\u9A8C\u8BC1\u7801",onClick:function(){return Ct(4)}})})]});if(Q===1){if(me===0)return(0,t.jsx)(re,{form:ae,suffix:p});if(me===1)return(0,t.jsx)(be,{form:ae,suffix:p});if(me===2)return(0,t.jsx)(Bt,{form:ae,suffix:p});if(me===3)return(0,t.jsx)(N,{form:ae,suffix:p});if(me===4)return(0,t.jsx)(ht,{suffix:p,form:ae,headers:Qe,bodyType:Oe,setBodyType:gt,setHeaders:Xe,body:xe,setBody:ke})}},St=function(){lt({currentStep:Q-1})};return(0,t.jsx)(Re.Z,{title:p?"\u540E\u7F6E\u6B65\u9AA4":"\u524D\u7F6E\u6B65\u9AA4",width:m||800,open:P,onClose:function(){return ve(!1)},footer:null,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(o.Z,{span:6}),(0,t.jsx)(o.Z,{span:12,children:(0,t.jsxs)(A.Z,{current:Q,size:"small",children:[(0,t.jsx)(Ft,{title:"\u9009\u62E9\u7C7B\u578B"},"type"),(0,t.jsx)(Ft,{title:"\u6784\u9020\u6570\u636E"},"type")]})}),(0,t.jsx)(o.Z,{span:6})]}),Tt(),(0,t.jsxs)("div",{style:{marginTop:24,textAlign:"center"},children:[Q===at&&(0,t.jsxs)(L.ZP,{type:"primary",onClick:Ze,children:[(0,t.jsx)(pe.Z,{})," \u5B8C\u6210"]}),Q>0&&(0,t.jsxs)(L.ZP,{style:{margin:"0 8px"},onClick:function(){return St()},children:[(0,t.jsx)(oe.B,{type:"icon-shangyibu1"})," \u4E0A\u4E00\u6B65"]})]})]})})},Ae=(0,G.connect)(function(D){var l=D.construct,P=D.testcase,ae=D.loading;return{construct:l,loading:ae,testcase:P}})(Ue)},36255:function(Dt,Be,e){e.d(Be,{Z:function(){return ze}});var ge=e(1619),u=e.n(ge),de=e(53272),y=e.n(de),I=e(68508),k=e.n(I),je=e(14660),s=e.n(je),K=e(21464),f=e.n(K),R=e(92105),j=e.n(R),A=e(18853),g=e(86960),o=e(52538),Re=e(71245),L=e(48658),G=e(78890),oe=e(9350),a=e(23036),n=e(93251),J=function(i){return(0,n.jsx)(G.Z,{bordered:i.bordered,children:(0,n.jsx)(a.Z,u()({},i))})},M=(0,oe.connect)(function(O){var i=O.gconfig;return{gconfig:i}})(J),rt=e(11518),C=e(60020),Ne=e(63368),t=e(81386),Ce=e(70214),Se=e(70940),Z=e(86061),Te=e(13178),fe=e(51270),Le=e(20970),ye=e(13982),c=e(89148),E=e(12087),le=function(i){var m=i.dispatch,V=i.testcase,$=i.caseId,F=i.createMode,p=(0,L.useState)(!1),Ee=j()(p,2),ue=Ee[0],Q=Ee[1],at=(0,L.useState)({}),me=j()(at,2),We=me[0],X=me[1],U=V.asserts,te=function(){var Ke=f()(s()().mark(function q(xe){var ke;return s()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,m({type:"testcase/deleteTestCaseAsserts",payload:{id:xe.id}});case 2:ke=Pe.sent,ke&&m({type:"testcase/save",payload:{asserts:U.filter(function(Oe){return Oe.id!==xe.id})}});case 4:case"end":return Pe.stop()}},q)}));return function(xe){return Ke.apply(this,arguments)}}(),Ie=function(q){var xe=y()(U);xe.splice(q.index,1),m({type:"testcase/save",payload:{asserts:xe}})},Qe=[{title:"#",key:"index",render:function(q,xe,ke){return ke+1}},{title:"\u6821\u9A8C\u5185\u5BB9",key:"name",dataIndex:"name"},{title:"\u7C7B\u578B",key:"assert_type",dataIndex:"assert_type",render:function(q){return E.Z.ASSERT_TYPE[q]}},{title:"\u9884\u671F\u7ED3\u679C",key:"expected",dataIndex:"expected",ellipse:!0},{title:"\u5B9E\u9645\u7ED3\u679C",key:"actually",dataIndex:"actually",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(q,xe,ke){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){Q(!0),X(u()(u()({},xe),{},{index:ke}))},children:"\u7F16\u8F91"}),(0,n.jsx)(C.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){Ne.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u65AD\u8A00\u6570\u636E\u5417?",icon:(0,n.jsx)(Te.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var Pe=f()(s()().mark(function gt(){return s()().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(!F){yt.next=4;break}Ie(u()(u()({},xe),{},{index:ke})),yt.next=6;break;case 4:return yt.next=6,te(xe);case 6:case"end":return yt.stop()}},gt)}));function Oe(){return Pe.apply(this,arguments)}return Oe}()})},children:"\u5220\u9664"})]})}}],Xe=function(){var Ke=f()(s()().mark(function q(xe){var ke,ot,Pe,Oe,gt,lt;return s()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(ke=u()({case_id:$},xe),!F){Ze.next=8;break}return We.index!==void 0?(Pe=y()(U),Pe.splice(We.index,1,u()({},ke))):Pe=[].concat(y()(U),[u()({},ke)]),Ze.next=5,m({type:"testcase/save",payload:{asserts:Pe}});case 5:Q(!1),Ze.next=29;break;case 8:if(!We.id){Ze.next=22;break}return Ze.next=11,m({type:"testcase/updateTestCaseAsserts",payload:u()(u()({},ke),{},{id:We.id})});case 11:if(ot=Ze.sent,!c.Z.response(ot,!0)){Ze.next=20;break}return Q(!1),Oe=y()(U),gt=Oe.findIndex(function(Ct){return We.id===Ct.id}),lt=Oe[gt],Oe.splice(gt,1,u()(u()({},lt),ot.data)),Ze.next=20,m({type:"testcase/save",payload:{asserts:Oe}});case 20:Ze.next=29;break;case 22:return Ze.next=24,m({type:"testcase/insertTestCaseAsserts",payload:ke});case 24:if(ot=Ze.sent,!c.Z.response(ot,!0)){Ze.next=29;break}return Q(!1),Ze.next=29,m({type:"testcase/save",payload:{asserts:[].concat(y()(U),[ot.data])}});case 29:case"end":return Ze.stop()}},q)}));return function(xe){return Ke.apply(this,arguments)}}();return(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsxs)(Ce.Z,{span:24,children:[(0,n.jsx)(Le.Z,{open:ue,fields:ye.Z.CaseAsserts,title:"\u7528\u4F8B\u65AD\u8A00",left:6,right:18,onFinish:Xe,onCancel:function(){return Q(!1)},record:We}),(0,n.jsx)(t.Z,{style:{marginBottom:16},children:(0,n.jsx)(Ce.Z,{span:8,children:(0,n.jsxs)(Se.ZP,{type:"primary",onClick:function(){Q(!0),X({})},children:[(0,n.jsx)(fe.Z,{}),"\u6DFB\u52A0\u65AD\u8A00"]})})}),(0,n.jsx)(Z.Z,{columns:Qe,dataSource:U,rowKey:function(q){return q.id},locale:{emptyText:(0,n.jsx)(o.Z,{height:150})}})]})})},r=(0,oe.connect)(function(O){var i=O.testcase,m=O.loading;return{testcase:i,loading:m}})(le),re=e(61534),pe=e(88315),ie=function(i){var m=i.caseId,V=i.testcase,$=i.loading,F=i.dispatch,p=i.currentEnv,Ee=i.createMode,ue=Ee===void 0?!1:Ee,Q=V.testData,at=(0,L.useState)({current:1,total:0,pageSize:5}),me=j()(at,2),We=me[0],X=me[1],U=(0,L.useState)([]),te=j()(U,2),Ie=te[0],Qe=te[1],Xe=(0,L.useState)({}),Ke=j()(Xe,2),q=Ke[0],xe=Ke[1],ke=(0,L.useState)(!1),ot=j()(ke,2),Pe=ot[0],Oe=ot[1],gt=(0,L.useState)(null),lt=j()(gt,2),yt=lt[0],Ze=lt[1];(0,L.useEffect)(function(){var se=parseInt(p,10),w=Q[se];w?(Qe(y()(w)),X(u()(u()({},We),{},{current:1,total:w.length}))):(Qe([]),X(u()(u()({},We),{},{current:1,total:0})))},[p,Q]);var Ct=function(){var se=f()(s()().mark(function w(H){var d,h;return s()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return d=u()({},Q),h=d[parseInt(p,10)],d[parseInt(p,10)]=h.filter(function(De){return H.name!==De.name}),ne.next=5,F({type:"testcase/save",payload:{testData:d}});case 5:case"end":return ne.stop()}},w)}));return function(H){return se.apply(this,arguments)}}(),Tt=function(){var se=f()(s()().mark(function w(H){var d,h,v;return s()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return De.next=2,F({type:"testcase/deleteTestcaseData",payload:{id:H}});case 2:if(d=De.sent,!d){De.next=9;break}return h=u()({},Q),v=h[parseInt(p,10)],h[parseInt(p,10)]=v.filter(function(mt){return mt.id!==H}),De.next=9,F({type:"testcase/save",payload:{testData:h}});case 9:case"end":return De.stop()}},w)}));return function(H){return se.apply(this,arguments)}}(),St=[{title:"#",dataIndex:"id",key:"id"},{title:"\u573A\u666F\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u6D4B\u8BD5\u6570\u636E",dataIndex:"json_data",key:"json_data",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(w,H,d){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){xe(u()(u()({},H),{},{index:d})),Oe(!0)},children:"\u7F16\u8F91"}),(0,n.jsx)(C.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){Ne.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u6D4B\u8BD5\u6570\u636E\u5417?",icon:(0,n.jsx)(Te.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var v=f()(s()().mark(function De(){return s()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(!ue){it.next=5;break}return it.next=3,Ct(H);case 3:it.next=7;break;case 5:return it.next=7,Tt(H.id);case 7:case"end":return it.stop()}},De)}));function ne(){return v.apply(this,arguments)}return ne}()})},children:"\u5220\u9664"})]})}}],ft=function(){var se=f()(s()().mark(function w(H){var d,h;return s()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:d=u()({},Q),h=u()({env:p},H),q.index!==void 0?d[parseInt(p,10)].splice(q.index,1,h):d[parseInt(p,10)]===void 0?d[parseInt(p,10)]=[h]:d[parseInt(p,10)].push(h),F({type:"testcase/save",payload:{testData:d}}),Oe(!1);case 5:case"end":return ne.stop()}},w)}));return function(H){return se.apply(this,arguments)}}(),he=function(){var se=f()(s()().mark(function w(H){var d;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(q.id){v.next=6;break}return v.next=3,F({type:"testcase/insertTestcaseData",payload:u()({case_id:m,env:p},H)});case 3:d=v.sent,v.next=9;break;case 6:return v.next=8,F({type:"testcase/updateTestcaseData",payload:u()({id:q.id,case_id:m,env:p},H)});case 8:d=v.sent;case 9:d&&Oe(!1);case 10:case"end":return v.stop()}},w)}));return function(H){return se.apply(this,arguments)}}(),Ge=[{name:"name",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:q.name},{name:"json_data",label:"JSON\u6570\u636E",required:!0,placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:q.name,component:(0,n.jsx)(pe.Z,{height:200,setEditor:Ze,theme:"material-one-dark"})}];return(0,n.jsxs)(t.Z,{gutter:8,children:[(0,n.jsx)(Le.Z,{title:"\u6D4B\u8BD5\u6570\u636E",record:q,onCancel:function(){Oe(!1)},left:4,right:20,width:650,open:Pe,onFinish:ue?ft:he,fields:Ge,children:(0,n.jsx)(re.Z,{closable:!0,type:"info",style:{marginBottom:12},message:"\u6570\u636E\u7BA1\u7406\u63A5\u53D7\u4E00\u4E32key-value\u7684\u6570\u636E\uFF0C\u4F9B\u5927\u5BB6\u5728case\u91CC\u9762\u4F7F\u7528\u8FD9\u4E9B\u53D8\u91CF\uFF0C\u7528${\u53D8\u91CF}\u7684\u65B9\u5F0F\u3002",showIcon:!0})}),(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(G.Z,{bordered:!1,children:[(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsx)(Ce.Z,{span:6,children:(0,n.jsxs)(Se.ZP,{type:"primary",onClick:function(){Oe(!0),xe({})},children:[(0,n.jsx)(fe.Z,{})," \u6DFB\u52A0\u6570\u636E"]})})}),(0,n.jsx)(t.Z,{gutter:8,style:{marginTop:12},children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsx)(Z.Z,{columns:St,pagination:We,rowKey:function(w){return w.id},loading:$.effects["testcase/insertTestcaseData"]||$.effects["testcase/updateTestcaseData"]||$.effects["testcase/deleteTestcaseData"],dataSource:Ie,locale:{emptyText:(0,n.jsx)(o.Z,{height:"150"})},onChange:function(w){return X(u()(u()({},We),{},{current:w.current}))}})})})]})})]})},Ve=(0,oe.connect)(function(O){var i=O.testcase,m=O.loading;return{testcase:i,loading:m}})(ie),we=e(57445),_e=e.n(we),T=e(22666),_=e(64216),He=e(32224),Je=e(13864),be=e(36334),qe=["index"],et=["title","editable","children","dataIndex","name","record","handleSave","toggleEdit"],Ye=T.Z.Option,$e=L.createContext(null),Et=function(i){var m=i.index,V=_e()(i,qe),$=_.Z.useForm(),F=j()($,1),p=F[0];return(0,n.jsx)(_.Z,{form:p,component:!1,children:(0,n.jsx)($e.Provider,{value:p,children:(0,n.jsx)("tr",u()({},V))})})},ut=function(O){var i=O.columns,m=O.dataSource,V=O.setDataSource,$=(0,L.useState)(null),F=j()($,2),p=F[0],Ee=F[1],ue=function(U){var te=U.title,Ie=U.editable,Qe=U.children,Xe=U.dataIndex,Ke=U.name,q=U.record,xe=U.handleSave,ke=U.toggleEdit,ot=_e()(U,et),Pe=(0,L.useContext)($e),Oe=(0,L.useRef)(null),gt=(0,L.useState)({}),lt=j()(gt,2),yt=lt[0],Ze=lt[1];(0,L.useEffect)(function(){p!=null&&Pe.setFieldsValue(m[p])},[p]);var Ct=function(Ge,se,w){var H=y()(m),d=H.findIndex(function(v){return Ge.key===v.key}),h=H[d];H[d]=u()(u()({},h),{},k()({},se,w)),V(H)},Tt=function(Ge,se,w,H,d){return se==="source"?(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:!0,message:"".concat(Ge," is required.")}],children:(0,n.jsxs)(T.Z,{placeholder:"\u9009\u62E9\u6570\u636E\u6765\u6E90",style:{width:"90%"},ref:H,onSelect:function(v){Ct(w,se,v)},onBlur:d,children:[(0,n.jsx)(Ye,{value:0,children:"Response: \u6B63\u5219"}),(0,n.jsx)(Ye,{value:1,children:"Response: JSONPath"}),(0,n.jsx)(Ye,{value:2,children:"Header: K/V"}),(0,n.jsx)(Ye,{value:3,children:"Cookie: K/V"}),(0,n.jsx)(Ye,{value:4,children:"\u54CD\u5E94\u72B6\u6001\u7801"}),(0,n.jsx)(Ye,{value:5,children:"Body: \u6B63\u5219"}),(0,n.jsx)(Ye,{value:6,children:"Body: JSONPath"}),(0,n.jsx)(Ye,{value:7,children:"Request Header: K/V"})]})}):se==="expression"?(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:w.source!==4,message:"".concat(Ge," is required.")}],children:(0,n.jsx)(He.Z,{ref:H,onPressEnter:d,disabled:w.source===4,onBlur:d,placeholder:w.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"})}):se==="match_index"?(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:[4,1,6,2,3,7].indexOf(w.source)===-1,message:"".concat(Ge," is required.")}],children:(0,n.jsx)(He.Z,{ref:H,onPressEnter:d,disabled:[4,1,6,2,3,7].indexOf(w.source)>-1,onBlur:d,placeholder:w.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u5339\u914D\u9879"})}):(0,n.jsx)(_.Z.Item,{style:{margin:0},name:se,rules:[{required:w.source!==4,message:"".concat(Ge," is required.")}],children:(0,n.jsx)(He.Z,{ref:H,onPressEnter:d,onBlur:d,placeholder:"\u8BF7\u8F93\u5165".concat(Ge)})})},St=function(){var he=f()(s()().mark(function Ge(){var se;return s()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.prev=0,H.next=3,Pe.validateFields();case 3:se=H.sent,Ee(null),Pe.setFieldsValue(q),xe(u()(u()({},q),se)),H.next=12;break;case 9:H.prev=9,H.t0=H.catch(0),console.log("Save failed:",H.t0);case 12:case"end":return H.stop()}},Ge,null,[[0,9]])}));return function(){return he.apply(this,arguments)}}(),ft=Qe;return Ie&&(ft=p===q.key?Tt(Ke,Xe,q,Oe,St):(0,n.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},children:Qe})),(0,n.jsx)("td",u()(u()({},ot),{},{children:ft}))},Q=function(U){var te=y()(m),Ie=te.findIndex(function(Xe){return U.key===Xe.key}),Qe=te[Ie];te.splice(Ie,1,u()(u()({},Qe),U)),te.filter(function(Xe){return Xe.name}).length===te.length&&te.push({key:m.length===0?0:m[m.length-1].key+1,source:1}),V(te)},at=function(U){var te=y()(m);V(te.filter(function(Ie){return Ie.key!==U}).map(function(Ie,Qe){return u()(u()({},Ie),{},{key:Qe})}))},me=i.map(function(X){return X.editable?u()(u()({},X),{},{onCell:function(te){return{record:te,editable:X.editable,dataIndex:X.dataIndex,title:X.title,name:X.name,handleSave:Q}}}):X});me=[].concat(y()(me),[{title:"\u64CD\u4F5C",render:function(U,te){return m.length>1?(0,n.jsx)(Je.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:function(){at(te.key)},children:(0,n.jsx)(be.Z,{twoToneColor:"red",onClick:function(Qe){Qe.stopPropagation()}})}):null}}]);var We={body:{row:Et,cell:ue}};return(0,n.jsx)(Z.Z,{onRow:function(U){return{onClick:function(Ie){Ee(U.key)}}},components:We,rowClassName:"editable-row",dataSource:m,columns:me,pagination:!1})},vt=e(67355),jt={JSONPATH_TITLE:`JSON\u683C\u5F0F\u7684\u89E3\u6790\u540C\u6837\u652F\u6301\u6570\u7EC4\u4E2D\u6307\u5B9A\u5BF9\u8C61\uFF0C\u5982data.itemlist[0]\uFF1B\u652F\u6301\u63D0\u53D6\u6570\u636E\u4E2D\u968F\u673A\u503Cdata.itemlist[random]\uFF1B\u540C\u65F6\u652F\u6301\u63D0\u53D6\u90E8\u5206\u503C\u7EC4\u5408\u4E3A\u65B0\u6570\u7EC4\uFF0Cdata.itemlist[0-99].id\u5BFC\u51FA\u524D100\u4E2Aid\uFF0Cdata.itemlist[all].id\u5373\u5BFC\u51FA\u5168\u90E8id\u3002\u82E5\u60F3\u5C06\u6570\u7EC4\u5185\u7684\u503C\u8FDB\u884C\u904D\u5386\u4F7F\u7528\uFF0C\u8BF7\u7ED3\u5408\u6570\u636E\u5BFC\u51FA\u8282\u70B9\u914D\u5408\u4F7F\u7528\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u53EF\u6307\u5B9A\u5339\u914D\u9879.
                    \u5E38\u89C1\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u4F7F\u7528\u5230\u7684\u5B57\u7B26\u8303\u56F4\u793A\u4F8B\u5982\u4E0B:
                    \u82F1\u6587\u5B57\u6BCD:[a-zA-Z]
                    \u6570\u5B57:[0-9]
                    \u4E2D\u6587\u5B57\u7B26\u8303\u56F4:[\u4E00-\u9FA5]
                    \u4E2D\u6587\u3001\u82F1\u6587\u3001\u6570\u5B57\uFF1A[\u4E00-\u9FA5a-zA-Z0-9]
                    \u6307\u5B9A\u7B26\u5408\u6761\u4EF6\u7684\u5B57\u7B26\u4E2A\u6570\uFF1A[a-zA-Z]{2,4} \u8868\u793A2-4\u4E2A\u5B57\u7B26\uFF1B{2}\u8868\u793A\u5B57\u7B26\u4E2A\u6570\u4E3A2\u4E2A\u3002
                    \u6CE8\u610F\uFF1A\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528*,\u5426\u52190\u4E2A\u4E5F\u4F1A\u5339\u914D\u5230`},Zt={0:"Response: \u6B63\u5219",1:"Response: JSONPath",2:"Header: K/V",3:"Cookie: K/V",4:"\u54CD\u5E94\u72B6\u6001\u7801",5:"Body: \u6B63\u5219",6:"Body: JSONPath",7:"Request Header: K/V"},Bt=function(O){var i=O.dispatch,m=O.testcase,V=O.caseId,$=O.createMode,F=m.outParameters,p=function(Q){i({type:"testcase/save",payload:{outParameters:Q}})},Ee=[{title:"\u51FA\u53C2\u540D",dataIndex:"name",key:"name",name:"\u51FA\u53C2\u540D",width:"20%",editable:!0,render:function(Q){return Q||"\u8BF7\u8F93\u5165\u51FA\u53C2\u540D"}},{title:"\u6765\u6E90",name:"\u6765\u6E90",dataIndex:"source",key:"source",width:"25%",editable:!0,render:function(Q){return Q!==void 0?Zt[Q]:"\u8BF7\u9009\u62E9\u6765\u6E90"}},{name:"\u89E3\u6790\u8868\u8FBE\u5F0F",title:(0,n.jsxs)("span",{children:["\u89E3\u6790\u8868\u8FBE\u5F0F ",(0,n.jsx)(g.Z,{icon:(0,n.jsx)(vt.Z,{}),title:jt.JSONPATH_TITLE})]}),dataIndex:"expression",key:"expression",editable:!0,render:function(Q,at){return at.source!==4?Q||"\u8BF7\u8F93\u5165\u89E3\u6790\u8868\u8FBE\u5F0F":"\u65E0\u9700\u586B\u5199"}},{title:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",name:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",dataIndex:"match_index",editable:!0,render:function(Q,at){return at.source!==4&&at.source!==1&&at.source!==6?Q||"\u8BF7\u8F93\u5165\u5339\u914D\u9879":"\u65E0\u9700\u586B\u5199"}}];return(0,n.jsx)(ut,{columns:Ee,dataSource:F,setDataSource:p})},dt=e(65777),tt=e(18415),xt=dt.Z.TabPane,S=function(i){var m=i.open,V=i.gconfig,$=i.variables,F=i.onCancel,p=[{title:"\u53D8\u91CF\u540D",dataIndex:"name",key:"name",render:function(Q){return(0,n.jsx)(tt.Z.Text,{copyable:!0,children:Q})}}],Ee=[].concat(p,[{title:"\u6765\u6E90",dataIndex:"stepName",key:"stepName"}]);return(0,n.jsx)(Ne.Z,{title:"\u53D8\u91CF\u5217\u8868",open:m,width:500,footer:null,onCancel:F,children:(0,n.jsxs)(dt.Z,{children:[(0,n.jsx)(xt,{tab:"\u5168\u5C40\u53D8\u91CF",children:(0,n.jsx)(Z.Z,{columns:p,dataSource:V,size:"small"})},"global"),(0,n.jsx)(xt,{tab:"\u7528\u4F8B\u53D8\u91CF",children:(0,n.jsx)(Z.Z,{columns:Ee,dataSource:$,size:"small"})},"case")]})})},N=S,b=e(69726),ee=e(23652),Y=e(22070),ht=e(91801),ce=e(74562),Ft=e(89595),Ue=e(56112),Ae=e(33228),D=e(82511),l=e(43322),P=e(41136),ae=e(49776),ve=dt.Z.TabPane,nt=function(i){var m=i.dispatch,V=i.testcase,$=i.case_id,F=i.setSuffix,p=i.body,Ee=i.setBody,ue=i.formData,Q=i.setFormData,at=i.gconfig,me=i.onSubmit,We=i.form,X=i.createMode,U=X===void 0?!1:X,te=i.headers,Ie=i.setHeaders,Qe=i.bodyType,Xe=i.setBodyType,Ke=i.loading,q=V.preConstructor,xe=V.postConstructor,ke=V.activeKey,ot=V.constructors_case,Pe=V.envActiveKey,Oe=V.asserts,gt=V.caseInfo,lt=at.envList,yt=(0,L.useState)(!1),Ze=j()(yt,2),Ct=Ze[0],Tt=Ze[1],St=(0,L.useState)([]),ft=j()(St,2),he=ft[0],Ge=ft[1],se=(0,L.useState)([]),w=j()(se,2),H=w[0],d=w[1],h=(0,L.useState)(localStorage.getItem("case_study")===null),v=j()(h,2),ne=v[0],De=v[1],mt=(0,L.useRef)(null),it=(0,L.useRef)(null),At=(0,L.useRef)(null),Ot=(0,L.useRef)(null),Pt=(0,L.useRef)(null),It=(0,L.useRef)(null),Ut=function(){var B=f()(s()().mark(function x(W){var Fe,z;return s()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Fe=W.map(function(pt){return{case_id:pt.case_id,step_name:pt.name}}),Me.next=3,(0,ee.Sb)(Fe);case 3:z=Me.sent,c.Z.response(z)&&d(Object.keys(z.data).map(function(pt){return z.data[pt]}));case 5:case"end":return Me.stop()}},x)}));return function(W){return B.apply(this,arguments)}}(),Mt=[{title:"\u6570\u636E\u7BA1\u7406",placement:"right",description:"\u6570\u636E\u7BA1\u7406\u6A21\u5757\uFF0C\u4EE5\u6570\u636E\u9A71\u52A8\u7684\u65B9\u5F0F\u6279\u91CF\u8BF7\u6C42\u63A5\u53E3\uFF0C\u89E3\u51B3\u91CD\u590D\u7F16\u5199\u573A\u666F\u7684\u70E6\u607C~\u{1F47B}",cover:(0,n.jsx)(Ue.Z,{width:"100%",style:{height:200},src:"/data_driven.jpeg"}),target:function(){return mt.current}},{title:"\u524D\u7F6E\u6B65\u9AA4",placement:"right",description:"\u5728\u524D\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u9020\u4E00\u5207\u4F60\u9700\u8981\u7684\u6570\u636E\uFF0C\u5305\u62EC\u4F46\u4E0D\u9650\u4E8EDB/Redis\u7B49\uFF0C\u5E76\u80FD\u5C06\u6570\u636E\u4F20\u9012\u4E0B\u53BB\u{1F440}",cover:(0,n.jsx)(Ue.Z,{width:"100%",style:{height:200},src:"/pre.svg"}),target:function(){return it.current}},{title:"\u63A5\u53E3\u8BF7\u6C42",placement:"right",description:"\u5728\u63A5\u53E3\u8BF7\u6C42\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u5EFAHTTP/DUBBO/GRPC\u8FD93\u7C7B\u8BF7\u6C42\uFF0C\u5982\u679C\u9047\u5230\u6709\u53D8\u91CF\u9700\u8981\u586B\u5199\uFF0C\u53EF\u4EE5\u6309\u4E0B\u5FEB\u6377\u952E\u300E$\u300F\u5F39\u51FA\u53D8\u91CF\u83DC\u5355\u54E6~\u{1F42C}",cover:(0,n.jsx)(Ue.Z,{width:"100%",style:{height:200},src:"/api.svg"}),target:function(){return Ot.current}},{title:"\u51FA\u53C2\u63D0\u53D6",placement:"left",description:"\u5728\u51FA\u53C2\u63D0\u53D6\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u63D0\u53D6\u4F60\u5728\u4E0B\u4E00\u4E2A\u6B65\u9AA4\u4E2D\u9700\u8981\u7684\u6570\u636E, \u6BD4\u5982\u4F60\u53EF\u4EE5\u63D0\u53D6\u767B\u5F55\u540E\u7684token\uFF0C\u7528\u4E8E\u63A5\u4E0B\u6765\u7684\u64CD\u4F5C\uFF01\u51FA\u53C2\u63D0\u53D6\u4E3B\u8981\u652F\u6301\u6B63\u5219\u548CJSONPath2\u79CD\u65B9\u5F0F\uFF0C\u5982\u679C\u8FD8\u4E0D\u719F\u6089\u7684\u8BDD\uFF0C\u5EFA\u8BAE\u53BB\u641C\u7D22\u5B66\u4E60\u4E00\u4E0B\u54E6~\u{1F47D}",cover:(0,n.jsx)(Ue.Z,{width:"100%",style:{height:200},src:"/out.svg"}),target:function(){return It.current}},{title:"\u65AD\u8A00",placement:"left",description:"\u5728\u65AD\u8A00\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u5BF9\u4F60\u672C\u6B21\u6D4B\u8BD5\u7684\u6570\u636E\u8FDB\u884C\u6821\u9A8C\uFF0C\u4EE5\u4FBF\u4E8E\u540E\u7EED\u573A\u666F\u81EA\u52A8\u6267\u884C\u65F6\u80FD\u68C0\u6D4B\u51FA\u5F02\u5E38\uFF0C\u65AD\u8A00\u5F88\u91CD\u8981\uFF0C\u8BB0\u5F97\u8981\u586B\u54E6\uFF01\u{1F383}",cover:(0,n.jsx)(Ue.Z,{width:"100%",style:{height:200},src:"/assert.svg"}),target:function(){return Pt.current}},{title:"\u540E\u7F6E\u6B65\u9AA4",placement:"left",description:"\u5728\u540E\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u505A\u4E00\u4E9B\u6E05\u7406\u5DE5\u4F5C\uFF0C\u6BD4\u5982\u5220\u9664\u4F60\u521B\u5EFA\u7684\u6570\u636E\u7B49\uFF0C\u7528\u6CD5\u4E0E\u524D\u7F6E\u6B65\u9AA4\u7C7B\u4F3C~\u{1F680}",cover:(0,n.jsx)(Ue.Z,{width:"100%",style:{height:200},src:"/clean.svg"}),target:function(){return At.current}}];(0,Ft.Z)(["shift.4"],function(){ke!=="4"&&window.location.href.indexOf("/apiTest/testcase/")>-1&&window.location.href.endsWith("/".concat($))&&Tt(!0)},{exactMatch:!0,useCapture:!0});var Ht=function(){var B=f()(s()().mark(function x(){var W;return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,b.Z7)({page:1,size:500});case 2:W=z.sent,c.Z.response(W)&&Ge(W.data.map(function(st){return{name:"${"+st.key+"}"}}));case 4:case"end":return z.stop()}},x)}));return function(){return B.apply(this,arguments)}}();(0,L.useEffect)(function(){Ht()},[]),(0,L.useEffect)(function(){Ut(q)},[q]);var Rt=function(){m({type:"testcase/save",payload:{constructorModal:!0,testCaseConstructorData:{public:!0,enable:!0},currentStep:0,constructRecord:{}}}),m({type:"construct/save",payload:{currentStep:0}})},$t=function(){var B=f()(s()().mark(function x(W){var Fe,z,st,Me=arguments;return s()().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return Fe=Me.length>1&&Me[1]!==void 0?Me[1]:!1,bt.next=3,m({type:"construct/delete",payload:{id:W.id}});case 3:z=bt.sent,z&&(Fe?st=xe.filter(function(ct){return ct.id!==W.id}):st=q.filter(function(ct){return ct.id!==W.id}),m({type:"testcase/save",payload:k()({},Fe?"postConstructor":"preConstructor",st)}));case 5:case"end":return bt.stop()}},x)}));return function(W){return B.apply(this,arguments)}}(),zt=function(){var B=f()(s()().mark(function x(W,Fe){var z;return s()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:z=y()(Fe?xe:q),z.splice(W.index,1),m({type:"testcase/save",payload:k()({},Fe?"postConstructor":"preConstructor",z.map(function(pt,bt){return u()(u()({},pt),{},{index:bt})}))});case 3:case"end":return Me.stop()}},x)}));return function(W,Fe){return B.apply(this,arguments)}}(),kt=function(x,W){return x.type===4?{body:W.body,headers:Y.Z.parseHeaders(W.headers),base_path:W.base_path,url:W.url,request_method:W.request_method,body_type:W.body_type}:W},Kt=function(x){var W=JSON.parse(x.constructor_json);m({type:"construct/save",payload:{currentStep:1,testCaseConstructorData:u()(u()({},x),kt(x,W)),constructorType:x.type}}),m({type:"testcase/save",payload:{constructorModal:!0,constructRecord:x}})},Gt=function(){var B=f()(s()().mark(function x(W,Fe){var z,st,Me,pt=arguments;return s()().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(z=pt.length>2&&pt[2]!==void 0?pt[2]:!1,Me=y()(z?xe:q),!U){ct.next=6;break}st=!0,ct.next=9;break;case 6:return ct.next=8,m({type:"construct/update",payload:u()(u()({},W),{},{enable:Fe})});case 8:st=ct.sent;case 9:st&&(U?Me.forEach(function(Lt,Jt){Jt===W.index&&(Lt.enable=Fe)}):Me.forEach(function(Lt){Lt.id===W.id&&(Lt.enable=Fe)}),m({type:"testcase/save",payload:k()({},z?"postConstructor":"preConstructor",Me)}));case 10:case"end":return ct.stop()}},x)}));return function(W,Fe){return B.apply(this,arguments)}}(),Nt=function(x){var W=JSON.parse(x.constructor_json);if(x.type===0){var Fe=ot[W.case_id];return Fe?(0,n.jsxs)("div",{children:["\u7528\u4F8B:"," ",(0,n.jsx)("a",{href:"/#/apiTest/testcase/".concat(Fe.directory_id,"/").concat(Fe.id),rel:"noreferrer",children:Fe.name})]}):null}if(x.type===1)return(0,n.jsx)("code",{children:W.sql});if(x.type===2)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:W.command})});if(x.type===3)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:W.command})})},Wt=function(x){var W=x.number,Fe=x.bgColor,z=x.color,st=x.style;return W===0?null:(0,n.jsx)("div",{style:u()({display:"inline-block",marginLeft:2,textAlign:"center",width:24,borderRadius:10,background:Fe,color:z},st),children:W})},Vt=[{title:"\u540D\u79F0",key:"name",dataIndex:"name",render:function(x,W,Fe){return(0,n.jsx)("a",{onClick:function(){Kt(u()(u()({},W),{},{tempIndex:Fe}))},children:x})},className:"drag-visible"},{title:"\u7C7B\u578B",key:"type",dataIndex:"type",render:function(x){return(0,n.jsx)(Ae.Z,{color:E.Z.CASE_CONSTRUCTOR_COLOR[x],children:E.Z.CASE_CONSTRUCTOR[x]})},className:"drag-visible"},{title:"\u72B6\u6001",key:"enable",dataIndex:"enable",className:"drag-visible",render:function(x,W){return(0,n.jsx)(D.Z,{defaultChecked:W.enable,onChange:function(){var Fe=f()(s()().mark(function z(st){return s()().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,Gt(W,st);case 2:case"end":return pt.stop()}},z)}));return function(z){return Fe.apply(this,arguments)}}()})}},{title:"\u8FD4\u56DE\u503C",key:"value",dataIndex:"value",className:"drag-visible"},{title:"\u64CD\u4F5C",key:"ops",className:"drag-visible",render:function(x,W,Fe){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){Kt(u()(u()({},W),{},{tempIndex:Fe}))},children:(0,n.jsx)(ht.Z,{})}),(0,n.jsx)("a",{style:{marginLeft:8},onClick:function(){Ne.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6570\u636E\u6784\u9020\u5668\u5417?",icon:(0,n.jsx)(Te.Z,{}),content:"\u5982\u679C\u53EA\u662F\u6682\u65F6\u4E0D\u5F00\u542F\uFF0C\u53EF\u4EE5\u5148\u6682\u505C\u5B83~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var st=f()(s()().mark(function pt(){return s()().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(!U){ct.next=5;break}return ct.next=3,zt(W);case 3:ct.next=7;break;case 5:return ct.next=7,$t(W);case 7:case"end":return ct.stop()}},pt)}));function Me(){return st.apply(this,arguments)}return Me}()})},children:(0,n.jsx)(be.Z,{twoToneColor:"red"})})]})}}];return(0,n.jsxs)(t.Z,{gutter:8,style:{marginTop:36,minHeight:500},children:[(0,n.jsx)(N,{open:Ct,gconfig:he,variables:H,onCancel:function(){return Tt(!1)}}),(0,n.jsx)(l.Z,{open:ne,onClose:function(){localStorage.setItem("case_study","done"),De(!1)},steps:Mt}),(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(dt.Z,{activeKey:ke,onChange:function(x){m({type:"testcase/save",payload:{activeKey:x}}),F(x==="6"),x==="1"&&lt.length>0&&m({type:"testcase/save",payload:{envActiveKey:lt[0].id.toString()}})},tabBarExtraContent:U?null:(0,n.jsxs)(Se.ZP,{style:{marginRight:8},onClick:function(){me(!1)},children:[(0,n.jsx)(ce.Z,{}),"\u4FDD\u5B58"]}),children:[(0,n.jsx)(ve,{tab:(0,n.jsxs)("span",{ref:mt,children:[(0,n.jsx)(A.B,{type:"icon-shujuqudong1"}),"\u6570\u636E\u7BA1\u7406"," ",(0,n.jsx)(g.Z,{onClick:function(){window.open("".concat(E.Z.DOCUMENT_URL,"/%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/%E6%A6%82%E5%BF%B5/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"))},icon:(0,n.jsx)(vt.Z,{}),title:"\u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u5BF9\u591A\u5957\u73AF\u5883\u7684\u6D4B\u8BD5\u6570\u636E\u8FDB\u884C\u7BA1\u7406\uFF0C\u4ECE\u800C\u8FBE\u5230\u6570\u636E\u9A71\u52A8\u7684\u76EE\u7684~\u70B9\u51FB\u6B64\u6309\u94AE\u67E5\u770B\u8BE6\u7EC6\u6587\u6863\u3002"})]}),children:lt.length>0?(0,n.jsx)(dt.Z,{tabPosition:"left",activeKey:Pe,onChange:function(x){m({type:"testcase/save",payload:{envActiveKey:x}})},children:lt.map(function(B){return(0,n.jsx)(ve,{tab:B.name,children:(0,n.jsx)(Ve,{caseId:$,currentEnv:Pe,createMode:U})},B.id)})}):(0,n.jsx)(Re.Z,{height:280,desc:(0,n.jsxs)("span",{children:["\u6CA1\u6709\u4EFB\u4F55\u73AF\u5883\u4FE1\u606F, ",(0,n.jsx)("a",{href:"/#/config/environment",children:"\u53BB\u6DFB\u52A0"})]})})},"1"),(0,n.jsx)(ve,{tab:(0,n.jsxs)("div",{ref:it,children:[(0,n.jsx)(A.B,{type:"icon-DependencyGraph_16x"}),"\u524D\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:q.length,bgColor:"rgb(237, 242, 251)",color:"rgb(29, 98, 203)"})]}),children:q.length===0?(0,n.jsx)(o.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u524D\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u5FEB ",(0,n.jsx)("a",{onClick:Rt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(Ce.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(Se.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Rt,children:[(0,n.jsx)(fe.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(rt.Z,{columns:Vt,dataSource:q,setDataSource:function(x){m({type:"testcase/save",payload:{preConstructor:x}})},loading:Ke.effects["construct/delete"]||Ke.effects["construct/update"],dragCallback:function(){var B=f()(s()().mark(function x(W){return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!U){z.next=2;break}return z.abrupt("return",!0);case 2:return z.next=4,m({type:"construct/orderConstructor",payload:W.map(function(st,Me){return{id:st.id,index:Me}})});case 4:return z.abrupt("return",z.sent);case 5:case"end":return z.stop()}},x)}));return function(x){return B.apply(this,arguments)}}()})]}),(0,n.jsx)(Ce.Z,{span:8,children:(0,n.jsx)(G.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:q.filter(function(B){return B.enable}).length===0?(0,n.jsx)(Re.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u524D\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(P.Z,{children:q.map(function(B,x){return B.enable?(0,n.jsxs)(P.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(ae.Z,{count:x+1,style:{backgroundColor:"#a6d3ff"}},x)," ","\u540D\u79F0:"," ",B.type===0?(0,n.jsx)("a",{children:B.name},B.name):B.name]},x),Nt(B)]},x):null})})})})]})},"2"),(0,n.jsx)(ve,{tab:(0,n.jsxs)("span",{ref:Ot,children:[(0,n.jsx)(A.B,{type:"icon-qingqiu"}),"\u63A5\u53E3\u8BF7\u6C42"]}),children:(0,n.jsx)(t.Z,{gutter:[8,8],children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsx)(M,{form:We,body:p,setBody:Ee,headers:te,formData:ue,setFormData:Q,caseInfo:gt,setHeaders:Ie,bodyType:Qe,setBodyType:Xe,bordered:!1,save:me})})})},"3"),(0,n.jsx)(ve,{tab:(0,n.jsxs)("span",{ref:It,children:[(0,n.jsx)(A.B,{type:"icon-canshu2"}),"\u51FA\u53C2\u63D0\u53D6"," ",(0,n.jsx)(g.Z,{icon:(0,n.jsx)(vt.Z,{}),title:"\u901A\u8FC7\u7BA1\u7406\u8BF7\u6C42\u4EA7\u751F\u7684\u53C2\u6570\uFF0C\u5E2E\u52A9\u6211\u4EEC\u66F4\u597D\u5730\u6539\u5584\u3010\u65AD\u8A00\u3011"})]}),children:(0,n.jsx)(Bt,{caseId:$,createMode:U,dispatch:m,testcase:V})},"4"),(0,n.jsx)(ve,{tab:(0,n.jsxs)("div",{ref:Pt,children:[(0,n.jsx)(A.B,{type:"icon-duanyan"}),"\u65AD\u8A00"," ",(0,n.jsx)(Wt,{number:Oe.length,bgColor:"rgb(233, 249, 245)",color:"rgb(40, 195, 151)"})]}),children:(0,n.jsx)(r,{asserts:Oe,caseId:$,createMode:U})},"5"),(0,n.jsx)(ve,{tab:(0,n.jsxs)("div",{ref:At,children:[(0,n.jsx)(A.B,{type:"icon-qingliwuliuliang"}),"\u540E\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:xe.length,bgColor:"rgb(255, 238, 239)",color:"rgb(255, 87, 95)"})]}),children:xe.length===0?(0,n.jsx)(o.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u540E\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u7D27 ",(0,n.jsx)("a",{onClick:Rt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(Ce.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(Ce.Z,{span:24,children:(0,n.jsxs)(Se.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Rt,children:[(0,n.jsx)(fe.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(rt.Z,{columns:Vt,dataSource:xe,setDataSource:function(x){m({type:"testcase/save",payload:{postConstructor:x}})},loading:Ke.effects["construct/delete"]||Ke.effects["construct/update"],dragCallback:function(){var B=f()(s()().mark(function x(W){return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!U){z.next=2;break}return z.abrupt("return",!0);case 2:return z.next=4,m({type:"construct/orderConstructor",payload:W.map(function(st,Me){return{id:st.id,index:Me}})});case 4:return z.abrupt("return",z.sent);case 5:case"end":return z.stop()}},x)}));return function(x){return B.apply(this,arguments)}}()})]}),(0,n.jsx)(Ce.Z,{span:8,children:(0,n.jsx)(G.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:xe.filter(function(B){return B.enable}).length===0?(0,n.jsx)(o.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u540E\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(P.Z,{children:xe.map(function(B,x){return B.enable?(0,n.jsxs)(P.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(ae.Z,{count:x+1,style:{backgroundColor:"#a6d3ff"}},x)," ","\u540D\u79F0:"," ",B.type===0?(0,n.jsx)("a",{children:B.name},B.name):B.name]},x),Nt(B)]},x):null})})})})]})},"6")]})})]})},ze=(0,oe.connect)(function(O){var i=O.testcase,m=O.gconfig,V=O.loading;return{testcase:i,gconfig:m,loading:V}})(nt)},19895:function(Dt,Be,e){e.d(Be,{Z:function(){return n}});var ge=e(14660),u=e.n(ge),de=e(21464),y=e.n(de),I=e(9350),k=e(64216),je=e(78890),s=e(70940),K=e(81386),f=e(70214),R={caseTitle:"caseTitle___B4Pl6"},j=e(21577),A=e(13982),g=e(48658),o=e(74562),Re=e(28657),L=e(36255),G=e(93251),oe=k.Z.Item,a=function(M){var rt=M.dispatch,C=M.form,Ne=M.testcase,t=M.caseId,Ce=M.body,Se=M.setBody,Z=M.headers,Te=M.setHeaders,fe=M.formData,Le=M.setFormData,ye=M.bodyType,c=M.setBodyType,E=M.setSuffix,le=M.onSubmit,r=M.create,re=r===void 0?!1:r,pe=Ne.caseInfo;return(0,g.useEffect)(function(){C.resetFields(),C.setFieldsValue(pe),Se(pe.body)},[pe]),(0,G.jsx)(k.Z,{form:C,name:"addCase",initialValues:pe,children:(0,G.jsxs)(je.Z,{title:(0,G.jsx)("span",{className:R.caseTitle,children:"\u573A\u666F\u4FE1\u606F"}),extra:re?null:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(s.ZP,{type:"primary",onClick:y()(u()().mark(function ie(){return u()().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return we.next=2,le(re);case 2:case"end":return we.stop()}},ie)})),children:[(0,G.jsx)(o.Z,{})," \u63D0\u4EA4"]}),re?(0,G.jsxs)(s.ZP,{style:{marginLeft:8},children:[(0,G.jsx)(Re.Z,{})," \u6D4B\u8BD5"]}):(0,G.jsxs)(s.ZP,{style:{marginLeft:8},onClick:function(){rt({type:"testcase/save",payload:{editing:!1}})},children:[(0,G.jsx)(o.Z,{})," \u53D6\u6D88"]})]}),children:[(0,G.jsx)(K.Z,{gutter:[8,8],children:A.Z.CaseDetail.map(function(ie){return(0,G.jsx)(f.Z,{span:ie.span||24,children:(0,G.jsx)(oe,{label:ie.label,colon:ie.colon||!0,labelCol:{span:8},wrapperCol:{span:16},rules:[{required:ie.required,message:ie.message}],name:ie.name,valuePropName:ie.valuePropName||"value",children:(0,j.Z)(ie.type,ie.placeholder,ie.component)})})})}),(0,G.jsx)(K.Z,{style:{marginTop:8},children:(0,G.jsx)(f.Z,{span:24,children:(0,G.jsx)(L.Z,{case_id:t,body:Ce,bodyType:ye,setBody:Se,headers:Z,setHeaders:Te,form:C,createMode:re,formData:fe,setFormData:Le,setSuffix:E,setBodyType:c})})})]})})},n=(0,I.connect)(function(J){var M=J.user,rt=J.testcase,C=J.loading;return{testcase:rt,user:M,loading:C}})(a)},10571:function(Dt,Be,e){e.d(Be,{Z:function(){return Le}});var ge=e(14660),u=e.n(ge),de=e(21464),y=e.n(de),I=e(92105),k=e.n(I),je=e(65777),s=e(49776),K=e(50930),f=e(81386),R=e(16747),j=e(86061),A=e(48658),g=e(20077),o=e(95615),Re=e(68508),L=e.n(Re),G=e(7279),oe=e.n(G),a=e(93251),n=60,J={nameFontSize:12,childCountWidth:22,countMarginLeft:0,itemPadding:16,nameMarginLeft:4,rootPadding:18},M=function(ye){var c=ye.data,E=ye.graph,le=ye.setGraph,r=ye.container_id,re=r===void 0?"container":r;return(0,A.useEffect)(function(){if(c!==null){oe().registerNode("treeNode",{draw:function(T,_){var He=T.id,Je=T.label,be=T.collapsed,qe=T.selected,et=T.children,Ye=T.depth,$e=Ye===0,Et=et&&et.length!==0,ut=J.childCountWidth,vt=J.countMarginLeft,jt=J.itemPadding,Zt=J.selectedIconWidth,Bt=J.nameMarginLeft,dt=J.rootPadding,tt=0,xt=28,S=0,N=-xt/2,b=_.addShape("text",{attrs:{text:Je,x:S*2,y:N,textAlign:"left",textBaseline:"top",fontFamily:"PingFangSC-Regular"},cursor:"pointer",name:"name-text-shape"}),ee=b.getBBox().width;tt=ee+jt+Bt,tt=tt<n?n:tt,!$e&&Et&&(tt+=vt,tt+=ut);var Y={x:S,y:N,width:tt,height:xt,radius:4};$e&&qe&&(Y.fill="#e8f7ff",Y.stroke="#e8f7ff");var ht=_.addShape("rect",{attrs:Y,name:"root-key-shape-rect-shape"});$e||_.addShape("path",{attrs:{path:[["M",S-1,0],["L",tt,0]],stroke:"#AAB7C4",lineWidth:1},name:"node-path-shape"});var ce=S-10,Ft=-xt+15;$e&&_.addShape("rect",{attrs:{x:ce,y:Ft,width:tt+12,height:xt,radius:14,fill:"#e8f7ff",cursor:"pointer"},name:"main-shape"});var Ue="rgba(0, 0, 0, .65)";if(qe&&(Ue="#40A8FF"),$e?_.addShape("text",{attrs:{text:Je,x:ce+dt,y:1,textAlign:"left",textBaseline:"middle",fill:Ue,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"root-text-shape"}):_.addShape("text",{attrs:{text:Je,x:qe?ce+6+Bt:ce+6,y:N-5,textAlign:"start",textBaseline:"top",fill:Ue,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"not-root-text-shape"}),Et&&!$e){var Ae=12,D=tt-ut,l=-Ae/2;_.addShape("rect",{attrs:{width:ut,height:12,stroke:be?"#1890ff":"#5CDBD3",fill:be?"#fff":"#E6FFFB",x:D,y:l,radius:6,cursor:"pointer"},name:"child-count-rect-shape"}),_.addShape("text",{attrs:{text:"".concat(et==null?void 0:et.length),fill:"rgba(0, 0, 0, .65)",x:D+ut/2,y:l+12,fontSize:10,width:ut,textAlign:"center",cursor:"pointer"},name:"child-count-text-shape"})}return ht}}),oe().registerEdge("smooth",{draw:function(T,_){var He=T.startPoint,Je=T.endPoint,be=Math.abs(Je.x-He.x),qe=[["M",He.x,He.y],["C",He.x+be/4,He.y,Je.x-be/2,Je.y,Je.x,Je.y]],et=_.addShape("path",{attrs:{stroke:"#AAB7C4",path:qe},name:"smooth-path-shape"});return et}});var pe=document.getElementById(re),ie=pe.scrollWidth,Ve=pe.scrollHeight||400;if(E==null){var we=new(oe()).TreeGraph({container:re,width:ie,height:Ve,modes:{default:[{type:"collapse-expand"},"drag-canvas","zoom-canvas"]},defaultNode:{type:"treeNode",anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"smooth"},layout:{type:"compactBox",direction:"LR",getId:function(T){return T.id},getHeight:function(){return 16},getWidth:function(T){var _=oe().Util.getTextSize(T.label,J.nameFontSize)[0],He=J.itemPadding+J.nameMarginLeft+_+J.rootPadding+J.childCountWidth;return He},getVGap:function(){return 15},getHGap:function(){return 30}}});le(L()({},re,we)),we.data(c),we.render(),we.fitView()}else E.changeData(c),E.render(),E.fitView();typeof window!="undefined"&&(window.onresize=function(){!E||E.get("destroyed")||!pe||!pe.scrollWidth||!pe.scrollHeight||E.changeSize(pe.scrollWidth,pe.scrollHeight)})}},[c]),(0,a.jsx)("div",{})},rt=e(23652),C=e(89148),Ne=e(52538),t=e(18853),Ce=e(88315),Se=e(94519),Z=je.Z.TabPane,Te={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},fe=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],Le=function(ye){var c=ye.response,E=ye.caseName,le=ye.width,r=ye.modal,re=ye.setModal,pe=ye.single,ie=pe===void 0?!0:pe,Ve=(0,A.useState)(null),we=k()(Ve,2),_e=we[0],T=we[1],_=(0,A.useState)([]),He=k()(_,2),Je=He[0],be=He[1],qe=(0,A.useState)({}),et=k()(qe,2),Ye=et[0],$e=et[1],Et=(0,A.useState)(null),ut=k()(Et,2),vt=ut[0],jt=ut[1],Zt=function(){var S=y()(u()().mark(function N(){var b,ee,Y,ht,ce=arguments;return u()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return b=ce.length>0&&ce[0]!==void 0?ce[0]:c.case_id,ee=ce.length>1&&ce[1]!==void 0?ce[1]:!0,Ue.next=4,(0,rt.T4)({case_id:b});case 4:Y=Ue.sent,C.Z.response(Y)&&(ee?T(Y.data):(ht=Object.keys(c).map(function(Ae){return Y.data}),be(ht)));case 6:case"end":return Ue.stop()}},N)}));return function(){return S.apply(this,arguments)}}(),Bt=function(){var S=y()(u()().mark(function N(){var b,ee,Y;return u()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!ie){ce.next=6;break}if(c.case_id===void 0){ce.next=4;break}return ce.next=4,Zt();case 4:ce.next=16;break;case 6:b=0,ee=Object.keys(c);case 7:if(!(b<ee.length)){ce.next=16;break}if(Y=ee[b],c[Y].case_id===void 0){ce.next=12;break}return ce.next=12,Zt(c[Y].case_id,!1);case 12:return ce.abrupt("return");case 13:b++,ce.next=7;break;case 16:case"end":return ce.stop()}},N)}));return function(){return S.apply(this,arguments)}}();(0,A.useEffect)(function(){Bt()},[c]);var dt=function(N){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c;if(b[N]===null||b[N]===void 0||b[N]==="{}")return[];var ee=JSON.parse(b[N]);return Object.keys(ee).map(function(Y){return{key:Y,value:ee[Y]}})},tt=[{title:"\u65AD\u8A00\u4FE1\u606F",key:"msg",dataIndex:"msg"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(N){return(0,a.jsx)(s.Z,{status:N?"success":"error",text:N?"\u901A\u8FC7":"\u672A\u901A\u8FC7"})}}],xt=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c;if(N.asserts===void 0||!N.asserts)return[];var b=JSON.parse(N.asserts),ee=[];return Object.keys(b).forEach(function(Y){typeof b[Y].msg=="string"?ee.push({status:b[Y].status,msg:b[Y].msg}):b[Y].msg.forEach(function(ht){ee.push({status:b[Y].status,msg:ht})})}),ee};return(0,a.jsx)(K.Z,{title:(0,a.jsxs)("span",{children:["[",(0,a.jsx)("strong",{children:E}),"] \u6267\u884C\u8BE6\u60C5"]}),width:le||1e3,open:r,placement:"right",onClose:function(){return re(!1)},children:(0,a.jsx)(f.Z,{gutter:[8,8],children:ie?(0,a.jsxs)(je.Z,{style:{width:"100%",minHeight:460},tabPosition:"left",children:[(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(R.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(R.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:c.status?"success":"error",text:c.status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:c.request_method}),(0,a.jsx)(R.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Te[c.status_code]?Te[c.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[c.status_code," ",Te[c.status_code]?Te[c.status_code].text:""]})}),(0,a.jsx)(R.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:c.cost})})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:c.url}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:c.request_data?(0,a.jsx)(g.Z,{language:"json",style:o.BV,children:c.request_data}):(0,a.jsx)(Ne.Z,{height:120})})]})},"1"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(j.Z,{columns:tt,dataSource:xt(),size:"small",pagination:!1})},"3"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(Se.Z,{language:"html",setEditor:jt,readOnly:!0,value:c.logs,height:"80vh"})},"2"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(j.Z,{columns:fe,dataSource:dt("request_headers"),size:"small",pagination:!1})},"5"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(j.Z,{columns:fe,dataSource:dt("cookies"),size:"small",pagination:!1})},"6"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(j.Z,{columns:fe,dataSource:dt("response_headers"),size:"small",pagination:!1})},"7"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(Ce.Z,{readOnly:!0,setEditor:jt,value:c.response?c.response:"",height:"80vh"})},"4"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container",children:(0,a.jsx)(M,{data:_e,graph:Ye.container,setGraph:$e})})},"8")]}):(0,a.jsx)(je.Z,{style:{width:"100%",minHeight:460},children:Object.keys(c).map(function(S,N){var b;return(0,a.jsx)(Z,{tab:S,children:(0,a.jsxs)(je.Z,{style:{width:"100%"},tabPosition:"left",children:[(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(R.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(R.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:c[S].status?"success":"error",text:c[S].status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:c[S].request_method}),(0,a.jsx)(R.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Te[c[S].status_code]?Te[c[S].status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[c[S].status_code," ",Te[c[S].status_code]?Te[c[S].status_code].text:""]})}),(0,a.jsx)(R.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:c[S].cost})})}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:c[S].url}),(0,a.jsx)(R.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:c[S].request_data?(0,a.jsx)(g.Z,{language:"json",style:o.BV,children:c[S].request_data}):(0,a.jsx)(Ne.Z,{height:120})})]})},"1"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(j.Z,{columns:tt,dataSource:xt(c[S]),size:"small",pagination:!1})},"3"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(Se.Z,{language:"html",setEditor:jt,readOnly:!0,value:(b=c[S])===null||b===void 0?void 0:b.logs,height:"80vh"})},"2"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(j.Z,{columns:fe,dataSource:dt("request_headers",c[S]),size:"small",pagination:!1})},"5"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(j.Z,{columns:fe,dataSource:dt("cookies",c[S]),size:"small",pagination:!1})},"6"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(j.Z,{columns:fe,dataSource:dt("response_headers",c[S]),size:"small",pagination:!1})},"7"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(Ce.Z,{setEditor:jt,readOnly:!0,value:c[S].response?c[S].response:"",height:"80vh"})},"4"),(0,a.jsx)(Z,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container_".concat(N),children:(0,a.jsx)(M,{data:Je[N],graph:Ye["container_".concat(N)],setGraph:$e,container_id:"container_".concat(N)})})},"8")]})},N.toString())})})})})}},43811:function(){}}]);
